[2019/05/01 12:35:18.992 -07:00] [INFO] [mod.rs:25] ["Welcome to TiKV."]
[2019/05/01 12:35:18.992 -07:00] [INFO] [mod.rs:27] []
[2019/05/01 12:35:18.992 -07:00] [INFO] [mod.rs:27] ["Release Version:   3.0.0-beta.1"]
[2019/05/01 12:35:18.992 -07:00] [INFO] [mod.rs:27] ["Git Commit Hash:   56a9a37a7c3357f9ced12ce6534f128b750c43dc"]
[2019/05/01 12:35:18.992 -07:00] [INFO] [mod.rs:27] ["Git Commit Branch: master"]
[2019/05/01 12:35:18.992 -07:00] [INFO] [mod.rs:27] ["UTC Build Time:    2019-04-01 01:29:25"]
[2019/05/01 12:35:18.992 -07:00] [INFO] [mod.rs:27] ["Rust Version:      rustc 1.35.0-nightly (a9da8fc9c 2019-03-04)"]
[2019/05/01 12:35:18.992 -07:00] [INFO] [mod.rs:29] []
[2019/05/01 12:35:18.992 -07:00] [INFO] [tikv-server.rs:494] ["using config"] [config="{\"log-level\":\"info\",\"log-file\":\"/opt/tidb/kv.log\",\"log-rotation-timespan\":\"1d\",\"panic-when-unexpected-key-or-data\":false,\"readpool\":{\"storage\":{\"high-concurrency\":4,\"normal-concurrency\":4,\"low-concurrency\":4,\"max-tasks-per-worker-high\":2000,\"max-tasks-per-worker-normal\":2000,\"max-tasks-per-worker-low\":2000,\"stack-size\":\"10MB\"},\"coprocessor\":{\"high-concurrency\":38,\"normal-concurrency\":38,\"low-concurrency\":38,\"max-tasks-per-worker-high\":2000,\"max-tasks-per-worker-normal\":2000,\"max-tasks-per-worker-low\":2000,\"stack-size\":\"10MB\"}},\"server\":{\"addr\":\"0.0.0.0:20160\",\"advertise-addr\":\"n4:20160\",\"status-addr\":\"0.0.0.0:20180\",\"status-thread-pool-size\":1,\"grpc-compression-type\":\"none\",\"grpc-concurrency\":4,\"grpc-concurrent-stream\":1024,\"grpc-raft-conn-num\":1,\"grpc-stream-initial-window-size\":\"2MB\",\"grpc-keepalive-time\":\"10s\",\"grpc-keepalive-timeout\":\"3s\",\"concurrent-send-snap-limit\":32,\"concurrent-recv-snap-limit\":32,\"end-point-recursion-limit\":1000,\"end-point-stream-channel-size\":8,\"end-point-batch-row-limit\":64,\"end-point-stream-batch-row-limit\":128,\"end-point-request-max-handle-duration\":\"1m\",\"snap-max-write-bytes-per-sec\":\"100MB\",\"snap-max-total-size\":\"0KB\",\"stats-concurrency\":1,\"heavy-load-threshold\":300,\"heavy-load-wait-duration\":\"1ms\",\"labels\":{}},\"storage\":{\"data-dir\":\"/opt/tidb/data/kv\",\"gc-ratio-threshold\":1.1,\"max-key-size\":4096,\"scheduler-notify-capacity\":10240,\"scheduler-concurrency\":2048000,\"scheduler-worker-pool-size\":8,\"scheduler-pending-write-threshold\":\"100MB\"},\"pd\":{\"endpoints\":[\"n1:2379\",\"n2:2379\",\"n3:2379\",\"n4:2379\",\"n5:2379\"]},\"metric\":{\"interval\":\"15s\",\"address\":\"\",\"job\":\"tikv\"},\"raftstore\":{\"sync-log\":true,\"prevote\":true,\"raftdb-path\":\"/opt/tidb/data/kv/raft\",\"capacity\":\"0KB\",\"raft-base-tick-interval\":\"1s\",\"raft-heartbeat-ticks\":2,\"raft-election-timeout-ticks\":10,\"raft-min-election-timeout-ticks\":10,\"raft-max-election-timeout-ticks\":20,\"raft-max-size-per-msg\":\"1MB\",\"raft-max-inflight-msgs\":256,\"raft-entry-max-size\":\"8MB\",\"raft-log-gc-tick-interval\":\"10s\",\"raft-log-gc-threshold\":50,\"raft-log-gc-count-limit\":73728,\"raft-log-gc-size-limit\":\"72MB\",\"raft-entry-cache-life-time\":\"30s\",\"raft-reject-transfer-leader-duration\":\"3s\",\"split-region-check-tick-interval\":\"10s\",\"region-split-check-diff\":\"6MB\",\"region-compact-check-interval\":\"5m\",\"clean-stale-peer-delay\":\"11m\",\"region-compact-check-step\":100,\"region-compact-min-tombstones\":10000,\"region-compact-tombstones-percent\":30,\"pd-heartbeat-tick-interval\":\"5s\",\"pd-store-heartbeat-tick-interval\":\"10s\",\"snap-mgr-gc-tick-interval\":\"1m\",\"snap-gc-timeout\":\"4h\",\"lock-cf-compact-interval\":\"10m\",\"lock-cf-compact-bytes-threshold\":\"256MB\",\"notify-capacity\":40960,\"messages-per-tick\":4096,\"max-peer-down-duration\":\"5m\",\"max-leader-missing-duration\":\"2h\",\"abnormal-leader-missing-duration\":\"10m\",\"peer-stale-state-check-interval\":\"5m\",\"leader-transfer-max-log-lag\":10,\"snap-apply-batch-size\":\"10MB\",\"consistency-check-interval\":\"0s\",\"report-region-flow-interval\":\"1m\",\"raft-store-max-leader-lease\":\"9s\",\"right-derive-when-split\":true,\"allow-remove-leader\":false,\"merge-max-log-gap\":10,\"merge-check-tick-interval\":\"10s\",\"use-delete-range\":false,\"cleanup-import-sst-interval\":\"10m\",\"local-read-batch-size\":1024,\"apply-max-batch-size\":1024,\"apply-pool-size\":2,\"store-max-batch-size\":1024,\"store-pool-size\":2,\"future-poll-size\":1},\"coprocessor\":{\"split-region-on-table\":true,\"batch-split-limit\":10,\"region-max-size\":\"144MB\",\"region-split-size\":\"96MB\",\"region-max-keys\":5,\"region-split-keys\":2},\"rocksdb\":{\"wal-recovery-mode\":2,\"wal-dir\":\"\",\"wal-ttl-seconds\":0,\"wal-size-limit\":\"0KB\",\"max-total-wal-size\":\"4GB\",\"max-background-jobs\":6,\"max-manifest-file-size\":\"128MB\",\"create-if-missing\":true,\"max-open-files\":40960,\"enable-statistics\":true,\"stats-dump-period\":\"10m\",\"compaction-readahead-size\":\"0KB\",\"info-log-max-size\":\"1GB\",\"info-log-roll-time\":\"0s\",\"info-log-keep-log-file-num\":10,\"info-log-dir\":\"\",\"rate-bytes-per-sec\":\"0KB\",\"rate-limiter-mode\":2,\"auto-tuned\":false,\"bytes-per-sync\":\"1MB\",\"wal-bytes-per-sync\":\"512KB\",\"max-sub-compactions\":1,\"writable-file-max-buffer-size\":\"1MB\",\"use-direct-io-for-flush-and-compaction\":false,\"enable-pipelined-write\":true,\"defaultcf\":{\"block-size\":\"64KB\",\"block-cache-size\":\"32995066MB\",\"disable-block-cache\":false,\"cache-index-and-filter-blocks\":true,\"pin-l0-filter-and-index-blocks\":true,\"use-bloom-filter\":true,\"optimize-filters-for-hits\":true,\"whole-key-filtering\":true,\"bloom-filter-bits-per-key\":10,\"block-based-bloom-filter\":false,\"read-amp-bytes-per-bit\":0,\"compression-per-level\":[\"no\",\"no\",\"lz4\",\"lz4\",\"lz4\",\"zstd\",\"zstd\"],\"write-buffer-size\":\"128MB\",\"max-write-buffer-number\":5,\"min-write-buffer-number-to-merge\":1,\"max-bytes-for-level-base\":\"512MB\",\"target-file-size-base\":\"8MB\",\"level0-file-num-compaction-trigger\":4,\"level0-slowdown-writes-trigger\":20,\"level0-stop-writes-trigger\":36,\"max-compaction-bytes\":\"2GB\",\"compaction-pri\":3,\"dynamic-level-bytes\":true,\"num-levels\":7,\"max-bytes-for-level-multiplier\":10,\"compaction-style\":0,\"disable-auto-compactions\":false,\"soft-pending-compaction-bytes-limit\":\"64GB\",\"hard-pending-compaction-bytes-limit\":\"256GB\",\"titan\":{\"min-blob-size\":1024,\"blob-file-compression\":\"lz4\",\"blob-cache-size\":\"0KB\",\"min-gc-batch-size\":\"16MB\",\"max-gc-batch-size\":\"64MB\",\"discardable-ratio\":0.5,\"sample-ratio\":0.1,\"merge-small-file-threshold\":\"8MB\"}},\"writecf\":{\"block-size\":\"64KB\",\"block-cache-size\":\"19797039MB\",\"disable-block-cache\":false,\"cache-index-and-filter-blocks\":true,\"pin-l0-filter-and-index-blocks\":true,\"use-bloom-filter\":true,\"optimize-filters-for-hits\":false,\"whole-key-filtering\":false,\"bloom-filter-bits-per-key\":10,\"block-based-bloom-filter\":false,\"read-amp-bytes-per-bit\":0,\"compression-per-level\":[\"no\",\"no\",\"lz4\",\"lz4\",\"lz4\",\"zstd\",\"zstd\"],\"write-buffer-size\":\"128MB\",\"max-write-buffer-number\":5,\"min-write-buffer-number-to-merge\":1,\"max-bytes-for-level-base\":\"512MB\",\"target-file-size-base\":\"8MB\",\"level0-file-num-compaction-trigger\":4,\"level0-slowdown-writes-trigger\":20,\"level0-stop-writes-trigger\":36,\"max-compaction-bytes\":\"2GB\",\"compaction-pri\":3,\"dynamic-level-bytes\":true,\"num-levels\":7,\"max-bytes-for-level-multiplier\":10,\"compaction-style\":0,\"disable-auto-compactions\":false,\"soft-pending-compaction-bytes-limit\":\"64GB\",\"hard-pending-compaction-bytes-limit\":\"256GB\",\"titan\":{\"min-blob-size\":4294967296,\"blob-file-compression\":\"lz4\",\"blob-cache-size\":\"0KB\",\"min-gc-batch-size\":\"16MB\",\"max-gc-batch-size\":\"64MB\",\"discardable-ratio\":0.5,\"sample-ratio\":0.1,\"merge-small-file-threshold\":\"8MB\"}},\"lockcf\":{\"block-size\":\"16KB\",\"block-cache-size\":\"1GB\",\"disable-block-cache\":false,\"cache-index-and-filter-blocks\":true,\"pin-l0-filter-and-index-blocks\":true,\"use-bloom-filter\":true,\"optimize-filters-for-hits\":false,\"whole-key-filtering\":true,\"bloom-filter-bits-per-key\":10,\"block-based-bloom-filter\":false,\"read-amp-bytes-per-bit\":0,\"compression-per-level\":[\"no\",\"no\",\"no\",\"no\",\"no\",\"no\",\"no\"],\"write-buffer-size\":\"128MB\",\"max-write-buffer-number\":5,\"min-write-buffer-number-to-merge\":1,\"max-bytes-for-level-base\":\"128MB\",\"target-file-size-base\":\"8MB\",\"level0-file-num-compaction-trigger\":1,\"level0-slowdown-writes-trigger\":20,\"level0-stop-writes-trigger\":36,\"max-compaction-bytes\":\"2GB\",\"compaction-pri\":0,\"dynamic-level-bytes\":true,\"num-levels\":7,\"max-bytes-for-level-multiplier\":10,\"compaction-style\":0,\"disable-auto-compactions\":false,\"soft-pending-compaction-bytes-limit\":\"64GB\",\"hard-pending-compaction-bytes-limit\":\"256GB\",\"titan\":{\"min-blob-size\":4294967296,\"blob-file-compression\":\"lz4\",\"blob-cache-size\":\"0KB\",\"min-gc-batch-size\":\"16MB\",\"max-gc-batch-size\":\"64MB\",\"discardable-ratio\":0.5,\"sample-ratio\":0.1,\"merge-small-file-threshold\":\"8MB\"}},\"raftcf\":{\"block-size\":\"16KB\",\"block-cache-size\":\"128MB\",\"disable-block-cache\":false,\"cache-index-and-filter-blocks\":true,\"pin-l0-filter-and-index-blocks\":true,\"use-bloom-filter\":true,\"optimize-filters-for-hits\":true,\"whole-key-filtering\":true,\"bloom-filter-bits-per-key\":10,\"block-based-bloom-filter\":false,\"read-amp-bytes-per-bit\":0,\"compression-per-level\":[\"no\",\"no\",\"no\",\"no\",\"no\",\"no\",\"no\"],\"write-buffer-size\":\"128MB\",\"max-write-buffer-number\":5,\"min-write-buffer-number-to-merge\":1,\"max-bytes-for-level-base\":\"128MB\",\"target-file-size-base\":\"8MB\",\"level0-file-num-compaction-trigger\":1,\"level0-slowdown-writes-trigger\":20,\"level0-stop-writes-trigger\":36,\"max-compaction-bytes\":\"2GB\",\"compaction-pri\":0,\"dynamic-level-bytes\":true,\"num-levels\":7,\"max-bytes-for-level-multiplier\":10,\"compaction-style\":0,\"disable-auto-compactions\":false,\"soft-pending-compaction-bytes-limit\":\"64GB\",\"hard-pending-compaction-bytes-limit\":\"256GB\",\"titan\":{\"min-blob-size\":4294967296,\"blob-file-compression\":\"lz4\",\"blob-cache-size\":\"0KB\",\"min-gc-batch-size\":\"16MB\",\"max-gc-batch-size\":\"64MB\",\"discardable-ratio\":0.5,\"sample-ratio\":0.1,\"merge-small-file-threshold\":\"8MB\"}},\"titan\":{\"enabled\":false,\"dirname\":\"\",\"disable-gc\":false,\"max-background-gc\":1}},\"raftdb\":{\"wal-recovery-mode\":2,\"wal-dir\":\"\",\"wal-ttl-seconds\":0,\"wal-size-limit\":\"0KB\",\"max-total-wal-size\":\"4GB\",\"max-background-jobs\":2,\"max-manifest-file-size\":\"20MB\",\"create-if-missing\":true,\"max-open-files\":40960,\"enable-statistics\":true,\"stats-dump-period\":\"10m\",\"compaction-readahead-size\":\"0KB\",\"info-log-max-size\":\"1GB\",\"info-log-roll-time\":\"0s\",\"info-log-keep-log-file-num\":10,\"info-log-dir\":\"\",\"max-sub-compactions\":1,\"writable-file-max-buffer-size\":\"1MB\",\"use-direct-io-for-flush-and-compaction\":false,\"enable-pipelined-write\":true,\"allow-concurrent-memtable-write\":false,\"bytes-per-sync\":\"1MB\",\"wal-bytes-per-sync\":\"512KB\",\"defaultcf\":{\"block-size\":\"64KB\",\"block-cache-size\":\"2GB\",\"disable-block-cache\":false,\"cache-index-and-filter-blocks\":true,\"pin-l0-filter-and-index-blocks\":true,\"use-bloom-filter\":false,\"optimize-filters-for-hits\":true,\"whole-key-filtering\":true,\"bloom-filter-bits-per-key\":10,\"block-based-bloom-filter\":false,\"read-amp-bytes-per-bit\":0,\"compression-per-level\":[\"no\",\"no\",\"lz4\",\"lz4\",\"lz4\",\"zstd\",\"zstd\"],\"write-buffer-size\":\"128MB\",\"max-write-buffer-number\":5,\"min-write-buffer-number-to-merge\":1,\"max-bytes-for-level-base\":\"512MB\",\"target-file-size-base\":\"8MB\",\"level0-file-num-compaction-trigger\":4,\"level0-slowdown-writes-trigger\":20,\"level0-stop-writes-trigger\":36,\"max-compaction-bytes\":\"2GB\",\"compaction-pri\":0,\"dynamic-level-bytes\":true,\"num-levels\":7,\"max-bytes-for-level-multiplier\":10,\"compaction-style\":0,\"disable-auto-compactions\":false,\"soft-pending-compaction-bytes-limit\":\"64GB\",\"hard-pending-compaction-bytes-limit\":\"256GB\",\"titan\":{\"min-blob-size\":1024,\"blob-file-compression\":\"lz4\",\"blob-cache-size\":\"0KB\",\"min-gc-batch-size\":\"16MB\",\"max-gc-batch-size\":\"64MB\",\"discardable-ratio\":0.5,\"sample-ratio\":0.1,\"merge-small-file-threshold\":\"8MB\"}}},\"security\":{\"ca-path\":\"\",\"cert-path\":\"\",\"key-path\":\"\",\"cipher-file\":\"\"},\"import\":{\"import-dir\":\"/tmp/tikv/import\",\"num-threads\":8,\"num-import-jobs\":8,\"num-import-sst-jobs\":2,\"max-prepare-duration\":\"5m\",\"region-split-size\":\"512MB\",\"stream-channel-window\":128,\"max-open-engines\":8}}"]
[2019/05/01 12:35:18.992 -07:00] [WARN] [tikv-server.rs:79] [check-kernel] [err="kernel parameters net.core.somaxconn got 128, expect 32768"]
[2019/05/01 12:35:18.992 -07:00] [WARN] [tikv-server.rs:79] [check-kernel] [err="kernel parameters net.ipv4.tcp_syncookies got 1, expect 0"]
[2019/05/01 12:35:18.992 -07:00] [WARN] [tikv-server.rs:79] [check-kernel] [err="kernel parameters vm.swappiness got 60, expect 0"]
[2019/05/01 12:35:18.992 -07:00] [INFO] [config.rs:887] ["check data dir"] [mount_fs="FsInfo { tp: \"ext4\", opts: \"rw,relatime,errors=remount-ro,data=ordered\", mnt_dir: \"/\", fsname: \"/dev/md0\" }"] [data_path=/opt/tidb/data/kv]
[2019/05/01 12:35:18.992 -07:00] [INFO] [config.rs:887] ["check data dir"] [mount_fs="FsInfo { tp: \"ext4\", opts: \"rw,relatime,errors=remount-ro,data=ordered\", mnt_dir: \"/\", fsname: \"/dev/md0\" }"] [data_path=/opt/tidb/data/kv/raft]
[2019/05/01 12:35:18.992 -07:00] [WARN] [mod.rs:533] ["environment variable `TZ` is missing, using `/etc/localtime`"]
[2019/05/01 12:35:18.992 -07:00] [INFO] [util.rs:408] ["connecting to PD endpoint"] [endpoints=n1:2379]
[2019/05/01 12:35:19.237 -07:00] [INFO] [unknown:841] ["New connected subchannel at 0x7f8640414420 for subchannel 0x7f8640440000"]
[2019/05/01 12:35:19.238 -07:00] [INFO] [util.rs:408] ["connecting to PD endpoint"] [endpoints=n2:2379]
[2019/05/01 12:35:19.238 -07:00] [INFO] [unknown:841] ["New connected subchannel at 0x7f86404145a0 for subchannel 0x7f8640440200"]
[2019/05/01 12:35:19.239 -07:00] [INFO] [util.rs:408] ["connecting to PD endpoint"] [endpoints=n3:2379]
[2019/05/01 12:35:19.240 -07:00] [INFO] [unknown:841] ["New connected subchannel at 0x7f8640414720 for subchannel 0x7f8640440400"]
[2019/05/01 12:35:19.240 -07:00] [INFO] [util.rs:408] ["connecting to PD endpoint"] [endpoints=n4:2379]
[2019/05/01 12:35:19.241 -07:00] [INFO] [unknown:841] ["New connected subchannel at 0x7f86404148a0 for subchannel 0x7f8640440600"]
[2019/05/01 12:35:19.242 -07:00] [INFO] [util.rs:408] ["connecting to PD endpoint"] [endpoints=n5:2379]
[2019/05/01 12:35:19.242 -07:00] [INFO] [unknown:841] ["New connected subchannel at 0x7f8640843150 for subchannel 0x7f8640440800"]
[2019/05/01 12:35:19.243 -07:00] [INFO] [util.rs:408] ["connecting to PD endpoint"] [endpoints=http://n3:2379]
[2019/05/01 12:35:19.243 -07:00] [INFO] [unknown:841] ["New connected subchannel at 0x7f8640843120 for subchannel 0x7f8640440a00"]
[2019/05/01 12:35:19.244 -07:00] [INFO] [util.rs:408] ["connecting to PD endpoint"] [endpoints=http://n1:2379]
[2019/05/01 12:35:19.245 -07:00] [INFO] [unknown:841] ["New connected subchannel at 0x7f8640414d20 for subchannel 0x7f8640440c00"]
[2019/05/01 12:35:19.246 -07:00] [INFO] [util.rs:467] ["connected to PD leader"] [endpoints=http://n1:2379]
[2019/05/01 12:35:19.246 -07:00] [INFO] [util.rs:396] ["all PD endpoints are consistent"] [endpoints="[\"n1:2379\", \"n2:2379\", \"n3:2379\", \"n4:2379\", \"n5:2379\"]"]
[2019/05/01 12:35:19.247 -07:00] [INFO] [tikv-server.rs:516] ["connect to PD cluster"] [cluster_id=6686144459742056010]
[2019/05/01 12:35:19.247 -07:00] [INFO] [mod.rs:346] ["starting working thread"] [worker=addr-resolver]
[2019/05/01 12:35:19.817 -07:00] [INFO] [mod.rs:346] ["starting working thread"] [worker=storage-scheduler]
[2019/05/01 12:35:19.817 -07:00] [INFO] [mod.rs:346] ["starting working thread"] [worker=gc-worker]
[2019/05/01 12:35:19.817 -07:00] [INFO] [mod.rs:628] ["Storage started."]
[2019/05/01 12:35:19.830 -07:00] [INFO] [server.rs:113] ["listening on addr"] [addr=0.0.0.0:20160]
[2019/05/01 12:35:19.830 -07:00] [INFO] [mod.rs:346] ["starting working thread"] [worker=region-collector-worker]
[2019/05/01 12:35:19.831 -07:00] [INFO] [node.rs:203] ["alloc store id"] [store_id=7]
[2019/05/01 12:35:19.879 -07:00] [INFO] [node.rs:218] ["alloc first region id"] [store_id=7] [cluster_id=6686144459742056010] [region_id=14]
[2019/05/01 12:35:19.883 -07:00] [INFO] [node.rs:225] ["alloc first peer id for first region"] [region_id=14] [peer_id=15]
[2019/05/01 12:35:19.945 -07:00] [INFO] [node.rs:136] ["try bootstrap cluster"] [region="Region { id: 14, start_key: [], end_key: [], region_epoch: Some(RegionEpoch { conf_ver: 1, version: 1, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 4 } }), peers: [Peer { id: 15, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 4 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 14 } }"] [store_id=7]
[2019/05/01 12:35:19.970 -07:00] [ERROR] [util.rs:338] ["request failed"] [err="Grpc(RpcFailure(RpcStatus { status: Unknown, details: Some(\"cluster 6686144459742056010 already bootstrapped\") }))"]
[2019/05/01 12:35:19.973 -07:00] [INFO] [node.rs:274] ["cluster is already bootstrapped"] [cluster_id=6686144459742056010]
[2019/05/01 12:35:20.095 -07:00] [INFO] [node.rs:326] ["start raft store thread"] [store_id=7]
[2019/05/01 12:35:20.095 -07:00] [INFO] [store.rs:772] ["start store"] [takes=38.971µs] [merge_count=0] [applying_count=0] [tombstone_count=0] [region_count=0] [store_id=7]
[2019/05/01 12:35:20.095 -07:00] [INFO] [store.rs:824] ["cleans up garbage data"] [takes=14.851µs] [garbage_range_count=1] [store_id=7]
[2019/05/01 12:35:20.096 -07:00] [INFO] [mod.rs:346] ["starting working thread"] [worker=local-reader]
[2019/05/01 12:35:20.096 -07:00] [INFO] [mod.rs:346] ["starting working thread"] [worker=split-check]
[2019/05/01 12:35:20.096 -07:00] [INFO] [mod.rs:346] ["starting working thread"] [worker=snapshot-worker]
[2019/05/01 12:35:20.096 -07:00] [INFO] [mod.rs:346] ["starting working thread"] [worker=raft-gc-worker]
[2019/05/01 12:35:20.096 -07:00] [INFO] [mod.rs:346] ["starting working thread"] [worker=compact-worker]
[2019/05/01 12:35:20.097 -07:00] [INFO] [future.rs:142] ["starting working thread"] [worker=pd-worker]
[2019/05/01 12:35:20.097 -07:00] [INFO] [mod.rs:346] ["starting working thread"] [worker=consistency-check]
[2019/05/01 12:35:20.097 -07:00] [INFO] [mod.rs:346] ["starting working thread"] [worker=cleanup-sst]
[2019/05/01 12:35:20.097 -07:00] [INFO] [gc_worker.rs:732] ["gc-manager is started"]
[2019/05/01 12:35:20.097 -07:00] [INFO] [mod.rs:346] ["starting working thread"] [worker=snap-handler]
[2019/05/01 12:35:20.097 -07:00] [INFO] [gc_worker.rs:760] ["gc-manager is initializing"]
[2019/05/01 12:35:20.163 -07:00] [INFO] [server.rs:213] ["TiKV is ready to serve"]
[2019/05/01 12:35:20.164 -07:00] [INFO] [status_server.rs:40] ["Status server started"]
[2019/05/01 12:35:30.097 -07:00] [INFO] [util.rs:84] ["heartbeat receiver is refreshed"]
[2019/05/01 12:35:30.923 -07:00] [INFO] [kv.rs:652] ["batch_raft RPC is called, new gRPC stream established"]
[2019/05/01 12:35:31.875 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=49] [region_id=18]
[2019/05/01 12:35:31.875 -07:00] [INFO] [unknown:719] ["[region 18] 49 became follower at term 0"]
[2019/05/01 12:35:31.875 -07:00] [INFO] [unknown:295] ["[region 18] 49 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:35:31.875 -07:00] [INFO] [unknown:719] ["[region 18] 49 became follower at term 1"]
[2019/05/01 12:35:31.875 -07:00] [INFO] [unknown:920] ["[region 18] 49 [term: 1] received a MsgHeartbeat message with higher term from 19 [term: 6]"]
[2019/05/01 12:35:31.875 -07:00] [INFO] [unknown:719] ["[region 18] 49 became follower at term 6"]
[2019/05/01 12:35:31.876 -07:00] [INFO] [transport.rs:277] ["resolve store address ok"] [addr=n1:20160] [store_id=1]
[2019/05/01 12:35:31.876 -07:00] [INFO] [raft_client.rs:59] ["server: new connection with tikv endpoint"] [addr=n1:20160]
[2019/05/01 12:35:31.877 -07:00] [INFO] [unknown:841] ["New connected subchannel at 0x7f8590800300 for subchannel 0x7f8640440e00"]
[2019/05/01 12:35:32.876 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=52] [region_id=24]
[2019/05/01 12:35:32.876 -07:00] [INFO] [unknown:719] ["[region 24] 52 became follower at term 0"]
[2019/05/01 12:35:32.876 -07:00] [INFO] [unknown:295] ["[region 24] 52 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:35:32.876 -07:00] [INFO] [unknown:719] ["[region 24] 52 became follower at term 1"]
[2019/05/01 12:35:32.876 -07:00] [INFO] [unknown:920] ["[region 24] 52 [term: 1] received a MsgHeartbeat message with higher term from 25 [term: 6]"]
[2019/05/01 12:35:32.876 -07:00] [INFO] [unknown:719] ["[region 24] 52 became follower at term 6"]
[2019/05/01 12:35:32.881 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=48] [region_id=16]
[2019/05/01 12:35:32.881 -07:00] [INFO] [unknown:719] ["[region 16] 48 became follower at term 0"]
[2019/05/01 12:35:32.881 -07:00] [INFO] [unknown:295] ["[region 16] 48 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:35:32.881 -07:00] [INFO] [unknown:719] ["[region 16] 48 became follower at term 1"]
[2019/05/01 12:35:32.881 -07:00] [INFO] [unknown:920] ["[region 16] 48 [term: 1] received a MsgHeartbeat message with higher term from 17 [term: 6]"]
[2019/05/01 12:35:32.881 -07:00] [INFO] [unknown:719] ["[region 16] 48 became follower at term 6"]
[2019/05/01 12:35:32.912 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_16_6_432_(default|lock|write).sst] [snap_key=16_6_432]
[2019/05/01 12:35:32.918 -07:00] [INFO] [unknown:1792] ["[region 16] 48 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 432, term: 6]"]
[2019/05/01 12:35:32.918 -07:00] [INFO] [unknown:1816] ["[region 16] 48 restored progress of 17 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:35:32.918 -07:00] [INFO] [unknown:1816] ["[region 16] 48 restored progress of 48 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:35:32.918 -07:00] [INFO] [unknown:474] ["[region 16] 48 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 432, term: 6]"]
[2019/05/01 12:35:32.918 -07:00] [INFO] [unknown:1736] ["[region 16] 48 [commit: 432] restored snapshot [index: 432, term: 6]"]
[2019/05/01 12:35:32.918 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=48] [region_id=16]
[2019/05/01 12:35:32.918 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 432, truncated_state: Some(RaftTruncatedState { index: 432, term: 6, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 16, start_key: [109, 68, 66, 58, 52, 0, 0, 0, 255, 0, 251, 0, 0, 0, 0, 0, 0, 255, 0, 72, 0, 0, 0, 0, 0, 0, 249], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 7, 0, 0, 0, 0, 0, 0, 0, 248], region_epoch: Some(RegionEpoch { conf_ver: 2, version: 5, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 17, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 48, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=48] [region_id=16]
[2019/05/01 12:35:32.937 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 16, start_key: [109, 68, 66, 58, 52, 0, 0, 0, 255, 0, 251, 0, 0, 0, 0, 0, 0, 255, 0, 72, 0, 0, 0, 0, 0, 0, 249], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 7, 0, 0, 0, 0, 0, 0, 0, 248], region_epoch: Some(RegionEpoch { conf_ver: 2, version: 5, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 17, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 48, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=48] [region_id=16]
[2019/05/01 12:35:32.937 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 16] 48"]
[2019/05/01 12:35:32.937 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=16]
[2019/05/01 12:35:32.981 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=43.11591ms] [region_id=16]
[2019/05/01 12:35:33.409 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=60] [region_id=58]
[2019/05/01 12:35:33.409 -07:00] [INFO] [unknown:719] ["[region 58] 60 became follower at term 0"]
[2019/05/01 12:35:33.409 -07:00] [INFO] [unknown:295] ["[region 58] 60 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:35:33.409 -07:00] [INFO] [unknown:719] ["[region 58] 60 became follower at term 1"]
[2019/05/01 12:35:33.409 -07:00] [INFO] [unknown:920] ["[region 58] 60 [term: 1] received a MsgHeartbeat message with higher term from 59 [term: 6]"]
[2019/05/01 12:35:33.409 -07:00] [INFO] [unknown:719] ["[region 58] 60 became follower at term 6"]
[2019/05/01 12:35:33.450 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=69] [region_id=67]
[2019/05/01 12:35:33.450 -07:00] [INFO] [unknown:719] ["[region 67] 69 became follower at term 0"]
[2019/05/01 12:35:33.450 -07:00] [INFO] [unknown:295] ["[region 67] 69 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:35:33.450 -07:00] [INFO] [unknown:719] ["[region 67] 69 became follower at term 1"]
[2019/05/01 12:35:33.450 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=66] [region_id=64]
[2019/05/01 12:35:33.450 -07:00] [INFO] [unknown:719] ["[region 64] 66 became follower at term 0"]
[2019/05/01 12:35:33.450 -07:00] [INFO] [unknown:295] ["[region 64] 66 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:35:33.450 -07:00] [INFO] [unknown:719] ["[region 64] 66 became follower at term 1"]
[2019/05/01 12:35:33.450 -07:00] [INFO] [unknown:920] ["[region 67] 69 [term: 1] received a MsgHeartbeat message with higher term from 68 [term: 6]"]
[2019/05/01 12:35:33.450 -07:00] [INFO] [unknown:719] ["[region 67] 69 became follower at term 6"]
[2019/05/01 12:35:33.450 -07:00] [INFO] [unknown:920] ["[region 64] 66 [term: 1] received a MsgHeartbeat message with higher term from 65 [term: 6]"]
[2019/05/01 12:35:33.450 -07:00] [INFO] [unknown:719] ["[region 64] 66 became follower at term 6"]
[2019/05/01 12:35:33.880 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_18_6_13_(default|lock|write).sst] [snap_key=18_6_13]
[2019/05/01 12:35:33.904 -07:00] [INFO] [unknown:1792] ["[region 18] 49 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 13, term: 6]"]
[2019/05/01 12:35:33.904 -07:00] [INFO] [unknown:1816] ["[region 18] 49 restored progress of 19 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:35:33.904 -07:00] [INFO] [unknown:1816] ["[region 18] 49 restored progress of 49 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:35:33.904 -07:00] [INFO] [unknown:474] ["[region 18] 49 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 13, term: 6]"]
[2019/05/01 12:35:33.904 -07:00] [INFO] [unknown:1736] ["[region 18] 49 [commit: 13] restored snapshot [index: 13, term: 6]"]
[2019/05/01 12:35:33.904 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=49] [region_id=18]
[2019/05/01 12:35:33.904 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 13, truncated_state: Some(RaftTruncatedState { index: 13, term: 6, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 18, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 7, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 9, 0, 0, 0, 0, 0, 0, 0, 248], region_epoch: Some(RegionEpoch { conf_ver: 2, version: 3, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 19, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 49, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=49] [region_id=18]
[2019/05/01 12:35:33.917 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 48, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=493] [term=6] [peer_id=48] [region_id=16]
[2019/05/01 12:35:33.917 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 2, version: 5, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=48] [region_id=16]
[2019/05/01 12:35:33.917 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 16, start_key: [109, 68, 66, 58, 52, 0, 0, 0, 255, 0, 251, 0, 0, 0, 0, 0, 0, 255, 0, 72, 0, 0, 0, 0, 0, 0, 249], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 7, 0, 0, 0, 0, 0, 0, 0, 248], region_epoch: Some(RegionEpoch { conf_ver: 2, version: 5, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 17, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 48, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 48, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=48] [region_id=16]
[2019/05/01 12:35:33.918 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=93] [region_id=91]
[2019/05/01 12:35:33.928 -07:00] [INFO] [unknown:719] ["[region 91] 93 became follower at term 0"]
[2019/05/01 12:35:33.928 -07:00] [INFO] [unknown:295] ["[region 91] 93 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:35:33.928 -07:00] [INFO] [unknown:719] ["[region 91] 93 became follower at term 1"]
[2019/05/01 12:35:33.928 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=90] [region_id=88]
[2019/05/01 12:35:33.928 -07:00] [INFO] [unknown:719] ["[region 88] 90 became follower at term 0"]
[2019/05/01 12:35:33.928 -07:00] [INFO] [unknown:295] ["[region 88] 90 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:35:33.928 -07:00] [INFO] [unknown:719] ["[region 88] 90 became follower at term 1"]
[2019/05/01 12:35:33.928 -07:00] [INFO] [unknown:920] ["[region 91] 93 [term: 1] received a MsgHeartbeat message with higher term from 92 [term: 6]"]
[2019/05/01 12:35:33.928 -07:00] [INFO] [unknown:719] ["[region 91] 93 became follower at term 6"]
[2019/05/01 12:35:33.928 -07:00] [INFO] [unknown:920] ["[region 88] 90 [term: 1] received a MsgHeartbeat message with higher term from 89 [term: 6]"]
[2019/05/01 12:35:33.928 -07:00] [INFO] [unknown:719] ["[region 88] 90 became follower at term 6"]
[2019/05/01 12:35:33.931 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 18] 49"]
[2019/05/01 12:35:33.931 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 18, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 7, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 9, 0, 0, 0, 0, 0, 0, 0, 248], region_epoch: Some(RegionEpoch { conf_ver: 2, version: 3, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 19, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 49, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=49] [region_id=18]
[2019/05/01 12:35:33.931 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=18]
[2019/05/01 12:35:34.002 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=71.268489ms] [region_id=18]
[2019/05/01 12:35:34.024 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_58_6_6_(default|lock|write).sst] [snap_key=58_6_6]
[2019/05/01 12:35:34.039 -07:00] [INFO] [unknown:1792] ["[region 58] 60 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 6, term: 6]"]
[2019/05/01 12:35:34.039 -07:00] [INFO] [unknown:1816] ["[region 58] 60 restored progress of 59 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:35:34.039 -07:00] [INFO] [unknown:1816] ["[region 58] 60 restored progress of 60 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:35:34.039 -07:00] [INFO] [unknown:474] ["[region 58] 60 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 6, term: 6]"]
[2019/05/01 12:35:34.039 -07:00] [INFO] [unknown:1736] ["[region 58] 60 [commit: 6] restored snapshot [index: 6, term: 6]"]
[2019/05/01 12:35:34.039 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=60] [region_id=58]
[2019/05/01 12:35:34.039 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 6, truncated_state: Some(RaftTruncatedState { index: 6, term: 6, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 58, start_key: [], end_key: [109, 66, 111, 111, 116, 115, 116, 114, 255, 97, 255, 112, 75, 101, 121, 0, 0, 255, 0, 0, 251, 0, 0, 0, 0, 0, 255, 0, 0, 115, 0, 0, 0, 0, 0, 250], region_epoch: Some(RegionEpoch { conf_ver: 2, version: 5, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 59, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 60, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=60] [region_id=58]
[2019/05/01 12:35:34.061 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 58] 60"]
[2019/05/01 12:35:34.061 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=58]
[2019/05/01 12:35:34.061 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 58, start_key: [], end_key: [109, 66, 111, 111, 116, 115, 116, 114, 255, 97, 255, 112, 75, 101, 121, 0, 0, 255, 0, 0, 251, 0, 0, 0, 0, 0, 255, 0, 0, 115, 0, 0, 0, 0, 0, 250], region_epoch: Some(RegionEpoch { conf_ver: 2, version: 5, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 59, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 60, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=60] [region_id=58]
[2019/05/01 12:35:34.061 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=57.492µs] [region_id=58]
[2019/05/01 12:35:34.121 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_64_6_14_(default|lock|write).sst] [snap_key=64_6_14]
[2019/05/01 12:35:34.155 -07:00] [INFO] [unknown:1792] ["[region 64] 66 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 14, term: 6]"]
[2019/05/01 12:35:34.155 -07:00] [INFO] [unknown:1816] ["[region 64] 66 restored progress of 65 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:35:34.155 -07:00] [INFO] [unknown:1816] ["[region 64] 66 restored progress of 66 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:35:34.155 -07:00] [INFO] [unknown:474] ["[region 64] 66 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 14, term: 6]"]
[2019/05/01 12:35:34.155 -07:00] [INFO] [unknown:1736] ["[region 64] 66 [commit: 14] restored snapshot [index: 14, term: 6]"]
[2019/05/01 12:35:34.155 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=66] [region_id=64]
[2019/05/01 12:35:34.155 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 14, truncated_state: Some(RaftTruncatedState { index: 14, term: 6, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 64, start_key: [109, 66, 111, 111, 116, 115, 116, 114, 255, 97, 255, 112, 75, 101, 121, 0, 0, 255, 0, 0, 251, 0, 0, 0, 0, 0, 255, 0, 0, 115, 0, 0, 0, 0, 0, 250], end_key: [109, 68, 66, 58, 49, 0, 0, 0, 255, 0, 251, 0, 0, 0, 0, 0, 0, 255, 0, 104, 84, 97, 98, 108, 101, 58, 255, 49, 48, 255, 53, 0, 0, 0, 0, 255, 0, 0, 0, 248, 0, 0, 0, 0, 251], region_epoch: Some(RegionEpoch { conf_ver: 2, version: 5, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 65, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 66, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=66] [region_id=64]
[2019/05/01 12:35:34.234 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 64, start_key: [109, 66, 111, 111, 116, 115, 116, 114, 255, 97, 255, 112, 75, 101, 121, 0, 0, 255, 0, 0, 251, 0, 0, 0, 0, 0, 255, 0, 0, 115, 0, 0, 0, 0, 0, 250], end_key: [109, 68, 66, 58, 49, 0, 0, 0, 255, 0, 251, 0, 0, 0, 0, 0, 0, 255, 0, 104, 84, 97, 98, 108, 101, 58, 255, 49, 48, 255, 53, 0, 0, 0, 0, 255, 0, 0, 0, 248, 0, 0, 0, 0, 251], region_epoch: Some(RegionEpoch { conf_ver: 2, version: 5, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 65, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 66, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=66] [region_id=64]
[2019/05/01 12:35:34.234 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 64] 66"]
[2019/05/01 12:35:34.234 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=64]
[2019/05/01 12:35:34.288 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=53.111695ms] [region_id=64]
[2019/05/01 12:35:34.415 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddLearnerNode, peer: Some(Peer { id: 156, store_id: 3, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=7] [term=6] [peer_id=60] [region_id=58]
[2019/05/01 12:35:34.415 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 2, version: 5, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddLearner] [peer_id=60] [region_id=58]
[2019/05/01 12:35:34.415 -07:00] [INFO] [apply.rs:1476] ["add learner successfully"] [region="Region { id: 58, start_key: [], end_key: [109, 66, 111, 111, 116, 115, 116, 114, 255, 97, 255, 112, 75, 101, 121, 0, 0, 255, 0, 0, 251, 0, 0, 0, 0, 0, 255, 0, 0, 115, 0, 0, 0, 0, 0, 250], region_epoch: Some(RegionEpoch { conf_ver: 2, version: 5, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 59, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 60, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 156, store_id: 3, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=60] [region_id=58]
[2019/05/01 12:35:34.456 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddLearnerNode, peer: Some(Peer { id: 157, store_id: 3, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=15] [term=6] [peer_id=66] [region_id=64]
[2019/05/01 12:35:34.456 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 2, version: 5, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddLearner] [peer_id=66] [region_id=64]
[2019/05/01 12:35:34.456 -07:00] [INFO] [apply.rs:1476] ["add learner successfully"] [region="Region { id: 64, start_key: [109, 66, 111, 111, 116, 115, 116, 114, 255, 97, 255, 112, 75, 101, 121, 0, 0, 255, 0, 0, 251, 0, 0, 0, 0, 0, 255, 0, 0, 115, 0, 0, 0, 0, 0, 250], end_key: [109, 68, 66, 58, 49, 0, 0, 0, 255, 0, 251, 0, 0, 0, 0, 0, 0, 255, 0, 104, 84, 97, 98, 108, 101, 58, 255, 49, 48, 255, 53, 0, 0, 0, 0, 255, 0, 0, 0, 248, 0, 0, 0, 0, 251], region_epoch: Some(RegionEpoch { conf_ver: 2, version: 5, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 65, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 66, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 157, store_id: 3, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=66] [region_id=64]
[2019/05/01 12:35:34.880 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_24_6_7_(default|lock|write).sst] [snap_key=24_6_7]
[2019/05/01 12:35:34.886 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: BatchSplit, change_peer: None, split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: Some(BatchSplitRequest { requests: [SplitRequest { split_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 7, 95, 114, 128, 0, 0, 0, 0, 255, 0, 0, 1, 0, 0, 0, 0, 0, 250], new_region_id: 88, new_peer_ids: [89, 90], right_derive: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, SplitRequest { split_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 7, 95, 114, 128, 0, 0, 0, 0, 255, 0, 234, 97, 0, 0, 0, 0, 0, 250], new_region_id: 91, new_peer_ids: [92, 93], right_derive: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], right_derive: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=14] [term=6] [peer_id=49] [region_id=18]
[2019/05/01 12:35:34.886 -07:00] [INFO] [unknown:1792] ["[region 24] 52 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 7, term: 6]"]
[2019/05/01 12:35:34.886 -07:00] [INFO] [apply.rs:1582] ["split region"] [keys="[[116, 128, 0, 0, 0, 0, 0, 0, 255, 7, 95, 114, 128, 0, 0, 0, 0, 255, 0, 0, 1, 0, 0, 0, 0, 0, 250], [116, 128, 0, 0, 0, 0, 0, 0, 255, 7, 95, 114, 128, 0, 0, 0, 0, 255, 0, 234, 97, 0, 0, 0, 0, 0, 250]]"] [region="Region { id: 18, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 7, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 9, 0, 0, 0, 0, 0, 0, 0, 248], region_epoch: Some(RegionEpoch { conf_ver: 2, version: 3, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 19, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 49, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=49] [region_id=18]
[2019/05/01 12:35:34.886 -07:00] [INFO] [unknown:1816] ["[region 24] 52 restored progress of 25 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:35:34.886 -07:00] [INFO] [unknown:1816] ["[region 24] 52 restored progress of 52 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:35:34.886 -07:00] [INFO] [unknown:474] ["[region 24] 52 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 7, term: 6]"]
[2019/05/01 12:35:34.886 -07:00] [INFO] [unknown:1736] ["[region 24] 52 [commit: 7] restored snapshot [index: 7, term: 6]"]
[2019/05/01 12:35:34.886 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=52] [region_id=24]
[2019/05/01 12:35:34.886 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 7, truncated_state: Some(RaftTruncatedState { index: 7, term: 6, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 24, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 24, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 0, 0, 0, 0, 0, 0, 0, 248], region_epoch: Some(RegionEpoch { conf_ver: 2, version: 6, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 25, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 52, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=52] [region_id=24]
[2019/05/01 12:35:34.896 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 49, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=15] [term=6] [peer_id=49] [region_id=18]
[2019/05/01 12:35:34.896 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 2, version: 5, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=49] [region_id=18]
[2019/05/01 12:35:34.896 -07:00] [INFO] [peer.rs:1424] ["insert new region"] [region="Region { id: 88, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 7, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 7, 95, 114, 128, 0, 0, 0, 0, 255, 0, 0, 1, 0, 0, 0, 0, 0, 250], region_epoch: Some(RegionEpoch { conf_ver: 2, version: 5, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 89, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 90, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region_id=88]
[2019/05/01 12:35:34.896 -07:00] [INFO] [router.rs:449] ["[region 88] shutdown mailbox"]
[2019/05/01 12:35:34.896 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 18, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 7, 95, 114, 128, 0, 0, 0, 0, 255, 0, 234, 97, 0, 0, 0, 0, 0, 250], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 9, 0, 0, 0, 0, 0, 0, 0, 248], region_epoch: Some(RegionEpoch { conf_ver: 2, version: 5, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 19, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 49, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 49, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=49] [region_id=18]
[2019/05/01 12:35:34.896 -07:00] [INFO] [peer.rs:127] ["create peer"] [peer_id=90] [region_id=88]
[2019/05/01 12:35:34.896 -07:00] [INFO] [unknown:719] ["[region 88] 90 became follower at term 5"]
[2019/05/01 12:35:34.896 -07:00] [INFO] [unknown:295] ["[region 88] 90 newRaft [peers: [89], term: 5, commit: 5, applied: 5, last_index: 5, last_term: 5]"]
[2019/05/01 12:35:34.896 -07:00] [INFO] [peer.rs:1424] ["insert new region"] [region="Region { id: 91, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 7, 95, 114, 128, 0, 0, 0, 0, 255, 0, 0, 1, 0, 0, 0, 0, 0, 250], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 7, 95, 114, 128, 0, 0, 0, 0, 255, 0, 234, 97, 0, 0, 0, 0, 0, 250], region_epoch: Some(RegionEpoch { conf_ver: 2, version: 5, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 92, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 93, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region_id=91]
[2019/05/01 12:35:34.896 -07:00] [INFO] [router.rs:449] ["[region 91] shutdown mailbox"]
[2019/05/01 12:35:34.896 -07:00] [INFO] [peer.rs:127] ["create peer"] [peer_id=93] [region_id=91]
[2019/05/01 12:35:34.896 -07:00] [INFO] [unknown:719] ["[region 91] 93 became follower at term 5"]
[2019/05/01 12:35:34.896 -07:00] [INFO] [unknown:295] ["[region 91] 93 newRaft [peers: [92], term: 5, commit: 5, applied: 5, last_index: 5, last_term: 5]"]
[2019/05/01 12:35:34.897 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 88] 90"]
[2019/05/01 12:35:34.897 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 91] 93"]
[2019/05/01 12:35:34.919 -07:00] [INFO] [peer.rs:626] ["failed to schedule peer tick"] [err="sending on a disconnected channel"] [tick=Raft] [peer_id=93] [region_id=91]
[2019/05/01 12:35:34.924 -07:00] [INFO] [peer.rs:626] ["failed to schedule peer tick"] [err="sending on a disconnected channel"] [tick=Raft] [peer_id=90] [region_id=88]
[2019/05/01 12:35:34.945 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 24] 52"]
[2019/05/01 12:35:34.945 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 24, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 24, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 0, 0, 0, 0, 0, 0, 0, 248], region_epoch: Some(RegionEpoch { conf_ver: 2, version: 6, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 25, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 52, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=52] [region_id=24]
[2019/05/01 12:35:34.945 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=24]
[2019/05/01 12:35:34.945 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=40.454µs] [region_id=24]
[2019/05/01 12:35:35.022 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_67_6_8_(default|lock|write).sst] [snap_key=67_6_8]
[2019/05/01 12:35:35.034 -07:00] [INFO] [unknown:1792] ["[region 67] 69 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 8, term: 6]"]
[2019/05/01 12:35:35.034 -07:00] [INFO] [unknown:1816] ["[region 67] 69 restored progress of 68 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:35:35.034 -07:00] [INFO] [unknown:1816] ["[region 67] 69 restored progress of 69 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:35:35.034 -07:00] [INFO] [unknown:474] ["[region 67] 69 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 8, term: 6]"]
[2019/05/01 12:35:35.034 -07:00] [INFO] [unknown:1736] ["[region 67] 69 [commit: 8] restored snapshot [index: 8, term: 6]"]
[2019/05/01 12:35:35.034 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=69] [region_id=67]
[2019/05/01 12:35:35.034 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 8, truncated_state: Some(RaftTruncatedState { index: 8, term: 6, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 67, start_key: [109, 68, 66, 58, 49, 0, 0, 0, 255, 0, 251, 0, 0, 0, 0, 0, 0, 255, 0, 104, 84, 97, 98, 108, 101, 58, 255, 49, 48, 255, 53, 0, 0, 0, 0, 255, 0, 0, 0, 248, 0, 0, 0, 0, 251], end_key: [109, 68, 66, 58, 52, 0, 0, 0, 255, 0, 251, 0, 0, 0, 0, 0, 0, 255, 0, 72, 0, 0, 0, 0, 0, 0, 249], region_epoch: Some(RegionEpoch { conf_ver: 2, version: 5, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 68, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 69, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=69] [region_id=67]
[2019/05/01 12:35:35.068 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 67, start_key: [109, 68, 66, 58, 49, 0, 0, 0, 255, 0, 251, 0, 0, 0, 0, 0, 0, 255, 0, 104, 84, 97, 98, 108, 101, 58, 255, 49, 48, 255, 53, 0, 0, 0, 0, 255, 0, 0, 0, 248, 0, 0, 0, 0, 251], end_key: [109, 68, 66, 58, 52, 0, 0, 0, 255, 0, 251, 0, 0, 0, 0, 0, 0, 255, 0, 72, 0, 0, 0, 0, 0, 0, 249], region_epoch: Some(RegionEpoch { conf_ver: 2, version: 5, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 68, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 69, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=69] [region_id=67]
[2019/05/01 12:35:35.068 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=67]
[2019/05/01 12:35:35.068 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 67] 69"]
[2019/05/01 12:35:35.101 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=33.219667ms] [region_id=67]
[2019/05/01 12:35:35.140 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddLearnerNode, peer: Some(Peer { id: 159, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=494] [term=6] [peer_id=48] [region_id=16]
[2019/05/01 12:35:35.140 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 3, version: 5, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddLearner] [peer_id=48] [region_id=16]
[2019/05/01 12:35:35.140 -07:00] [INFO] [apply.rs:1476] ["add learner successfully"] [region="Region { id: 16, start_key: [109, 68, 66, 58, 52, 0, 0, 0, 255, 0, 251, 0, 0, 0, 0, 0, 0, 255, 0, 72, 0, 0, 0, 0, 0, 0, 249], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 7, 0, 0, 0, 0, 0, 0, 0, 248], region_epoch: Some(RegionEpoch { conf_ver: 3, version: 5, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 17, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 48, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 159, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=48] [region_id=16]
[2019/05/01 12:35:35.222 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_88_6_6_(default|lock|write).sst] [snap_key=88_6_6]
[2019/05/01 12:35:35.234 -07:00] [INFO] [unknown:920] ["[region 88] 90 [term: 5] received a MsgSnapshot message with higher term from 89 [term: 6]"]
[2019/05/01 12:35:35.234 -07:00] [INFO] [unknown:719] ["[region 88] 90 became follower at term 6"]
[2019/05/01 12:35:35.234 -07:00] [INFO] [unknown:1792] ["[region 88] 90 [commit: 5, lastindex: 5, lastterm: 5] starts to restore snapshot [index: 6, term: 6]"]
[2019/05/01 12:35:35.234 -07:00] [INFO] [unknown:1816] ["[region 88] 90 restored progress of 89 [Some(Progress { matched: 0, next_idx: 6, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:35:35.234 -07:00] [INFO] [unknown:1816] ["[region 88] 90 restored progress of 90 [Some(Progress { matched: 5, next_idx: 6, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:35:35.234 -07:00] [INFO] [unknown:474] ["[region 88] 90 log [committed=5, applied=5, unstable.offset=6, unstable.entries.len()=0] starts to restore snapshot [index: 6, term: 6]"]
[2019/05/01 12:35:35.234 -07:00] [INFO] [unknown:1736] ["[region 88] 90 [commit: 6] restored snapshot [index: 6, term: 6]"]
[2019/05/01 12:35:35.234 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=90] [region_id=88]
[2019/05/01 12:35:35.234 -07:00] [INFO] [peer_storage.rs:1290] ["finish clear peer meta"] [takes=24.238µs] [raft_logs=0] [raft_key=1] [apply_key=1] [meta_key=1] [region_id=88]
[2019/05/01 12:35:35.234 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 6, truncated_state: Some(RaftTruncatedState { index: 6, term: 6, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 88, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 7, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 7, 95, 114, 128, 0, 0, 0, 0, 255, 0, 0, 1, 0, 0, 0, 0, 0, 250], region_epoch: Some(RegionEpoch { conf_ver: 2, version: 5, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 89, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 90, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=90] [region_id=88]
[2019/05/01 12:35:35.252 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 88] 90"]
[2019/05/01 12:35:35.252 -07:00] [INFO] [apply.rs:2349] ["re-register to apply delegates"] [term=6] [peer_id=90] [region_id=88]
[2019/05/01 12:35:35.252 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 88, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 7, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 7, 95, 114, 128, 0, 0, 0, 0, 255, 0, 0, 1, 0, 0, 0, 0, 0, 250], region_epoch: Some(RegionEpoch { conf_ver: 2, version: 5, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 89, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 90, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=90] [region_id=88]
[2019/05/01 12:35:35.252 -07:00] [INFO] [region_info_accessor.rs:230] ["trying to create region but it already exists, try to update it"] [region_id=88]
[2019/05/01 12:35:35.252 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=88]
[2019/05/01 12:35:35.252 -07:00] [INFO] [peer.rs:1931] ["region changed after applying snapshot"] [region="Region { id: 88, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 7, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 7, 95, 114, 128, 0, 0, 0, 0, 255, 0, 0, 1, 0, 0, 0, 0, 0, 250], region_epoch: Some(RegionEpoch { conf_ver: 2, version: 5, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 89, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 90, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [prev_region="Region { id: 88, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 7, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 7, 95, 114, 128, 0, 0, 0, 0, 255, 0, 0, 1, 0, 0, 0, 0, 0, 250], region_epoch: Some(RegionEpoch { conf_ver: 2, version: 5, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 89, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 90, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=90] [region_id=88]
[2019/05/01 12:35:35.330 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=77.715823ms] [region_id=88]
[2019/05/01 12:35:35.457 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddLearnerNode, peer: Some(Peer { id: 158, store_id: 3, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=9] [term=6] [peer_id=69] [region_id=67]
[2019/05/01 12:35:35.457 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 2, version: 5, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddLearner] [peer_id=69] [region_id=67]
[2019/05/01 12:35:35.457 -07:00] [INFO] [apply.rs:1476] ["add learner successfully"] [region="Region { id: 67, start_key: [109, 68, 66, 58, 49, 0, 0, 0, 255, 0, 251, 0, 0, 0, 0, 0, 0, 255, 0, 104, 84, 97, 98, 108, 101, 58, 255, 49, 48, 255, 53, 0, 0, 0, 0, 255, 0, 0, 0, 248, 0, 0, 0, 0, 251], end_key: [109, 68, 66, 58, 52, 0, 0, 0, 255, 0, 251, 0, 0, 0, 0, 0, 0, 255, 0, 72, 0, 0, 0, 0, 0, 0, 249], region_epoch: Some(RegionEpoch { conf_ver: 2, version: 5, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 68, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 69, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 158, store_id: 3, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=69] [region_id=67]
[2019/05/01 12:35:35.888 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 52, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=8] [term=6] [peer_id=52] [region_id=24]
[2019/05/01 12:35:35.888 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 2, version: 6, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=52] [region_id=24]
[2019/05/01 12:35:35.888 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 24, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 24, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 0, 0, 0, 0, 0, 0, 0, 248], region_epoch: Some(RegionEpoch { conf_ver: 2, version: 6, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 25, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 52, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 52, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=52] [region_id=24]
[2019/05/01 12:35:35.913 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddLearnerNode, peer: Some(Peer { id: 160, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=7] [term=6] [peer_id=90] [region_id=88]
[2019/05/01 12:35:35.913 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 2, version: 5, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddLearner] [peer_id=90] [region_id=88]
[2019/05/01 12:35:35.913 -07:00] [INFO] [apply.rs:1476] ["add learner successfully"] [region="Region { id: 88, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 7, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 7, 95, 114, 128, 0, 0, 0, 0, 255, 0, 0, 1, 0, 0, 0, 0, 0, 250], region_epoch: Some(RegionEpoch { conf_ver: 2, version: 5, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 89, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 90, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 160, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=90] [region_id=88]
[2019/05/01 12:35:35.920 -07:00] [INFO] [unknown:920] ["[region 91] 93 [term: 5] received a MsgHeartbeat message with higher term from 92 [term: 6]"]
[2019/05/01 12:35:35.929 -07:00] [INFO] [unknown:719] ["[region 91] 93 became follower at term 6"]
[2019/05/01 12:35:35.944 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_91_6_6_(default|lock|write).sst] [snap_key=91_6_6]
[2019/05/01 12:35:35.963 -07:00] [INFO] [unknown:1792] ["[region 91] 93 [commit: 5, lastindex: 5, lastterm: 5] starts to restore snapshot [index: 6, term: 6]"]
[2019/05/01 12:35:35.963 -07:00] [INFO] [unknown:1816] ["[region 91] 93 restored progress of 92 [Some(Progress { matched: 0, next_idx: 6, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:35:35.963 -07:00] [INFO] [unknown:1816] ["[region 91] 93 restored progress of 93 [Some(Progress { matched: 5, next_idx: 6, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:35:35.963 -07:00] [INFO] [unknown:474] ["[region 91] 93 log [committed=5, applied=5, unstable.offset=6, unstable.entries.len()=0] starts to restore snapshot [index: 6, term: 6]"]
[2019/05/01 12:35:35.963 -07:00] [INFO] [unknown:1736] ["[region 91] 93 [commit: 6] restored snapshot [index: 6, term: 6]"]
[2019/05/01 12:35:35.963 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=93] [region_id=91]
[2019/05/01 12:35:35.963 -07:00] [INFO] [peer_storage.rs:1290] ["finish clear peer meta"] [takes=30.908µs] [raft_logs=0] [raft_key=1] [apply_key=1] [meta_key=1] [region_id=91]
[2019/05/01 12:35:35.963 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 6, truncated_state: Some(RaftTruncatedState { index: 6, term: 6, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 91, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 7, 95, 114, 128, 0, 0, 0, 0, 255, 0, 0, 1, 0, 0, 0, 0, 0, 250], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 7, 95, 114, 128, 0, 0, 0, 0, 255, 0, 234, 97, 0, 0, 0, 0, 0, 250], region_epoch: Some(RegionEpoch { conf_ver: 2, version: 5, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 92, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 93, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=93] [region_id=91]
[2019/05/01 12:35:35.998 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 91, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 7, 95, 114, 128, 0, 0, 0, 0, 255, 0, 0, 1, 0, 0, 0, 0, 0, 250], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 7, 95, 114, 128, 0, 0, 0, 0, 255, 0, 234, 97, 0, 0, 0, 0, 0, 250], region_epoch: Some(RegionEpoch { conf_ver: 2, version: 5, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 92, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 93, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=93] [region_id=91]
[2019/05/01 12:35:35.998 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 91] 93"]
[2019/05/01 12:35:35.998 -07:00] [INFO] [apply.rs:2349] ["re-register to apply delegates"] [term=6] [peer_id=93] [region_id=91]
[2019/05/01 12:35:35.998 -07:00] [INFO] [peer.rs:1931] ["region changed after applying snapshot"] [region="Region { id: 91, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 7, 95, 114, 128, 0, 0, 0, 0, 255, 0, 0, 1, 0, 0, 0, 0, 0, 250], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 7, 95, 114, 128, 0, 0, 0, 0, 255, 0, 234, 97, 0, 0, 0, 0, 0, 250], region_epoch: Some(RegionEpoch { conf_ver: 2, version: 5, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 92, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 93, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [prev_region="Region { id: 91, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 7, 95, 114, 128, 0, 0, 0, 0, 255, 0, 0, 1, 0, 0, 0, 0, 0, 250], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 7, 95, 114, 128, 0, 0, 0, 0, 255, 0, 234, 97, 0, 0, 0, 0, 0, 250], region_epoch: Some(RegionEpoch { conf_ver: 2, version: 5, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 92, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 93, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=93] [region_id=91]
[2019/05/01 12:35:35.998 -07:00] [INFO] [region_info_accessor.rs:230] ["trying to create region but it already exists, try to update it"] [region_id=91]
[2019/05/01 12:35:35.998 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=91]
[2019/05/01 12:35:36.190 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=191.743924ms] [region_id=91]
[2019/05/01 12:35:37.235 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 93, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=7] [term=6] [peer_id=93] [region_id=91]
[2019/05/01 12:35:37.235 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 2, version: 5, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=93] [region_id=91]
[2019/05/01 12:35:37.235 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 91, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 7, 95, 114, 128, 0, 0, 0, 0, 255, 0, 0, 1, 0, 0, 0, 0, 0, 250], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 7, 95, 114, 128, 0, 0, 0, 0, 255, 0, 234, 97, 0, 0, 0, 0, 0, 250], region_epoch: Some(RegionEpoch { conf_ver: 2, version: 5, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 92, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 93, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 93, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=93] [region_id=91]
[2019/05/01 12:35:38.425 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 156, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=8] [term=6] [peer_id=60] [region_id=58]
[2019/05/01 12:35:38.425 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 3, version: 5, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=60] [region_id=58]
[2019/05/01 12:35:38.425 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 58, start_key: [], end_key: [109, 66, 111, 111, 116, 115, 116, 114, 255, 97, 255, 112, 75, 101, 121, 0, 0, 255, 0, 0, 251, 0, 0, 0, 0, 0, 255, 0, 0, 115, 0, 0, 0, 0, 0, 250], region_epoch: Some(RegionEpoch { conf_ver: 3, version: 5, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 59, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 60, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 156, store_id: 3, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 156, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=60] [region_id=58]
[2019/05/01 12:35:38.460 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 158, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=10] [term=6] [peer_id=69] [region_id=67]
[2019/05/01 12:35:38.461 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 3, version: 5, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=69] [region_id=67]
[2019/05/01 12:35:38.461 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 67, start_key: [109, 68, 66, 58, 49, 0, 0, 0, 255, 0, 251, 0, 0, 0, 0, 0, 0, 255, 0, 104, 84, 97, 98, 108, 101, 58, 255, 49, 48, 255, 53, 0, 0, 0, 0, 255, 0, 0, 0, 248, 0, 0, 0, 0, 251], end_key: [109, 68, 66, 58, 52, 0, 0, 0, 255, 0, 251, 0, 0, 0, 0, 0, 0, 255, 0, 72, 0, 0, 0, 0, 0, 0, 249], region_epoch: Some(RegionEpoch { conf_ver: 3, version: 5, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 68, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 69, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 158, store_id: 3, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 158, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=69] [region_id=67]
[2019/05/01 12:35:38.461 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 157, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=16] [term=6] [peer_id=66] [region_id=64]
[2019/05/01 12:35:38.461 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 3, version: 5, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=66] [region_id=64]
[2019/05/01 12:35:38.461 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 64, start_key: [109, 66, 111, 111, 116, 115, 116, 114, 255, 97, 255, 112, 75, 101, 121, 0, 0, 255, 0, 0, 251, 0, 0, 0, 0, 0, 255, 0, 0, 115, 0, 0, 0, 0, 0, 250], end_key: [109, 68, 66, 58, 49, 0, 0, 0, 255, 0, 251, 0, 0, 0, 0, 0, 0, 255, 0, 104, 84, 97, 98, 108, 101, 58, 255, 49, 48, 255, 53, 0, 0, 0, 0, 255, 0, 0, 0, 248, 0, 0, 0, 0, 251], region_epoch: Some(RegionEpoch { conf_ver: 3, version: 5, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 65, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 66, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 157, store_id: 3, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 157, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=66] [region_id=64]
[2019/05/01 12:35:38.544 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 60, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=9] [term=6] [peer_id=60] [region_id=58]
[2019/05/01 12:35:38.544 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 4, version: 5, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=60] [region_id=58]
[2019/05/01 12:35:38.544 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 58, start_key: [], end_key: [109, 66, 111, 111, 116, 115, 116, 114, 255, 97, 255, 112, 75, 101, 121, 0, 0, 255, 0, 0, 251, 0, 0, 0, 0, 0, 255, 0, 0, 115, 0, 0, 0, 0, 0, 250], region_epoch: Some(RegionEpoch { conf_ver: 4, version: 5, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 59, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 60, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 156, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 60, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=60] [region_id=58]
[2019/05/01 12:35:38.644 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 66, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=17] [term=6] [peer_id=66] [region_id=64]
[2019/05/01 12:35:38.644 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 4, version: 5, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=66] [region_id=64]
[2019/05/01 12:35:38.644 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 64, start_key: [109, 66, 111, 111, 116, 115, 116, 114, 255, 97, 255, 112, 75, 101, 121, 0, 0, 255, 0, 0, 251, 0, 0, 0, 0, 0, 255, 0, 0, 115, 0, 0, 0, 0, 0, 250], end_key: [109, 68, 66, 58, 49, 0, 0, 0, 255, 0, 251, 0, 0, 0, 0, 0, 0, 255, 0, 104, 84, 97, 98, 108, 101, 58, 255, 49, 48, 255, 53, 0, 0, 0, 0, 255, 0, 0, 0, 248, 0, 0, 0, 0, 251], region_epoch: Some(RegionEpoch { conf_ver: 4, version: 5, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 65, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 66, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 157, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 66, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=66] [region_id=64]
[2019/05/01 12:35:38.739 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 69, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=11] [term=6] [peer_id=69] [region_id=67]
[2019/05/01 12:35:38.739 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 4, version: 5, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=69] [region_id=67]
[2019/05/01 12:35:38.739 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 67, start_key: [109, 68, 66, 58, 49, 0, 0, 0, 255, 0, 251, 0, 0, 0, 0, 0, 0, 255, 0, 104, 84, 97, 98, 108, 101, 58, 255, 49, 48, 255, 53, 0, 0, 0, 0, 255, 0, 0, 0, 248, 0, 0, 0, 0, 251], end_key: [109, 68, 66, 58, 52, 0, 0, 0, 255, 0, 251, 0, 0, 0, 0, 0, 0, 255, 0, 72, 0, 0, 0, 0, 0, 0, 249], region_epoch: Some(RegionEpoch { conf_ver: 4, version: 5, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 68, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 69, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 158, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 69, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=69] [region_id=67]
[2019/05/01 12:35:38.838 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddLearnerNode, peer: Some(Peer { id: 164, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=8] [term=6] [peer_id=93] [region_id=91]
[2019/05/01 12:35:38.838 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 3, version: 5, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddLearner] [peer_id=93] [region_id=91]
[2019/05/01 12:35:38.838 -07:00] [INFO] [apply.rs:1476] ["add learner successfully"] [region="Region { id: 91, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 7, 95, 114, 128, 0, 0, 0, 0, 255, 0, 0, 1, 0, 0, 0, 0, 0, 250], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 7, 95, 114, 128, 0, 0, 0, 0, 255, 0, 234, 97, 0, 0, 0, 0, 0, 250], region_epoch: Some(RegionEpoch { conf_ver: 3, version: 5, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 92, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 93, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 164, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=93] [region_id=91]
[2019/05/01 12:35:38.919 -07:00] [INFO] [peer.rs:626] ["failed to schedule peer tick"] [err="sending on a disconnected channel"] [tick=PdHeartbeat] [peer_id=90] [region_id=88]
[2019/05/01 12:35:38.919 -07:00] [INFO] [peer.rs:626] ["failed to schedule peer tick"] [err="sending on a disconnected channel"] [tick=PdHeartbeat] [peer_id=93] [region_id=91]
[2019/05/01 12:35:38.937 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 160, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=8] [term=6] [peer_id=90] [region_id=88]
[2019/05/01 12:35:38.937 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 3, version: 5, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=90] [region_id=88]
[2019/05/01 12:35:38.937 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 88, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 7, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 7, 95, 114, 128, 0, 0, 0, 0, 255, 0, 0, 1, 0, 0, 0, 0, 0, 250], region_epoch: Some(RegionEpoch { conf_ver: 3, version: 5, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 89, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 90, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 160, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 160, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=90] [region_id=88]
[2019/05/01 12:35:38.958 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddLearnerNode, peer: Some(Peer { id: 165, store_id: 3, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=16] [term=6] [peer_id=49] [region_id=18]
[2019/05/01 12:35:38.958 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 3, version: 5, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddLearner] [peer_id=49] [region_id=18]
[2019/05/01 12:35:38.958 -07:00] [INFO] [apply.rs:1476] ["add learner successfully"] [region="Region { id: 18, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 7, 95, 114, 128, 0, 0, 0, 0, 255, 0, 234, 97, 0, 0, 0, 0, 0, 250], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 9, 0, 0, 0, 0, 0, 0, 0, 248], region_epoch: Some(RegionEpoch { conf_ver: 3, version: 5, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 19, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 49, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 165, store_id: 3, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=49] [region_id=18]
[2019/05/01 12:35:39.345 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 90, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=9] [term=6] [peer_id=90] [region_id=88]
[2019/05/01 12:35:39.345 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 4, version: 5, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=90] [region_id=88]
[2019/05/01 12:35:39.345 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 88, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 7, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 7, 95, 114, 128, 0, 0, 0, 0, 255, 0, 0, 1, 0, 0, 0, 0, 0, 250], region_epoch: Some(RegionEpoch { conf_ver: 4, version: 5, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 89, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 90, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 160, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 90, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=90] [region_id=88]
[2019/05/01 12:35:39.921 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 159, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=495] [term=6] [peer_id=48] [region_id=16]
[2019/05/01 12:35:39.921 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 4, version: 5, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=48] [region_id=16]
[2019/05/01 12:35:39.921 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 16, start_key: [109, 68, 66, 58, 52, 0, 0, 0, 255, 0, 251, 0, 0, 0, 0, 0, 0, 255, 0, 72, 0, 0, 0, 0, 0, 0, 249], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 7, 0, 0, 0, 0, 0, 0, 0, 248], region_epoch: Some(RegionEpoch { conf_ver: 4, version: 5, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 17, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 48, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 159, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 159, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=48] [region_id=16]
[2019/05/01 12:35:40.045 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddLearnerNode, peer: Some(Peer { id: 168, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=9] [term=6] [peer_id=52] [region_id=24]
[2019/05/01 12:35:40.045 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 3, version: 6, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddLearner] [peer_id=52] [region_id=24]
[2019/05/01 12:35:40.045 -07:00] [INFO] [apply.rs:1476] ["add learner successfully"] [region="Region { id: 24, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 24, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 0, 0, 0, 0, 0, 0, 0, 248], region_epoch: Some(RegionEpoch { conf_ver: 3, version: 6, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 25, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 52, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 168, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=52] [region_id=24]
[2019/05/01 12:35:41.074 -07:00] [INFO] [kv.rs:652] ["batch_raft RPC is called, new gRPC stream established"]
[2019/05/01 12:35:41.074 -07:00] [INFO] [unknown:920] ["[region 64] 66 [term: 6] received a MsgRequestVote message with higher term from 157 [term: 7]"]
[2019/05/01 12:35:41.074 -07:00] [INFO] [unknown:719] ["[region 64] 66 became follower at term 7"]
[2019/05/01 12:35:41.074 -07:00] [INFO] [unknown:1083] ["[region 64] 66 [logterm: 6, index: 17, vote: 0] cast MsgRequestVote for 157 [logterm: 6, index: 17] at term 7"]
[2019/05/01 12:35:41.089 -07:00] [INFO] [transport.rs:277] ["resolve store address ok"] [addr=n5:20160] [store_id=3]
[2019/05/01 12:35:41.089 -07:00] [INFO] [raft_client.rs:59] ["server: new connection with tikv endpoint"] [addr=n5:20160]
[2019/05/01 12:35:41.089 -07:00] [INFO] [unknown:841] ["New connected subchannel at 0x7f859006c270 for subchannel 0x7f8640441000"]
[2019/05/01 12:35:42.902 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 165, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=17] [term=6] [peer_id=49] [region_id=18]
[2019/05/01 12:35:42.902 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 4, version: 5, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=49] [region_id=18]
[2019/05/01 12:35:42.902 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 18, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 7, 95, 114, 128, 0, 0, 0, 0, 255, 0, 234, 97, 0, 0, 0, 0, 0, 250], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 9, 0, 0, 0, 0, 0, 0, 0, 248], region_epoch: Some(RegionEpoch { conf_ver: 4, version: 5, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 19, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 49, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 165, store_id: 3, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 165, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=49] [region_id=18]
[2019/05/01 12:35:42.929 -07:00] [INFO] [kv.rs:652] ["batch_raft RPC is called, new gRPC stream established"]
[2019/05/01 12:35:42.929 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=171] [region_id=102]
[2019/05/01 12:35:42.929 -07:00] [INFO] [unknown:719] ["[region 102] 171 became follower at term 0"]
[2019/05/01 12:35:42.929 -07:00] [INFO] [unknown:295] ["[region 102] 171 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:35:42.929 -07:00] [INFO] [unknown:719] ["[region 102] 171 became follower at term 1"]
[2019/05/01 12:35:42.929 -07:00] [INFO] [unknown:920] ["[region 102] 171 [term: 1] received a MsgHeartbeat message with higher term from 104 [term: 7]"]
[2019/05/01 12:35:42.929 -07:00] [INFO] [unknown:719] ["[region 102] 171 became follower at term 7"]
[2019/05/01 12:35:42.930 -07:00] [INFO] [transport.rs:277] ["resolve store address ok"] [addr=n2:20160] [store_id=2]
[2019/05/01 12:35:42.930 -07:00] [INFO] [raft_client.rs:59] ["server: new connection with tikv endpoint"] [addr=n2:20160]
[2019/05/01 12:35:42.930 -07:00] [INFO] [unknown:841] ["New connected subchannel at 0x7f858fa011e0 for subchannel 0x7f8640441200"]
[2019/05/01 12:35:42.960 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 164, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=9] [term=6] [peer_id=93] [region_id=91]
[2019/05/01 12:35:42.960 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 4, version: 5, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=93] [region_id=91]
[2019/05/01 12:35:42.960 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 91, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 7, 95, 114, 128, 0, 0, 0, 0, 255, 0, 0, 1, 0, 0, 0, 0, 0, 250], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 7, 95, 114, 128, 0, 0, 0, 0, 255, 0, 234, 97, 0, 0, 0, 0, 0, 250], region_epoch: Some(RegionEpoch { conf_ver: 4, version: 5, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 92, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 93, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 164, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 164, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=93] [region_id=91]
[2019/05/01 12:35:43.702 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=213] [region_id=108]
[2019/05/01 12:35:43.702 -07:00] [INFO] [unknown:719] ["[region 108] 213 became follower at term 0"]
[2019/05/01 12:35:43.702 -07:00] [INFO] [unknown:295] ["[region 108] 213 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:35:43.702 -07:00] [INFO] [unknown:719] ["[region 108] 213 became follower at term 1"]
[2019/05/01 12:35:43.702 -07:00] [INFO] [unknown:920] ["[region 108] 213 [term: 1] received a MsgHeartbeat message with higher term from 109 [term: 6]"]
[2019/05/01 12:35:43.702 -07:00] [INFO] [unknown:719] ["[region 108] 213 became follower at term 6"]
[2019/05/01 12:35:43.919 -07:00] [INFO] [peer.rs:626] ["failed to schedule peer tick"] [err="sending on a disconnected channel"] [tick=SplitRegionCheck] [peer_id=90] [region_id=88]
[2019/05/01 12:35:43.919 -07:00] [INFO] [peer.rs:626] ["failed to schedule peer tick"] [err="sending on a disconnected channel"] [tick=RaftLogGc] [peer_id=90] [region_id=88]
[2019/05/01 12:35:43.919 -07:00] [INFO] [peer.rs:626] ["failed to schedule peer tick"] [err="sending on a disconnected channel"] [tick=RaftLogGc] [peer_id=93] [region_id=91]
[2019/05/01 12:35:43.919 -07:00] [INFO] [peer.rs:626] ["failed to schedule peer tick"] [err="sending on a disconnected channel"] [tick=SplitRegionCheck] [peer_id=93] [region_id=91]
[2019/05/01 12:35:43.989 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 168, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=10] [term=6] [peer_id=52] [region_id=24]
[2019/05/01 12:35:43.989 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 4, version: 6, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=52] [region_id=24]
[2019/05/01 12:35:43.989 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 24, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 24, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 0, 0, 0, 0, 0, 0, 0, 248], region_epoch: Some(RegionEpoch { conf_ver: 4, version: 6, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 25, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 52, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 168, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 168, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=52] [region_id=24]
[2019/05/01 12:35:44.191 -07:00] [INFO] [unknown:1625] ["[region 67] 69 [term 6] received MsgTimeoutNow from 68 and starts an election to get leadership."]
[2019/05/01 12:35:44.191 -07:00] [INFO] [unknown:739] ["[region 67] 69 became candidate at term 7"]
[2019/05/01 12:35:44.191 -07:00] [INFO] [unknown:854] ["[region 67] 69 received MsgRequestVoteResponse from 69 at term 7"]
[2019/05/01 12:35:44.191 -07:00] [INFO] [unknown:828] ["[region 67] 69 [logterm: 6, index: 11] sent MsgRequestVote request to 68 at term 7"]
[2019/05/01 12:35:44.191 -07:00] [INFO] [unknown:828] ["[region 67] 69 [logterm: 6, index: 11] sent MsgRequestVote request to 158 at term 7"]
[2019/05/01 12:35:44.221 -07:00] [INFO] [unknown:854] ["[region 67] 69 received MsgRequestVoteResponse from 68 at term 7"]
[2019/05/01 12:35:44.221 -07:00] [INFO] [unknown:1550] ["[region 67] 69 [quorum:2] has received 2 MsgRequestVoteResponse votes and 0 vote rejections"]
[2019/05/01 12:35:44.221 -07:00] [INFO] [unknown:789] ["[region 67] 69 became leader at term 7"]
[2019/05/01 12:35:44.222 -07:00] [INFO] [client.rs:329] ["heartbeat sender is refreshed"]
[2019/05/01 12:35:44.222 -07:00] [ERROR] [client.rs:348] ["failed to send heartbeat"] [err="Grpc(RpcFinished(Some(RpcStatus { status: Ok, details: None })))"]
[2019/05/01 12:35:44.222 -07:00] [ERROR] [util.rs:298] ["request failed, retry"] [err="Grpc(RpcFinished(Some(RpcStatus { status: Ok, details: None })))"]
[2019/05/01 12:35:44.222 -07:00] [ERROR] [util.rs:298] ["request failed, retry"] [err="Other(SendError(\"...\"))"]
[2019/05/01 12:35:44.222 -07:00] [ERROR] [util.rs:298] ["request failed, retry"] [err="Other(SendError(\"...\"))"]
[2019/05/01 12:35:44.222 -07:00] [INFO] [util.rs:244] ["updating PD client, block the tokio core"]
[2019/05/01 12:35:44.222 -07:00] [INFO] [util.rs:408] ["connecting to PD endpoint"] [endpoints=http://n3:2379]
[2019/05/01 12:35:44.223 -07:00] [INFO] [unknown:841] ["New connected subchannel at 0x7f8640843270 for subchannel 0x7f8640441400"]
[2019/05/01 12:35:44.224 -07:00] [INFO] [util.rs:408] ["connecting to PD endpoint"] [endpoints=http://n1:2379]
[2019/05/01 12:35:44.224 -07:00] [INFO] [util.rs:467] ["connected to PD leader"] [endpoints=http://n1:2379]
[2019/05/01 12:35:44.225 -07:00] [WARN] [util.rs:187] ["heartbeat sender and receiver are stale, refreshing ..."]
[2019/05/01 12:35:44.225 -07:00] [WARN] [util.rs:206] ["updating PD client done"] [spend=2.557349ms]
[2019/05/01 12:35:44.225 -07:00] [INFO] [client.rs:329] ["heartbeat sender is refreshed"]
[2019/05/01 12:35:44.225 -07:00] [INFO] [util.rs:84] ["heartbeat receiver is refreshed"]
[2019/05/01 12:35:44.286 -07:00] [INFO] [unknown:1625] ["[region 24] 52 [term 6] received MsgTimeoutNow from 25 and starts an election to get leadership."]
[2019/05/01 12:35:44.287 -07:00] [INFO] [unknown:739] ["[region 24] 52 became candidate at term 7"]
[2019/05/01 12:35:44.287 -07:00] [INFO] [unknown:854] ["[region 24] 52 received MsgRequestVoteResponse from 52 at term 7"]
[2019/05/01 12:35:44.287 -07:00] [INFO] [unknown:828] ["[region 24] 52 [logterm: 6, index: 10] sent MsgRequestVote request to 168 at term 7"]
[2019/05/01 12:35:44.287 -07:00] [INFO] [unknown:828] ["[region 24] 52 [logterm: 6, index: 10] sent MsgRequestVote request to 25 at term 7"]
[2019/05/01 12:35:44.296 -07:00] [INFO] [transport.rs:277] ["resolve store address ok"] [addr=n3:20160] [store_id=6]
[2019/05/01 12:35:44.296 -07:00] [INFO] [raft_client.rs:59] ["server: new connection with tikv endpoint"] [addr=n3:20160]
[2019/05/01 12:35:44.296 -07:00] [INFO] [unknown:841] ["New connected subchannel at 0x7f858f660120 for subchannel 0x7f8640441600"]
[2019/05/01 12:35:44.305 -07:00] [INFO] [unknown:854] ["[region 24] 52 received MsgRequestVoteResponse from 25 at term 7"]
[2019/05/01 12:35:44.305 -07:00] [INFO] [unknown:1550] ["[region 24] 52 [quorum:2] has received 2 MsgRequestVoteResponse votes and 0 vote rejections"]
[2019/05/01 12:35:44.305 -07:00] [INFO] [unknown:789] ["[region 24] 52 became leader at term 7"]
[2019/05/01 12:35:44.306 -07:00] [INFO] [kv.rs:652] ["batch_raft RPC is called, new gRPC stream established"]
[2019/05/01 12:35:44.355 -07:00] [INFO] [unknown:1625] ["[region 18] 49 [term 6] received MsgTimeoutNow from 19 and starts an election to get leadership."]
[2019/05/01 12:35:44.355 -07:00] [INFO] [unknown:739] ["[region 18] 49 became candidate at term 7"]
[2019/05/01 12:35:44.355 -07:00] [INFO] [unknown:854] ["[region 18] 49 received MsgRequestVoteResponse from 49 at term 7"]
[2019/05/01 12:35:44.355 -07:00] [INFO] [unknown:828] ["[region 18] 49 [logterm: 6, index: 17] sent MsgRequestVote request to 165 at term 7"]
[2019/05/01 12:35:44.355 -07:00] [INFO] [unknown:828] ["[region 18] 49 [logterm: 6, index: 17] sent MsgRequestVote request to 19 at term 7"]
[2019/05/01 12:35:44.372 -07:00] [INFO] [unknown:854] ["[region 18] 49 received MsgRequestVoteResponse from 165 at term 7"]
[2019/05/01 12:35:44.372 -07:00] [INFO] [unknown:1550] ["[region 18] 49 [quorum:2] has received 2 MsgRequestVoteResponse votes and 0 vote rejections"]
[2019/05/01 12:35:44.372 -07:00] [INFO] [unknown:789] ["[region 18] 49 became leader at term 7"]
[2019/05/01 12:35:44.942 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=258] [region_id=117]
[2019/05/01 12:35:44.942 -07:00] [INFO] [unknown:719] ["[region 117] 258 became follower at term 0"]
[2019/05/01 12:35:44.942 -07:00] [INFO] [unknown:295] ["[region 117] 258 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:35:44.942 -07:00] [INFO] [unknown:719] ["[region 117] 258 became follower at term 1"]
[2019/05/01 12:35:44.942 -07:00] [INFO] [unknown:920] ["[region 117] 258 [term: 1] received a MsgHeartbeat message with higher term from 119 [term: 7]"]
[2019/05/01 12:35:44.942 -07:00] [INFO] [unknown:719] ["[region 117] 258 became follower at term 7"]
[2019/05/01 12:35:44.944 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_102_7_9_(default|lock|write).sst] [snap_key=102_7_9]
[2019/05/01 12:35:44.955 -07:00] [INFO] [unknown:1792] ["[region 102] 171 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 9, term: 7]"]
[2019/05/01 12:35:44.955 -07:00] [INFO] [unknown:1816] ["[region 102] 171 restored progress of 103 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:35:44.955 -07:00] [INFO] [unknown:1816] ["[region 102] 171 restored progress of 104 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:35:44.955 -07:00] [INFO] [unknown:1816] ["[region 102] 171 restored progress of 171 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:35:44.955 -07:00] [INFO] [unknown:474] ["[region 102] 171 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 9, term: 7]"]
[2019/05/01 12:35:44.955 -07:00] [INFO] [unknown:1736] ["[region 102] 171 [commit: 9] restored snapshot [index: 9, term: 7]"]
[2019/05/01 12:35:44.955 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=171] [region_id=102]
[2019/05/01 12:35:44.955 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 9, truncated_state: Some(RaftTruncatedState { index: 9, term: 7, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 102, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 97, 117, 116, 111, 255, 99, 111, 109, 109, 255, 105, 116, 0, 255, 0, 0, 0, 0, 0, 249, 0, 0, 253], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 97, 117, 116, 111, 255, 109, 97, 116, 105, 255, 99, 95, 115, 255, 112, 95, 112, 114, 105, 255, 118, 105, 255, 108, 101, 103, 101, 115, 0, 254, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 4, version: 17, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 103, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 104, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 171, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=171] [region_id=102]
[2019/05/01 12:35:44.982 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 102, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 97, 117, 116, 111, 255, 99, 111, 109, 109, 255, 105, 116, 0, 255, 0, 0, 0, 0, 0, 249, 0, 0, 253], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 97, 117, 116, 111, 255, 109, 97, 116, 105, 255, 99, 95, 115, 255, 112, 95, 112, 114, 105, 255, 118, 105, 255, 108, 101, 103, 101, 115, 0, 254, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 4, version: 17, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 103, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 104, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 171, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=171] [region_id=102]
[2019/05/01 12:35:44.982 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 102] 171"]
[2019/05/01 12:35:44.982 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=102]
[2019/05/01 12:35:45.000 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=17.232909ms] [region_id=102]
[2019/05/01 12:35:45.706 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_108_6_8_(default|lock|write).sst] [snap_key=108_6_8]
[2019/05/01 12:35:45.713 -07:00] [INFO] [unknown:1792] ["[region 108] 213 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 8, term: 6]"]
[2019/05/01 12:35:45.713 -07:00] [INFO] [unknown:1816] ["[region 108] 213 restored progress of 109 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:35:45.713 -07:00] [INFO] [unknown:1816] ["[region 108] 213 restored progress of 110 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:35:45.713 -07:00] [INFO] [unknown:1816] ["[region 108] 213 restored progress of 213 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:35:45.713 -07:00] [INFO] [unknown:474] ["[region 108] 213 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 8, term: 6]"]
[2019/05/01 12:35:45.713 -07:00] [INFO] [unknown:1736] ["[region 108] 213 [commit: 8] restored snapshot [index: 8, term: 6]"]
[2019/05/01 12:35:45.713 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=213] [region_id=108]
[2019/05/01 12:35:45.713 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 8, truncated_state: Some(RaftTruncatedState { index: 8, term: 6, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 108, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 97, 118, 111, 105, 255, 100, 95, 116, 101, 255, 109, 112, 111, 255, 114, 97, 108, 95, 117, 255, 112, 103, 255, 114, 97, 100, 101, 0, 0, 253, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 97, 99, 107, 255, 95, 108, 111, 103, 255, 0, 0, 0, 255, 0, 0, 0, 0, 0, 247, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 4, version: 17, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 109, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 110, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 213, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=213] [region_id=108]
[2019/05/01 12:35:45.729 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 108, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 97, 118, 111, 105, 255, 100, 95, 116, 101, 255, 109, 112, 111, 255, 114, 97, 108, 95, 117, 255, 112, 103, 255, 114, 97, 100, 101, 0, 0, 253, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 97, 99, 107, 255, 95, 108, 111, 103, 255, 0, 0, 0, 255, 0, 0, 0, 0, 0, 247, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 4, version: 17, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 109, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 110, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 213, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=213] [region_id=108]
[2019/05/01 12:35:45.729 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 108] 213"]
[2019/05/01 12:35:45.729 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=108]
[2019/05/01 12:35:45.746 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=16.448101ms] [region_id=108]
[2019/05/01 12:35:45.933 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=260] [region_id=123]
[2019/05/01 12:35:45.933 -07:00] [INFO] [unknown:719] ["[region 123] 260 became follower at term 0"]
[2019/05/01 12:35:45.933 -07:00] [INFO] [unknown:295] ["[region 123] 260 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:35:45.933 -07:00] [INFO] [unknown:719] ["[region 123] 260 became follower at term 1"]
[2019/05/01 12:35:45.933 -07:00] [INFO] [unknown:920] ["[region 123] 260 [term: 1] received a MsgHeartbeat message with higher term from 125 [term: 7]"]
[2019/05/01 12:35:45.933 -07:00] [INFO] [unknown:719] ["[region 123] 260 became follower at term 7"]
[2019/05/01 12:35:45.977 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 171, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=10] [term=7] [peer_id=171] [region_id=102]
[2019/05/01 12:35:45.977 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 4, version: 17, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=171] [region_id=102]
[2019/05/01 12:35:45.977 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 102, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 97, 117, 116, 111, 255, 99, 111, 109, 109, 255, 105, 116, 0, 255, 0, 0, 0, 0, 0, 249, 0, 0, 253], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 97, 117, 116, 111, 255, 109, 97, 116, 105, 255, 99, 95, 115, 255, 112, 95, 112, 114, 105, 255, 118, 105, 255, 108, 101, 103, 101, 115, 0, 254, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 4, version: 17, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 103, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 104, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 171, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 171, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=171] [region_id=102]
[2019/05/01 12:35:46.382 -07:00] [INFO] [unknown:920] ["[region 16] 48 [term: 6] received a MsgRequestVote message with higher term from 159 [term: 7]"]
[2019/05/01 12:35:46.382 -07:00] [INFO] [unknown:719] ["[region 16] 48 became follower at term 7"]
[2019/05/01 12:35:46.382 -07:00] [INFO] [unknown:1083] ["[region 16] 48 [logterm: 6, index: 516, vote: 0] cast MsgRequestVote for 159 [logterm: 6, index: 516] at term 7"]
[2019/05/01 12:35:46.460 -07:00] [INFO] [unknown:1625] ["[region 58] 60 [term 6] received MsgTimeoutNow from 59 and starts an election to get leadership."]
[2019/05/01 12:35:46.460 -07:00] [INFO] [unknown:739] ["[region 58] 60 became candidate at term 7"]
[2019/05/01 12:35:46.460 -07:00] [INFO] [unknown:854] ["[region 58] 60 received MsgRequestVoteResponse from 60 at term 7"]
[2019/05/01 12:35:46.460 -07:00] [INFO] [unknown:828] ["[region 58] 60 [logterm: 6, index: 9] sent MsgRequestVote request to 156 at term 7"]
[2019/05/01 12:35:46.460 -07:00] [INFO] [unknown:828] ["[region 58] 60 [logterm: 6, index: 9] sent MsgRequestVote request to 59 at term 7"]
[2019/05/01 12:35:46.508 -07:00] [INFO] [unknown:854] ["[region 58] 60 received MsgRequestVoteResponse from 156 at term 7"]
[2019/05/01 12:35:46.508 -07:00] [INFO] [unknown:1550] ["[region 58] 60 [quorum:2] has received 2 MsgRequestVoteResponse votes and 0 vote rejections"]
[2019/05/01 12:35:46.508 -07:00] [INFO] [unknown:789] ["[region 58] 60 became leader at term 7"]
[2019/05/01 12:35:46.759 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 213, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=9] [term=6] [peer_id=213] [region_id=108]
[2019/05/01 12:35:46.759 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 4, version: 17, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=213] [region_id=108]
[2019/05/01 12:35:46.759 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 108, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 97, 118, 111, 105, 255, 100, 95, 116, 101, 255, 109, 112, 111, 255, 114, 97, 108, 95, 117, 255, 112, 103, 255, 114, 97, 100, 101, 0, 0, 253, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 97, 99, 107, 255, 95, 108, 111, 103, 255, 0, 0, 0, 255, 0, 0, 0, 0, 0, 247, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 4, version: 17, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 109, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 110, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 213, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 213, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=213] [region_id=108]
[2019/05/01 12:35:46.922 -07:00] [INFO] [unknown:1625] ["[region 88] 90 [term 6] received MsgTimeoutNow from 89 and starts an election to get leadership."]
[2019/05/01 12:35:46.922 -07:00] [INFO] [unknown:739] ["[region 88] 90 became candidate at term 7"]
[2019/05/01 12:35:46.922 -07:00] [INFO] [unknown:854] ["[region 88] 90 received MsgRequestVoteResponse from 90 at term 7"]
[2019/05/01 12:35:46.922 -07:00] [INFO] [unknown:828] ["[region 88] 90 [logterm: 6, index: 9] sent MsgRequestVote request to 160 at term 7"]
[2019/05/01 12:35:46.922 -07:00] [INFO] [unknown:828] ["[region 88] 90 [logterm: 6, index: 9] sent MsgRequestVote request to 89 at term 7"]
[2019/05/01 12:35:46.942 -07:00] [INFO] [unknown:920] ["[region 91] 93 [term: 6] received a MsgRequestVote message with higher term from 164 [term: 7]"]
[2019/05/01 12:35:46.942 -07:00] [INFO] [unknown:719] ["[region 91] 93 became follower at term 7"]
[2019/05/01 12:35:46.942 -07:00] [INFO] [unknown:1083] ["[region 91] 93 [logterm: 6, index: 9, vote: 0] cast MsgRequestVote for 164 [logterm: 6, index: 9] at term 7"]
[2019/05/01 12:35:46.945 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_117_7_9_(default|lock|write).sst] [snap_key=117_7_9]
[2019/05/01 12:35:46.968 -07:00] [INFO] [unknown:854] ["[region 88] 90 received MsgRequestVoteResponse from 160 at term 7"]
[2019/05/01 12:35:46.968 -07:00] [INFO] [unknown:1550] ["[region 88] 90 [quorum:2] has received 2 MsgRequestVoteResponse votes and 0 vote rejections"]
[2019/05/01 12:35:46.968 -07:00] [INFO] [unknown:789] ["[region 88] 90 became leader at term 7"]
[2019/05/01 12:35:46.968 -07:00] [INFO] [unknown:1792] ["[region 117] 258 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 9, term: 7]"]
[2019/05/01 12:35:46.968 -07:00] [INFO] [unknown:1816] ["[region 117] 258 restored progress of 118 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:35:46.968 -07:00] [INFO] [unknown:1816] ["[region 117] 258 restored progress of 119 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:35:46.968 -07:00] [INFO] [unknown:1816] ["[region 117] 258 restored progress of 258 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:35:46.968 -07:00] [INFO] [unknown:474] ["[region 117] 258 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 9, term: 7]"]
[2019/05/01 12:35:46.968 -07:00] [INFO] [unknown:1736] ["[region 117] 258 [commit: 9] restored snapshot [index: 9, term: 7]"]
[2019/05/01 12:35:46.968 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=258] [region_id=117]
[2019/05/01 12:35:46.968 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 9, truncated_state: Some(RaftTruncatedState { index: 9, term: 7, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 117, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 103, 95, 255, 116, 97, 98, 108, 255, 101, 115, 0, 255, 0, 0, 0, 0, 0, 249, 0, 0, 253], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 100, 255, 95, 97, 100, 100, 255, 114, 101, 115, 255, 115, 0, 0, 0, 0, 251, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 4, version: 17, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 118, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 119, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 258, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=258] [region_id=117]
[2019/05/01 12:35:47.012 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 117] 258"]
[2019/05/01 12:35:47.022 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 117, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 103, 95, 255, 116, 97, 98, 108, 255, 101, 115, 0, 255, 0, 0, 0, 0, 0, 249, 0, 0, 253], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 100, 255, 95, 97, 100, 100, 255, 114, 101, 115, 255, 115, 0, 0, 0, 0, 251, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 4, version: 17, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 118, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 119, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 258, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=258] [region_id=117]
[2019/05/01 12:35:47.022 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=117]
[2019/05/01 12:35:47.125 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=113.20189ms] [region_id=117]
[2019/05/01 12:35:47.925 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=316] [region_id=138]
[2019/05/01 12:35:47.925 -07:00] [INFO] [unknown:719] ["[region 138] 316 became follower at term 0"]
[2019/05/01 12:35:47.925 -07:00] [INFO] [unknown:295] ["[region 138] 316 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:35:47.925 -07:00] [INFO] [unknown:719] ["[region 138] 316 became follower at term 1"]
[2019/05/01 12:35:47.925 -07:00] [INFO] [unknown:920] ["[region 138] 316 [term: 1] received a MsgHeartbeat message with higher term from 140 [term: 7]"]
[2019/05/01 12:35:47.925 -07:00] [INFO] [unknown:719] ["[region 138] 316 became follower at term 7"]
[2019/05/01 12:35:47.936 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_123_7_9_(default|lock|write).sst] [snap_key=123_7_9]
[2019/05/01 12:35:47.960 -07:00] [INFO] [unknown:1792] ["[region 123] 260 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 9, term: 7]"]
[2019/05/01 12:35:47.960 -07:00] [INFO] [unknown:1816] ["[region 123] 260 restored progress of 124 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:35:47.960 -07:00] [INFO] [unknown:1816] ["[region 123] 260 restored progress of 125 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:35:47.960 -07:00] [INFO] [unknown:1816] ["[region 123] 260 restored progress of 260 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:35:47.960 -07:00] [INFO] [unknown:474] ["[region 123] 260 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 9, term: 7]"]
[2019/05/01 12:35:47.960 -07:00] [INFO] [unknown:1736] ["[region 123] 260 [commit: 9] restored snapshot [index: 9, term: 7]"]
[2019/05/01 12:35:47.960 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=260] [region_id=123]
[2019/05/01 12:35:47.960 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 9, truncated_state: Some(RaftTruncatedState { index: 9, term: 7, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 123, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 95, 99, 255, 97, 99, 104, 255, 101, 95, 115, 105, 122, 255, 101, 0, 255, 0, 0, 0, 0, 0, 0, 248, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 95, 99, 255, 104, 101, 99, 255, 107, 115, 117, 109, 0, 254, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 4, version: 17, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 124, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 125, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 260, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=260] [region_id=123]
[2019/05/01 12:35:47.998 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 123] 260"]
[2019/05/01 12:35:47.998 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 123, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 95, 99, 255, 97, 99, 104, 255, 101, 95, 115, 105, 122, 255, 101, 0, 255, 0, 0, 0, 0, 0, 0, 248, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 95, 99, 255, 104, 101, 99, 255, 107, 115, 117, 109, 0, 254, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 4, version: 17, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 124, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 125, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 260, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=260] [region_id=123]
[2019/05/01 12:35:47.998 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=123]
[2019/05/01 12:35:48.018 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=19.005942ms] [region_id=123]
[2019/05/01 12:35:48.035 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 258, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=10] [term=7] [peer_id=258] [region_id=117]
[2019/05/01 12:35:48.035 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 4, version: 17, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=258] [region_id=117]
[2019/05/01 12:35:48.035 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 117, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 103, 95, 255, 116, 97, 98, 108, 255, 101, 115, 0, 255, 0, 0, 0, 0, 0, 249, 0, 0, 253], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 100, 255, 95, 97, 100, 100, 255, 114, 101, 115, 255, 115, 0, 0, 0, 0, 251, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 4, version: 17, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 118, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 119, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 258, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 258, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=258] [region_id=117]
[2019/05/01 12:35:48.926 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=327] [region_id=147]
[2019/05/01 12:35:48.926 -07:00] [INFO] [unknown:719] ["[region 147] 327 became follower at term 0"]
[2019/05/01 12:35:48.926 -07:00] [INFO] [unknown:295] ["[region 147] 327 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:35:48.926 -07:00] [INFO] [unknown:719] ["[region 147] 327 became follower at term 1"]
[2019/05/01 12:35:48.926 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=314] [region_id=132]
[2019/05/01 12:35:48.926 -07:00] [INFO] [unknown:719] ["[region 132] 314 became follower at term 0"]
[2019/05/01 12:35:48.926 -07:00] [INFO] [unknown:295] ["[region 132] 314 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:35:48.926 -07:00] [INFO] [unknown:719] ["[region 132] 314 became follower at term 1"]
[2019/05/01 12:35:48.926 -07:00] [INFO] [unknown:920] ["[region 147] 327 [term: 1] received a MsgHeartbeat message with higher term from 149 [term: 7]"]
[2019/05/01 12:35:48.926 -07:00] [INFO] [unknown:719] ["[region 147] 327 became follower at term 7"]
[2019/05/01 12:35:48.926 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=315] [region_id=135]
[2019/05/01 12:35:48.926 -07:00] [INFO] [unknown:719] ["[region 135] 315 became follower at term 0"]
[2019/05/01 12:35:48.926 -07:00] [INFO] [unknown:295] ["[region 135] 315 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:35:48.926 -07:00] [INFO] [unknown:719] ["[region 135] 315 became follower at term 1"]
[2019/05/01 12:35:48.926 -07:00] [INFO] [unknown:920] ["[region 132] 314 [term: 1] received a MsgHeartbeat message with higher term from 134 [term: 7]"]
[2019/05/01 12:35:48.926 -07:00] [INFO] [unknown:719] ["[region 132] 314 became follower at term 7"]
[2019/05/01 12:35:48.926 -07:00] [INFO] [unknown:920] ["[region 135] 315 [term: 1] received a MsgHeartbeat message with higher term from 137 [term: 7]"]
[2019/05/01 12:35:48.926 -07:00] [INFO] [unknown:719] ["[region 135] 315 became follower at term 7"]
[2019/05/01 12:35:48.954 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 260, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=10] [term=7] [peer_id=260] [region_id=123]
[2019/05/01 12:35:48.955 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 4, version: 17, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=260] [region_id=123]
[2019/05/01 12:35:48.955 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 123, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 95, 99, 255, 97, 99, 104, 255, 101, 95, 115, 105, 122, 255, 101, 0, 255, 0, 0, 0, 0, 0, 0, 248, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 95, 99, 255, 104, 101, 99, 255, 107, 115, 117, 109, 0, 254, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 4, version: 17, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 124, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 125, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 260, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 260, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=260] [region_id=123]
[2019/05/01 12:35:49.929 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_138_7_9_(default|lock|write).sst] [snap_key=138_7_9]
[2019/05/01 12:35:49.940 -07:00] [INFO] [unknown:1792] ["[region 138] 316 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 9, term: 7]"]
[2019/05/01 12:35:49.940 -07:00] [INFO] [unknown:1816] ["[region 138] 316 restored progress of 139 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:35:49.940 -07:00] [INFO] [unknown:1816] ["[region 138] 316 restored progress of 140 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:35:49.940 -07:00] [INFO] [unknown:1816] ["[region 138] 316 restored progress of 316 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:35:49.940 -07:00] [INFO] [unknown:474] ["[region 138] 316 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 9, term: 7]"]
[2019/05/01 12:35:49.940 -07:00] [INFO] [unknown:1736] ["[region 138] 316 [commit: 9] restored snapshot [index: 9, term: 7]"]
[2019/05/01 12:35:49.940 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=316] [region_id=138]
[2019/05/01 12:35:49.940 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 9, truncated_state: Some(RaftTruncatedState { index: 9, term: 7, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 138, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 116, 105, 107, 118, 255, 95, 103, 99, 95, 255, 108, 101, 97, 255, 100, 101, 114, 95, 117, 255, 117, 105, 255, 100, 0, 0, 0, 0, 0, 250, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 116, 105, 107, 118, 255, 95, 103, 99, 95, 255, 114, 117, 110, 255, 95, 105, 110, 116, 101, 255, 114, 118, 255, 97, 108, 0, 0, 0, 0, 251, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 4, version: 18, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 139, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 140, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 316, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=316] [region_id=138]
[2019/05/01 12:35:49.958 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 138, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 116, 105, 107, 118, 255, 95, 103, 99, 95, 255, 108, 101, 97, 255, 100, 101, 114, 95, 117, 255, 117, 105, 255, 100, 0, 0, 0, 0, 0, 250, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 116, 105, 107, 118, 255, 95, 103, 99, 95, 255, 114, 117, 110, 255, 95, 105, 110, 116, 101, 255, 114, 118, 255, 97, 108, 0, 0, 0, 0, 251, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 4, version: 18, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 139, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 140, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 316, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=316] [region_id=138]
[2019/05/01 12:35:49.958 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 138] 316"]
[2019/05/01 12:35:49.958 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=138]
[2019/05/01 12:35:49.990 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=32.115082ms] [region_id=138]
[2019/05/01 12:35:50.930 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_132_7_9_(default|lock|write).sst] [snap_key=132_7_9]
[2019/05/01 12:35:50.930 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_147_7_9_(default|lock|write).sst] [snap_key=147_7_9]
[2019/05/01 12:35:50.930 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_135_7_9_(default|lock|write).sst] [snap_key=135_7_9]
[2019/05/01 12:35:50.941 -07:00] [INFO] [unknown:1792] ["[region 147] 327 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 9, term: 7]"]
[2019/05/01 12:35:50.941 -07:00] [INFO] [unknown:1816] ["[region 147] 327 restored progress of 148 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:35:50.941 -07:00] [INFO] [unknown:1816] ["[region 147] 327 restored progress of 149 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:35:50.941 -07:00] [INFO] [unknown:1816] ["[region 147] 327 restored progress of 327 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:35:50.941 -07:00] [INFO] [unknown:474] ["[region 147] 327 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 9, term: 7]"]
[2019/05/01 12:35:50.941 -07:00] [INFO] [unknown:1736] ["[region 147] 327 [commit: 9] restored snapshot [index: 9, term: 7]"]
[2019/05/01 12:35:50.941 -07:00] [INFO] [unknown:1792] ["[region 135] 315 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 9, term: 7]"]
[2019/05/01 12:35:50.941 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=327] [region_id=147]
[2019/05/01 12:35:50.941 -07:00] [INFO] [unknown:1816] ["[region 135] 315 restored progress of 136 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:35:50.941 -07:00] [INFO] [unknown:1816] ["[region 135] 315 restored progress of 137 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:35:50.941 -07:00] [INFO] [unknown:1816] ["[region 135] 315 restored progress of 315 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:35:50.941 -07:00] [INFO] [unknown:474] ["[region 135] 315 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 9, term: 7]"]
[2019/05/01 12:35:50.941 -07:00] [INFO] [unknown:1736] ["[region 135] 315 [commit: 9] restored snapshot [index: 9, term: 7]"]
[2019/05/01 12:35:50.941 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=315] [region_id=135]
[2019/05/01 12:35:50.941 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 9, truncated_state: Some(RaftTruncatedState { index: 9, term: 7, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 147, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 114, 128, 0, 0, 0, 0, 255, 0, 0, 3, 0, 0, 0, 0, 0, 250], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 114, 128, 0, 0, 0, 0, 255, 0, 234, 97, 0, 0, 0, 0, 0, 250], region_epoch: Some(RegionEpoch { conf_ver: 4, version: 18, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 148, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 149, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 327, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=327] [region_id=147]
[2019/05/01 12:35:50.941 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 9, truncated_state: Some(RaftTruncatedState { index: 9, term: 7, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 135, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 116, 105, 107, 118, 255, 95, 103, 99, 95, 255, 108, 101, 97, 255, 100, 101, 114, 95, 100, 255, 101, 115, 255, 99, 0, 0, 0, 0, 0, 250, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 116, 105, 107, 118, 255, 95, 103, 99, 95, 255, 108, 101, 97, 255, 100, 101, 114, 95, 117, 255, 117, 105, 255, 100, 0, 0, 0, 0, 0, 250, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 4, version: 18, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 136, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 137, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 315, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=315] [region_id=135]
[2019/05/01 12:35:50.954 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 147] 327"]
[2019/05/01 12:35:50.954 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=147]
[2019/05/01 12:35:50.954 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 147, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 114, 128, 0, 0, 0, 0, 255, 0, 0, 3, 0, 0, 0, 0, 0, 250], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 114, 128, 0, 0, 0, 0, 255, 0, 234, 97, 0, 0, 0, 0, 0, 250], region_epoch: Some(RegionEpoch { conf_ver: 4, version: 18, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 148, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 149, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 327, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=327] [region_id=147]
[2019/05/01 12:35:50.955 -07:00] [INFO] [unknown:1792] ["[region 132] 314 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 9, term: 7]"]
[2019/05/01 12:35:50.955 -07:00] [INFO] [unknown:1816] ["[region 132] 314 restored progress of 133 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:35:50.955 -07:00] [INFO] [unknown:1816] ["[region 132] 314 restored progress of 134 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:35:50.955 -07:00] [INFO] [unknown:1816] ["[region 132] 314 restored progress of 314 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:35:50.955 -07:00] [INFO] [unknown:474] ["[region 132] 314 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 9, term: 7]"]
[2019/05/01 12:35:50.955 -07:00] [INFO] [unknown:1736] ["[region 132] 314 [commit: 9] restored snapshot [index: 9, term: 7]"]
[2019/05/01 12:35:50.955 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=314] [region_id=132]
[2019/05/01 12:35:50.955 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 9, truncated_state: Some(RaftTruncatedState { index: 9, term: 7, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 132, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 116, 105, 107, 118, 255, 95, 103, 99, 95, 255, 101, 110, 97, 255, 98, 108, 101, 0, 0, 253, 0, 0, 253], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 116, 105, 107, 118, 255, 95, 103, 99, 95, 255, 108, 101, 97, 255, 100, 101, 114, 95, 100, 255, 101, 115, 255, 99, 0, 0, 0, 0, 0, 250, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 4, version: 18, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 133, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 134, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 314, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=314] [region_id=132]
[2019/05/01 12:35:50.963 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 135] 315"]
[2019/05/01 12:35:50.963 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 135, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 116, 105, 107, 118, 255, 95, 103, 99, 95, 255, 108, 101, 97, 255, 100, 101, 114, 95, 100, 255, 101, 115, 255, 99, 0, 0, 0, 0, 0, 250, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 116, 105, 107, 118, 255, 95, 103, 99, 95, 255, 108, 101, 97, 255, 100, 101, 114, 95, 117, 255, 117, 105, 255, 100, 0, 0, 0, 0, 0, 250, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 4, version: 18, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 136, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 137, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 315, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=315] [region_id=135]
[2019/05/01 12:35:50.979 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 132] 314"]
[2019/05/01 12:35:50.980 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 132, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 116, 105, 107, 118, 255, 95, 103, 99, 95, 255, 101, 110, 97, 255, 98, 108, 101, 0, 0, 253, 0, 0, 253], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 116, 105, 107, 118, 255, 95, 103, 99, 95, 255, 108, 101, 97, 255, 100, 101, 114, 95, 100, 255, 101, 115, 255, 99, 0, 0, 0, 0, 0, 250, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 4, version: 18, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 133, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 134, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 314, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=314] [region_id=132]
[2019/05/01 12:35:50.980 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 316, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=10] [term=7] [peer_id=316] [region_id=138]
[2019/05/01 12:35:50.980 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 4, version: 18, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=316] [region_id=138]
[2019/05/01 12:35:50.980 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 138, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 116, 105, 107, 118, 255, 95, 103, 99, 95, 255, 108, 101, 97, 255, 100, 101, 114, 95, 117, 255, 117, 105, 255, 100, 0, 0, 0, 0, 0, 250, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 116, 105, 107, 118, 255, 95, 103, 99, 95, 255, 114, 117, 110, 255, 95, 105, 110, 116, 101, 255, 114, 118, 255, 97, 108, 0, 0, 0, 0, 251, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 4, version: 18, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 139, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 140, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 316, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 316, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=316] [region_id=138]
[2019/05/01 12:35:51.017 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=62.357201ms] [region_id=147]
[2019/05/01 12:35:51.017 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=135]
[2019/05/01 12:35:51.043 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=25.946542ms] [region_id=135]
[2019/05/01 12:35:51.044 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=132]
[2019/05/01 12:35:51.069 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=25.186895ms] [region_id=132]
[2019/05/01 12:35:51.878 -07:00] [INFO] [keys.rs:155] ["approximate keys over threshold, need to do split check"] [threshold=5] [keys=6] [region_id=18]
[2019/05/01 12:35:51.929 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=330] [region_id=30]
[2019/05/01 12:35:51.929 -07:00] [INFO] [unknown:719] ["[region 30] 330 became follower at term 0"]
[2019/05/01 12:35:51.929 -07:00] [INFO] [unknown:295] ["[region 30] 330 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:35:51.929 -07:00] [INFO] [unknown:719] ["[region 30] 330 became follower at term 1"]
[2019/05/01 12:35:51.929 -07:00] [INFO] [unknown:920] ["[region 30] 330 [term: 1] received a MsgHeartbeat message with higher term from 55 [term: 7]"]
[2019/05/01 12:35:51.929 -07:00] [INFO] [unknown:719] ["[region 30] 330 became follower at term 7"]
[2019/05/01 12:35:51.985 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 315, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=10] [term=7] [peer_id=315] [region_id=135]
[2019/05/01 12:35:51.985 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 4, version: 18, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=315] [region_id=135]
[2019/05/01 12:35:51.985 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 135, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 116, 105, 107, 118, 255, 95, 103, 99, 95, 255, 108, 101, 97, 255, 100, 101, 114, 95, 100, 255, 101, 115, 255, 99, 0, 0, 0, 0, 0, 250, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 116, 105, 107, 118, 255, 95, 103, 99, 95, 255, 108, 101, 97, 255, 100, 101, 114, 95, 117, 255, 117, 105, 255, 100, 0, 0, 0, 0, 0, 250, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 4, version: 18, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 136, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 137, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 315, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 315, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=315] [region_id=135]
[2019/05/01 12:35:51.992 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 327, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=10] [term=7] [peer_id=327] [region_id=147]
[2019/05/01 12:35:51.992 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 4, version: 18, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=327] [region_id=147]
[2019/05/01 12:35:51.992 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 147, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 114, 128, 0, 0, 0, 0, 255, 0, 0, 3, 0, 0, 0, 0, 0, 250], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 114, 128, 0, 0, 0, 0, 255, 0, 234, 97, 0, 0, 0, 0, 0, 250], region_epoch: Some(RegionEpoch { conf_ver: 4, version: 18, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 148, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 149, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 327, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 327, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=327] [region_id=147]
[2019/05/01 12:35:52.030 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 314, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=10] [term=7] [peer_id=314] [region_id=132]
[2019/05/01 12:35:52.030 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 4, version: 18, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=314] [region_id=132]
[2019/05/01 12:35:52.030 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 132, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 116, 105, 107, 118, 255, 95, 103, 99, 95, 255, 101, 110, 97, 255, 98, 108, 101, 0, 0, 253, 0, 0, 253], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 116, 105, 107, 118, 255, 95, 103, 99, 95, 255, 108, 101, 97, 255, 100, 101, 114, 95, 100, 255, 101, 115, 255, 99, 0, 0, 0, 0, 0, 250, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 4, version: 18, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 133, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 134, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 314, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 314, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=314] [region_id=132]
[2019/05/01 12:35:52.912 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=331] [region_id=32]
[2019/05/01 12:35:52.912 -07:00] [INFO] [unknown:719] ["[region 32] 331 became follower at term 0"]
[2019/05/01 12:35:52.912 -07:00] [INFO] [unknown:295] ["[region 32] 331 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:35:52.912 -07:00] [INFO] [unknown:719] ["[region 32] 331 became follower at term 1"]
[2019/05/01 12:35:52.912 -07:00] [INFO] [unknown:920] ["[region 32] 331 [term: 1] received a MsgHeartbeat message with higher term from 33 [term: 6]"]
[2019/05/01 12:35:52.912 -07:00] [INFO] [unknown:719] ["[region 32] 331 became follower at term 6"]
[2019/05/01 12:35:53.712 -07:00] [INFO] [unknown:1625] ["[region 108] 213 [term 6] received MsgTimeoutNow from 109 and starts an election to get leadership."]
[2019/05/01 12:35:53.712 -07:00] [INFO] [unknown:739] ["[region 108] 213 became candidate at term 7"]
[2019/05/01 12:35:53.713 -07:00] [INFO] [unknown:854] ["[region 108] 213 received MsgRequestVoteResponse from 213 at term 7"]
[2019/05/01 12:35:53.713 -07:00] [INFO] [unknown:828] ["[region 108] 213 [logterm: 6, index: 9] sent MsgRequestVote request to 110 at term 7"]
[2019/05/01 12:35:53.713 -07:00] [INFO] [unknown:828] ["[region 108] 213 [logterm: 6, index: 9] sent MsgRequestVote request to 109 at term 7"]
[2019/05/01 12:35:53.729 -07:00] [INFO] [unknown:854] ["[region 108] 213 received MsgRequestVoteResponse from 110 at term 7"]
[2019/05/01 12:35:53.729 -07:00] [INFO] [unknown:1550] ["[region 108] 213 [quorum:2] has received 2 MsgRequestVoteResponse votes and 0 vote rejections"]
[2019/05/01 12:35:53.729 -07:00] [INFO] [unknown:789] ["[region 108] 213 became leader at term 7"]
[2019/05/01 12:35:53.923 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=334] [region_id=38]
[2019/05/01 12:35:53.924 -07:00] [INFO] [unknown:719] ["[region 38] 334 became follower at term 0"]
[2019/05/01 12:35:53.924 -07:00] [INFO] [unknown:295] ["[region 38] 334 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:35:53.924 -07:00] [INFO] [unknown:719] ["[region 38] 334 became follower at term 1"]
[2019/05/01 12:35:53.924 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=336] [region_id=42]
[2019/05/01 12:35:53.924 -07:00] [INFO] [unknown:719] ["[region 42] 336 became follower at term 0"]
[2019/05/01 12:35:53.924 -07:00] [INFO] [unknown:295] ["[region 42] 336 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:35:53.924 -07:00] [INFO] [unknown:719] ["[region 42] 336 became follower at term 1"]
[2019/05/01 12:35:53.924 -07:00] [INFO] [unknown:920] ["[region 38] 334 [term: 1] received a MsgHeartbeat message with higher term from 39 [term: 6]"]
[2019/05/01 12:35:53.924 -07:00] [INFO] [unknown:719] ["[region 38] 334 became follower at term 6"]
[2019/05/01 12:35:53.924 -07:00] [INFO] [unknown:920] ["[region 42] 336 [term: 1] received a MsgHeartbeat message with higher term from 43 [term: 6]"]
[2019/05/01 12:35:53.924 -07:00] [INFO] [unknown:719] ["[region 42] 336 became follower at term 6"]
[2019/05/01 12:35:53.969 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_30_7_10_(default|lock|write).sst] [snap_key=30_7_10]
[2019/05/01 12:35:53.977 -07:00] [INFO] [unknown:1792] ["[region 30] 330 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 10, term: 7]"]
[2019/05/01 12:35:53.977 -07:00] [INFO] [unknown:1816] ["[region 30] 330 restored progress of 31 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:35:53.977 -07:00] [INFO] [unknown:1816] ["[region 30] 330 restored progress of 55 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:35:53.977 -07:00] [INFO] [unknown:1816] ["[region 30] 330 restored progress of 330 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:35:53.977 -07:00] [INFO] [unknown:474] ["[region 30] 330 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 10, term: 7]"]
[2019/05/01 12:35:53.977 -07:00] [INFO] [unknown:1736] ["[region 30] 330 [commit: 10] restored snapshot [index: 10, term: 7]"]
[2019/05/01 12:35:53.977 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=330] [region_id=30]
[2019/05/01 12:35:53.977 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 10, truncated_state: Some(RaftTruncatedState { index: 10, term: 7, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 30, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 44, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 49, 0, 0, 0, 0, 0, 0, 0, 248], region_epoch: Some(RegionEpoch { conf_ver: 4, version: 9, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 31, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 55, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 330, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=330] [region_id=30]
[2019/05/01 12:35:54.004 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 30] 330"]
[2019/05/01 12:35:54.004 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 30, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 44, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 49, 0, 0, 0, 0, 0, 0, 0, 248], region_epoch: Some(RegionEpoch { conf_ver: 4, version: 9, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 31, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 55, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 330, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=330] [region_id=30]
[2019/05/01 12:35:54.004 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=30]
[2019/05/01 12:35:54.004 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=38.653µs] [region_id=30]
[2019/05/01 12:35:54.927 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_32_6_9_(default|lock|write).sst] [snap_key=32_6_9]
[2019/05/01 12:35:54.937 -07:00] [INFO] [unknown:1792] ["[region 32] 331 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 9, term: 6]"]
[2019/05/01 12:35:54.937 -07:00] [INFO] [unknown:1816] ["[region 32] 331 restored progress of 33 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:35:54.937 -07:00] [INFO] [unknown:1816] ["[region 32] 331 restored progress of 331 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:35:54.937 -07:00] [INFO] [unknown:474] ["[region 32] 331 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 9, term: 6]"]
[2019/05/01 12:35:54.937 -07:00] [INFO] [unknown:1736] ["[region 32] 331 [commit: 9] restored snapshot [index: 9, term: 6]"]
[2019/05/01 12:35:54.937 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=331] [region_id=32]
[2019/05/01 12:35:54.937 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 9, truncated_state: Some(RaftTruncatedState { index: 9, term: 6, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 32, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 49, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 55, 0, 0, 0, 0, 0, 0, 0, 248], region_epoch: Some(RegionEpoch { conf_ver: 2, version: 10, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 33, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 331, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=331] [region_id=32]
[2019/05/01 12:35:54.972 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 32] 331"]
[2019/05/01 12:35:54.972 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 32, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 49, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 55, 0, 0, 0, 0, 0, 0, 0, 248], region_epoch: Some(RegionEpoch { conf_ver: 2, version: 10, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 33, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 331, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=331] [region_id=32]
[2019/05/01 12:35:54.972 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=32]
[2019/05/01 12:35:54.980 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 330, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=11] [term=7] [peer_id=330] [region_id=30]
[2019/05/01 12:35:54.980 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 4, version: 9, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=330] [region_id=30]
[2019/05/01 12:35:54.980 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 30, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 44, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 49, 0, 0, 0, 0, 0, 0, 0, 248], region_epoch: Some(RegionEpoch { conf_ver: 4, version: 9, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 31, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 55, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 330, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 330, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=330] [region_id=30]
[2019/05/01 12:35:55.018 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=46.020525ms] [region_id=32]
[2019/05/01 12:35:55.925 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 331, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=10] [term=6] [peer_id=331] [region_id=32]
[2019/05/01 12:35:55.925 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 2, version: 10, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=331] [region_id=32]
[2019/05/01 12:35:55.925 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 32, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 49, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 55, 0, 0, 0, 0, 0, 0, 0, 248], region_epoch: Some(RegionEpoch { conf_ver: 2, version: 10, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 33, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 331, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 331, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=331] [region_id=32]
[2019/05/01 12:35:55.927 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_38_6_7_(default|lock|write).sst] [snap_key=38_6_7]
[2019/05/01 12:35:55.927 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_42_6_7_(default|lock|write).sst] [snap_key=42_6_7]
[2019/05/01 12:35:55.933 -07:00] [INFO] [unknown:1792] ["[region 42] 336 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 7, term: 6]"]
[2019/05/01 12:35:55.933 -07:00] [INFO] [unknown:1816] ["[region 42] 336 restored progress of 43 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:35:55.933 -07:00] [INFO] [unknown:1816] ["[region 42] 336 restored progress of 336 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:35:55.933 -07:00] [INFO] [unknown:474] ["[region 42] 336 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 7, term: 6]"]
[2019/05/01 12:35:55.933 -07:00] [INFO] [unknown:1736] ["[region 42] 336 [commit: 7] restored snapshot [index: 7, term: 6]"]
[2019/05/01 12:35:55.933 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=336] [region_id=42]
[2019/05/01 12:35:55.933 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 7, truncated_state: Some(RaftTruncatedState { index: 7, term: 6, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 42, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 79, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 83, 0, 0, 0, 0, 0, 0, 0, 248], region_epoch: Some(RegionEpoch { conf_ver: 2, version: 15, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 43, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 336, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=336] [region_id=42]
[2019/05/01 12:35:55.933 -07:00] [INFO] [unknown:1792] ["[region 38] 334 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 7, term: 6]"]
[2019/05/01 12:35:55.933 -07:00] [INFO] [unknown:1816] ["[region 38] 334 restored progress of 39 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:35:55.933 -07:00] [INFO] [unknown:1816] ["[region 38] 334 restored progress of 334 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:35:55.933 -07:00] [INFO] [unknown:474] ["[region 38] 334 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 7, term: 6]"]
[2019/05/01 12:35:55.933 -07:00] [INFO] [unknown:1736] ["[region 38] 334 [commit: 7] restored snapshot [index: 7, term: 6]"]
[2019/05/01 12:35:55.933 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=334] [region_id=38]
[2019/05/01 12:35:55.933 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 7, truncated_state: Some(RaftTruncatedState { index: 7, term: 6, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 38, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 68, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 73, 0, 0, 0, 0, 0, 0, 0, 248], region_epoch: Some(RegionEpoch { conf_ver: 2, version: 13, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 39, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 334, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=334] [region_id=38]
[2019/05/01 12:35:55.968 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 42] 336"]
[2019/05/01 12:35:55.968 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 42, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 79, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 83, 0, 0, 0, 0, 0, 0, 0, 248], region_epoch: Some(RegionEpoch { conf_ver: 2, version: 15, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 43, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 336, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=336] [region_id=42]
[2019/05/01 12:35:55.968 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 38] 334"]
[2019/05/01 12:35:55.968 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 38, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 68, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 73, 0, 0, 0, 0, 0, 0, 0, 248], region_epoch: Some(RegionEpoch { conf_ver: 2, version: 13, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 39, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 334, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=334] [region_id=38]
[2019/05/01 12:35:55.968 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=42]
[2019/05/01 12:35:55.968 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=36.671µs] [region_id=42]
[2019/05/01 12:35:55.968 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=38]
[2019/05/01 12:35:55.968 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=26.037µs] [region_id=38]
[2019/05/01 12:35:56.072 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddLearnerNode, peer: Some(Peer { id: 378, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=11] [term=6] [peer_id=331] [region_id=32]
[2019/05/01 12:35:56.072 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 3, version: 10, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddLearner] [peer_id=331] [region_id=32]
[2019/05/01 12:35:56.072 -07:00] [INFO] [apply.rs:1476] ["add learner successfully"] [region="Region { id: 32, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 49, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 55, 0, 0, 0, 0, 0, 0, 0, 248], region_epoch: Some(RegionEpoch { conf_ver: 3, version: 10, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 33, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 331, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 378, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=331] [region_id=32]
[2019/05/01 12:35:56.926 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=380] [region_id=46]
[2019/05/01 12:35:56.926 -07:00] [INFO] [unknown:719] ["[region 46] 380 became follower at term 0"]
[2019/05/01 12:35:56.926 -07:00] [INFO] [unknown:295] ["[region 46] 380 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:35:56.926 -07:00] [INFO] [unknown:719] ["[region 46] 380 became follower at term 1"]
[2019/05/01 12:35:56.926 -07:00] [INFO] [unknown:920] ["[region 46] 380 [term: 1] received a MsgHeartbeat message with higher term from 47 [term: 6]"]
[2019/05/01 12:35:56.926 -07:00] [INFO] [unknown:719] ["[region 46] 380 became follower at term 6"]
[2019/05/01 12:35:56.934 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 334, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=8] [term=6] [peer_id=334] [region_id=38]
[2019/05/01 12:35:56.934 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 2, version: 13, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=334] [region_id=38]
[2019/05/01 12:35:56.934 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 38, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 68, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 73, 0, 0, 0, 0, 0, 0, 0, 248], region_epoch: Some(RegionEpoch { conf_ver: 2, version: 13, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 39, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 334, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 334, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=334] [region_id=38]
[2019/05/01 12:35:56.934 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=379] [region_id=36]
[2019/05/01 12:35:56.934 -07:00] [INFO] [unknown:719] ["[region 36] 379 became follower at term 0"]
[2019/05/01 12:35:56.934 -07:00] [INFO] [unknown:295] ["[region 36] 379 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:35:56.934 -07:00] [INFO] [unknown:719] ["[region 36] 379 became follower at term 1"]
[2019/05/01 12:35:56.934 -07:00] [INFO] [unknown:920] ["[region 36] 379 [term: 1] received a MsgHeartbeat message with higher term from 37 [term: 6]"]
[2019/05/01 12:35:56.934 -07:00] [INFO] [unknown:719] ["[region 36] 379 became follower at term 6"]
[2019/05/01 12:35:56.960 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 336, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=8] [term=6] [peer_id=336] [region_id=42]
[2019/05/01 12:35:56.960 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 2, version: 15, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=336] [region_id=42]
[2019/05/01 12:35:56.960 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 42, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 79, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 83, 0, 0, 0, 0, 0, 0, 0, 248], region_epoch: Some(RegionEpoch { conf_ver: 2, version: 15, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 43, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 336, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 336, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=336] [region_id=42]
[2019/05/01 12:35:57.927 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=382] [region_id=40]
[2019/05/01 12:35:57.927 -07:00] [INFO] [unknown:719] ["[region 40] 382 became follower at term 0"]
[2019/05/01 12:35:57.927 -07:00] [INFO] [unknown:295] ["[region 40] 382 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:35:57.927 -07:00] [INFO] [unknown:719] ["[region 40] 382 became follower at term 1"]
[2019/05/01 12:35:57.927 -07:00] [INFO] [unknown:920] ["[region 40] 382 [term: 1] received a MsgHeartbeat message with higher term from 41 [term: 6]"]
[2019/05/01 12:35:57.927 -07:00] [INFO] [unknown:719] ["[region 40] 382 became follower at term 6"]
[2019/05/01 12:35:58.930 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_46_6_7_(default|lock|write).sst] [snap_key=46_6_7]
[2019/05/01 12:35:58.936 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_36_6_9_(default|lock|write).sst] [snap_key=36_6_9]
[2019/05/01 12:35:58.947 -07:00] [INFO] [unknown:1792] ["[region 46] 380 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 7, term: 6]"]
[2019/05/01 12:35:58.947 -07:00] [INFO] [unknown:1816] ["[region 46] 380 restored progress of 47 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:35:58.947 -07:00] [INFO] [unknown:1816] ["[region 46] 380 restored progress of 380 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:35:58.947 -07:00] [INFO] [unknown:474] ["[region 46] 380 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 7, term: 6]"]
[2019/05/01 12:35:58.947 -07:00] [INFO] [unknown:1736] ["[region 46] 380 [commit: 7] restored snapshot [index: 7, term: 6]"]
[2019/05/01 12:35:58.947 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=380] [region_id=46]
[2019/05/01 12:35:58.947 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 7, truncated_state: Some(RaftTruncatedState { index: 7, term: 6, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 46, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 89, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 95, 0, 0, 0, 0, 0, 0, 0, 248], region_epoch: Some(RegionEpoch { conf_ver: 2, version: 17, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 47, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 380, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=380] [region_id=46]
[2019/05/01 12:35:58.951 -07:00] [INFO] [unknown:1792] ["[region 36] 379 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 9, term: 6]"]
[2019/05/01 12:35:58.951 -07:00] [INFO] [unknown:1816] ["[region 36] 379 restored progress of 37 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:35:58.951 -07:00] [INFO] [unknown:1816] ["[region 36] 379 restored progress of 333 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:35:58.951 -07:00] [INFO] [unknown:1816] ["[region 36] 379 restored progress of 379 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:35:58.951 -07:00] [INFO] [unknown:474] ["[region 36] 379 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 9, term: 6]"]
[2019/05/01 12:35:58.951 -07:00] [INFO] [unknown:1736] ["[region 36] 379 [commit: 9] restored snapshot [index: 9, term: 6]"]
[2019/05/01 12:35:58.951 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=379] [region_id=36]
[2019/05/01 12:35:58.951 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 9, truncated_state: Some(RaftTruncatedState { index: 9, term: 6, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 36, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 61, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 68, 0, 0, 0, 0, 0, 0, 0, 248], region_epoch: Some(RegionEpoch { conf_ver: 4, version: 12, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 37, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 333, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 379, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=379] [region_id=36]
[2019/05/01 12:35:58.968 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 46] 380"]
[2019/05/01 12:35:58.968 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 46, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 89, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 95, 0, 0, 0, 0, 0, 0, 0, 248], region_epoch: Some(RegionEpoch { conf_ver: 2, version: 17, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 47, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 380, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=380] [region_id=46]
[2019/05/01 12:35:58.968 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=46]
[2019/05/01 12:35:58.968 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=62.462µs] [region_id=46]
[2019/05/01 12:35:58.976 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 36] 379"]
[2019/05/01 12:35:58.976 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=36]
[2019/05/01 12:35:58.976 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 36, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 61, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 68, 0, 0, 0, 0, 0, 0, 0, 248], region_epoch: Some(RegionEpoch { conf_ver: 4, version: 12, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 37, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 333, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 379, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=379] [region_id=36]
[2019/05/01 12:35:58.976 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=39.188µs] [region_id=36]
[2019/05/01 12:35:59.208 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=384] [region_id=94]
[2019/05/01 12:35:59.208 -07:00] [INFO] [unknown:719] ["[region 94] 384 became follower at term 0"]
[2019/05/01 12:35:59.208 -07:00] [INFO] [unknown:295] ["[region 94] 384 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:35:59.208 -07:00] [INFO] [unknown:719] ["[region 94] 384 became follower at term 1"]
[2019/05/01 12:35:59.208 -07:00] [INFO] [unknown:920] ["[region 94] 384 [term: 1] received a MsgHeartbeat message with higher term from 95 [term: 6]"]
[2019/05/01 12:35:59.208 -07:00] [INFO] [unknown:719] ["[region 94] 384 became follower at term 6"]
[2019/05/01 12:35:59.931 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_40_6_9_(default|lock|write).sst] [snap_key=40_6_9]
[2019/05/01 12:35:59.954 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 380, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=8] [term=6] [peer_id=380] [region_id=46]
[2019/05/01 12:35:59.959 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 2, version: 17, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=380] [region_id=46]
[2019/05/01 12:35:59.959 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 46, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 89, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 95, 0, 0, 0, 0, 0, 0, 0, 248], region_epoch: Some(RegionEpoch { conf_ver: 2, version: 17, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 47, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 380, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 380, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=380] [region_id=46]
[2019/05/01 12:35:59.959 -07:00] [INFO] [unknown:1792] ["[region 40] 382 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 9, term: 6]"]
[2019/05/01 12:35:59.959 -07:00] [INFO] [unknown:1816] ["[region 40] 382 restored progress of 41 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:35:59.959 -07:00] [INFO] [unknown:1816] ["[region 40] 382 restored progress of 335 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:35:59.959 -07:00] [INFO] [unknown:1816] ["[region 40] 382 restored progress of 382 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:35:59.959 -07:00] [INFO] [unknown:474] ["[region 40] 382 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 9, term: 6]"]
[2019/05/01 12:35:59.959 -07:00] [INFO] [unknown:1736] ["[region 40] 382 [commit: 9] restored snapshot [index: 9, term: 6]"]
[2019/05/01 12:35:59.959 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=382] [region_id=40]
[2019/05/01 12:35:59.959 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 9, truncated_state: Some(RaftTruncatedState { index: 9, term: 6, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 40, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 73, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 79, 0, 0, 0, 0, 0, 0, 0, 248], region_epoch: Some(RegionEpoch { conf_ver: 4, version: 14, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 41, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 335, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 382, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=382] [region_id=40]
[2019/05/01 12:36:00.031 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 378, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=12] [term=6] [peer_id=331] [region_id=32]
[2019/05/01 12:36:00.031 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 4, version: 10, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=331] [region_id=32]
[2019/05/01 12:36:00.031 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 32, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 49, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 55, 0, 0, 0, 0, 0, 0, 0, 248], region_epoch: Some(RegionEpoch { conf_ver: 4, version: 10, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 33, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 331, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 378, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 378, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=331] [region_id=32]
[2019/05/01 12:36:00.057 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 40] 382"]
[2019/05/01 12:36:00.057 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 40, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 73, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 79, 0, 0, 0, 0, 0, 0, 0, 248], region_epoch: Some(RegionEpoch { conf_ver: 4, version: 14, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 41, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 335, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 382, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=382] [region_id=40]
[2019/05/01 12:36:00.057 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=40]
[2019/05/01 12:36:00.057 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=31.455µs] [region_id=40]
[2019/05/01 12:36:00.098 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 379, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=10] [term=6] [peer_id=379] [region_id=36]
[2019/05/01 12:36:00.098 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 4, version: 12, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=379] [region_id=36]
[2019/05/01 12:36:00.098 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 36, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 61, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 68, 0, 0, 0, 0, 0, 0, 0, 248], region_epoch: Some(RegionEpoch { conf_ver: 4, version: 12, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 37, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 333, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 379, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 379, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=379] [region_id=36]
[2019/05/01 12:36:00.112 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddLearnerNode, peer: Some(Peer { id: 385, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=9] [term=6] [peer_id=380] [region_id=46]
[2019/05/01 12:36:00.112 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 3, version: 17, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddLearner] [peer_id=380] [region_id=46]
[2019/05/01 12:36:00.112 -07:00] [INFO] [apply.rs:1476] ["add learner successfully"] [region="Region { id: 46, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 89, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 95, 0, 0, 0, 0, 0, 0, 0, 248], region_epoch: Some(RegionEpoch { conf_ver: 3, version: 17, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 47, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 380, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 385, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=380] [region_id=46]
[2019/05/01 12:36:00.881 -07:00] [INFO] [unknown:1625] ["[region 38] 334 [term 6] received MsgTimeoutNow from 39 and starts an election to get leadership."]
[2019/05/01 12:36:00.881 -07:00] [INFO] [unknown:739] ["[region 38] 334 became candidate at term 7"]
[2019/05/01 12:36:00.881 -07:00] [INFO] [unknown:854] ["[region 38] 334 received MsgRequestVoteResponse from 334 at term 7"]
[2019/05/01 12:36:00.881 -07:00] [INFO] [unknown:828] ["[region 38] 334 [logterm: 6, index: 8] sent MsgRequestVote request to 39 at term 7"]
[2019/05/01 12:36:00.924 -07:00] [INFO] [unknown:854] ["[region 38] 334 received MsgRequestVoteResponse from 39 at term 7"]
[2019/05/01 12:36:00.924 -07:00] [INFO] [unknown:1550] ["[region 38] 334 [quorum:2] has received 2 MsgRequestVoteResponse votes and 0 vote rejections"]
[2019/05/01 12:36:00.924 -07:00] [INFO] [unknown:789] ["[region 38] 334 became leader at term 7"]
[2019/05/01 12:36:00.979 -07:00] [INFO] [unknown:1625] ["[region 32] 331 [term 6] received MsgTimeoutNow from 33 and starts an election to get leadership."]
[2019/05/01 12:36:00.979 -07:00] [INFO] [unknown:739] ["[region 32] 331 became candidate at term 7"]
[2019/05/01 12:36:00.979 -07:00] [INFO] [unknown:854] ["[region 32] 331 received MsgRequestVoteResponse from 331 at term 7"]
[2019/05/01 12:36:00.979 -07:00] [INFO] [unknown:828] ["[region 32] 331 [logterm: 6, index: 12] sent MsgRequestVote request to 378 at term 7"]
[2019/05/01 12:36:00.979 -07:00] [INFO] [unknown:828] ["[region 32] 331 [logterm: 6, index: 12] sent MsgRequestVote request to 33 at term 7"]
[2019/05/01 12:36:01.009 -07:00] [INFO] [unknown:854] ["[region 32] 331 received MsgRequestVoteResponse from 378 at term 7"]
[2019/05/01 12:36:01.009 -07:00] [INFO] [unknown:1550] ["[region 32] 331 [quorum:2] has received 2 MsgRequestVoteResponse votes and 0 vote rejections"]
[2019/05/01 12:36:01.009 -07:00] [INFO] [unknown:789] ["[region 32] 331 became leader at term 7"]
[2019/05/01 12:36:01.052 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 382, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=10] [term=6] [peer_id=382] [region_id=40]
[2019/05/01 12:36:01.052 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 4, version: 14, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=382] [region_id=40]
[2019/05/01 12:36:01.052 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 40, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 73, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 79, 0, 0, 0, 0, 0, 0, 0, 248], region_epoch: Some(RegionEpoch { conf_ver: 4, version: 14, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 41, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 335, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 382, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 382, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=382] [region_id=40]
[2019/05/01 12:36:01.212 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_94_6_8_(default|lock|write).sst] [snap_key=94_6_8]
[2019/05/01 12:36:01.217 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=388] [region_id=214]
[2019/05/01 12:36:01.217 -07:00] [INFO] [unknown:719] ["[region 214] 388 became follower at term 0"]
[2019/05/01 12:36:01.217 -07:00] [INFO] [unknown:295] ["[region 214] 388 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:36:01.217 -07:00] [INFO] [unknown:719] ["[region 214] 388 became follower at term 1"]
[2019/05/01 12:36:01.217 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=387] [region_id=56]
[2019/05/01 12:36:01.217 -07:00] [INFO] [unknown:719] ["[region 56] 387 became follower at term 0"]
[2019/05/01 12:36:01.217 -07:00] [INFO] [unknown:295] ["[region 56] 387 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:36:01.217 -07:00] [INFO] [unknown:719] ["[region 56] 387 became follower at term 1"]
[2019/05/01 12:36:01.217 -07:00] [INFO] [unknown:920] ["[region 214] 388 [term: 1] received a MsgHeartbeat message with higher term from 215 [term: 6]"]
[2019/05/01 12:36:01.217 -07:00] [INFO] [unknown:719] ["[region 214] 388 became follower at term 6"]
[2019/05/01 12:36:01.217 -07:00] [INFO] [unknown:920] ["[region 56] 387 [term: 1] received a MsgHeartbeat message with higher term from 57 [term: 6]"]
[2019/05/01 12:36:01.217 -07:00] [INFO] [unknown:719] ["[region 56] 387 became follower at term 6"]
[2019/05/01 12:36:01.233 -07:00] [INFO] [unknown:1792] ["[region 94] 384 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 8, term: 6]"]
[2019/05/01 12:36:01.233 -07:00] [INFO] [unknown:1816] ["[region 94] 384 restored progress of 95 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:36:01.233 -07:00] [INFO] [unknown:1816] ["[region 94] 384 restored progress of 384 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:36:01.233 -07:00] [INFO] [unknown:474] ["[region 94] 384 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 8, term: 6]"]
[2019/05/01 12:36:01.233 -07:00] [INFO] [unknown:1736] ["[region 94] 384 [commit: 8] restored snapshot [index: 8, term: 6]"]
[2019/05/01 12:36:01.233 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=384] [region_id=94]
[2019/05/01 12:36:01.233 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 8, truncated_state: Some(RaftTruncatedState { index: 8, term: 6, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 94, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 105, 95, 114, 128, 0, 0, 0, 0, 255, 0, 0, 3, 0, 0, 0, 0, 0, 250], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 108, 0, 0, 0, 0, 0, 0, 0, 248], region_epoch: Some(RegionEpoch { conf_ver: 2, version: 20, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 95, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 384, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=384] [region_id=94]
[2019/05/01 12:36:01.277 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 94, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 105, 95, 114, 128, 0, 0, 0, 0, 255, 0, 0, 3, 0, 0, 0, 0, 0, 250], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 108, 0, 0, 0, 0, 0, 0, 0, 248], region_epoch: Some(RegionEpoch { conf_ver: 2, version: 20, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 95, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 384, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=384] [region_id=94]
[2019/05/01 12:36:01.277 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=94]
[2019/05/01 12:36:01.277 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 94] 384"]
[2019/05/01 12:36:01.322 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=45.081031ms] [region_id=94]
[2019/05/01 12:36:01.364 -07:00] [INFO] [unknown:1625] ["[region 42] 336 [term 6] received MsgTimeoutNow from 43 and starts an election to get leadership."]
[2019/05/01 12:36:01.364 -07:00] [INFO] [unknown:739] ["[region 42] 336 became candidate at term 7"]
[2019/05/01 12:36:01.364 -07:00] [INFO] [unknown:854] ["[region 42] 336 received MsgRequestVoteResponse from 336 at term 7"]
[2019/05/01 12:36:01.364 -07:00] [INFO] [unknown:828] ["[region 42] 336 [logterm: 6, index: 8] sent MsgRequestVote request to 43 at term 7"]
[2019/05/01 12:36:01.399 -07:00] [INFO] [unknown:854] ["[region 42] 336 received MsgRequestVoteResponse from 43 at term 7"]
[2019/05/01 12:36:01.399 -07:00] [INFO] [unknown:1550] ["[region 42] 336 [quorum:2] has received 2 MsgRequestVoteResponse votes and 0 vote rejections"]
[2019/05/01 12:36:01.399 -07:00] [INFO] [unknown:789] ["[region 42] 336 became leader at term 7"]
[2019/05/01 12:36:02.256 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 384, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=9] [term=6] [peer_id=384] [region_id=94]
[2019/05/01 12:36:02.256 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 2, version: 20, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=384] [region_id=94]
[2019/05/01 12:36:02.256 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 94, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 105, 95, 114, 128, 0, 0, 0, 0, 255, 0, 0, 3, 0, 0, 0, 0, 0, 250], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 108, 0, 0, 0, 0, 0, 0, 0, 248], region_epoch: Some(RegionEpoch { conf_ver: 2, version: 20, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 95, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 384, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 384, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=384] [region_id=94]
[2019/05/01 12:36:02.409 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddLearnerNode, peer: Some(Peer { id: 389, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=10] [term=6] [peer_id=384] [region_id=94]
[2019/05/01 12:36:02.409 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 3, version: 20, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddLearner] [peer_id=384] [region_id=94]
[2019/05/01 12:36:02.409 -07:00] [INFO] [apply.rs:1476] ["add learner successfully"] [region="Region { id: 94, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 105, 95, 114, 128, 0, 0, 0, 0, 255, 0, 0, 3, 0, 0, 0, 0, 0, 250], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 108, 0, 0, 0, 0, 0, 0, 0, 248], region_epoch: Some(RegionEpoch { conf_ver: 3, version: 20, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 95, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 384, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 389, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=384] [region_id=94]
[2019/05/01 12:36:03.224 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_56_6_9_(default|lock|write).sst] [snap_key=56_6_9]
[2019/05/01 12:36:03.224 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_214_6_9_(default|lock|write).sst] [snap_key=214_6_9]
[2019/05/01 12:36:03.238 -07:00] [INFO] [unknown:1792] ["[region 214] 388 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 9, term: 6]"]
[2019/05/01 12:36:03.238 -07:00] [INFO] [unknown:1816] ["[region 214] 388 restored progress of 215 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:36:03.238 -07:00] [INFO] [unknown:1816] ["[region 214] 388 restored progress of 383 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:36:03.238 -07:00] [INFO] [unknown:1816] ["[region 214] 388 restored progress of 388 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:36:03.238 -07:00] [INFO] [unknown:474] ["[region 214] 388 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 9, term: 6]"]
[2019/05/01 12:36:03.238 -07:00] [INFO] [unknown:1736] ["[region 214] 388 [commit: 9] restored snapshot [index: 9, term: 6]"]
[2019/05/01 12:36:03.238 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=388] [region_id=214]
[2019/05/01 12:36:03.238 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 9, truncated_state: Some(RaftTruncatedState { index: 9, term: 6, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 214, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 105, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 105, 95, 114, 128, 0, 0, 0, 0, 255, 0, 0, 3, 0, 0, 0, 0, 0, 250], region_epoch: Some(RegionEpoch { conf_ver: 4, version: 20, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 215, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 383, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 388, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=388] [region_id=214]
[2019/05/01 12:36:03.239 -07:00] [INFO] [unknown:1792] ["[region 56] 387 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 9, term: 6]"]
[2019/05/01 12:36:03.239 -07:00] [INFO] [unknown:1816] ["[region 56] 387 restored progress of 57 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:36:03.239 -07:00] [INFO] [unknown:1816] ["[region 56] 387 restored progress of 381 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:36:03.239 -07:00] [INFO] [unknown:1816] ["[region 56] 387 restored progress of 387 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:36:03.239 -07:00] [INFO] [unknown:474] ["[region 56] 387 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 9, term: 6]"]
[2019/05/01 12:36:03.239 -07:00] [INFO] [unknown:1736] ["[region 56] 387 [commit: 9] restored snapshot [index: 9, term: 6]"]
[2019/05/01 12:36:03.239 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=387] [region_id=56]
[2019/05/01 12:36:03.239 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 9, truncated_state: Some(RaftTruncatedState { index: 9, term: 6, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 56, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 95, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 105, 0, 0, 0, 0, 0, 0, 0, 248], region_epoch: Some(RegionEpoch { conf_ver: 4, version: 18, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 57, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 381, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 387, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=387] [region_id=56]
[2019/05/01 12:36:03.261 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 214] 388"]
[2019/05/01 12:36:03.261 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 214, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 105, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 105, 95, 114, 128, 0, 0, 0, 0, 255, 0, 0, 3, 0, 0, 0, 0, 0, 250], region_epoch: Some(RegionEpoch { conf_ver: 4, version: 20, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 215, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 383, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 388, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=388] [region_id=214]
[2019/05/01 12:36:03.261 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=214]
[2019/05/01 12:36:03.261 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 56] 387"]
[2019/05/01 12:36:03.261 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 56, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 95, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 105, 0, 0, 0, 0, 0, 0, 0, 248], region_epoch: Some(RegionEpoch { conf_ver: 4, version: 18, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 57, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 381, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 387, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=387] [region_id=56]
[2019/05/01 12:36:03.278 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=16.412821ms] [region_id=214]
[2019/05/01 12:36:03.278 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=56]
[2019/05/01 12:36:03.278 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=21.668µs] [region_id=56]
[2019/05/01 12:36:03.453 -07:00] [INFO] [pd.rs:558] ["try to change peer"] [peer="Peer { id: 396, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [change_type=AddLearnerNode] [region_id=38]
[2019/05/01 12:36:03.453 -07:00] [INFO] [peer.rs:1953] ["propose conf change peer"] [change_peer=396] [change_type=AddLearnerNode] [peer_id=334] [region_id=38]
[2019/05/01 12:36:03.474 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddLearnerNode, peer: Some(Peer { id: 396, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=10] [term=7] [peer_id=334] [region_id=38]
[2019/05/01 12:36:03.474 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 3, version: 13, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddLearner] [peer_id=334] [region_id=38]
[2019/05/01 12:36:03.474 -07:00] [INFO] [apply.rs:1476] ["add learner successfully"] [region="Region { id: 38, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 68, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 73, 0, 0, 0, 0, 0, 0, 0, 248], region_epoch: Some(RegionEpoch { conf_ver: 3, version: 13, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 39, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 334, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 396, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=334] [region_id=38]
[2019/05/01 12:36:03.486 -07:00] [INFO] [peer.rs:1318] ["notify pd with change peer region"] [region="Region { id: 38, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 68, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 73, 0, 0, 0, 0, 0, 0, 0, 248], region_epoch: Some(RegionEpoch { conf_ver: 4, version: 13, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 39, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 334, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 396, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=334] [region_id=38]
[2019/05/01 12:36:03.943 -07:00] [INFO] [peer_storage.rs:759] ["requesting snapshot"] [peer_id=334] [region_id=38]
[2019/05/01 12:36:03.943 -07:00] [INFO] [snap.rs:757] ["scan snapshot of one cf"] [size=0] [key_count=0] [cf=default] [snapshot=/opt/tidb/data/kv/snap/gen_38_7_10_(default|lock|write).sst] [region_id=38]
[2019/05/01 12:36:03.943 -07:00] [INFO] [snap.rs:757] ["scan snapshot of one cf"] [size=0] [key_count=0] [cf=lock] [snapshot=/opt/tidb/data/kv/snap/gen_38_7_10_(default|lock|write).sst] [region_id=38]
[2019/05/01 12:36:03.943 -07:00] [INFO] [snap.rs:757] ["scan snapshot of one cf"] [size=0] [key_count=0] [cf=write] [snapshot=/opt/tidb/data/kv/snap/gen_38_7_10_(default|lock|write).sst] [region_id=38]
[2019/05/01 12:36:03.943 -07:00] [INFO] [snap.rs:875] ["scan snapshot"] [takes=249.223µs] [size=0] [key_count=0] [snapshot=/opt/tidb/data/kv/snap/gen_38_7_10_(default|lock|write).sst] [region_id=38]
[2019/05/01 12:36:04.002 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 385, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=10] [term=6] [peer_id=380] [region_id=46]
[2019/05/01 12:36:04.002 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 4, version: 17, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=380] [region_id=46]
[2019/05/01 12:36:04.002 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 46, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 89, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 95, 0, 0, 0, 0, 0, 0, 0, 248], region_epoch: Some(RegionEpoch { conf_ver: 4, version: 17, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 47, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 380, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 385, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 385, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=380] [region_id=46]
[2019/05/01 12:36:04.109 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=393] [region_id=4]
[2019/05/01 12:36:04.109 -07:00] [INFO] [unknown:719] ["[region 4] 393 became follower at term 0"]
[2019/05/01 12:36:04.109 -07:00] [INFO] [unknown:295] ["[region 4] 393 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:36:04.109 -07:00] [INFO] [unknown:719] ["[region 4] 393 became follower at term 1"]
[2019/05/01 12:36:04.109 -07:00] [INFO] [unknown:920] ["[region 4] 393 [term: 1] received a MsgHeartbeat message with higher term from 5 [term: 6]"]
[2019/05/01 12:36:04.109 -07:00] [INFO] [unknown:719] ["[region 4] 393 became follower at term 6"]
[2019/05/01 12:36:04.150 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_4_6_2516_(default|lock|write).sst] [snap_key=4_6_2516]
[2019/05/01 12:36:04.158 -07:00] [INFO] [unknown:1792] ["[region 4] 393 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 2516, term: 6]"]
[2019/05/01 12:36:04.158 -07:00] [INFO] [unknown:1816] ["[region 4] 393 restored progress of 5 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:36:04.158 -07:00] [INFO] [unknown:1816] ["[region 4] 393 restored progress of 386 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:36:04.159 -07:00] [INFO] [unknown:1816] ["[region 4] 393 restored progress of 393 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:36:04.159 -07:00] [INFO] [unknown:474] ["[region 4] 393 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 2516, term: 6]"]
[2019/05/01 12:36:04.159 -07:00] [INFO] [unknown:1736] ["[region 4] 393 [commit: 2516] restored snapshot [index: 2516, term: 6]"]
[2019/05/01 12:36:04.159 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=393] [region_id=4]
[2019/05/01 12:36:04.159 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 2516, truncated_state: Some(RaftTruncatedState { index: 2516, term: 6, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 4, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 108, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [], region_epoch: Some(RegionEpoch { conf_ver: 4, version: 19, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 5, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 386, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 393, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=393] [region_id=4]
[2019/05/01 12:36:04.178 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 4, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 108, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [], region_epoch: Some(RegionEpoch { conf_ver: 4, version: 19, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 5, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 386, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 393, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=393] [region_id=4]
[2019/05/01 12:36:04.178 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 4] 393"]
[2019/05/01 12:36:04.178 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=4]
[2019/05/01 12:36:04.194 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=16.272251ms] [region_id=4]
[2019/05/01 12:36:04.242 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 388, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=10] [term=6] [peer_id=388] [region_id=214]
[2019/05/01 12:36:04.242 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 4, version: 20, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=388] [region_id=214]
[2019/05/01 12:36:04.242 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 214, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 105, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 105, 95, 114, 128, 0, 0, 0, 0, 255, 0, 0, 3, 0, 0, 0, 0, 0, 250], region_epoch: Some(RegionEpoch { conf_ver: 4, version: 20, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 215, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 383, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 388, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 388, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=388] [region_id=214]
[2019/05/01 12:36:04.242 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 387, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=10] [term=6] [peer_id=387] [region_id=56]
[2019/05/01 12:36:04.242 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 4, version: 18, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=387] [region_id=56]
[2019/05/01 12:36:04.242 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 56, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 95, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 105, 0, 0, 0, 0, 0, 0, 0, 248], region_epoch: Some(RegionEpoch { conf_ver: 4, version: 18, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 57, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 381, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 387, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 387, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=387] [region_id=56]
[2019/05/01 12:36:04.734 -07:00] [INFO] [unknown:1625] ["[region 40] 382 [term 6] received MsgTimeoutNow from 41 and starts an election to get leadership."]
[2019/05/01 12:36:04.734 -07:00] [INFO] [unknown:739] ["[region 40] 382 became candidate at term 7"]
[2019/05/01 12:36:04.734 -07:00] [INFO] [unknown:854] ["[region 40] 382 received MsgRequestVoteResponse from 382 at term 7"]
[2019/05/01 12:36:04.734 -07:00] [INFO] [unknown:828] ["[region 40] 382 [logterm: 6, index: 10] sent MsgRequestVote request to 335 at term 7"]
[2019/05/01 12:36:04.734 -07:00] [INFO] [unknown:828] ["[region 40] 382 [logterm: 6, index: 10] sent MsgRequestVote request to 41 at term 7"]
[2019/05/01 12:36:04.772 -07:00] [INFO] [unknown:854] ["[region 40] 382 received MsgRequestVoteResponse from 335 at term 7"]
[2019/05/01 12:36:04.772 -07:00] [INFO] [unknown:1550] ["[region 40] 382 [quorum:2] has received 2 MsgRequestVoteResponse votes and 0 vote rejections"]
[2019/05/01 12:36:04.772 -07:00] [INFO] [unknown:789] ["[region 40] 382 became leader at term 7"]
[2019/05/01 12:36:04.782 -07:00] [INFO] [unknown:1625] ["[region 46] 380 [term 6] received MsgTimeoutNow from 47 and starts an election to get leadership."]
[2019/05/01 12:36:04.782 -07:00] [INFO] [unknown:739] ["[region 46] 380 became candidate at term 7"]
[2019/05/01 12:36:04.782 -07:00] [INFO] [unknown:854] ["[region 46] 380 received MsgRequestVoteResponse from 380 at term 7"]
[2019/05/01 12:36:04.782 -07:00] [INFO] [unknown:828] ["[region 46] 380 [logterm: 6, index: 10] sent MsgRequestVote request to 385 at term 7"]
[2019/05/01 12:36:04.782 -07:00] [INFO] [unknown:828] ["[region 46] 380 [logterm: 6, index: 10] sent MsgRequestVote request to 47 at term 7"]
[2019/05/01 12:36:04.844 -07:00] [INFO] [unknown:854] ["[region 46] 380 received MsgRequestVoteResponse from 385 at term 7"]
[2019/05/01 12:36:04.844 -07:00] [INFO] [unknown:1550] ["[region 46] 380 [quorum:2] has received 2 MsgRequestVoteResponse votes and 0 vote rejections"]
[2019/05/01 12:36:04.844 -07:00] [INFO] [unknown:789] ["[region 46] 380 became leader at term 7"]
[2019/05/01 12:36:04.938 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=395] [region_id=34]
[2019/05/01 12:36:04.938 -07:00] [INFO] [unknown:719] ["[region 34] 395 became follower at term 0"]
[2019/05/01 12:36:04.938 -07:00] [INFO] [unknown:295] ["[region 34] 395 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:36:04.938 -07:00] [INFO] [unknown:719] ["[region 34] 395 became follower at term 1"]
[2019/05/01 12:36:04.938 -07:00] [INFO] [unknown:920] ["[region 34] 395 [term: 1] received a MsgHeartbeat message with higher term from 332 [term: 7]"]
[2019/05/01 12:36:04.938 -07:00] [INFO] [unknown:719] ["[region 34] 395 became follower at term 7"]
[2019/05/01 12:36:04.994 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=394] [region_id=390]
[2019/05/01 12:36:04.994 -07:00] [INFO] [unknown:719] ["[region 390] 394 became follower at term 0"]
[2019/05/01 12:36:04.994 -07:00] [INFO] [unknown:295] ["[region 390] 394 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:36:04.994 -07:00] [INFO] [unknown:719] ["[region 390] 394 became follower at term 1"]
[2019/05/01 12:36:04.994 -07:00] [INFO] [unknown:920] ["[region 390] 394 [term: 1] received a MsgHeartbeat message with higher term from 392 [term: 6]"]
[2019/05/01 12:36:04.994 -07:00] [INFO] [unknown:719] ["[region 390] 394 became follower at term 6"]
[2019/05/01 12:36:05.230 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 393, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=2568] [term=6] [peer_id=393] [region_id=4]
[2019/05/01 12:36:05.230 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 4, version: 19, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=393] [region_id=4]
[2019/05/01 12:36:05.230 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 4, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 108, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [], region_epoch: Some(RegionEpoch { conf_ver: 4, version: 19, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 5, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 386, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 393, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 393, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=393] [region_id=4]
[2019/05/01 12:36:05.457 -07:00] [INFO] [pd.rs:558] ["try to change peer"] [peer="Peer { id: 437, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [change_type=AddLearnerNode] [region_id=42]
[2019/05/01 12:36:05.457 -07:00] [INFO] [peer.rs:1953] ["propose conf change peer"] [change_peer=437] [change_type=AddLearnerNode] [peer_id=336] [region_id=42]
[2019/05/01 12:36:05.527 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddLearnerNode, peer: Some(Peer { id: 437, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=10] [term=7] [peer_id=336] [region_id=42]
[2019/05/01 12:36:05.527 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 3, version: 15, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddLearner] [peer_id=336] [region_id=42]
[2019/05/01 12:36:05.527 -07:00] [INFO] [apply.rs:1476] ["add learner successfully"] [region="Region { id: 42, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 79, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 83, 0, 0, 0, 0, 0, 0, 0, 248], region_epoch: Some(RegionEpoch { conf_ver: 3, version: 15, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 43, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 336, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 437, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=336] [region_id=42]
[2019/05/01 12:36:05.552 -07:00] [INFO] [peer.rs:1318] ["notify pd with change peer region"] [region="Region { id: 42, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 79, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 83, 0, 0, 0, 0, 0, 0, 0, 248], region_epoch: Some(RegionEpoch { conf_ver: 4, version: 15, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 43, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 336, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 437, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=336] [region_id=42]
[2019/05/01 12:36:05.950 -07:00] [INFO] [unknown:841] ["New connected subchannel at 0x7f8590800f60 for subchannel 0x7f8640441800"]
[2019/05/01 12:36:05.977 -07:00] [INFO] [snap.rs:389] ["sent snapshot"] [duration=27.327865ms] [size=0] [snap_key=38_7_10] [region_id=38]
[2019/05/01 12:36:05.977 -07:00] [INFO] [peer.rs:538] ["report snapshot status"] [status=Finish] [to="Peer { id: 396, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=334] [region_id=38]
[2019/05/01 12:36:06.278 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 389, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=11] [term=6] [peer_id=384] [region_id=94]
[2019/05/01 12:36:06.278 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 4, version: 20, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=384] [region_id=94]
[2019/05/01 12:36:06.278 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 94, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 105, 95, 114, 128, 0, 0, 0, 0, 255, 0, 0, 3, 0, 0, 0, 0, 0, 250], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 108, 0, 0, 0, 0, 0, 0, 0, 248], region_epoch: Some(RegionEpoch { conf_ver: 4, version: 20, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 95, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 384, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 389, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 389, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=384] [region_id=94]
[2019/05/01 12:36:06.937 -07:00] [INFO] [peer_storage.rs:759] ["requesting snapshot"] [peer_id=336] [region_id=42]
[2019/05/01 12:36:06.938 -07:00] [INFO] [snap.rs:757] ["scan snapshot of one cf"] [size=0] [key_count=0] [cf=default] [snapshot=/opt/tidb/data/kv/snap/gen_42_7_10_(default|lock|write).sst] [region_id=42]
[2019/05/01 12:36:06.938 -07:00] [INFO] [snap.rs:757] ["scan snapshot of one cf"] [size=0] [key_count=0] [cf=lock] [snapshot=/opt/tidb/data/kv/snap/gen_42_7_10_(default|lock|write).sst] [region_id=42]
[2019/05/01 12:36:06.938 -07:00] [INFO] [snap.rs:757] ["scan snapshot of one cf"] [size=0] [key_count=0] [cf=write] [snapshot=/opt/tidb/data/kv/snap/gen_42_7_10_(default|lock|write).sst] [region_id=42]
[2019/05/01 12:36:06.938 -07:00] [INFO] [snap.rs:875] ["scan snapshot"] [takes=220.33µs] [size=0] [key_count=0] [snapshot=/opt/tidb/data/kv/snap/gen_42_7_10_(default|lock|write).sst] [region_id=42]
[2019/05/01 12:36:06.950 -07:00] [INFO] [pd.rs:558] ["try to change peer"] [peer="Peer { id: 396, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [change_type=AddNode] [region_id=38]
[2019/05/01 12:36:06.950 -07:00] [INFO] [peer.rs:1953] ["propose conf change peer"] [change_peer=396] [change_type=AddNode] [peer_id=334] [region_id=38]
[2019/05/01 12:36:06.952 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_34_7_13_(default|lock|write).sst] [snap_key=34_7_13]
[2019/05/01 12:36:06.973 -07:00] [INFO] [unknown:1792] ["[region 34] 395 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 13, term: 7]"]
[2019/05/01 12:36:06.973 -07:00] [INFO] [unknown:1816] ["[region 34] 395 restored progress of 35 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:36:06.973 -07:00] [INFO] [unknown:1816] ["[region 34] 395 restored progress of 332 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:36:06.973 -07:00] [INFO] [unknown:1816] ["[region 34] 395 restored progress of 395 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:36:06.973 -07:00] [INFO] [unknown:474] ["[region 34] 395 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 13, term: 7]"]
[2019/05/01 12:36:06.973 -07:00] [INFO] [unknown:1736] ["[region 34] 395 [commit: 13] restored snapshot [index: 13, term: 7]"]
[2019/05/01 12:36:06.973 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=395] [region_id=34]
[2019/05/01 12:36:06.973 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 13, truncated_state: Some(RaftTruncatedState { index: 13, term: 7, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 34, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 55, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 3, 128, 0, 0, 0, 255, 0, 0, 0, 108, 3, 128, 0, 0, 255, 0, 0, 0, 0, 0, 3, 128, 0, 255, 0, 0, 0, 0, 0, 3, 0, 0, 253], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 61, 0, 0, 0, 0, 0, 0, 0, 248], region_epoch: Some(RegionEpoch { conf_ver: 4, version: 12, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 35, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 332, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 395, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=395] [region_id=34]
[2019/05/01 12:36:07.005 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 34] 395"]
[2019/05/01 12:36:07.005 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 34, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 55, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 3, 128, 0, 0, 0, 255, 0, 0, 0, 108, 3, 128, 0, 0, 255, 0, 0, 0, 0, 0, 3, 128, 0, 255, 0, 0, 0, 0, 0, 3, 0, 0, 253], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 61, 0, 0, 0, 0, 0, 0, 0, 248], region_epoch: Some(RegionEpoch { conf_ver: 4, version: 12, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 35, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 332, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 395, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=395] [region_id=34]
[2019/05/01 12:36:07.005 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=34]
[2019/05/01 12:36:07.017 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_390_6_7_(default|lock|write).sst] [snap_key=390_6_7]
[2019/05/01 12:36:07.028 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 396, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=11] [term=7] [peer_id=334] [region_id=38]
[2019/05/01 12:36:07.028 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 4, version: 13, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=334] [region_id=38]
[2019/05/01 12:36:07.028 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 38, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 68, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 73, 0, 0, 0, 0, 0, 0, 0, 248], region_epoch: Some(RegionEpoch { conf_ver: 4, version: 13, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 39, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 334, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 396, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 396, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=334] [region_id=38]
[2019/05/01 12:36:07.038 -07:00] [INFO] [unknown:1792] ["[region 390] 394 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 7, term: 6]"]
[2019/05/01 12:36:07.038 -07:00] [INFO] [unknown:1816] ["[region 390] 394 restored progress of 391 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:36:07.038 -07:00] [INFO] [unknown:1816] ["[region 390] 394 restored progress of 392 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:36:07.038 -07:00] [INFO] [unknown:1816] ["[region 390] 394 restored progress of 394 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:36:07.038 -07:00] [INFO] [unknown:474] ["[region 390] 394 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 7, term: 6]"]
[2019/05/01 12:36:07.038 -07:00] [INFO] [unknown:1736] ["[region 390] 394 [commit: 7] restored snapshot [index: 7, term: 6]"]
[2019/05/01 12:36:07.038 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=394] [region_id=390]
[2019/05/01 12:36:07.038 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 7, truncated_state: Some(RaftTruncatedState { index: 7, term: 6, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 390, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 55, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 55, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 3, 128, 0, 0, 0, 255, 0, 0, 0, 108, 3, 128, 0, 0, 255, 0, 0, 0, 0, 0, 3, 128, 0, 255, 0, 0, 0, 0, 0, 3, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 4, version: 12, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 391, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 392, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 394, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=394] [region_id=390]
[2019/05/01 12:36:07.050 -07:00] [INFO] [peer.rs:1318] ["notify pd with change peer region"] [region="Region { id: 38, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 68, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 73, 0, 0, 0, 0, 0, 0, 0, 248], region_epoch: Some(RegionEpoch { conf_ver: 5, version: 13, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 39, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 334, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 396, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=334] [region_id=38]
[2019/05/01 12:36:07.086 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=81.230711ms] [region_id=34]
[2019/05/01 12:36:07.096 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 390] 394"]
[2019/05/01 12:36:07.096 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 390, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 55, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 55, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 3, 128, 0, 0, 0, 255, 0, 0, 0, 108, 3, 128, 0, 0, 255, 0, 0, 0, 0, 0, 3, 128, 0, 255, 0, 0, 0, 0, 0, 3, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 4, version: 12, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 391, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 392, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 394, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=394] [region_id=390]
[2019/05/01 12:36:07.096 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=390]
[2019/05/01 12:36:07.145 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=48.420928ms] [region_id=390]
[2019/05/01 12:36:07.979 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=438] [region_id=44]
[2019/05/01 12:36:07.979 -07:00] [INFO] [unknown:719] ["[region 44] 438 became follower at term 0"]
[2019/05/01 12:36:07.979 -07:00] [INFO] [unknown:295] ["[region 44] 438 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:36:07.979 -07:00] [INFO] [unknown:719] ["[region 44] 438 became follower at term 1"]
[2019/05/01 12:36:07.979 -07:00] [INFO] [unknown:920] ["[region 44] 438 [term: 1] received a MsgHeartbeat message with higher term from 377 [term: 7]"]
[2019/05/01 12:36:07.979 -07:00] [INFO] [unknown:719] ["[region 44] 438 became follower at term 7"]
[2019/05/01 12:36:08.030 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 395, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=14] [term=7] [peer_id=395] [region_id=34]
[2019/05/01 12:36:08.030 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 4, version: 12, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=395] [region_id=34]
[2019/05/01 12:36:08.030 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 34, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 55, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 3, 128, 0, 0, 0, 255, 0, 0, 0, 108, 3, 128, 0, 0, 255, 0, 0, 0, 0, 0, 3, 128, 0, 255, 0, 0, 0, 0, 0, 3, 0, 0, 253], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 61, 0, 0, 0, 0, 0, 0, 0, 248], region_epoch: Some(RegionEpoch { conf_ver: 4, version: 12, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 35, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 332, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 395, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 395, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=395] [region_id=34]
[2019/05/01 12:36:08.084 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 394, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=8] [term=6] [peer_id=394] [region_id=390]
[2019/05/01 12:36:08.084 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 4, version: 12, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=394] [region_id=390]
[2019/05/01 12:36:08.084 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 390, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 55, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 55, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 3, 128, 0, 0, 0, 255, 0, 0, 0, 108, 3, 128, 0, 0, 255, 0, 0, 0, 0, 0, 3, 128, 0, 255, 0, 0, 0, 0, 0, 3, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 4, version: 12, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 391, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 392, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 394, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 394, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=394] [region_id=390]
[2019/05/01 12:36:08.940 -07:00] [INFO] [unknown:841] ["New connected subchannel at 0x7f859006d140 for subchannel 0x7f8640441a00"]
[2019/05/01 12:36:08.946 -07:00] [INFO] [snap.rs:389] ["sent snapshot"] [duration=6.512678ms] [size=0] [snap_key=42_7_10] [region_id=42]
[2019/05/01 12:36:08.946 -07:00] [INFO] [peer.rs:538] ["report snapshot status"] [status=Finish] [to="Peer { id: 437, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=336] [region_id=42]
[2019/05/01 12:36:09.943 -07:00] [INFO] [pd.rs:558] ["try to change peer"] [peer="Peer { id: 437, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [change_type=AddNode] [region_id=42]
[2019/05/01 12:36:09.943 -07:00] [INFO] [peer.rs:1953] ["propose conf change peer"] [change_peer=437] [change_type=AddNode] [peer_id=336] [region_id=42]
[2019/05/01 12:36:09.973 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_44_7_10_(default|lock|write).sst] [snap_key=44_7_10]
[2019/05/01 12:36:09.987 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 437, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=11] [term=7] [peer_id=336] [region_id=42]
[2019/05/01 12:36:09.987 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 4, version: 15, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=336] [region_id=42]
[2019/05/01 12:36:09.987 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 42, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 79, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 83, 0, 0, 0, 0, 0, 0, 0, 248], region_epoch: Some(RegionEpoch { conf_ver: 4, version: 15, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 43, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 336, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 437, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 437, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=336] [region_id=42]
[2019/05/01 12:36:09.987 -07:00] [INFO] [unknown:1792] ["[region 44] 438 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 10, term: 7]"]
[2019/05/01 12:36:09.987 -07:00] [INFO] [unknown:1816] ["[region 44] 438 restored progress of 45 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:36:09.987 -07:00] [INFO] [unknown:1816] ["[region 44] 438 restored progress of 377 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:36:09.987 -07:00] [INFO] [unknown:1816] ["[region 44] 438 restored progress of 438 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:36:09.987 -07:00] [INFO] [unknown:474] ["[region 44] 438 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 10, term: 7]"]
[2019/05/01 12:36:09.987 -07:00] [INFO] [unknown:1736] ["[region 44] 438 [commit: 10] restored snapshot [index: 10, term: 7]"]
[2019/05/01 12:36:09.987 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=438] [region_id=44]
[2019/05/01 12:36:09.987 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 10, truncated_state: Some(RaftTruncatedState { index: 10, term: 7, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 44, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 83, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 89, 0, 0, 0, 0, 0, 0, 0, 248], region_epoch: Some(RegionEpoch { conf_ver: 4, version: 16, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 45, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 377, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 438, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=438] [region_id=44]
[2019/05/01 12:36:10.004 -07:00] [INFO] [peer.rs:1318] ["notify pd with change peer region"] [region="Region { id: 42, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 79, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 83, 0, 0, 0, 0, 0, 0, 0, 248], region_epoch: Some(RegionEpoch { conf_ver: 5, version: 15, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 43, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 336, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 437, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=336] [region_id=42]
[2019/05/01 12:36:10.038 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 44] 438"]
[2019/05/01 12:36:10.038 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 44, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 83, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 89, 0, 0, 0, 0, 0, 0, 0, 248], region_epoch: Some(RegionEpoch { conf_ver: 4, version: 16, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 45, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 377, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 438, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=438] [region_id=44]
[2019/05/01 12:36:10.038 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=44]
[2019/05/01 12:36:10.038 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=34.861µs] [region_id=44]
[2019/05/01 12:36:10.731 -07:00] [INFO] [pd.rs:558] ["try to change peer"] [peer="Peer { id: 441, store_id: 3, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [change_type=AddLearnerNode] [region_id=42]
[2019/05/01 12:36:10.740 -07:00] [INFO] [peer.rs:1953] ["propose conf change peer"] [change_peer=441] [change_type=AddLearnerNode] [peer_id=336] [region_id=42]
[2019/05/01 12:36:10.785 -07:00] [INFO] [pd.rs:558] ["try to change peer"] [peer="Peer { id: 441, store_id: 3, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [change_type=AddLearnerNode] [region_id=42]
[2019/05/01 12:36:10.813 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddLearnerNode, peer: Some(Peer { id: 440, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=11] [term=7] [peer_id=316] [region_id=138]
[2019/05/01 12:36:10.813 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 5, version: 18, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddLearner] [peer_id=316] [region_id=138]
[2019/05/01 12:36:10.813 -07:00] [INFO] [apply.rs:1476] ["add learner successfully"] [region="Region { id: 138, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 116, 105, 107, 118, 255, 95, 103, 99, 95, 255, 108, 101, 97, 255, 100, 101, 114, 95, 117, 255, 117, 105, 255, 100, 0, 0, 0, 0, 0, 250, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 116, 105, 107, 118, 255, 95, 103, 99, 95, 255, 114, 117, 110, 255, 95, 105, 110, 116, 101, 255, 114, 118, 255, 97, 108, 0, 0, 0, 0, 251, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 5, version: 18, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 139, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 140, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 316, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 440, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=316] [region_id=138]
[2019/05/01 12:36:10.836 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddLearnerNode, peer: Some(Peer { id: 441, store_id: 3, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=12] [term=7] [peer_id=336] [region_id=42]
[2019/05/01 12:36:10.840 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 5, version: 15, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddLearner] [peer_id=336] [region_id=42]
[2019/05/01 12:36:10.840 -07:00] [INFO] [apply.rs:1476] ["add learner successfully"] [region="Region { id: 42, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 79, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 83, 0, 0, 0, 0, 0, 0, 0, 248], region_epoch: Some(RegionEpoch { conf_ver: 5, version: 15, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 43, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 336, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 437, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 441, store_id: 3, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=336] [region_id=42]
[2019/05/01 12:36:10.840 -07:00] [INFO] [peer.rs:1927] ["there is a pending conf change, try later"] [peer_id=336] [region_id=42]
[2019/05/01 12:36:10.860 -07:00] [INFO] [peer.rs:1318] ["notify pd with change peer region"] [region="Region { id: 42, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 79, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 83, 0, 0, 0, 0, 0, 0, 0, 248], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 15, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 43, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 336, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 437, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 441, store_id: 3, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=336] [region_id=42]
[2019/05/01 12:36:10.942 -07:00] [INFO] [peer_storage.rs:759] ["requesting snapshot"] [peer_id=336] [region_id=42]
[2019/05/01 12:36:10.942 -07:00] [INFO] [snap.rs:757] ["scan snapshot of one cf"] [size=0] [key_count=0] [cf=default] [snapshot=/opt/tidb/data/kv/snap/gen_42_7_12_(default|lock|write).sst] [region_id=42]
[2019/05/01 12:36:10.942 -07:00] [INFO] [snap.rs:757] ["scan snapshot of one cf"] [size=0] [key_count=0] [cf=lock] [snapshot=/opt/tidb/data/kv/snap/gen_42_7_12_(default|lock|write).sst] [region_id=42]
[2019/05/01 12:36:10.942 -07:00] [INFO] [snap.rs:757] ["scan snapshot of one cf"] [size=0] [key_count=0] [cf=write] [snapshot=/opt/tidb/data/kv/snap/gen_42_7_12_(default|lock|write).sst] [region_id=42]
[2019/05/01 12:36:10.942 -07:00] [INFO] [snap.rs:875] ["scan snapshot"] [takes=208.427µs] [size=0] [key_count=0] [snapshot=/opt/tidb/data/kv/snap/gen_42_7_12_(default|lock|write).sst] [region_id=42]
[2019/05/01 12:36:11.040 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 438, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=11] [term=7] [peer_id=438] [region_id=44]
[2019/05/01 12:36:11.040 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 4, version: 16, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=438] [region_id=44]
[2019/05/01 12:36:11.040 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 44, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 83, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 89, 0, 0, 0, 0, 0, 0, 0, 248], region_epoch: Some(RegionEpoch { conf_ver: 4, version: 16, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 45, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 377, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 438, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 438, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=438] [region_id=44]
[2019/05/01 12:36:11.178 -07:00] [INFO] [unknown:1625] ["[region 56] 387 [term 6] received MsgTimeoutNow from 57 and starts an election to get leadership."]
[2019/05/01 12:36:11.178 -07:00] [INFO] [unknown:739] ["[region 56] 387 became candidate at term 7"]
[2019/05/01 12:36:11.178 -07:00] [INFO] [unknown:854] ["[region 56] 387 received MsgRequestVoteResponse from 387 at term 7"]
[2019/05/01 12:36:11.178 -07:00] [INFO] [unknown:828] ["[region 56] 387 [logterm: 6, index: 10] sent MsgRequestVote request to 381 at term 7"]
[2019/05/01 12:36:11.178 -07:00] [INFO] [unknown:828] ["[region 56] 387 [logterm: 6, index: 10] sent MsgRequestVote request to 57 at term 7"]
[2019/05/01 12:36:11.207 -07:00] [INFO] [unknown:854] ["[region 56] 387 received MsgRequestVoteResponse from 381 at term 7"]
[2019/05/01 12:36:11.207 -07:00] [INFO] [unknown:1550] ["[region 56] 387 [quorum:2] has received 2 MsgRequestVoteResponse votes and 0 vote rejections"]
[2019/05/01 12:36:11.207 -07:00] [INFO] [unknown:789] ["[region 56] 387 became leader at term 7"]
[2019/05/01 12:36:11.230 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="region Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:11.983 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=442] [region_id=321]
[2019/05/01 12:36:11.983 -07:00] [INFO] [unknown:719] ["[region 321] 442 became follower at term 0"]
[2019/05/01 12:36:11.983 -07:00] [INFO] [unknown:295] ["[region 321] 442 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:36:11.983 -07:00] [INFO] [unknown:719] ["[region 321] 442 became follower at term 1"]
[2019/05/01 12:36:11.983 -07:00] [INFO] [unknown:920] ["[region 321] 442 [term: 1] received a MsgHeartbeat message with higher term from 324 [term: 6]"]
[2019/05/01 12:36:11.983 -07:00] [INFO] [unknown:719] ["[region 321] 442 became follower at term 6"]
[2019/05/01 12:36:11.996 -07:00] [INFO] [pd.rs:558] ["try to change peer"] [peer="Peer { id: 443, store_id: 3, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [change_type=AddLearnerNode] [region_id=40]
[2019/05/01 12:36:11.996 -07:00] [INFO] [peer.rs:1953] ["propose conf change peer"] [change_peer=443] [change_type=AddLearnerNode] [peer_id=382] [region_id=40]
[2019/05/01 12:36:12.022 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddLearnerNode, peer: Some(Peer { id: 443, store_id: 3, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=12] [term=7] [peer_id=382] [region_id=40]
[2019/05/01 12:36:12.022 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 5, version: 14, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddLearner] [peer_id=382] [region_id=40]
[2019/05/01 12:36:12.022 -07:00] [INFO] [apply.rs:1476] ["add learner successfully"] [region="Region { id: 40, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 73, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 79, 0, 0, 0, 0, 0, 0, 0, 248], region_epoch: Some(RegionEpoch { conf_ver: 5, version: 14, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 41, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 335, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 382, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 443, store_id: 3, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=382] [region_id=40]
[2019/05/01 12:36:12.039 -07:00] [INFO] [peer.rs:1318] ["notify pd with change peer region"] [region="Region { id: 40, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 73, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 79, 0, 0, 0, 0, 0, 0, 0, 248], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 14, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 41, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 335, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 382, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 443, store_id: 3, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=382] [region_id=40]
[2019/05/01 12:36:12.944 -07:00] [INFO] [unknown:841] ["New connected subchannel at 0x7f85c9629150 for subchannel 0x7f8640441c00"]
[2019/05/01 12:36:12.952 -07:00] [INFO] [snap.rs:389] ["sent snapshot"] [duration=8.862015ms] [size=0] [snap_key=42_7_12] [region_id=42]
[2019/05/01 12:36:12.952 -07:00] [INFO] [peer.rs:538] ["report snapshot status"] [status=Finish] [to="Peer { id: 441, store_id: 3, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=336] [region_id=42]
[2019/05/01 12:36:13.944 -07:00] [INFO] [peer_storage.rs:759] ["requesting snapshot"] [peer_id=382] [region_id=40]
[2019/05/01 12:36:13.949 -07:00] [INFO] [snap.rs:757] ["scan snapshot of one cf"] [size=0] [key_count=0] [cf=default] [snapshot=/opt/tidb/data/kv/snap/gen_40_7_12_(default|lock|write).sst] [region_id=40]
[2019/05/01 12:36:13.949 -07:00] [INFO] [snap.rs:757] ["scan snapshot of one cf"] [size=0] [key_count=0] [cf=lock] [snapshot=/opt/tidb/data/kv/snap/gen_40_7_12_(default|lock|write).sst] [region_id=40]
[2019/05/01 12:36:13.949 -07:00] [INFO] [snap.rs:757] ["scan snapshot of one cf"] [size=0] [key_count=0] [cf=write] [snapshot=/opt/tidb/data/kv/snap/gen_40_7_12_(default|lock|write).sst] [region_id=40]
[2019/05/01 12:36:13.949 -07:00] [INFO] [snap.rs:875] ["scan snapshot"] [takes=223.778µs] [size=0] [key_count=0] [snapshot=/opt/tidb/data/kv/snap/gen_40_7_12_(default|lock|write).sst] [region_id=40]
[2019/05/01 12:36:13.949 -07:00] [INFO] [pd.rs:558] ["try to change peer"] [peer="Peer { id: 441, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [change_type=AddNode] [region_id=42]
[2019/05/01 12:36:13.949 -07:00] [INFO] [peer.rs:1953] ["propose conf change peer"] [change_peer=441] [change_type=AddNode] [peer_id=336] [region_id=42]
[2019/05/01 12:36:13.988 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 441, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=13] [term=7] [peer_id=336] [region_id=42]
[2019/05/01 12:36:13.988 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 6, version: 15, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=336] [region_id=42]
[2019/05/01 12:36:13.988 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 42, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 79, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 83, 0, 0, 0, 0, 0, 0, 0, 248], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 15, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 43, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 336, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 437, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 441, store_id: 3, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 441, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=336] [region_id=42]
[2019/05/01 12:36:13.990 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_321_6_7_(default|lock|write).sst] [snap_key=321_6_7]
[2019/05/01 12:36:14.005 -07:00] [INFO] [peer.rs:1318] ["notify pd with change peer region"] [region="Region { id: 42, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 79, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 83, 0, 0, 0, 0, 0, 0, 0, 248], region_epoch: Some(RegionEpoch { conf_ver: 7, version: 15, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 43, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 336, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 437, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 441, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=336] [region_id=42]
[2019/05/01 12:36:14.005 -07:00] [INFO] [unknown:1792] ["[region 321] 442 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 7, term: 6]"]
[2019/05/01 12:36:14.005 -07:00] [INFO] [unknown:1816] ["[region 321] 442 restored progress of 322 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:36:14.005 -07:00] [INFO] [unknown:1816] ["[region 321] 442 restored progress of 323 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:36:14.005 -07:00] [INFO] [unknown:1816] ["[region 321] 442 restored progress of 324 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:36:14.005 -07:00] [INFO] [unknown:1816] ["[region 321] 442 restored progress of 442 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:36:14.005 -07:00] [INFO] [unknown:474] ["[region 321] 442 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 7, term: 6]"]
[2019/05/01 12:36:14.005 -07:00] [INFO] [unknown:1736] ["[region 321] 442 [commit: 7] restored snapshot [index: 7, term: 6]"]
[2019/05/01 12:36:14.005 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=442] [region_id=321]
[2019/05/01 12:36:14.005 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 7, truncated_state: Some(RaftTruncatedState { index: 7, term: 6, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 321, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 114, 128, 0, 0, 0, 0, 255, 1, 212, 197, 0, 0, 0, 0, 0, 250], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 114, 128, 0, 0, 0, 0, 255, 1, 212, 199, 0, 0, 0, 0, 0, 250], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 20, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 322, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 323, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 324, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 442, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=442] [region_id=321]
[2019/05/01 12:36:14.031 -07:00] [INFO] [pd.rs:558] ["try to change peer"] [peer="Peer { id: 43, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [change_type=RemoveNode] [region_id=42]
[2019/05/01 12:36:14.035 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 321] 442"]
[2019/05/01 12:36:14.035 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 321, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 114, 128, 0, 0, 0, 0, 255, 1, 212, 197, 0, 0, 0, 0, 0, 250], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 114, 128, 0, 0, 0, 0, 255, 1, 212, 199, 0, 0, 0, 0, 0, 250], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 20, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 322, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 323, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 324, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 442, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=442] [region_id=321]
[2019/05/01 12:36:14.036 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=321]
[2019/05/01 12:36:14.036 -07:00] [INFO] [peer.rs:1953] ["propose conf change peer"] [change_peer=43] [change_type=RemoveNode] [peer_id=336] [region_id=42]
[2019/05/01 12:36:14.054 -07:00] [INFO] [pd.rs:558] ["try to change peer"] [peer="Peer { id: 43, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [change_type=RemoveNode] [region_id=42]
[2019/05/01 12:36:14.096 -07:00] [INFO] [peer.rs:1927] ["there is a pending conf change, try later"] [peer_id=336] [region_id=42]
[2019/05/01 12:36:14.096 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=60.782196ms] [region_id=321]
[2019/05/01 12:36:14.096 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 43, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=14] [term=7] [peer_id=336] [region_id=42]
[2019/05/01 12:36:14.096 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 7, version: 15, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=336] [region_id=42]
[2019/05/01 12:36:14.096 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 42, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 79, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 83, 0, 0, 0, 0, 0, 0, 0, 248], region_epoch: Some(RegionEpoch { conf_ver: 7, version: 15, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 43, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 336, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 437, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 441, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 43, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=336] [region_id=42]
[2019/05/01 12:36:14.114 -07:00] [INFO] [peer.rs:1318] ["notify pd with change peer region"] [region="Region { id: 42, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 79, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 83, 0, 0, 0, 0, 0, 0, 0, 248], region_epoch: Some(RegionEpoch { conf_ver: 8, version: 15, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 336, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 437, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 441, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=336] [region_id=42]
[2019/05/01 12:36:14.744 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=484] [region_id=417]
[2019/05/01 12:36:14.745 -07:00] [INFO] [unknown:719] ["[region 417] 484 became follower at term 0"]
[2019/05/01 12:36:14.745 -07:00] [INFO] [unknown:295] ["[region 417] 484 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:36:14.745 -07:00] [INFO] [unknown:719] ["[region 417] 484 became follower at term 1"]
[2019/05/01 12:36:14.745 -07:00] [INFO] [unknown:920] ["[region 417] 484 [term: 1] received a MsgHeartbeat message with higher term from 420 [term: 7]"]
[2019/05/01 12:36:14.745 -07:00] [INFO] [unknown:719] ["[region 417] 484 became follower at term 7"]
[2019/05/01 12:36:15.047 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 442, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=8] [term=6] [peer_id=442] [region_id=321]
[2019/05/01 12:36:15.047 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 6, version: 20, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=442] [region_id=321]
[2019/05/01 12:36:15.047 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 321, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 114, 128, 0, 0, 0, 0, 255, 1, 212, 197, 0, 0, 0, 0, 0, 250], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 114, 128, 0, 0, 0, 0, 255, 1, 212, 199, 0, 0, 0, 0, 0, 250], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 20, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 322, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 323, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 324, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 442, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 442, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=442] [region_id=321]
[2019/05/01 12:36:15.050 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 440, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=12] [term=7] [peer_id=316] [region_id=138]
[2019/05/01 12:36:15.050 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 6, version: 18, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=316] [region_id=138]
[2019/05/01 12:36:15.050 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 138, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 116, 105, 107, 118, 255, 95, 103, 99, 95, 255, 108, 101, 97, 255, 100, 101, 114, 95, 117, 255, 117, 105, 255, 100, 0, 0, 0, 0, 0, 250, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 116, 105, 107, 118, 255, 95, 103, 99, 95, 255, 114, 117, 110, 255, 95, 105, 110, 116, 101, 255, 114, 118, 255, 97, 108, 0, 0, 0, 0, 251, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 18, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 139, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 140, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 316, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 440, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 440, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=316] [region_id=138]
[2019/05/01 12:36:15.157 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 139, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=13] [term=7] [peer_id=316] [region_id=138]
[2019/05/01 12:36:15.157 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 7, version: 18, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=316] [region_id=138]
[2019/05/01 12:36:15.157 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 138, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 116, 105, 107, 118, 255, 95, 103, 99, 95, 255, 108, 101, 97, 255, 100, 101, 114, 95, 117, 255, 117, 105, 255, 100, 0, 0, 0, 0, 0, 250, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 116, 105, 107, 118, 255, 95, 103, 99, 95, 255, 114, 117, 110, 255, 95, 105, 110, 116, 101, 255, 114, 118, 255, 97, 108, 0, 0, 0, 0, 251, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 7, version: 18, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 139, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 140, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 316, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 440, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 139, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=316] [region_id=138]
[2019/05/01 12:36:15.175 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 322, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=9] [term=6] [peer_id=442] [region_id=321]
[2019/05/01 12:36:15.175 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 7, version: 20, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=442] [region_id=321]
[2019/05/01 12:36:15.175 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 321, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 114, 128, 0, 0, 0, 0, 255, 1, 212, 197, 0, 0, 0, 0, 0, 250], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 114, 128, 0, 0, 0, 0, 255, 1, 212, 199, 0, 0, 0, 0, 0, 250], region_epoch: Some(RegionEpoch { conf_ver: 7, version: 20, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 322, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 323, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 324, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 442, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 322, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=442] [region_id=321]
[2019/05/01 12:36:15.476 -07:00] [INFO] [unknown:920] ["[region 214] 388 [term: 6] received a MsgRequestVote message with higher term from 383 [term: 7]"]
[2019/05/01 12:36:15.476 -07:00] [INFO] [unknown:719] ["[region 214] 388 became follower at term 7"]
[2019/05/01 12:36:15.476 -07:00] [INFO] [unknown:1083] ["[region 214] 388 [logterm: 6, index: 10, vote: 0] cast MsgRequestVote for 383 [logterm: 6, index: 10] at term 7"]
[2019/05/01 12:36:15.946 -07:00] [INFO] [unknown:841] ["New connected subchannel at 0x7f858f6601b0 for subchannel 0x7f8640441e00"]
[2019/05/01 12:36:15.960 -07:00] [INFO] [snap.rs:389] ["sent snapshot"] [duration=14.378388ms] [size=0] [snap_key=40_7_12] [region_id=40]
[2019/05/01 12:36:15.960 -07:00] [INFO] [peer.rs:538] ["report snapshot status"] [status=Finish] [to="Peer { id: 443, store_id: 3, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=382] [region_id=40]
[2019/05/01 12:36:16.748 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_417_7_8_(default|lock|write).sst] [snap_key=417_7_8]
[2019/05/01 12:36:16.760 -07:00] [INFO] [unknown:1792] ["[region 417] 484 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 8, term: 7]"]
[2019/05/01 12:36:16.760 -07:00] [INFO] [unknown:1816] ["[region 417] 484 restored progress of 418 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:36:16.760 -07:00] [INFO] [unknown:1816] ["[region 417] 484 restored progress of 419 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:36:16.760 -07:00] [INFO] [unknown:1816] ["[region 417] 484 restored progress of 420 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:36:16.760 -07:00] [INFO] [unknown:1816] ["[region 417] 484 restored progress of 484 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:36:16.760 -07:00] [INFO] [unknown:474] ["[region 417] 484 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 8, term: 7]"]
[2019/05/01 12:36:16.760 -07:00] [INFO] [unknown:1736] ["[region 417] 484 [commit: 8] restored snapshot [index: 8, term: 7]"]
[2019/05/01 12:36:16.760 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=484] [region_id=417]
[2019/05/01 12:36:16.760 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 8, truncated_state: Some(RaftTruncatedState { index: 8, term: 7, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 417, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 99, 111, 108, 108, 255, 97, 116, 105, 111, 255, 110, 95, 100, 255, 97, 116, 97, 98, 97, 255, 115, 101, 255, 0, 0, 0, 0, 0, 0, 249, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 99, 111, 108, 108, 255, 97, 116, 105, 111, 255, 110, 95, 115, 255, 101, 114, 118, 101, 114, 255, 0, 0, 255, 0, 0, 0, 0, 0, 0, 247, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 47, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 418, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 419, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 420, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 484, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=484] [region_id=417]
[2019/05/01 12:36:16.773 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 417, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 99, 111, 108, 108, 255, 97, 116, 105, 111, 255, 110, 95, 100, 255, 97, 116, 97, 98, 97, 255, 115, 101, 255, 0, 0, 0, 0, 0, 0, 249, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 99, 111, 108, 108, 255, 97, 116, 105, 111, 255, 110, 95, 115, 255, 101, 114, 118, 101, 114, 255, 0, 0, 255, 0, 0, 0, 0, 0, 0, 247, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 47, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 418, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 419, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 420, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 484, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=484] [region_id=417]
[2019/05/01 12:36:16.773 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 417] 484"]
[2019/05/01 12:36:16.773 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=417]
[2019/05/01 12:36:16.796 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=22.639879ms] [region_id=417]
[2019/05/01 12:36:16.947 -07:00] [INFO] [pd.rs:558] ["try to change peer"] [peer="Peer { id: 443, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [change_type=AddNode] [region_id=40]
[2019/05/01 12:36:16.947 -07:00] [INFO] [peer.rs:1953] ["propose conf change peer"] [change_peer=443] [change_type=AddNode] [peer_id=382] [region_id=40]
[2019/05/01 12:36:17.008 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=485] [region_id=120]
[2019/05/01 12:36:17.008 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 443, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=13] [term=7] [peer_id=382] [region_id=40]
[2019/05/01 12:36:17.008 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 6, version: 14, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=382] [region_id=40]
[2019/05/01 12:36:17.008 -07:00] [INFO] [unknown:719] ["[region 120] 485 became follower at term 0"]
[2019/05/01 12:36:17.008 -07:00] [INFO] [unknown:295] ["[region 120] 485 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:36:17.008 -07:00] [INFO] [unknown:719] ["[region 120] 485 became follower at term 1"]
[2019/05/01 12:36:17.008 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 40, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 73, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 79, 0, 0, 0, 0, 0, 0, 0, 248], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 14, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 41, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 335, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 382, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 443, store_id: 3, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 443, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=382] [region_id=40]
[2019/05/01 12:36:17.008 -07:00] [INFO] [unknown:920] ["[region 120] 485 [term: 1] received a MsgHeartbeat message with higher term from 122 [term: 7]"]
[2019/05/01 12:36:17.008 -07:00] [INFO] [unknown:719] ["[region 120] 485 became follower at term 7"]
[2019/05/01 12:36:17.019 -07:00] [INFO] [peer.rs:1318] ["notify pd with change peer region"] [region="Region { id: 40, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 73, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 79, 0, 0, 0, 0, 0, 0, 0, 248], region_epoch: Some(RegionEpoch { conf_ver: 7, version: 14, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 41, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 335, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 382, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 443, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=382] [region_id=40]
[2019/05/01 12:36:17.025 -07:00] [INFO] [pd.rs:558] ["try to change peer"] [peer="Peer { id: 41, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [change_type=RemoveNode] [region_id=40]
[2019/05/01 12:36:17.025 -07:00] [INFO] [peer.rs:1953] ["propose conf change peer"] [change_peer=41] [change_type=RemoveNode] [peer_id=382] [region_id=40]
[2019/05/01 12:36:17.057 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 41, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=14] [term=7] [peer_id=382] [region_id=40]
[2019/05/01 12:36:17.058 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 7, version: 14, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=382] [region_id=40]
[2019/05/01 12:36:17.058 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 40, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 73, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 79, 0, 0, 0, 0, 0, 0, 0, 248], region_epoch: Some(RegionEpoch { conf_ver: 7, version: 14, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 41, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 335, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 382, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 443, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 41, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=382] [region_id=40]
[2019/05/01 12:36:17.058 -07:00] [INFO] [pd.rs:558] ["try to change peer"] [peer="Peer { id: 41, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [change_type=RemoveNode] [region_id=40]
[2019/05/01 12:36:17.058 -07:00] [INFO] [peer.rs:1927] ["there is a pending conf change, try later"] [peer_id=382] [region_id=40]
[2019/05/01 12:36:17.067 -07:00] [INFO] [peer.rs:1318] ["notify pd with change peer region"] [region="Region { id: 40, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 73, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 79, 0, 0, 0, 0, 0, 0, 0, 248], region_epoch: Some(RegionEpoch { conf_ver: 8, version: 14, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 335, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 382, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 443, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=382] [region_id=40]
[2019/05/01 12:36:17.067 -07:00] [INFO] [store.rs:294] ["raft message is stale, ignore it"] [msg_type=MsgAppendResponse] [current_region_epoch="RegionEpoch { conf_ver: 8, version: 14, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region_id=40]
[2019/05/01 12:36:17.798 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 484, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=9] [term=7] [peer_id=484] [region_id=417]
[2019/05/01 12:36:17.798 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 6, version: 47, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=484] [region_id=417]
[2019/05/01 12:36:17.798 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 417, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 99, 111, 108, 108, 255, 97, 116, 105, 111, 255, 110, 95, 100, 255, 97, 116, 97, 98, 97, 255, 115, 101, 255, 0, 0, 0, 0, 0, 0, 249, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 99, 111, 108, 108, 255, 97, 116, 105, 111, 255, 110, 95, 115, 255, 101, 114, 118, 101, 114, 255, 0, 0, 255, 0, 0, 0, 0, 0, 0, 247, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 47, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 418, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 419, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 420, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 484, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 484, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=484] [region_id=417]
[2019/05/01 12:36:17.829 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 418, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=10] [term=7] [peer_id=484] [region_id=417]
[2019/05/01 12:36:17.829 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 7, version: 47, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=484] [region_id=417]
[2019/05/01 12:36:17.829 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 417, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 99, 111, 108, 108, 255, 97, 116, 105, 111, 255, 110, 95, 100, 255, 97, 116, 97, 98, 97, 255, 115, 101, 255, 0, 0, 0, 0, 0, 0, 249, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 99, 111, 108, 108, 255, 97, 116, 105, 111, 255, 110, 95, 115, 255, 101, 114, 118, 101, 114, 255, 0, 0, 255, 0, 0, 0, 0, 0, 0, 247, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 7, version: 47, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 418, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 419, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 420, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 484, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 418, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=484] [region_id=417]
[2019/05/01 12:36:18.683 -07:00] [INFO] [unknown:1625] ["[region 4] 393 [term 6] received MsgTimeoutNow from 5 and starts an election to get leadership."]
[2019/05/01 12:36:18.683 -07:00] [INFO] [unknown:739] ["[region 4] 393 became candidate at term 7"]
[2019/05/01 12:36:18.683 -07:00] [INFO] [unknown:854] ["[region 4] 393 received MsgRequestVoteResponse from 393 at term 7"]
[2019/05/01 12:36:18.683 -07:00] [INFO] [unknown:828] ["[region 4] 393 [logterm: 6, index: 3355] sent MsgRequestVote request to 5 at term 7"]
[2019/05/01 12:36:18.683 -07:00] [INFO] [unknown:828] ["[region 4] 393 [logterm: 6, index: 3355] sent MsgRequestVote request to 386 at term 7"]
[2019/05/01 12:36:18.684 -07:00] [INFO] [unknown:1625] ["[region 94] 384 [term 6] received MsgTimeoutNow from 95 and starts an election to get leadership."]
[2019/05/01 12:36:18.684 -07:00] [INFO] [unknown:739] ["[region 94] 384 became candidate at term 7"]
[2019/05/01 12:36:18.684 -07:00] [INFO] [unknown:854] ["[region 94] 384 received MsgRequestVoteResponse from 384 at term 7"]
[2019/05/01 12:36:18.684 -07:00] [INFO] [unknown:828] ["[region 94] 384 [logterm: 6, index: 11] sent MsgRequestVote request to 389 at term 7"]
[2019/05/01 12:36:18.684 -07:00] [INFO] [unknown:828] ["[region 94] 384 [logterm: 6, index: 11] sent MsgRequestVote request to 95 at term 7"]
[2019/05/01 12:36:18.700 -07:00] [INFO] [unknown:854] ["[region 4] 393 received MsgRequestVoteResponse from 386 at term 7"]
[2019/05/01 12:36:18.700 -07:00] [INFO] [unknown:1550] ["[region 4] 393 [quorum:2] has received 2 MsgRequestVoteResponse votes and 0 vote rejections"]
[2019/05/01 12:36:18.700 -07:00] [INFO] [unknown:789] ["[region 4] 393 became leader at term 7"]
[2019/05/01 12:36:18.707 -07:00] [ERROR] [process.rs:169] ["get snapshot failed"] [err="Request(Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } })"] [cid=1]
[2019/05/01 12:36:18.708 -07:00] [INFO] [unknown:854] ["[region 94] 384 received MsgRequestVoteResponse from 389 at term 7"]
[2019/05/01 12:36:18.708 -07:00] [INFO] [unknown:1550] ["[region 94] 384 [quorum:2] has received 2 MsgRequestVoteResponse votes and 0 vote rejections"]
[2019/05/01 12:36:18.708 -07:00] [INFO] [unknown:789] ["[region 94] 384 became leader at term 7"]
[2019/05/01 12:36:18.708 -07:00] [ERROR] [process.rs:169] ["get snapshot failed"] [err="Request(Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } })"] [cid=2]
[2019/05/01 12:36:18.708 -07:00] [ERROR] [process.rs:169] ["get snapshot failed"] [err="Request(Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } })"] [cid=3]
[2019/05/01 12:36:18.708 -07:00] [ERROR] [process.rs:169] ["get snapshot failed"] [err="Request(Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } })"] [cid=4]
[2019/05/01 12:36:18.708 -07:00] [ERROR] [process.rs:169] ["get snapshot failed"] [err="Request(Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } })"] [cid=5]
[2019/05/01 12:36:18.708 -07:00] [ERROR] [process.rs:169] ["get snapshot failed"] [err="Request(Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } })"] [cid=6]
[2019/05/01 12:36:18.708 -07:00] [ERROR] [process.rs:169] ["get snapshot failed"] [err="Request(Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } })"] [cid=7]
[2019/05/01 12:36:18.708 -07:00] [ERROR] [process.rs:169] ["get snapshot failed"] [err="Request(Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } })"] [cid=8]
[2019/05/01 12:36:18.708 -07:00] [ERROR] [process.rs:169] ["get snapshot failed"] [err="Request(Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } })"] [cid=9]
[2019/05/01 12:36:18.708 -07:00] [ERROR] [process.rs:169] ["get snapshot failed"] [err="Request(Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } })"] [cid=10]
[2019/05/01 12:36:18.708 -07:00] [ERROR] [process.rs:169] ["get snapshot failed"] [err="Request(Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } })"] [cid=11]
[2019/05/01 12:36:18.708 -07:00] [ERROR] [process.rs:169] ["get snapshot failed"] [err="Request(Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } })"] [cid=12]
[2019/05/01 12:36:18.709 -07:00] [ERROR] [process.rs:169] ["get snapshot failed"] [err="Request(Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } })"] [cid=13]
[2019/05/01 12:36:18.709 -07:00] [ERROR] [process.rs:169] ["get snapshot failed"] [err="Request(Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } })"] [cid=14]
[2019/05/01 12:36:18.709 -07:00] [ERROR] [process.rs:169] ["get snapshot failed"] [err="Request(Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } })"] [cid=15]
[2019/05/01 12:36:18.709 -07:00] [ERROR] [process.rs:169] ["get snapshot failed"] [err="Request(Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } })"] [cid=16]
[2019/05/01 12:36:18.709 -07:00] [ERROR] [process.rs:169] ["get snapshot failed"] [err="Request(Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } })"] [cid=17]
[2019/05/01 12:36:18.709 -07:00] [ERROR] [process.rs:169] ["get snapshot failed"] [err="Request(Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } })"] [cid=18]
[2019/05/01 12:36:18.709 -07:00] [ERROR] [process.rs:169] ["get snapshot failed"] [err="Request(Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } })"] [cid=19]
[2019/05/01 12:36:18.709 -07:00] [ERROR] [process.rs:169] ["get snapshot failed"] [err="Request(Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } })"] [cid=20]
[2019/05/01 12:36:18.709 -07:00] [ERROR] [process.rs:169] ["get snapshot failed"] [err="Request(Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } })"] [cid=21]
[2019/05/01 12:36:18.709 -07:00] [ERROR] [process.rs:169] ["get snapshot failed"] [err="Request(Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } })"] [cid=22]
[2019/05/01 12:36:18.709 -07:00] [ERROR] [process.rs:169] ["get snapshot failed"] [err="Request(Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } })"] [cid=23]
[2019/05/01 12:36:18.709 -07:00] [ERROR] [process.rs:169] ["get snapshot failed"] [err="Request(Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } })"] [cid=24]
[2019/05/01 12:36:18.709 -07:00] [ERROR] [process.rs:169] ["get snapshot failed"] [err="Request(Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } })"] [cid=25]
[2019/05/01 12:36:18.710 -07:00] [ERROR] [process.rs:169] ["get snapshot failed"] [err="Request(Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } })"] [cid=26]
[2019/05/01 12:36:18.710 -07:00] [ERROR] [process.rs:169] ["get snapshot failed"] [err="Request(Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } })"] [cid=27]
[2019/05/01 12:36:18.710 -07:00] [ERROR] [process.rs:169] ["get snapshot failed"] [err="Request(Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } })"] [cid=28]
[2019/05/01 12:36:18.710 -07:00] [ERROR] [process.rs:169] ["get snapshot failed"] [err="Request(Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } })"] [cid=29]
[2019/05/01 12:36:18.710 -07:00] [ERROR] [process.rs:169] ["get snapshot failed"] [err="Request(Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } })"] [cid=30]
[2019/05/01 12:36:18.710 -07:00] [ERROR] [process.rs:169] ["get snapshot failed"] [err="Request(Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } })"] [cid=31]
[2019/05/01 12:36:18.710 -07:00] [ERROR] [process.rs:169] ["get snapshot failed"] [err="Request(Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } })"] [cid=32]
[2019/05/01 12:36:18.710 -07:00] [ERROR] [process.rs:169] ["get snapshot failed"] [err="Request(Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } })"] [cid=33]
[2019/05/01 12:36:18.710 -07:00] [ERROR] [process.rs:169] ["get snapshot failed"] [err="Request(Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } })"] [cid=34]
[2019/05/01 12:36:18.710 -07:00] [ERROR] [process.rs:169] ["get snapshot failed"] [err="Request(Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } })"] [cid=35]
[2019/05/01 12:36:18.710 -07:00] [ERROR] [process.rs:169] ["get snapshot failed"] [err="Request(Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } })"] [cid=36]
[2019/05/01 12:36:18.710 -07:00] [ERROR] [process.rs:169] ["get snapshot failed"] [err="Request(Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } })"] [cid=37]
[2019/05/01 12:36:18.710 -07:00] [ERROR] [process.rs:169] ["get snapshot failed"] [err="Request(Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } })"] [cid=38]
[2019/05/01 12:36:18.710 -07:00] [ERROR] [process.rs:169] ["get snapshot failed"] [err="Request(Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } })"] [cid=39]
[2019/05/01 12:36:18.711 -07:00] [ERROR] [process.rs:169] ["get snapshot failed"] [err="Request(Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } })"] [cid=40]
[2019/05/01 12:36:18.711 -07:00] [ERROR] [process.rs:169] ["get snapshot failed"] [err="Request(Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } })"] [cid=41]
[2019/05/01 12:36:18.711 -07:00] [ERROR] [process.rs:169] ["get snapshot failed"] [err="Request(Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } })"] [cid=42]
[2019/05/01 12:36:18.711 -07:00] [ERROR] [process.rs:169] ["get snapshot failed"] [err="Request(Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } })"] [cid=44]
[2019/05/01 12:36:18.711 -07:00] [ERROR] [process.rs:169] ["get snapshot failed"] [err="Request(Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } })"] [cid=43]
[2019/05/01 12:36:18.711 -07:00] [ERROR] [process.rs:169] ["get snapshot failed"] [err="Request(Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } })"] [cid=45]
[2019/05/01 12:36:18.711 -07:00] [ERROR] [process.rs:169] ["get snapshot failed"] [err="Request(Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } })"] [cid=46]
[2019/05/01 12:36:18.711 -07:00] [ERROR] [process.rs:169] ["get snapshot failed"] [err="Request(Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } })"] [cid=47]
[2019/05/01 12:36:18.711 -07:00] [ERROR] [process.rs:169] ["get snapshot failed"] [err="Request(Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } })"] [cid=48]
[2019/05/01 12:36:18.711 -07:00] [ERROR] [process.rs:169] ["get snapshot failed"] [err="Request(Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } })"] [cid=49]
[2019/05/01 12:36:18.711 -07:00] [ERROR] [process.rs:169] ["get snapshot failed"] [err="Request(Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } })"] [cid=51]
[2019/05/01 12:36:18.711 -07:00] [ERROR] [process.rs:169] ["get snapshot failed"] [err="Request(Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } })"] [cid=50]
[2019/05/01 12:36:18.711 -07:00] [ERROR] [process.rs:169] ["get snapshot failed"] [err="Request(Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } })"] [cid=52]
[2019/05/01 12:36:18.712 -07:00] [ERROR] [process.rs:169] ["get snapshot failed"] [err="Request(Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } })"] [cid=53]
[2019/05/01 12:36:18.712 -07:00] [ERROR] [process.rs:169] ["get snapshot failed"] [err="Request(Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } })"] [cid=54]
[2019/05/01 12:36:18.712 -07:00] [ERROR] [process.rs:169] ["get snapshot failed"] [err="Request(Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } })"] [cid=55]
[2019/05/01 12:36:18.712 -07:00] [ERROR] [process.rs:169] ["get snapshot failed"] [err="Request(Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } })"] [cid=56]
[2019/05/01 12:36:18.712 -07:00] [ERROR] [process.rs:169] ["get snapshot failed"] [err="Request(Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } })"] [cid=57]
[2019/05/01 12:36:18.712 -07:00] [ERROR] [process.rs:169] ["get snapshot failed"] [err="Request(Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } })"] [cid=58]
[2019/05/01 12:36:18.712 -07:00] [ERROR] [process.rs:169] ["get snapshot failed"] [err="Request(Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } })"] [cid=59]
[2019/05/01 12:36:18.712 -07:00] [ERROR] [process.rs:169] ["get snapshot failed"] [err="Request(Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } })"] [cid=60]
[2019/05/01 12:36:18.712 -07:00] [ERROR] [process.rs:169] ["get snapshot failed"] [err="Request(Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } })"] [cid=61]
[2019/05/01 12:36:18.712 -07:00] [ERROR] [process.rs:169] ["get snapshot failed"] [err="Request(Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } })"] [cid=62]
[2019/05/01 12:36:18.712 -07:00] [ERROR] [process.rs:169] ["get snapshot failed"] [err="Request(Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } })"] [cid=63]
[2019/05/01 12:36:18.712 -07:00] [ERROR] [process.rs:169] ["get snapshot failed"] [err="Request(Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } })"] [cid=64]
[2019/05/01 12:36:18.712 -07:00] [ERROR] [process.rs:169] ["get snapshot failed"] [err="Request(Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } })"] [cid=65]
[2019/05/01 12:36:18.712 -07:00] [ERROR] [process.rs:169] ["get snapshot failed"] [err="Request(Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } })"] [cid=66]
[2019/05/01 12:36:18.712 -07:00] [ERROR] [process.rs:169] ["get snapshot failed"] [err="Request(Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } })"] [cid=67]
[2019/05/01 12:36:18.713 -07:00] [ERROR] [process.rs:169] ["get snapshot failed"] [err="Request(Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } })"] [cid=68]
[2019/05/01 12:36:18.713 -07:00] [ERROR] [process.rs:169] ["get snapshot failed"] [err="Request(Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } })"] [cid=69]
[2019/05/01 12:36:18.713 -07:00] [ERROR] [process.rs:169] ["get snapshot failed"] [err="Request(Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } })"] [cid=70]
[2019/05/01 12:36:18.713 -07:00] [ERROR] [process.rs:169] ["get snapshot failed"] [err="Request(Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } })"] [cid=71]
[2019/05/01 12:36:18.713 -07:00] [ERROR] [process.rs:169] ["get snapshot failed"] [err="Request(Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } })"] [cid=72]
[2019/05/01 12:36:18.713 -07:00] [ERROR] [process.rs:169] ["get snapshot failed"] [err="Request(Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } })"] [cid=73]
[2019/05/01 12:36:18.713 -07:00] [ERROR] [process.rs:169] ["get snapshot failed"] [err="Request(Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } })"] [cid=74]
[2019/05/01 12:36:18.721 -07:00] [ERROR] [process.rs:169] ["get snapshot failed"] [err="Request(Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } })"] [cid=75]
[2019/05/01 12:36:18.721 -07:00] [ERROR] [process.rs:169] ["get snapshot failed"] [err="Request(Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } })"] [cid=76]
[2019/05/01 12:36:18.721 -07:00] [ERROR] [process.rs:169] ["get snapshot failed"] [err="Request(Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } })"] [cid=77]
[2019/05/01 12:36:18.721 -07:00] [ERROR] [process.rs:169] ["get snapshot failed"] [err="Request(Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } })"] [cid=78]
[2019/05/01 12:36:18.721 -07:00] [ERROR] [process.rs:169] ["get snapshot failed"] [err="Request(Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } })"] [cid=79]
[2019/05/01 12:36:18.721 -07:00] [ERROR] [process.rs:169] ["get snapshot failed"] [err="Request(Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } })"] [cid=80]
[2019/05/01 12:36:18.721 -07:00] [ERROR] [process.rs:169] ["get snapshot failed"] [err="Request(Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } })"] [cid=81]
[2019/05/01 12:36:18.721 -07:00] [ERROR] [process.rs:169] ["get snapshot failed"] [err="Request(Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } })"] [cid=82]
[2019/05/01 12:36:18.721 -07:00] [ERROR] [process.rs:169] ["get snapshot failed"] [err="Request(Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } })"] [cid=83]
[2019/05/01 12:36:18.721 -07:00] [ERROR] [process.rs:169] ["get snapshot failed"] [err="Request(Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } })"] [cid=84]
[2019/05/01 12:36:18.721 -07:00] [ERROR] [process.rs:169] ["get snapshot failed"] [err="Request(Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } })"] [cid=85]
[2019/05/01 12:36:18.721 -07:00] [ERROR] [process.rs:169] ["get snapshot failed"] [err="Request(Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } })"] [cid=86]
[2019/05/01 12:36:18.721 -07:00] [ERROR] [process.rs:169] ["get snapshot failed"] [err="Request(Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } })"] [cid=87]
[2019/05/01 12:36:18.721 -07:00] [ERROR] [process.rs:169] ["get snapshot failed"] [err="Request(Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } })"] [cid=88]
[2019/05/01 12:36:18.721 -07:00] [ERROR] [process.rs:169] ["get snapshot failed"] [err="Request(Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } })"] [cid=89]
[2019/05/01 12:36:18.721 -07:00] [ERROR] [process.rs:169] ["get snapshot failed"] [err="Request(Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } })"] [cid=90]
[2019/05/01 12:36:18.721 -07:00] [ERROR] [process.rs:169] ["get snapshot failed"] [err="Request(Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } })"] [cid=91]
[2019/05/01 12:36:18.721 -07:00] [ERROR] [process.rs:169] ["get snapshot failed"] [err="Request(Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } })"] [cid=92]
[2019/05/01 12:36:18.721 -07:00] [ERROR] [process.rs:169] ["get snapshot failed"] [err="Request(Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } })"] [cid=93]
[2019/05/01 12:36:18.721 -07:00] [ERROR] [process.rs:169] ["get snapshot failed"] [err="Request(Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } })"] [cid=94]
[2019/05/01 12:36:18.721 -07:00] [ERROR] [process.rs:169] ["get snapshot failed"] [err="Request(Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } })"] [cid=95]
[2019/05/01 12:36:18.721 -07:00] [ERROR] [process.rs:169] ["get snapshot failed"] [err="Request(Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } })"] [cid=96]
[2019/05/01 12:36:18.721 -07:00] [ERROR] [process.rs:169] ["get snapshot failed"] [err="Request(Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } })"] [cid=97]
[2019/05/01 12:36:18.721 -07:00] [ERROR] [process.rs:169] ["get snapshot failed"] [err="Request(Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } })"] [cid=98]
[2019/05/01 12:36:18.721 -07:00] [ERROR] [process.rs:169] ["get snapshot failed"] [err="Request(Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } })"] [cid=99]
[2019/05/01 12:36:18.721 -07:00] [ERROR] [process.rs:169] ["get snapshot failed"] [err="Request(Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } })"] [cid=100]
[2019/05/01 12:36:18.721 -07:00] [ERROR] [process.rs:169] ["get snapshot failed"] [err="Request(Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } })"] [cid=101]
[2019/05/01 12:36:18.721 -07:00] [ERROR] [process.rs:169] ["get snapshot failed"] [err="Request(Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } })"] [cid=102]
[2019/05/01 12:36:18.721 -07:00] [ERROR] [process.rs:169] ["get snapshot failed"] [err="Request(Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } })"] [cid=103]
[2019/05/01 12:36:18.721 -07:00] [ERROR] [process.rs:169] ["get snapshot failed"] [err="Request(Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } })"] [cid=104]
[2019/05/01 12:36:18.721 -07:00] [ERROR] [process.rs:169] ["get snapshot failed"] [err="Request(Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } })"] [cid=106]
[2019/05/01 12:36:18.721 -07:00] [ERROR] [process.rs:169] ["get snapshot failed"] [err="Request(Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } })"] [cid=105]
[2019/05/01 12:36:18.721 -07:00] [ERROR] [process.rs:169] ["get snapshot failed"] [err="Request(Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } })"] [cid=107]
[2019/05/01 12:36:18.721 -07:00] [ERROR] [process.rs:169] ["get snapshot failed"] [err="Request(Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } })"] [cid=108]
[2019/05/01 12:36:18.721 -07:00] [ERROR] [process.rs:169] ["get snapshot failed"] [err="Request(Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } })"] [cid=109]
[2019/05/01 12:36:18.722 -07:00] [ERROR] [process.rs:169] ["get snapshot failed"] [err="Request(Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } })"] [cid=110]
[2019/05/01 12:36:18.722 -07:00] [ERROR] [process.rs:169] ["get snapshot failed"] [err="Request(Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } })"] [cid=111]
[2019/05/01 12:36:18.722 -07:00] [ERROR] [process.rs:169] ["get snapshot failed"] [err="Request(Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } })"] [cid=112]
[2019/05/01 12:36:18.722 -07:00] [ERROR] [process.rs:169] ["get snapshot failed"] [err="Request(Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } })"] [cid=113]
[2019/05/01 12:36:18.722 -07:00] [ERROR] [process.rs:169] ["get snapshot failed"] [err="Request(Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } })"] [cid=115]
[2019/05/01 12:36:18.722 -07:00] [ERROR] [process.rs:169] ["get snapshot failed"] [err="Request(Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } })"] [cid=114]
[2019/05/01 12:36:18.722 -07:00] [ERROR] [process.rs:169] ["get snapshot failed"] [err="Request(Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } })"] [cid=116]
[2019/05/01 12:36:18.722 -07:00] [ERROR] [process.rs:169] ["get snapshot failed"] [err="Request(Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } })"] [cid=117]
[2019/05/01 12:36:18.722 -07:00] [ERROR] [process.rs:169] ["get snapshot failed"] [err="Request(Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } })"] [cid=118]
[2019/05/01 12:36:18.722 -07:00] [ERROR] [process.rs:169] ["get snapshot failed"] [err="Request(Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } })"] [cid=119]
[2019/05/01 12:36:18.722 -07:00] [ERROR] [process.rs:169] ["get snapshot failed"] [err="Request(Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } })"] [cid=120]
[2019/05/01 12:36:18.722 -07:00] [ERROR] [process.rs:169] ["get snapshot failed"] [err="Request(Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } })"] [cid=121]
[2019/05/01 12:36:18.722 -07:00] [ERROR] [process.rs:169] ["get snapshot failed"] [err="Request(Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } })"] [cid=122]
[2019/05/01 12:36:18.722 -07:00] [ERROR] [process.rs:169] ["get snapshot failed"] [err="Request(Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } })"] [cid=123]
[2019/05/01 12:36:18.722 -07:00] [ERROR] [process.rs:169] ["get snapshot failed"] [err="Request(Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } })"] [cid=124]
[2019/05/01 12:36:18.722 -07:00] [ERROR] [process.rs:169] ["get snapshot failed"] [err="Request(Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } })"] [cid=125]
[2019/05/01 12:36:18.722 -07:00] [ERROR] [process.rs:169] ["get snapshot failed"] [err="Request(Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } })"] [cid=126]
[2019/05/01 12:36:18.722 -07:00] [ERROR] [process.rs:169] ["get snapshot failed"] [err="Request(Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } })"] [cid=127]
[2019/05/01 12:36:18.722 -07:00] [ERROR] [process.rs:169] ["get snapshot failed"] [err="Request(Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } })"] [cid=128]
[2019/05/01 12:36:18.722 -07:00] [ERROR] [process.rs:169] ["get snapshot failed"] [err="Request(Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } })"] [cid=129]
[2019/05/01 12:36:18.722 -07:00] [ERROR] [process.rs:169] ["get snapshot failed"] [err="Request(Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } })"] [cid=130]
[2019/05/01 12:36:18.722 -07:00] [ERROR] [process.rs:169] ["get snapshot failed"] [err="Request(Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } })"] [cid=132]
[2019/05/01 12:36:18.722 -07:00] [ERROR] [process.rs:169] ["get snapshot failed"] [err="Request(Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } })"] [cid=131]
[2019/05/01 12:36:18.722 -07:00] [ERROR] [process.rs:169] ["get snapshot failed"] [err="Request(Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } })"] [cid=133]
[2019/05/01 12:36:18.722 -07:00] [ERROR] [process.rs:169] ["get snapshot failed"] [err="Request(Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } })"] [cid=134]
[2019/05/01 12:36:18.722 -07:00] [ERROR] [process.rs:169] ["get snapshot failed"] [err="Request(Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } })"] [cid=135]
[2019/05/01 12:36:18.722 -07:00] [ERROR] [process.rs:169] ["get snapshot failed"] [err="Request(Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } })"] [cid=136]
[2019/05/01 12:36:18.722 -07:00] [ERROR] [process.rs:169] ["get snapshot failed"] [err="Request(Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } })"] [cid=137]
[2019/05/01 12:36:18.722 -07:00] [ERROR] [process.rs:169] ["get snapshot failed"] [err="Request(Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } })"] [cid=138]
[2019/05/01 12:36:18.722 -07:00] [ERROR] [process.rs:169] ["get snapshot failed"] [err="Request(Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } })"] [cid=140]
[2019/05/01 12:36:18.722 -07:00] [ERROR] [process.rs:169] ["get snapshot failed"] [err="Request(Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } })"] [cid=139]
[2019/05/01 12:36:18.722 -07:00] [ERROR] [process.rs:169] ["get snapshot failed"] [err="Request(Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } })"] [cid=141]
[2019/05/01 12:36:18.722 -07:00] [ERROR] [process.rs:169] ["get snapshot failed"] [err="Request(Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } })"] [cid=142]
[2019/05/01 12:36:18.722 -07:00] [ERROR] [process.rs:169] ["get snapshot failed"] [err="Request(Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } })"] [cid=143]
[2019/05/01 12:36:18.722 -07:00] [ERROR] [process.rs:169] ["get snapshot failed"] [err="Request(Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } })"] [cid=144]
[2019/05/01 12:36:18.722 -07:00] [ERROR] [process.rs:169] ["get snapshot failed"] [err="Request(Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } })"] [cid=145]
[2019/05/01 12:36:18.722 -07:00] [ERROR] [process.rs:169] ["get snapshot failed"] [err="Request(Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } })"] [cid=146]
[2019/05/01 12:36:18.722 -07:00] [ERROR] [process.rs:169] ["get snapshot failed"] [err="Request(Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } })"] [cid=147]
[2019/05/01 12:36:18.722 -07:00] [ERROR] [process.rs:169] ["get snapshot failed"] [err="Request(Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } })"] [cid=148]
[2019/05/01 12:36:18.722 -07:00] [ERROR] [process.rs:169] ["get snapshot failed"] [err="Request(Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } })"] [cid=149]
[2019/05/01 12:36:18.722 -07:00] [ERROR] [process.rs:169] ["get snapshot failed"] [err="Request(Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } })"] [cid=150]
[2019/05/01 12:36:18.722 -07:00] [ERROR] [process.rs:169] ["get snapshot failed"] [err="Request(Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } })"] [cid=151]
[2019/05/01 12:36:18.722 -07:00] [ERROR] [process.rs:169] ["get snapshot failed"] [err="Request(Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } })"] [cid=152]
[2019/05/01 12:36:18.722 -07:00] [ERROR] [process.rs:169] ["get snapshot failed"] [err="Request(Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } })"] [cid=153]
[2019/05/01 12:36:18.722 -07:00] [ERROR] [process.rs:169] ["get snapshot failed"] [err="Request(Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } })"] [cid=154]
[2019/05/01 12:36:18.722 -07:00] [ERROR] [process.rs:169] ["get snapshot failed"] [err="Request(Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } })"] [cid=155]
[2019/05/01 12:36:18.722 -07:00] [ERROR] [process.rs:169] ["get snapshot failed"] [err="Request(Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } })"] [cid=156]
[2019/05/01 12:36:18.722 -07:00] [ERROR] [process.rs:169] ["get snapshot failed"] [err="Request(Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } })"] [cid=157]
[2019/05/01 12:36:18.722 -07:00] [ERROR] [process.rs:169] ["get snapshot failed"] [err="Request(Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } })"] [cid=158]
[2019/05/01 12:36:18.722 -07:00] [ERROR] [process.rs:169] ["get snapshot failed"] [err="Request(Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } })"] [cid=159]
[2019/05/01 12:36:18.722 -07:00] [ERROR] [process.rs:169] ["get snapshot failed"] [err="Request(Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } })"] [cid=160]
[2019/05/01 12:36:18.722 -07:00] [ERROR] [process.rs:169] ["get snapshot failed"] [err="Request(Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } })"] [cid=161]
[2019/05/01 12:36:18.722 -07:00] [ERROR] [process.rs:169] ["get snapshot failed"] [err="Request(Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } })"] [cid=162]
[2019/05/01 12:36:18.722 -07:00] [ERROR] [process.rs:169] ["get snapshot failed"] [err="Request(Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } })"] [cid=163]
[2019/05/01 12:36:18.722 -07:00] [ERROR] [process.rs:169] ["get snapshot failed"] [err="Request(Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } })"] [cid=164]
[2019/05/01 12:36:18.722 -07:00] [ERROR] [process.rs:169] ["get snapshot failed"] [err="Request(Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } })"] [cid=165]
[2019/05/01 12:36:18.722 -07:00] [ERROR] [process.rs:169] ["get snapshot failed"] [err="Request(Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } })"] [cid=166]
[2019/05/01 12:36:18.722 -07:00] [ERROR] [process.rs:169] ["get snapshot failed"] [err="Request(Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } })"] [cid=167]
[2019/05/01 12:36:18.722 -07:00] [ERROR] [process.rs:169] ["get snapshot failed"] [err="Request(Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } })"] [cid=168]
[2019/05/01 12:36:18.722 -07:00] [ERROR] [process.rs:169] ["get snapshot failed"] [err="Request(Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } })"] [cid=169]
[2019/05/01 12:36:18.722 -07:00] [ERROR] [process.rs:169] ["get snapshot failed"] [err="Request(Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } })"] [cid=170]
[2019/05/01 12:36:18.722 -07:00] [ERROR] [process.rs:169] ["get snapshot failed"] [err="Request(Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } })"] [cid=171]
[2019/05/01 12:36:18.722 -07:00] [ERROR] [process.rs:169] ["get snapshot failed"] [err="Request(Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } })"] [cid=172]
[2019/05/01 12:36:18.722 -07:00] [ERROR] [process.rs:169] ["get snapshot failed"] [err="Request(Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } })"] [cid=173]
[2019/05/01 12:36:18.722 -07:00] [ERROR] [process.rs:169] ["get snapshot failed"] [err="Request(Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } })"] [cid=174]
[2019/05/01 12:36:18.722 -07:00] [ERROR] [process.rs:169] ["get snapshot failed"] [err="Request(Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } })"] [cid=175]
[2019/05/01 12:36:18.722 -07:00] [ERROR] [process.rs:169] ["get snapshot failed"] [err="Request(Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } })"] [cid=176]
[2019/05/01 12:36:18.722 -07:00] [ERROR] [process.rs:169] ["get snapshot failed"] [err="Request(Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } })"] [cid=177]
[2019/05/01 12:36:18.722 -07:00] [ERROR] [process.rs:169] ["get snapshot failed"] [err="Request(Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } })"] [cid=178]
[2019/05/01 12:36:18.722 -07:00] [ERROR] [process.rs:169] ["get snapshot failed"] [err="Request(Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } })"] [cid=179]
[2019/05/01 12:36:18.722 -07:00] [ERROR] [process.rs:169] ["get snapshot failed"] [err="Request(Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } })"] [cid=180]
[2019/05/01 12:36:18.722 -07:00] [ERROR] [process.rs:169] ["get snapshot failed"] [err="Request(Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } })"] [cid=181]
[2019/05/01 12:36:18.722 -07:00] [ERROR] [process.rs:169] ["get snapshot failed"] [err="Request(Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } })"] [cid=182]
[2019/05/01 12:36:18.722 -07:00] [ERROR] [process.rs:169] ["get snapshot failed"] [err="Request(Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } })"] [cid=183]
[2019/05/01 12:36:18.722 -07:00] [ERROR] [process.rs:169] ["get snapshot failed"] [err="Request(Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } })"] [cid=184]
[2019/05/01 12:36:18.722 -07:00] [ERROR] [process.rs:169] ["get snapshot failed"] [err="Request(Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } })"] [cid=185]
[2019/05/01 12:36:18.722 -07:00] [ERROR] [process.rs:169] ["get snapshot failed"] [err="Request(Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } })"] [cid=186]
[2019/05/01 12:36:18.722 -07:00] [ERROR] [process.rs:169] ["get snapshot failed"] [err="Request(Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } })"] [cid=187]
[2019/05/01 12:36:18.722 -07:00] [ERROR] [process.rs:169] ["get snapshot failed"] [err="Request(Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } })"] [cid=188]
[2019/05/01 12:36:18.722 -07:00] [ERROR] [process.rs:169] ["get snapshot failed"] [err="Request(Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } })"] [cid=189]
[2019/05/01 12:36:18.722 -07:00] [ERROR] [process.rs:169] ["get snapshot failed"] [err="Request(Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } })"] [cid=190]
[2019/05/01 12:36:18.722 -07:00] [ERROR] [process.rs:169] ["get snapshot failed"] [err="Request(Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } })"] [cid=191]
[2019/05/01 12:36:18.722 -07:00] [ERROR] [process.rs:169] ["get snapshot failed"] [err="Request(Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } })"] [cid=192]
[2019/05/01 12:36:18.722 -07:00] [ERROR] [process.rs:169] ["get snapshot failed"] [err="Request(Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } })"] [cid=193]
[2019/05/01 12:36:18.722 -07:00] [ERROR] [process.rs:169] ["get snapshot failed"] [err="Request(Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } })"] [cid=194]
[2019/05/01 12:36:18.722 -07:00] [ERROR] [process.rs:169] ["get snapshot failed"] [err="Request(Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } })"] [cid=195]
[2019/05/01 12:36:18.722 -07:00] [ERROR] [process.rs:169] ["get snapshot failed"] [err="Request(Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } })"] [cid=196]
[2019/05/01 12:36:18.722 -07:00] [ERROR] [process.rs:169] ["get snapshot failed"] [err="Request(Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } })"] [cid=197]
[2019/05/01 12:36:18.722 -07:00] [ERROR] [process.rs:169] ["get snapshot failed"] [err="Request(Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } })"] [cid=198]
[2019/05/01 12:36:18.722 -07:00] [ERROR] [process.rs:169] ["get snapshot failed"] [err="Request(Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } })"] [cid=199]
[2019/05/01 12:36:18.722 -07:00] [ERROR] [process.rs:169] ["get snapshot failed"] [err="Request(Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } })"] [cid=200]
[2019/05/01 12:36:18.722 -07:00] [ERROR] [process.rs:169] ["get snapshot failed"] [err="Request(Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } })"] [cid=201]
[2019/05/01 12:36:18.722 -07:00] [ERROR] [process.rs:169] ["get snapshot failed"] [err="Request(Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } })"] [cid=202]
[2019/05/01 12:36:18.722 -07:00] [ERROR] [process.rs:169] ["get snapshot failed"] [err="Request(Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } })"] [cid=203]
[2019/05/01 12:36:18.722 -07:00] [ERROR] [process.rs:169] ["get snapshot failed"] [err="Request(Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } })"] [cid=204]
[2019/05/01 12:36:18.722 -07:00] [ERROR] [process.rs:169] ["get snapshot failed"] [err="Request(Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } })"] [cid=205]
[2019/05/01 12:36:18.722 -07:00] [ERROR] [process.rs:169] ["get snapshot failed"] [err="Request(Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } })"] [cid=206]
[2019/05/01 12:36:18.722 -07:00] [ERROR] [process.rs:169] ["get snapshot failed"] [err="Request(Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } })"] [cid=207]
[2019/05/01 12:36:18.722 -07:00] [ERROR] [process.rs:169] ["get snapshot failed"] [err="Request(Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } })"] [cid=208]
[2019/05/01 12:36:18.722 -07:00] [ERROR] [process.rs:169] ["get snapshot failed"] [err="Request(Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } })"] [cid=209]
[2019/05/01 12:36:18.722 -07:00] [ERROR] [process.rs:169] ["get snapshot failed"] [err="Request(Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } })"] [cid=210]
[2019/05/01 12:36:18.723 -07:00] [ERROR] [process.rs:169] ["get snapshot failed"] [err="Request(Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } })"] [cid=211]
[2019/05/01 12:36:18.723 -07:00] [ERROR] [process.rs:169] ["get snapshot failed"] [err="Request(Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } })"] [cid=212]
[2019/05/01 12:36:18.723 -07:00] [ERROR] [process.rs:169] ["get snapshot failed"] [err="Request(Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } })"] [cid=213]
[2019/05/01 12:36:18.723 -07:00] [ERROR] [process.rs:169] ["get snapshot failed"] [err="Request(Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } })"] [cid=214]
[2019/05/01 12:36:18.723 -07:00] [ERROR] [process.rs:169] ["get snapshot failed"] [err="Request(Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } })"] [cid=215]
[2019/05/01 12:36:18.723 -07:00] [ERROR] [process.rs:169] ["get snapshot failed"] [err="Request(Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } })"] [cid=216]
[2019/05/01 12:36:18.723 -07:00] [ERROR] [process.rs:169] ["get snapshot failed"] [err="Request(Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } })"] [cid=217]
[2019/05/01 12:36:18.723 -07:00] [ERROR] [process.rs:169] ["get snapshot failed"] [err="Request(Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } })"] [cid=219]
[2019/05/01 12:36:18.723 -07:00] [ERROR] [process.rs:169] ["get snapshot failed"] [err="Request(Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } })"] [cid=220]
[2019/05/01 12:36:18.723 -07:00] [ERROR] [process.rs:169] ["get snapshot failed"] [err="Request(Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } })"] [cid=218]
[2019/05/01 12:36:18.723 -07:00] [ERROR] [process.rs:169] ["get snapshot failed"] [err="Request(Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } })"] [cid=221]
[2019/05/01 12:36:18.723 -07:00] [ERROR] [process.rs:169] ["get snapshot failed"] [err="Request(Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } })"] [cid=222]
[2019/05/01 12:36:18.723 -07:00] [ERROR] [process.rs:169] ["get snapshot failed"] [err="Request(Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } })"] [cid=223]
[2019/05/01 12:36:18.723 -07:00] [ERROR] [process.rs:169] ["get snapshot failed"] [err="Request(Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } })"] [cid=224]
[2019/05/01 12:36:18.723 -07:00] [ERROR] [process.rs:169] ["get snapshot failed"] [err="Request(Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } })"] [cid=225]
[2019/05/01 12:36:18.723 -07:00] [ERROR] [process.rs:169] ["get snapshot failed"] [err="Request(Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } })"] [cid=226]
[2019/05/01 12:36:18.723 -07:00] [ERROR] [process.rs:169] ["get snapshot failed"] [err="Request(Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } })"] [cid=227]
[2019/05/01 12:36:18.723 -07:00] [ERROR] [process.rs:169] ["get snapshot failed"] [err="Request(Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } })"] [cid=228]
[2019/05/01 12:36:18.723 -07:00] [ERROR] [process.rs:169] ["get snapshot failed"] [err="Request(Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } })"] [cid=229]
[2019/05/01 12:36:18.723 -07:00] [ERROR] [process.rs:169] ["get snapshot failed"] [err="Request(Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } })"] [cid=230]
[2019/05/01 12:36:18.723 -07:00] [ERROR] [process.rs:169] ["get snapshot failed"] [err="Request(Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } })"] [cid=232]
[2019/05/01 12:36:18.723 -07:00] [ERROR] [process.rs:169] ["get snapshot failed"] [err="Request(Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } })"] [cid=231]
[2019/05/01 12:36:18.723 -07:00] [ERROR] [process.rs:169] ["get snapshot failed"] [err="Request(Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } })"] [cid=233]
[2019/05/01 12:36:18.724 -07:00] [ERROR] [process.rs:169] ["get snapshot failed"] [err="Request(Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } })"] [cid=234]
[2019/05/01 12:36:18.724 -07:00] [ERROR] [process.rs:169] ["get snapshot failed"] [err="Request(Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } })"] [cid=235]
[2019/05/01 12:36:18.724 -07:00] [ERROR] [process.rs:169] ["get snapshot failed"] [err="Request(Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } })"] [cid=236]
[2019/05/01 12:36:18.724 -07:00] [ERROR] [process.rs:169] ["get snapshot failed"] [err="Request(Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } })"] [cid=237]
[2019/05/01 12:36:18.774 -07:00] [INFO] [unknown:920] ["[region 36] 379 [term: 6] received a MsgRequestVote message with higher term from 333 [term: 7]"]
[2019/05/01 12:36:18.774 -07:00] [INFO] [unknown:719] ["[region 36] 379 became follower at term 7"]
[2019/05/01 12:36:18.774 -07:00] [INFO] [unknown:1083] ["[region 36] 379 [logterm: 6, index: 10, vote: 0] cast MsgRequestVote for 333 [logterm: 6, index: 10] at term 7"]
[2019/05/01 12:36:18.829 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 0, 198], lock_version: 408089887672631308, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 0, 198], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:18.887 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 0, 198], lock_version: 408089887672631308, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 0, 198], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:18.907 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 0, 198], lock_version: 408089887672631308, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 0, 198], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:18.990 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=488] [region_id=153]
[2019/05/01 12:36:18.990 -07:00] [INFO] [unknown:719] ["[region 153] 488 became follower at term 0"]
[2019/05/01 12:36:18.990 -07:00] [INFO] [unknown:295] ["[region 153] 488 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:36:18.990 -07:00] [INFO] [unknown:719] ["[region 153] 488 became follower at term 1"]
[2019/05/01 12:36:18.990 -07:00] [INFO] [unknown:920] ["[region 153] 488 [term: 1] received a MsgHeartbeat message with higher term from 155 [term: 7]"]
[2019/05/01 12:36:18.990 -07:00] [INFO] [unknown:719] ["[region 153] 488 became follower at term 7"]
[2019/05/01 12:36:18.992 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_120_7_11_(default|lock|write).sst] [snap_key=120_7_11]
[2019/05/01 12:36:19.004 -07:00] [INFO] [unknown:1792] ["[region 120] 485 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 11, term: 7]"]
[2019/05/01 12:36:19.004 -07:00] [INFO] [unknown:1816] ["[region 120] 485 restored progress of 121 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:36:19.004 -07:00] [INFO] [unknown:1816] ["[region 120] 485 restored progress of 122 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:36:19.004 -07:00] [INFO] [unknown:1816] ["[region 120] 485 restored progress of 259 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:36:19.004 -07:00] [INFO] [unknown:1816] ["[region 120] 485 restored progress of 485 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:36:19.004 -07:00] [INFO] [unknown:474] ["[region 120] 485 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 11, term: 7]"]
[2019/05/01 12:36:19.004 -07:00] [INFO] [unknown:1736] ["[region 120] 485 [commit: 11] restored snapshot [index: 11, term: 7]"]
[2019/05/01 12:36:19.004 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=485] [region_id=120]
[2019/05/01 12:36:19.004 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 11, truncated_state: Some(RaftTruncatedState { index: 11, term: 7, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 120, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 100, 255, 95, 97, 100, 100, 255, 114, 101, 115, 255, 115, 0, 0, 0, 0, 251, 0, 0, 253], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 95, 99, 255, 97, 99, 104, 255, 101, 95, 115, 105, 122, 255, 101, 0, 255, 0, 0, 0, 0, 0, 0, 248, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 17, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 121, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 122, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 259, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 485, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=485] [region_id=120]
[2019/05/01 12:36:19.029 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 120] 485"]
[2019/05/01 12:36:19.029 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 120, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 100, 255, 95, 97, 100, 100, 255, 114, 101, 115, 255, 115, 0, 0, 0, 0, 251, 0, 0, 253], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 95, 99, 255, 97, 99, 104, 255, 101, 95, 115, 105, 122, 255, 101, 0, 255, 0, 0, 0, 0, 0, 0, 248, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 17, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 121, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 122, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 259, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 485, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=485] [region_id=120]
[2019/05/01 12:36:19.029 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=120]
[2019/05/01 12:36:19.046 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=16.542932ms] [region_id=120]
[2019/05/01 12:36:19.139 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 0, 198], lock_version: 408089887790596104, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 0, 198], lock_ttl: 3003, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:19.447 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 0, 198], lock_version: 408089887869239298, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 0, 198], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:19.492 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 0, 200], lock_version: 408089887869239310, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 0, 201], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:19.582 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 0, 198], lock_version: 408089887895453703, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 0, 199], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:19.612 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 0, 197], lock_version: 408089887895453705, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 0, 200], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:19.686 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 0, 197], lock_version: 408089887921668103, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 0, 201], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:19.694 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 0, 197], lock_version: 408089887921668103, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 0, 201], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:19.806 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 0, 203], lock_version: 408089887947882497, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 0, 203], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:19.881 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 0, 203], lock_version: 408089887947882497, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 0, 203], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:20.075 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 485, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=12] [term=7] [peer_id=485] [region_id=120]
[2019/05/01 12:36:20.075 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 6, version: 17, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=485] [region_id=120]
[2019/05/01 12:36:20.075 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 120, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 100, 255, 95, 97, 100, 100, 255, 114, 101, 115, 255, 115, 0, 0, 0, 0, 251, 0, 0, 253], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 95, 99, 255, 97, 99, 104, 255, 101, 95, 115, 105, 122, 255, 101, 0, 255, 0, 0, 0, 0, 0, 0, 248, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 17, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 121, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 122, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 259, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 485, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 485, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=485] [region_id=120]
[2019/05/01 12:36:20.112 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=4_6_2516] [peer_id=393] [region_id=4]
[2019/05/01 12:36:20.113 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=16_6_432] [peer_id=48] [region_id=16]
[2019/05/01 12:36:20.113 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=18_6_13] [peer_id=49] [region_id=18]
[2019/05/01 12:36:20.113 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=24_6_7] [peer_id=52] [region_id=24]
[2019/05/01 12:36:20.113 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=30_7_10] [peer_id=330] [region_id=30]
[2019/05/01 12:36:20.113 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=32_6_9] [peer_id=331] [region_id=32]
[2019/05/01 12:36:20.113 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=34_7_13] [peer_id=395] [region_id=34]
[2019/05/01 12:36:20.113 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=36_6_9] [peer_id=379] [region_id=36]
[2019/05/01 12:36:20.114 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=38_6_7] [peer_id=334] [region_id=38]
[2019/05/01 12:36:20.114 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=40_6_9] [peer_id=382] [region_id=40]
[2019/05/01 12:36:20.114 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=42_6_7] [peer_id=336] [region_id=42]
[2019/05/01 12:36:20.114 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=44_7_10] [peer_id=438] [region_id=44]
[2019/05/01 12:36:20.114 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=46_6_7] [peer_id=380] [region_id=46]
[2019/05/01 12:36:20.114 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=56_6_9] [peer_id=387] [region_id=56]
[2019/05/01 12:36:20.114 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=58_6_6] [peer_id=60] [region_id=58]
[2019/05/01 12:36:20.114 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=64_6_14] [peer_id=66] [region_id=64]
[2019/05/01 12:36:20.114 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=67_6_8] [peer_id=69] [region_id=67]
[2019/05/01 12:36:20.114 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=88_6_6] [peer_id=90] [region_id=88]
[2019/05/01 12:36:20.114 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=91_6_6] [peer_id=93] [region_id=91]
[2019/05/01 12:36:20.115 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=94_6_8] [peer_id=384] [region_id=94]
[2019/05/01 12:36:20.115 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=102_7_9] [peer_id=171] [region_id=102]
[2019/05/01 12:36:20.115 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=108_6_8] [peer_id=213] [region_id=108]
[2019/05/01 12:36:20.115 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=117_7_9] [peer_id=258] [region_id=117]
[2019/05/01 12:36:20.115 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=123_7_9] [peer_id=260] [region_id=123]
[2019/05/01 12:36:20.115 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=132_7_9] [peer_id=314] [region_id=132]
[2019/05/01 12:36:20.115 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=135_7_9] [peer_id=315] [region_id=135]
[2019/05/01 12:36:20.115 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=138_7_9] [peer_id=316] [region_id=138]
[2019/05/01 12:36:20.115 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=147_7_9] [peer_id=327] [region_id=147]
[2019/05/01 12:36:20.115 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=214_6_9] [peer_id=388] [region_id=214]
[2019/05/01 12:36:20.116 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=321_6_7] [peer_id=442] [region_id=321]
[2019/05/01 12:36:20.116 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=390_6_7] [peer_id=394] [region_id=390]
[2019/05/01 12:36:20.125 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=417_7_8] [peer_id=484] [region_id=417]
[2019/05/01 12:36:20.130 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=120_7_11] [peer_id=485] [region_id=120]
[2019/05/01 12:36:20.163 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 121, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=13] [term=7] [peer_id=485] [region_id=120]
[2019/05/01 12:36:20.163 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 7, version: 17, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=485] [region_id=120]
[2019/05/01 12:36:20.163 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 120, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 100, 255, 95, 97, 100, 100, 255, 114, 101, 115, 255, 115, 0, 0, 0, 0, 251, 0, 0, 253], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 95, 99, 255, 97, 99, 104, 255, 101, 95, 115, 105, 122, 255, 101, 0, 255, 0, 0, 0, 0, 0, 0, 248, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 7, version: 17, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 121, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 122, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 259, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 485, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 121, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=485] [region_id=120]
[2019/05/01 12:36:20.248 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 0, 202], lock_version: 408089888078954506, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 0, 202], lock_ttl: 3002, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:20.577 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 0, 205], lock_version: 408089888144490520, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 0, 205], lock_ttl: 3002, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:21.035 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddLearnerNode, peer: Some(Peer { id: 491, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=11] [term=7] [peer_id=260] [region_id=123]
[2019/05/01 12:36:21.035 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 5, version: 17, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddLearner] [peer_id=260] [region_id=123]
[2019/05/01 12:36:21.035 -07:00] [INFO] [apply.rs:1476] ["add learner successfully"] [region="Region { id: 123, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 95, 99, 255, 97, 99, 104, 255, 101, 95, 115, 105, 122, 255, 101, 0, 255, 0, 0, 0, 0, 0, 0, 248, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 95, 99, 255, 104, 101, 99, 255, 107, 115, 117, 109, 0, 254, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 5, version: 17, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 124, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 125, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 260, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 491, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=260] [region_id=123]
[2019/05/01 12:36:21.065 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_153_7_11_(default|lock|write).sst] [snap_key=153_7_11]
[2019/05/01 12:36:21.066 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 0, 209], lock_version: 408089888223133704, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 0, 209], lock_ttl: 3099, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:21.088 -07:00] [INFO] [unknown:1792] ["[region 153] 488 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 11, term: 7]"]
[2019/05/01 12:36:21.088 -07:00] [INFO] [unknown:1816] ["[region 153] 488 restored progress of 154 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:36:21.088 -07:00] [INFO] [unknown:1816] ["[region 153] 488 restored progress of 155 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:36:21.088 -07:00] [INFO] [unknown:1816] ["[region 153] 488 restored progress of 329 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:36:21.088 -07:00] [INFO] [unknown:1816] ["[region 153] 488 restored progress of 488 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:36:21.088 -07:00] [INFO] [unknown:474] ["[region 153] 488 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 11, term: 7]"]
[2019/05/01 12:36:21.088 -07:00] [INFO] [unknown:1736] ["[region 153] 488 [commit: 11] restored snapshot [index: 11, term: 7]"]
[2019/05/01 12:36:21.088 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=488] [region_id=153]
[2019/05/01 12:36:21.088 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 11, truncated_state: Some(RaftTruncatedState { index: 11, term: 7, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 153, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 114, 128, 0, 0, 0, 0, 255, 1, 212, 193, 0, 0, 0, 0, 0, 250], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 114, 128, 0, 0, 0, 0, 255, 1, 212, 195, 0, 0, 0, 0, 0, 250], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 18, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 154, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 155, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 329, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 488, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=488] [region_id=153]
[2019/05/01 12:36:21.119 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 0, 206], lock_version: 408089888236240897, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 0, 206], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:21.140 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 153] 488"]
[2019/05/01 12:36:21.140 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 153, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 114, 128, 0, 0, 0, 0, 255, 1, 212, 193, 0, 0, 0, 0, 0, 250], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 114, 128, 0, 0, 0, 0, 255, 1, 212, 195, 0, 0, 0, 0, 0, 250], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 18, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 154, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 155, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 329, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 488, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=488] [region_id=153]
[2019/05/01 12:36:21.140 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=153]
[2019/05/01 12:36:21.156 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 0, 206], lock_version: 408089888236240897, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 0, 206], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:21.216 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=75.308661ms] [region_id=153]
[2019/05/01 12:36:21.355 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 0, 205], lock_version: 408089888341098505, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 0, 205], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:21.414 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 0, 205], lock_version: 408089888341098505, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 0, 205], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:21.991 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=490] [region_id=22]
[2019/05/01 12:36:21.991 -07:00] [INFO] [unknown:719] ["[region 22] 490 became follower at term 0"]
[2019/05/01 12:36:21.991 -07:00] [INFO] [unknown:295] ["[region 22] 490 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:36:21.991 -07:00] [INFO] [unknown:719] ["[region 22] 490 became follower at term 1"]
[2019/05/01 12:36:21.992 -07:00] [INFO] [unknown:920] ["[region 22] 490 [term: 1] received a MsgHeartbeat message with higher term from 51 [term: 7]"]
[2019/05/01 12:36:21.992 -07:00] [INFO] [unknown:719] ["[region 22] 490 became follower at term 7"]
[2019/05/01 12:36:22.083 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 488, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=12] [term=7] [peer_id=488] [region_id=153]
[2019/05/01 12:36:22.097 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 6, version: 18, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=488] [region_id=153]
[2019/05/01 12:36:22.097 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 153, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 114, 128, 0, 0, 0, 0, 255, 1, 212, 193, 0, 0, 0, 0, 0, 250], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 114, 128, 0, 0, 0, 0, 255, 1, 212, 195, 0, 0, 0, 0, 0, 250], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 18, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 154, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 155, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 329, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 488, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 488, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=488] [region_id=153]
[2019/05/01 12:36:22.194 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 154, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=13] [term=7] [peer_id=488] [region_id=153]
[2019/05/01 12:36:22.198 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 7, version: 18, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=488] [region_id=153]
[2019/05/01 12:36:22.199 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 153, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 114, 128, 0, 0, 0, 0, 255, 1, 212, 193, 0, 0, 0, 0, 0, 250], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 114, 128, 0, 0, 0, 0, 255, 1, 212, 195, 0, 0, 0, 0, 0, 250], region_epoch: Some(RegionEpoch { conf_ver: 7, version: 18, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 154, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 155, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 329, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 488, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 154, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=488] [region_id=153]
[2019/05/01 12:36:22.286 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddLearnerNode, peer: Some(Peer { id: 492, store_id: 3, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=9] [term=6] [peer_id=394] [region_id=390]
[2019/05/01 12:36:22.286 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 5, version: 12, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddLearner] [peer_id=394] [region_id=390]
[2019/05/01 12:36:22.286 -07:00] [INFO] [apply.rs:1476] ["add learner successfully"] [region="Region { id: 390, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 55, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 55, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 3, 128, 0, 0, 0, 255, 0, 0, 0, 108, 3, 128, 0, 0, 255, 0, 0, 0, 0, 0, 3, 128, 0, 255, 0, 0, 0, 0, 0, 3, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 5, version: 12, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 391, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 392, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 394, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 492, store_id: 3, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=394] [region_id=390]
[2019/05/01 12:36:22.486 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 0, 208], lock_version: 408089888642564107, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 0, 208], lock_ttl: 3002, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:22.552 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 0, 208], lock_version: 408089888642564107, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 0, 208], lock_ttl: 3002, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:22.680 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 0, 206], lock_version: 408089888642564100, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 0, 211], lock_ttl: 3002, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:22.767 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 0, 206], lock_version: 408089888642564100, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 0, 211], lock_ttl: 3002, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:23.200 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 0, 210], lock_version: 408089888799850500, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 0, 210], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:23.395 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 0, 208], lock_version: 408089888878493700, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 0, 208], lock_ttl: 3082, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:23.446 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 0, 208], lock_version: 408089888878493700, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 0, 208], lock_ttl: 3082, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:23.462 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 0, 212], lock_version: 408089888917815299, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 0, 212], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:23.536 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 0, 212], lock_version: 408089888917815299, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 0, 212], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:23.856 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 0, 211], lock_version: 408089888996458504, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 0, 211], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:23.910 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 0, 211], lock_version: 408089888996458504, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 0, 211], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:23.995 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_22_7_12_(default|lock|write).sst] [snap_key=22_7_12]
[2019/05/01 12:36:24.033 -07:00] [INFO] [unknown:1792] ["[region 22] 490 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 12, term: 7]"]
[2019/05/01 12:36:24.033 -07:00] [INFO] [unknown:1816] ["[region 22] 490 restored progress of 23 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:36:24.033 -07:00] [INFO] [unknown:1816] ["[region 22] 490 restored progress of 51 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:36:24.033 -07:00] [INFO] [unknown:1816] ["[region 22] 490 restored progress of 167 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:36:24.033 -07:00] [INFO] [unknown:1816] ["[region 22] 490 restored progress of 490 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:36:24.033 -07:00] [INFO] [unknown:474] ["[region 22] 490 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 12, term: 7]"]
[2019/05/01 12:36:24.033 -07:00] [INFO] [unknown:1736] ["[region 22] 490 [commit: 12] restored snapshot [index: 12, term: 7]"]
[2019/05/01 12:36:24.033 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=490] [region_id=22]
[2019/05/01 12:36:24.033 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 12, truncated_state: Some(RaftTruncatedState { index: 12, term: 7, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 22, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 16, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 24, 0, 0, 0, 0, 0, 0, 0, 248], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 5, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 23, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 51, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 167, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 490, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=490] [region_id=22]
[2019/05/01 12:36:24.116 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 22, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 16, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 24, 0, 0, 0, 0, 0, 0, 0, 248], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 5, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 23, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 51, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 167, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 490, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=490] [region_id=22]
[2019/05/01 12:36:24.116 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 22] 490"]
[2019/05/01 12:36:24.116 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=22]
[2019/05/01 12:36:24.118 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=2.213143ms] [region_id=22]
[2019/05/01 12:36:24.123 -07:00] [INFO] [keys.rs:155] ["approximate keys over threshold, need to do split check"] [threshold=5] [keys=3625] [region_id=4]
[2019/05/01 12:36:24.139 -07:00] [INFO] [peer.rs:294] ["on split"] [split_keys="10 keys range from \"t\\200\\000\\000\\000\\000\\000\\000\\377l_r\\200\\000\\000\\000\\000\\377\\000\\000\\000\\000\\000\\000\\000\\000\\372\\372V,j\\300\\277\\377\\376\" to \"t\\200\\000\\000\\000\\000\\000\\000\\377l_r\\200\\000\\000\\000\\000\\377\\000\\000\\001\\000\\000\\000\\000\\000\\372\\372V,j\\271\\267\\377\\354\""] [peer_id=393] [region_id=4]
[2019/05/01 12:36:24.139 -07:00] [INFO] [pd.rs:285] ["try to batch split region"] [region="Region { id: 4, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 108, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [], region_epoch: Some(RegionEpoch { conf_ver: 5, version: 19, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 5, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 386, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 393, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [new_region_ids="[SplitID { new_region_id: 533, new_peer_ids: [534, 535, 536], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, SplitID { new_region_id: 537, new_peer_ids: [538, 539, 540], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, SplitID { new_region_id: 541, new_peer_ids: [542, 543, 544], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, SplitID { new_region_id: 545, new_peer_ids: [546, 547, 548], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, SplitID { new_region_id: 549, new_peer_ids: [550, 551, 552], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, SplitID { new_region_id: 553, new_peer_ids: [554, 555, 556], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, SplitID { new_region_id: 557, new_peer_ids: [558, 559, 560], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, SplitID { new_region_id: 561, new_peer_ids: [562, 563, 564], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, SplitID { new_region_id: 565, new_peer_ids: [566, 567, 568], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, SplitID { new_region_id: 569, new_peer_ids: [570, 571, 572], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }]"] [region_id=4]
[2019/05/01 12:36:24.154 -07:00] [WARN] [split_observer.rs:85] ["key is not larger than previous, skip."] [index=1] [previous=7480000000000000FF6C5F728000000000FF0000000000000000FA] [key=7480000000000000FF6C5F728000000000FF0000000000000000FA] [region_id=4]
[2019/05/01 12:36:24.154 -07:00] [WARN] [split_observer.rs:85] ["key is not larger than previous, skip."] [index=2] [previous=7480000000000000FF6C5F728000000000FF0000000000000000FA] [key=7480000000000000FF6C5F728000000000FF0000000000000000FA] [region_id=4]
[2019/05/01 12:36:24.154 -07:00] [WARN] [split_observer.rs:85] ["key is not larger than previous, skip."] [index=3] [previous=7480000000000000FF6C5F728000000000FF0000000000000000FA] [key=7480000000000000FF6C5F728000000000FF0000000000000000FA] [region_id=4]
[2019/05/01 12:36:24.154 -07:00] [WARN] [split_observer.rs:85] ["key is not larger than previous, skip."] [index=4] [previous=7480000000000000FF6C5F728000000000FF0000000000000000FA] [key=7480000000000000FF6C5F728000000000FF0000000000000000FA] [region_id=4]
[2019/05/01 12:36:24.154 -07:00] [WARN] [split_observer.rs:85] ["key is not larger than previous, skip."] [index=5] [previous=7480000000000000FF6C5F728000000000FF0000000000000000FA] [key=7480000000000000FF6C5F728000000000FF0000000000000000FA] [region_id=4]
[2019/05/01 12:36:24.154 -07:00] [WARN] [split_observer.rs:85] ["key is not larger than previous, skip."] [index=7] [previous=7480000000000000FF6C5F728000000000FF0000010000000000FA] [key=7480000000000000FF6C5F728000000000FF0000010000000000FA] [region_id=4]
[2019/05/01 12:36:24.154 -07:00] [WARN] [split_observer.rs:85] ["key is not larger than previous, skip."] [index=8] [previous=7480000000000000FF6C5F728000000000FF0000010000000000FA] [key=7480000000000000FF6C5F728000000000FF0000010000000000FA] [region_id=4]
[2019/05/01 12:36:24.154 -07:00] [WARN] [split_observer.rs:85] ["key is not larger than previous, skip."] [index=9] [previous=7480000000000000FF6C5F728000000000FF0000010000000000FA] [key=7480000000000000FF6C5F728000000000FF0000010000000000FA] [region_id=4]
[2019/05/01 12:36:24.187 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: BatchSplit, change_peer: None, split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: Some(BatchSplitRequest { requests: [SplitRequest { split_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 108, 95, 114, 128, 0, 0, 0, 0, 255, 0, 0, 0, 0, 0, 0, 0, 0, 250], new_region_id: 533, new_peer_ids: [534, 535, 536], right_derive: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, SplitRequest { split_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 108, 95, 114, 128, 0, 0, 0, 0, 255, 0, 0, 1, 0, 0, 0, 0, 0, 250], new_region_id: 557, new_peer_ids: [558, 559, 560], right_derive: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], right_derive: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=3639] [term=7] [peer_id=393] [region_id=4]
[2019/05/01 12:36:24.187 -07:00] [INFO] [apply.rs:1582] ["split region"] [keys="[[116, 128, 0, 0, 0, 0, 0, 0, 255, 108, 95, 114, 128, 0, 0, 0, 0, 255, 0, 0, 0, 0, 0, 0, 0, 0, 250], [116, 128, 0, 0, 0, 0, 0, 0, 255, 108, 95, 114, 128, 0, 0, 0, 0, 255, 0, 0, 1, 0, 0, 0, 0, 0, 250]]"] [region="Region { id: 4, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 108, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [], region_epoch: Some(RegionEpoch { conf_ver: 5, version: 19, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 5, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 386, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 393, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=393] [region_id=4]
[2019/05/01 12:36:24.203 -07:00] [INFO] [peer.rs:1382] ["notify pd with split"] [split_count=3] [peer_id=393] [region_id=4]
[2019/05/01 12:36:24.203 -07:00] [INFO] [peer.rs:1424] ["insert new region"] [region="Region { id: 533, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 108, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 108, 95, 114, 128, 0, 0, 0, 0, 255, 0, 0, 0, 0, 0, 0, 0, 0, 250], region_epoch: Some(RegionEpoch { conf_ver: 5, version: 21, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 534, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 535, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 536, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region_id=533]
[2019/05/01 12:36:24.203 -07:00] [INFO] [peer.rs:127] ["create peer"] [peer_id=536] [region_id=533]
[2019/05/01 12:36:24.203 -07:00] [INFO] [unknown:719] ["[region 533] 536 became follower at term 5"]
[2019/05/01 12:36:24.203 -07:00] [INFO] [unknown:295] ["[region 533] 536 newRaft [peers: [534, 535, 536], term: 5, commit: 5, applied: 5, last_index: 5, last_term: 5]"]
[2019/05/01 12:36:24.203 -07:00] [INFO] [unknown:1022] ["[region 533] 536 is starting a new election at term 5"]
[2019/05/01 12:36:24.203 -07:00] [INFO] [unknown:761] ["[region 533] 536 became pre-candidate at term 5"]
[2019/05/01 12:36:24.203 -07:00] [INFO] [unknown:854] ["[region 533] 536 received MsgRequestPreVoteResponse from 536 at term 5"]
[2019/05/01 12:36:24.203 -07:00] [INFO] [unknown:828] ["[region 533] 536 [logterm: 5, index: 5] sent MsgRequestPreVote request to 535 at term 5"]
[2019/05/01 12:36:24.204 -07:00] [INFO] [unknown:828] ["[region 533] 536 [logterm: 5, index: 5] sent MsgRequestPreVote request to 534 at term 5"]
[2019/05/01 12:36:24.204 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 533] 536"]
[2019/05/01 12:36:24.204 -07:00] [INFO] [peer.rs:1424] ["insert new region"] [region="Region { id: 557, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 108, 95, 114, 128, 0, 0, 0, 0, 255, 0, 0, 0, 0, 0, 0, 0, 0, 250], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 108, 95, 114, 128, 0, 0, 0, 0, 255, 0, 0, 1, 0, 0, 0, 0, 0, 250], region_epoch: Some(RegionEpoch { conf_ver: 5, version: 21, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 558, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 559, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 560, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region_id=557]
[2019/05/01 12:36:24.204 -07:00] [INFO] [peer.rs:127] ["create peer"] [peer_id=560] [region_id=557]
[2019/05/01 12:36:24.204 -07:00] [INFO] [unknown:719] ["[region 557] 560 became follower at term 5"]
[2019/05/01 12:36:24.204 -07:00] [INFO] [unknown:295] ["[region 557] 560 newRaft [peers: [558, 559, 560], term: 5, commit: 5, applied: 5, last_index: 5, last_term: 5]"]
[2019/05/01 12:36:24.204 -07:00] [INFO] [unknown:1022] ["[region 557] 560 is starting a new election at term 5"]
[2019/05/01 12:36:24.204 -07:00] [INFO] [unknown:761] ["[region 557] 560 became pre-candidate at term 5"]
[2019/05/01 12:36:24.204 -07:00] [INFO] [unknown:854] ["[region 557] 560 received MsgRequestPreVoteResponse from 560 at term 5"]
[2019/05/01 12:36:24.204 -07:00] [INFO] [unknown:828] ["[region 557] 560 [logterm: 5, index: 5] sent MsgRequestPreVote request to 558 at term 5"]
[2019/05/01 12:36:24.204 -07:00] [INFO] [unknown:828] ["[region 557] 560 [logterm: 5, index: 5] sent MsgRequestPreVote request to 559 at term 5"]
[2019/05/01 12:36:24.204 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 557] 560"]
[2019/05/01 12:36:24.213 -07:00] [INFO] [unknown:854] ["[region 533] 536 received MsgRequestPreVoteResponse from 535 at term 5"]
[2019/05/01 12:36:24.213 -07:00] [INFO] [unknown:1550] ["[region 533] 536 [quorum:2] has received 2 MsgRequestPreVoteResponse votes and 0 vote rejections"]
[2019/05/01 12:36:24.213 -07:00] [INFO] [unknown:739] ["[region 533] 536 became candidate at term 6"]
[2019/05/01 12:36:24.213 -07:00] [INFO] [unknown:854] ["[region 533] 536 received MsgRequestVoteResponse from 536 at term 6"]
[2019/05/01 12:36:24.213 -07:00] [INFO] [unknown:828] ["[region 533] 536 [logterm: 5, index: 5] sent MsgRequestVote request to 535 at term 6"]
[2019/05/01 12:36:24.213 -07:00] [INFO] [unknown:828] ["[region 533] 536 [logterm: 5, index: 5] sent MsgRequestVote request to 534 at term 6"]
[2019/05/01 12:36:24.240 -07:00] [INFO] [unknown:854] ["[region 557] 560 received MsgRequestPreVoteResponse from 559 at term 5"]
[2019/05/01 12:36:24.240 -07:00] [INFO] [unknown:1550] ["[region 557] 560 [quorum:2] has received 2 MsgRequestPreVoteResponse votes and 0 vote rejections"]
[2019/05/01 12:36:24.240 -07:00] [INFO] [unknown:739] ["[region 557] 560 became candidate at term 6"]
[2019/05/01 12:36:24.240 -07:00] [INFO] [unknown:854] ["[region 557] 560 received MsgRequestVoteResponse from 560 at term 6"]
[2019/05/01 12:36:24.240 -07:00] [INFO] [unknown:828] ["[region 557] 560 [logterm: 5, index: 5] sent MsgRequestVote request to 558 at term 6"]
[2019/05/01 12:36:24.240 -07:00] [INFO] [unknown:828] ["[region 557] 560 [logterm: 5, index: 5] sent MsgRequestVote request to 559 at term 6"]
[2019/05/01 12:36:24.270 -07:00] [ERROR] [process.rs:169] ["get snapshot failed"] [err="Request(Error { message: \"region epoch is not match\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: Some(EpochNotMatch { current_regions: [Region { id: 4, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 108, 95, 114, 128, 0, 0, 0, 0, 255, 0, 0, 1, 0, 0, 0, 0, 0, 250], end_key: [], region_epoch: Some(RegionEpoch { conf_ver: 5, version: 21, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 5, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 386, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 393, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Region { id: 557, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 108, 95, 114, 128, 0, 0, 0, 0, 255, 0, 0, 0, 0, 0, 0, 0, 0, 250], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 108, 95, 114, 128, 0, 0, 0, 0, 255, 0, 0, 1, 0, 0, 0, 0, 0, 250], region_epoch: Some(RegionEpoch { conf_ver: 5, version: 21, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 558, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 559, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 560, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), server_is_busy: None, stale_command: None, store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } })"] [cid=663]
[2019/05/01 12:36:24.270 -07:00] [INFO] [unknown:854] ["[region 533] 536 received MsgRequestVoteResponse from 534 at term 6"]
[2019/05/01 12:36:24.270 -07:00] [INFO] [unknown:1550] ["[region 533] 536 [quorum:2] has received 2 MsgRequestVoteResponse votes and 0 vote rejections"]
[2019/05/01 12:36:24.270 -07:00] [INFO] [unknown:789] ["[region 533] 536 became leader at term 6"]
[2019/05/01 12:36:24.278 -07:00] [ERROR] [process.rs:169] ["get snapshot failed"] [err="Request(Error { message: \"region epoch is not match\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: Some(EpochNotMatch { current_regions: [Region { id: 4, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 108, 95, 114, 128, 0, 0, 0, 0, 255, 0, 0, 1, 0, 0, 0, 0, 0, 250], end_key: [], region_epoch: Some(RegionEpoch { conf_ver: 5, version: 21, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 5, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 386, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 393, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Region { id: 557, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 108, 95, 114, 128, 0, 0, 0, 0, 255, 0, 0, 0, 0, 0, 0, 0, 0, 250], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 108, 95, 114, 128, 0, 0, 0, 0, 255, 0, 0, 1, 0, 0, 0, 0, 0, 250], region_epoch: Some(RegionEpoch { conf_ver: 5, version: 21, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 558, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 559, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 560, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), server_is_busy: None, stale_command: None, store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } })"] [cid=664]
[2019/05/01 12:36:24.278 -07:00] [INFO] [unknown:854] ["[region 557] 560 received MsgRequestVoteResponse from 558 at term 6"]
[2019/05/01 12:36:24.278 -07:00] [INFO] [unknown:1550] ["[region 557] 560 [quorum:2] has received 2 MsgRequestVoteResponse votes and 0 vote rejections"]
[2019/05/01 12:36:24.278 -07:00] [INFO] [unknown:789] ["[region 557] 560 became leader at term 6"]
[2019/05/01 12:36:24.278 -07:00] [ERROR] [process.rs:169] ["get snapshot failed"] [err="Request(Error { message: \"region epoch is not match\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: Some(EpochNotMatch { current_regions: [Region { id: 4, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 108, 95, 114, 128, 0, 0, 0, 0, 255, 0, 0, 1, 0, 0, 0, 0, 0, 250], end_key: [], region_epoch: Some(RegionEpoch { conf_ver: 5, version: 21, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 5, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 386, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 393, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Region { id: 557, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 108, 95, 114, 128, 0, 0, 0, 0, 255, 0, 0, 0, 0, 0, 0, 0, 0, 250], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 108, 95, 114, 128, 0, 0, 0, 0, 255, 0, 0, 1, 0, 0, 0, 0, 0, 250], region_epoch: Some(RegionEpoch { conf_ver: 5, version: 21, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 558, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 559, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 560, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), server_is_busy: None, stale_command: None, store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } })"] [cid=657]
[2019/05/01 12:36:24.280 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 0, 210], lock_version: 408089889022672898, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 0, 212], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:24.302 -07:00] [ERROR] [process.rs:169] ["get snapshot failed"] [err="Request(Error { message: \"region epoch is not match\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: Some(EpochNotMatch { current_regions: [Region { id: 4, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 108, 95, 114, 128, 0, 0, 0, 0, 255, 0, 0, 1, 0, 0, 0, 0, 0, 250], end_key: [], region_epoch: Some(RegionEpoch { conf_ver: 5, version: 21, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 5, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 386, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 393, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Region { id: 557, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 108, 95, 114, 128, 0, 0, 0, 0, 255, 0, 0, 0, 0, 0, 0, 0, 0, 250], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 108, 95, 114, 128, 0, 0, 0, 0, 255, 0, 0, 1, 0, 0, 0, 0, 0, 250], region_epoch: Some(RegionEpoch { conf_ver: 5, version: 21, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 558, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 559, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 560, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), server_is_busy: None, stale_command: None, store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } })"] [cid=646]
[2019/05/01 12:36:24.334 -07:00] [ERROR] [process.rs:169] ["get snapshot failed"] [err="Request(Error { message: \"region epoch is not match\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: Some(EpochNotMatch { current_regions: [Region { id: 4, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 108, 95, 114, 128, 0, 0, 0, 0, 255, 0, 0, 1, 0, 0, 0, 0, 0, 250], end_key: [], region_epoch: Some(RegionEpoch { conf_ver: 5, version: 21, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 5, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 386, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 393, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Region { id: 557, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 108, 95, 114, 128, 0, 0, 0, 0, 255, 0, 0, 0, 0, 0, 0, 0, 0, 250], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 108, 95, 114, 128, 0, 0, 0, 0, 255, 0, 0, 1, 0, 0, 0, 0, 0, 250], region_epoch: Some(RegionEpoch { conf_ver: 5, version: 21, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 558, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 559, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 560, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), server_is_busy: None, stale_command: None, store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } })"] [cid=650]
[2019/05/01 12:36:24.334 -07:00] [ERROR] [process.rs:169] ["get snapshot failed"] [err="Request(Error { message: \"region epoch is not match\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: Some(EpochNotMatch { current_regions: [Region { id: 4, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 108, 95, 114, 128, 0, 0, 0, 0, 255, 0, 0, 1, 0, 0, 0, 0, 0, 250], end_key: [], region_epoch: Some(RegionEpoch { conf_ver: 5, version: 21, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 5, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 386, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 393, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Region { id: 557, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 108, 95, 114, 128, 0, 0, 0, 0, 255, 0, 0, 0, 0, 0, 0, 0, 0, 250], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 108, 95, 114, 128, 0, 0, 0, 0, 255, 0, 0, 1, 0, 0, 0, 0, 0, 250], region_epoch: Some(RegionEpoch { conf_ver: 5, version: 21, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 558, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 559, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 560, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), server_is_busy: None, stale_command: None, store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } })"] [cid=661]
[2019/05/01 12:36:24.343 -07:00] [ERROR] [process.rs:169] ["get snapshot failed"] [err="Request(Error { message: \"region epoch is not match\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: Some(EpochNotMatch { current_regions: [Region { id: 4, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 108, 95, 114, 128, 0, 0, 0, 0, 255, 0, 0, 1, 0, 0, 0, 0, 0, 250], end_key: [], region_epoch: Some(RegionEpoch { conf_ver: 5, version: 21, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 5, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 386, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 393, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Region { id: 557, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 108, 95, 114, 128, 0, 0, 0, 0, 255, 0, 0, 0, 0, 0, 0, 0, 0, 250], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 108, 95, 114, 128, 0, 0, 0, 0, 255, 0, 0, 1, 0, 0, 0, 0, 0, 250], region_epoch: Some(RegionEpoch { conf_ver: 5, version: 21, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 558, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 559, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 560, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), server_is_busy: None, stale_command: None, store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } })"] [cid=660]
[2019/05/01 12:36:24.372 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 0, 210], lock_version: 408089889022672898, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 0, 212], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:24.454 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 0, 213], lock_version: 408089889009565699, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 0, 213], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:24.666 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 0, 214], lock_version: 408089889232388104, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 0, 214], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:24.806 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 0, 215], lock_version: 408089889271709702, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 0, 215], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:25.068 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 490, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=13] [term=7] [peer_id=490] [region_id=22]
[2019/05/01 12:36:25.068 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 6, version: 5, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=490] [region_id=22]
[2019/05/01 12:36:25.068 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 22, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 16, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 24, 0, 0, 0, 0, 0, 0, 0, 248], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 5, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 23, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 51, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 167, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 490, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 490, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=490] [region_id=22]
[2019/05/01 12:36:25.077 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 491, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=12] [term=7] [peer_id=260] [region_id=123]
[2019/05/01 12:36:25.077 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 6, version: 17, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=260] [region_id=123]
[2019/05/01 12:36:25.077 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 123, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 95, 99, 255, 97, 99, 104, 255, 101, 95, 115, 105, 122, 255, 101, 0, 255, 0, 0, 0, 0, 0, 0, 248, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 95, 99, 255, 104, 101, 99, 255, 107, 115, 117, 109, 0, 254, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 17, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 124, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 125, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 260, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 491, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 491, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=260] [region_id=123]
[2019/05/01 12:36:25.135 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 23, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=14] [term=7] [peer_id=490] [region_id=22]
[2019/05/01 12:36:25.135 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 7, version: 5, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=490] [region_id=22]
[2019/05/01 12:36:25.135 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 22, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 16, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 24, 0, 0, 0, 0, 0, 0, 0, 248], region_epoch: Some(RegionEpoch { conf_ver: 7, version: 5, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 23, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 51, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 167, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 490, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 23, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=490] [region_id=22]
[2019/05/01 12:36:25.160 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 124, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=13] [term=7] [peer_id=260] [region_id=123]
[2019/05/01 12:36:25.160 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 7, version: 17, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=260] [region_id=123]
[2019/05/01 12:36:25.160 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 123, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 95, 99, 255, 97, 99, 104, 255, 101, 95, 115, 105, 122, 255, 101, 0, 255, 0, 0, 0, 0, 0, 0, 248, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 95, 99, 255, 104, 101, 99, 255, 107, 115, 117, 109, 0, 254, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 7, version: 17, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 124, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 125, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 260, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 491, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 124, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=260] [region_id=123]
[2019/05/01 12:36:25.252 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddLearnerNode, peer: Some(Peer { id: 574, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=11] [term=7] [peer_id=314] [region_id=132]
[2019/05/01 12:36:25.252 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 5, version: 18, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddLearner] [peer_id=314] [region_id=132]
[2019/05/01 12:36:25.252 -07:00] [INFO] [apply.rs:1476] ["add learner successfully"] [region="Region { id: 132, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 116, 105, 107, 118, 255, 95, 103, 99, 95, 255, 101, 110, 97, 255, 98, 108, 101, 0, 0, 253, 0, 0, 253], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 116, 105, 107, 118, 255, 95, 103, 99, 95, 255, 108, 101, 97, 255, 100, 101, 114, 95, 100, 255, 101, 115, 255, 99, 0, 0, 0, 0, 0, 250, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 5, version: 18, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 133, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 134, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 314, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 574, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=314] [region_id=132]
[2019/05/01 12:36:25.272 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddLearnerNode, peer: Some(Peer { id: 575, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=11] [term=7] [peer_id=327] [region_id=147]
[2019/05/01 12:36:25.272 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 5, version: 18, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddLearner] [peer_id=327] [region_id=147]
[2019/05/01 12:36:25.272 -07:00] [INFO] [apply.rs:1476] ["add learner successfully"] [region="Region { id: 147, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 114, 128, 0, 0, 0, 0, 255, 0, 0, 3, 0, 0, 0, 0, 0, 250], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 114, 128, 0, 0, 0, 0, 255, 0, 234, 97, 0, 0, 0, 0, 0, 250], region_epoch: Some(RegionEpoch { conf_ver: 5, version: 18, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 148, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 149, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 327, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 575, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=327] [region_id=147]
[2019/05/01 12:36:25.323 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 0, 212], lock_version: 408089889402781704, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 0, 212], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:25.745 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 0, 214], lock_version: 408089889494532098, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 0, 215], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:25.772 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 0, 218], lock_version: 408089889481424918, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 0, 220], lock_ttl: 3002, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:25.894 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 0, 218], lock_version: 408089889546960898, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 0, 218], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:26.035 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=573] [region_id=141]
[2019/05/01 12:36:26.036 -07:00] [INFO] [unknown:719] ["[region 141] 573 became follower at term 0"]
[2019/05/01 12:36:26.036 -07:00] [INFO] [unknown:295] ["[region 141] 573 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:36:26.036 -07:00] [INFO] [unknown:719] ["[region 141] 573 became follower at term 1"]
[2019/05/01 12:36:26.036 -07:00] [INFO] [unknown:920] ["[region 141] 573 [term: 1] received a MsgHeartbeat message with higher term from 143 [term: 7]"]
[2019/05/01 12:36:26.036 -07:00] [INFO] [unknown:719] ["[region 141] 573 became follower at term 7"]
[2019/05/01 12:36:26.105 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 0, 218], lock_version: 408089889586282498, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 0, 218], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:26.159 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 492, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=10] [term=6] [peer_id=394] [region_id=390]
[2019/05/01 12:36:26.159 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 6, version: 12, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=394] [region_id=390]
[2019/05/01 12:36:26.159 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 390, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 55, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 55, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 3, 128, 0, 0, 0, 255, 0, 0, 0, 108, 3, 128, 0, 0, 255, 0, 0, 0, 0, 0, 3, 128, 0, 255, 0, 0, 0, 0, 0, 3, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 12, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 391, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 392, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 394, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 492, store_id: 3, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 492, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=394] [region_id=390]
[2019/05/01 12:36:26.205 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 0, 218], lock_version: 408089889586282498, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 0, 218], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:26.241 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 391, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=11] [term=6] [peer_id=394] [region_id=390]
[2019/05/01 12:36:26.241 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 7, version: 12, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=394] [region_id=390]
[2019/05/01 12:36:26.241 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 390, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 55, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 55, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 3, 128, 0, 0, 0, 255, 0, 0, 0, 108, 3, 128, 0, 0, 255, 0, 0, 0, 0, 0, 3, 128, 0, 255, 0, 0, 0, 0, 0, 3, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 7, version: 12, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 391, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 392, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 394, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 492, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 391, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=394] [region_id=390]
[2019/05/01 12:36:26.370 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 0, 220], lock_version: 408089889664925697, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 0, 221], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:26.535 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 0, 219], lock_version: 408089889717354503, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 0, 219], lock_ttl: 3002, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:26.841 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 0, 219], lock_version: 408089889795997702, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 0, 219], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:26.960 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 0, 225], lock_version: 408089889835319302, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 0, 225], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:27.263 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 0, 225], lock_version: 408089889913962505, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 0, 226], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:27.717 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 0, 224], lock_version: 408089889979498498, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 0, 226], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:27.765 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=576] [region_id=237]
[2019/05/01 12:36:27.766 -07:00] [INFO] [unknown:719] ["[region 237] 576 became follower at term 0"]
[2019/05/01 12:36:27.766 -07:00] [INFO] [unknown:295] ["[region 237] 576 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:36:27.766 -07:00] [INFO] [unknown:719] ["[region 237] 576 became follower at term 1"]
[2019/05/01 12:36:27.766 -07:00] [INFO] [unknown:920] ["[region 237] 576 [term: 1] received a MsgHeartbeat message with higher term from 240 [term: 7]"]
[2019/05/01 12:36:27.766 -07:00] [INFO] [unknown:719] ["[region 237] 576 became follower at term 7"]
[2019/05/01 12:36:28.098 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 0, 223], lock_version: 408089890058141699, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 0, 223], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:28.143 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_141_7_11_(default|lock|write).sst] [snap_key=141_7_11]
[2019/05/01 12:36:28.169 -07:00] [INFO] [unknown:1792] ["[region 141] 573 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 11, term: 7]"]
[2019/05/01 12:36:28.169 -07:00] [INFO] [unknown:1816] ["[region 141] 573 restored progress of 142 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:36:28.169 -07:00] [INFO] [unknown:1816] ["[region 141] 573 restored progress of 143 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:36:28.169 -07:00] [INFO] [unknown:1816] ["[region 141] 573 restored progress of 325 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:36:28.169 -07:00] [INFO] [unknown:1816] ["[region 141] 573 restored progress of 573 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:36:28.169 -07:00] [INFO] [unknown:474] ["[region 141] 573 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 11, term: 7]"]
[2019/05/01 12:36:28.169 -07:00] [INFO] [unknown:1736] ["[region 141] 573 [commit: 11] restored snapshot [index: 11, term: 7]"]
[2019/05/01 12:36:28.169 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=573] [region_id=141]
[2019/05/01 12:36:28.169 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 11, truncated_state: Some(RaftTruncatedState { index: 11, term: 7, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 141, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 116, 105, 107, 118, 255, 95, 103, 99, 95, 255, 114, 117, 110, 255, 95, 105, 110, 116, 101, 255, 114, 118, 255, 97, 108, 0, 0, 0, 0, 251, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 114, 128, 0, 0, 0, 0, 255, 0, 0, 1, 0, 0, 0, 0, 0, 250], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 18, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 142, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 143, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 325, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 573, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=573] [region_id=141]
[2019/05/01 12:36:28.193 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 0, 223], lock_version: 408089890058141699, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 0, 223], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:28.220 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 141] 573"]
[2019/05/01 12:36:28.220 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 141, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 116, 105, 107, 118, 255, 95, 103, 99, 95, 255, 114, 117, 110, 255, 95, 105, 110, 116, 101, 255, 114, 118, 255, 97, 108, 0, 0, 0, 0, 251, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 114, 128, 0, 0, 0, 0, 255, 0, 0, 1, 0, 0, 0, 0, 0, 250], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 18, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 142, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 143, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 325, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 573, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=573] [region_id=141]
[2019/05/01 12:36:28.220 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=141]
[2019/05/01 12:36:28.269 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=47.229671ms] [region_id=141]
[2019/05/01 12:36:28.747 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 0, 226], lock_version: 408089890254749700, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 0, 227], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:29.091 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 0, 228], lock_version: 408089890359607300, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 0, 231], lock_ttl: 3003, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:29.111 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 573, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=12] [term=7] [peer_id=573] [region_id=141]
[2019/05/01 12:36:29.111 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 6, version: 18, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=573] [region_id=141]
[2019/05/01 12:36:29.111 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 141, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 116, 105, 107, 118, 255, 95, 103, 99, 95, 255, 114, 117, 110, 255, 95, 105, 110, 116, 101, 255, 114, 118, 255, 97, 108, 0, 0, 0, 0, 251, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 114, 128, 0, 0, 0, 0, 255, 0, 0, 1, 0, 0, 0, 0, 0, 250], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 18, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 142, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 143, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 325, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 573, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 573, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=573] [region_id=141]
[2019/05/01 12:36:29.173 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 0, 228], lock_version: 408089890359607300, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 0, 231], lock_ttl: 3003, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:29.198 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 142, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=13] [term=7] [peer_id=573] [region_id=141]
[2019/05/01 12:36:29.198 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 7, version: 18, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=573] [region_id=141]
[2019/05/01 12:36:29.198 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 141, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 116, 105, 107, 118, 255, 95, 103, 99, 95, 255, 114, 117, 110, 255, 95, 105, 110, 116, 101, 255, 114, 118, 255, 97, 108, 0, 0, 0, 0, 251, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 114, 128, 0, 0, 0, 0, 255, 0, 0, 1, 0, 0, 0, 0, 0, 250], region_epoch: Some(RegionEpoch { conf_ver: 7, version: 18, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 142, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 143, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 325, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 573, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 142, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=573] [region_id=141]
[2019/05/01 12:36:29.252 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 0, 225], lock_version: 408089890372714497, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 0, 229], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:29.436 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 0, 231], lock_version: 408089890451357700, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 0, 231], lock_ttl: 3063, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:29.750 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=577] [region_id=429]
[2019/05/01 12:36:29.750 -07:00] [INFO] [unknown:719] ["[region 429] 577 became follower at term 0"]
[2019/05/01 12:36:29.750 -07:00] [INFO] [unknown:295] ["[region 429] 577 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:36:29.750 -07:00] [INFO] [unknown:719] ["[region 429] 577 became follower at term 1"]
[2019/05/01 12:36:29.750 -07:00] [INFO] [unknown:920] ["[region 429] 577 [term: 1] received a MsgHeartbeat message with higher term from 431 [term: 7]"]
[2019/05/01 12:36:29.750 -07:00] [INFO] [unknown:719] ["[region 429] 577 became follower at term 7"]
[2019/05/01 12:36:29.769 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_237_7_8_(default|lock|write).sst] [snap_key=237_7_8]
[2019/05/01 12:36:29.781 -07:00] [INFO] [unknown:1792] ["[region 237] 576 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 8, term: 7]"]
[2019/05/01 12:36:29.781 -07:00] [INFO] [unknown:1816] ["[region 237] 576 restored progress of 238 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:36:29.781 -07:00] [INFO] [unknown:1816] ["[region 237] 576 restored progress of 239 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:36:29.781 -07:00] [INFO] [unknown:1816] ["[region 237] 576 restored progress of 240 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:36:29.781 -07:00] [INFO] [unknown:1816] ["[region 237] 576 restored progress of 576 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:36:29.781 -07:00] [INFO] [unknown:474] ["[region 237] 576 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 8, term: 7]"]
[2019/05/01 12:36:29.781 -07:00] [INFO] [unknown:1736] ["[region 237] 576 [commit: 8] restored snapshot [index: 8, term: 7]"]
[2019/05/01 12:36:29.781 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=576] [region_id=237]
[2019/05/01 12:36:29.781 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 8, truncated_state: Some(RaftTruncatedState { index: 8, term: 7, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 237, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 95, 103, 255, 114, 111, 117, 255, 112, 95, 99, 111, 109, 255, 109, 105, 255, 116, 95, 115, 121, 110, 99, 255, 95, 255, 110, 111, 95, 100, 101, 108, 97, 255, 255, 121, 95, 99, 111, 117, 110, 116, 0, 255, 254, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 95, 103, 255, 116, 105, 100, 255, 95, 115, 105, 109, 112, 255, 108, 101, 255, 95, 114, 101, 99, 111, 118, 255, 101, 255, 114, 121, 0, 0, 0, 0, 0, 250, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 27, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 238, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 239, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 240, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 576, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=576] [region_id=237]
[2019/05/01 12:36:29.825 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 237, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 95, 103, 255, 114, 111, 117, 255, 112, 95, 99, 111, 109, 255, 109, 105, 255, 116, 95, 115, 121, 110, 99, 255, 95, 255, 110, 111, 95, 100, 101, 108, 97, 255, 255, 121, 95, 99, 111, 117, 110, 116, 0, 255, 254, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 95, 103, 255, 116, 105, 100, 255, 95, 115, 105, 109, 112, 255, 108, 101, 255, 95, 114, 101, 99, 111, 118, 255, 101, 255, 114, 121, 0, 0, 0, 0, 0, 250, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 27, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 238, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 239, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 240, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 576, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=576] [region_id=237]
[2019/05/01 12:36:29.825 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 237] 576"]
[2019/05/01 12:36:29.825 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=237]
[2019/05/01 12:36:29.869 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=43.851525ms] [region_id=237]
[2019/05/01 12:36:29.930 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 0, 229], lock_version: 408089890556215305, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 0, 229], lock_ttl: 3065, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:30.132 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 574, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=12] [term=7] [peer_id=314] [region_id=132]
[2019/05/01 12:36:30.132 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 6, version: 18, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=314] [region_id=132]
[2019/05/01 12:36:30.132 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 132, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 116, 105, 107, 118, 255, 95, 103, 99, 95, 255, 101, 110, 97, 255, 98, 108, 101, 0, 0, 253, 0, 0, 253], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 116, 105, 107, 118, 255, 95, 103, 99, 95, 255, 108, 101, 97, 255, 100, 101, 114, 95, 100, 255, 101, 115, 255, 99, 0, 0, 0, 0, 0, 250, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 18, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 133, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 134, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 314, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 574, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 574, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=314] [region_id=132]
[2019/05/01 12:36:30.166 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 575, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=12] [term=7] [peer_id=327] [region_id=147]
[2019/05/01 12:36:30.171 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 6, version: 18, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=327] [region_id=147]
[2019/05/01 12:36:30.171 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 147, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 114, 128, 0, 0, 0, 0, 255, 0, 0, 3, 0, 0, 0, 0, 0, 250], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 114, 128, 0, 0, 0, 0, 255, 0, 234, 97, 0, 0, 0, 0, 0, 250], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 18, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 148, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 149, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 327, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 575, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 575, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=327] [region_id=147]
[2019/05/01 12:36:30.250 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 133, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=13] [term=7] [peer_id=314] [region_id=132]
[2019/05/01 12:36:30.250 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 7, version: 18, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=314] [region_id=132]
[2019/05/01 12:36:30.250 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 132, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 116, 105, 107, 118, 255, 95, 103, 99, 95, 255, 101, 110, 97, 255, 98, 108, 101, 0, 0, 253, 0, 0, 253], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 116, 105, 107, 118, 255, 95, 103, 99, 95, 255, 108, 101, 97, 255, 100, 101, 114, 95, 100, 255, 101, 115, 255, 99, 0, 0, 0, 0, 0, 250, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 7, version: 18, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 133, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 134, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 314, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 574, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 133, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=314] [region_id=132]
[2019/05/01 12:36:30.306 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 148, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=13] [term=7] [peer_id=327] [region_id=147]
[2019/05/01 12:36:30.306 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 7, version: 18, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=327] [region_id=147]
[2019/05/01 12:36:30.306 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 147, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 114, 128, 0, 0, 0, 0, 255, 0, 0, 3, 0, 0, 0, 0, 0, 250], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 114, 128, 0, 0, 0, 0, 255, 0, 234, 97, 0, 0, 0, 0, 0, 250], region_epoch: Some(RegionEpoch { conf_ver: 7, version: 18, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 148, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 149, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 327, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 575, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 148, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=327] [region_id=147]
[2019/05/01 12:36:30.359 -07:00] [INFO] [pd.rs:558] ["try to change peer"] [peer="Peer { id: 579, store_id: 3, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [change_type=AddLearnerNode] [region_id=56]
[2019/05/01 12:36:30.359 -07:00] [INFO] [peer.rs:1953] ["propose conf change peer"] [change_peer=579] [change_type=AddLearnerNode] [peer_id=387] [region_id=56]
[2019/05/01 12:36:30.426 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddLearnerNode, peer: Some(Peer { id: 579, store_id: 3, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=12] [term=7] [peer_id=387] [region_id=56]
[2019/05/01 12:36:30.426 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 5, version: 18, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddLearner] [peer_id=387] [region_id=56]
[2019/05/01 12:36:30.426 -07:00] [INFO] [apply.rs:1476] ["add learner successfully"] [region="Region { id: 56, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 95, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 105, 0, 0, 0, 0, 0, 0, 0, 248], region_epoch: Some(RegionEpoch { conf_ver: 5, version: 18, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 57, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 381, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 387, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 579, store_id: 3, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=387] [region_id=56]
[2019/05/01 12:36:30.449 -07:00] [INFO] [peer.rs:1318] ["notify pd with change peer region"] [region="Region { id: 56, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 95, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 105, 0, 0, 0, 0, 0, 0, 0, 248], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 18, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 57, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 381, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 387, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 579, store_id: 3, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=387] [region_id=56]
[2019/05/01 12:36:30.451 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 0, 227], lock_version: 408089890674180102, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 0, 227], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:30.714 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 0, 232], lock_version: 408089890818359303, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 0, 232], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:30.714 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 0, 232], lock_version: 408089890818359303, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 0, 232], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:30.849 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 576, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=9] [term=7] [peer_id=576] [region_id=237]
[2019/05/01 12:36:30.863 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 6, version: 27, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=576] [region_id=237]
[2019/05/01 12:36:30.863 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 237, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 95, 103, 255, 114, 111, 117, 255, 112, 95, 99, 111, 109, 255, 109, 105, 255, 116, 95, 115, 121, 110, 99, 255, 95, 255, 110, 111, 95, 100, 101, 108, 97, 255, 255, 121, 95, 99, 111, 117, 110, 116, 0, 255, 254, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 95, 103, 255, 116, 105, 100, 255, 95, 115, 105, 109, 112, 255, 108, 101, 255, 95, 114, 101, 99, 111, 118, 255, 101, 255, 114, 121, 0, 0, 0, 0, 0, 250, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 27, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 238, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 239, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 240, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 576, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 576, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=576] [region_id=237]
[2019/05/01 12:36:30.957 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 238, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=10] [term=7] [peer_id=576] [region_id=237]
[2019/05/01 12:36:30.962 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 7, version: 27, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=576] [region_id=237]
[2019/05/01 12:36:30.962 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 237, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 95, 103, 255, 114, 111, 117, 255, 112, 95, 99, 111, 109, 255, 109, 105, 255, 116, 95, 115, 121, 110, 99, 255, 95, 255, 110, 111, 95, 100, 101, 108, 97, 255, 255, 121, 95, 99, 111, 117, 110, 116, 0, 255, 254, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 95, 103, 255, 116, 105, 100, 255, 95, 115, 105, 109, 112, 255, 108, 101, 255, 95, 114, 101, 99, 111, 118, 255, 101, 255, 114, 121, 0, 0, 0, 0, 0, 250, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 7, version: 27, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 238, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 239, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 240, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 576, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 238, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=576] [region_id=237]
[2019/05/01 12:36:30.976 -07:00] [INFO] [pd.rs:558] ["try to change peer"] [peer="Peer { id: 580, store_id: 3, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [change_type=AddLearnerNode] [region_id=32]
[2019/05/01 12:36:30.976 -07:00] [INFO] [peer.rs:1953] ["propose conf change peer"] [change_peer=580] [change_type=AddLearnerNode] [peer_id=331] [region_id=32]
[2019/05/01 12:36:31.065 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddLearnerNode, peer: Some(Peer { id: 580, store_id: 3, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=16] [term=7] [peer_id=331] [region_id=32]
[2019/05/01 12:36:31.065 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 5, version: 10, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddLearner] [peer_id=331] [region_id=32]
[2019/05/01 12:36:31.065 -07:00] [INFO] [apply.rs:1476] ["add learner successfully"] [region="Region { id: 32, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 49, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 55, 0, 0, 0, 0, 0, 0, 0, 248], region_epoch: Some(RegionEpoch { conf_ver: 5, version: 10, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 33, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 331, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 378, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 580, store_id: 3, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=331] [region_id=32]
[2019/05/01 12:36:31.075 -07:00] [INFO] [peer.rs:1318] ["notify pd with change peer region"] [region="Region { id: 32, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 49, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 55, 0, 0, 0, 0, 0, 0, 0, 248], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 10, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 33, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 331, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 378, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 580, store_id: 3, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=331] [region_id=32]
[2019/05/01 12:36:31.152 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 0, 233], lock_version: 408089890910109697, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 0, 233], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:31.311 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 0, 230], lock_version: 408089890962538505, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 0, 230], lock_ttl: 3008, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:31.382 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 0, 232], lock_version: 408089890988752898, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 0, 232], lock_ttl: 3056, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:31.533 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 0, 232], lock_version: 408089891014967304, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 0, 232], lock_ttl: 3003, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:31.690 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 0, 230], lock_version: 408089891067396102, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 0, 230], lock_ttl: 3002, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:31.761 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_429_7_8_(default|lock|write).sst] [snap_key=429_7_8]
[2019/05/01 12:36:31.767 -07:00] [INFO] [unknown:1792] ["[region 429] 577 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 8, term: 7]"]
[2019/05/01 12:36:31.767 -07:00] [INFO] [unknown:1816] ["[region 429] 577 restored progress of 430 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:36:31.767 -07:00] [INFO] [unknown:1816] ["[region 429] 577 restored progress of 431 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:36:31.767 -07:00] [INFO] [unknown:1816] ["[region 429] 577 restored progress of 432 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:36:31.767 -07:00] [INFO] [unknown:1816] ["[region 429] 577 restored progress of 577 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:36:31.767 -07:00] [INFO] [unknown:474] ["[region 429] 577 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 8, term: 7]"]
[2019/05/01 12:36:31.767 -07:00] [INFO] [unknown:1736] ["[region 429] 577 [commit: 8] restored snapshot [index: 8, term: 7]"]
[2019/05/01 12:36:31.767 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=577] [region_id=429]
[2019/05/01 12:36:31.767 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 8, truncated_state: Some(RaftTruncatedState { index: 8, term: 7, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 429, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 99, 111, 110, 99, 255, 117, 114, 114, 101, 255, 110, 116, 95, 255, 105, 110, 115, 101, 114, 255, 116, 0, 255, 0, 0, 0, 0, 0, 0, 248, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 99, 111, 110, 110, 255, 101, 99, 116, 95, 255, 116, 105, 109, 255, 101, 111, 117, 116, 0, 254, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 47, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 430, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 431, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 432, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 577, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=577] [region_id=429]
[2019/05/01 12:36:31.782 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 429] 577"]
[2019/05/01 12:36:31.782 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 429, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 99, 111, 110, 99, 255, 117, 114, 114, 101, 255, 110, 116, 95, 255, 105, 110, 115, 101, 114, 255, 116, 0, 255, 0, 0, 0, 0, 0, 0, 248, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 99, 111, 110, 110, 255, 101, 99, 116, 95, 255, 116, 105, 109, 255, 101, 111, 117, 116, 0, 254, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 47, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 430, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 431, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 432, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 577, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=577] [region_id=429]
[2019/05/01 12:36:31.782 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=429]
[2019/05/01 12:36:31.798 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=16.196031ms] [region_id=429]
[2019/05/01 12:36:31.908 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 0, 233], lock_version: 408089891132932111, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 0, 234], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:31.973 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 0, 230], lock_version: 408089891146039306, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 0, 234], lock_ttl: 3003, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:31.984 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 0, 232], lock_version: 408089891146039311, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 0, 235], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:32.162 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 0, 234], lock_version: 408089891159146499, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 0, 237], lock_ttl: 3093, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:32.317 -07:00] [INFO] [peer_storage.rs:759] ["requesting snapshot"] [peer_id=387] [region_id=56]
[2019/05/01 12:36:32.317 -07:00] [INFO] [snap.rs:757] ["scan snapshot of one cf"] [size=0] [key_count=0] [cf=default] [snapshot=/opt/tidb/data/kv/snap/gen_56_7_12_(default|lock|write).sst] [region_id=56]
[2019/05/01 12:36:32.317 -07:00] [INFO] [snap.rs:757] ["scan snapshot of one cf"] [size=0] [key_count=0] [cf=lock] [snapshot=/opt/tidb/data/kv/snap/gen_56_7_12_(default|lock|write).sst] [region_id=56]
[2019/05/01 12:36:32.317 -07:00] [INFO] [snap.rs:757] ["scan snapshot of one cf"] [size=0] [key_count=0] [cf=write] [snapshot=/opt/tidb/data/kv/snap/gen_56_7_12_(default|lock|write).sst] [region_id=56]
[2019/05/01 12:36:32.317 -07:00] [INFO] [snap.rs:875] ["scan snapshot"] [takes=240.061µs] [size=0] [key_count=0] [snapshot=/opt/tidb/data/kv/snap/gen_56_7_12_(default|lock|write).sst] [region_id=56]
[2019/05/01 12:36:32.442 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 0, 230], lock_version: 408089891237789700, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 0, 237], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:32.805 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 577, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=9] [term=7] [peer_id=577] [region_id=429]
[2019/05/01 12:36:32.805 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 6, version: 47, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=577] [region_id=429]
[2019/05/01 12:36:32.805 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 429, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 99, 111, 110, 99, 255, 117, 114, 114, 101, 255, 110, 116, 95, 255, 105, 110, 115, 101, 114, 255, 116, 0, 255, 0, 0, 0, 0, 0, 0, 248, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 99, 111, 110, 110, 255, 101, 99, 116, 95, 255, 116, 105, 109, 255, 101, 111, 117, 116, 0, 254, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 47, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 430, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 431, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 432, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 577, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 577, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=577] [region_id=429]
[2019/05/01 12:36:32.921 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 430, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=10] [term=7] [peer_id=577] [region_id=429]
[2019/05/01 12:36:32.921 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 7, version: 47, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=577] [region_id=429]
[2019/05/01 12:36:32.921 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 429, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 99, 111, 110, 99, 255, 117, 114, 114, 101, 255, 110, 116, 95, 255, 105, 110, 115, 101, 114, 255, 116, 0, 255, 0, 0, 0, 0, 0, 0, 248, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 99, 111, 110, 110, 255, 101, 99, 116, 95, 255, 116, 105, 109, 255, 101, 111, 117, 116, 0, 254, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 7, version: 47, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 430, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 431, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 432, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 577, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 430, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=577] [region_id=429]
[2019/05/01 12:36:32.955 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 0, 237], lock_version: 408089891290218499, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 0, 239], lock_ttl: 3098, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:32.973 -07:00] [INFO] [peer_storage.rs:759] ["requesting snapshot"] [peer_id=331] [region_id=32]
[2019/05/01 12:36:32.974 -07:00] [INFO] [snap.rs:757] ["scan snapshot of one cf"] [size=0] [key_count=0] [cf=default] [snapshot=/opt/tidb/data/kv/snap/gen_32_7_24_(default|lock|write).sst] [region_id=32]
[2019/05/01 12:36:32.974 -07:00] [INFO] [snap.rs:757] ["scan snapshot of one cf"] [size=0] [key_count=0] [cf=lock] [snapshot=/opt/tidb/data/kv/snap/gen_32_7_24_(default|lock|write).sst] [region_id=32]
[2019/05/01 12:36:32.974 -07:00] [INFO] [snap.rs:757] ["scan snapshot of one cf"] [size=1233] [key_count=18] [cf=write] [snapshot=/opt/tidb/data/kv/snap/gen_32_7_24_(default|lock|write).sst] [region_id=32]
[2019/05/01 12:36:32.993 -07:00] [INFO] [snap.rs:875] ["scan snapshot"] [takes=19.50462ms] [size=1753] [key_count=18] [snapshot=/opt/tidb/data/kv/snap/gen_32_7_24_(default|lock|write).sst] [region_id=32]
[2019/05/01 12:36:33.035 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 0, 237], lock_version: 408089891290218499, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 0, 239], lock_ttl: 3098, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:33.146 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 0, 237], lock_version: 408089891290218499, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 0, 239], lock_ttl: 3098, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:33.177 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 0, 237], lock_version: 408089891290218499, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 0, 239], lock_ttl: 3098, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:33.771 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=581] [region_id=114]
[2019/05/01 12:36:33.772 -07:00] [INFO] [unknown:719] ["[region 114] 581 became follower at term 0"]
[2019/05/01 12:36:33.772 -07:00] [INFO] [unknown:295] ["[region 114] 581 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:36:33.772 -07:00] [INFO] [unknown:719] ["[region 114] 581 became follower at term 1"]
[2019/05/01 12:36:33.772 -07:00] [INFO] [unknown:920] ["[region 114] 581 [term: 1] received a MsgHeartbeat message with higher term from 257 [term: 7]"]
[2019/05/01 12:36:33.772 -07:00] [INFO] [unknown:719] ["[region 114] 581 became follower at term 7"]
[2019/05/01 12:36:34.151 -07:00] [INFO] [keys.rs:155] ["approximate keys over threshold, need to do split check"] [threshold=5] [keys=4278] [region_id=4]
[2019/05/01 12:36:34.164 -07:00] [INFO] [peer.rs:294] ["on split"] [split_keys="10 keys range from \"t\\200\\000\\000\\000\\000\\000\\000\\377l_r\\200\\000\\000\\000\\000\\377\\000\\000\\001\\000\\000\\000\\000\\000\\372\\372V,j\\261\\347\\377\\360\" to \"t\\200\\000\\000\\000\\000\\000\\000\\377l_r\\200\\000\\000\\000\\000\\377\\000\\000\\002\\000\\000\\000\\000\\000\\372\\372V,j\\277/\\377\\376\""] [peer_id=393] [region_id=4]
[2019/05/01 12:36:34.164 -07:00] [INFO] [pd.rs:285] ["try to batch split region"] [region="Region { id: 4, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 108, 95, 114, 128, 0, 0, 0, 0, 255, 0, 0, 1, 0, 0, 0, 0, 0, 250], end_key: [], region_epoch: Some(RegionEpoch { conf_ver: 5, version: 21, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 5, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 386, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 393, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [new_region_ids="[SplitID { new_region_id: 622, new_peer_ids: [623, 624, 625], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, SplitID { new_region_id: 626, new_peer_ids: [627, 628, 629], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, SplitID { new_region_id: 630, new_peer_ids: [631, 632, 633], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, SplitID { new_region_id: 634, new_peer_ids: [635, 636, 637], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, SplitID { new_region_id: 638, new_peer_ids: [639, 640, 641], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, SplitID { new_region_id: 642, new_peer_ids: [643, 644, 645], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, SplitID { new_region_id: 646, new_peer_ids: [647, 648, 649], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, SplitID { new_region_id: 650, new_peer_ids: [651, 652, 653], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, SplitID { new_region_id: 654, new_peer_ids: [655, 656, 657], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, SplitID { new_region_id: 658, new_peer_ids: [659, 660, 661], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }]"] [region_id=4]
[2019/05/01 12:36:34.182 -07:00] [WARN] [split_observer.rs:98] ["invalid key, skip"] [err="\"key \\\"t\\\\200\\\\000\\\\000\\\\000\\\\000\\\\000\\\\000\\\\377l_r\\\\200\\\\000\\\\000\\\\000\\\\000\\\\377\\\\000\\\\000\\\\001\\\\000\\\\000\\\\000\\\\000\\\\000\\\\372\\\" should be in (\\\"t\\\\200\\\\000\\\\000\\\\000\\\\000\\\\000\\\\000\\\\377l_r\\\\200\\\\000\\\\000\\\\000\\\\000\\\\377\\\\000\\\\000\\\\001\\\\000\\\\000\\\\000\\\\000\\\\000\\\\372\\\", \\\"\\\")\""] [index=0] [region_id=4]
[2019/05/01 12:36:34.182 -07:00] [WARN] [split_observer.rs:98] ["invalid key, skip"] [err="\"key \\\"t\\\\200\\\\000\\\\000\\\\000\\\\000\\\\000\\\\000\\\\377l_r\\\\200\\\\000\\\\000\\\\000\\\\000\\\\377\\\\000\\\\000\\\\001\\\\000\\\\000\\\\000\\\\000\\\\000\\\\372\\\" should be in (\\\"t\\\\200\\\\000\\\\000\\\\000\\\\000\\\\000\\\\000\\\\377l_r\\\\200\\\\000\\\\000\\\\000\\\\000\\\\377\\\\000\\\\000\\\\001\\\\000\\\\000\\\\000\\\\000\\\\000\\\\372\\\", \\\"\\\")\""] [index=1] [region_id=4]
[2019/05/01 12:36:34.182 -07:00] [WARN] [split_observer.rs:98] ["invalid key, skip"] [err="\"key \\\"t\\\\200\\\\000\\\\000\\\\000\\\\000\\\\000\\\\000\\\\377l_r\\\\200\\\\000\\\\000\\\\000\\\\000\\\\377\\\\000\\\\000\\\\001\\\\000\\\\000\\\\000\\\\000\\\\000\\\\372\\\" should be in (\\\"t\\\\200\\\\000\\\\000\\\\000\\\\000\\\\000\\\\000\\\\377l_r\\\\200\\\\000\\\\000\\\\000\\\\000\\\\377\\\\000\\\\000\\\\001\\\\000\\\\000\\\\000\\\\000\\\\000\\\\372\\\", \\\"\\\")\""] [index=2] [region_id=4]
[2019/05/01 12:36:34.182 -07:00] [WARN] [split_observer.rs:98] ["invalid key, skip"] [err="\"key \\\"t\\\\200\\\\000\\\\000\\\\000\\\\000\\\\000\\\\000\\\\377l_r\\\\200\\\\000\\\\000\\\\000\\\\000\\\\377\\\\000\\\\000\\\\001\\\\000\\\\000\\\\000\\\\000\\\\000\\\\372\\\" should be in (\\\"t\\\\200\\\\000\\\\000\\\\000\\\\000\\\\000\\\\000\\\\377l_r\\\\200\\\\000\\\\000\\\\000\\\\000\\\\377\\\\000\\\\000\\\\001\\\\000\\\\000\\\\000\\\\000\\\\000\\\\372\\\", \\\"\\\")\""] [index=3] [region_id=4]
[2019/05/01 12:36:34.182 -07:00] [WARN] [split_observer.rs:98] ["invalid key, skip"] [err="\"key \\\"t\\\\200\\\\000\\\\000\\\\000\\\\000\\\\000\\\\000\\\\377l_r\\\\200\\\\000\\\\000\\\\000\\\\000\\\\377\\\\000\\\\000\\\\001\\\\000\\\\000\\\\000\\\\000\\\\000\\\\372\\\" should be in (\\\"t\\\\200\\\\000\\\\000\\\\000\\\\000\\\\000\\\\000\\\\377l_r\\\\200\\\\000\\\\000\\\\000\\\\000\\\\377\\\\000\\\\000\\\\001\\\\000\\\\000\\\\000\\\\000\\\\000\\\\372\\\", \\\"\\\")\""] [index=4] [region_id=4]
[2019/05/01 12:36:34.182 -07:00] [WARN] [split_observer.rs:98] ["invalid key, skip"] [err="\"key \\\"t\\\\200\\\\000\\\\000\\\\000\\\\000\\\\000\\\\000\\\\377l_r\\\\200\\\\000\\\\000\\\\000\\\\000\\\\377\\\\000\\\\000\\\\001\\\\000\\\\000\\\\000\\\\000\\\\000\\\\372\\\" should be in (\\\"t\\\\200\\\\000\\\\000\\\\000\\\\000\\\\000\\\\000\\\\377l_r\\\\200\\\\000\\\\000\\\\000\\\\000\\\\377\\\\000\\\\000\\\\001\\\\000\\\\000\\\\000\\\\000\\\\000\\\\372\\\", \\\"\\\")\""] [index=5] [region_id=4]
[2019/05/01 12:36:34.182 -07:00] [WARN] [split_observer.rs:98] ["invalid key, skip"] [err="\"key \\\"t\\\\200\\\\000\\\\000\\\\000\\\\000\\\\000\\\\000\\\\377l_r\\\\200\\\\000\\\\000\\\\000\\\\000\\\\377\\\\000\\\\000\\\\001\\\\000\\\\000\\\\000\\\\000\\\\000\\\\372\\\" should be in (\\\"t\\\\200\\\\000\\\\000\\\\000\\\\000\\\\000\\\\000\\\\377l_r\\\\200\\\\000\\\\000\\\\000\\\\000\\\\377\\\\000\\\\000\\\\001\\\\000\\\\000\\\\000\\\\000\\\\000\\\\372\\\", \\\"\\\")\""] [index=6] [region_id=4]
[2019/05/01 12:36:34.182 -07:00] [WARN] [split_observer.rs:85] ["key is not larger than previous, skip."] [index=8] [previous=7480000000000000FF6C5F728000000000FF0000020000000000FA] [key=7480000000000000FF6C5F728000000000FF0000020000000000FA] [region_id=4]
[2019/05/01 12:36:34.182 -07:00] [WARN] [split_observer.rs:85] ["key is not larger than previous, skip."] [index=9] [previous=7480000000000000FF6C5F728000000000FF0000020000000000FA] [key=7480000000000000FF6C5F728000000000FF0000020000000000FA] [region_id=4]
[2019/05/01 12:36:34.224 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: BatchSplit, change_peer: None, split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: Some(BatchSplitRequest { requests: [SplitRequest { split_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 108, 95, 114, 128, 0, 0, 0, 0, 255, 0, 0, 2, 0, 0, 0, 0, 0, 250], new_region_id: 650, new_peer_ids: [651, 652, 653], right_derive: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], right_derive: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=4128] [term=7] [peer_id=393] [region_id=4]
[2019/05/01 12:36:34.224 -07:00] [INFO] [apply.rs:1582] ["split region"] [keys="[[116, 128, 0, 0, 0, 0, 0, 0, 255, 108, 95, 114, 128, 0, 0, 0, 0, 255, 0, 0, 2, 0, 0, 0, 0, 0, 250]]"] [region="Region { id: 4, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 108, 95, 114, 128, 0, 0, 0, 0, 255, 0, 0, 1, 0, 0, 0, 0, 0, 250], end_key: [], region_epoch: Some(RegionEpoch { conf_ver: 5, version: 21, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 5, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 386, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 393, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=393] [region_id=4]
[2019/05/01 12:36:34.233 -07:00] [INFO] [peer.rs:1382] ["notify pd with split"] [split_count=2] [peer_id=393] [region_id=4]
[2019/05/01 12:36:34.233 -07:00] [INFO] [peer.rs:1424] ["insert new region"] [region="Region { id: 650, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 108, 95, 114, 128, 0, 0, 0, 0, 255, 0, 0, 1, 0, 0, 0, 0, 0, 250], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 108, 95, 114, 128, 0, 0, 0, 0, 255, 0, 0, 2, 0, 0, 0, 0, 0, 250], region_epoch: Some(RegionEpoch { conf_ver: 5, version: 22, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 651, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 652, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 653, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region_id=650]
[2019/05/01 12:36:34.233 -07:00] [INFO] [peer.rs:127] ["create peer"] [peer_id=653] [region_id=650]
[2019/05/01 12:36:34.233 -07:00] [INFO] [unknown:719] ["[region 650] 653 became follower at term 5"]
[2019/05/01 12:36:34.233 -07:00] [INFO] [unknown:295] ["[region 650] 653 newRaft [peers: [651, 652, 653], term: 5, commit: 5, applied: 5, last_index: 5, last_term: 5]"]
[2019/05/01 12:36:34.233 -07:00] [INFO] [unknown:1022] ["[region 650] 653 is starting a new election at term 5"]
[2019/05/01 12:36:34.233 -07:00] [INFO] [unknown:761] ["[region 650] 653 became pre-candidate at term 5"]
[2019/05/01 12:36:34.233 -07:00] [INFO] [unknown:854] ["[region 650] 653 received MsgRequestPreVoteResponse from 653 at term 5"]
[2019/05/01 12:36:34.233 -07:00] [INFO] [unknown:828] ["[region 650] 653 [logterm: 5, index: 5] sent MsgRequestPreVote request to 651 at term 5"]
[2019/05/01 12:36:34.233 -07:00] [INFO] [unknown:828] ["[region 650] 653 [logterm: 5, index: 5] sent MsgRequestPreVote request to 652 at term 5"]
[2019/05/01 12:36:34.233 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 650] 653"]
[2019/05/01 12:36:34.238 -07:00] [INFO] [unknown:854] ["[region 650] 653 received MsgRequestPreVoteResponse from 652 at term 5"]
[2019/05/01 12:36:34.238 -07:00] [INFO] [unknown:1550] ["[region 650] 653 [quorum:2] has received 2 MsgRequestPreVoteResponse votes and 0 vote rejections"]
[2019/05/01 12:36:34.238 -07:00] [INFO] [unknown:739] ["[region 650] 653 became candidate at term 6"]
[2019/05/01 12:36:34.238 -07:00] [INFO] [unknown:854] ["[region 650] 653 received MsgRequestVoteResponse from 653 at term 6"]
[2019/05/01 12:36:34.238 -07:00] [INFO] [unknown:828] ["[region 650] 653 [logterm: 5, index: 5] sent MsgRequestVote request to 651 at term 6"]
[2019/05/01 12:36:34.238 -07:00] [INFO] [unknown:828] ["[region 650] 653 [logterm: 5, index: 5] sent MsgRequestVote request to 652 at term 6"]
[2019/05/01 12:36:34.270 -07:00] [ERROR] [process.rs:169] ["get snapshot failed"] [err="Request(Error { message: \"region epoch is not match\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: Some(EpochNotMatch { current_regions: [Region { id: 4, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 108, 95, 114, 128, 0, 0, 0, 0, 255, 0, 0, 2, 0, 0, 0, 0, 0, 250], end_key: [], region_epoch: Some(RegionEpoch { conf_ver: 5, version: 22, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 5, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 386, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 393, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Region { id: 650, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 108, 95, 114, 128, 0, 0, 0, 0, 255, 0, 0, 1, 0, 0, 0, 0, 0, 250], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 108, 95, 114, 128, 0, 0, 0, 0, 255, 0, 0, 2, 0, 0, 0, 0, 0, 250], region_epoch: Some(RegionEpoch { conf_ver: 5, version: 22, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 651, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 652, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 653, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), server_is_busy: None, stale_command: None, store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } })"] [cid=1400]
[2019/05/01 12:36:34.270 -07:00] [ERROR] [process.rs:169] ["get snapshot failed"] [err="Request(Error { message: \"region epoch is not match\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: Some(EpochNotMatch { current_regions: [Region { id: 4, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 108, 95, 114, 128, 0, 0, 0, 0, 255, 0, 0, 2, 0, 0, 0, 0, 0, 250], end_key: [], region_epoch: Some(RegionEpoch { conf_ver: 5, version: 22, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 5, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 386, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 393, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Region { id: 650, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 108, 95, 114, 128, 0, 0, 0, 0, 255, 0, 0, 1, 0, 0, 0, 0, 0, 250], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 108, 95, 114, 128, 0, 0, 0, 0, 255, 0, 0, 2, 0, 0, 0, 0, 0, 250], region_epoch: Some(RegionEpoch { conf_ver: 5, version: 22, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 651, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 652, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 653, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), server_is_busy: None, stale_command: None, store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } })"] [cid=1392]
[2019/05/01 12:36:34.305 -07:00] [ERROR] [process.rs:169] ["get snapshot failed"] [err="Request(Error { message: \"region epoch is not match\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: Some(EpochNotMatch { current_regions: [Region { id: 4, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 108, 95, 114, 128, 0, 0, 0, 0, 255, 0, 0, 2, 0, 0, 0, 0, 0, 250], end_key: [], region_epoch: Some(RegionEpoch { conf_ver: 5, version: 22, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 5, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 386, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 393, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Region { id: 650, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 108, 95, 114, 128, 0, 0, 0, 0, 255, 0, 0, 1, 0, 0, 0, 0, 0, 250], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 108, 95, 114, 128, 0, 0, 0, 0, 255, 0, 0, 2, 0, 0, 0, 0, 0, 250], region_epoch: Some(RegionEpoch { conf_ver: 5, version: 22, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 651, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 652, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 653, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), server_is_busy: None, stale_command: None, store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } })"] [cid=1395]
[2019/05/01 12:36:34.305 -07:00] [INFO] [unknown:854] ["[region 650] 653 received MsgRequestVoteResponse from 651 at term 6"]
[2019/05/01 12:36:34.305 -07:00] [INFO] [unknown:1550] ["[region 650] 653 [quorum:2] has received 2 MsgRequestVoteResponse votes and 0 vote rejections"]
[2019/05/01 12:36:34.305 -07:00] [INFO] [unknown:789] ["[region 650] 653 became leader at term 6"]
[2019/05/01 12:36:34.349 -07:00] [INFO] [unknown:841] ["New connected subchannel at 0x7f8590801560 for subchannel 0x7f864047a000"]
[2019/05/01 12:36:34.357 -07:00] [INFO] [snap.rs:389] ["sent snapshot"] [duration=8.387355ms] [size=0] [snap_key=56_7_12] [region_id=56]
[2019/05/01 12:36:34.357 -07:00] [INFO] [peer.rs:538] ["report snapshot status"] [status=Finish] [to="Peer { id: 579, store_id: 3, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=387] [region_id=56]
[2019/05/01 12:36:34.371 -07:00] [ERROR] [process.rs:169] ["get snapshot failed"] [err="Request(Error { message: \"region epoch is not match\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: Some(EpochNotMatch { current_regions: [Region { id: 4, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 108, 95, 114, 128, 0, 0, 0, 0, 255, 0, 0, 2, 0, 0, 0, 0, 0, 250], end_key: [], region_epoch: Some(RegionEpoch { conf_ver: 5, version: 22, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 5, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 386, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 393, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Region { id: 650, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 108, 95, 114, 128, 0, 0, 0, 0, 255, 0, 0, 1, 0, 0, 0, 0, 0, 250], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 108, 95, 114, 128, 0, 0, 0, 0, 255, 0, 0, 2, 0, 0, 0, 0, 0, 250], region_epoch: Some(RegionEpoch { conf_ver: 5, version: 22, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 651, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 652, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 653, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), server_is_busy: None, stale_command: None, store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } })"] [cid=1396]
[2019/05/01 12:36:34.371 -07:00] [ERROR] [process.rs:169] ["get snapshot failed"] [err="Request(Error { message: \"region epoch is not match\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: Some(EpochNotMatch { current_regions: [Region { id: 4, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 108, 95, 114, 128, 0, 0, 0, 0, 255, 0, 0, 2, 0, 0, 0, 0, 0, 250], end_key: [], region_epoch: Some(RegionEpoch { conf_ver: 5, version: 22, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 5, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 386, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 393, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Region { id: 650, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 108, 95, 114, 128, 0, 0, 0, 0, 255, 0, 0, 1, 0, 0, 0, 0, 0, 250], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 108, 95, 114, 128, 0, 0, 0, 0, 255, 0, 0, 2, 0, 0, 0, 0, 0, 250], region_epoch: Some(RegionEpoch { conf_ver: 5, version: 22, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 651, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 652, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 653, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), server_is_busy: None, stale_command: None, store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } })"] [cid=1397]
[2019/05/01 12:36:34.459 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 0, 238], lock_version: 408089891801399310, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 0, 243], lock_ttl: 3003, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:34.556 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 0, 238], lock_version: 408089891827613705, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 0, 238], lock_ttl: 3002, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:34.714 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 0, 242], lock_version: 408089891866935320, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 0, 242], lock_ttl: 3002, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:34.976 -07:00] [INFO] [unknown:841] ["New connected subchannel at 0x7f859006c360 for subchannel 0x7f864047a200"]
[2019/05/01 12:36:34.993 -07:00] [INFO] [snap.rs:389] ["sent snapshot"] [duration=17.799113ms] [size=1753] [snap_key=32_7_24] [region_id=32]
[2019/05/01 12:36:34.993 -07:00] [INFO] [peer.rs:538] ["report snapshot status"] [status=Finish] [to="Peer { id: 580, store_id: 3, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=331] [region_id=32]
[2019/05/01 12:36:35.080 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 0, 243], lock_version: 408089891971792904, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 0, 243], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:35.111 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 0, 240], lock_version: 408089891958685697, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 0, 242], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:35.156 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 0, 240], lock_version: 408089891958685697, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 0, 242], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:35.198 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 0, 240], lock_version: 408089891958685697, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 0, 242], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:35.310 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 0, 243], lock_version: 408089892024221706, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 0, 243], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:35.320 -07:00] [INFO] [pd.rs:558] ["try to change peer"] [peer="Peer { id: 579, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [change_type=AddNode] [region_id=56]
[2019/05/01 12:36:35.320 -07:00] [INFO] [peer.rs:1953] ["propose conf change peer"] [change_peer=579] [change_type=AddNode] [peer_id=387] [region_id=56]
[2019/05/01 12:36:35.365 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 579, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=13] [term=7] [peer_id=387] [region_id=56]
[2019/05/01 12:36:35.365 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 6, version: 18, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=387] [region_id=56]
[2019/05/01 12:36:35.365 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 56, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 95, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 105, 0, 0, 0, 0, 0, 0, 0, 248], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 18, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 57, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 381, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 387, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 579, store_id: 3, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 579, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=387] [region_id=56]
[2019/05/01 12:36:35.371 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 0, 243], lock_version: 408089892024221706, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 0, 243], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:35.372 -07:00] [INFO] [peer.rs:1318] ["notify pd with change peer region"] [region="Region { id: 56, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 95, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 105, 0, 0, 0, 0, 0, 0, 0, 248], region_epoch: Some(RegionEpoch { conf_ver: 7, version: 18, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 57, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 381, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 387, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 579, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=387] [region_id=56]
[2019/05/01 12:36:35.388 -07:00] [INFO] [pd.rs:558] ["try to change peer"] [peer="Peer { id: 57, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [change_type=RemoveNode] [region_id=56]
[2019/05/01 12:36:35.389 -07:00] [INFO] [peer.rs:1953] ["propose conf change peer"] [change_peer=57] [change_type=RemoveNode] [peer_id=387] [region_id=56]
[2019/05/01 12:36:35.425 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 57, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=14] [term=7] [peer_id=387] [region_id=56]
[2019/05/01 12:36:35.425 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 7, version: 18, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=387] [region_id=56]
[2019/05/01 12:36:35.425 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 56, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 95, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 105, 0, 0, 0, 0, 0, 0, 0, 248], region_epoch: Some(RegionEpoch { conf_ver: 7, version: 18, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 57, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 381, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 387, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 579, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 57, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=387] [region_id=56]
[2019/05/01 12:36:35.425 -07:00] [INFO] [pd.rs:558] ["try to change peer"] [peer="Peer { id: 57, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [change_type=RemoveNode] [region_id=56]
[2019/05/01 12:36:35.425 -07:00] [INFO] [peer.rs:1927] ["there is a pending conf change, try later"] [peer_id=387] [region_id=56]
[2019/05/01 12:36:35.433 -07:00] [INFO] [peer.rs:1318] ["notify pd with change peer region"] [region="Region { id: 56, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 95, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 105, 0, 0, 0, 0, 0, 0, 0, 248], region_epoch: Some(RegionEpoch { conf_ver: 8, version: 18, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 381, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 387, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 579, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=387] [region_id=56]
[2019/05/01 12:36:35.498 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 0, 242], lock_version: 408089892063543306, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 0, 242], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:35.555 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 0, 245], lock_version: 408089892063543305, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 0, 245], lock_ttl: 3099, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:35.668 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 0, 242], lock_version: 408089892089757708, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 0, 242], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:35.697 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 0, 244], lock_version: 408089892102864906, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 0, 244], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:35.775 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_114_7_11_(default|lock|write).sst] [snap_key=114_7_11]
[2019/05/01 12:36:35.786 -07:00] [INFO] [unknown:1792] ["[region 114] 581 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 11, term: 7]"]
[2019/05/01 12:36:35.786 -07:00] [INFO] [unknown:1816] ["[region 114] 581 restored progress of 115 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:36:35.786 -07:00] [INFO] [unknown:1816] ["[region 114] 581 restored progress of 116 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:36:35.786 -07:00] [INFO] [unknown:1816] ["[region 114] 581 restored progress of 257 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:36:35.786 -07:00] [INFO] [unknown:1816] ["[region 114] 581 restored progress of 581 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:36:35.786 -07:00] [INFO] [unknown:474] ["[region 114] 581 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 11, term: 7]"]
[2019/05/01 12:36:35.786 -07:00] [INFO] [unknown:1736] ["[region 114] 581 [commit: 11] restored snapshot [index: 11, term: 7]"]
[2019/05/01 12:36:35.786 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=581] [region_id=114]
[2019/05/01 12:36:35.786 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 11, truncated_state: Some(RaftTruncatedState { index: 11, term: 7, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 114, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 97, 115, 101, 255, 100, 105, 114, 0, 254, 0, 0, 0, 252], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 103, 95, 255, 116, 97, 98, 108, 255, 101, 115, 0, 255, 0, 0, 0, 0, 0, 249, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 17, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 115, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 116, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 257, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 581, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=581] [region_id=114]
[2019/05/01 12:36:35.788 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 0, 246], lock_version: 408089892142186506, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 0, 248], lock_ttl: 3002, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:35.817 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 114] 581"]
[2019/05/01 12:36:35.817 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 114, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 97, 115, 101, 255, 100, 105, 114, 0, 254, 0, 0, 0, 252], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 103, 95, 255, 116, 97, 98, 108, 255, 101, 115, 0, 255, 0, 0, 0, 0, 0, 249, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 17, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 115, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 116, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 257, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 581, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=581] [region_id=114]
[2019/05/01 12:36:35.817 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=114]
[2019/05/01 12:36:35.837 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=19.172664ms] [region_id=114]
[2019/05/01 12:36:35.983 -07:00] [INFO] [pd.rs:558] ["try to change peer"] [peer="Peer { id: 580, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [change_type=AddNode] [region_id=32]
[2019/05/01 12:36:35.983 -07:00] [INFO] [peer.rs:1953] ["propose conf change peer"] [change_peer=580] [change_type=AddNode] [peer_id=331] [region_id=32]
[2019/05/01 12:36:36.035 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 580, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=25] [term=7] [peer_id=331] [region_id=32]
[2019/05/01 12:36:36.035 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 6, version: 10, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=331] [region_id=32]
[2019/05/01 12:36:36.035 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 32, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 49, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 55, 0, 0, 0, 0, 0, 0, 0, 248], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 10, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 33, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 331, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 378, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 580, store_id: 3, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 580, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=331] [region_id=32]
[2019/05/01 12:36:36.051 -07:00] [INFO] [peer.rs:1318] ["notify pd with change peer region"] [region="Region { id: 32, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 49, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 55, 0, 0, 0, 0, 0, 0, 0, 248], region_epoch: Some(RegionEpoch { conf_ver: 7, version: 10, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 33, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 331, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 378, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 580, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=331] [region_id=32]
[2019/05/01 12:36:36.058 -07:00] [INFO] [pd.rs:558] ["try to change peer"] [peer="Peer { id: 33, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [change_type=RemoveNode] [region_id=32]
[2019/05/01 12:36:36.060 -07:00] [INFO] [peer.rs:1953] ["propose conf change peer"] [change_peer=33] [change_type=RemoveNode] [peer_id=331] [region_id=32]
[2019/05/01 12:36:36.085 -07:00] [INFO] [pd.rs:558] ["try to change peer"] [peer="Peer { id: 33, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [change_type=RemoveNode] [region_id=32]
[2019/05/01 12:36:36.101 -07:00] [INFO] [peer.rs:1927] ["there is a pending conf change, try later"] [peer_id=331] [region_id=32]
[2019/05/01 12:36:36.101 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 33, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=26] [term=7] [peer_id=331] [region_id=32]
[2019/05/01 12:36:36.101 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 7, version: 10, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=331] [region_id=32]
[2019/05/01 12:36:36.101 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 32, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 49, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 55, 0, 0, 0, 0, 0, 0, 0, 248], region_epoch: Some(RegionEpoch { conf_ver: 7, version: 10, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 33, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 331, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 378, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 580, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 33, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=331] [region_id=32]
[2019/05/01 12:36:36.125 -07:00] [INFO] [peer.rs:1318] ["notify pd with change peer region"] [region="Region { id: 32, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 49, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 55, 0, 0, 0, 0, 0, 0, 0, 248], region_epoch: Some(RegionEpoch { conf_ver: 8, version: 10, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 331, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 378, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 580, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=331] [region_id=32]
[2019/05/01 12:36:36.177 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 0, 247], lock_version: 408089892220829700, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 0, 249], lock_ttl: 3101, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:36.461 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 0, 249], lock_version: 408089892325687301, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 0, 249], lock_ttl: 3003, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:36.750 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=662] [region_id=425]
[2019/05/01 12:36:36.750 -07:00] [INFO] [unknown:719] ["[region 425] 662 became follower at term 0"]
[2019/05/01 12:36:36.750 -07:00] [INFO] [unknown:295] ["[region 425] 662 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:36:36.750 -07:00] [INFO] [unknown:719] ["[region 425] 662 became follower at term 1"]
[2019/05/01 12:36:36.750 -07:00] [INFO] [unknown:920] ["[region 425] 662 [term: 1] received a MsgHeartbeat message with higher term from 427 [term: 7]"]
[2019/05/01 12:36:36.750 -07:00] [INFO] [unknown:719] ["[region 425] 662 became follower at term 7"]
[2019/05/01 12:36:36.812 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 581, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=12] [term=7] [peer_id=581] [region_id=114]
[2019/05/01 12:36:36.812 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 6, version: 17, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=581] [region_id=114]
[2019/05/01 12:36:36.812 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 114, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 97, 115, 101, 255, 100, 105, 114, 0, 254, 0, 0, 0, 252], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 103, 95, 255, 116, 97, 98, 108, 255, 101, 115, 0, 255, 0, 0, 0, 0, 0, 249, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 17, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 115, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 116, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 257, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 581, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 581, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=581] [region_id=114]
[2019/05/01 12:36:36.889 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 115, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=13] [term=7] [peer_id=581] [region_id=114]
[2019/05/01 12:36:36.889 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 7, version: 17, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=581] [region_id=114]
[2019/05/01 12:36:36.889 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 114, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 97, 115, 101, 255, 100, 105, 114, 0, 254, 0, 0, 0, 252], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 103, 95, 255, 116, 97, 98, 108, 255, 101, 115, 0, 255, 0, 0, 0, 0, 0, 249, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 7, version: 17, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 115, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 116, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 257, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 581, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 115, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=581] [region_id=114]
[2019/05/01 12:36:36.940 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 0, 251], lock_version: 408089892417437698, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 0, 251], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:36.956 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 0, 250], lock_version: 408089892443652106, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 0, 250], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:37.087 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=665] [region_id=144]
[2019/05/01 12:36:37.087 -07:00] [INFO] [unknown:719] ["[region 144] 665 became follower at term 0"]
[2019/05/01 12:36:37.087 -07:00] [INFO] [unknown:295] ["[region 144] 665 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:36:37.087 -07:00] [INFO] [unknown:719] ["[region 144] 665 became follower at term 1"]
[2019/05/01 12:36:37.087 -07:00] [INFO] [unknown:920] ["[region 144] 665 [term: 1] received a MsgHeartbeat message with higher term from 146 [term: 7]"]
[2019/05/01 12:36:37.087 -07:00] [INFO] [unknown:719] ["[region 144] 665 became follower at term 7"]
[2019/05/01 12:36:37.268 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 0, 254], lock_version: 408089892535402512, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 0, 254], lock_ttl: 3003, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:37.391 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 0, 254], lock_version: 408089892561616912, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 0, 254], lock_ttl: 3002, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:37.588 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 0, 253], lock_version: 408089892600938508, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 0, 253], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:37.905 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 1], lock_version: 408089892692688908, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 1], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:38.044 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 0, 253], lock_version: 408089892718903300, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 0, 253], lock_ttl: 3076, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:38.283 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 0, 253], lock_version: 408089892797546504, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 0, 253], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:38.440 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 3], lock_version: 408089892836868114, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 3], lock_ttl: 3002, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:38.523 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 0], lock_version: 408089892836868111, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 2], lock_ttl: 3070, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:38.573 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 0], lock_version: 408089892836868111, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 2], lock_ttl: 3070, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:38.710 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 3], lock_version: 408089892915511304, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 3], lock_ttl: 3002, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:38.754 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_425_7_8_(default|lock|write).sst] [snap_key=425_7_8]
[2019/05/01 12:36:38.766 -07:00] [INFO] [unknown:1792] ["[region 425] 662 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 8, term: 7]"]
[2019/05/01 12:36:38.766 -07:00] [INFO] [unknown:1816] ["[region 425] 662 restored progress of 426 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:36:38.766 -07:00] [INFO] [unknown:1816] ["[region 425] 662 restored progress of 427 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:36:38.766 -07:00] [INFO] [unknown:1816] ["[region 425] 662 restored progress of 428 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:36:38.766 -07:00] [INFO] [unknown:1816] ["[region 425] 662 restored progress of 662 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:36:38.766 -07:00] [INFO] [unknown:474] ["[region 425] 662 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 8, term: 7]"]
[2019/05/01 12:36:38.766 -07:00] [INFO] [unknown:1736] ["[region 425] 662 [commit: 8] restored snapshot [index: 8, term: 7]"]
[2019/05/01 12:36:38.766 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=662] [region_id=425]
[2019/05/01 12:36:38.766 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 8, truncated_state: Some(RaftTruncatedState { index: 8, term: 7, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 425, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 99, 111, 109, 112, 255, 108, 101, 116, 105, 255, 111, 110, 95, 255, 116, 121, 112, 101, 0, 254, 0, 0, 253], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 99, 111, 110, 99, 255, 117, 114, 114, 101, 255, 110, 116, 95, 255, 105, 110, 115, 101, 114, 255, 116, 0, 255, 0, 0, 0, 0, 0, 0, 248, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 47, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 426, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 427, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 428, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 662, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=662] [region_id=425]
[2019/05/01 12:36:38.780 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 425] 662"]
[2019/05/01 12:36:38.780 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 425, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 99, 111, 109, 112, 255, 108, 101, 116, 105, 255, 111, 110, 95, 255, 116, 121, 112, 101, 0, 254, 0, 0, 253], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 99, 111, 110, 99, 255, 117, 114, 114, 101, 255, 110, 116, 95, 255, 105, 110, 115, 101, 114, 255, 116, 0, 255, 0, 0, 0, 0, 0, 0, 248, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 47, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 426, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 427, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 428, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 662, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=662] [region_id=425]
[2019/05/01 12:36:38.780 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=425]
[2019/05/01 12:36:38.812 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=32.49283ms] [region_id=425]
[2019/05/01 12:36:38.823 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 1], lock_version: 408089892928618514, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 1], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:38.898 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 1], lock_version: 408089892928618514, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 1], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:38.905 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 1], lock_version: 408089892928618514, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 1], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:39.090 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_144_7_11_(default|lock|write).sst] [snap_key=144_7_11]
[2019/05/01 12:36:39.099 -07:00] [INFO] [unknown:1792] ["[region 144] 665 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 11, term: 7]"]
[2019/05/01 12:36:39.099 -07:00] [INFO] [unknown:1816] ["[region 144] 665 restored progress of 145 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:36:39.099 -07:00] [INFO] [unknown:1816] ["[region 144] 665 restored progress of 146 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:36:39.099 -07:00] [INFO] [unknown:1816] ["[region 144] 665 restored progress of 326 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:36:39.099 -07:00] [INFO] [unknown:1816] ["[region 144] 665 restored progress of 665 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:36:39.099 -07:00] [INFO] [unknown:474] ["[region 144] 665 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 11, term: 7]"]
[2019/05/01 12:36:39.099 -07:00] [INFO] [unknown:1736] ["[region 144] 665 [commit: 11] restored snapshot [index: 11, term: 7]"]
[2019/05/01 12:36:39.099 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=665] [region_id=144]
[2019/05/01 12:36:39.099 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 11, truncated_state: Some(RaftTruncatedState { index: 11, term: 7, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 144, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 114, 128, 0, 0, 0, 0, 255, 0, 0, 1, 0, 0, 0, 0, 0, 250], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 114, 128, 0, 0, 0, 0, 255, 0, 0, 3, 0, 0, 0, 0, 0, 250], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 18, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 145, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 146, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 326, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 665, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=665] [region_id=144]
[2019/05/01 12:36:39.115 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 144, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 114, 128, 0, 0, 0, 0, 255, 0, 0, 1, 0, 0, 0, 0, 0, 250], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 114, 128, 0, 0, 0, 0, 255, 0, 0, 3, 0, 0, 0, 0, 0, 250], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 18, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 145, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 146, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 326, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 665, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=665] [region_id=144]
[2019/05/01 12:36:39.115 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=144]
[2019/05/01 12:36:39.115 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 144] 665"]
[2019/05/01 12:36:39.156 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=40.765773ms] [region_id=144]
[2019/05/01 12:36:39.422 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 3], lock_version: 408089893085904913, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 3], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:39.512 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 6], lock_version: 408089893125226497, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 6], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:39.601 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 4], lock_version: 408089893112119307, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 7], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:39.659 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 4], lock_version: 408089893112119307, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 7], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:39.789 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 662, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=9] [term=7] [peer_id=662] [region_id=425]
[2019/05/01 12:36:39.789 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 6, version: 47, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=662] [region_id=425]
[2019/05/01 12:36:39.789 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 425, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 99, 111, 109, 112, 255, 108, 101, 116, 105, 255, 111, 110, 95, 255, 116, 121, 112, 101, 0, 254, 0, 0, 253], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 99, 111, 110, 99, 255, 117, 114, 114, 101, 255, 110, 116, 95, 255, 105, 110, 115, 101, 114, 255, 116, 0, 255, 0, 0, 0, 0, 0, 0, 248, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 47, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 426, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 427, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 428, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 662, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 662, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=662] [region_id=425]
[2019/05/01 12:36:39.961 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 426, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=10] [term=7] [peer_id=662] [region_id=425]
[2019/05/01 12:36:39.961 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 7, version: 47, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=662] [region_id=425]
[2019/05/01 12:36:39.961 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 425, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 99, 111, 109, 112, 255, 108, 101, 116, 105, 255, 111, 110, 95, 255, 116, 121, 112, 101, 0, 254, 0, 0, 253], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 99, 111, 110, 99, 255, 117, 114, 114, 101, 255, 110, 116, 95, 255, 105, 110, 115, 101, 114, 255, 116, 0, 255, 0, 0, 0, 0, 0, 0, 248, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 7, version: 47, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 426, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 427, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 428, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 662, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 426, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=662] [region_id=425]
[2019/05/01 12:36:40.110 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=667] [region_id=129]
[2019/05/01 12:36:40.111 -07:00] [INFO] [unknown:719] ["[region 129] 667 became follower at term 0"]
[2019/05/01 12:36:40.111 -07:00] [INFO] [unknown:295] ["[region 129] 667 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:36:40.111 -07:00] [INFO] [unknown:719] ["[region 129] 667 became follower at term 1"]
[2019/05/01 12:36:40.111 -07:00] [INFO] [unknown:920] ["[region 129] 667 [term: 1] received a MsgHeartbeat message with higher term from 131 [term: 7]"]
[2019/05/01 12:36:40.111 -07:00] [INFO] [unknown:719] ["[region 129] 667 became follower at term 7"]
[2019/05/01 12:36:40.155 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=666] [region_id=126]
[2019/05/01 12:36:40.155 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 665, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=12] [term=7] [peer_id=665] [region_id=144]
[2019/05/01 12:36:40.155 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 6, version: 18, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=665] [region_id=144]
[2019/05/01 12:36:40.155 -07:00] [INFO] [unknown:719] ["[region 126] 666 became follower at term 0"]
[2019/05/01 12:36:40.155 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 144, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 114, 128, 0, 0, 0, 0, 255, 0, 0, 1, 0, 0, 0, 0, 0, 250], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 114, 128, 0, 0, 0, 0, 255, 0, 0, 3, 0, 0, 0, 0, 0, 250], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 18, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 145, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 146, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 326, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 665, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 665, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=665] [region_id=144]
[2019/05/01 12:36:40.155 -07:00] [INFO] [unknown:295] ["[region 126] 666 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:36:40.155 -07:00] [INFO] [unknown:719] ["[region 126] 666 became follower at term 1"]
[2019/05/01 12:36:40.155 -07:00] [INFO] [unknown:920] ["[region 126] 666 [term: 1] received a MsgHeartbeat message with higher term from 162 [term: 7]"]
[2019/05/01 12:36:40.155 -07:00] [INFO] [unknown:719] ["[region 126] 666 became follower at term 7"]
[2019/05/01 12:36:40.209 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 145, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=13] [term=7] [peer_id=665] [region_id=144]
[2019/05/01 12:36:40.209 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 7, version: 18, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=665] [region_id=144]
[2019/05/01 12:36:40.209 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 144, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 114, 128, 0, 0, 0, 0, 255, 0, 0, 1, 0, 0, 0, 0, 0, 250], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 114, 128, 0, 0, 0, 0, 255, 0, 0, 3, 0, 0, 0, 0, 0, 250], region_epoch: Some(RegionEpoch { conf_ver: 7, version: 18, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 145, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 146, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 326, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 665, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 145, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=665] [region_id=144]
[2019/05/01 12:36:40.305 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 8], lock_version: 408089893334941698, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 8], lock_ttl: 3002, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:40.470 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 7], lock_version: 408089893348048907, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 8], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:41.054 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 9], lock_version: 408089893479120904, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 9], lock_ttl: 3003, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:41.124 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 8], lock_version: 408089893557764104, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 12], lock_ttl: 3002, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:41.276 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 12], lock_version: 408089893583978501, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 12], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:41.391 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 13], lock_version: 408089893623300100, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 13], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:41.473 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 9], lock_version: 408089893636407300, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 13], lock_ttl: 3060, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:41.751 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 16], lock_version: 408089893715050506, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 16], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:42.105 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_129_7_11_(default|lock|write).sst] [snap_key=129_7_11]
[2019/05/01 12:36:42.112 -07:00] [INFO] [unknown:1792] ["[region 129] 667 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 11, term: 7]"]
[2019/05/01 12:36:42.112 -07:00] [INFO] [unknown:1816] ["[region 129] 667 restored progress of 130 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:36:42.112 -07:00] [INFO] [unknown:1816] ["[region 129] 667 restored progress of 131 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:36:42.112 -07:00] [INFO] [unknown:1816] ["[region 129] 667 restored progress of 273 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:36:42.112 -07:00] [INFO] [unknown:1816] ["[region 129] 667 restored progress of 667 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:36:42.112 -07:00] [INFO] [unknown:474] ["[region 129] 667 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 11, term: 7]"]
[2019/05/01 12:36:42.112 -07:00] [INFO] [unknown:1736] ["[region 129] 667 [commit: 11] restored snapshot [index: 11, term: 7]"]
[2019/05/01 12:36:42.112 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=667] [region_id=129]
[2019/05/01 12:36:42.112 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 11, truncated_state: Some(RaftTruncatedState { index: 11, term: 7, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 129, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 116, 105, 100, 98, 255, 95, 115, 101, 114, 255, 118, 101, 114, 255, 95, 118, 101, 114, 115, 255, 105, 111, 255, 110, 0, 0, 0, 0, 0, 250, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 116, 105, 107, 118, 255, 95, 103, 99, 95, 255, 101, 110, 97, 255, 98, 108, 101, 0, 0, 253, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 18, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 130, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 131, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 273, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 667, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=667] [region_id=129]
[2019/05/01 12:36:42.127 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 129] 667"]
[2019/05/01 12:36:42.128 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 129, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 116, 105, 100, 98, 255, 95, 115, 101, 114, 255, 118, 101, 114, 255, 95, 118, 101, 114, 115, 255, 105, 111, 255, 110, 0, 0, 0, 0, 0, 250, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 116, 105, 107, 118, 255, 95, 103, 99, 95, 255, 101, 110, 97, 255, 98, 108, 101, 0, 0, 253, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 18, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 130, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 131, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 273, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 667, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=667] [region_id=129]
[2019/05/01 12:36:42.128 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=129]
[2019/05/01 12:36:42.138 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_126_7_11_(default|lock|write).sst] [snap_key=126_7_11]
[2019/05/01 12:36:42.144 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=16.166602ms] [region_id=129]
[2019/05/01 12:36:42.144 -07:00] [INFO] [unknown:1792] ["[region 126] 666 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 11, term: 7]"]
[2019/05/01 12:36:42.144 -07:00] [INFO] [unknown:1816] ["[region 126] 666 restored progress of 127 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:36:42.144 -07:00] [INFO] [unknown:1816] ["[region 126] 666 restored progress of 128 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:36:42.144 -07:00] [INFO] [unknown:1816] ["[region 126] 666 restored progress of 162 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:36:42.144 -07:00] [INFO] [unknown:1816] ["[region 126] 666 restored progress of 666 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:36:42.144 -07:00] [INFO] [unknown:474] ["[region 126] 666 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 11, term: 7]"]
[2019/05/01 12:36:42.144 -07:00] [INFO] [unknown:1736] ["[region 126] 666 [commit: 11] restored snapshot [index: 11, term: 7]"]
[2019/05/01 12:36:42.144 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=666] [region_id=126]
[2019/05/01 12:36:42.144 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 11, truncated_state: Some(RaftTruncatedState { index: 11, term: 7, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 126, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 116, 105, 100, 98, 255, 95, 115, 101, 114, 255, 118, 101, 114, 255, 95, 118, 101, 114, 115, 255, 105, 111, 255, 110, 0, 0, 0, 0, 0, 250, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 18, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 127, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 128, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 162, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 666, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=666] [region_id=126]
[2019/05/01 12:36:42.160 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 126] 666"]
[2019/05/01 12:36:42.160 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 126, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 116, 105, 100, 98, 255, 95, 115, 101, 114, 255, 118, 101, 114, 255, 95, 118, 101, 114, 115, 255, 105, 111, 255, 110, 0, 0, 0, 0, 0, 250, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 18, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 127, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 128, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 162, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 666, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=666] [region_id=126]
[2019/05/01 12:36:42.160 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=126]
[2019/05/01 12:36:42.178 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=17.635925ms] [region_id=126]
[2019/05/01 12:36:42.332 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 12], lock_version: 408089893819908103, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 16], lock_ttl: 3080, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:42.334 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 14], lock_version: 408089893859229704, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 14], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:42.382 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 19], lock_version: 408089893885444104, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 19], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:42.482 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 17], lock_version: 408089893898551311, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 17], lock_ttl: 3002, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:42.503 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 13], lock_version: 408089893872336901, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 16], lock_ttl: 3080, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:42.520 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 19], lock_version: 408089893911658497, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 19], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:42.771 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 13], lock_version: 408089893977194499, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 18], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:42.799 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 13], lock_version: 408089893977194499, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 18], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:42.820 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 17], lock_version: 408089893950980108, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 17], lock_ttl: 3057, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:43.158 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 667, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=12] [term=7] [peer_id=667] [region_id=129]
[2019/05/01 12:36:43.158 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 6, version: 18, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=667] [region_id=129]
[2019/05/01 12:36:43.158 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 129, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 116, 105, 100, 98, 255, 95, 115, 101, 114, 255, 118, 101, 114, 255, 95, 118, 101, 114, 115, 255, 105, 111, 255, 110, 0, 0, 0, 0, 0, 250, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 116, 105, 107, 118, 255, 95, 103, 99, 95, 255, 101, 110, 97, 255, 98, 108, 101, 0, 0, 253, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 18, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 130, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 131, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 273, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 667, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 667, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=667] [region_id=129]
[2019/05/01 12:36:43.192 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 666, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=12] [term=7] [peer_id=666] [region_id=126]
[2019/05/01 12:36:43.192 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 6, version: 18, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=666] [region_id=126]
[2019/05/01 12:36:43.192 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 126, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 116, 105, 100, 98, 255, 95, 115, 101, 114, 255, 118, 101, 114, 255, 95, 118, 101, 114, 115, 255, 105, 111, 255, 110, 0, 0, 0, 0, 0, 250, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 18, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 127, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 128, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 162, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 666, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 666, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=666] [region_id=126]
[2019/05/01 12:36:43.236 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 130, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=13] [term=7] [peer_id=667] [region_id=129]
[2019/05/01 12:36:43.236 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 7, version: 18, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=667] [region_id=129]
[2019/05/01 12:36:43.236 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 129, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 116, 105, 100, 98, 255, 95, 115, 101, 114, 255, 118, 101, 114, 255, 95, 118, 101, 114, 115, 255, 105, 111, 255, 110, 0, 0, 0, 0, 0, 250, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 116, 105, 107, 118, 255, 95, 103, 99, 95, 255, 101, 110, 97, 255, 98, 108, 101, 0, 0, 253, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 7, version: 18, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 130, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 131, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 273, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 667, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 130, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=667] [region_id=129]
[2019/05/01 12:36:43.294 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 127, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=13] [term=7] [peer_id=666] [region_id=126]
[2019/05/01 12:36:43.294 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 7, version: 18, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=666] [region_id=126]
[2019/05/01 12:36:43.294 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 126, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 116, 105, 100, 98, 255, 95, 115, 101, 114, 255, 118, 101, 114, 255, 95, 118, 101, 114, 115, 255, 105, 111, 255, 110, 0, 0, 0, 0, 0, 250, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 7, version: 18, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 127, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 128, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 162, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 666, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 127, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=666] [region_id=126]
[2019/05/01 12:36:43.967 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=670] [region_id=513]
[2019/05/01 12:36:43.967 -07:00] [INFO] [unknown:719] ["[region 513] 670 became follower at term 0"]
[2019/05/01 12:36:43.967 -07:00] [INFO] [unknown:295] ["[region 513] 670 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:36:43.967 -07:00] [INFO] [unknown:719] ["[region 513] 670 became follower at term 1"]
[2019/05/01 12:36:43.967 -07:00] [INFO] [unknown:920] ["[region 513] 670 [term: 1] received a MsgHeartbeat message with higher term from 514 [term: 6]"]
[2019/05/01 12:36:43.967 -07:00] [INFO] [unknown:719] ["[region 513] 670 became follower at term 6"]
[2019/05/01 12:36:43.980 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=671] [region_id=529]
[2019/05/01 12:36:43.980 -07:00] [INFO] [unknown:719] ["[region 529] 671 became follower at term 0"]
[2019/05/01 12:36:43.980 -07:00] [INFO] [unknown:295] ["[region 529] 671 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:36:43.980 -07:00] [INFO] [unknown:719] ["[region 529] 671 became follower at term 1"]
[2019/05/01 12:36:43.980 -07:00] [INFO] [unknown:920] ["[region 529] 671 [term: 1] received a MsgHeartbeat message with higher term from 530 [term: 6]"]
[2019/05/01 12:36:43.980 -07:00] [INFO] [unknown:719] ["[region 529] 671 became follower at term 6"]
[2019/05/01 12:36:44.004 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 18], lock_version: 408089894239338499, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 21], lock_ttl: 3009, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:44.103 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 18], lock_version: 408089894239338499, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 21], lock_ttl: 3009, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:44.168 -07:00] [INFO] [keys.rs:155] ["approximate keys over threshold, need to do split check"] [threshold=5] [keys=5196] [region_id=4]
[2019/05/01 12:36:44.210 -07:00] [INFO] [peer.rs:294] ["on split"] [split_keys="10 keys range from \"t\\200\\000\\000\\000\\000\\000\\000\\377l_r\\200\\000\\000\\000\\000\\377\\000\\000\\002\\000\\000\\000\\000\\000\\372\\372V,j\\263w\\377\\374\" to \"t\\200\\000\\000\\000\\000\\000\\000\\377l_r\\200\\000\\000\\000\\000\\377\\000\\000\\003\\000\\000\\000\\000\\000\\372\\372V,j\\277/\\377\\376\""] [peer_id=393] [region_id=4]
[2019/05/01 12:36:44.210 -07:00] [INFO] [pd.rs:285] ["try to batch split region"] [region="Region { id: 4, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 108, 95, 114, 128, 0, 0, 0, 0, 255, 0, 0, 2, 0, 0, 0, 0, 0, 250], end_key: [], region_epoch: Some(RegionEpoch { conf_ver: 5, version: 22, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 5, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 386, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 393, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [new_region_ids="[SplitID { new_region_id: 713, new_peer_ids: [714, 715, 716], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, SplitID { new_region_id: 717, new_peer_ids: [718, 719, 720], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, SplitID { new_region_id: 721, new_peer_ids: [722, 723, 724], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, SplitID { new_region_id: 725, new_peer_ids: [726, 727, 728], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, SplitID { new_region_id: 729, new_peer_ids: [730, 731, 732], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, SplitID { new_region_id: 733, new_peer_ids: [734, 735, 736], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, SplitID { new_region_id: 737, new_peer_ids: [738, 739, 740], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, SplitID { new_region_id: 741, new_peer_ids: [742, 743, 744], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, SplitID { new_region_id: 745, new_peer_ids: [746, 747, 748], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, SplitID { new_region_id: 749, new_peer_ids: [750, 751, 752], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }]"] [region_id=4]
[2019/05/01 12:36:44.218 -07:00] [WARN] [split_observer.rs:98] ["invalid key, skip"] [err="\"key \\\"t\\\\200\\\\000\\\\000\\\\000\\\\000\\\\000\\\\000\\\\377l_r\\\\200\\\\000\\\\000\\\\000\\\\000\\\\377\\\\000\\\\000\\\\002\\\\000\\\\000\\\\000\\\\000\\\\000\\\\372\\\" should be in (\\\"t\\\\200\\\\000\\\\000\\\\000\\\\000\\\\000\\\\000\\\\377l_r\\\\200\\\\000\\\\000\\\\000\\\\000\\\\377\\\\000\\\\000\\\\002\\\\000\\\\000\\\\000\\\\000\\\\000\\\\372\\\", \\\"\\\")\""] [index=0] [region_id=4]
[2019/05/01 12:36:44.218 -07:00] [WARN] [split_observer.rs:98] ["invalid key, skip"] [err="\"key \\\"t\\\\200\\\\000\\\\000\\\\000\\\\000\\\\000\\\\000\\\\377l_r\\\\200\\\\000\\\\000\\\\000\\\\000\\\\377\\\\000\\\\000\\\\002\\\\000\\\\000\\\\000\\\\000\\\\000\\\\372\\\" should be in (\\\"t\\\\200\\\\000\\\\000\\\\000\\\\000\\\\000\\\\000\\\\377l_r\\\\200\\\\000\\\\000\\\\000\\\\000\\\\377\\\\000\\\\000\\\\002\\\\000\\\\000\\\\000\\\\000\\\\000\\\\372\\\", \\\"\\\")\""] [index=1] [region_id=4]
[2019/05/01 12:36:44.218 -07:00] [WARN] [split_observer.rs:98] ["invalid key, skip"] [err="\"key \\\"t\\\\200\\\\000\\\\000\\\\000\\\\000\\\\000\\\\000\\\\377l_r\\\\200\\\\000\\\\000\\\\000\\\\000\\\\377\\\\000\\\\000\\\\002\\\\000\\\\000\\\\000\\\\000\\\\000\\\\372\\\" should be in (\\\"t\\\\200\\\\000\\\\000\\\\000\\\\000\\\\000\\\\000\\\\377l_r\\\\200\\\\000\\\\000\\\\000\\\\000\\\\377\\\\000\\\\000\\\\002\\\\000\\\\000\\\\000\\\\000\\\\000\\\\372\\\", \\\"\\\")\""] [index=2] [region_id=4]
[2019/05/01 12:36:44.218 -07:00] [WARN] [split_observer.rs:98] ["invalid key, skip"] [err="\"key \\\"t\\\\200\\\\000\\\\000\\\\000\\\\000\\\\000\\\\000\\\\377l_r\\\\200\\\\000\\\\000\\\\000\\\\000\\\\377\\\\000\\\\000\\\\002\\\\000\\\\000\\\\000\\\\000\\\\000\\\\372\\\" should be in (\\\"t\\\\200\\\\000\\\\000\\\\000\\\\000\\\\000\\\\000\\\\377l_r\\\\200\\\\000\\\\000\\\\000\\\\000\\\\377\\\\000\\\\000\\\\002\\\\000\\\\000\\\\000\\\\000\\\\000\\\\372\\\", \\\"\\\")\""] [index=3] [region_id=4]
[2019/05/01 12:36:44.218 -07:00] [WARN] [split_observer.rs:98] ["invalid key, skip"] [err="\"key \\\"t\\\\200\\\\000\\\\000\\\\000\\\\000\\\\000\\\\000\\\\377l_r\\\\200\\\\000\\\\000\\\\000\\\\000\\\\377\\\\000\\\\000\\\\002\\\\000\\\\000\\\\000\\\\000\\\\000\\\\372\\\" should be in (\\\"t\\\\200\\\\000\\\\000\\\\000\\\\000\\\\000\\\\000\\\\377l_r\\\\200\\\\000\\\\000\\\\000\\\\000\\\\377\\\\000\\\\000\\\\002\\\\000\\\\000\\\\000\\\\000\\\\000\\\\372\\\", \\\"\\\")\""] [index=4] [region_id=4]
[2019/05/01 12:36:44.218 -07:00] [WARN] [split_observer.rs:98] ["invalid key, skip"] [err="\"key \\\"t\\\\200\\\\000\\\\000\\\\000\\\\000\\\\000\\\\000\\\\377l_r\\\\200\\\\000\\\\000\\\\000\\\\000\\\\377\\\\000\\\\000\\\\002\\\\000\\\\000\\\\000\\\\000\\\\000\\\\372\\\" should be in (\\\"t\\\\200\\\\000\\\\000\\\\000\\\\000\\\\000\\\\000\\\\377l_r\\\\200\\\\000\\\\000\\\\000\\\\000\\\\377\\\\000\\\\000\\\\002\\\\000\\\\000\\\\000\\\\000\\\\000\\\\372\\\", \\\"\\\")\""] [index=5] [region_id=4]
[2019/05/01 12:36:44.218 -07:00] [WARN] [split_observer.rs:98] ["invalid key, skip"] [err="\"key \\\"t\\\\200\\\\000\\\\000\\\\000\\\\000\\\\000\\\\000\\\\377l_r\\\\200\\\\000\\\\000\\\\000\\\\000\\\\377\\\\000\\\\000\\\\002\\\\000\\\\000\\\\000\\\\000\\\\000\\\\372\\\" should be in (\\\"t\\\\200\\\\000\\\\000\\\\000\\\\000\\\\000\\\\000\\\\377l_r\\\\200\\\\000\\\\000\\\\000\\\\000\\\\377\\\\000\\\\000\\\\002\\\\000\\\\000\\\\000\\\\000\\\\000\\\\372\\\", \\\"\\\")\""] [index=6] [region_id=4]
[2019/05/01 12:36:44.218 -07:00] [WARN] [split_observer.rs:98] ["invalid key, skip"] [err="\"key \\\"t\\\\200\\\\000\\\\000\\\\000\\\\000\\\\000\\\\000\\\\377l_r\\\\200\\\\000\\\\000\\\\000\\\\000\\\\377\\\\000\\\\000\\\\002\\\\000\\\\000\\\\000\\\\000\\\\000\\\\372\\\" should be in (\\\"t\\\\200\\\\000\\\\000\\\\000\\\\000\\\\000\\\\000\\\\377l_r\\\\200\\\\000\\\\000\\\\000\\\\000\\\\377\\\\000\\\\000\\\\002\\\\000\\\\000\\\\000\\\\000\\\\000\\\\372\\\", \\\"\\\")\""] [index=7] [region_id=4]
[2019/05/01 12:36:44.218 -07:00] [WARN] [split_observer.rs:85] ["key is not larger than previous, skip."] [index=9] [previous=7480000000000000FF6C5F728000000000FF0000030000000000FA] [key=7480000000000000FF6C5F728000000000FF0000030000000000FA] [region_id=4]
[2019/05/01 12:36:44.234 -07:00] [INFO] [keys.rs:155] ["approximate keys over threshold, need to do split check"] [threshold=5] [keys=2090] [region_id=650]
[2019/05/01 12:36:44.235 -07:00] [INFO] [peer.rs:294] ["on split"] [split_keys="6 keys range from \"t\\200\\000\\000\\000\\000\\000\\000\\377l_r\\200\\000\\000\\000\\000\\377\\000\\000\\001\\000\\000\\000\\000\\000\\372\\372V,j\\261\\347\\377\\360\" to \"t\\200\\000\\000\\000\\000\\000\\000\\377l_r\\200\\000\\000\\000\\000\\377\\000\\000\\001\\000\\000\\000\\000\\000\\372\\372V,j\\303\\337\\377\\375\""] [peer_id=653] [region_id=650]
[2019/05/01 12:36:44.235 -07:00] [INFO] [pd.rs:285] ["try to batch split region"] [region="Region { id: 650, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 108, 95, 114, 128, 0, 0, 0, 0, 255, 0, 0, 1, 0, 0, 0, 0, 0, 250], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 108, 95, 114, 128, 0, 0, 0, 0, 255, 0, 0, 2, 0, 0, 0, 0, 0, 250], region_epoch: Some(RegionEpoch { conf_ver: 5, version: 22, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 651, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 652, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 653, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [new_region_ids="[SplitID { new_region_id: 753, new_peer_ids: [754, 755, 756], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, SplitID { new_region_id: 757, new_peer_ids: [758, 759, 760], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, SplitID { new_region_id: 761, new_peer_ids: [762, 763, 764], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, SplitID { new_region_id: 765, new_peer_ids: [766, 767, 768], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, SplitID { new_region_id: 769, new_peer_ids: [770, 771, 772], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, SplitID { new_region_id: 773, new_peer_ids: [774, 775, 776], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }]"] [region_id=650]
[2019/05/01 12:36:44.235 -07:00] [WARN] [split_observer.rs:98] ["invalid key, skip"] [err="\"key \\\"t\\\\200\\\\000\\\\000\\\\000\\\\000\\\\000\\\\000\\\\377l_r\\\\200\\\\000\\\\000\\\\000\\\\000\\\\377\\\\000\\\\000\\\\001\\\\000\\\\000\\\\000\\\\000\\\\000\\\\372\\\" should be in (\\\"t\\\\200\\\\000\\\\000\\\\000\\\\000\\\\000\\\\000\\\\377l_r\\\\200\\\\000\\\\000\\\\000\\\\000\\\\377\\\\000\\\\000\\\\001\\\\000\\\\000\\\\000\\\\000\\\\000\\\\372\\\", \\\"t\\\\200\\\\000\\\\000\\\\000\\\\000\\\\000\\\\000\\\\377l_r\\\\200\\\\000\\\\000\\\\000\\\\000\\\\377\\\\000\\\\000\\\\002\\\\000\\\\000\\\\000\\\\000\\\\000\\\\372\\\")\""] [index=0] [region_id=650]
[2019/05/01 12:36:44.235 -07:00] [WARN] [split_observer.rs:98] ["invalid key, skip"] [err="\"key \\\"t\\\\200\\\\000\\\\000\\\\000\\\\000\\\\000\\\\000\\\\377l_r\\\\200\\\\000\\\\000\\\\000\\\\000\\\\377\\\\000\\\\000\\\\001\\\\000\\\\000\\\\000\\\\000\\\\000\\\\372\\\" should be in (\\\"t\\\\200\\\\000\\\\000\\\\000\\\\000\\\\000\\\\000\\\\377l_r\\\\200\\\\000\\\\000\\\\000\\\\000\\\\377\\\\000\\\\000\\\\001\\\\000\\\\000\\\\000\\\\000\\\\000\\\\372\\\", \\\"t\\\\200\\\\000\\\\000\\\\000\\\\000\\\\000\\\\000\\\\377l_r\\\\200\\\\000\\\\000\\\\000\\\\000\\\\377\\\\000\\\\000\\\\002\\\\000\\\\000\\\\000\\\\000\\\\000\\\\372\\\")\""] [index=1] [region_id=650]
[2019/05/01 12:36:44.235 -07:00] [WARN] [split_observer.rs:98] ["invalid key, skip"] [err="\"key \\\"t\\\\200\\\\000\\\\000\\\\000\\\\000\\\\000\\\\000\\\\377l_r\\\\200\\\\000\\\\000\\\\000\\\\000\\\\377\\\\000\\\\000\\\\001\\\\000\\\\000\\\\000\\\\000\\\\000\\\\372\\\" should be in (\\\"t\\\\200\\\\000\\\\000\\\\000\\\\000\\\\000\\\\000\\\\377l_r\\\\200\\\\000\\\\000\\\\000\\\\000\\\\377\\\\000\\\\000\\\\001\\\\000\\\\000\\\\000\\\\000\\\\000\\\\372\\\", \\\"t\\\\200\\\\000\\\\000\\\\000\\\\000\\\\000\\\\000\\\\377l_r\\\\200\\\\000\\\\000\\\\000\\\\000\\\\377\\\\000\\\\000\\\\002\\\\000\\\\000\\\\000\\\\000\\\\000\\\\372\\\")\""] [index=2] [region_id=650]
[2019/05/01 12:36:44.235 -07:00] [WARN] [split_observer.rs:98] ["invalid key, skip"] [err="\"key \\\"t\\\\200\\\\000\\\\000\\\\000\\\\000\\\\000\\\\000\\\\377l_r\\\\200\\\\000\\\\000\\\\000\\\\000\\\\377\\\\000\\\\000\\\\001\\\\000\\\\000\\\\000\\\\000\\\\000\\\\372\\\" should be in (\\\"t\\\\200\\\\000\\\\000\\\\000\\\\000\\\\000\\\\000\\\\377l_r\\\\200\\\\000\\\\000\\\\000\\\\000\\\\377\\\\000\\\\000\\\\001\\\\000\\\\000\\\\000\\\\000\\\\000\\\\372\\\", \\\"t\\\\200\\\\000\\\\000\\\\000\\\\000\\\\000\\\\000\\\\377l_r\\\\200\\\\000\\\\000\\\\000\\\\000\\\\377\\\\000\\\\000\\\\002\\\\000\\\\000\\\\000\\\\000\\\\000\\\\372\\\")\""] [index=3] [region_id=650]
[2019/05/01 12:36:44.235 -07:00] [WARN] [split_observer.rs:98] ["invalid key, skip"] [err="\"key \\\"t\\\\200\\\\000\\\\000\\\\000\\\\000\\\\000\\\\000\\\\377l_r\\\\200\\\\000\\\\000\\\\000\\\\000\\\\377\\\\000\\\\000\\\\001\\\\000\\\\000\\\\000\\\\000\\\\000\\\\372\\\" should be in (\\\"t\\\\200\\\\000\\\\000\\\\000\\\\000\\\\000\\\\000\\\\377l_r\\\\200\\\\000\\\\000\\\\000\\\\000\\\\377\\\\000\\\\000\\\\001\\\\000\\\\000\\\\000\\\\000\\\\000\\\\372\\\", \\\"t\\\\200\\\\000\\\\000\\\\000\\\\000\\\\000\\\\000\\\\377l_r\\\\200\\\\000\\\\000\\\\000\\\\000\\\\377\\\\000\\\\000\\\\002\\\\000\\\\000\\\\000\\\\000\\\\000\\\\372\\\")\""] [index=4] [region_id=650]
[2019/05/01 12:36:44.235 -07:00] [WARN] [split_observer.rs:98] ["invalid key, skip"] [err="\"key \\\"t\\\\200\\\\000\\\\000\\\\000\\\\000\\\\000\\\\000\\\\377l_r\\\\200\\\\000\\\\000\\\\000\\\\000\\\\377\\\\000\\\\000\\\\001\\\\000\\\\000\\\\000\\\\000\\\\000\\\\372\\\" should be in (\\\"t\\\\200\\\\000\\\\000\\\\000\\\\000\\\\000\\\\000\\\\377l_r\\\\200\\\\000\\\\000\\\\000\\\\000\\\\377\\\\000\\\\000\\\\001\\\\000\\\\000\\\\000\\\\000\\\\000\\\\372\\\", \\\"t\\\\200\\\\000\\\\000\\\\000\\\\000\\\\000\\\\000\\\\377l_r\\\\200\\\\000\\\\000\\\\000\\\\000\\\\377\\\\000\\\\000\\\\002\\\\000\\\\000\\\\000\\\\000\\\\000\\\\372\\\")\""] [index=5] [region_id=650]
[2019/05/01 12:36:44.235 -07:00] [ERROR] [split_observer.rs:161] ["failed to handle split req"] [err="\"no valid key found for split.\""] [region_id=650]
[2019/05/01 12:36:44.235 -07:00] [WARN] [peer.rs:1846] ["skip proposal"] [err="Coprocessor(Other(StringError(\"[src/raftstore/coprocessor/split_observer.rs:166]: no valid key found for split.\")))"] [peer_id=653] [region_id=650]
[2019/05/01 12:36:44.245 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 18], lock_version: 408089894239338499, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 21], lock_ttl: 3009, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:44.253 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: BatchSplit, change_peer: None, split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: Some(BatchSplitRequest { requests: [SplitRequest { split_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 108, 95, 114, 128, 0, 0, 0, 0, 255, 0, 0, 3, 0, 0, 0, 0, 0, 250], new_region_id: 745, new_peer_ids: [746, 747, 748], right_derive: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], right_derive: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=4816] [term=7] [peer_id=393] [region_id=4]
[2019/05/01 12:36:44.253 -07:00] [INFO] [apply.rs:1582] ["split region"] [keys="[[116, 128, 0, 0, 0, 0, 0, 0, 255, 108, 95, 114, 128, 0, 0, 0, 0, 255, 0, 0, 3, 0, 0, 0, 0, 0, 250]]"] [region="Region { id: 4, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 108, 95, 114, 128, 0, 0, 0, 0, 255, 0, 0, 2, 0, 0, 0, 0, 0, 250], end_key: [], region_epoch: Some(RegionEpoch { conf_ver: 5, version: 22, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 5, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 386, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 393, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=393] [region_id=4]
[2019/05/01 12:36:44.261 -07:00] [INFO] [peer.rs:1382] ["notify pd with split"] [split_count=2] [peer_id=393] [region_id=4]
[2019/05/01 12:36:44.261 -07:00] [INFO] [peer.rs:1424] ["insert new region"] [region="Region { id: 745, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 108, 95, 114, 128, 0, 0, 0, 0, 255, 0, 0, 2, 0, 0, 0, 0, 0, 250], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 108, 95, 114, 128, 0, 0, 0, 0, 255, 0, 0, 3, 0, 0, 0, 0, 0, 250], region_epoch: Some(RegionEpoch { conf_ver: 5, version: 23, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 746, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 747, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 748, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region_id=745]
[2019/05/01 12:36:44.261 -07:00] [INFO] [peer.rs:127] ["create peer"] [peer_id=748] [region_id=745]
[2019/05/01 12:36:44.261 -07:00] [INFO] [unknown:719] ["[region 745] 748 became follower at term 5"]
[2019/05/01 12:36:44.261 -07:00] [INFO] [unknown:295] ["[region 745] 748 newRaft [peers: [746, 747, 748], term: 5, commit: 5, applied: 5, last_index: 5, last_term: 5]"]
[2019/05/01 12:36:44.261 -07:00] [INFO] [unknown:1022] ["[region 745] 748 is starting a new election at term 5"]
[2019/05/01 12:36:44.261 -07:00] [INFO] [unknown:761] ["[region 745] 748 became pre-candidate at term 5"]
[2019/05/01 12:36:44.261 -07:00] [INFO] [unknown:854] ["[region 745] 748 received MsgRequestPreVoteResponse from 748 at term 5"]
[2019/05/01 12:36:44.261 -07:00] [INFO] [unknown:828] ["[region 745] 748 [logterm: 5, index: 5] sent MsgRequestPreVote request to 747 at term 5"]
[2019/05/01 12:36:44.261 -07:00] [INFO] [unknown:828] ["[region 745] 748 [logterm: 5, index: 5] sent MsgRequestPreVote request to 746 at term 5"]
[2019/05/01 12:36:44.261 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 745] 748"]
[2019/05/01 12:36:44.261 -07:00] [ERROR] [process.rs:169] ["get snapshot failed"] [err="Request(Error { message: \"region epoch is not match\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: Some(EpochNotMatch { current_regions: [Region { id: 4, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 108, 95, 114, 128, 0, 0, 0, 0, 255, 0, 0, 3, 0, 0, 0, 0, 0, 250], end_key: [], region_epoch: Some(RegionEpoch { conf_ver: 5, version: 23, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 5, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 386, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 393, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Region { id: 745, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 108, 95, 114, 128, 0, 0, 0, 0, 255, 0, 0, 2, 0, 0, 0, 0, 0, 250], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 108, 95, 114, 128, 0, 0, 0, 0, 255, 0, 0, 3, 0, 0, 0, 0, 0, 250], region_epoch: Some(RegionEpoch { conf_ver: 5, version: 23, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 746, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 747, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 748, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), server_is_busy: None, stale_command: None, store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } })"] [cid=2385]
[2019/05/01 12:36:44.261 -07:00] [ERROR] [process.rs:169] ["get snapshot failed"] [err="Request(Error { message: \"region epoch is not match\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: Some(EpochNotMatch { current_regions: [Region { id: 4, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 108, 95, 114, 128, 0, 0, 0, 0, 255, 0, 0, 3, 0, 0, 0, 0, 0, 250], end_key: [], region_epoch: Some(RegionEpoch { conf_ver: 5, version: 23, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 5, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 386, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 393, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Region { id: 745, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 108, 95, 114, 128, 0, 0, 0, 0, 255, 0, 0, 2, 0, 0, 0, 0, 0, 250], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 108, 95, 114, 128, 0, 0, 0, 0, 255, 0, 0, 3, 0, 0, 0, 0, 0, 250], region_epoch: Some(RegionEpoch { conf_ver: 5, version: 23, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 746, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 747, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 748, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), server_is_busy: None, stale_command: None, store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } })"] [cid=2390]
[2019/05/01 12:36:44.261 -07:00] [ERROR] [process.rs:169] ["get snapshot failed"] [err="Request(Error { message: \"region epoch is not match\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: Some(EpochNotMatch { current_regions: [Region { id: 4, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 108, 95, 114, 128, 0, 0, 0, 0, 255, 0, 0, 3, 0, 0, 0, 0, 0, 250], end_key: [], region_epoch: Some(RegionEpoch { conf_ver: 5, version: 23, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 5, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 386, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 393, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Region { id: 745, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 108, 95, 114, 128, 0, 0, 0, 0, 255, 0, 0, 2, 0, 0, 0, 0, 0, 250], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 108, 95, 114, 128, 0, 0, 0, 0, 255, 0, 0, 3, 0, 0, 0, 0, 0, 250], region_epoch: Some(RegionEpoch { conf_ver: 5, version: 23, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 746, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 747, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 748, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), server_is_busy: None, stale_command: None, store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } })"] [cid=2386]
[2019/05/01 12:36:44.261 -07:00] [ERROR] [process.rs:169] ["get snapshot failed"] [err="Request(Error { message: \"region epoch is not match\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: Some(EpochNotMatch { current_regions: [Region { id: 4, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 108, 95, 114, 128, 0, 0, 0, 0, 255, 0, 0, 3, 0, 0, 0, 0, 0, 250], end_key: [], region_epoch: Some(RegionEpoch { conf_ver: 5, version: 23, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 5, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 386, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 393, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Region { id: 745, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 108, 95, 114, 128, 0, 0, 0, 0, 255, 0, 0, 2, 0, 0, 0, 0, 0, 250], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 108, 95, 114, 128, 0, 0, 0, 0, 255, 0, 0, 3, 0, 0, 0, 0, 0, 250], region_epoch: Some(RegionEpoch { conf_ver: 5, version: 23, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 746, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 747, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 748, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), server_is_busy: None, stale_command: None, store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } })"] [cid=2389]
[2019/05/01 12:36:44.261 -07:00] [INFO] [unknown:854] ["[region 745] 748 received MsgRequestPreVoteResponse from 747 at term 5"]
[2019/05/01 12:36:44.261 -07:00] [INFO] [unknown:1550] ["[region 745] 748 [quorum:2] has received 2 MsgRequestPreVoteResponse votes and 0 vote rejections"]
[2019/05/01 12:36:44.261 -07:00] [INFO] [unknown:739] ["[region 745] 748 became candidate at term 6"]
[2019/05/01 12:36:44.261 -07:00] [INFO] [unknown:854] ["[region 745] 748 received MsgRequestVoteResponse from 748 at term 6"]
[2019/05/01 12:36:44.261 -07:00] [INFO] [unknown:828] ["[region 745] 748 [logterm: 5, index: 5] sent MsgRequestVote request to 747 at term 6"]
[2019/05/01 12:36:44.261 -07:00] [INFO] [unknown:828] ["[region 745] 748 [logterm: 5, index: 5] sent MsgRequestVote request to 746 at term 6"]
[2019/05/01 12:36:44.321 -07:00] [INFO] [unknown:854] ["[region 745] 748 received MsgRequestVoteResponse from 747 at term 6"]
[2019/05/01 12:36:44.321 -07:00] [INFO] [unknown:1550] ["[region 745] 748 [quorum:2] has received 2 MsgRequestVoteResponse votes and 0 vote rejections"]
[2019/05/01 12:36:44.321 -07:00] [INFO] [unknown:789] ["[region 745] 748 became leader at term 6"]
[2019/05/01 12:36:44.599 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 20], lock_version: 408089894462160897, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 21], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:44.665 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 23], lock_version: 408089894475268106, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 23], lock_ttl: 3002, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:44.788 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 26], lock_version: 408089894488375308, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 26], lock_ttl: 3093, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:44.816 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 26], lock_version: 408089894488375308, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 26], lock_ttl: 3093, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:45.259 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 25], lock_version: 408089894606340102, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 25], lock_ttl: 3059, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:45.974 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 28], lock_version: 408089894711197704, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 28], lock_ttl: 3278, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:45.980 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_513_6_7_(default|lock|write).sst] [snap_key=513_6_7]
[2019/05/01 12:36:45.995 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_529_6_7_(default|lock|write).sst] [snap_key=529_6_7]
[2019/05/01 12:36:46.006 -07:00] [INFO] [unknown:1792] ["[region 513] 670 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 7, term: 6]"]
[2019/05/01 12:36:46.006 -07:00] [INFO] [unknown:1816] ["[region 513] 670 restored progress of 514 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:36:46.006 -07:00] [INFO] [unknown:1816] ["[region 513] 670 restored progress of 515 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:36:46.006 -07:00] [INFO] [unknown:1816] ["[region 513] 670 restored progress of 516 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:36:46.006 -07:00] [INFO] [unknown:1816] ["[region 513] 670 restored progress of 670 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:36:46.006 -07:00] [INFO] [unknown:474] ["[region 513] 670 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 7, term: 6]"]
[2019/05/01 12:36:46.006 -07:00] [INFO] [unknown:1736] ["[region 513] 670 [commit: 7] restored snapshot [index: 7, term: 6]"]
[2019/05/01 12:36:46.006 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=670] [region_id=513]
[2019/05/01 12:36:46.006 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 7, truncated_state: Some(RaftTruncatedState { index: 7, term: 6, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 513, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 101, 110, 100, 95, 255, 109, 97, 114, 107, 255, 101, 114, 115, 255, 95, 105, 110, 95, 106, 255, 115, 111, 255, 110, 0, 0, 0, 0, 0, 250, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 101, 110, 102, 111, 255, 114, 99, 101, 95, 255, 103, 116, 105, 255, 100, 95, 99, 111, 110, 255, 115, 105, 255, 115, 116, 101, 110, 99, 121, 255, 0, 255, 0, 0, 0, 0, 0, 0, 0, 247, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 67, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 514, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 515, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 516, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 670, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=670] [region_id=513]
[2019/05/01 12:36:46.035 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 28], lock_version: 408089894711197704, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 28], lock_ttl: 3278, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:46.051 -07:00] [INFO] [unknown:1792] ["[region 529] 671 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 7, term: 6]"]
[2019/05/01 12:36:46.051 -07:00] [INFO] [unknown:1816] ["[region 529] 671 restored progress of 530 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:36:46.051 -07:00] [INFO] [unknown:1816] ["[region 529] 671 restored progress of 531 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:36:46.051 -07:00] [INFO] [unknown:1816] ["[region 529] 671 restored progress of 532 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:36:46.051 -07:00] [INFO] [unknown:1816] ["[region 529] 671 restored progress of 671 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:36:46.051 -07:00] [INFO] [unknown:474] ["[region 529] 671 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 7, term: 6]"]
[2019/05/01 12:36:46.051 -07:00] [INFO] [unknown:1736] ["[region 529] 671 [commit: 7] restored snapshot [index: 7, term: 6]"]
[2019/05/01 12:36:46.051 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=671] [region_id=529]
[2019/05/01 12:36:46.051 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 7, truncated_state: Some(RaftTruncatedState { index: 7, term: 6, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 529, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 101, 120, 101, 99, 255, 117, 116, 101, 100, 255, 95, 103, 116, 255, 105, 100, 115, 95, 99, 255, 111, 109, 255, 112, 114, 101, 115, 115, 105, 255, 111, 255, 110, 95, 112, 101, 114, 105, 111, 255, 255, 100, 0, 0, 0, 0, 0, 0, 0, 255, 248, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 101, 120, 112, 105, 255, 114, 101, 95, 108, 255, 111, 103, 115, 255, 95, 100, 97, 121, 115, 255, 0, 0, 255, 0, 0, 0, 0, 0, 0, 247, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 67, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 530, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 531, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 532, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 671, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=671] [region_id=529]
[2019/05/01 12:36:46.076 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 513] 670"]
[2019/05/01 12:36:46.076 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 513, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 101, 110, 100, 95, 255, 109, 97, 114, 107, 255, 101, 114, 115, 255, 95, 105, 110, 95, 106, 255, 115, 111, 255, 110, 0, 0, 0, 0, 0, 250, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 101, 110, 102, 111, 255, 114, 99, 101, 95, 255, 103, 116, 105, 255, 100, 95, 99, 111, 110, 255, 115, 105, 255, 115, 116, 101, 110, 99, 121, 255, 0, 255, 0, 0, 0, 0, 0, 0, 0, 247, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 67, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 514, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 515, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 516, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 670, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=670] [region_id=513]
[2019/05/01 12:36:46.076 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=513]
[2019/05/01 12:36:46.088 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 529] 671"]
[2019/05/01 12:36:46.088 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 529, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 101, 120, 101, 99, 255, 117, 116, 101, 100, 255, 95, 103, 116, 255, 105, 100, 115, 95, 99, 255, 111, 109, 255, 112, 114, 101, 115, 115, 105, 255, 111, 255, 110, 95, 112, 101, 114, 105, 111, 255, 255, 100, 0, 0, 0, 0, 0, 0, 0, 255, 248, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 101, 120, 112, 105, 255, 114, 101, 95, 108, 255, 111, 103, 115, 255, 95, 100, 97, 121, 115, 255, 0, 0, 255, 0, 0, 0, 0, 0, 0, 247, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 67, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 530, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 531, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 532, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 671, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=671] [region_id=529]
[2019/05/01 12:36:46.127 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=50.613175ms] [region_id=513]
[2019/05/01 12:36:46.127 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=529]
[2019/05/01 12:36:46.150 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 28], lock_version: 408089894711197704, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 28], lock_ttl: 3278, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:46.177 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=50.309355ms] [region_id=529]
[2019/05/01 12:36:46.651 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 24], lock_version: 408089894829162511, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 24], lock_ttl: 3417, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:46.714 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 24], lock_version: 408089894829162511, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 24], lock_ttl: 3417, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:47.039 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 670, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=8] [term=6] [peer_id=670] [region_id=513]
[2019/05/01 12:36:47.039 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 6, version: 67, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=670] [region_id=513]
[2019/05/01 12:36:47.039 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 513, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 101, 110, 100, 95, 255, 109, 97, 114, 107, 255, 101, 114, 115, 255, 95, 105, 110, 95, 106, 255, 115, 111, 255, 110, 0, 0, 0, 0, 0, 250, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 101, 110, 102, 111, 255, 114, 99, 101, 95, 255, 103, 116, 105, 255, 100, 95, 99, 111, 110, 255, 115, 105, 255, 115, 116, 101, 110, 99, 121, 255, 0, 255, 0, 0, 0, 0, 0, 0, 0, 247, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 67, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 514, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 515, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 516, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 670, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 670, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=670] [region_id=513]
[2019/05/01 12:36:47.109 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 671, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=8] [term=6] [peer_id=671] [region_id=529]
[2019/05/01 12:36:47.109 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 6, version: 67, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=671] [region_id=529]
[2019/05/01 12:36:47.109 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 529, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 101, 120, 101, 99, 255, 117, 116, 101, 100, 255, 95, 103, 116, 255, 105, 100, 115, 95, 99, 255, 111, 109, 255, 112, 114, 101, 115, 115, 105, 255, 111, 255, 110, 95, 112, 101, 114, 105, 111, 255, 255, 100, 0, 0, 0, 0, 0, 0, 0, 255, 248, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 101, 120, 112, 105, 255, 114, 101, 95, 108, 255, 111, 103, 115, 255, 95, 100, 97, 121, 115, 255, 0, 0, 255, 0, 0, 0, 0, 0, 0, 247, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 67, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 530, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 531, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 532, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 671, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 671, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=671] [region_id=529]
[2019/05/01 12:36:47.159 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 515, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=9] [term=6] [peer_id=670] [region_id=513]
[2019/05/01 12:36:47.159 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 7, version: 67, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=670] [region_id=513]
[2019/05/01 12:36:47.159 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 513, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 101, 110, 100, 95, 255, 109, 97, 114, 107, 255, 101, 114, 115, 255, 95, 105, 110, 95, 106, 255, 115, 111, 255, 110, 0, 0, 0, 0, 0, 250, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 101, 110, 102, 111, 255, 114, 99, 101, 95, 255, 103, 116, 105, 255, 100, 95, 99, 111, 110, 255, 115, 105, 255, 115, 116, 101, 110, 99, 121, 255, 0, 255, 0, 0, 0, 0, 0, 0, 0, 247, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 7, version: 67, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 514, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 515, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 516, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 670, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 515, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=670] [region_id=513]
[2019/05/01 12:36:47.248 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 531, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=9] [term=6] [peer_id=671] [region_id=529]
[2019/05/01 12:36:47.248 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 7, version: 67, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=671] [region_id=529]
[2019/05/01 12:36:47.248 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 529, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 101, 120, 101, 99, 255, 117, 116, 101, 100, 255, 95, 103, 116, 255, 105, 100, 115, 95, 99, 255, 111, 109, 255, 112, 114, 101, 115, 115, 105, 255, 111, 255, 110, 95, 112, 101, 114, 105, 111, 255, 255, 100, 0, 0, 0, 0, 0, 0, 0, 255, 248, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 101, 120, 112, 105, 255, 114, 101, 95, 108, 255, 111, 103, 115, 255, 95, 100, 97, 121, 115, 255, 0, 0, 255, 0, 0, 0, 0, 0, 0, 247, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 7, version: 67, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 530, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 531, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 532, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 671, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 531, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=671] [region_id=529]
[2019/05/01 12:36:47.560 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 29], lock_version: 408089895209271303, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 34], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:47.941 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 32], lock_version: 408089895314128898, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 34], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:47.999 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 32], lock_version: 408089895314128898, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 34], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:48.231 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 32], lock_version: 408089895405879307, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 32], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:48.310 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 32], lock_version: 408089895405879307, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 32], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:48.430 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 32], lock_version: 408089895458308100, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 32], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:48.562 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 24], lock_version: 408089895445200901, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 29], lock_ttl: 3098, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:48.625 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 24], lock_version: 408089895445200901, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 29], lock_ttl: 3098, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:48.893 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 34], lock_version: 408089895576272900, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 34], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:48.961 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 34], lock_version: 408089895576272900, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 34], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:49.208 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 37], lock_version: 408089895589380108, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 37], lock_ttl: 3249, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:49.263 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 37], lock_version: 408089895589380108, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 37], lock_ttl: 3249, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:49.279 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 34], lock_version: 408089895681130498, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 34], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:49.596 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 38], lock_version: 408089895759773703, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 39], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:49.652 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 38], lock_version: 408089895785988108, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 38], lock_ttl: 3005, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:49.653 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 38], lock_version: 408089895785988108, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 38], lock_ttl: 3005, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:49.688 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 33], lock_version: 408089895785988100, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 37], lock_ttl: 3055, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:49.789 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 38], lock_version: 408089895825309700, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 38], lock_ttl: 3002, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:49.881 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 37], lock_version: 408089895825309707, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 39], lock_ttl: 3002, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:50.239 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 39], lock_version: 408089895903952907, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 39], lock_ttl: 3086, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:50.313 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 39], lock_version: 408089895903952907, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 39], lock_ttl: 3086, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:50.805 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=781] [region_id=361]
[2019/05/01 12:36:50.805 -07:00] [INFO] [unknown:719] ["[region 361] 781 became follower at term 0"]
[2019/05/01 12:36:50.805 -07:00] [INFO] [unknown:295] ["[region 361] 781 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:36:50.805 -07:00] [INFO] [unknown:719] ["[region 361] 781 became follower at term 1"]
[2019/05/01 12:36:50.805 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=780] [region_id=233]
[2019/05/01 12:36:50.805 -07:00] [INFO] [unknown:719] ["[region 233] 780 became follower at term 0"]
[2019/05/01 12:36:50.805 -07:00] [INFO] [unknown:295] ["[region 233] 780 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:36:50.805 -07:00] [INFO] [unknown:719] ["[region 233] 780 became follower at term 1"]
[2019/05/01 12:36:50.805 -07:00] [INFO] [unknown:920] ["[region 361] 781 [term: 1] received a MsgHeartbeat message with higher term from 364 [term: 7]"]
[2019/05/01 12:36:50.805 -07:00] [INFO] [unknown:719] ["[region 361] 781 became follower at term 7"]
[2019/05/01 12:36:50.805 -07:00] [INFO] [unknown:920] ["[region 233] 780 [term: 1] received a MsgHeartbeat message with higher term from 236 [term: 7]"]
[2019/05/01 12:36:50.805 -07:00] [INFO] [unknown:719] ["[region 233] 780 became follower at term 7"]
[2019/05/01 12:36:50.871 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 38], lock_version: 408089896008810510, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 38], lock_ttl: 3248, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:50.944 -07:00] [INFO] [pd.rs:558] ["try to change peer"] [peer="Peer { id: 782, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [change_type=AddLearnerNode] [region_id=108]
[2019/05/01 12:36:50.944 -07:00] [INFO] [peer.rs:1953] ["propose conf change peer"] [change_peer=782] [change_type=AddLearnerNode] [peer_id=213] [region_id=108]
[2019/05/01 12:36:50.993 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddLearnerNode, peer: Some(Peer { id: 782, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=11] [term=7] [peer_id=213] [region_id=108]
[2019/05/01 12:36:50.993 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 5, version: 17, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddLearner] [peer_id=213] [region_id=108]
[2019/05/01 12:36:50.993 -07:00] [INFO] [apply.rs:1476] ["add learner successfully"] [region="Region { id: 108, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 97, 118, 111, 105, 255, 100, 95, 116, 101, 255, 109, 112, 111, 255, 114, 97, 108, 95, 117, 255, 112, 103, 255, 114, 97, 100, 101, 0, 0, 253, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 97, 99, 107, 255, 95, 108, 111, 103, 255, 0, 0, 0, 255, 0, 0, 0, 0, 0, 247, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 5, version: 17, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 109, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 110, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 213, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 782, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=213] [region_id=108]
[2019/05/01 12:36:51.014 -07:00] [INFO] [peer.rs:1318] ["notify pd with change peer region"] [region="Region { id: 108, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 97, 118, 111, 105, 255, 100, 95, 116, 101, 255, 109, 112, 111, 255, 114, 97, 108, 95, 117, 255, 112, 103, 255, 114, 97, 100, 101, 0, 0, 253, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 97, 99, 107, 255, 95, 108, 111, 103, 255, 0, 0, 0, 255, 0, 0, 0, 0, 0, 247, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 17, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 109, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 110, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 213, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 782, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=213] [region_id=108]
[2019/05/01 12:36:51.056 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=783] [region_id=20]
[2019/05/01 12:36:51.056 -07:00] [INFO] [unknown:719] ["[region 20] 783 became follower at term 0"]
[2019/05/01 12:36:51.056 -07:00] [INFO] [unknown:295] ["[region 20] 783 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:36:51.056 -07:00] [INFO] [unknown:719] ["[region 20] 783 became follower at term 1"]
[2019/05/01 12:36:51.056 -07:00] [INFO] [unknown:920] ["[region 20] 783 [term: 1] received a MsgHeartbeat message with higher term from 50 [term: 7]"]
[2019/05/01 12:36:51.056 -07:00] [INFO] [unknown:719] ["[region 20] 783 became follower at term 7"]
[2019/05/01 12:36:51.192 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 44], lock_version: 408089896192311300, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 46], lock_ttl: 3002, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:51.288 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 44], lock_version: 408089896218525700, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 44], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:51.468 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 45], lock_version: 408089896257847309, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 45], lock_ttl: 3002, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:51.479 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 45], lock_version: 408089896257847309, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 45], lock_ttl: 3002, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:51.555 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 44], lock_version: 408089896257847300, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 44], lock_ttl: 3003, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:51.568 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 43], lock_version: 408089896244740106, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 43], lock_ttl: 3084, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:51.618 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 45], lock_version: 408089896284061702, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 45], lock_ttl: 3002, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:51.793 -07:00] [INFO] [peer_storage.rs:759] ["requesting snapshot"] [peer_id=213] [region_id=108]
[2019/05/01 12:36:51.794 -07:00] [INFO] [snap.rs:757] ["scan snapshot of one cf"] [size=0] [key_count=0] [cf=default] [snapshot=/opt/tidb/data/kv/snap/gen_108_7_11_(default|lock|write).sst] [region_id=108]
[2019/05/01 12:36:51.794 -07:00] [INFO] [snap.rs:757] ["scan snapshot of one cf"] [size=0] [key_count=0] [cf=lock] [snapshot=/opt/tidb/data/kv/snap/gen_108_7_11_(default|lock|write).sst] [region_id=108]
[2019/05/01 12:36:51.794 -07:00] [INFO] [snap.rs:757] ["scan snapshot of one cf"] [size=156] [key_count=2] [cf=write] [snapshot=/opt/tidb/data/kv/snap/gen_108_7_11_(default|lock|write).sst] [region_id=108]
[2019/05/01 12:36:51.807 -07:00] [INFO] [snap.rs:875] ["scan snapshot"] [takes=13.965405ms] [size=1414] [key_count=2] [snapshot=/opt/tidb/data/kv/snap/gen_108_7_11_(default|lock|write).sst] [region_id=108]
[2019/05/01 12:36:51.888 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 42], lock_version: 408089896336490513, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 44], lock_ttl: 3087, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:52.022 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 43], lock_version: 408089896388919303, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 47], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:52.137 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 45], lock_version: 408089896428240914, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 48], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:52.278 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 45], lock_version: 408089896454455312, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 45], lock_ttl: 3002, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:52.316 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 50], lock_version: 408089896493776897, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 50], lock_ttl: 3002, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:52.498 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 49], lock_version: 408089896533098500, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 49], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:52.808 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_233_7_8_(default|lock|write).sst] [snap_key=233_7_8]
[2019/05/01 12:36:52.808 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_361_7_8_(default|lock|write).sst] [snap_key=361_7_8]
[2019/05/01 12:36:52.816 -07:00] [INFO] [unknown:1792] ["[region 233] 780 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 8, term: 7]"]
[2019/05/01 12:36:52.816 -07:00] [INFO] [unknown:1816] ["[region 233] 780 restored progress of 234 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:36:52.816 -07:00] [INFO] [unknown:1816] ["[region 233] 780 restored progress of 235 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:36:52.816 -07:00] [INFO] [unknown:1816] ["[region 233] 780 restored progress of 236 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:36:52.816 -07:00] [INFO] [unknown:1816] ["[region 233] 780 restored progress of 780 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:36:52.816 -07:00] [INFO] [unknown:474] ["[region 233] 780 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 8, term: 7]"]
[2019/05/01 12:36:52.816 -07:00] [INFO] [unknown:1736] ["[region 233] 780 [commit: 8] restored snapshot [index: 8, term: 7]"]
[2019/05/01 12:36:52.816 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=780] [region_id=233]
[2019/05/01 12:36:52.816 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 8, truncated_state: Some(RaftTruncatedState { index: 8, term: 7, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 233, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 95, 103, 255, 114, 111, 117, 255, 112, 95, 99, 111, 109, 255, 109, 105, 255, 116, 95, 115, 121, 110, 99, 255, 95, 255, 100, 101, 108, 97, 121, 0, 0, 253, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 95, 103, 255, 114, 111, 117, 255, 112, 95, 99, 111, 109, 255, 109, 105, 255, 116, 95, 115, 121, 110, 99, 255, 95, 255, 110, 111, 95, 100, 101, 108, 97, 255, 255, 121, 95, 99, 111, 117, 110, 116, 0, 255, 254, 0, 0, 0, 0, 0, 0, 0, 248], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 27, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 234, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 235, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 236, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 780, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=780] [region_id=233]
[2019/05/01 12:36:52.816 -07:00] [INFO] [unknown:1792] ["[region 361] 781 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 8, term: 7]"]
[2019/05/01 12:36:52.816 -07:00] [INFO] [unknown:1816] ["[region 361] 781 restored progress of 362 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:36:52.816 -07:00] [INFO] [unknown:1816] ["[region 361] 781 restored progress of 363 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:36:52.816 -07:00] [INFO] [unknown:1816] ["[region 361] 781 restored progress of 364 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:36:52.816 -07:00] [INFO] [unknown:1816] ["[region 361] 781 restored progress of 781 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:36:52.816 -07:00] [INFO] [unknown:474] ["[region 361] 781 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 8, term: 7]"]
[2019/05/01 12:36:52.816 -07:00] [INFO] [unknown:1736] ["[region 361] 781 [commit: 8] restored snapshot [index: 8, term: 7]"]
[2019/05/01 12:36:52.816 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=781] [region_id=361]
[2019/05/01 12:36:52.816 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 8, truncated_state: Some(RaftTruncatedState { index: 8, term: 7, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 361, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 99, 104, 97, 114, 255, 97, 99, 116, 101, 255, 114, 95, 115, 255, 101, 116, 95, 99, 111, 255, 110, 110, 255, 101, 99, 116, 105, 111, 110, 255, 0, 255, 0, 0, 0, 0, 0, 0, 0, 247, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 99, 104, 97, 114, 255, 97, 99, 116, 101, 255, 114, 95, 115, 255, 101, 116, 95, 100, 97, 255, 116, 97, 255, 98, 97, 115, 101, 0, 0, 253, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 37, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 362, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 363, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 364, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 781, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=781] [region_id=361]
[2019/05/01 12:36:52.832 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 233] 780"]
[2019/05/01 12:36:52.832 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 233, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 95, 103, 255, 114, 111, 117, 255, 112, 95, 99, 111, 109, 255, 109, 105, 255, 116, 95, 115, 121, 110, 99, 255, 95, 255, 100, 101, 108, 97, 121, 0, 0, 253, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 95, 103, 255, 114, 111, 117, 255, 112, 95, 99, 111, 109, 255, 109, 105, 255, 116, 95, 115, 121, 110, 99, 255, 95, 255, 110, 111, 95, 100, 101, 108, 97, 255, 255, 121, 95, 99, 111, 117, 110, 116, 0, 255, 254, 0, 0, 0, 0, 0, 0, 0, 248], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 27, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 234, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 235, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 236, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 780, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=780] [region_id=233]
[2019/05/01 12:36:52.832 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=233]
[2019/05/01 12:36:52.832 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 361] 781"]
[2019/05/01 12:36:52.832 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 361, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 99, 104, 97, 114, 255, 97, 99, 116, 101, 255, 114, 95, 115, 255, 101, 116, 95, 99, 111, 255, 110, 110, 255, 101, 99, 116, 105, 111, 110, 255, 0, 255, 0, 0, 0, 0, 0, 0, 0, 247, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 99, 104, 97, 114, 255, 97, 99, 116, 101, 255, 114, 95, 115, 255, 101, 116, 95, 100, 97, 255, 116, 97, 255, 98, 97, 115, 101, 0, 0, 253, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 37, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 362, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 363, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 364, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 781, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=781] [region_id=361]
[2019/05/01 12:36:52.856 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=23.229179ms] [region_id=233]
[2019/05/01 12:36:52.856 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=361]
[2019/05/01 12:36:52.872 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=15.858151ms] [region_id=361]
[2019/05/01 12:36:52.918 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 50], lock_version: 408089896624848900, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 50], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:53.032 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 51], lock_version: 408089896651063297, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 51], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:53.059 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_20_7_12_(default|lock|write).sst] [snap_key=20_7_12]
[2019/05/01 12:36:53.071 -07:00] [INFO] [unknown:1792] ["[region 20] 783 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 12, term: 7]"]
[2019/05/01 12:36:53.071 -07:00] [INFO] [unknown:1816] ["[region 20] 783 restored progress of 21 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:36:53.071 -07:00] [INFO] [unknown:1816] ["[region 20] 783 restored progress of 50 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:36:53.071 -07:00] [INFO] [unknown:1816] ["[region 20] 783 restored progress of 166 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:36:53.071 -07:00] [INFO] [unknown:1816] ["[region 20] 783 restored progress of 783 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:36:53.071 -07:00] [INFO] [unknown:474] ["[region 20] 783 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 12, term: 7]"]
[2019/05/01 12:36:53.071 -07:00] [INFO] [unknown:1736] ["[region 20] 783 [commit: 12] restored snapshot [index: 12, term: 7]"]
[2019/05/01 12:36:53.071 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=783] [region_id=20]
[2019/05/01 12:36:53.071 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 12, truncated_state: Some(RaftTruncatedState { index: 12, term: 7, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 20, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 9, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 16, 0, 0, 0, 0, 0, 0, 0, 248], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 4, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 21, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 50, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 166, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 783, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=783] [region_id=20]
[2019/05/01 12:36:53.088 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 20, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 9, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 16, 0, 0, 0, 0, 0, 0, 0, 248], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 4, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 21, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 50, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 166, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 783, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=783] [region_id=20]
[2019/05/01 12:36:53.088 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 20] 783"]
[2019/05/01 12:36:53.088 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=20]
[2019/05/01 12:36:53.088 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=29.796µs] [region_id=20]
[2019/05/01 12:36:53.220 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 52], lock_version: 408089896690384903, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 52], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:53.386 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 49], lock_version: 408089896755920912, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 56], lock_ttl: 3003, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:53.395 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 54], lock_version: 408089896755920905, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 54], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:53.498 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 51], lock_version: 408089896782135309, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 51], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:53.623 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 51], lock_version: 408089896808349712, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 51], lock_ttl: 3082, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:53.663 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 52], lock_version: 408089896834564103, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 53], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:53.796 -07:00] [INFO] [unknown:841] ["New connected subchannel at 0x7f858fa012d0 for subchannel 0x7f864047a400"]
[2019/05/01 12:36:53.838 -07:00] [INFO] [snap.rs:389] ["sent snapshot"] [duration=42.799536ms] [size=1414] [snap_key=108_7_11] [region_id=108]
[2019/05/01 12:36:53.842 -07:00] [INFO] [peer.rs:538] ["report snapshot status"] [status=Finish] [to="Peer { id: 782, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=213] [region_id=108]
[2019/05/01 12:36:53.937 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 780, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=9] [term=7] [peer_id=780] [region_id=233]
[2019/05/01 12:36:53.937 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 6, version: 27, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=780] [region_id=233]
[2019/05/01 12:36:53.937 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 233, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 95, 103, 255, 114, 111, 117, 255, 112, 95, 99, 111, 109, 255, 109, 105, 255, 116, 95, 115, 121, 110, 99, 255, 95, 255, 100, 101, 108, 97, 121, 0, 0, 253, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 95, 103, 255, 114, 111, 117, 255, 112, 95, 99, 111, 109, 255, 109, 105, 255, 116, 95, 115, 121, 110, 99, 255, 95, 255, 110, 111, 95, 100, 101, 108, 97, 255, 255, 121, 95, 99, 111, 117, 110, 116, 0, 255, 254, 0, 0, 0, 0, 0, 0, 0, 248], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 27, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 234, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 235, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 236, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 780, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 780, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=780] [region_id=233]
[2019/05/01 12:36:53.937 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 781, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=9] [term=7] [peer_id=781] [region_id=361]
[2019/05/01 12:36:53.937 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 6, version: 37, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=781] [region_id=361]
[2019/05/01 12:36:53.938 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 361, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 99, 104, 97, 114, 255, 97, 99, 116, 101, 255, 114, 95, 115, 255, 101, 116, 95, 99, 111, 255, 110, 110, 255, 101, 99, 116, 105, 111, 110, 255, 0, 255, 0, 0, 0, 0, 0, 0, 0, 247, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 99, 104, 97, 114, 255, 97, 99, 116, 101, 255, 114, 95, 115, 255, 101, 116, 95, 100, 97, 255, 116, 97, 255, 98, 97, 115, 101, 0, 0, 253, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 37, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 362, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 363, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 364, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 781, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 781, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=781] [region_id=361]
[2019/05/01 12:36:53.938 -07:00] [INFO] [unknown:1625] ["[region 513] 670 [term 6] received MsgTimeoutNow from 514 and starts an election to get leadership."]
[2019/05/01 12:36:53.938 -07:00] [INFO] [unknown:739] ["[region 513] 670 became candidate at term 7"]
[2019/05/01 12:36:53.938 -07:00] [INFO] [unknown:854] ["[region 513] 670 received MsgRequestVoteResponse from 670 at term 7"]
[2019/05/01 12:36:53.938 -07:00] [INFO] [unknown:828] ["[region 513] 670 [logterm: 6, index: 9] sent MsgRequestVote request to 514 at term 7"]
[2019/05/01 12:36:53.938 -07:00] [INFO] [unknown:828] ["[region 513] 670 [logterm: 6, index: 9] sent MsgRequestVote request to 516 at term 7"]
[2019/05/01 12:36:53.938 -07:00] [INFO] [unknown:1625] ["[region 529] 671 [term 6] received MsgTimeoutNow from 530 and starts an election to get leadership."]
[2019/05/01 12:36:53.938 -07:00] [INFO] [unknown:739] ["[region 529] 671 became candidate at term 7"]
[2019/05/01 12:36:53.938 -07:00] [INFO] [unknown:854] ["[region 529] 671 received MsgRequestVoteResponse from 671 at term 7"]
[2019/05/01 12:36:53.938 -07:00] [INFO] [unknown:828] ["[region 529] 671 [logterm: 6, index: 9] sent MsgRequestVote request to 532 at term 7"]
[2019/05/01 12:36:53.938 -07:00] [INFO] [unknown:828] ["[region 529] 671 [logterm: 6, index: 9] sent MsgRequestVote request to 530 at term 7"]
[2019/05/01 12:36:54.039 -07:00] [INFO] [unknown:854] ["[region 513] 670 received MsgRequestVoteResponse from 516 at term 7"]
[2019/05/01 12:36:54.039 -07:00] [INFO] [unknown:1550] ["[region 513] 670 [quorum:2] has received 2 MsgRequestVoteResponse votes and 0 vote rejections"]
[2019/05/01 12:36:54.039 -07:00] [INFO] [unknown:789] ["[region 513] 670 became leader at term 7"]
[2019/05/01 12:36:54.057 -07:00] [INFO] [unknown:854] ["[region 529] 671 received MsgRequestVoteResponse from 532 at term 7"]
[2019/05/01 12:36:54.057 -07:00] [INFO] [unknown:1550] ["[region 529] 671 [quorum:2] has received 2 MsgRequestVoteResponse votes and 0 vote rejections"]
[2019/05/01 12:36:54.057 -07:00] [INFO] [unknown:789] ["[region 529] 671 became leader at term 7"]
[2019/05/01 12:36:54.127 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 234, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=10] [term=7] [peer_id=780] [region_id=233]
[2019/05/01 12:36:54.127 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 7, version: 27, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=780] [region_id=233]
[2019/05/01 12:36:54.127 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 233, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 95, 103, 255, 114, 111, 117, 255, 112, 95, 99, 111, 109, 255, 109, 105, 255, 116, 95, 115, 121, 110, 99, 255, 95, 255, 100, 101, 108, 97, 121, 0, 0, 253, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 95, 103, 255, 114, 111, 117, 255, 112, 95, 99, 111, 109, 255, 109, 105, 255, 116, 95, 115, 121, 110, 99, 255, 95, 255, 110, 111, 95, 100, 101, 108, 97, 255, 255, 121, 95, 99, 111, 117, 110, 116, 0, 255, 254, 0, 0, 0, 0, 0, 0, 0, 248], region_epoch: Some(RegionEpoch { conf_ver: 7, version: 27, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 234, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 235, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 236, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 780, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 234, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=780] [region_id=233]
[2019/05/01 12:36:54.127 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 362, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=10] [term=7] [peer_id=781] [region_id=361]
[2019/05/01 12:36:54.127 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 7, version: 37, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=781] [region_id=361]
[2019/05/01 12:36:54.127 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 361, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 99, 104, 97, 114, 255, 97, 99, 116, 101, 255, 114, 95, 115, 255, 101, 116, 95, 99, 111, 255, 110, 110, 255, 101, 99, 116, 105, 111, 110, 255, 0, 255, 0, 0, 0, 0, 0, 0, 0, 247, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 99, 104, 97, 114, 255, 97, 99, 116, 101, 255, 114, 95, 115, 255, 101, 116, 95, 100, 97, 255, 116, 97, 255, 98, 97, 115, 101, 0, 0, 253, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 7, version: 37, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 362, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 363, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 364, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 781, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 362, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=781] [region_id=361]
[2019/05/01 12:36:54.181 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 783, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=13] [term=7] [peer_id=783] [region_id=20]
[2019/05/01 12:36:54.181 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 6, version: 4, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=783] [region_id=20]
[2019/05/01 12:36:54.181 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 20, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 9, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 16, 0, 0, 0, 0, 0, 0, 0, 248], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 4, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 21, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 50, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 166, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 783, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 783, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=783] [region_id=20]
[2019/05/01 12:36:54.195 -07:00] [INFO] [keys.rs:155] ["approximate keys over threshold, need to do split check"] [threshold=5] [keys=5899] [region_id=4]
[2019/05/01 12:36:54.225 -07:00] [INFO] [peer.rs:294] ["on split"] [split_keys="10 keys range from \"t\\200\\000\\000\\000\\000\\000\\000\\377l_r\\200\\000\\000\\000\\000\\377\\000\\000\\003\\000\\000\\000\\000\\000\\372\\372V,j\\277/\\377\\376\" to \"t\\200\\000\\000\\000\\000\\000\\000\\377l_r\\200\\000\\000\\000\\000\\377\\000\\000\\004\\000\\000\\000\\000\\000\\372\\372V,j\\274\\017\\377\\376\""] [peer_id=393] [region_id=4]
[2019/05/01 12:36:54.226 -07:00] [INFO] [pd.rs:285] ["try to batch split region"] [region="Region { id: 4, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 108, 95, 114, 128, 0, 0, 0, 0, 255, 0, 0, 3, 0, 0, 0, 0, 0, 250], end_key: [], region_epoch: Some(RegionEpoch { conf_ver: 5, version: 23, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 5, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 386, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 393, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [new_region_ids="[SplitID { new_region_id: 826, new_peer_ids: [827, 828, 829], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, SplitID { new_region_id: 830, new_peer_ids: [831, 832, 833], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, SplitID { new_region_id: 834, new_peer_ids: [835, 836, 837], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, SplitID { new_region_id: 838, new_peer_ids: [839, 840, 841], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, SplitID { new_region_id: 842, new_peer_ids: [843, 844, 845], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, SplitID { new_region_id: 846, new_peer_ids: [847, 848, 849], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, SplitID { new_region_id: 850, new_peer_ids: [851, 852, 853], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, SplitID { new_region_id: 854, new_peer_ids: [855, 856, 857], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, SplitID { new_region_id: 858, new_peer_ids: [859, 860, 861], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, SplitID { new_region_id: 862, new_peer_ids: [863, 864, 865], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }]"] [region_id=4]
[2019/05/01 12:36:54.232 -07:00] [WARN] [split_observer.rs:98] ["invalid key, skip"] [err="\"key \\\"t\\\\200\\\\000\\\\000\\\\000\\\\000\\\\000\\\\000\\\\377l_r\\\\200\\\\000\\\\000\\\\000\\\\000\\\\377\\\\000\\\\000\\\\003\\\\000\\\\000\\\\000\\\\000\\\\000\\\\372\\\" should be in (\\\"t\\\\200\\\\000\\\\000\\\\000\\\\000\\\\000\\\\000\\\\377l_r\\\\200\\\\000\\\\000\\\\000\\\\000\\\\377\\\\000\\\\000\\\\003\\\\000\\\\000\\\\000\\\\000\\\\000\\\\372\\\", \\\"\\\")\""] [index=0] [region_id=4]
[2019/05/01 12:36:54.232 -07:00] [WARN] [split_observer.rs:98] ["invalid key, skip"] [err="\"key \\\"t\\\\200\\\\000\\\\000\\\\000\\\\000\\\\000\\\\000\\\\377l_r\\\\200\\\\000\\\\000\\\\000\\\\000\\\\377\\\\000\\\\000\\\\003\\\\000\\\\000\\\\000\\\\000\\\\000\\\\372\\\" should be in (\\\"t\\\\200\\\\000\\\\000\\\\000\\\\000\\\\000\\\\000\\\\377l_r\\\\200\\\\000\\\\000\\\\000\\\\000\\\\377\\\\000\\\\000\\\\003\\\\000\\\\000\\\\000\\\\000\\\\000\\\\372\\\", \\\"\\\")\""] [index=1] [region_id=4]
[2019/05/01 12:36:54.232 -07:00] [WARN] [split_observer.rs:98] ["invalid key, skip"] [err="\"key \\\"t\\\\200\\\\000\\\\000\\\\000\\\\000\\\\000\\\\000\\\\377l_r\\\\200\\\\000\\\\000\\\\000\\\\000\\\\377\\\\000\\\\000\\\\003\\\\000\\\\000\\\\000\\\\000\\\\000\\\\372\\\" should be in (\\\"t\\\\200\\\\000\\\\000\\\\000\\\\000\\\\000\\\\000\\\\377l_r\\\\200\\\\000\\\\000\\\\000\\\\000\\\\377\\\\000\\\\000\\\\003\\\\000\\\\000\\\\000\\\\000\\\\000\\\\372\\\", \\\"\\\")\""] [index=2] [region_id=4]
[2019/05/01 12:36:54.232 -07:00] [WARN] [split_observer.rs:98] ["invalid key, skip"] [err="\"key \\\"t\\\\200\\\\000\\\\000\\\\000\\\\000\\\\000\\\\000\\\\377l_r\\\\200\\\\000\\\\000\\\\000\\\\000\\\\377\\\\000\\\\000\\\\003\\\\000\\\\000\\\\000\\\\000\\\\000\\\\372\\\" should be in (\\\"t\\\\200\\\\000\\\\000\\\\000\\\\000\\\\000\\\\000\\\\377l_r\\\\200\\\\000\\\\000\\\\000\\\\000\\\\377\\\\000\\\\000\\\\003\\\\000\\\\000\\\\000\\\\000\\\\000\\\\372\\\", \\\"\\\")\""] [index=3] [region_id=4]
[2019/05/01 12:36:54.232 -07:00] [WARN] [split_observer.rs:98] ["invalid key, skip"] [err="\"key \\\"t\\\\200\\\\000\\\\000\\\\000\\\\000\\\\000\\\\000\\\\377l_r\\\\200\\\\000\\\\000\\\\000\\\\000\\\\377\\\\000\\\\000\\\\003\\\\000\\\\000\\\\000\\\\000\\\\000\\\\372\\\" should be in (\\\"t\\\\200\\\\000\\\\000\\\\000\\\\000\\\\000\\\\000\\\\377l_r\\\\200\\\\000\\\\000\\\\000\\\\000\\\\377\\\\000\\\\000\\\\003\\\\000\\\\000\\\\000\\\\000\\\\000\\\\372\\\", \\\"\\\")\""] [index=4] [region_id=4]
[2019/05/01 12:36:54.232 -07:00] [WARN] [split_observer.rs:98] ["invalid key, skip"] [err="\"key \\\"t\\\\200\\\\000\\\\000\\\\000\\\\000\\\\000\\\\000\\\\377l_r\\\\200\\\\000\\\\000\\\\000\\\\000\\\\377\\\\000\\\\000\\\\003\\\\000\\\\000\\\\000\\\\000\\\\000\\\\372\\\" should be in (\\\"t\\\\200\\\\000\\\\000\\\\000\\\\000\\\\000\\\\000\\\\377l_r\\\\200\\\\000\\\\000\\\\000\\\\000\\\\377\\\\000\\\\000\\\\003\\\\000\\\\000\\\\000\\\\000\\\\000\\\\372\\\", \\\"\\\")\""] [index=5] [region_id=4]
[2019/05/01 12:36:54.232 -07:00] [WARN] [split_observer.rs:85] ["key is not larger than previous, skip."] [index=7] [previous=7480000000000000FF6C5F728000000000FF0000040000000000FA] [key=7480000000000000FF6C5F728000000000FF0000040000000000FA] [region_id=4]
[2019/05/01 12:36:54.232 -07:00] [WARN] [split_observer.rs:85] ["key is not larger than previous, skip."] [index=8] [previous=7480000000000000FF6C5F728000000000FF0000040000000000FA] [key=7480000000000000FF6C5F728000000000FF0000040000000000FA] [region_id=4]
[2019/05/01 12:36:54.232 -07:00] [WARN] [split_observer.rs:85] ["key is not larger than previous, skip."] [index=9] [previous=7480000000000000FF6C5F728000000000FF0000040000000000FA] [key=7480000000000000FF6C5F728000000000FF0000040000000000FA] [region_id=4]
[2019/05/01 12:36:54.248 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 21, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=14] [term=7] [peer_id=783] [region_id=20]
[2019/05/01 12:36:54.248 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 7, version: 4, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=783] [region_id=20]
[2019/05/01 12:36:54.248 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 20, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 9, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 16, 0, 0, 0, 0, 0, 0, 0, 248], region_epoch: Some(RegionEpoch { conf_ver: 7, version: 4, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 21, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 50, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 166, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 783, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 21, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=783] [region_id=20]
[2019/05/01 12:36:54.261 -07:00] [INFO] [keys.rs:155] ["approximate keys over threshold, need to do split check"] [threshold=5] [keys=2090] [region_id=745]
[2019/05/01 12:36:54.266 -07:00] [INFO] [peer.rs:294] ["on split"] [split_keys="7 keys range from \"t\\200\\000\\000\\000\\000\\000\\000\\377l_r\\200\\000\\000\\000\\000\\377\\000\\000\\002\\000\\000\\000\\000\\000\\372\\372V,j\\263w\\377\\374\" to \"t\\200\\000\\000\\000\\000\\000\\000\\377l_r\\200\\000\\000\\000\\000\\377\\000\\000\\002\\000\\000\\000\\000\\000\\372\\372V,j\\312\\037\\377\\333\""] [peer_id=748] [region_id=745]
[2019/05/01 12:36:54.266 -07:00] [INFO] [pd.rs:285] ["try to batch split region"] [region="Region { id: 745, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 108, 95, 114, 128, 0, 0, 0, 0, 255, 0, 0, 2, 0, 0, 0, 0, 0, 250], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 108, 95, 114, 128, 0, 0, 0, 0, 255, 0, 0, 3, 0, 0, 0, 0, 0, 250], region_epoch: Some(RegionEpoch { conf_ver: 5, version: 23, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 746, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 747, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 748, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [new_region_ids="[SplitID { new_region_id: 866, new_peer_ids: [867, 868, 869], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, SplitID { new_region_id: 870, new_peer_ids: [871, 872, 873], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, SplitID { new_region_id: 874, new_peer_ids: [875, 876, 877], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, SplitID { new_region_id: 878, new_peer_ids: [879, 880, 881], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, SplitID { new_region_id: 882, new_peer_ids: [883, 884, 885], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, SplitID { new_region_id: 886, new_peer_ids: [887, 888, 889], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, SplitID { new_region_id: 890, new_peer_ids: [891, 892, 893], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }]"] [region_id=745]
[2019/05/01 12:36:54.266 -07:00] [WARN] [split_observer.rs:98] ["invalid key, skip"] [err="\"key \\\"t\\\\200\\\\000\\\\000\\\\000\\\\000\\\\000\\\\000\\\\377l_r\\\\200\\\\000\\\\000\\\\000\\\\000\\\\377\\\\000\\\\000\\\\002\\\\000\\\\000\\\\000\\\\000\\\\000\\\\372\\\" should be in (\\\"t\\\\200\\\\000\\\\000\\\\000\\\\000\\\\000\\\\000\\\\377l_r\\\\200\\\\000\\\\000\\\\000\\\\000\\\\377\\\\000\\\\000\\\\002\\\\000\\\\000\\\\000\\\\000\\\\000\\\\372\\\", \\\"t\\\\200\\\\000\\\\000\\\\000\\\\000\\\\000\\\\000\\\\377l_r\\\\200\\\\000\\\\000\\\\000\\\\000\\\\377\\\\000\\\\000\\\\003\\\\000\\\\000\\\\000\\\\000\\\\000\\\\372\\\")\""] [index=0] [region_id=745]
[2019/05/01 12:36:54.266 -07:00] [WARN] [split_observer.rs:98] ["invalid key, skip"] [err="\"key \\\"t\\\\200\\\\000\\\\000\\\\000\\\\000\\\\000\\\\000\\\\377l_r\\\\200\\\\000\\\\000\\\\000\\\\000\\\\377\\\\000\\\\000\\\\002\\\\000\\\\000\\\\000\\\\000\\\\000\\\\372\\\" should be in (\\\"t\\\\200\\\\000\\\\000\\\\000\\\\000\\\\000\\\\000\\\\377l_r\\\\200\\\\000\\\\000\\\\000\\\\000\\\\377\\\\000\\\\000\\\\002\\\\000\\\\000\\\\000\\\\000\\\\000\\\\372\\\", \\\"t\\\\200\\\\000\\\\000\\\\000\\\\000\\\\000\\\\000\\\\377l_r\\\\200\\\\000\\\\000\\\\000\\\\000\\\\377\\\\000\\\\000\\\\003\\\\000\\\\000\\\\000\\\\000\\\\000\\\\372\\\")\""] [index=1] [region_id=745]
[2019/05/01 12:36:54.266 -07:00] [WARN] [split_observer.rs:98] ["invalid key, skip"] [err="\"key \\\"t\\\\200\\\\000\\\\000\\\\000\\\\000\\\\000\\\\000\\\\377l_r\\\\200\\\\000\\\\000\\\\000\\\\000\\\\377\\\\000\\\\000\\\\002\\\\000\\\\000\\\\000\\\\000\\\\000\\\\372\\\" should be in (\\\"t\\\\200\\\\000\\\\000\\\\000\\\\000\\\\000\\\\000\\\\377l_r\\\\200\\\\000\\\\000\\\\000\\\\000\\\\377\\\\000\\\\000\\\\002\\\\000\\\\000\\\\000\\\\000\\\\000\\\\372\\\", \\\"t\\\\200\\\\000\\\\000\\\\000\\\\000\\\\000\\\\000\\\\377l_r\\\\200\\\\000\\\\000\\\\000\\\\000\\\\377\\\\000\\\\000\\\\003\\\\000\\\\000\\\\000\\\\000\\\\000\\\\372\\\")\""] [index=2] [region_id=745]
[2019/05/01 12:36:54.266 -07:00] [WARN] [split_observer.rs:98] ["invalid key, skip"] [err="\"key \\\"t\\\\200\\\\000\\\\000\\\\000\\\\000\\\\000\\\\000\\\\377l_r\\\\200\\\\000\\\\000\\\\000\\\\000\\\\377\\\\000\\\\000\\\\002\\\\000\\\\000\\\\000\\\\000\\\\000\\\\372\\\" should be in (\\\"t\\\\200\\\\000\\\\000\\\\000\\\\000\\\\000\\\\000\\\\377l_r\\\\200\\\\000\\\\000\\\\000\\\\000\\\\377\\\\000\\\\000\\\\002\\\\000\\\\000\\\\000\\\\000\\\\000\\\\372\\\", \\\"t\\\\200\\\\000\\\\000\\\\000\\\\000\\\\000\\\\000\\\\377l_r\\\\200\\\\000\\\\000\\\\000\\\\000\\\\377\\\\000\\\\000\\\\003\\\\000\\\\000\\\\000\\\\000\\\\000\\\\372\\\")\""] [index=3] [region_id=745]
[2019/05/01 12:36:54.266 -07:00] [WARN] [split_observer.rs:98] ["invalid key, skip"] [err="\"key \\\"t\\\\200\\\\000\\\\000\\\\000\\\\000\\\\000\\\\000\\\\377l_r\\\\200\\\\000\\\\000\\\\000\\\\000\\\\377\\\\000\\\\000\\\\002\\\\000\\\\000\\\\000\\\\000\\\\000\\\\372\\\" should be in (\\\"t\\\\200\\\\000\\\\000\\\\000\\\\000\\\\000\\\\000\\\\377l_r\\\\200\\\\000\\\\000\\\\000\\\\000\\\\377\\\\000\\\\000\\\\002\\\\000\\\\000\\\\000\\\\000\\\\000\\\\372\\\", \\\"t\\\\200\\\\000\\\\000\\\\000\\\\000\\\\000\\\\000\\\\377l_r\\\\200\\\\000\\\\000\\\\000\\\\000\\\\377\\\\000\\\\000\\\\003\\\\000\\\\000\\\\000\\\\000\\\\000\\\\372\\\")\""] [index=4] [region_id=745]
[2019/05/01 12:36:54.266 -07:00] [WARN] [split_observer.rs:98] ["invalid key, skip"] [err="\"key \\\"t\\\\200\\\\000\\\\000\\\\000\\\\000\\\\000\\\\000\\\\377l_r\\\\200\\\\000\\\\000\\\\000\\\\000\\\\377\\\\000\\\\000\\\\002\\\\000\\\\000\\\\000\\\\000\\\\000\\\\372\\\" should be in (\\\"t\\\\200\\\\000\\\\000\\\\000\\\\000\\\\000\\\\000\\\\377l_r\\\\200\\\\000\\\\000\\\\000\\\\000\\\\377\\\\000\\\\000\\\\002\\\\000\\\\000\\\\000\\\\000\\\\000\\\\372\\\", \\\"t\\\\200\\\\000\\\\000\\\\000\\\\000\\\\000\\\\000\\\\377l_r\\\\200\\\\000\\\\000\\\\000\\\\000\\\\377\\\\000\\\\000\\\\003\\\\000\\\\000\\\\000\\\\000\\\\000\\\\372\\\")\""] [index=5] [region_id=745]
[2019/05/01 12:36:54.266 -07:00] [WARN] [split_observer.rs:98] ["invalid key, skip"] [err="\"key \\\"t\\\\200\\\\000\\\\000\\\\000\\\\000\\\\000\\\\000\\\\377l_r\\\\200\\\\000\\\\000\\\\000\\\\000\\\\377\\\\000\\\\000\\\\002\\\\000\\\\000\\\\000\\\\000\\\\000\\\\372\\\" should be in (\\\"t\\\\200\\\\000\\\\000\\\\000\\\\000\\\\000\\\\000\\\\377l_r\\\\200\\\\000\\\\000\\\\000\\\\000\\\\377\\\\000\\\\000\\\\002\\\\000\\\\000\\\\000\\\\000\\\\000\\\\372\\\", \\\"t\\\\200\\\\000\\\\000\\\\000\\\\000\\\\000\\\\000\\\\377l_r\\\\200\\\\000\\\\000\\\\000\\\\000\\\\377\\\\000\\\\000\\\\003\\\\000\\\\000\\\\000\\\\000\\\\000\\\\372\\\")\""] [index=6] [region_id=745]
[2019/05/01 12:36:54.266 -07:00] [ERROR] [split_observer.rs:161] ["failed to handle split req"] [err="\"no valid key found for split.\""] [region_id=745]
[2019/05/01 12:36:54.266 -07:00] [WARN] [peer.rs:1846] ["skip proposal"] [err="Coprocessor(Other(StringError(\"[src/raftstore/coprocessor/split_observer.rs:166]: no valid key found for split.\")))"] [peer_id=748] [region_id=745]
[2019/05/01 12:36:54.302 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 53], lock_version: 408089896926314504, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 53], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:54.318 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: BatchSplit, change_peer: None, split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: Some(BatchSplitRequest { requests: [SplitRequest { split_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 108, 95, 114, 128, 0, 0, 0, 0, 255, 0, 0, 4, 0, 0, 0, 0, 0, 250], new_region_id: 850, new_peer_ids: [851, 852, 853], right_derive: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], right_derive: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=5366] [term=7] [peer_id=393] [region_id=4]
[2019/05/01 12:36:54.318 -07:00] [INFO] [apply.rs:1582] ["split region"] [keys="[[116, 128, 0, 0, 0, 0, 0, 0, 255, 108, 95, 114, 128, 0, 0, 0, 0, 255, 0, 0, 4, 0, 0, 0, 0, 0, 250]]"] [region="Region { id: 4, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 108, 95, 114, 128, 0, 0, 0, 0, 255, 0, 0, 3, 0, 0, 0, 0, 0, 250], end_key: [], region_epoch: Some(RegionEpoch { conf_ver: 5, version: 23, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 5, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 386, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 393, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=393] [region_id=4]
[2019/05/01 12:36:54.339 -07:00] [INFO] [peer.rs:1382] ["notify pd with split"] [split_count=2] [peer_id=393] [region_id=4]
[2019/05/01 12:36:54.339 -07:00] [INFO] [peer.rs:1424] ["insert new region"] [region="Region { id: 850, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 108, 95, 114, 128, 0, 0, 0, 0, 255, 0, 0, 3, 0, 0, 0, 0, 0, 250], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 108, 95, 114, 128, 0, 0, 0, 0, 255, 0, 0, 4, 0, 0, 0, 0, 0, 250], region_epoch: Some(RegionEpoch { conf_ver: 5, version: 24, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 851, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 852, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 853, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region_id=850]
[2019/05/01 12:36:54.339 -07:00] [INFO] [peer.rs:127] ["create peer"] [peer_id=853] [region_id=850]
[2019/05/01 12:36:54.339 -07:00] [INFO] [unknown:719] ["[region 850] 853 became follower at term 5"]
[2019/05/01 12:36:54.339 -07:00] [INFO] [unknown:295] ["[region 850] 853 newRaft [peers: [851, 852, 853], term: 5, commit: 5, applied: 5, last_index: 5, last_term: 5]"]
[2019/05/01 12:36:54.339 -07:00] [INFO] [unknown:1022] ["[region 850] 853 is starting a new election at term 5"]
[2019/05/01 12:36:54.339 -07:00] [INFO] [unknown:761] ["[region 850] 853 became pre-candidate at term 5"]
[2019/05/01 12:36:54.339 -07:00] [INFO] [unknown:854] ["[region 850] 853 received MsgRequestPreVoteResponse from 853 at term 5"]
[2019/05/01 12:36:54.339 -07:00] [INFO] [unknown:828] ["[region 850] 853 [logterm: 5, index: 5] sent MsgRequestPreVote request to 852 at term 5"]
[2019/05/01 12:36:54.339 -07:00] [INFO] [unknown:828] ["[region 850] 853 [logterm: 5, index: 5] sent MsgRequestPreVote request to 851 at term 5"]
[2019/05/01 12:36:54.339 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 850] 853"]
[2019/05/01 12:36:54.339 -07:00] [INFO] [unknown:854] ["[region 850] 853 received MsgRequestPreVoteResponse from 852 at term 5"]
[2019/05/01 12:36:54.339 -07:00] [INFO] [unknown:1550] ["[region 850] 853 [quorum:2] has received 2 MsgRequestPreVoteResponse votes and 0 vote rejections"]
[2019/05/01 12:36:54.339 -07:00] [INFO] [unknown:739] ["[region 850] 853 became candidate at term 6"]
[2019/05/01 12:36:54.339 -07:00] [INFO] [unknown:854] ["[region 850] 853 received MsgRequestVoteResponse from 853 at term 6"]
[2019/05/01 12:36:54.340 -07:00] [INFO] [unknown:828] ["[region 850] 853 [logterm: 5, index: 5] sent MsgRequestVote request to 852 at term 6"]
[2019/05/01 12:36:54.340 -07:00] [INFO] [unknown:828] ["[region 850] 853 [logterm: 5, index: 5] sent MsgRequestVote request to 851 at term 6"]
[2019/05/01 12:36:54.355 -07:00] [ERROR] [process.rs:169] ["get snapshot failed"] [err="Request(Error { message: \"region epoch is not match\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: Some(EpochNotMatch { current_regions: [Region { id: 4, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 108, 95, 114, 128, 0, 0, 0, 0, 255, 0, 0, 4, 0, 0, 0, 0, 0, 250], end_key: [], region_epoch: Some(RegionEpoch { conf_ver: 5, version: 24, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 5, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 386, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 393, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Region { id: 850, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 108, 95, 114, 128, 0, 0, 0, 0, 255, 0, 0, 3, 0, 0, 0, 0, 0, 250], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 108, 95, 114, 128, 0, 0, 0, 0, 255, 0, 0, 4, 0, 0, 0, 0, 0, 250], region_epoch: Some(RegionEpoch { conf_ver: 5, version: 24, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 851, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 852, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 853, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), server_is_busy: None, stale_command: None, store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } })"] [cid=3187]
[2019/05/01 12:36:54.355 -07:00] [ERROR] [process.rs:169] ["get snapshot failed"] [err="Request(Error { message: \"region epoch is not match\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: Some(EpochNotMatch { current_regions: [Region { id: 4, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 108, 95, 114, 128, 0, 0, 0, 0, 255, 0, 0, 4, 0, 0, 0, 0, 0, 250], end_key: [], region_epoch: Some(RegionEpoch { conf_ver: 5, version: 24, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 5, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 386, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 393, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Region { id: 850, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 108, 95, 114, 128, 0, 0, 0, 0, 255, 0, 0, 3, 0, 0, 0, 0, 0, 250], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 108, 95, 114, 128, 0, 0, 0, 0, 255, 0, 0, 4, 0, 0, 0, 0, 0, 250], region_epoch: Some(RegionEpoch { conf_ver: 5, version: 24, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 851, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 852, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 853, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), server_is_busy: None, stale_command: None, store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } })"] [cid=3185]
[2019/05/01 12:36:54.355 -07:00] [ERROR] [process.rs:169] ["get snapshot failed"] [err="Request(Error { message: \"region epoch is not match\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: Some(EpochNotMatch { current_regions: [Region { id: 4, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 108, 95, 114, 128, 0, 0, 0, 0, 255, 0, 0, 4, 0, 0, 0, 0, 0, 250], end_key: [], region_epoch: Some(RegionEpoch { conf_ver: 5, version: 24, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 5, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 386, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 393, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Region { id: 850, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 108, 95, 114, 128, 0, 0, 0, 0, 255, 0, 0, 3, 0, 0, 0, 0, 0, 250], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 108, 95, 114, 128, 0, 0, 0, 0, 255, 0, 0, 4, 0, 0, 0, 0, 0, 250], region_epoch: Some(RegionEpoch { conf_ver: 5, version: 24, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 851, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 852, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 853, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), server_is_busy: None, stale_command: None, store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } })"] [cid=3189]
[2019/05/01 12:36:54.355 -07:00] [ERROR] [process.rs:169] ["get snapshot failed"] [err="Request(Error { message: \"region epoch is not match\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: Some(EpochNotMatch { current_regions: [Region { id: 4, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 108, 95, 114, 128, 0, 0, 0, 0, 255, 0, 0, 4, 0, 0, 0, 0, 0, 250], end_key: [], region_epoch: Some(RegionEpoch { conf_ver: 5, version: 24, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 5, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 386, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 393, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Region { id: 850, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 108, 95, 114, 128, 0, 0, 0, 0, 255, 0, 0, 3, 0, 0, 0, 0, 0, 250], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 108, 95, 114, 128, 0, 0, 0, 0, 255, 0, 0, 4, 0, 0, 0, 0, 0, 250], region_epoch: Some(RegionEpoch { conf_ver: 5, version: 24, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 851, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 852, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 853, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), server_is_busy: None, stale_command: None, store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } })"] [cid=3188]
[2019/05/01 12:36:54.355 -07:00] [ERROR] [process.rs:169] ["get snapshot failed"] [err="Request(Error { message: \"region epoch is not match\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: Some(EpochNotMatch { current_regions: [Region { id: 4, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 108, 95, 114, 128, 0, 0, 0, 0, 255, 0, 0, 4, 0, 0, 0, 0, 0, 250], end_key: [], region_epoch: Some(RegionEpoch { conf_ver: 5, version: 24, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 5, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 386, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 393, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Region { id: 850, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 108, 95, 114, 128, 0, 0, 0, 0, 255, 0, 0, 3, 0, 0, 0, 0, 0, 250], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 108, 95, 114, 128, 0, 0, 0, 0, 255, 0, 0, 4, 0, 0, 0, 0, 0, 250], region_epoch: Some(RegionEpoch { conf_ver: 5, version: 24, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 851, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 852, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 853, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), server_is_busy: None, stale_command: None, store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } })"] [cid=3177]
[2019/05/01 12:36:54.356 -07:00] [ERROR] [process.rs:169] ["get snapshot failed"] [err="Request(Error { message: \"region epoch is not match\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: Some(EpochNotMatch { current_regions: [Region { id: 4, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 108, 95, 114, 128, 0, 0, 0, 0, 255, 0, 0, 4, 0, 0, 0, 0, 0, 250], end_key: [], region_epoch: Some(RegionEpoch { conf_ver: 5, version: 24, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 5, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 386, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 393, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Region { id: 850, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 108, 95, 114, 128, 0, 0, 0, 0, 255, 0, 0, 3, 0, 0, 0, 0, 0, 250], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 108, 95, 114, 128, 0, 0, 0, 0, 255, 0, 0, 4, 0, 0, 0, 0, 0, 250], region_epoch: Some(RegionEpoch { conf_ver: 5, version: 24, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 851, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 852, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 853, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), server_is_busy: None, stale_command: None, store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } })"] [cid=3190]
[2019/05/01 12:36:54.378 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 53], lock_version: 408089896926314504, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 53], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:54.402 -07:00] [INFO] [unknown:854] ["[region 850] 853 received MsgRequestVoteResponse from 852 at term 6"]
[2019/05/01 12:36:54.402 -07:00] [INFO] [unknown:1550] ["[region 850] 853 [quorum:2] has received 2 MsgRequestVoteResponse votes and 0 vote rejections"]
[2019/05/01 12:36:54.402 -07:00] [INFO] [unknown:789] ["[region 850] 853 became leader at term 6"]
[2019/05/01 12:36:54.796 -07:00] [INFO] [pd.rs:558] ["try to change peer"] [peer="Peer { id: 782, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [change_type=AddNode] [region_id=108]
[2019/05/01 12:36:54.796 -07:00] [INFO] [peer.rs:1953] ["propose conf change peer"] [change_peer=782] [change_type=AddNode] [peer_id=213] [region_id=108]
[2019/05/01 12:36:54.824 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 782, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=12] [term=7] [peer_id=213] [region_id=108]
[2019/05/01 12:36:54.824 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 6, version: 17, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=213] [region_id=108]
[2019/05/01 12:36:54.824 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 108, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 97, 118, 111, 105, 255, 100, 95, 116, 101, 255, 109, 112, 111, 255, 114, 97, 108, 95, 117, 255, 112, 103, 255, 114, 97, 100, 101, 0, 0, 253, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 97, 99, 107, 255, 95, 108, 111, 103, 255, 0, 0, 0, 255, 0, 0, 0, 0, 0, 247, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 17, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 109, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 110, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 213, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 782, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 782, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=213] [region_id=108]
[2019/05/01 12:36:54.832 -07:00] [INFO] [peer.rs:1318] ["notify pd with change peer region"] [region="Region { id: 108, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 97, 118, 111, 105, 255, 100, 95, 116, 101, 255, 109, 112, 111, 255, 114, 97, 108, 95, 117, 255, 112, 103, 255, 114, 97, 100, 101, 0, 0, 253, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 97, 99, 107, 255, 95, 108, 111, 103, 255, 0, 0, 0, 255, 0, 0, 0, 0, 0, 247, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 7, version: 17, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 109, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 110, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 213, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 782, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=213] [region_id=108]
[2019/05/01 12:36:54.845 -07:00] [INFO] [pd.rs:558] ["try to change peer"] [peer="Peer { id: 109, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [change_type=RemoveNode] [region_id=108]
[2019/05/01 12:36:54.848 -07:00] [INFO] [peer.rs:1953] ["propose conf change peer"] [change_peer=109] [change_type=RemoveNode] [peer_id=213] [region_id=108]
[2019/05/01 12:36:54.857 -07:00] [INFO] [pd.rs:558] ["try to change peer"] [peer="Peer { id: 109, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [change_type=RemoveNode] [region_id=108]
[2019/05/01 12:36:54.879 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 59], lock_version: 408089897122922501, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 59], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:54.885 -07:00] [INFO] [peer.rs:1927] ["there is a pending conf change, try later"] [peer_id=213] [region_id=108]
[2019/05/01 12:36:54.885 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 109, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=13] [term=7] [peer_id=213] [region_id=108]
[2019/05/01 12:36:54.885 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 7, version: 17, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=213] [region_id=108]
[2019/05/01 12:36:54.885 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 108, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 97, 118, 111, 105, 255, 100, 95, 116, 101, 255, 109, 112, 111, 255, 114, 97, 108, 95, 117, 255, 112, 103, 255, 114, 97, 100, 101, 0, 0, 253, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 97, 99, 107, 255, 95, 108, 111, 103, 255, 0, 0, 0, 255, 0, 0, 0, 0, 0, 247, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 7, version: 17, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 109, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 110, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 213, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 782, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 109, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=213] [region_id=108]
[2019/05/01 12:36:54.902 -07:00] [INFO] [peer.rs:1318] ["notify pd with change peer region"] [region="Region { id: 108, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 97, 118, 111, 105, 255, 100, 95, 116, 101, 255, 109, 112, 111, 255, 114, 97, 108, 95, 117, 255, 112, 103, 255, 114, 97, 100, 101, 0, 0, 253, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 97, 99, 107, 255, 95, 108, 111, 103, 255, 0, 0, 0, 255, 0, 0, 0, 0, 0, 247, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 8, version: 17, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 110, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 213, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 782, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=213] [region_id=108]
[2019/05/01 12:36:55.010 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 55], lock_version: 408089897188458500, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 55], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:55.264 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 53], lock_version: 408089897240887303, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 59], lock_ttl: 3002, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:55.453 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 61], lock_version: 408089897306423301, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 61], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:55.781 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=825] [region_id=480]
[2019/05/01 12:36:55.781 -07:00] [INFO] [unknown:719] ["[region 480] 825 became follower at term 0"]
[2019/05/01 12:36:55.781 -07:00] [INFO] [unknown:295] ["[region 480] 825 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:36:55.781 -07:00] [INFO] [unknown:719] ["[region 480] 825 became follower at term 1"]
[2019/05/01 12:36:55.781 -07:00] [INFO] [unknown:920] ["[region 480] 825 [term: 1] received a MsgHeartbeat message with higher term from 482 [term: 7]"]
[2019/05/01 12:36:55.781 -07:00] [INFO] [unknown:719] ["[region 480] 825 became follower at term 7"]
[2019/05/01 12:36:55.841 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 62], lock_version: 408089897385066504, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 62], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:55.919 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 60], lock_version: 408089897424388112, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 60], lock_ttl: 3002, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:55.993 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 63], lock_version: 408089897437495308, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 63], lock_ttl: 3002, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:56.059 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=824] [region_id=28]
[2019/05/01 12:36:56.059 -07:00] [INFO] [unknown:719] ["[region 28] 824 became follower at term 0"]
[2019/05/01 12:36:56.059 -07:00] [INFO] [unknown:295] ["[region 28] 824 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:36:56.059 -07:00] [INFO] [unknown:719] ["[region 28] 824 became follower at term 1"]
[2019/05/01 12:36:56.059 -07:00] [INFO] [unknown:920] ["[region 28] 824 [term: 1] received a MsgHeartbeat message with higher term from 163 [term: 7]"]
[2019/05/01 12:36:56.059 -07:00] [INFO] [unknown:719] ["[region 28] 824 became follower at term 7"]
[2019/05/01 12:36:56.102 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 62], lock_version: 408089897476816902, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 62], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:56.662 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 60], lock_version: 408089897594781702, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 66], lock_ttl: 3078, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:56.687 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 60], lock_version: 408089897594781702, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 66], lock_ttl: 3078, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:56.738 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 64], lock_version: 408089897634103303, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 64], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:56.875 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 63], lock_version: 408089897647210500, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 63], lock_ttl: 3135, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:56.920 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 63], lock_version: 408089897686532112, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 63], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:57.095 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 65], lock_version: 408089897738960900, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 65], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:57.167 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 65], lock_version: 408089897738960900, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 65], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:57.364 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 69], lock_version: 408089897791389713, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 69], lock_ttl: 3064, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:57.372 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 69], lock_version: 408089897791389713, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 69], lock_ttl: 3064, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:57.479 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 63], lock_version: 408089897830711299, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 68], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:57.563 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 69], lock_version: 408089897856925701, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 69], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:57.587 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 71], lock_version: 408089897856925712, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 71], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:57.785 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_480_7_8_(default|lock|write).sst] [snap_key=480_7_8]
[2019/05/01 12:36:57.796 -07:00] [INFO] [unknown:1792] ["[region 480] 825 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 8, term: 7]"]
[2019/05/01 12:36:57.796 -07:00] [INFO] [unknown:1816] ["[region 480] 825 restored progress of 481 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:36:57.796 -07:00] [INFO] [unknown:1816] ["[region 480] 825 restored progress of 482 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:36:57.796 -07:00] [INFO] [unknown:1816] ["[region 480] 825 restored progress of 483 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:36:57.796 -07:00] [INFO] [unknown:1816] ["[region 480] 825 restored progress of 825 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:36:57.796 -07:00] [INFO] [unknown:474] ["[region 480] 825 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 8, term: 7]"]
[2019/05/01 12:36:57.796 -07:00] [INFO] [unknown:1736] ["[region 480] 825 [commit: 8] restored snapshot [index: 8, term: 7]"]
[2019/05/01 12:36:57.796 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=825] [region_id=480]
[2019/05/01 12:36:57.796 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 8, truncated_state: Some(RaftTruncatedState { index: 8, term: 7, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 480, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 100, 101, 108, 97, 255, 121, 95, 107, 101, 255, 121, 95, 119, 255, 114, 105, 116, 101, 0, 254, 0, 0, 253], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 100, 101, 108, 97, 255, 121, 101, 100, 95, 255, 105, 110, 115, 255, 101, 114, 116, 95, 108, 255, 105, 109, 255, 105, 116, 0, 0, 0, 0, 251, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 57, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 481, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 482, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 483, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 825, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=825] [region_id=480]
[2019/05/01 12:36:57.822 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 480] 825"]
[2019/05/01 12:36:57.822 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 480, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 100, 101, 108, 97, 255, 121, 95, 107, 101, 255, 121, 95, 119, 255, 114, 105, 116, 101, 0, 254, 0, 0, 253], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 100, 101, 108, 97, 255, 121, 101, 100, 95, 255, 105, 110, 115, 255, 101, 114, 116, 95, 108, 255, 105, 109, 255, 105, 116, 0, 0, 0, 0, 251, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 57, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 481, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 482, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 483, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 825, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=825] [region_id=480]
[2019/05/01 12:36:57.822 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=480]
[2019/05/01 12:36:57.840 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=18.29381ms] [region_id=480]
[2019/05/01 12:36:57.875 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 69], lock_version: 408089897935568898, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 71], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:58.062 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_28_7_27_(default|lock|write).sst] [snap_key=28_7_27]
[2019/05/01 12:36:58.068 -07:00] [INFO] [unknown:1792] ["[region 28] 824 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 27, term: 7]"]
[2019/05/01 12:36:58.068 -07:00] [INFO] [unknown:1816] ["[region 28] 824 restored progress of 29 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:36:58.068 -07:00] [INFO] [unknown:1816] ["[region 28] 824 restored progress of 163 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:36:58.068 -07:00] [INFO] [unknown:1816] ["[region 28] 824 restored progress of 777 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:36:58.068 -07:00] [INFO] [unknown:1816] ["[region 28] 824 restored progress of 824 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:36:58.068 -07:00] [INFO] [unknown:474] ["[region 28] 824 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 27, term: 7]"]
[2019/05/01 12:36:58.068 -07:00] [INFO] [unknown:1736] ["[region 28] 824 [commit: 27] restored snapshot [index: 27, term: 7]"]
[2019/05/01 12:36:58.068 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=824] [region_id=28]
[2019/05/01 12:36:58.068 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 27, truncated_state: Some(RaftTruncatedState { index: 27, term: 7, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 28, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 114, 128, 0, 0, 0, 0, 255, 1, 212, 199, 0, 0, 0, 0, 0, 250], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 44, 0, 0, 0, 0, 0, 0, 0, 248], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 20, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 29, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 163, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 777, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 824, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=824] [region_id=28]
[2019/05/01 12:36:58.097 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 28, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 114, 128, 0, 0, 0, 0, 255, 1, 212, 199, 0, 0, 0, 0, 0, 250], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 44, 0, 0, 0, 0, 0, 0, 0, 248], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 20, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 29, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 163, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 777, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 824, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=824] [region_id=28]
[2019/05/01 12:36:58.097 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 28] 824"]
[2019/05/01 12:36:58.097 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=28]
[2019/05/01 12:36:58.130 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=32.655888ms] [region_id=28]
[2019/05/01 12:36:58.273 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 70], lock_version: 408089898040426503, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 74], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:58.348 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 75], lock_version: 408089898066640900, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 75], lock_ttl: 3003, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:58.722 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 75], lock_version: 408089898158391298, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 77], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:58.780 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 75], lock_version: 408089898158391298, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 77], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:58.844 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 825, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=9] [term=7] [peer_id=825] [region_id=480]
[2019/05/01 12:36:58.844 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 6, version: 57, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=825] [region_id=480]
[2019/05/01 12:36:58.844 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 480, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 100, 101, 108, 97, 255, 121, 95, 107, 101, 255, 121, 95, 119, 255, 114, 105, 116, 101, 0, 254, 0, 0, 253], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 100, 101, 108, 97, 255, 121, 101, 100, 95, 255, 105, 110, 115, 255, 101, 114, 116, 95, 108, 255, 105, 109, 255, 105, 116, 0, 0, 0, 0, 251, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 57, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 481, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 482, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 483, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 825, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 825, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=825] [region_id=480]
[2019/05/01 12:36:58.946 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 481, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=10] [term=7] [peer_id=825] [region_id=480]
[2019/05/01 12:36:58.946 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 7, version: 57, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=825] [region_id=480]
[2019/05/01 12:36:58.946 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 480, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 100, 101, 108, 97, 255, 121, 95, 107, 101, 255, 121, 95, 119, 255, 114, 105, 116, 101, 0, 254, 0, 0, 253], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 100, 101, 108, 97, 255, 121, 101, 100, 95, 255, 105, 110, 115, 255, 101, 114, 116, 95, 108, 255, 105, 109, 255, 105, 116, 0, 0, 0, 0, 251, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 7, version: 57, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 481, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 482, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 483, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 825, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 481, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=825] [region_id=480]
[2019/05/01 12:36:59.110 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 824, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=28] [term=7] [peer_id=824] [region_id=28]
[2019/05/01 12:36:59.110 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 9, version: 20, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=824] [region_id=28]
[2019/05/01 12:36:59.110 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 28, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 114, 128, 0, 0, 0, 0, 255, 1, 212, 199, 0, 0, 0, 0, 0, 250], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 44, 0, 0, 0, 0, 0, 0, 0, 248], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 20, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 29, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 163, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 777, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 824, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 824, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=824] [region_id=28]
[2019/05/01 12:36:59.166 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 73], lock_version: 408089898263248900, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 75], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:59.191 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 29, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=29] [term=7] [peer_id=824] [region_id=28]
[2019/05/01 12:36:59.191 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 10, version: 20, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=824] [region_id=28]
[2019/05/01 12:36:59.191 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 28, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 114, 128, 0, 0, 0, 0, 255, 1, 212, 199, 0, 0, 0, 0, 0, 250], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 44, 0, 0, 0, 0, 0, 0, 0, 248], region_epoch: Some(RegionEpoch { conf_ver: 10, version: 20, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 29, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 163, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 777, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 824, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 29, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=824] [region_id=28]
[2019/05/01 12:36:59.246 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddLearnerNode, peer: Some(Peer { id: 898, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=11] [term=7] [peer_id=484] [region_id=417]
[2019/05/01 12:36:59.246 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 8, version: 47, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddLearner] [peer_id=484] [region_id=417]
[2019/05/01 12:36:59.246 -07:00] [INFO] [apply.rs:1476] ["add learner successfully"] [region="Region { id: 417, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 99, 111, 108, 108, 255, 97, 116, 105, 111, 255, 110, 95, 100, 255, 97, 116, 97, 98, 97, 255, 115, 101, 255, 0, 0, 0, 0, 0, 0, 249, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 99, 111, 108, 108, 255, 97, 116, 105, 111, 255, 110, 95, 115, 255, 101, 114, 118, 101, 114, 255, 0, 0, 255, 0, 0, 0, 0, 0, 0, 247, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 8, version: 47, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 419, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 420, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 484, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 898, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=484] [region_id=417]
[2019/05/01 12:36:59.337 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 76], lock_version: 408089898302570497, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 76], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:59.403 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 74], lock_version: 408089898302570503, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 74], lock_ttl: 3063, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:59.500 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 78], lock_version: 408089898354999301, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 78], lock_ttl: 3061, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:59.500 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 78], lock_version: 408089898354999301, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 78], lock_ttl: 3061, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:59.878 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 80], lock_version: 408089898446749700, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 80], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:59.894 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=897] [region_id=598]
[2019/05/01 12:36:59.894 -07:00] [INFO] [unknown:719] ["[region 598] 897 became follower at term 0"]
[2019/05/01 12:36:59.894 -07:00] [INFO] [unknown:295] ["[region 598] 897 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:36:59.894 -07:00] [INFO] [unknown:719] ["[region 598] 897 became follower at term 1"]
[2019/05/01 12:36:59.894 -07:00] [INFO] [unknown:920] ["[region 598] 897 [term: 1] received a MsgHeartbeat message with higher term from 668 [term: 8]"]
[2019/05/01 12:36:59.894 -07:00] [INFO] [unknown:719] ["[region 598] 897 became follower at term 8"]
[2019/05/01 12:36:59.931 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 81], lock_version: 408089898459856904, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 81], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:37:00.355 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 76], lock_version: 408089898551607303, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 78], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:37:00.391 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 76], lock_version: 408089898551607303, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 78], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:37:00.439 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 81], lock_version: 408089898617143309, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 81], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:37:00.440 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 79], lock_version: 408089898590928901, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 79], lock_ttl: 3084, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:37:00.531 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 79], lock_version: 408089898630250519, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 79], lock_ttl: 3002, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:37:00.538 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 81], lock_version: 408089898643357701, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 81], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:37:00.686 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 82], lock_version: 408089898669572105, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 82], lock_ttl: 3002, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:37:00.744 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 81], lock_version: 408089898695786507, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 81], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:37:00.815 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=899] [region_id=225]
[2019/05/01 12:37:00.815 -07:00] [INFO] [unknown:719] ["[region 225] 899 became follower at term 0"]
[2019/05/01 12:37:00.815 -07:00] [INFO] [unknown:295] ["[region 225] 899 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:37:00.815 -07:00] [INFO] [unknown:719] ["[region 225] 899 became follower at term 1"]
[2019/05/01 12:37:00.815 -07:00] [INFO] [unknown:920] ["[region 225] 899 [term: 1] received a MsgHeartbeat message with higher term from 228 [term: 7]"]
[2019/05/01 12:37:00.815 -07:00] [INFO] [unknown:719] ["[region 225] 899 became follower at term 7"]
[2019/05/01 12:37:00.999 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 88], lock_version: 408089898761322503, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 88], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:37:01.222 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 87], lock_version: 408089898826858505, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 87], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:37:01.245 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 87], lock_version: 408089898826858505, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 87], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:37:01.642 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 89], lock_version: 408089898918608902, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 89], lock_ttl: 3002, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:37:01.788 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 85], lock_version: 408089898957930506, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 88], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:37:01.897 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_598_8_12_(default|lock|write).sst] [snap_key=598_8_12]
[2019/05/01 12:37:01.905 -07:00] [INFO] [unknown:1792] ["[region 598] 897 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 12, term: 8]"]
[2019/05/01 12:37:01.905 -07:00] [INFO] [unknown:1816] ["[region 598] 897 restored progress of 600 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:37:01.905 -07:00] [INFO] [unknown:1816] ["[region 598] 897 restored progress of 601 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:37:01.905 -07:00] [INFO] [unknown:1816] ["[region 598] 897 restored progress of 668 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:37:01.905 -07:00] [INFO] [unknown:1816] ["[region 598] 897 restored progress of 897 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:37:01.905 -07:00] [INFO] [unknown:474] ["[region 598] 897 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 12, term: 8]"]
[2019/05/01 12:37:01.905 -07:00] [INFO] [unknown:1736] ["[region 598] 897 [commit: 12] restored snapshot [index: 12, term: 8]"]
[2019/05/01 12:37:01.905 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=897] [region_id=598]
[2019/05/01 12:37:01.905 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 12, truncated_state: Some(RaftTruncatedState { index: 12, term: 8, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 598, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 102, 111, 114, 101, 255, 105, 103, 110, 95, 255, 107, 101, 121, 255, 95, 99, 104, 101, 99, 255, 107, 115, 255, 0, 0, 0, 0, 0, 0, 249, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 102, 116, 95, 98, 255, 111, 111, 108, 101, 255, 97, 110, 95, 255, 115, 121, 110, 116, 97, 255, 120, 0, 255, 0, 0, 0, 0, 0, 0, 248, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 77, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 600, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 601, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 668, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 897, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=897] [region_id=598]
[2019/05/01 12:37:01.908 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 88], lock_version: 408089898997252101, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 88], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:37:01.921 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 598] 897"]
[2019/05/01 12:37:01.921 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 598, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 102, 111, 114, 101, 255, 105, 103, 110, 95, 255, 107, 101, 121, 255, 95, 99, 104, 101, 99, 255, 107, 115, 255, 0, 0, 0, 0, 0, 0, 249, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 102, 116, 95, 98, 255, 111, 111, 108, 101, 255, 97, 110, 95, 255, 115, 121, 110, 116, 97, 255, 120, 0, 255, 0, 0, 0, 0, 0, 0, 248, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 77, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 600, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 601, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 668, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 897, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=897] [region_id=598]
[2019/05/01 12:37:01.921 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=598]
[2019/05/01 12:37:01.936 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=14.814898ms] [region_id=598]
[2019/05/01 12:37:01.939 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 87], lock_version: 408089898984144905, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 87], lock_ttl: 3099, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:37:02.013 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 92], lock_version: 408089899023466506, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 92], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:37:02.163 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 92], lock_version: 408089899062788099, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 92], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:37:02.466 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 93], lock_version: 408089899141431301, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 93], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:37:02.483 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 95], lock_version: 408089899141431312, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 95], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:37:02.561 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 91], lock_version: 408089899154538515, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 91], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:37:02.629 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 94], lock_version: 408089899154538509, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 94], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:37:02.818 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_225_7_11_(default|lock|write).sst] [snap_key=225_7_11]
[2019/05/01 12:37:02.823 -07:00] [INFO] [unknown:1792] ["[region 225] 899 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 11, term: 7]"]
[2019/05/01 12:37:02.823 -07:00] [INFO] [unknown:1816] ["[region 225] 899 restored progress of 227 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:37:02.823 -07:00] [INFO] [unknown:1816] ["[region 225] 899 restored progress of 228 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:37:02.823 -07:00] [INFO] [unknown:1816] ["[region 225] 899 restored progress of 486 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:37:02.823 -07:00] [INFO] [unknown:1816] ["[region 225] 899 restored progress of 899 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:37:02.823 -07:00] [INFO] [unknown:474] ["[region 225] 899 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 11, term: 7]"]
[2019/05/01 12:37:02.823 -07:00] [INFO] [unknown:1736] ["[region 225] 899 [commit: 11] restored snapshot [index: 11, term: 7]"]
[2019/05/01 12:37:02.823 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=899] [region_id=225]
[2019/05/01 12:37:02.823 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 11, truncated_state: Some(RaftTruncatedState { index: 11, term: 7, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 225, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 95, 101, 255, 114, 114, 111, 255, 114, 95, 97, 99, 116, 255, 105, 111, 255, 110, 0, 0, 0, 0, 0, 250, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 95, 102, 255, 111, 114, 109, 255, 97, 116, 0, 0, 0, 252, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 27, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 227, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 228, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 486, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 899, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=899] [region_id=225]
[2019/05/01 12:37:02.842 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 225, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 95, 101, 255, 114, 114, 111, 255, 114, 95, 97, 99, 116, 255, 105, 111, 255, 110, 0, 0, 0, 0, 0, 250, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 95, 102, 255, 111, 114, 109, 255, 97, 116, 0, 0, 0, 252, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 27, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 227, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 228, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 486, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 899, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=899] [region_id=225]
[2019/05/01 12:37:02.842 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 225] 899"]
[2019/05/01 12:37:02.842 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=225]
[2019/05/01 12:37:02.876 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=33.569258ms] [region_id=225]
[2019/05/01 12:37:02.944 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 897, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=13] [term=8] [peer_id=897] [region_id=598]
[2019/05/01 12:37:02.944 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 9, version: 77, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=897] [region_id=598]
[2019/05/01 12:37:02.944 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 598, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 102, 111, 114, 101, 255, 105, 103, 110, 95, 255, 107, 101, 121, 255, 95, 99, 104, 101, 99, 255, 107, 115, 255, 0, 0, 0, 0, 0, 0, 249, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 102, 116, 95, 98, 255, 111, 111, 108, 101, 255, 97, 110, 95, 255, 115, 121, 110, 116, 97, 255, 120, 0, 255, 0, 0, 0, 0, 0, 0, 248, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 77, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 600, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 601, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 668, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 897, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 897, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=897] [region_id=598]
[2019/05/01 12:37:03.005 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 600, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=14] [term=8] [peer_id=897] [region_id=598]
[2019/05/01 12:37:03.006 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 10, version: 77, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=897] [region_id=598]
[2019/05/01 12:37:03.006 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 598, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 102, 111, 114, 101, 255, 105, 103, 110, 95, 255, 107, 101, 121, 255, 95, 99, 104, 101, 99, 255, 107, 115, 255, 0, 0, 0, 0, 0, 0, 249, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 102, 116, 95, 98, 255, 111, 111, 108, 101, 255, 97, 110, 95, 255, 115, 121, 110, 116, 97, 255, 120, 0, 255, 0, 0, 0, 0, 0, 0, 248, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 10, version: 77, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 600, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 601, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 668, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 897, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 600, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=897] [region_id=598]
[2019/05/01 12:37:03.378 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 93], lock_version: 408089899364253700, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 95], lock_ttl: 3003, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:37:03.474 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 100], lock_version: 408089899416682499, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 100], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:37:03.928 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 898, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=12] [term=7] [peer_id=484] [region_id=417]
[2019/05/01 12:37:03.928 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 9, version: 47, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=484] [region_id=417]
[2019/05/01 12:37:03.928 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 417, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 99, 111, 108, 108, 255, 97, 116, 105, 111, 255, 110, 95, 100, 255, 97, 116, 97, 98, 97, 255, 115, 101, 255, 0, 0, 0, 0, 0, 0, 249, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 99, 111, 108, 108, 255, 97, 116, 105, 111, 255, 110, 95, 115, 255, 101, 114, 118, 101, 114, 255, 0, 0, 255, 0, 0, 0, 0, 0, 0, 247, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 47, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 419, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 420, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 484, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 898, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 898, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=484] [region_id=417]
[2019/05/01 12:37:03.974 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 899, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=12] [term=7] [peer_id=899] [region_id=225]
[2019/05/01 12:37:03.976 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 9, version: 27, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=899] [region_id=225]
[2019/05/01 12:37:03.976 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 225, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 95, 101, 255, 114, 114, 111, 255, 114, 95, 97, 99, 116, 255, 105, 111, 255, 110, 0, 0, 0, 0, 0, 250, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 95, 102, 255, 111, 114, 109, 255, 97, 116, 0, 0, 0, 252, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 27, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 227, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 228, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 486, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 899, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 899, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=899] [region_id=225]
[2019/05/01 12:37:04.139 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 419, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=13] [term=7] [peer_id=484] [region_id=417]
[2019/05/01 12:37:04.139 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 10, version: 47, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=484] [region_id=417]
[2019/05/01 12:37:04.140 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 417, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 99, 111, 108, 108, 255, 97, 116, 105, 111, 255, 110, 95, 100, 255, 97, 116, 97, 98, 97, 255, 115, 101, 255, 0, 0, 0, 0, 0, 0, 249, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 99, 111, 108, 108, 255, 97, 116, 105, 111, 255, 110, 95, 115, 255, 101, 114, 118, 101, 114, 255, 0, 0, 255, 0, 0, 0, 0, 0, 0, 247, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 10, version: 47, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 419, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 420, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 484, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 898, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 419, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=484] [region_id=417]
[2019/05/01 12:37:04.165 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 227, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=13] [term=7] [peer_id=899] [region_id=225]
[2019/05/01 12:37:04.165 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 10, version: 27, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=899] [region_id=225]
[2019/05/01 12:37:04.165 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 225, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 95, 101, 255, 114, 114, 111, 255, 114, 95, 97, 99, 116, 255, 105, 111, 255, 110, 0, 0, 0, 0, 0, 250, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 95, 102, 255, 111, 114, 109, 255, 97, 116, 0, 0, 0, 252, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 10, version: 27, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 227, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 228, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 486, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 899, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 227, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=899] [region_id=225]
[2019/05/01 12:37:04.210 -07:00] [INFO] [keys.rs:155] ["approximate keys over threshold, need to do split check"] [threshold=5] [keys=6833] [region_id=4]
[2019/05/01 12:37:04.239 -07:00] [INFO] [peer.rs:294] ["on split"] [split_keys="10 keys range from \"t\\200\\000\\000\\000\\000\\000\\000\\377l_r\\200\\000\\000\\000\\000\\377\\000\\000\\004\\000\\000\\000\\000\\000\\372\\372V,j\\263w\\377\\374\" to \"t\\200\\000\\000\\000\\000\\000\\000\\377l_r\\200\\000\\000\\000\\000\\377\\000\\000\\004\\000\\000\\000\\000\\000\\372\\372V,j\\312\\037\\377\\333\""] [peer_id=393] [region_id=4]
[2019/05/01 12:37:04.239 -07:00] [INFO] [pd.rs:285] ["try to batch split region"] [region="Region { id: 4, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 108, 95, 114, 128, 0, 0, 0, 0, 255, 0, 0, 4, 0, 0, 0, 0, 0, 250], end_key: [], region_epoch: Some(RegionEpoch { conf_ver: 5, version: 24, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 5, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 386, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 393, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [new_region_ids="[SplitID { new_region_id: 944, new_peer_ids: [945, 946, 947], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, SplitID { new_region_id: 948, new_peer_ids: [949, 950, 951], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, SplitID { new_region_id: 952, new_peer_ids: [953, 954, 955], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, SplitID { new_region_id: 956, new_peer_ids: [957, 958, 959], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, SplitID { new_region_id: 960, new_peer_ids: [961, 962, 963], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, SplitID { new_region_id: 964, new_peer_ids: [965, 966, 967], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, SplitID { new_region_id: 968, new_peer_ids: [969, 970, 971], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, SplitID { new_region_id: 972, new_peer_ids: [973, 974, 975], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, SplitID { new_region_id: 976, new_peer_ids: [977, 978, 979], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, SplitID { new_region_id: 980, new_peer_ids: [981, 982, 983], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }]"] [region_id=4]
[2019/05/01 12:37:04.254 -07:00] [WARN] [split_observer.rs:98] ["invalid key, skip"] [err="\"key \\\"t\\\\200\\\\000\\\\000\\\\000\\\\000\\\\000\\\\000\\\\377l_r\\\\200\\\\000\\\\000\\\\000\\\\000\\\\377\\\\000\\\\000\\\\004\\\\000\\\\000\\\\000\\\\000\\\\000\\\\372\\\" should be in (\\\"t\\\\200\\\\000\\\\000\\\\000\\\\000\\\\000\\\\000\\\\377l_r\\\\200\\\\000\\\\000\\\\000\\\\000\\\\377\\\\000\\\\000\\\\004\\\\000\\\\000\\\\000\\\\000\\\\000\\\\372\\\", \\\"\\\")\""] [index=0] [region_id=4]
[2019/05/01 12:37:04.254 -07:00] [WARN] [split_observer.rs:98] ["invalid key, skip"] [err="\"key \\\"t\\\\200\\\\000\\\\000\\\\000\\\\000\\\\000\\\\000\\\\377l_r\\\\200\\\\000\\\\000\\\\000\\\\000\\\\377\\\\000\\\\000\\\\004\\\\000\\\\000\\\\000\\\\000\\\\000\\\\372\\\" should be in (\\\"t\\\\200\\\\000\\\\000\\\\000\\\\000\\\\000\\\\000\\\\377l_r\\\\200\\\\000\\\\000\\\\000\\\\000\\\\377\\\\000\\\\000\\\\004\\\\000\\\\000\\\\000\\\\000\\\\000\\\\372\\\", \\\"\\\")\""] [index=1] [region_id=4]
[2019/05/01 12:37:04.254 -07:00] [WARN] [split_observer.rs:98] ["invalid key, skip"] [err="\"key \\\"t\\\\200\\\\000\\\\000\\\\000\\\\000\\\\000\\\\000\\\\377l_r\\\\200\\\\000\\\\000\\\\000\\\\000\\\\377\\\\000\\\\000\\\\004\\\\000\\\\000\\\\000\\\\000\\\\000\\\\372\\\" should be in (\\\"t\\\\200\\\\000\\\\000\\\\000\\\\000\\\\000\\\\000\\\\377l_r\\\\200\\\\000\\\\000\\\\000\\\\000\\\\377\\\\000\\\\000\\\\004\\\\000\\\\000\\\\000\\\\000\\\\000\\\\372\\\", \\\"\\\")\""] [index=2] [region_id=4]
[2019/05/01 12:37:04.254 -07:00] [WARN] [split_observer.rs:98] ["invalid key, skip"] [err="\"key \\\"t\\\\200\\\\000\\\\000\\\\000\\\\000\\\\000\\\\000\\\\377l_r\\\\200\\\\000\\\\000\\\\000\\\\000\\\\377\\\\000\\\\000\\\\004\\\\000\\\\000\\\\000\\\\000\\\\000\\\\372\\\" should be in (\\\"t\\\\200\\\\000\\\\000\\\\000\\\\000\\\\000\\\\000\\\\377l_r\\\\200\\\\000\\\\000\\\\000\\\\000\\\\377\\\\000\\\\000\\\\004\\\\000\\\\000\\\\000\\\\000\\\\000\\\\372\\\", \\\"\\\")\""] [index=3] [region_id=4]
[2019/05/01 12:37:04.254 -07:00] [WARN] [split_observer.rs:98] ["invalid key, skip"] [err="\"key \\\"t\\\\200\\\\000\\\\000\\\\000\\\\000\\\\000\\\\000\\\\377l_r\\\\200\\\\000\\\\000\\\\000\\\\000\\\\377\\\\000\\\\000\\\\004\\\\000\\\\000\\\\000\\\\000\\\\000\\\\372\\\" should be in (\\\"t\\\\200\\\\000\\\\000\\\\000\\\\000\\\\000\\\\000\\\\377l_r\\\\200\\\\000\\\\000\\\\000\\\\000\\\\377\\\\000\\\\000\\\\004\\\\000\\\\000\\\\000\\\\000\\\\000\\\\372\\\", \\\"\\\")\""] [index=4] [region_id=4]
[2019/05/01 12:37:04.254 -07:00] [WARN] [split_observer.rs:98] ["invalid key, skip"] [err="\"key \\\"t\\\\200\\\\000\\\\000\\\\000\\\\000\\\\000\\\\000\\\\377l_r\\\\200\\\\000\\\\000\\\\000\\\\000\\\\377\\\\000\\\\000\\\\004\\\\000\\\\000\\\\000\\\\000\\\\000\\\\372\\\" should be in (\\\"t\\\\200\\\\000\\\\000\\\\000\\\\000\\\\000\\\\000\\\\377l_r\\\\200\\\\000\\\\000\\\\000\\\\000\\\\377\\\\000\\\\000\\\\004\\\\000\\\\000\\\\000\\\\000\\\\000\\\\372\\\", \\\"\\\")\""] [index=5] [region_id=4]
[2019/05/01 12:37:04.254 -07:00] [WARN] [split_observer.rs:98] ["invalid key, skip"] [err="\"key \\\"t\\\\200\\\\000\\\\000\\\\000\\\\000\\\\000\\\\000\\\\377l_r\\\\200\\\\000\\\\000\\\\000\\\\000\\\\377\\\\000\\\\000\\\\004\\\\000\\\\000\\\\000\\\\000\\\\000\\\\372\\\" should be in (\\\"t\\\\200\\\\000\\\\000\\\\000\\\\000\\\\000\\\\000\\\\377l_r\\\\200\\\\000\\\\000\\\\000\\\\000\\\\377\\\\000\\\\000\\\\004\\\\000\\\\000\\\\000\\\\000\\\\000\\\\372\\\", \\\"\\\")\""] [index=6] [region_id=4]
[2019/05/01 12:37:04.254 -07:00] [WARN] [split_observer.rs:98] ["invalid key, skip"] [err="\"key \\\"t\\\\200\\\\000\\\\000\\\\000\\\\000\\\\000\\\\000\\\\377l_r\\\\200\\\\000\\\\000\\\\000\\\\000\\\\377\\\\000\\\\000\\\\004\\\\000\\\\000\\\\000\\\\000\\\\000\\\\372\\\" should be in (\\\"t\\\\200\\\\000\\\\000\\\\000\\\\000\\\\000\\\\000\\\\377l_r\\\\200\\\\000\\\\000\\\\000\\\\000\\\\377\\\\000\\\\000\\\\004\\\\000\\\\000\\\\000\\\\000\\\\000\\\\372\\\", \\\"\\\")\""] [index=7] [region_id=4]
[2019/05/01 12:37:04.254 -07:00] [WARN] [split_observer.rs:98] ["invalid key, skip"] [err="\"key \\\"t\\\\200\\\\000\\\\000\\\\000\\\\000\\\\000\\\\000\\\\377l_r\\\\200\\\\000\\\\000\\\\000\\\\000\\\\377\\\\000\\\\000\\\\004\\\\000\\\\000\\\\000\\\\000\\\\000\\\\372\\\" should be in (\\\"t\\\\200\\\\000\\\\000\\\\000\\\\000\\\\000\\\\000\\\\377l_r\\\\200\\\\000\\\\000\\\\000\\\\000\\\\377\\\\000\\\\000\\\\004\\\\000\\\\000\\\\000\\\\000\\\\000\\\\372\\\", \\\"\\\")\""] [index=8] [region_id=4]
[2019/05/01 12:37:04.254 -07:00] [WARN] [split_observer.rs:98] ["invalid key, skip"] [err="\"key \\\"t\\\\200\\\\000\\\\000\\\\000\\\\000\\\\000\\\\000\\\\377l_r\\\\200\\\\000\\\\000\\\\000\\\\000\\\\377\\\\000\\\\000\\\\004\\\\000\\\\000\\\\000\\\\000\\\\000\\\\372\\\" should be in (\\\"t\\\\200\\\\000\\\\000\\\\000\\\\000\\\\000\\\\000\\\\377l_r\\\\200\\\\000\\\\000\\\\000\\\\000\\\\377\\\\000\\\\000\\\\004\\\\000\\\\000\\\\000\\\\000\\\\000\\\\372\\\", \\\"\\\")\""] [index=9] [region_id=4]
[2019/05/01 12:37:04.254 -07:00] [ERROR] [split_observer.rs:161] ["failed to handle split req"] [err="\"no valid key found for split.\""] [region_id=4]
[2019/05/01 12:37:04.254 -07:00] [WARN] [peer.rs:1846] ["skip proposal"] [err="Coprocessor(Other(StringError(\"[src/raftstore/coprocessor/split_observer.rs:166]: no valid key found for split.\")))"] [peer_id=393] [region_id=4]
[2019/05/01 12:37:04.340 -07:00] [INFO] [keys.rs:155] ["approximate keys over threshold, need to do split check"] [threshold=5] [keys=2090] [region_id=850]
[2019/05/01 12:37:04.340 -07:00] [INFO] [peer.rs:294] ["on split"] [split_keys="5 keys range from \"t\\200\\000\\000\\000\\000\\000\\000\\377l_r\\200\\000\\000\\000\\000\\377\\000\\000\\003\\000\\000\\000\\000\\000\\372\\372V,j\\277/\\377\\376\" to \"t\\200\\000\\000\\000\\000\\000\\000\\377l_r\\200\\000\\000\\000\\000\\377\\000\\000\\003\\000\\000\\000\\000\\000\\372\\372V,j\\311W\\377\\367\""] [peer_id=853] [region_id=850]
[2019/05/01 12:37:04.367 -07:00] [INFO] [pd.rs:285] ["try to batch split region"] [region="Region { id: 850, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 108, 95, 114, 128, 0, 0, 0, 0, 255, 0, 0, 3, 0, 0, 0, 0, 0, 250], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 108, 95, 114, 128, 0, 0, 0, 0, 255, 0, 0, 4, 0, 0, 0, 0, 0, 250], region_epoch: Some(RegionEpoch { conf_ver: 5, version: 24, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 851, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 852, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 853, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [new_region_ids="[SplitID { new_region_id: 984, new_peer_ids: [985, 986, 987], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, SplitID { new_region_id: 988, new_peer_ids: [989, 990, 991], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, SplitID { new_region_id: 992, new_peer_ids: [993, 994, 995], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, SplitID { new_region_id: 996, new_peer_ids: [997, 998, 999], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, SplitID { new_region_id: 1000, new_peer_ids: [1001, 1002, 1003], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }]"] [region_id=850]
[2019/05/01 12:37:04.367 -07:00] [WARN] [split_observer.rs:98] ["invalid key, skip"] [err="\"key \\\"t\\\\200\\\\000\\\\000\\\\000\\\\000\\\\000\\\\000\\\\377l_r\\\\200\\\\000\\\\000\\\\000\\\\000\\\\377\\\\000\\\\000\\\\003\\\\000\\\\000\\\\000\\\\000\\\\000\\\\372\\\" should be in (\\\"t\\\\200\\\\000\\\\000\\\\000\\\\000\\\\000\\\\000\\\\377l_r\\\\200\\\\000\\\\000\\\\000\\\\000\\\\377\\\\000\\\\000\\\\003\\\\000\\\\000\\\\000\\\\000\\\\000\\\\372\\\", \\\"t\\\\200\\\\000\\\\000\\\\000\\\\000\\\\000\\\\000\\\\377l_r\\\\200\\\\000\\\\000\\\\000\\\\000\\\\377\\\\000\\\\000\\\\004\\\\000\\\\000\\\\000\\\\000\\\\000\\\\372\\\")\""] [index=0] [region_id=850]
[2019/05/01 12:37:04.367 -07:00] [WARN] [split_observer.rs:98] ["invalid key, skip"] [err="\"key \\\"t\\\\200\\\\000\\\\000\\\\000\\\\000\\\\000\\\\000\\\\377l_r\\\\200\\\\000\\\\000\\\\000\\\\000\\\\377\\\\000\\\\000\\\\003\\\\000\\\\000\\\\000\\\\000\\\\000\\\\372\\\" should be in (\\\"t\\\\200\\\\000\\\\000\\\\000\\\\000\\\\000\\\\000\\\\377l_r\\\\200\\\\000\\\\000\\\\000\\\\000\\\\377\\\\000\\\\000\\\\003\\\\000\\\\000\\\\000\\\\000\\\\000\\\\372\\\", \\\"t\\\\200\\\\000\\\\000\\\\000\\\\000\\\\000\\\\000\\\\377l_r\\\\200\\\\000\\\\000\\\\000\\\\000\\\\377\\\\000\\\\000\\\\004\\\\000\\\\000\\\\000\\\\000\\\\000\\\\372\\\")\""] [index=1] [region_id=850]
[2019/05/01 12:37:04.367 -07:00] [WARN] [split_observer.rs:98] ["invalid key, skip"] [err="\"key \\\"t\\\\200\\\\000\\\\000\\\\000\\\\000\\\\000\\\\000\\\\377l_r\\\\200\\\\000\\\\000\\\\000\\\\000\\\\377\\\\000\\\\000\\\\003\\\\000\\\\000\\\\000\\\\000\\\\000\\\\372\\\" should be in (\\\"t\\\\200\\\\000\\\\000\\\\000\\\\000\\\\000\\\\000\\\\377l_r\\\\200\\\\000\\\\000\\\\000\\\\000\\\\377\\\\000\\\\000\\\\003\\\\000\\\\000\\\\000\\\\000\\\\000\\\\372\\\", \\\"t\\\\200\\\\000\\\\000\\\\000\\\\000\\\\000\\\\000\\\\377l_r\\\\200\\\\000\\\\000\\\\000\\\\000\\\\377\\\\000\\\\000\\\\004\\\\000\\\\000\\\\000\\\\000\\\\000\\\\372\\\")\""] [index=2] [region_id=850]
[2019/05/01 12:37:04.367 -07:00] [WARN] [split_observer.rs:98] ["invalid key, skip"] [err="\"key \\\"t\\\\200\\\\000\\\\000\\\\000\\\\000\\\\000\\\\000\\\\377l_r\\\\200\\\\000\\\\000\\\\000\\\\000\\\\377\\\\000\\\\000\\\\003\\\\000\\\\000\\\\000\\\\000\\\\000\\\\372\\\" should be in (\\\"t\\\\200\\\\000\\\\000\\\\000\\\\000\\\\000\\\\000\\\\377l_r\\\\200\\\\000\\\\000\\\\000\\\\000\\\\377\\\\000\\\\000\\\\003\\\\000\\\\000\\\\000\\\\000\\\\000\\\\372\\\", \\\"t\\\\200\\\\000\\\\000\\\\000\\\\000\\\\000\\\\000\\\\377l_r\\\\200\\\\000\\\\000\\\\000\\\\000\\\\377\\\\000\\\\000\\\\004\\\\000\\\\000\\\\000\\\\000\\\\000\\\\372\\\")\""] [index=3] [region_id=850]
[2019/05/01 12:37:04.367 -07:00] [WARN] [split_observer.rs:98] ["invalid key, skip"] [err="\"key \\\"t\\\\200\\\\000\\\\000\\\\000\\\\000\\\\000\\\\000\\\\377l_r\\\\200\\\\000\\\\000\\\\000\\\\000\\\\377\\\\000\\\\000\\\\003\\\\000\\\\000\\\\000\\\\000\\\\000\\\\372\\\" should be in (\\\"t\\\\200\\\\000\\\\000\\\\000\\\\000\\\\000\\\\000\\\\377l_r\\\\200\\\\000\\\\000\\\\000\\\\000\\\\377\\\\000\\\\000\\\\003\\\\000\\\\000\\\\000\\\\000\\\\000\\\\372\\\", \\\"t\\\\200\\\\000\\\\000\\\\000\\\\000\\\\000\\\\000\\\\377l_r\\\\200\\\\000\\\\000\\\\000\\\\000\\\\377\\\\000\\\\000\\\\004\\\\000\\\\000\\\\000\\\\000\\\\000\\\\372\\\")\""] [index=4] [region_id=850]
[2019/05/01 12:37:04.367 -07:00] [ERROR] [split_observer.rs:161] ["failed to handle split req"] [err="\"no valid key found for split.\""] [region_id=850]
[2019/05/01 12:37:04.367 -07:00] [WARN] [peer.rs:1846] ["skip proposal"] [err="Coprocessor(Other(StringError(\"[src/raftstore/coprocessor/split_observer.rs:166]: no valid key found for split.\")))"] [peer_id=853] [region_id=850]
[2019/05/01 12:37:04.404 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 101], lock_version: 408089899652612102, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 101], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:37:04.669 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 97], lock_version: 408089899718148101, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 97], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:37:04.761 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 101], lock_version: 408089899744362502, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 102], lock_ttl: 3002, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:37:04.856 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 96], lock_version: 408089899757469710, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 99], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:37:05.766 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=943] [region_id=684]
[2019/05/01 12:37:05.766 -07:00] [INFO] [unknown:719] ["[region 684] 943 became follower at term 0"]
[2019/05/01 12:37:05.766 -07:00] [INFO] [unknown:295] ["[region 684] 943 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:37:05.766 -07:00] [INFO] [unknown:719] ["[region 684] 943 became follower at term 1"]
[2019/05/01 12:37:05.766 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=942] [region_id=921]
[2019/05/01 12:37:05.766 -07:00] [INFO] [unknown:719] ["[region 921] 942 became follower at term 0"]
[2019/05/01 12:37:05.766 -07:00] [INFO] [unknown:295] ["[region 921] 942 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:37:05.766 -07:00] [INFO] [unknown:719] ["[region 921] 942 became follower at term 1"]
[2019/05/01 12:37:05.766 -07:00] [INFO] [unknown:920] ["[region 684] 943 [term: 1] received a MsgHeartbeat message with higher term from 685 [term: 6]"]
[2019/05/01 12:37:05.766 -07:00] [INFO] [unknown:719] ["[region 684] 943 became follower at term 6"]
[2019/05/01 12:37:05.766 -07:00] [INFO] [unknown:920] ["[region 921] 942 [term: 1] received a MsgHeartbeat message with higher term from 922 [term: 6]"]
[2019/05/01 12:37:05.766 -07:00] [INFO] [unknown:719] ["[region 921] 942 became follower at term 6"]
[2019/05/01 12:37:05.827 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=941] [region_id=229]
[2019/05/01 12:37:05.827 -07:00] [INFO] [unknown:719] ["[region 229] 941 became follower at term 0"]
[2019/05/01 12:37:05.827 -07:00] [INFO] [unknown:295] ["[region 229] 941 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:37:05.827 -07:00] [INFO] [unknown:719] ["[region 229] 941 became follower at term 1"]
[2019/05/01 12:37:05.827 -07:00] [INFO] [unknown:920] ["[region 229] 941 [term: 1] received a MsgHeartbeat message with higher term from 232 [term: 7]"]
[2019/05/01 12:37:05.827 -07:00] [INFO] [unknown:719] ["[region 229] 941 became follower at term 7"]
[2019/05/01 12:37:05.895 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 105], lock_version: 408089900006506498, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 106], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:37:05.949 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 105], lock_version: 408089900006506498, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 106], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:37:06.064 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 101], lock_version: 408089900045828100, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 102], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:37:06.146 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 101], lock_version: 408089900045828100, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 102], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:37:06.236 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 105], lock_version: 408089900058935301, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 105], lock_ttl: 3246, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:37:06.478 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 105], lock_version: 408089900163792906, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 108], lock_ttl: 3002, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:37:06.748 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 106], lock_version: 408089900203114510, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 106], lock_ttl: 3002, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:37:06.801 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 101], lock_version: 408089900281757708, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 103], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:37:07.770 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_684_6_7_(default|lock|write).sst] [snap_key=684_6_7]
[2019/05/01 12:37:07.770 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_921_6_7_(default|lock|write).sst] [snap_key=921_6_7]
[2019/05/01 12:37:07.782 -07:00] [INFO] [unknown:1792] ["[region 921] 942 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 7, term: 6]"]
[2019/05/01 12:37:07.782 -07:00] [INFO] [unknown:1816] ["[region 921] 942 restored progress of 922 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:37:07.782 -07:00] [INFO] [unknown:1816] ["[region 921] 942 restored progress of 923 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:37:07.782 -07:00] [INFO] [unknown:1816] ["[region 921] 942 restored progress of 924 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:37:07.782 -07:00] [INFO] [unknown:1816] ["[region 921] 942 restored progress of 942 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:37:07.782 -07:00] [INFO] [unknown:474] ["[region 921] 942 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 7, term: 6]"]
[2019/05/01 12:37:07.782 -07:00] [INFO] [unknown:1736] ["[region 921] 942 [commit: 7] restored snapshot [index: 7, term: 6]"]
[2019/05/01 12:37:07.782 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=942] [region_id=921]
[2019/05/01 12:37:07.782 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 7, truncated_state: Some(RaftTruncatedState { index: 7, term: 6, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 921, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 97, 255, 100, 100, 105, 255, 116, 105, 111, 110, 97, 255, 108, 95, 255, 109, 101, 109, 95, 112, 111, 255, 111, 255, 108, 95, 115, 105, 122, 101, 0, 254, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 97, 255, 112, 105, 95, 255, 98, 107, 95, 99, 111, 255, 109, 109, 255, 105, 116, 95, 105, 110, 116, 255, 101, 255, 114, 118, 97, 108, 0, 0, 0, 252, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 107, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 922, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 923, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 924, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 942, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=942] [region_id=921]
[2019/05/01 12:37:07.790 -07:00] [INFO] [unknown:1792] ["[region 684] 943 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 7, term: 6]"]
[2019/05/01 12:37:07.790 -07:00] [INFO] [unknown:1816] ["[region 684] 943 restored progress of 685 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:37:07.790 -07:00] [INFO] [unknown:1816] ["[region 684] 943 restored progress of 686 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:37:07.790 -07:00] [INFO] [unknown:1816] ["[region 684] 943 restored progress of 687 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:37:07.790 -07:00] [INFO] [unknown:1816] ["[region 684] 943 restored progress of 943 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:37:07.790 -07:00] [INFO] [unknown:474] ["[region 684] 943 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 7, term: 6]"]
[2019/05/01 12:37:07.790 -07:00] [INFO] [unknown:1736] ["[region 684] 943 [commit: 7] restored snapshot [index: 7, term: 6]"]
[2019/05/01 12:37:07.790 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=943] [region_id=684]
[2019/05/01 12:37:07.790 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 7, truncated_state: Some(RaftTruncatedState { index: 7, term: 6, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 684, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 103, 116, 105, 100, 255, 95, 101, 120, 101, 255, 99, 117, 116, 255, 101, 100, 95, 99, 111, 255, 109, 112, 255, 114, 101, 115, 115, 105, 111, 255, 110, 255, 95, 112, 101, 114, 105, 111, 100, 255, 255, 0, 0, 0, 0, 0, 0, 0, 0, 255, 247, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 103, 116, 105, 100, 255, 95, 109, 111, 100, 255, 101, 0, 0, 255, 0, 0, 0, 0, 0, 248, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 87, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 685, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 686, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 687, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 943, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=943] [region_id=684]
[2019/05/01 12:37:07.805 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 111], lock_version: 408089900543901708, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 113], lock_ttl: 3002, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:37:07.810 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 921] 942"]
[2019/05/01 12:37:07.810 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 921, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 97, 255, 100, 100, 105, 255, 116, 105, 111, 110, 97, 255, 108, 95, 255, 109, 101, 109, 95, 112, 111, 255, 111, 255, 108, 95, 115, 105, 122, 101, 0, 254, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 97, 255, 112, 105, 95, 255, 98, 107, 95, 99, 111, 255, 109, 109, 255, 105, 116, 95, 105, 110, 116, 255, 101, 255, 114, 118, 97, 108, 0, 0, 0, 252, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 107, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 922, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 923, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 924, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 942, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=942] [region_id=921]
[2019/05/01 12:37:07.810 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=921]
[2019/05/01 12:37:07.810 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 684] 943"]
[2019/05/01 12:37:07.810 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 684, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 103, 116, 105, 100, 255, 95, 101, 120, 101, 255, 99, 117, 116, 255, 101, 100, 95, 99, 111, 255, 109, 112, 255, 114, 101, 115, 115, 105, 111, 255, 110, 255, 95, 112, 101, 114, 105, 111, 100, 255, 255, 0, 0, 0, 0, 0, 0, 0, 0, 255, 247, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 103, 116, 105, 100, 255, 95, 109, 111, 100, 255, 101, 0, 0, 255, 0, 0, 0, 0, 0, 248, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 87, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 685, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 686, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 687, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 943, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=943] [region_id=684]
[2019/05/01 12:37:07.828 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=17.13379ms] [region_id=921]
[2019/05/01 12:37:07.828 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=684]
[2019/05/01 12:37:07.830 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_229_7_8_(default|lock|write).sst] [snap_key=229_7_8]
[2019/05/01 12:37:07.836 -07:00] [INFO] [unknown:1792] ["[region 229] 941 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 8, term: 7]"]
[2019/05/01 12:37:07.836 -07:00] [INFO] [unknown:1816] ["[region 229] 941 restored progress of 230 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:37:07.836 -07:00] [INFO] [unknown:1816] ["[region 229] 941 restored progress of 231 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:37:07.836 -07:00] [INFO] [unknown:1816] ["[region 229] 941 restored progress of 232 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:37:07.836 -07:00] [INFO] [unknown:1816] ["[region 229] 941 restored progress of 941 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:37:07.836 -07:00] [INFO] [unknown:474] ["[region 229] 941 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 8, term: 7]"]
[2019/05/01 12:37:07.836 -07:00] [INFO] [unknown:1736] ["[region 229] 941 [commit: 8] restored snapshot [index: 8, term: 7]"]
[2019/05/01 12:37:07.836 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=941] [region_id=229]
[2019/05/01 12:37:07.836 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 8, truncated_state: Some(RaftTruncatedState { index: 8, term: 7, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 229, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 95, 102, 255, 111, 114, 109, 255, 97, 116, 0, 0, 0, 252, 0, 0, 253], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 95, 103, 255, 114, 111, 117, 255, 112, 95, 99, 111, 109, 255, 109, 105, 255, 116, 95, 115, 121, 110, 99, 255, 95, 255, 100, 101, 108, 97, 121, 0, 0, 253, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 27, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 230, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 231, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 232, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 941, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=941] [region_id=229]
[2019/05/01 12:37:07.852 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=24.278332ms] [region_id=684]
[2019/05/01 12:37:07.860 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 229, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 95, 102, 255, 111, 114, 109, 255, 97, 116, 0, 0, 0, 252, 0, 0, 253], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 95, 103, 255, 114, 111, 117, 255, 112, 95, 99, 111, 109, 255, 109, 105, 255, 116, 95, 115, 121, 110, 99, 255, 95, 255, 100, 101, 108, 97, 121, 0, 0, 253, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 27, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 230, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 231, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 232, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 941, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=941] [region_id=229]
[2019/05/01 12:37:07.860 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=229]
[2019/05/01 12:37:07.860 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 229] 941"]
[2019/05/01 12:37:07.877 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=16.509625ms] [region_id=229]
[2019/05/01 12:37:08.068 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 110], lock_version: 408089900622544902, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 110], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:37:08.069 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 110], lock_version: 408089900622544902, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 110], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:37:08.454 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 113], lock_version: 408089900688080917, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 113], lock_ttl: 3057, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:37:08.666 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 116], lock_version: 408089900766724105, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 117], lock_ttl: 3003, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:37:08.795 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 943, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=8] [term=6] [peer_id=943] [region_id=684]
[2019/05/01 12:37:08.795 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 6, version: 87, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=943] [region_id=684]
[2019/05/01 12:37:08.795 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 684, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 103, 116, 105, 100, 255, 95, 101, 120, 101, 255, 99, 117, 116, 255, 101, 100, 95, 99, 111, 255, 109, 112, 255, 114, 101, 115, 115, 105, 111, 255, 110, 255, 95, 112, 101, 114, 105, 111, 100, 255, 255, 0, 0, 0, 0, 0, 0, 0, 0, 255, 247, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 103, 116, 105, 100, 255, 95, 109, 111, 100, 255, 101, 0, 0, 255, 0, 0, 0, 0, 0, 248, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 87, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 685, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 686, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 687, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 943, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 943, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=943] [region_id=684]
[2019/05/01 12:37:08.814 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 942, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=8] [term=6] [peer_id=942] [region_id=921]
[2019/05/01 12:37:08.815 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 6, version: 107, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=942] [region_id=921]
[2019/05/01 12:37:08.815 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 921, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 97, 255, 100, 100, 105, 255, 116, 105, 111, 110, 97, 255, 108, 95, 255, 109, 101, 109, 95, 112, 111, 255, 111, 255, 108, 95, 115, 105, 122, 101, 0, 254, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 97, 255, 112, 105, 95, 255, 98, 107, 95, 99, 111, 255, 109, 109, 255, 105, 116, 95, 105, 110, 116, 255, 101, 255, 114, 118, 97, 108, 0, 0, 0, 252, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 107, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 922, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 923, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 924, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 942, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 942, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=942] [region_id=921]
[2019/05/01 12:37:08.889 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 941, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=9] [term=7] [peer_id=941] [region_id=229]
[2019/05/01 12:37:08.889 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 6, version: 27, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=941] [region_id=229]
[2019/05/01 12:37:08.889 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 229, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 95, 102, 255, 111, 114, 109, 255, 97, 116, 0, 0, 0, 252, 0, 0, 253], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 95, 103, 255, 114, 111, 117, 255, 112, 95, 99, 111, 109, 255, 109, 105, 255, 116, 95, 115, 121, 110, 99, 255, 95, 255, 100, 101, 108, 97, 121, 0, 0, 253, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 27, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 230, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 231, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 232, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 941, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 941, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=941] [region_id=229]
[2019/05/01 12:37:08.900 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 924, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=9] [term=6] [peer_id=942] [region_id=921]
[2019/05/01 12:37:08.900 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 7, version: 107, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=942] [region_id=921]
[2019/05/01 12:37:08.900 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 921, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 97, 255, 100, 100, 105, 255, 116, 105, 111, 110, 97, 255, 108, 95, 255, 109, 101, 109, 95, 112, 111, 255, 111, 255, 108, 95, 115, 105, 122, 101, 0, 254, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 97, 255, 112, 105, 95, 255, 98, 107, 95, 99, 111, 255, 109, 109, 255, 105, 116, 95, 105, 110, 116, 255, 101, 255, 114, 118, 97, 108, 0, 0, 0, 252, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 7, version: 107, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 922, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 923, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 924, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 942, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 924, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=942] [region_id=921]
[2019/05/01 12:37:08.938 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 687, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=9] [term=6] [peer_id=943] [region_id=684]
[2019/05/01 12:37:08.938 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 7, version: 87, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=943] [region_id=684]
[2019/05/01 12:37:08.938 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 684, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 103, 116, 105, 100, 255, 95, 101, 120, 101, 255, 99, 117, 116, 255, 101, 100, 95, 99, 111, 255, 109, 112, 255, 114, 101, 115, 115, 105, 111, 255, 110, 255, 95, 112, 101, 114, 105, 111, 100, 255, 255, 0, 0, 0, 0, 0, 0, 0, 0, 255, 247, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 103, 116, 105, 100, 255, 95, 109, 111, 100, 255, 101, 0, 0, 255, 0, 0, 0, 0, 0, 248, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 7, version: 87, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 685, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 686, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 687, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 943, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 687, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=943] [region_id=684]
[2019/05/01 12:37:09.001 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 231, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=10] [term=7] [peer_id=941] [region_id=229]
[2019/05/01 12:37:09.001 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 7, version: 27, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=941] [region_id=229]
[2019/05/01 12:37:09.001 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 229, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 95, 102, 255, 111, 114, 109, 255, 97, 116, 0, 0, 0, 252, 0, 0, 253], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 95, 103, 255, 114, 111, 117, 255, 112, 95, 99, 111, 109, 255, 109, 105, 255, 116, 95, 115, 121, 110, 99, 255, 95, 255, 100, 101, 108, 97, 121, 0, 0, 253, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 7, version: 27, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 230, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 231, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 232, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 941, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 231, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=941] [region_id=229]
[2019/05/01 12:37:09.032 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddLearnerNode, peer: Some(Peer { id: 1005, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=11] [term=7] [peer_id=258] [region_id=117]
[2019/05/01 12:37:09.032 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 5, version: 17, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddLearner] [peer_id=258] [region_id=117]
[2019/05/01 12:37:09.032 -07:00] [INFO] [apply.rs:1476] ["add learner successfully"] [region="Region { id: 117, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 103, 95, 255, 116, 97, 98, 108, 255, 101, 115, 0, 255, 0, 0, 0, 0, 0, 249, 0, 0, 253], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 100, 255, 95, 97, 100, 100, 255, 114, 101, 115, 255, 115, 0, 0, 0, 0, 251, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 5, version: 17, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 118, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 119, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 258, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1005, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=258] [region_id=117]
[2019/05/01 12:37:09.140 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 117], lock_version: 408089900858474497, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 117], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:37:09.777 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=1007] [region_id=448]
[2019/05/01 12:37:09.777 -07:00] [INFO] [unknown:719] ["[region 448] 1007 became follower at term 0"]
[2019/05/01 12:37:09.777 -07:00] [INFO] [unknown:295] ["[region 448] 1007 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:37:09.777 -07:00] [INFO] [unknown:719] ["[region 448] 1007 became follower at term 1"]
[2019/05/01 12:37:09.777 -07:00] [INFO] [unknown:920] ["[region 448] 1007 [term: 1] received a MsgHeartbeat message with higher term from 451 [term: 7]"]
[2019/05/01 12:37:09.777 -07:00] [INFO] [unknown:719] ["[region 448] 1007 became follower at term 7"]
[2019/05/01 12:37:09.811 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 117], lock_version: 408089901068189705, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 117], lock_ttl: 3002, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:37:09.902 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 121], lock_version: 408089901081296916, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 122], lock_ttl: 3002, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:37:09.997 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 123], lock_version: 408089901107511304, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 123], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:37:10.120 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 122], lock_version: 408089901146832907, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 122], lock_ttl: 3003, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:37:10.170 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 122], lock_version: 408089901146832907, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 122], lock_ttl: 3003, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:37:10.210 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 121], lock_version: 408089901146832900, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 121], lock_ttl: 3080, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:37:10.358 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 125], lock_version: 408089901199261707, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 125], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:37:10.430 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 122], lock_version: 408089901212368914, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 122], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:37:10.472 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 123], lock_version: 408089901238583307, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 123], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:37:10.504 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 122], lock_version: 408089901251690505, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 125], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:37:10.504 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 122], lock_version: 408089901251690505, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 122], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:37:10.511 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 122], lock_version: 408089901251690505, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 122], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:37:10.832 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=1006] [region_id=497]
[2019/05/01 12:37:10.832 -07:00] [INFO] [unknown:719] ["[region 497] 1006 became follower at term 0"]
[2019/05/01 12:37:10.832 -07:00] [INFO] [unknown:295] ["[region 497] 1006 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:37:10.832 -07:00] [INFO] [unknown:719] ["[region 497] 1006 became follower at term 1"]
[2019/05/01 12:37:10.832 -07:00] [INFO] [unknown:920] ["[region 497] 1006 [term: 1] received a MsgHeartbeat message with higher term from 500 [term: 7]"]
[2019/05/01 12:37:10.832 -07:00] [INFO] [unknown:719] ["[region 497] 1006 became follower at term 7"]
[2019/05/01 12:37:10.972 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 123], lock_version: 408089901356548098, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 124], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:37:11.247 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 126], lock_version: 408089901435191299, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 126], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:37:11.354 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 128], lock_version: 408089901448298501, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 128], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:37:11.386 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 129], lock_version: 408089901474512910, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 129], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:37:11.427 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 129], lock_version: 408089901500727304, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 129], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:37:11.461 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 124], lock_version: 408089901500727301, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 128], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:37:11.554 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 129], lock_version: 408089901500727314, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 129], lock_ttl: 3065, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:37:11.781 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_448_7_11_(default|lock|write).sst] [snap_key=448_7_11]
[2019/05/01 12:37:11.787 -07:00] [INFO] [unknown:1792] ["[region 448] 1007 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 11, term: 7]"]
[2019/05/01 12:37:11.787 -07:00] [INFO] [unknown:1816] ["[region 448] 1007 restored progress of 449 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:37:11.787 -07:00] [INFO] [unknown:1816] ["[region 448] 1007 restored progress of 451 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:37:11.787 -07:00] [INFO] [unknown:1816] ["[region 448] 1007 restored progress of 778 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:37:11.787 -07:00] [INFO] [unknown:1816] ["[region 448] 1007 restored progress of 1007 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:37:11.787 -07:00] [INFO] [unknown:474] ["[region 448] 1007 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 11, term: 7]"]
[2019/05/01 12:37:11.787 -07:00] [INFO] [unknown:1736] ["[region 448] 1007 [commit: 11] restored snapshot [index: 11, term: 7]"]
[2019/05/01 12:37:11.787 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=1007] [region_id=448]
[2019/05/01 12:37:11.787 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 11, truncated_state: Some(RaftTruncatedState { index: 11, term: 7, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 448, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 100, 97, 116, 97, 255, 100, 105, 114, 0, 254, 0, 0, 0, 252], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 100, 97, 116, 101, 255, 95, 102, 111, 114, 255, 109, 97, 116, 255, 0, 0, 0, 0, 0, 250, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 57, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 449, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 451, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 778, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1007, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1007] [region_id=448]
[2019/05/01 12:37:11.803 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 448] 1007"]
[2019/05/01 12:37:11.803 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 448, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 100, 97, 116, 97, 255, 100, 105, 114, 0, 254, 0, 0, 0, 252], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 100, 97, 116, 101, 255, 95, 102, 111, 114, 255, 109, 97, 116, 255, 0, 0, 0, 0, 0, 250, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 57, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 449, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 451, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 778, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1007, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1007] [region_id=448]
[2019/05/01 12:37:11.803 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=448]
[2019/05/01 12:37:11.819 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=15.541636ms] [region_id=448]
[2019/05/01 12:37:12.072 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 127], lock_version: 408089901618692098, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 127], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:37:12.147 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 127], lock_version: 408089901618692098, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 127], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:37:12.189 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 127], lock_version: 408089901618692098, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 127], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:37:12.194 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 1005, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=12] [term=7] [peer_id=258] [region_id=117]
[2019/05/01 12:37:12.194 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 6, version: 17, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=258] [region_id=117]
[2019/05/01 12:37:12.194 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 117, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 103, 95, 255, 116, 97, 98, 108, 255, 101, 115, 0, 255, 0, 0, 0, 0, 0, 249, 0, 0, 253], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 100, 255, 95, 97, 100, 100, 255, 114, 101, 115, 255, 115, 0, 0, 0, 0, 251, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 17, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 118, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 119, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 258, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1005, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1005, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=258] [region_id=117]
[2019/05/01 12:37:12.244 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 118, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=13] [term=7] [peer_id=258] [region_id=117]
[2019/05/01 12:37:12.244 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 7, version: 17, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=258] [region_id=117]
[2019/05/01 12:37:12.244 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 117, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 103, 95, 255, 116, 97, 98, 108, 255, 101, 115, 0, 255, 0, 0, 0, 0, 0, 249, 0, 0, 253], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 100, 255, 95, 97, 100, 100, 255, 114, 101, 115, 255, 115, 0, 0, 0, 0, 251, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 7, version: 17, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 118, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 119, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 258, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1005, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 118, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=258] [region_id=117]
[2019/05/01 12:37:12.654 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 132], lock_version: 408089901802192904, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 132], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:37:12.810 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 1007, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=12] [term=7] [peer_id=1007] [region_id=448]
[2019/05/01 12:37:12.810 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 9, version: 57, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=1007] [region_id=448]
[2019/05/01 12:37:12.810 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 448, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 100, 97, 116, 97, 255, 100, 105, 114, 0, 254, 0, 0, 0, 252], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 100, 97, 116, 101, 255, 95, 102, 111, 114, 255, 109, 97, 116, 255, 0, 0, 0, 0, 0, 250, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 57, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 449, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 451, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 778, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1007, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1007, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1007] [region_id=448]
[2019/05/01 12:37:12.835 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_497_7_11_(default|lock|write).sst] [snap_key=497_7_11]
[2019/05/01 12:37:12.850 -07:00] [INFO] [unknown:1792] ["[region 497] 1006 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 11, term: 7]"]
[2019/05/01 12:37:12.850 -07:00] [INFO] [unknown:1816] ["[region 497] 1006 restored progress of 498 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:37:12.850 -07:00] [INFO] [unknown:1816] ["[region 497] 1006 restored progress of 500 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:37:12.850 -07:00] [INFO] [unknown:1816] ["[region 497] 1006 restored progress of 669 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:37:12.850 -07:00] [INFO] [unknown:1816] ["[region 497] 1006 restored progress of 1006 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:37:12.850 -07:00] [INFO] [unknown:474] ["[region 497] 1006 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 11, term: 7]"]
[2019/05/01 12:37:12.850 -07:00] [INFO] [unknown:1736] ["[region 497] 1006 [commit: 11] restored snapshot [index: 11, term: 7]"]
[2019/05/01 12:37:12.850 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=1006] [region_id=497]
[2019/05/01 12:37:12.850 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 11, truncated_state: Some(RaftTruncatedState { index: 11, term: 7, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 497, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 100, 101, 108, 97, 255, 121, 101, 100, 95, 255, 105, 110, 115, 255, 101, 114, 116, 95, 116, 255, 105, 109, 255, 101, 111, 117, 116, 0, 0, 253, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 100, 101, 108, 97, 255, 121, 101, 100, 95, 255, 113, 117, 101, 255, 117, 101, 95, 115, 105, 255, 122, 101, 255, 0, 0, 0, 0, 0, 0, 249, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 67, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 498, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 500, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 669, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1006, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1006] [region_id=497]
[2019/05/01 12:37:12.879 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 497] 1006"]
[2019/05/01 12:37:12.879 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 497, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 100, 101, 108, 97, 255, 121, 101, 100, 95, 255, 105, 110, 115, 255, 101, 114, 116, 95, 116, 255, 105, 109, 255, 101, 111, 117, 116, 0, 0, 253, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 100, 101, 108, 97, 255, 121, 101, 100, 95, 255, 113, 117, 101, 255, 117, 101, 95, 115, 105, 255, 122, 101, 255, 0, 0, 0, 0, 0, 0, 249, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 67, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 498, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 500, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 669, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1006, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1006] [region_id=497]
[2019/05/01 12:37:12.879 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=497]
[2019/05/01 12:37:12.923 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 449, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=13] [term=7] [peer_id=1007] [region_id=448]
[2019/05/01 12:37:12.923 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 10, version: 57, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=1007] [region_id=448]
[2019/05/01 12:37:12.923 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 448, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 100, 97, 116, 97, 255, 100, 105, 114, 0, 254, 0, 0, 0, 252], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 100, 97, 116, 101, 255, 95, 102, 111, 114, 255, 109, 97, 116, 255, 0, 0, 0, 0, 0, 250, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 10, version: 57, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 449, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 451, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 778, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1007, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 449, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1007] [region_id=448]
[2019/05/01 12:37:12.942 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=62.171992ms] [region_id=497]
[2019/05/01 12:37:13.095 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 132], lock_version: 408089901920157715, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 134], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:37:13.108 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 132], lock_version: 408089901920157715, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 134], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:37:13.369 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 136], lock_version: 408089901998800900, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 136], lock_ttl: 3002, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:37:13.665 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 138], lock_version: 408089902077444101, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 138], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:37:13.675 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 138], lock_version: 408089902077444101, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 138], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:37:13.857 -07:00] [INFO] [unknown:1625] ["[region 684] 943 [term 6] received MsgTimeoutNow from 685 and starts an election to get leadership."]
[2019/05/01 12:37:13.857 -07:00] [INFO] [unknown:739] ["[region 684] 943 became candidate at term 7"]
[2019/05/01 12:37:13.857 -07:00] [INFO] [unknown:854] ["[region 684] 943 received MsgRequestVoteResponse from 943 at term 7"]
[2019/05/01 12:37:13.857 -07:00] [INFO] [unknown:828] ["[region 684] 943 [logterm: 6, index: 9] sent MsgRequestVote request to 686 at term 7"]
[2019/05/01 12:37:13.857 -07:00] [INFO] [unknown:828] ["[region 684] 943 [logterm: 6, index: 9] sent MsgRequestVote request to 685 at term 7"]
[2019/05/01 12:37:14.016 -07:00] [INFO] [unknown:854] ["[region 684] 943 received MsgRequestVoteResponse from 686 at term 7"]
[2019/05/01 12:37:14.026 -07:00] [INFO] [unknown:1550] ["[region 684] 943 [quorum:2] has received 2 MsgRequestVoteResponse votes and 0 vote rejections"]
[2019/05/01 12:37:14.026 -07:00] [INFO] [unknown:789] ["[region 684] 943 became leader at term 7"]
[2019/05/01 12:37:14.030 -07:00] [INFO] [unknown:1625] ["[region 921] 942 [term 6] received MsgTimeoutNow from 922 and starts an election to get leadership."]
[2019/05/01 12:37:14.030 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 1006, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=12] [term=7] [peer_id=1006] [region_id=497]
[2019/05/01 12:37:14.030 -07:00] [INFO] [unknown:739] ["[region 921] 942 became candidate at term 7"]
[2019/05/01 12:37:14.030 -07:00] [INFO] [unknown:854] ["[region 921] 942 received MsgRequestVoteResponse from 942 at term 7"]
[2019/05/01 12:37:14.030 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 9, version: 67, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=1006] [region_id=497]
[2019/05/01 12:37:14.030 -07:00] [INFO] [unknown:828] ["[region 921] 942 [logterm: 6, index: 9] sent MsgRequestVote request to 922 at term 7"]
[2019/05/01 12:37:14.030 -07:00] [INFO] [unknown:828] ["[region 921] 942 [logterm: 6, index: 9] sent MsgRequestVote request to 923 at term 7"]
[2019/05/01 12:37:14.030 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 497, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 100, 101, 108, 97, 255, 121, 101, 100, 95, 255, 105, 110, 115, 255, 101, 114, 116, 95, 116, 255, 105, 109, 255, 101, 111, 117, 116, 0, 0, 253, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 100, 101, 108, 97, 255, 121, 101, 100, 95, 255, 113, 117, 101, 255, 117, 101, 95, 115, 105, 255, 122, 101, 255, 0, 0, 0, 0, 0, 0, 249, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 67, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 498, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 500, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 669, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1006, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1006, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1006] [region_id=497]
[2019/05/01 12:37:14.169 -07:00] [INFO] [unknown:854] ["[region 921] 942 received MsgRequestVoteResponse from 923 at term 7"]
[2019/05/01 12:37:14.169 -07:00] [INFO] [unknown:1550] ["[region 921] 942 [quorum:2] has received 2 MsgRequestVoteResponse votes and 0 vote rejections"]
[2019/05/01 12:37:14.169 -07:00] [INFO] [unknown:789] ["[region 921] 942 became leader at term 7"]
[2019/05/01 12:37:14.231 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 498, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=13] [term=7] [peer_id=1006] [region_id=497]
[2019/05/01 12:37:14.231 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 10, version: 67, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=1006] [region_id=497]
[2019/05/01 12:37:14.231 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 497, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 100, 101, 108, 97, 255, 121, 101, 100, 95, 255, 105, 110, 115, 255, 101, 114, 116, 95, 116, 255, 105, 109, 255, 101, 111, 117, 116, 0, 0, 253, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 100, 101, 108, 97, 255, 121, 101, 100, 95, 255, 113, 117, 101, 255, 117, 101, 95, 115, 105, 255, 122, 101, 255, 0, 0, 0, 0, 0, 0, 249, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 10, version: 67, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 498, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 500, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 669, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1006, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 498, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1006] [region_id=497]
[2019/05/01 12:37:14.244 -07:00] [INFO] [pd.rs:558] ["try to change peer"] [peer="Peer { id: 1051, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [change_type=AddLearnerNode] [region_id=921]
[2019/05/01 12:37:14.247 -07:00] [INFO] [peer.rs:1953] ["propose conf change peer"] [change_peer=1051] [change_type=AddLearnerNode] [peer_id=942] [region_id=921]
[2019/05/01 12:37:14.302 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddLearnerNode, peer: Some(Peer { id: 1051, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=11] [term=7] [peer_id=942] [region_id=921]
[2019/05/01 12:37:14.302 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 8, version: 107, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddLearner] [peer_id=942] [region_id=921]
[2019/05/01 12:37:14.302 -07:00] [INFO] [apply.rs:1476] ["add learner successfully"] [region="Region { id: 921, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 97, 255, 100, 100, 105, 255, 116, 105, 111, 110, 97, 255, 108, 95, 255, 109, 101, 109, 95, 112, 111, 255, 111, 255, 108, 95, 115, 105, 122, 101, 0, 254, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 97, 255, 112, 105, 95, 255, 98, 107, 95, 99, 111, 255, 109, 109, 255, 105, 116, 95, 105, 110, 116, 255, 101, 255, 114, 118, 97, 108, 0, 0, 0, 252, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 8, version: 107, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 922, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 923, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 942, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1051, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=942] [region_id=921]
[2019/05/01 12:37:14.318 -07:00] [INFO] [peer.rs:1318] ["notify pd with change peer region"] [region="Region { id: 921, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 97, 255, 100, 100, 105, 255, 116, 105, 111, 110, 97, 255, 108, 95, 255, 109, 101, 109, 95, 112, 111, 255, 111, 255, 108, 95, 115, 105, 122, 101, 0, 254, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 97, 255, 112, 105, 95, 255, 98, 107, 95, 99, 111, 255, 109, 109, 255, 105, 116, 95, 105, 110, 116, 255, 101, 255, 114, 118, 97, 108, 0, 0, 0, 252, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 107, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 922, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 923, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 942, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1051, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=942] [region_id=921]
[2019/05/01 12:37:14.385 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 138], lock_version: 408089902129872899, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 138], lock_ttl: 3258, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:37:14.915 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 139], lock_version: 408089902378909700, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 139], lock_ttl: 3077, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:37:14.979 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 139], lock_version: 408089902378909700, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 139], lock_ttl: 3077, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:37:15.541 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 144], lock_version: 408089902575517701, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 144], lock_ttl: 3002, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:37:15.779 -07:00] [INFO] [peer_storage.rs:759] ["requesting snapshot"] [peer_id=942] [region_id=921]
[2019/05/01 12:37:15.780 -07:00] [INFO] [snap.rs:757] ["scan snapshot of one cf"] [size=0] [key_count=0] [cf=default] [snapshot=/opt/tidb/data/kv/snap/gen_921_7_11_(default|lock|write).sst] [region_id=921]
[2019/05/01 12:37:15.780 -07:00] [INFO] [snap.rs:757] ["scan snapshot of one cf"] [size=0] [key_count=0] [cf=lock] [snapshot=/opt/tidb/data/kv/snap/gen_921_7_11_(default|lock|write).sst] [region_id=921]
[2019/05/01 12:37:15.780 -07:00] [INFO] [snap.rs:757] ["scan snapshot of one cf"] [size=192] [key_count=2] [cf=write] [snapshot=/opt/tidb/data/kv/snap/gen_921_7_11_(default|lock|write).sst] [region_id=921]
[2019/05/01 12:37:15.798 -07:00] [INFO] [snap.rs:875] ["scan snapshot"] [takes=18.876465ms] [size=1487] [key_count=2] [snapshot=/opt/tidb/data/kv/snap/gen_921_7_11_(default|lock|write).sst] [region_id=921]
[2019/05/01 12:37:16.085 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=1052] [region_id=397]
[2019/05/01 12:37:16.085 -07:00] [INFO] [unknown:719] ["[region 397] 1052 became follower at term 0"]
[2019/05/01 12:37:16.085 -07:00] [INFO] [unknown:295] ["[region 397] 1052 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:37:16.085 -07:00] [INFO] [unknown:719] ["[region 397] 1052 became follower at term 1"]
[2019/05/01 12:37:16.085 -07:00] [INFO] [unknown:920] ["[region 397] 1052 [term: 1] received a MsgHeartbeat message with higher term from 398 [term: 6]"]
[2019/05/01 12:37:16.085 -07:00] [INFO] [unknown:719] ["[region 397] 1052 became follower at term 6"]
[2019/05/01 12:37:16.143 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 148], lock_version: 408089902719696907, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 149], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:37:16.143 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 148], lock_version: 408089902719696907, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 149], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:37:16.299 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 147], lock_version: 408089902772125706, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 151], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:37:16.355 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 147], lock_version: 408089902785232914, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 151], lock_ttl: 3002, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:37:16.493 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 153], lock_version: 408089902824554502, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 153], lock_ttl: 3002, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:37:16.513 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 153], lock_version: 408089902824554502, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 153], lock_ttl: 3002, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:37:16.585 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 150], lock_version: 408089902850768900, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 150], lock_ttl: 3002, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:37:16.679 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 153], lock_version: 408089902863876102, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 153], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:37:16.686 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 151], lock_version: 408089902863876108, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 151], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:37:16.761 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 151], lock_version: 408089902890090513, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 154], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:37:17.441 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 152], lock_version: 408089903047376909, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 155], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:37:17.595 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 155], lock_version: 408089903099805706, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 155], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:37:17.636 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 155], lock_version: 408089903099805706, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 155], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:37:17.754 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 157], lock_version: 408089903139127308, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 157], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:37:17.779 -07:00] [INFO] [unknown:841] ["New connected subchannel at 0x7f858f6628e0 for subchannel 0x7f864047a600"]
[2019/05/01 12:37:17.791 -07:00] [INFO] [snap.rs:389] ["sent snapshot"] [duration=12.796102ms] [size=1487] [snap_key=921_7_11] [region_id=921]
[2019/05/01 12:37:17.791 -07:00] [INFO] [peer.rs:538] ["report snapshot status"] [status=Finish] [to="Peer { id: 1051, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=942] [region_id=921]
[2019/05/01 12:37:17.860 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=1053] [region_id=808]
[2019/05/01 12:37:17.860 -07:00] [INFO] [unknown:719] ["[region 808] 1053 became follower at term 0"]
[2019/05/01 12:37:17.860 -07:00] [INFO] [unknown:295] ["[region 808] 1053 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:37:17.860 -07:00] [INFO] [unknown:719] ["[region 808] 1053 became follower at term 1"]
[2019/05/01 12:37:17.860 -07:00] [INFO] [unknown:920] ["[region 808] 1053 [term: 1] received a MsgHeartbeat message with higher term from 809 [term: 6]"]
[2019/05/01 12:37:17.860 -07:00] [INFO] [unknown:719] ["[region 808] 1053 became follower at term 6"]
[2019/05/01 12:37:17.948 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 154], lock_version: 408089903165341706, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 157], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:37:18.178 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_397_6_7_(default|lock|write).sst] [snap_key=397_6_7]
[2019/05/01 12:37:18.193 -07:00] [INFO] [unknown:1792] ["[region 397] 1052 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 7, term: 6]"]
[2019/05/01 12:37:18.193 -07:00] [INFO] [unknown:1816] ["[region 397] 1052 restored progress of 398 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:37:18.193 -07:00] [INFO] [unknown:1816] ["[region 397] 1052 restored progress of 399 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:37:18.193 -07:00] [INFO] [unknown:1816] ["[region 397] 1052 restored progress of 400 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:37:18.193 -07:00] [INFO] [unknown:1816] ["[region 397] 1052 restored progress of 1052 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:37:18.193 -07:00] [INFO] [unknown:474] ["[region 397] 1052 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 7, term: 6]"]
[2019/05/01 12:37:18.193 -07:00] [INFO] [unknown:1736] ["[region 397] 1052 [commit: 7] restored snapshot [index: 7, term: 6]"]
[2019/05/01 12:37:18.193 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=1052] [region_id=397]
[2019/05/01 12:37:18.193 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 7, truncated_state: Some(RaftTruncatedState { index: 7, term: 6, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 397, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 99, 104, 97, 114, 255, 97, 99, 116, 101, 255, 114, 95, 115, 255, 101, 116, 95, 115, 101, 255, 114, 118, 255, 101, 114, 0, 0, 0, 0, 251, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 99, 104, 97, 114, 255, 97, 99, 116, 101, 255, 114, 95, 115, 255, 101, 116, 95, 115, 121, 255, 115, 116, 255, 101, 109, 0, 0, 0, 0, 251, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 47, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 398, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 399, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 400, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1052, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1052] [region_id=397]
[2019/05/01 12:37:18.212 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 397] 1052"]
[2019/05/01 12:37:18.212 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 397, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 99, 104, 97, 114, 255, 97, 99, 116, 101, 255, 114, 95, 115, 255, 101, 116, 95, 115, 101, 255, 114, 118, 255, 101, 114, 0, 0, 0, 0, 251, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 99, 104, 97, 114, 255, 97, 99, 116, 101, 255, 114, 95, 115, 255, 101, 116, 95, 115, 121, 255, 115, 116, 255, 101, 109, 0, 0, 0, 0, 251, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 47, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 398, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 399, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 400, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1052, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1052] [region_id=397]
[2019/05/01 12:37:18.212 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=397]
[2019/05/01 12:37:18.238 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=26.393117ms] [region_id=397]
[2019/05/01 12:37:18.241 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 156], lock_version: 408089903230877702, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 156], lock_ttl: 3003, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:37:18.242 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 156], lock_version: 408089903230877702, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 156], lock_ttl: 3003, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:37:18.297 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 156], lock_version: 408089903230877702, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 156], lock_ttl: 3003, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:37:18.309 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 152], lock_version: 408089903257092098, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 157], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:37:18.331 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 152], lock_version: 408089903257092098, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 157], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:37:18.456 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 154], lock_version: 408089903335735300, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 154], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:37:18.588 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 158], lock_version: 408089903361949700, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 158], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:37:18.719 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 154], lock_version: 408089903388164101, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 156], lock_ttl: 3063, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:37:18.731 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 154], lock_version: 408089903388164101, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 156], lock_ttl: 3063, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:37:18.782 -07:00] [INFO] [pd.rs:558] ["try to change peer"] [peer="Peer { id: 1051, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [change_type=AddNode] [region_id=921]
[2019/05/01 12:37:18.782 -07:00] [INFO] [peer.rs:1953] ["propose conf change peer"] [change_peer=1051] [change_type=AddNode] [peer_id=942] [region_id=921]
[2019/05/01 12:37:18.807 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 1051, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=12] [term=7] [peer_id=942] [region_id=921]
[2019/05/01 12:37:18.807 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 9, version: 107, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=942] [region_id=921]
[2019/05/01 12:37:18.807 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 921, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 97, 255, 100, 100, 105, 255, 116, 105, 111, 110, 97, 255, 108, 95, 255, 109, 101, 109, 95, 112, 111, 255, 111, 255, 108, 95, 115, 105, 122, 101, 0, 254, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 97, 255, 112, 105, 95, 255, 98, 107, 95, 99, 111, 255, 109, 109, 255, 105, 116, 95, 105, 110, 116, 255, 101, 255, 114, 118, 97, 108, 0, 0, 0, 252, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 107, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 922, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 923, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 942, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1051, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1051, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=942] [region_id=921]
[2019/05/01 12:37:18.831 -07:00] [INFO] [peer.rs:1318] ["notify pd with change peer region"] [region="Region { id: 921, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 97, 255, 100, 100, 105, 255, 116, 105, 111, 110, 97, 255, 108, 95, 255, 109, 101, 109, 95, 112, 111, 255, 111, 255, 108, 95, 115, 105, 122, 101, 0, 254, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 97, 255, 112, 105, 95, 255, 98, 107, 95, 99, 111, 255, 109, 109, 255, 105, 116, 95, 105, 110, 116, 255, 101, 255, 114, 118, 97, 108, 0, 0, 0, 252, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 10, version: 107, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 922, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 923, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 942, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1051, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=942] [region_id=921]
[2019/05/01 12:37:18.839 -07:00] [INFO] [pd.rs:558] ["try to change peer"] [peer="Peer { id: 923, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [change_type=RemoveNode] [region_id=921]
[2019/05/01 12:37:18.839 -07:00] [INFO] [peer.rs:1953] ["propose conf change peer"] [change_peer=923] [change_type=RemoveNode] [peer_id=942] [region_id=921]
[2019/05/01 12:37:18.864 -07:00] [INFO] [pd.rs:558] ["try to change peer"] [peer="Peer { id: 923, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [change_type=RemoveNode] [region_id=921]
[2019/05/01 12:37:18.887 -07:00] [INFO] [peer.rs:1927] ["there is a pending conf change, try later"] [peer_id=942] [region_id=921]
[2019/05/01 12:37:18.887 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 923, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=13] [term=7] [peer_id=942] [region_id=921]
[2019/05/01 12:37:18.887 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 10, version: 107, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=942] [region_id=921]
[2019/05/01 12:37:18.887 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 921, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 97, 255, 100, 100, 105, 255, 116, 105, 111, 110, 97, 255, 108, 95, 255, 109, 101, 109, 95, 112, 111, 255, 111, 255, 108, 95, 115, 105, 122, 101, 0, 254, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 97, 255, 112, 105, 95, 255, 98, 107, 95, 99, 111, 255, 109, 109, 255, 105, 116, 95, 105, 110, 116, 255, 101, 255, 114, 118, 97, 108, 0, 0, 0, 252, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 10, version: 107, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 922, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 923, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 942, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1051, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 923, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=942] [region_id=921]
[2019/05/01 12:37:18.917 -07:00] [INFO] [peer.rs:1318] ["notify pd with change peer region"] [region="Region { id: 921, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 97, 255, 100, 100, 105, 255, 116, 105, 111, 110, 97, 255, 108, 95, 255, 109, 101, 109, 95, 112, 111, 255, 111, 255, 108, 95, 115, 105, 122, 101, 0, 254, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 97, 255, 112, 105, 95, 255, 98, 107, 95, 99, 111, 255, 109, 109, 255, 105, 116, 95, 105, 110, 116, 255, 101, 255, 114, 118, 97, 108, 0, 0, 0, 252, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 11, version: 107, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 922, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 942, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1051, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=942] [region_id=921]
[2019/05/01 12:37:19.132 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 1052, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=8] [term=6] [peer_id=1052] [region_id=397]
[2019/05/01 12:37:19.132 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 6, version: 47, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=1052] [region_id=397]
[2019/05/01 12:37:19.132 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 397, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 99, 104, 97, 114, 255, 97, 99, 116, 101, 255, 114, 95, 115, 255, 101, 116, 95, 115, 101, 255, 114, 118, 255, 101, 114, 0, 0, 0, 0, 251, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 99, 104, 97, 114, 255, 97, 99, 116, 101, 255, 114, 95, 115, 255, 101, 116, 95, 115, 121, 255, 115, 116, 255, 101, 109, 0, 0, 0, 0, 251, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 47, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 398, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 399, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 400, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1052, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1052, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1052] [region_id=397]
[2019/05/01 12:37:19.202 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 399, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=9] [term=6] [peer_id=1052] [region_id=397]
[2019/05/01 12:37:19.202 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 7, version: 47, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=1052] [region_id=397]
[2019/05/01 12:37:19.202 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 397, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 99, 104, 97, 114, 255, 97, 99, 116, 101, 255, 114, 95, 115, 255, 101, 116, 95, 115, 101, 255, 114, 118, 255, 101, 114, 0, 0, 0, 0, 251, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 99, 104, 97, 114, 255, 97, 99, 116, 101, 255, 114, 95, 115, 255, 101, 116, 95, 115, 121, 255, 115, 116, 255, 101, 109, 0, 0, 0, 0, 251, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 7, version: 47, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 398, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 399, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 400, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1052, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 399, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1052] [region_id=397]
[2019/05/01 12:37:19.602 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 164], lock_version: 408089903637200905, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 164], lock_ttl: 3003, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:37:19.800 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 164], lock_version: 408089903663415307, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 164], lock_ttl: 3058, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:37:19.804 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 164], lock_version: 408089903663415307, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 164], lock_ttl: 3058, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:37:19.864 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_808_6_7_(default|lock|write).sst] [snap_key=808_6_7]
[2019/05/01 12:37:19.874 -07:00] [INFO] [unknown:1792] ["[region 808] 1053 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 7, term: 6]"]
[2019/05/01 12:37:19.874 -07:00] [INFO] [unknown:1816] ["[region 808] 1053 restored progress of 809 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:37:19.874 -07:00] [INFO] [unknown:1816] ["[region 808] 1053 restored progress of 810 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:37:19.874 -07:00] [INFO] [unknown:1816] ["[region 808] 1053 restored progress of 811 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:37:19.874 -07:00] [INFO] [unknown:1816] ["[region 808] 1053 restored progress of 1053 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:37:19.874 -07:00] [INFO] [unknown:474] ["[region 808] 1053 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 7, term: 6]"]
[2019/05/01 12:37:19.874 -07:00] [INFO] [unknown:1736] ["[region 808] 1053 [commit: 7] restored snapshot [index: 7, term: 6]"]
[2019/05/01 12:37:19.874 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=1053] [region_id=808]
[2019/05/01 12:37:19.874 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 7, truncated_state: Some(RaftTruncatedState { index: 7, term: 6, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 808, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 104, 111, 115, 116, 255, 95, 99, 97, 99, 255, 104, 101, 95, 255, 115, 105, 122, 101, 0, 254, 0, 0, 253], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 104, 111, 115, 116, 255, 110, 97, 109, 101, 255, 0, 0, 0, 255, 0, 0, 0, 0, 0, 247, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 97, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 809, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 810, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 811, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1053, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1053] [region_id=808]
[2019/05/01 12:37:19.897 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 808, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 104, 111, 115, 116, 255, 95, 99, 97, 99, 255, 104, 101, 95, 255, 115, 105, 122, 101, 0, 254, 0, 0, 253], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 104, 111, 115, 116, 255, 110, 97, 109, 101, 255, 0, 0, 0, 255, 0, 0, 0, 0, 0, 247, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 97, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 809, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 810, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 811, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1053, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1053] [region_id=808]
[2019/05/01 12:37:19.897 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 808] 1053"]
[2019/05/01 12:37:19.897 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=808]
[2019/05/01 12:37:19.923 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=25.836854ms] [region_id=808]
[2019/05/01 12:37:19.937 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 167], lock_version: 408089903702736913, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 167], lock_ttl: 3062, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:37:19.938 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 167], lock_version: 408089903702736913, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 167], lock_ttl: 3062, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:37:20.114 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=20_7_12] [peer_id=783] [region_id=20]
[2019/05/01 12:37:20.114 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=22_7_12] [peer_id=490] [region_id=22]
[2019/05/01 12:37:20.114 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=28_7_27] [peer_id=824] [region_id=28]
[2019/05/01 12:37:20.114 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=114_7_11] [peer_id=581] [region_id=114]
[2019/05/01 12:37:20.114 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=126_7_11] [peer_id=666] [region_id=126]
[2019/05/01 12:37:20.114 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=129_7_11] [peer_id=667] [region_id=129]
[2019/05/01 12:37:20.115 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=141_7_11] [peer_id=573] [region_id=141]
[2019/05/01 12:37:20.115 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=144_7_11] [peer_id=665] [region_id=144]
[2019/05/01 12:37:20.115 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=153_7_11] [peer_id=488] [region_id=153]
[2019/05/01 12:37:20.115 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=225_7_11] [peer_id=899] [region_id=225]
[2019/05/01 12:37:20.115 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=229_7_8] [peer_id=941] [region_id=229]
[2019/05/01 12:37:20.115 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=233_7_8] [peer_id=780] [region_id=233]
[2019/05/01 12:37:20.116 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=237_7_8] [peer_id=576] [region_id=237]
[2019/05/01 12:37:20.116 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=361_7_8] [peer_id=781] [region_id=361]
[2019/05/01 12:37:20.116 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=397_6_7] [peer_id=1052] [region_id=397]
[2019/05/01 12:37:20.116 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=425_7_8] [peer_id=662] [region_id=425]
[2019/05/01 12:37:20.116 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=429_7_8] [peer_id=577] [region_id=429]
[2019/05/01 12:37:20.116 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=448_7_11] [peer_id=1007] [region_id=448]
[2019/05/01 12:37:20.116 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=480_7_8] [peer_id=825] [region_id=480]
[2019/05/01 12:37:20.116 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=497_7_11] [peer_id=1006] [region_id=497]
[2019/05/01 12:37:20.116 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=513_6_7] [peer_id=670] [region_id=513]
[2019/05/01 12:37:20.116 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=529_6_7] [peer_id=671] [region_id=529]
[2019/05/01 12:37:20.117 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=598_8_12] [peer_id=897] [region_id=598]
[2019/05/01 12:37:20.117 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=684_6_7] [peer_id=943] [region_id=684]
[2019/05/01 12:37:20.117 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=921_6_7] [peer_id=942] [region_id=921]
[2019/05/01 12:37:20.134 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=1095] [region_id=614]
[2019/05/01 12:37:20.134 -07:00] [INFO] [unknown:719] ["[region 614] 1095 became follower at term 0"]
[2019/05/01 12:37:20.134 -07:00] [INFO] [unknown:295] ["[region 614] 1095 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:37:20.134 -07:00] [INFO] [unknown:719] ["[region 614] 1095 became follower at term 1"]
[2019/05/01 12:37:20.134 -07:00] [INFO] [unknown:920] ["[region 614] 1095 [term: 1] received a MsgHeartbeat message with higher term from 615 [term: 6]"]
[2019/05/01 12:37:20.134 -07:00] [INFO] [unknown:719] ["[region 614] 1095 became follower at term 6"]
[2019/05/01 12:37:20.532 -07:00] [INFO] [unknown:1625] ["[region 233] 780 [term 7] received MsgTimeoutNow from 236 and starts an election to get leadership."]
[2019/05/01 12:37:20.532 -07:00] [INFO] [unknown:739] ["[region 233] 780 became candidate at term 8"]
[2019/05/01 12:37:20.532 -07:00] [INFO] [unknown:854] ["[region 233] 780 received MsgRequestVoteResponse from 780 at term 8"]
[2019/05/01 12:37:20.532 -07:00] [INFO] [unknown:828] ["[region 233] 780 [logterm: 7, index: 10] sent MsgRequestVote request to 235 at term 8"]
[2019/05/01 12:37:20.532 -07:00] [INFO] [unknown:828] ["[region 233] 780 [logterm: 7, index: 10] sent MsgRequestVote request to 236 at term 8"]
[2019/05/01 12:37:20.560 -07:00] [INFO] [unknown:1625] ["[region 361] 781 [term 7] received MsgTimeoutNow from 364 and starts an election to get leadership."]
[2019/05/01 12:37:20.560 -07:00] [INFO] [unknown:739] ["[region 361] 781 became candidate at term 8"]
[2019/05/01 12:37:20.560 -07:00] [INFO] [unknown:854] ["[region 361] 781 received MsgRequestVoteResponse from 781 at term 8"]
[2019/05/01 12:37:20.560 -07:00] [INFO] [unknown:828] ["[region 361] 781 [logterm: 7, index: 10] sent MsgRequestVote request to 363 at term 8"]
[2019/05/01 12:37:20.560 -07:00] [INFO] [unknown:828] ["[region 361] 781 [logterm: 7, index: 10] sent MsgRequestVote request to 364 at term 8"]
[2019/05/01 12:37:20.560 -07:00] [INFO] [unknown:920] ["[region 497] 1006 [term: 7] received a MsgRequestVote message with higher term from 669 [term: 8]"]
[2019/05/01 12:37:20.560 -07:00] [INFO] [unknown:719] ["[region 497] 1006 became follower at term 8"]
[2019/05/01 12:37:20.560 -07:00] [INFO] [unknown:1083] ["[region 497] 1006 [logterm: 7, index: 13, vote: 0] cast MsgRequestVote for 669 [logterm: 7, index: 13] at term 8"]
[2019/05/01 12:37:20.585 -07:00] [INFO] [unknown:854] ["[region 233] 780 received MsgRequestVoteResponse from 235 at term 8"]
[2019/05/01 12:37:20.585 -07:00] [INFO] [unknown:1550] ["[region 233] 780 [quorum:2] has received 2 MsgRequestVoteResponse votes and 0 vote rejections"]
[2019/05/01 12:37:20.585 -07:00] [INFO] [unknown:789] ["[region 233] 780 became leader at term 8"]
[2019/05/01 12:37:20.634 -07:00] [INFO] [unknown:1625] ["[region 237] 576 [term 7] received MsgTimeoutNow from 240 and starts an election to get leadership."]
[2019/05/01 12:37:20.634 -07:00] [INFO] [unknown:739] ["[region 237] 576 became candidate at term 8"]
[2019/05/01 12:37:20.634 -07:00] [INFO] [unknown:854] ["[region 237] 576 received MsgRequestVoteResponse from 576 at term 8"]
[2019/05/01 12:37:20.634 -07:00] [INFO] [unknown:828] ["[region 237] 576 [logterm: 7, index: 10] sent MsgRequestVote request to 240 at term 8"]
[2019/05/01 12:37:20.634 -07:00] [INFO] [unknown:828] ["[region 237] 576 [logterm: 7, index: 10] sent MsgRequestVote request to 239 at term 8"]
[2019/05/01 12:37:20.685 -07:00] [INFO] [unknown:854] ["[region 361] 781 received MsgRequestVoteResponse from 363 at term 8"]
[2019/05/01 12:37:20.685 -07:00] [INFO] [unknown:1550] ["[region 361] 781 [quorum:2] has received 2 MsgRequestVoteResponse votes and 0 vote rejections"]
[2019/05/01 12:37:20.685 -07:00] [INFO] [unknown:789] ["[region 361] 781 became leader at term 8"]
[2019/05/01 12:37:20.708 -07:00] [INFO] [unknown:854] ["[region 237] 576 received MsgRequestVoteResponse from 239 at term 8"]
[2019/05/01 12:37:20.709 -07:00] [INFO] [unknown:1550] ["[region 237] 576 [quorum:2] has received 2 MsgRequestVoteResponse votes and 0 vote rejections"]
[2019/05/01 12:37:20.709 -07:00] [INFO] [unknown:789] ["[region 237] 576 became leader at term 8"]
[2019/05/01 12:37:20.952 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 1053, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=8] [term=6] [peer_id=1053] [region_id=808]
[2019/05/01 12:37:20.952 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 6, version: 97, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=1053] [region_id=808]
[2019/05/01 12:37:20.952 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 808, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 104, 111, 115, 116, 255, 95, 99, 97, 99, 255, 104, 101, 95, 255, 115, 105, 122, 101, 0, 254, 0, 0, 253], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 104, 111, 115, 116, 255, 110, 97, 109, 101, 255, 0, 0, 0, 255, 0, 0, 0, 0, 0, 247, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 97, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 809, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 810, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 811, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1053, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1053, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1053] [region_id=808]
[2019/05/01 12:37:21.142 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 810, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=9] [term=6] [peer_id=1053] [region_id=808]
[2019/05/01 12:37:21.142 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 7, version: 97, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=1053] [region_id=808]
[2019/05/01 12:37:21.142 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 808, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 104, 111, 115, 116, 255, 95, 99, 97, 99, 255, 104, 101, 95, 255, 115, 105, 122, 101, 0, 254, 0, 0, 253], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 104, 111, 115, 116, 255, 110, 97, 109, 101, 255, 0, 0, 0, 255, 0, 0, 0, 0, 0, 247, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 7, version: 97, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 809, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 810, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 811, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1053, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 810, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1053] [region_id=808]
[2019/05/01 12:37:21.492 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 165], lock_version: 408089903833808904, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 170], lock_ttl: 3255, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:37:21.748 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=1098] [region_id=1015]
[2019/05/01 12:37:21.748 -07:00] [INFO] [unknown:719] ["[region 1015] 1098 became follower at term 0"]
[2019/05/01 12:37:21.748 -07:00] [INFO] [unknown:295] ["[region 1015] 1098 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:37:21.748 -07:00] [INFO] [unknown:719] ["[region 1015] 1098 became follower at term 1"]
[2019/05/01 12:37:21.748 -07:00] [INFO] [unknown:920] ["[region 1015] 1098 [term: 1] received a MsgHeartbeat message with higher term from 1016 [term: 6]"]
[2019/05/01 12:37:21.748 -07:00] [INFO] [unknown:719] ["[region 1015] 1098 became follower at term 6"]
[2019/05/01 12:37:21.785 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=1097] [region_id=784]
[2019/05/01 12:37:21.785 -07:00] [INFO] [unknown:719] ["[region 784] 1097 became follower at term 0"]
[2019/05/01 12:37:21.785 -07:00] [INFO] [unknown:295] ["[region 784] 1097 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:37:21.785 -07:00] [INFO] [unknown:719] ["[region 784] 1097 became follower at term 1"]
[2019/05/01 12:37:21.785 -07:00] [INFO] [unknown:920] ["[region 784] 1097 [term: 1] received a MsgHeartbeat message with higher term from 785 [term: 6]"]
[2019/05/01 12:37:21.785 -07:00] [INFO] [unknown:719] ["[region 784] 1097 became follower at term 6"]
[2019/05/01 12:37:21.945 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 168], lock_version: 408089904200810497, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 168], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:37:22.005 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 168], lock_version: 408089904200810497, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 168], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:37:22.137 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_614_6_7_(default|lock|write).sst] [snap_key=614_6_7]
[2019/05/01 12:37:22.154 -07:00] [INFO] [unknown:1792] ["[region 614] 1095 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 7, term: 6]"]
[2019/05/01 12:37:22.154 -07:00] [INFO] [unknown:1816] ["[region 614] 1095 restored progress of 615 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:37:22.154 -07:00] [INFO] [unknown:1816] ["[region 614] 1095 restored progress of 616 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:37:22.154 -07:00] [INFO] [unknown:1816] ["[region 614] 1095 restored progress of 617 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:37:22.154 -07:00] [INFO] [unknown:1816] ["[region 614] 1095 restored progress of 1095 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:37:22.154 -07:00] [INFO] [unknown:474] ["[region 614] 1095 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 7, term: 6]"]
[2019/05/01 12:37:22.154 -07:00] [INFO] [unknown:1736] ["[region 614] 1095 [commit: 7] restored snapshot [index: 7, term: 6]"]
[2019/05/01 12:37:22.154 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=1095] [region_id=614]
[2019/05/01 12:37:22.154 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 7, truncated_state: Some(RaftTruncatedState { index: 7, term: 6, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 614, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 102, 116, 95, 113, 255, 117, 101, 114, 121, 255, 95, 101, 120, 255, 112, 97, 110, 115, 105, 255, 111, 110, 255, 95, 108, 105, 109, 105, 116, 255, 0, 255, 0, 0, 0, 0, 0, 0, 0, 247, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 102, 116, 95, 115, 255, 116, 111, 112, 119, 255, 111, 114, 100, 255, 95, 102, 105, 108, 101, 255, 0, 0, 255, 0, 0, 0, 0, 0, 0, 247, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 77, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 615, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 616, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 617, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1095, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1095] [region_id=614]
[2019/05/01 12:37:22.198 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 614, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 102, 116, 95, 113, 255, 117, 101, 114, 121, 255, 95, 101, 120, 255, 112, 97, 110, 115, 105, 255, 111, 110, 255, 95, 108, 105, 109, 105, 116, 255, 0, 255, 0, 0, 0, 0, 0, 0, 0, 247, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 102, 116, 95, 115, 255, 116, 111, 112, 119, 255, 111, 114, 100, 255, 95, 102, 105, 108, 101, 255, 0, 0, 255, 0, 0, 0, 0, 0, 0, 247, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 77, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 615, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 616, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 617, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1095, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1095] [region_id=614]
[2019/05/01 12:37:22.199 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 614] 1095"]
[2019/05/01 12:37:22.199 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=614]
[2019/05/01 12:37:22.202 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 167], lock_version: 408089904227024903, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 167], lock_ttl: 3228, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:37:22.243 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=44.012532ms] [region_id=614]
[2019/05/01 12:37:22.823 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 172], lock_version: 408089904476061702, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 172], lock_ttl: 3002, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:37:23.201 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 1095, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=8] [term=6] [peer_id=1095] [region_id=614]
[2019/05/01 12:37:23.201 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 6, version: 77, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=1095] [region_id=614]
[2019/05/01 12:37:23.201 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 614, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 102, 116, 95, 113, 255, 117, 101, 114, 121, 255, 95, 101, 120, 255, 112, 97, 110, 115, 105, 255, 111, 110, 255, 95, 108, 105, 109, 105, 116, 255, 0, 255, 0, 0, 0, 0, 0, 0, 0, 247, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 102, 116, 95, 115, 255, 116, 111, 112, 119, 255, 111, 114, 100, 255, 95, 102, 105, 108, 101, 255, 0, 0, 255, 0, 0, 0, 0, 0, 0, 247, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 77, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 615, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 616, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 617, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1095, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1095, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1095] [region_id=614]
[2019/05/01 12:37:23.286 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 617, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=9] [term=6] [peer_id=1095] [region_id=614]
[2019/05/01 12:37:23.286 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 7, version: 77, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=1095] [region_id=614]
[2019/05/01 12:37:23.286 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 614, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 102, 116, 95, 113, 255, 117, 101, 114, 121, 255, 95, 101, 120, 255, 112, 97, 110, 115, 105, 255, 111, 110, 255, 95, 108, 105, 109, 105, 116, 255, 0, 255, 0, 0, 0, 0, 0, 0, 0, 247, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 102, 116, 95, 115, 255, 116, 111, 112, 119, 255, 111, 114, 100, 255, 95, 102, 105, 108, 101, 255, 0, 0, 255, 0, 0, 0, 0, 0, 0, 247, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 7, version: 77, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 615, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 616, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 617, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1095, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 617, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1095] [region_id=614]
[2019/05/01 12:37:23.751 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_1015_6_7_(default|lock|write).sst] [snap_key=1015_6_7]
[2019/05/01 12:37:23.760 -07:00] [INFO] [unknown:1792] ["[region 1015] 1098 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 7, term: 6]"]
[2019/05/01 12:37:23.760 -07:00] [INFO] [unknown:1816] ["[region 1015] 1098 restored progress of 1016 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:37:23.760 -07:00] [INFO] [unknown:1816] ["[region 1015] 1098 restored progress of 1017 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:37:23.760 -07:00] [INFO] [unknown:1816] ["[region 1015] 1098 restored progress of 1018 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:37:23.760 -07:00] [INFO] [unknown:1816] ["[region 1015] 1098 restored progress of 1098 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:37:23.760 -07:00] [INFO] [unknown:474] ["[region 1015] 1098 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 7, term: 6]"]
[2019/05/01 12:37:23.760 -07:00] [INFO] [unknown:1736] ["[region 1015] 1098 [commit: 7] restored snapshot [index: 7, term: 6]"]
[2019/05/01 12:37:23.760 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=1098] [region_id=1015]
[2019/05/01 12:37:23.760 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 7, truncated_state: Some(RaftTruncatedState { index: 7, term: 6, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 1015, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 97, 255, 117, 116, 111, 255, 101, 120, 116, 101, 110, 255, 100, 95, 255, 105, 110, 99, 114, 101, 109, 255, 101, 255, 110, 116, 0, 0, 0, 0, 0, 250, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 97, 255, 117, 116, 111, 255, 105, 110, 99, 95, 108, 255, 111, 99, 255, 107, 95, 109, 111, 100, 101, 255, 0, 255, 0, 0, 0, 0, 0, 0, 0, 247, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 117, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1016, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1017, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1018, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1098, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1098] [region_id=1015]
[2019/05/01 12:37:23.777 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 1015, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 97, 255, 117, 116, 111, 255, 101, 120, 116, 101, 110, 255, 100, 95, 255, 105, 110, 99, 114, 101, 109, 255, 101, 255, 110, 116, 0, 0, 0, 0, 0, 250, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 97, 255, 117, 116, 111, 255, 105, 110, 99, 95, 108, 255, 111, 99, 255, 107, 95, 109, 111, 100, 101, 255, 0, 255, 0, 0, 0, 0, 0, 0, 0, 247, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 117, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1016, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1017, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1018, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1098, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1098] [region_id=1015]
[2019/05/01 12:37:23.777 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 1015] 1098"]
[2019/05/01 12:37:23.777 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=1015]
[2019/05/01 12:37:23.788 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_784_6_7_(default|lock|write).sst] [snap_key=784_6_7]
[2019/05/01 12:37:23.793 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=16.293962ms] [region_id=1015]
[2019/05/01 12:37:23.793 -07:00] [INFO] [unknown:1792] ["[region 784] 1097 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 7, term: 6]"]
[2019/05/01 12:37:23.793 -07:00] [INFO] [unknown:1816] ["[region 784] 1097 restored progress of 785 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:37:23.793 -07:00] [INFO] [unknown:1816] ["[region 784] 1097 restored progress of 786 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:37:23.793 -07:00] [INFO] [unknown:1816] ["[region 784] 1097 restored progress of 787 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:37:23.793 -07:00] [INFO] [unknown:1816] ["[region 784] 1097 restored progress of 1097 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:37:23.793 -07:00] [INFO] [unknown:474] ["[region 784] 1097 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 7, term: 6]"]
[2019/05/01 12:37:23.793 -07:00] [INFO] [unknown:1736] ["[region 784] 1097 [commit: 7] restored snapshot [index: 7, term: 6]"]
[2019/05/01 12:37:23.793 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=1097] [region_id=784]
[2019/05/01 12:37:23.793 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 7, truncated_state: Some(RaftTruncatedState { index: 7, term: 6, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 784, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 104, 97, 118, 101, 255, 95, 111, 112, 101, 255, 110, 115, 115, 255, 108, 0, 0, 0, 0, 251, 0, 0, 253], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 104, 97, 118, 101, 255, 95, 112, 114, 111, 255, 102, 105, 108, 255, 105, 110, 103, 0, 0, 253, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 97, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 785, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 786, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 787, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1097, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1097] [region_id=784]
[2019/05/01 12:37:23.810 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 784] 1097"]
[2019/05/01 12:37:23.810 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 784, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 104, 97, 118, 101, 255, 95, 111, 112, 101, 255, 110, 115, 115, 255, 108, 0, 0, 0, 0, 251, 0, 0, 253], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 104, 97, 118, 101, 255, 95, 112, 114, 111, 255, 102, 105, 108, 255, 105, 110, 103, 0, 0, 253, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 97, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 785, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 786, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 787, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1097, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1097] [region_id=784]
[2019/05/01 12:37:23.810 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=784]
[2019/05/01 12:37:23.810 -07:00] [INFO] [unknown:1625] ["[region 397] 1052 [term 6] received MsgTimeoutNow from 398 and starts an election to get leadership."]
[2019/05/01 12:37:23.810 -07:00] [INFO] [unknown:739] ["[region 397] 1052 became candidate at term 7"]
[2019/05/01 12:37:23.810 -07:00] [INFO] [unknown:854] ["[region 397] 1052 received MsgRequestVoteResponse from 1052 at term 7"]
[2019/05/01 12:37:23.810 -07:00] [INFO] [unknown:828] ["[region 397] 1052 [logterm: 6, index: 9] sent MsgRequestVote request to 398 at term 7"]
[2019/05/01 12:37:23.810 -07:00] [INFO] [unknown:828] ["[region 397] 1052 [logterm: 6, index: 9] sent MsgRequestVote request to 400 at term 7"]
[2019/05/01 12:37:23.827 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=17.046214ms] [region_id=784]
[2019/05/01 12:37:23.836 -07:00] [INFO] [unknown:854] ["[region 397] 1052 received MsgRequestVoteResponse from 398 at term 7"]
[2019/05/01 12:37:23.836 -07:00] [INFO] [unknown:1550] ["[region 397] 1052 [quorum:2] has received 2 MsgRequestVoteResponse votes and 0 vote rejections"]
[2019/05/01 12:37:23.836 -07:00] [INFO] [unknown:789] ["[region 397] 1052 became leader at term 7"]
[2019/05/01 12:37:24.102 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 174], lock_version: 408089904816848900, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 174], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:37:24.351 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 175], lock_version: 408089904869277712, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 177], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:37:24.358 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 175], lock_version: 408089904869277712, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 175], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:37:24.488 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 174], lock_version: 408089904895492100, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 178], lock_ttl: 3108, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:37:24.551 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 176], lock_version: 408089904921706505, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 176], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:37:24.573 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 178], lock_version: 408089904947920904, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 178], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:37:24.596 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 178], lock_version: 408089904947920904, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 178], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:37:24.701 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 178], lock_version: 408089904974135299, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 178], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:37:24.759 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 179], lock_version: 408089904961028101, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 179], lock_ttl: 3082, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:37:24.791 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 1098, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=8] [term=6] [peer_id=1098] [region_id=1015]
[2019/05/01 12:37:24.791 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 6, version: 117, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=1098] [region_id=1015]
[2019/05/01 12:37:24.791 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 1015, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 97, 255, 117, 116, 111, 255, 101, 120, 116, 101, 110, 255, 100, 95, 255, 105, 110, 99, 114, 101, 109, 255, 101, 255, 110, 116, 0, 0, 0, 0, 0, 250, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 97, 255, 117, 116, 111, 255, 105, 110, 99, 95, 108, 255, 111, 99, 255, 107, 95, 109, 111, 100, 101, 255, 0, 255, 0, 0, 0, 0, 0, 0, 0, 247, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 117, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1016, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1017, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1018, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1098, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1098, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1098] [region_id=1015]
[2019/05/01 12:37:24.836 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 1097, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=8] [term=6] [peer_id=1097] [region_id=784]
[2019/05/01 12:37:24.836 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 6, version: 97, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=1097] [region_id=784]
[2019/05/01 12:37:24.836 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 784, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 104, 97, 118, 101, 255, 95, 111, 112, 101, 255, 110, 115, 115, 255, 108, 0, 0, 0, 0, 251, 0, 0, 253], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 104, 97, 118, 101, 255, 95, 112, 114, 111, 255, 102, 105, 108, 255, 105, 110, 103, 0, 0, 253, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 97, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 785, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 786, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 787, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1097, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1097, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1097] [region_id=784]
[2019/05/01 12:37:24.901 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 1018, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=9] [term=6] [peer_id=1098] [region_id=1015]
[2019/05/01 12:37:24.901 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 7, version: 117, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=1098] [region_id=1015]
[2019/05/01 12:37:24.901 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 1015, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 97, 255, 117, 116, 111, 255, 101, 120, 116, 101, 110, 255, 100, 95, 255, 105, 110, 99, 114, 101, 109, 255, 101, 255, 110, 116, 0, 0, 0, 0, 0, 250, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 97, 255, 117, 116, 111, 255, 105, 110, 99, 95, 108, 255, 111, 99, 255, 107, 95, 109, 111, 100, 101, 255, 0, 255, 0, 0, 0, 0, 0, 0, 0, 247, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 7, version: 117, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1016, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1017, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1018, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1098, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1018, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1098] [region_id=1015]
[2019/05/01 12:37:24.969 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 787, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=9] [term=6] [peer_id=1097] [region_id=784]
[2019/05/01 12:37:24.969 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 7, version: 97, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=1097] [region_id=784]
[2019/05/01 12:37:24.969 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 784, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 104, 97, 118, 101, 255, 95, 111, 112, 101, 255, 110, 115, 115, 255, 108, 0, 0, 0, 0, 251, 0, 0, 253], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 104, 97, 118, 101, 255, 95, 112, 114, 111, 255, 102, 105, 108, 255, 105, 110, 103, 0, 0, 253, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 7, version: 97, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 785, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 786, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 787, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1097, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 787, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1097] [region_id=784]
[2019/05/01 12:37:25.065 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 175], lock_version: 408089905039671303, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 175], lock_ttl: 3069, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:37:25.308 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 179], lock_version: 408089905105207303, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 180], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:37:25.404 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 179], lock_version: 408089905105207303, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 180], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:37:25.681 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 181], lock_version: 408089905196957701, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 183], lock_ttl: 3003, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:37:25.957 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=1102] [region_id=1087]
[2019/05/01 12:37:25.957 -07:00] [INFO] [unknown:719] ["[region 1087] 1102 became follower at term 0"]
[2019/05/01 12:37:25.957 -07:00] [INFO] [unknown:295] ["[region 1087] 1102 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:37:25.957 -07:00] [INFO] [unknown:719] ["[region 1087] 1102 became follower at term 1"]
[2019/05/01 12:37:25.957 -07:00] [INFO] [unknown:920] ["[region 1087] 1102 [term: 1] received a MsgHeartbeat message with higher term from 1090 [term: 6]"]
[2019/05/01 12:37:25.957 -07:00] [INFO] [unknown:719] ["[region 1087] 1102 became follower at term 6"]
[2019/05/01 12:37:26.085 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 181], lock_version: 408089905262493701, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 184], lock_ttl: 3003, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:37:26.149 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 181], lock_version: 408089905262493701, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 184], lock_ttl: 3003, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:37:26.535 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 179], lock_version: 408089905354244100, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 181], lock_ttl: 3250, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:37:26.595 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 179], lock_version: 408089905354244100, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 181], lock_ttl: 3250, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:37:26.872 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=1101] [region_id=96]
[2019/05/01 12:37:26.872 -07:00] [INFO] [unknown:719] ["[region 96] 1101 became follower at term 0"]
[2019/05/01 12:37:26.872 -07:00] [INFO] [unknown:295] ["[region 96] 1101 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:37:26.872 -07:00] [INFO] [unknown:719] ["[region 96] 1101 became follower at term 1"]
[2019/05/01 12:37:26.872 -07:00] [INFO] [unknown:920] ["[region 96] 1101 [term: 1] received a MsgHeartbeat message with higher term from 169 [term: 7]"]
[2019/05/01 12:37:26.872 -07:00] [INFO] [unknown:719] ["[region 96] 1101 became follower at term 7"]
[2019/05/01 12:37:26.921 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 181], lock_version: 408089905485316101, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 181], lock_ttl: 3002, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:37:27.147 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 185], lock_version: 408089905577066504, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 185], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:37:27.540 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 186], lock_version: 408089905681924105, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 186], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:37:27.667 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 185], lock_version: 408089905734352910, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 185], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:37:27.668 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 185], lock_version: 408089905734352910, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 185], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:37:28.090 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_1087_6_7_(default|lock|write).sst] [snap_key=1087_6_7]
[2019/05/01 12:37:28.138 -07:00] [INFO] [unknown:1792] ["[region 1087] 1102 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 7, term: 6]"]
[2019/05/01 12:37:28.139 -07:00] [INFO] [unknown:1816] ["[region 1087] 1102 restored progress of 1088 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:37:28.139 -07:00] [INFO] [unknown:1816] ["[region 1087] 1102 restored progress of 1089 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:37:28.139 -07:00] [INFO] [unknown:1816] ["[region 1087] 1102 restored progress of 1090 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:37:28.139 -07:00] [INFO] [unknown:1816] ["[region 1087] 1102 restored progress of 1102 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:37:28.139 -07:00] [INFO] [unknown:474] ["[region 1087] 1102 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 7, term: 6]"]
[2019/05/01 12:37:28.139 -07:00] [INFO] [unknown:1736] ["[region 1087] 1102 [commit: 7] restored snapshot [index: 7, term: 6]"]
[2019/05/01 12:37:28.139 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=1102] [region_id=1087]
[2019/05/01 12:37:28.139 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 7, truncated_state: Some(RaftTruncatedState { index: 7, term: 6, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 1087, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 99, 255, 111, 109, 112, 255, 114, 101, 115, 115, 105, 255, 111, 110, 255, 95, 102, 97, 105, 108, 117, 255, 114, 255, 101, 95, 116, 104, 114, 101, 115, 255, 255, 104, 111, 108, 100, 95, 112, 99, 116, 255, 255, 0, 0, 0, 0, 0, 0, 0, 255, 0, 247, 0, 0, 0, 0, 0, 0, 249], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 99, 255, 111, 109, 112, 255, 114, 101, 115, 115, 105, 255, 111, 110, 255, 95, 108, 101, 118, 101, 108, 255, 0, 255, 0, 0, 0, 0, 0, 0, 0, 247, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 127, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1088, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1089, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1090, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1102, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1102] [region_id=1087]
[2019/05/01 12:37:28.187 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 1087] 1102"]
[2019/05/01 12:37:28.187 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 1087, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 99, 255, 111, 109, 112, 255, 114, 101, 115, 115, 105, 255, 111, 110, 255, 95, 102, 97, 105, 108, 117, 255, 114, 255, 101, 95, 116, 104, 114, 101, 115, 255, 255, 104, 111, 108, 100, 95, 112, 99, 116, 255, 255, 0, 0, 0, 0, 0, 0, 0, 255, 0, 247, 0, 0, 0, 0, 0, 0, 249], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 99, 255, 111, 109, 112, 255, 114, 101, 115, 115, 105, 255, 111, 110, 255, 95, 108, 101, 118, 101, 108, 255, 0, 255, 0, 0, 0, 0, 0, 0, 0, 247, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 127, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1088, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1089, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1090, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1102, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1102] [region_id=1087]
[2019/05/01 12:37:28.187 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=1087]
[2019/05/01 12:37:28.308 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=120.341739ms] [region_id=1087]
[2019/05/01 12:37:28.339 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 185], lock_version: 408089905826103300, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 185], lock_ttl: 3003, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:37:28.403 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 185], lock_version: 408089905826103300, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 185], lock_ttl: 3003, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:37:28.477 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 185], lock_version: 408089905826103300, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 185], lock_ttl: 3003, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:37:28.862 -07:00] [INFO] [unknown:1625] ["[region 808] 1053 [term 6] received MsgTimeoutNow from 809 and starts an election to get leadership."]
[2019/05/01 12:37:28.862 -07:00] [INFO] [unknown:739] ["[region 808] 1053 became candidate at term 7"]
[2019/05/01 12:37:28.862 -07:00] [INFO] [unknown:854] ["[region 808] 1053 received MsgRequestVoteResponse from 1053 at term 7"]
[2019/05/01 12:37:28.862 -07:00] [INFO] [unknown:828] ["[region 808] 1053 [logterm: 6, index: 9] sent MsgRequestVote request to 811 at term 7"]
[2019/05/01 12:37:28.862 -07:00] [INFO] [unknown:828] ["[region 808] 1053 [logterm: 6, index: 9] sent MsgRequestVote request to 809 at term 7"]
[2019/05/01 12:37:28.918 -07:00] [INFO] [unknown:854] ["[region 808] 1053 received MsgRequestVoteResponse from 811 at term 7"]
[2019/05/01 12:37:28.918 -07:00] [INFO] [unknown:1550] ["[region 808] 1053 [quorum:2] has received 2 MsgRequestVoteResponse votes and 0 vote rejections"]
[2019/05/01 12:37:28.918 -07:00] [INFO] [unknown:789] ["[region 808] 1053 became leader at term 7"]
[2019/05/01 12:37:28.946 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_96_7_11_(default|lock|write).sst] [snap_key=96_7_11]
[2019/05/01 12:37:28.991 -07:00] [INFO] [unknown:1792] ["[region 96] 1101 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 11, term: 7]"]
[2019/05/01 12:37:28.991 -07:00] [INFO] [unknown:1816] ["[region 96] 1101 restored progress of 97 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:37:28.991 -07:00] [INFO] [unknown:1816] ["[region 96] 1101 restored progress of 98 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:37:28.991 -07:00] [INFO] [unknown:1816] ["[region 96] 1101 restored progress of 169 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:37:28.991 -07:00] [INFO] [unknown:1816] ["[region 96] 1101 restored progress of 1101 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:37:28.991 -07:00] [INFO] [unknown:474] ["[region 96] 1101 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 11, term: 7]"]
[2019/05/01 12:37:28.991 -07:00] [INFO] [unknown:1736] ["[region 96] 1101 [commit: 11] restored snapshot [index: 11, term: 7]"]
[2019/05/01 12:37:28.991 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=1101] [region_id=96]
[2019/05/01 12:37:28.991 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 11, truncated_state: Some(RaftTruncatedState { index: 11, term: 7, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 96, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 97, 117, 116, 111, 255, 95, 105, 110, 99, 255, 114, 101, 109, 255, 101, 110, 116, 95, 111, 255, 102, 102, 255, 115, 101, 116, 0, 0, 0, 252, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 17, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 97, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 98, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 169, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1101, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1101] [region_id=96]
[2019/05/01 12:37:29.039 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 96, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 97, 117, 116, 111, 255, 95, 105, 110, 99, 255, 114, 101, 109, 255, 101, 110, 116, 95, 111, 255, 102, 102, 255, 115, 101, 116, 0, 0, 0, 252, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 17, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 97, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 98, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 169, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1101, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1101] [region_id=96]
[2019/05/01 12:37:29.039 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 96] 1101"]
[2019/05/01 12:37:29.039 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=96]
[2019/05/01 12:37:29.048 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 1102, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=8] [term=6] [peer_id=1102] [region_id=1087]
[2019/05/01 12:37:29.048 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 6, version: 127, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=1102] [region_id=1087]
[2019/05/01 12:37:29.048 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 1087, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 99, 255, 111, 109, 112, 255, 114, 101, 115, 115, 105, 255, 111, 110, 255, 95, 102, 97, 105, 108, 117, 255, 114, 255, 101, 95, 116, 104, 114, 101, 115, 255, 255, 104, 111, 108, 100, 95, 112, 99, 116, 255, 255, 0, 0, 0, 0, 0, 0, 0, 255, 0, 247, 0, 0, 0, 0, 0, 0, 249], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 99, 255, 111, 109, 112, 255, 114, 101, 115, 115, 105, 255, 111, 110, 255, 95, 108, 101, 118, 101, 108, 255, 0, 255, 0, 0, 0, 0, 0, 0, 0, 247, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 127, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1088, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1089, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1090, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1102, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1102, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1102] [region_id=1087]
[2019/05/01 12:37:29.075 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=35.538224ms] [region_id=96]
[2019/05/01 12:37:29.092 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 1088, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=9] [term=6] [peer_id=1102] [region_id=1087]
[2019/05/01 12:37:29.092 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 7, version: 127, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=1102] [region_id=1087]
[2019/05/01 12:37:29.092 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 1087, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 99, 255, 111, 109, 112, 255, 114, 101, 115, 115, 105, 255, 111, 110, 255, 95, 102, 97, 105, 108, 117, 255, 114, 255, 101, 95, 116, 104, 114, 101, 115, 255, 255, 104, 111, 108, 100, 95, 112, 99, 116, 255, 255, 0, 0, 0, 0, 0, 0, 0, 255, 0, 247, 0, 0, 0, 0, 0, 0, 249], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 99, 255, 111, 109, 112, 255, 114, 101, 115, 115, 105, 255, 111, 110, 255, 95, 108, 101, 118, 101, 108, 255, 0, 255, 0, 0, 0, 0, 0, 0, 0, 247, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 7, version: 127, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1088, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1089, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1090, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1102, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1088, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1102] [region_id=1087]
[2019/05/01 12:37:29.328 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 186], lock_version: 408089906166890504, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 186], lock_ttl: 3064, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:37:29.773 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=1145] [region_id=901]
[2019/05/01 12:37:29.773 -07:00] [INFO] [unknown:719] ["[region 901] 1145 became follower at term 0"]
[2019/05/01 12:37:29.773 -07:00] [INFO] [unknown:295] ["[region 901] 1145 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:37:29.773 -07:00] [INFO] [unknown:719] ["[region 901] 1145 became follower at term 1"]
[2019/05/01 12:37:29.773 -07:00] [INFO] [unknown:920] ["[region 901] 1145 [term: 1] received a MsgHeartbeat message with higher term from 902 [term: 6]"]
[2019/05/01 12:37:29.773 -07:00] [INFO] [unknown:719] ["[region 901] 1145 became follower at term 6"]
[2019/05/01 12:37:29.964 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 1101, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=12] [term=7] [peer_id=1101] [region_id=96]
[2019/05/01 12:37:29.969 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 6, version: 17, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=1101] [region_id=96]
[2019/05/01 12:37:29.969 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 96, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 97, 117, 116, 111, 255, 95, 105, 110, 99, 255, 114, 101, 109, 255, 101, 110, 116, 95, 111, 255, 102, 102, 255, 115, 101, 116, 0, 0, 0, 252, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 17, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 97, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 98, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 169, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1101, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1101, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1101] [region_id=96]
[2019/05/01 12:37:30.025 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 187], lock_version: 408089906311069698, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 188], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:37:30.084 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 98, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=13] [term=7] [peer_id=1101] [region_id=96]
[2019/05/01 12:37:30.088 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 7, version: 17, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=1101] [region_id=96]
[2019/05/01 12:37:30.088 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 96, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 97, 117, 116, 111, 255, 95, 105, 110, 99, 255, 114, 101, 109, 255, 101, 110, 116, 95, 111, 255, 102, 102, 255, 115, 101, 116, 0, 0, 0, 252, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 7, version: 17, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 97, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 98, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 169, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1101, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 98, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1101] [region_id=96]
[2019/05/01 12:37:30.109 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 186], lock_version: 408089906284855299, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 186], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:37:30.146 -07:00] [INFO] [unknown:1625] ["[region 417] 484 [term 7] received MsgTimeoutNow from 420 and starts an election to get leadership."]
[2019/05/01 12:37:30.146 -07:00] [INFO] [unknown:739] ["[region 417] 484 became candidate at term 8"]
[2019/05/01 12:37:30.146 -07:00] [INFO] [unknown:854] ["[region 417] 484 received MsgRequestVoteResponse from 484 at term 8"]
[2019/05/01 12:37:30.146 -07:00] [INFO] [unknown:828] ["[region 417] 484 [logterm: 7, index: 13] sent MsgRequestVote request to 898 at term 8"]
[2019/05/01 12:37:30.146 -07:00] [INFO] [unknown:828] ["[region 417] 484 [logterm: 7, index: 13] sent MsgRequestVote request to 420 at term 8"]
[2019/05/01 12:37:30.157 -07:00] [INFO] [unknown:1625] ["[region 225] 899 [term 7] received MsgTimeoutNow from 228 and starts an election to get leadership."]
[2019/05/01 12:37:30.157 -07:00] [INFO] [unknown:739] ["[region 225] 899 became candidate at term 8"]
[2019/05/01 12:37:30.157 -07:00] [INFO] [unknown:854] ["[region 225] 899 received MsgRequestVoteResponse from 899 at term 8"]
[2019/05/01 12:37:30.157 -07:00] [INFO] [unknown:828] ["[region 225] 899 [logterm: 7, index: 13] sent MsgRequestVote request to 228 at term 8"]
[2019/05/01 12:37:30.157 -07:00] [INFO] [unknown:828] ["[region 225] 899 [logterm: 7, index: 13] sent MsgRequestVote request to 486 at term 8"]
[2019/05/01 12:37:30.169 -07:00] [INFO] [unknown:1625] ["[region 321] 442 [term 6] received MsgTimeoutNow from 324 and starts an election to get leadership."]
[2019/05/01 12:37:30.169 -07:00] [INFO] [unknown:739] ["[region 321] 442 became candidate at term 7"]
[2019/05/01 12:37:30.169 -07:00] [INFO] [unknown:854] ["[region 321] 442 received MsgRequestVoteResponse from 442 at term 7"]
[2019/05/01 12:37:30.169 -07:00] [INFO] [unknown:828] ["[region 321] 442 [logterm: 6, index: 9] sent MsgRequestVote request to 324 at term 7"]
[2019/05/01 12:37:30.169 -07:00] [INFO] [unknown:828] ["[region 321] 442 [logterm: 6, index: 9] sent MsgRequestVote request to 323 at term 7"]
[2019/05/01 12:37:30.190 -07:00] [INFO] [unknown:854] ["[region 417] 484 received MsgRequestVoteResponse from 420 at term 8"]
[2019/05/01 12:37:30.190 -07:00] [INFO] [unknown:1550] ["[region 417] 484 [quorum:2] has received 2 MsgRequestVoteResponse votes and 0 vote rejections"]
[2019/05/01 12:37:30.190 -07:00] [INFO] [unknown:789] ["[region 417] 484 became leader at term 8"]
[2019/05/01 12:37:30.224 -07:00] [INFO] [unknown:854] ["[region 321] 442 received MsgRequestVoteResponse from 323 at term 7"]
[2019/05/01 12:37:30.224 -07:00] [INFO] [unknown:1550] ["[region 321] 442 [quorum:2] has received 2 MsgRequestVoteResponse votes and 0 vote rejections"]
[2019/05/01 12:37:30.224 -07:00] [INFO] [unknown:789] ["[region 321] 442 became leader at term 7"]
[2019/05/01 12:37:30.245 -07:00] [INFO] [unknown:854] ["[region 225] 899 received MsgRequestVoteResponse from 228 at term 8"]
[2019/05/01 12:37:30.245 -07:00] [INFO] [unknown:1550] ["[region 225] 899 [quorum:2] has received 2 MsgRequestVoteResponse votes and 0 vote rejections"]
[2019/05/01 12:37:30.245 -07:00] [INFO] [unknown:789] ["[region 225] 899 became leader at term 8"]
[2019/05/01 12:37:30.331 -07:00] [INFO] [unknown:920] ["[region 28] 824 [term: 7] received a MsgRequestVote message with higher term from 777 [term: 8]"]
[2019/05/01 12:37:30.331 -07:00] [INFO] [unknown:719] ["[region 28] 824 became follower at term 8"]
[2019/05/01 12:37:30.331 -07:00] [INFO] [unknown:1083] ["[region 28] 824 [logterm: 7, index: 29, vote: 0] cast MsgRequestVote for 777 [logterm: 7, index: 29] at term 8"]
[2019/05/01 12:37:31.319 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 191], lock_version: 408089906678071308, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 191], lock_ttl: 3054, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:37:31.376 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 190], lock_version: 408089906678071309, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 190], lock_ttl: 3002, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:37:31.812 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=1148] [region_id=1035]
[2019/05/01 12:37:31.812 -07:00] [INFO] [unknown:719] ["[region 1035] 1148 became follower at term 0"]
[2019/05/01 12:37:31.812 -07:00] [INFO] [unknown:295] ["[region 1035] 1148 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:37:31.812 -07:00] [INFO] [unknown:719] ["[region 1035] 1148 became follower at term 1"]
[2019/05/01 12:37:31.812 -07:00] [INFO] [unknown:920] ["[region 1035] 1148 [term: 1] received a MsgHeartbeat message with higher term from 1036 [term: 6]"]
[2019/05/01 12:37:31.812 -07:00] [INFO] [unknown:719] ["[region 1035] 1148 became follower at term 6"]
[2019/05/01 12:37:31.813 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_901_6_7_(default|lock|write).sst] [snap_key=901_6_7]
[2019/05/01 12:37:31.837 -07:00] [INFO] [unknown:1792] ["[region 901] 1145 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 7, term: 6]"]
[2019/05/01 12:37:31.837 -07:00] [INFO] [unknown:1816] ["[region 901] 1145 restored progress of 902 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:37:31.837 -07:00] [INFO] [unknown:1816] ["[region 901] 1145 restored progress of 903 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:37:31.837 -07:00] [INFO] [unknown:1816] ["[region 901] 1145 restored progress of 904 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:37:31.837 -07:00] [INFO] [unknown:1816] ["[region 901] 1145 restored progress of 1145 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:37:31.837 -07:00] [INFO] [unknown:474] ["[region 901] 1145 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 7, term: 6]"]
[2019/05/01 12:37:31.837 -07:00] [INFO] [unknown:1736] ["[region 901] 1145 [commit: 7] restored snapshot [index: 7, term: 6]"]
[2019/05/01 12:37:31.837 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=1145] [region_id=901]
[2019/05/01 12:37:31.837 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 7, truncated_state: Some(RaftTruncatedState { index: 7, term: 6, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 901, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 105, 116, 255, 95, 115, 108, 97, 255, 118, 101, 0, 255, 0, 0, 0, 0, 0, 249, 0, 0, 253], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 97, 255, 100, 97, 112, 255, 116, 105, 118, 101, 95, 255, 102, 108, 255, 117, 115, 104, 105, 110, 103, 255, 0, 255, 0, 0, 0, 0, 0, 0, 0, 247, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 107, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 902, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 903, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 904, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1145, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1145] [region_id=901]
[2019/05/01 12:37:31.906 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 901] 1145"]
[2019/05/01 12:37:31.906 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 901, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 105, 116, 255, 95, 115, 108, 97, 255, 118, 101, 0, 255, 0, 0, 0, 0, 0, 249, 0, 0, 253], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 97, 255, 100, 97, 112, 255, 116, 105, 118, 101, 95, 255, 102, 108, 255, 117, 115, 104, 105, 110, 103, 255, 0, 255, 0, 0, 0, 0, 0, 0, 0, 247, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 107, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 902, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 903, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 904, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1145, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1145] [region_id=901]
[2019/05/01 12:37:31.906 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=901]
[2019/05/01 12:37:31.931 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=24.18029ms] [region_id=901]
[2019/05/01 12:37:32.047 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 192], lock_version: 408089906874679303, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 192], lock_ttl: 3002, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:37:32.146 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 192], lock_version: 408089906927108103, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 192], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:37:32.155 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 192], lock_version: 408089906927108103, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 193], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:37:32.243 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=1147] [region_id=317]
[2019/05/01 12:37:32.243 -07:00] [INFO] [unknown:719] ["[region 317] 1147 became follower at term 0"]
[2019/05/01 12:37:32.243 -07:00] [INFO] [unknown:295] ["[region 317] 1147 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:37:32.243 -07:00] [INFO] [unknown:719] ["[region 317] 1147 became follower at term 1"]
[2019/05/01 12:37:32.251 -07:00] [INFO] [unknown:920] ["[region 317] 1147 [term: 1] received a MsgHeartbeat message with higher term from 320 [term: 6]"]
[2019/05/01 12:37:32.251 -07:00] [INFO] [unknown:719] ["[region 317] 1147 became follower at term 6"]
[2019/05/01 12:37:32.272 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 194], lock_version: 408089906940215310, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 194], lock_ttl: 3003, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:37:32.827 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 1145, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=8] [term=6] [peer_id=1145] [region_id=901]
[2019/05/01 12:37:32.827 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 6, version: 107, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=1145] [region_id=901]
[2019/05/01 12:37:32.827 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 901, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 105, 116, 255, 95, 115, 108, 97, 255, 118, 101, 0, 255, 0, 0, 0, 0, 0, 249, 0, 0, 253], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 97, 255, 100, 97, 112, 255, 116, 105, 118, 101, 95, 255, 102, 108, 255, 117, 115, 104, 105, 110, 103, 255, 0, 255, 0, 0, 0, 0, 0, 0, 0, 247, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 107, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 902, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 903, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 904, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1145, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1145, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1145] [region_id=901]
[2019/05/01 12:37:32.895 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 903, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=9] [term=6] [peer_id=1145] [region_id=901]
[2019/05/01 12:37:32.895 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 7, version: 107, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=1145] [region_id=901]
[2019/05/01 12:37:32.895 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 901, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 105, 116, 255, 95, 115, 108, 97, 255, 118, 101, 0, 255, 0, 0, 0, 0, 0, 249, 0, 0, 253], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 97, 255, 100, 97, 112, 255, 116, 105, 118, 101, 95, 255, 102, 108, 255, 117, 115, 104, 105, 110, 103, 255, 0, 255, 0, 0, 0, 0, 0, 0, 0, 247, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 7, version: 107, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 902, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 903, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 904, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1145, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 903, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1145] [region_id=901]
[2019/05/01 12:37:33.792 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 197], lock_version: 408089907346538504, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 197], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:37:33.812 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_1035_6_7_(default|lock|write).sst] [snap_key=1035_6_7]
[2019/05/01 12:37:33.823 -07:00] [INFO] [unknown:1792] ["[region 1035] 1148 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 7, term: 6]"]
[2019/05/01 12:37:33.823 -07:00] [INFO] [unknown:1816] ["[region 1035] 1148 restored progress of 1036 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:37:33.823 -07:00] [INFO] [unknown:1816] ["[region 1035] 1148 restored progress of 1037 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:37:33.823 -07:00] [INFO] [unknown:1816] ["[region 1035] 1148 restored progress of 1038 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:37:33.823 -07:00] [INFO] [unknown:1816] ["[region 1035] 1148 restored progress of 1148 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:37:33.823 -07:00] [INFO] [unknown:474] ["[region 1035] 1148 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 7, term: 6]"]
[2019/05/01 12:37:33.823 -07:00] [INFO] [unknown:1736] ["[region 1035] 1148 [commit: 7] restored snapshot [index: 7, term: 6]"]
[2019/05/01 12:37:33.823 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=1148] [region_id=1035]
[2019/05/01 12:37:33.823 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 7, truncated_state: Some(RaftTruncatedState { index: 7, term: 6, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 1035, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 98, 255, 117, 102, 102, 255, 101, 114, 95, 112, 111, 255, 111, 108, 255, 95, 102, 105, 108, 101, 110, 255, 97, 255, 109, 101, 0, 0, 0, 0, 0, 250, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 98, 255, 117, 102, 102, 255, 101, 114, 95, 112, 111, 255, 111, 108, 255, 95, 105, 110, 115, 116, 97, 255, 110, 255, 99, 101, 115, 0, 0, 0, 0, 251, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 117, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1036, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1037, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1038, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1148, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1148] [region_id=1035]
[2019/05/01 12:37:33.839 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 1035] 1148"]
[2019/05/01 12:37:33.839 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 1035, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 98, 255, 117, 102, 102, 255, 101, 114, 95, 112, 111, 255, 111, 108, 255, 95, 102, 105, 108, 101, 110, 255, 97, 255, 109, 101, 0, 0, 0, 0, 0, 250, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 98, 255, 117, 102, 102, 255, 101, 114, 95, 112, 111, 255, 111, 108, 255, 95, 105, 110, 115, 116, 97, 255, 110, 255, 99, 101, 115, 0, 0, 0, 0, 251, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 117, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1036, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1037, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1038, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1148, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1148] [region_id=1035]
[2019/05/01 12:37:33.839 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=1035]
[2019/05/01 12:37:33.856 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=16.004062ms] [region_id=1035]
[2019/05/01 12:37:33.862 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 199], lock_version: 408089907372752908, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 201], lock_ttl: 3003, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:37:34.113 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 202], lock_version: 408089907438288903, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 202], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:37:34.161 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 197], lock_version: 408089907451396099, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 199], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:37:34.241 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_317_6_11_(default|lock|write).sst] [snap_key=317_6_11]
[2019/05/01 12:37:34.249 -07:00] [INFO] [unknown:1792] ["[region 317] 1147 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 11, term: 6]"]
[2019/05/01 12:37:34.249 -07:00] [INFO] [unknown:1816] ["[region 317] 1147 restored progress of 318 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:37:34.249 -07:00] [INFO] [unknown:1816] ["[region 317] 1147 restored progress of 319 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:37:34.249 -07:00] [INFO] [unknown:1816] ["[region 317] 1147 restored progress of 320 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:37:34.249 -07:00] [INFO] [unknown:1816] ["[region 317] 1147 restored progress of 1147 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:37:34.249 -07:00] [INFO] [unknown:474] ["[region 317] 1147 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 11, term: 6]"]
[2019/05/01 12:37:34.249 -07:00] [INFO] [unknown:1736] ["[region 317] 1147 [commit: 11] restored snapshot [index: 11, term: 6]"]
[2019/05/01 12:37:34.249 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=1147] [region_id=317]
[2019/05/01 12:37:34.249 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 11, truncated_state: Some(RaftTruncatedState { index: 11, term: 6, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 317, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 114, 128, 0, 0, 0, 0, 255, 1, 212, 195, 0, 0, 0, 0, 0, 250], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 114, 128, 0, 0, 0, 0, 255, 1, 212, 197, 0, 0, 0, 0, 0, 250], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 20, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 318, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 319, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 320, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1147, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1147] [region_id=317]
[2019/05/01 12:37:34.266 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 317] 1147"]
[2019/05/01 12:37:34.266 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 317, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 114, 128, 0, 0, 0, 0, 255, 1, 212, 195, 0, 0, 0, 0, 0, 250], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 114, 128, 0, 0, 0, 0, 255, 1, 212, 197, 0, 0, 0, 0, 0, 250], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 20, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 318, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 319, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 320, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1147, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1147] [region_id=317]
[2019/05/01 12:37:34.266 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=317]
[2019/05/01 12:37:34.306 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=39.924687ms] [region_id=317]
[2019/05/01 12:37:34.905 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 1148, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=8] [term=6] [peer_id=1148] [region_id=1035]
[2019/05/01 12:37:34.905 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 6, version: 117, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=1148] [region_id=1035]
[2019/05/01 12:37:34.905 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 1035, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 98, 255, 117, 102, 102, 255, 101, 114, 95, 112, 111, 255, 111, 108, 255, 95, 102, 105, 108, 101, 110, 255, 97, 255, 109, 101, 0, 0, 0, 0, 0, 250, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 98, 255, 117, 102, 102, 255, 101, 114, 95, 112, 111, 255, 111, 108, 255, 95, 105, 110, 115, 116, 97, 255, 110, 255, 99, 101, 115, 0, 0, 0, 0, 251, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 117, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1036, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1037, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1038, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1148, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1148, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1148] [region_id=1035]
[2019/05/01 12:37:34.959 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 1037, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=9] [term=6] [peer_id=1148] [region_id=1035]
[2019/05/01 12:37:34.959 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 7, version: 117, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=1148] [region_id=1035]
[2019/05/01 12:37:34.959 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 1035, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 98, 255, 117, 102, 102, 255, 101, 114, 95, 112, 111, 255, 111, 108, 255, 95, 102, 105, 108, 101, 110, 255, 97, 255, 109, 101, 0, 0, 0, 0, 0, 250, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 98, 255, 117, 102, 102, 255, 101, 114, 95, 112, 111, 255, 111, 108, 255, 95, 105, 110, 115, 116, 97, 255, 110, 255, 99, 101, 115, 0, 0, 0, 0, 251, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 7, version: 117, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1036, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1037, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1038, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1148, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1037, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1148] [region_id=1035]
[2019/05/01 12:37:35.050 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 206], lock_version: 408089907674218510, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 206], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:37:35.113 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 206], lock_version: 408089907674218510, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 206], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:37:35.133 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 203], lock_version: 408089907674218506, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 203], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:37:35.259 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 203], lock_version: 408089907726647300, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 203], lock_ttl: 3081, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:37:35.322 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 1147, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=12] [term=6] [peer_id=1147] [region_id=317]
[2019/05/01 12:37:35.322 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 6, version: 20, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=1147] [region_id=317]
[2019/05/01 12:37:35.322 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 317, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 114, 128, 0, 0, 0, 0, 255, 1, 212, 195, 0, 0, 0, 0, 0, 250], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 114, 128, 0, 0, 0, 0, 255, 1, 212, 197, 0, 0, 0, 0, 0, 250], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 20, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 318, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 319, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 320, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1147, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1147, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1147] [region_id=317]
[2019/05/01 12:37:35.372 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 319, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=13] [term=6] [peer_id=1147] [region_id=317]
[2019/05/01 12:37:35.372 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 7, version: 20, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=1147] [region_id=317]
[2019/05/01 12:37:35.372 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 317, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 114, 128, 0, 0, 0, 0, 255, 1, 212, 195, 0, 0, 0, 0, 0, 250], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 114, 128, 0, 0, 0, 0, 255, 1, 212, 197, 0, 0, 0, 0, 0, 250], region_epoch: Some(RegionEpoch { conf_ver: 7, version: 20, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 318, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 319, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 320, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1147, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 319, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1147] [region_id=317]
[2019/05/01 12:37:35.430 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddLearnerNode, peer: Some(Peer { id: 1152, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=11] [term=7] [peer_id=662] [region_id=425]
[2019/05/01 12:37:35.430 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 8, version: 47, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddLearner] [peer_id=662] [region_id=425]
[2019/05/01 12:37:35.430 -07:00] [INFO] [apply.rs:1476] ["add learner successfully"] [region="Region { id: 425, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 99, 111, 109, 112, 255, 108, 101, 116, 105, 255, 111, 110, 95, 255, 116, 121, 112, 101, 0, 254, 0, 0, 253], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 99, 111, 110, 99, 255, 117, 114, 114, 101, 255, 110, 116, 95, 255, 105, 110, 115, 101, 114, 255, 116, 0, 255, 0, 0, 0, 0, 0, 0, 248, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 8, version: 47, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 427, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 428, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 662, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1152, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=662] [region_id=425]
[2019/05/01 12:37:35.613 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 205], lock_version: 408089907805290503, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 205], lock_ttl: 3051, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:37:35.711 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 203], lock_version: 408089907844612108, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 206], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:37:35.810 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 205], lock_version: 408089907870826501, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 208], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:37:35.887 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 207], lock_version: 408089907910148103, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 207], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:37:36.426 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 209], lock_version: 408089908054327302, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 211], lock_ttl: 3003, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:37:36.993 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 210], lock_version: 408089908146077704, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 210], lock_ttl: 3003, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:37:37.091 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 210], lock_version: 408089908146077704, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 210], lock_ttl: 3003, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:37:37.500 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 214], lock_version: 408089908290256909, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 214], lock_ttl: 3002, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:37:37.795 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 213], lock_version: 408089908395114504, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 213], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:37:37.821 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 214], lock_version: 408089908395114501, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 214], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:37:37.891 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 215], lock_version: 408089908421328904, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 215], lock_ttl: 3062, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:37:38.235 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 214], lock_version: 408089908460650504, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 218], lock_ttl: 3003, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:37:38.815 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=1153] [region_id=1031]
[2019/05/01 12:37:38.815 -07:00] [INFO] [unknown:719] ["[region 1031] 1153 became follower at term 0"]
[2019/05/01 12:37:38.815 -07:00] [INFO] [unknown:295] ["[region 1031] 1153 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:37:38.815 -07:00] [INFO] [unknown:719] ["[region 1031] 1153 became follower at term 1"]
[2019/05/01 12:37:38.815 -07:00] [INFO] [unknown:920] ["[region 1031] 1153 [term: 1] received a MsgHeartbeat message with higher term from 1054 [term: 7]"]
[2019/05/01 12:37:38.815 -07:00] [INFO] [unknown:719] ["[region 1031] 1153 became follower at term 7"]
[2019/05/01 12:37:39.930 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 1152, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=12] [term=7] [peer_id=662] [region_id=425]
[2019/05/01 12:37:39.930 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 9, version: 47, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=662] [region_id=425]
[2019/05/01 12:37:39.930 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=1194] [region_id=249]
[2019/05/01 12:37:39.930 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 425, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 99, 111, 109, 112, 255, 108, 101, 116, 105, 255, 111, 110, 95, 255, 116, 121, 112, 101, 0, 254, 0, 0, 253], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 99, 111, 110, 99, 255, 117, 114, 114, 101, 255, 110, 116, 95, 255, 105, 110, 115, 101, 114, 255, 116, 0, 255, 0, 0, 0, 0, 0, 0, 248, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 47, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 427, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 428, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 662, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1152, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1152, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=662] [region_id=425]
[2019/05/01 12:37:39.930 -07:00] [INFO] [unknown:719] ["[region 249] 1194 became follower at term 0"]
[2019/05/01 12:37:39.930 -07:00] [INFO] [unknown:295] ["[region 249] 1194 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:37:39.930 -07:00] [INFO] [unknown:719] ["[region 249] 1194 became follower at term 1"]
[2019/05/01 12:37:39.930 -07:00] [INFO] [unknown:920] ["[region 249] 1194 [term: 1] received a MsgHeartbeat message with higher term from 487 [term: 8]"]
[2019/05/01 12:37:39.930 -07:00] [INFO] [unknown:719] ["[region 249] 1194 became follower at term 8"]
[2019/05/01 12:37:40.024 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 428, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=13] [term=7] [peer_id=662] [region_id=425]
[2019/05/01 12:37:40.024 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 10, version: 47, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=662] [region_id=425]
[2019/05/01 12:37:40.024 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 425, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 99, 111, 109, 112, 255, 108, 101, 116, 105, 255, 111, 110, 95, 255, 116, 121, 112, 101, 0, 254, 0, 0, 253], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 99, 111, 110, 99, 255, 117, 114, 114, 101, 255, 110, 116, 95, 255, 105, 110, 115, 101, 114, 255, 116, 0, 255, 0, 0, 0, 0, 0, 0, 248, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 10, version: 47, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 427, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 428, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 662, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1152, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 428, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=662] [region_id=425]
[2019/05/01 12:37:40.179 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=1195] [region_id=472]
[2019/05/01 12:37:40.179 -07:00] [INFO] [unknown:719] ["[region 472] 1195 became follower at term 0"]
[2019/05/01 12:37:40.179 -07:00] [INFO] [unknown:295] ["[region 472] 1195 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:37:40.179 -07:00] [INFO] [unknown:719] ["[region 472] 1195 became follower at term 1"]
[2019/05/01 12:37:40.179 -07:00] [INFO] [unknown:920] ["[region 472] 1195 [term: 1] received a MsgHeartbeat message with higher term from 473 [term: 6]"]
[2019/05/01 12:37:40.179 -07:00] [INFO] [unknown:719] ["[region 472] 1195 became follower at term 6"]
[2019/05/01 12:37:40.298 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 218], lock_version: 408089909037367298, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 221], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:37:40.819 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_1031_7_11_(default|lock|write).sst] [snap_key=1031_7_11]
[2019/05/01 12:37:40.833 -07:00] [INFO] [unknown:1792] ["[region 1031] 1153 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 11, term: 7]"]
[2019/05/01 12:37:40.833 -07:00] [INFO] [unknown:1816] ["[region 1031] 1153 restored progress of 1032 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:37:40.833 -07:00] [INFO] [unknown:1816] ["[region 1031] 1153 restored progress of 1034 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:37:40.833 -07:00] [INFO] [unknown:1816] ["[region 1031] 1153 restored progress of 1054 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:37:40.833 -07:00] [INFO] [unknown:1816] ["[region 1031] 1153 restored progress of 1153 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:37:40.833 -07:00] [INFO] [unknown:474] ["[region 1031] 1153 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 11, term: 7]"]
[2019/05/01 12:37:40.833 -07:00] [INFO] [unknown:1736] ["[region 1031] 1153 [commit: 11] restored snapshot [index: 11, term: 7]"]
[2019/05/01 12:37:40.833 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=1153] [region_id=1031]
[2019/05/01 12:37:40.833 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 11, truncated_state: Some(RaftTruncatedState { index: 11, term: 7, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 1031, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 98, 255, 117, 102, 102, 255, 101, 114, 95, 112, 111, 255, 111, 108, 255, 95, 100, 117, 109, 112, 95, 255, 112, 255, 99, 116, 0, 0, 0, 0, 0, 250, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 98, 255, 117, 102, 102, 255, 101, 114, 95, 112, 111, 255, 111, 108, 255, 95, 102, 105, 108, 101, 110, 255, 97, 255, 109, 101, 0, 0, 0, 0, 0, 250, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 117, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1032, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1034, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1054, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1153, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1153] [region_id=1031]
[2019/05/01 12:37:40.856 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 1031, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 98, 255, 117, 102, 102, 255, 101, 114, 95, 112, 111, 255, 111, 108, 255, 95, 100, 117, 109, 112, 95, 255, 112, 255, 99, 116, 0, 0, 0, 0, 0, 250, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 98, 255, 117, 102, 102, 255, 101, 114, 95, 112, 111, 255, 111, 108, 255, 95, 102, 105, 108, 101, 110, 255, 97, 255, 109, 101, 0, 0, 0, 0, 0, 250, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 117, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1032, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1034, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1054, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1153, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1153] [region_id=1031]
[2019/05/01 12:37:40.856 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 1031] 1153"]
[2019/05/01 12:37:40.856 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=1031]
[2019/05/01 12:37:40.900 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=43.827981ms] [region_id=1031]
[2019/05/01 12:37:40.961 -07:00] [INFO] [unknown:1625] ["[region 64] 66 [term 7] received MsgTimeoutNow from 157 and starts an election to get leadership."]
[2019/05/01 12:37:40.961 -07:00] [INFO] [unknown:739] ["[region 64] 66 became candidate at term 8"]
[2019/05/01 12:37:40.961 -07:00] [INFO] [unknown:854] ["[region 64] 66 received MsgRequestVoteResponse from 66 at term 8"]
[2019/05/01 12:37:40.961 -07:00] [INFO] [unknown:828] ["[region 64] 66 [logterm: 7, index: 18] sent MsgRequestVote request to 157 at term 8"]
[2019/05/01 12:37:40.961 -07:00] [INFO] [unknown:828] ["[region 64] 66 [logterm: 7, index: 18] sent MsgRequestVote request to 65 at term 8"]
[2019/05/01 12:37:41.009 -07:00] [INFO] [unknown:1625] ["[region 1087] 1102 [term 6] received MsgTimeoutNow from 1090 and starts an election to get leadership."]
[2019/05/01 12:37:41.014 -07:00] [INFO] [unknown:739] ["[region 1087] 1102 became candidate at term 7"]
[2019/05/01 12:37:41.014 -07:00] [INFO] [unknown:854] ["[region 1087] 1102 received MsgRequestVoteResponse from 1102 at term 7"]
[2019/05/01 12:37:41.014 -07:00] [INFO] [unknown:828] ["[region 1087] 1102 [logterm: 6, index: 9] sent MsgRequestVote request to 1090 at term 7"]
[2019/05/01 12:37:41.014 -07:00] [INFO] [unknown:828] ["[region 1087] 1102 [logterm: 6, index: 9] sent MsgRequestVote request to 1089 at term 7"]
[2019/05/01 12:37:41.059 -07:00] [INFO] [unknown:854] ["[region 64] 66 received MsgRequestVoteResponse from 65 at term 8"]
[2019/05/01 12:37:41.059 -07:00] [INFO] [unknown:1550] ["[region 64] 66 [quorum:2] has received 2 MsgRequestVoteResponse votes and 0 vote rejections"]
[2019/05/01 12:37:41.059 -07:00] [INFO] [unknown:789] ["[region 64] 66 became leader at term 8"]
[2019/05/01 12:37:41.076 -07:00] [INFO] [unknown:854] ["[region 1087] 1102 received MsgRequestVoteResponse from 1089 at term 7"]
[2019/05/01 12:37:41.076 -07:00] [INFO] [unknown:1550] ["[region 1087] 1102 [quorum:2] has received 2 MsgRequestVoteResponse votes and 0 vote rejections"]
[2019/05/01 12:37:41.076 -07:00] [INFO] [unknown:789] ["[region 1087] 1102 became leader at term 7"]
[2019/05/01 12:37:41.192 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 220], lock_version: 408089909207760902, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 223], lock_ttl: 3101, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:37:41.701 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 224], lock_version: 408089909391261704, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 226], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:37:41.782 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 224], lock_version: 408089909391261704, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 226], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:37:41.876 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 1153, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=12] [term=7] [peer_id=1153] [region_id=1031]
[2019/05/01 12:37:41.876 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 9, version: 117, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=1153] [region_id=1031]
[2019/05/01 12:37:41.876 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 1031, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 98, 255, 117, 102, 102, 255, 101, 114, 95, 112, 111, 255, 111, 108, 255, 95, 100, 117, 109, 112, 95, 255, 112, 255, 99, 116, 0, 0, 0, 0, 0, 250, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 98, 255, 117, 102, 102, 255, 101, 114, 95, 112, 111, 255, 111, 108, 255, 95, 102, 105, 108, 101, 110, 255, 97, 255, 109, 101, 0, 0, 0, 0, 0, 250, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 117, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1032, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1034, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1054, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1153, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1153, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1153] [region_id=1031]
[2019/05/01 12:37:41.965 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 1034, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=13] [term=7] [peer_id=1153] [region_id=1031]
[2019/05/01 12:37:41.965 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 10, version: 117, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=1153] [region_id=1031]
[2019/05/01 12:37:41.965 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 1031, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 98, 255, 117, 102, 102, 255, 101, 114, 95, 112, 111, 255, 111, 108, 255, 95, 100, 117, 109, 112, 95, 255, 112, 255, 99, 116, 0, 0, 0, 0, 0, 250, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 98, 255, 117, 102, 102, 255, 101, 114, 95, 112, 111, 255, 111, 108, 255, 95, 102, 105, 108, 101, 110, 255, 97, 255, 109, 101, 0, 0, 0, 0, 0, 250, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 10, version: 117, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1032, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1034, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1054, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1153, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1034, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1153] [region_id=1031]
[2019/05/01 12:37:41.995 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_249_8_12_(default|lock|write).sst] [snap_key=249_8_12]
[2019/05/01 12:37:42.030 -07:00] [INFO] [unknown:1792] ["[region 249] 1194 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 12, term: 8]"]
[2019/05/01 12:37:42.030 -07:00] [INFO] [unknown:1816] ["[region 249] 1194 restored progress of 251 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:37:42.030 -07:00] [INFO] [unknown:1816] ["[region 249] 1194 restored progress of 252 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:37:42.030 -07:00] [INFO] [unknown:1816] ["[region 249] 1194 restored progress of 487 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:37:42.030 -07:00] [INFO] [unknown:1816] ["[region 249] 1194 restored progress of 1194 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:37:42.030 -07:00] [INFO] [unknown:474] ["[region 249] 1194 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 12, term: 8]"]
[2019/05/01 12:37:42.030 -07:00] [INFO] [unknown:1736] ["[region 249] 1194 [commit: 12] restored snapshot [index: 12, term: 8]"]
[2019/05/01 12:37:42.030 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=1194] [region_id=249]
[2019/05/01 12:37:42.030 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 12, truncated_state: Some(RaftTruncatedState { index: 12, term: 8, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 249, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 95, 111, 255, 114, 100, 101, 255, 114, 95, 99, 111, 109, 255, 109, 105, 255, 116, 115, 0, 0, 0, 0, 251, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 95, 114, 255, 111, 119, 95, 255, 105, 109, 97, 103, 101, 255, 0, 0, 255, 0, 0, 0, 0, 0, 0, 247, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 27, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 251, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 252, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 487, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1194, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1194] [region_id=249]
[2019/05/01 12:37:42.071 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 249] 1194"]
[2019/05/01 12:37:42.071 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 249, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 95, 111, 255, 114, 100, 101, 255, 114, 95, 99, 111, 109, 255, 109, 105, 255, 116, 115, 0, 0, 0, 0, 251, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 95, 114, 255, 111, 119, 95, 255, 105, 109, 97, 103, 101, 255, 0, 0, 255, 0, 0, 0, 0, 0, 0, 247, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 27, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 251, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 252, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 487, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1194, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1194] [region_id=249]
[2019/05/01 12:37:42.071 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=249]
[2019/05/01 12:37:42.116 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=43.990896ms] [region_id=249]
[2019/05/01 12:37:42.148 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=1197] [region_id=409]
[2019/05/01 12:37:42.148 -07:00] [INFO] [unknown:719] ["[region 409] 1197 became follower at term 0"]
[2019/05/01 12:37:42.148 -07:00] [INFO] [unknown:295] ["[region 409] 1197 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:37:42.148 -07:00] [INFO] [unknown:719] ["[region 409] 1197 became follower at term 1"]
[2019/05/01 12:37:42.148 -07:00] [INFO] [unknown:920] ["[region 409] 1197 [term: 1] received a MsgHeartbeat message with higher term from 900 [term: 7]"]
[2019/05/01 12:37:42.148 -07:00] [INFO] [unknown:719] ["[region 409] 1197 became follower at term 7"]
[2019/05/01 12:37:42.183 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_472_6_7_(default|lock|write).sst] [snap_key=472_6_7]
[2019/05/01 12:37:42.204 -07:00] [INFO] [unknown:1792] ["[region 472] 1195 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 7, term: 6]"]
[2019/05/01 12:37:42.215 -07:00] [INFO] [unknown:1816] ["[region 472] 1195 restored progress of 473 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:37:42.215 -07:00] [INFO] [unknown:1816] ["[region 472] 1195 restored progress of 474 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:37:42.215 -07:00] [INFO] [unknown:1816] ["[region 472] 1195 restored progress of 475 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:37:42.215 -07:00] [INFO] [unknown:1816] ["[region 472] 1195 restored progress of 1195 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:37:42.215 -07:00] [INFO] [unknown:474] ["[region 472] 1195 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 7, term: 6]"]
[2019/05/01 12:37:42.215 -07:00] [INFO] [unknown:1736] ["[region 472] 1195 [commit: 7] restored snapshot [index: 7, term: 6]"]
[2019/05/01 12:37:42.215 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=1195] [region_id=472]
[2019/05/01 12:37:42.215 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 7, truncated_state: Some(RaftTruncatedState { index: 7, term: 6, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 472, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 100, 101, 102, 97, 255, 117, 108, 116, 95, 255, 116, 109, 112, 255, 95, 115, 116, 111, 114, 255, 97, 103, 255, 101, 95, 101, 110, 103, 105, 255, 110, 255, 101, 0, 0, 0, 0, 0, 0, 249, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 100, 101, 102, 97, 255, 117, 108, 116, 95, 255, 119, 101, 101, 255, 107, 95, 102, 111, 114, 255, 109, 97, 255, 116, 0, 0, 0, 0, 0, 250, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 57, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 473, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 474, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 475, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1195, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1195] [region_id=472]
[2019/05/01 12:37:42.252 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 472] 1195"]
[2019/05/01 12:37:42.252 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 472, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 100, 101, 102, 97, 255, 117, 108, 116, 95, 255, 116, 109, 112, 255, 95, 115, 116, 111, 114, 255, 97, 103, 255, 101, 95, 101, 110, 103, 105, 255, 110, 255, 101, 0, 0, 0, 0, 0, 0, 249, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 100, 101, 102, 97, 255, 117, 108, 116, 95, 255, 119, 101, 101, 255, 107, 95, 102, 111, 114, 255, 109, 97, 255, 116, 0, 0, 0, 0, 0, 250, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 57, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 473, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 474, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 475, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1195, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1195] [region_id=472]
[2019/05/01 12:37:42.252 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=472]
[2019/05/01 12:37:42.297 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=44.997383ms] [region_id=472]
[2019/05/01 12:37:42.300 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 222], lock_version: 408089909548548105, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 222], lock_ttl: 3082, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:37:42.950 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 227], lock_version: 408089909745156102, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 227], lock_ttl: 3002, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:37:42.977 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 1194, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=13] [term=8] [peer_id=1194] [region_id=249]
[2019/05/01 12:37:42.977 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 9, version: 27, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=1194] [region_id=249]
[2019/05/01 12:37:42.977 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 249, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 95, 111, 255, 114, 100, 101, 255, 114, 95, 99, 111, 109, 255, 109, 105, 255, 116, 115, 0, 0, 0, 0, 251, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 95, 114, 255, 111, 119, 95, 255, 105, 109, 97, 103, 101, 255, 0, 0, 255, 0, 0, 0, 0, 0, 0, 247, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 27, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 251, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 252, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 487, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1194, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1194, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1194] [region_id=249]
[2019/05/01 12:37:43.043 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 252, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=14] [term=8] [peer_id=1194] [region_id=249]
[2019/05/01 12:37:43.043 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 10, version: 27, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=1194] [region_id=249]
[2019/05/01 12:37:43.043 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 249, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 95, 111, 255, 114, 100, 101, 255, 114, 95, 99, 111, 109, 255, 109, 105, 255, 116, 115, 0, 0, 0, 0, 251, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 95, 114, 255, 111, 119, 95, 255, 105, 109, 97, 103, 101, 255, 0, 0, 255, 0, 0, 0, 0, 0, 0, 247, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 10, version: 27, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 251, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 252, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 487, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1194, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 252, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1194] [region_id=249]
[2019/05/01 12:37:43.146 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 227], lock_version: 408089909771370510, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 227], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:37:43.233 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 1195, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=8] [term=6] [peer_id=1195] [region_id=472]
[2019/05/01 12:37:43.233 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 6, version: 57, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=1195] [region_id=472]
[2019/05/01 12:37:43.233 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 472, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 100, 101, 102, 97, 255, 117, 108, 116, 95, 255, 116, 109, 112, 255, 95, 115, 116, 111, 114, 255, 97, 103, 255, 101, 95, 101, 110, 103, 105, 255, 110, 255, 101, 0, 0, 0, 0, 0, 0, 249, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 100, 101, 102, 97, 255, 117, 108, 116, 95, 255, 119, 101, 101, 255, 107, 95, 102, 111, 114, 255, 109, 97, 255, 116, 0, 0, 0, 0, 0, 250, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 57, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 473, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 474, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 475, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1195, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1195, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1195] [region_id=472]
[2019/05/01 12:37:43.286 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 475, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=9] [term=6] [peer_id=1195] [region_id=472]
[2019/05/01 12:37:43.286 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 7, version: 57, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=1195] [region_id=472]
[2019/05/01 12:37:43.286 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 472, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 100, 101, 102, 97, 255, 117, 108, 116, 95, 255, 116, 109, 112, 255, 95, 115, 116, 111, 114, 255, 97, 103, 255, 101, 95, 101, 110, 103, 105, 255, 110, 255, 101, 0, 0, 0, 0, 0, 0, 249, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 100, 101, 102, 97, 255, 117, 108, 116, 95, 255, 119, 101, 101, 255, 107, 95, 102, 111, 114, 255, 109, 97, 255, 116, 0, 0, 0, 0, 0, 250, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 7, version: 57, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 473, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 474, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 475, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1195, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 475, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1195] [region_id=472]
[2019/05/01 12:37:43.444 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 230], lock_version: 408089909876228100, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 230], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:37:43.464 -07:00] [INFO] [keys.rs:155] ["approximate keys over threshold, need to do split check"] [threshold=5] [keys=10] [region_id=64]
[2019/05/01 12:37:43.464 -07:00] [INFO] [peer.rs:294] ["on split"] [split_keys="3 keys range from \"mBootstr\\377a\\377pKey\\000\\000\\377\\000\\000\\373\\000\\000\\000\\000\\000\\377\\000\\000s\\000\\000\\000\\000\\000\\372\\372V,k\\256?\\377\\374\" to \"mBootstr\\377a\\377pKey\\000\\000\\377\\000\\000\\373\\000\\000\\000\\000\\000\\377\\000\\000s\\000\\000\\000\\000\\000\\372\\372V,k\\323\\277\\377\\366\""] [peer_id=66] [region_id=64]
[2019/05/01 12:37:43.465 -07:00] [INFO] [pd.rs:285] ["try to batch split region"] [region="Region { id: 64, start_key: [109, 66, 111, 111, 116, 115, 116, 114, 255, 97, 255, 112, 75, 101, 121, 0, 0, 255, 0, 0, 251, 0, 0, 0, 0, 0, 255, 0, 0, 115, 0, 0, 0, 0, 0, 250], end_key: [109, 68, 66, 58, 49, 0, 0, 0, 255, 0, 251, 0, 0, 0, 0, 0, 0, 255, 0, 104, 84, 97, 98, 108, 101, 58, 255, 49, 48, 255, 53, 0, 0, 0, 0, 255, 0, 0, 0, 248, 0, 0, 0, 0, 251], region_epoch: Some(RegionEpoch { conf_ver: 5, version: 5, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 65, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 66, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 157, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [new_region_ids="[SplitID { new_region_id: 1200, new_peer_ids: [1201, 1202, 1203], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, SplitID { new_region_id: 1204, new_peer_ids: [1205, 1206, 1207], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, SplitID { new_region_id: 1208, new_peer_ids: [1209, 1210, 1211], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }]"] [region_id=64]
[2019/05/01 12:37:43.465 -07:00] [WARN] [split_observer.rs:98] ["invalid key, skip"] [err="\"key \\\"mBootstr\\\\377a\\\\377pKey\\\\000\\\\000\\\\377\\\\000\\\\000\\\\373\\\\000\\\\000\\\\000\\\\000\\\\000\\\\377\\\\000\\\\000s\\\\000\\\\000\\\\000\\\\000\\\\000\\\\372\\\" should be in (\\\"mBootstr\\\\377a\\\\377pKey\\\\000\\\\000\\\\377\\\\000\\\\000\\\\373\\\\000\\\\000\\\\000\\\\000\\\\000\\\\377\\\\000\\\\000s\\\\000\\\\000\\\\000\\\\000\\\\000\\\\372\\\", \\\"mDB:1\\\\000\\\\000\\\\000\\\\377\\\\000\\\\373\\\\000\\\\000\\\\000\\\\000\\\\000\\\\000\\\\377\\\\000hTable:\\\\37710\\\\3775\\\\000\\\\000\\\\000\\\\000\\\\377\\\\000\\\\000\\\\000\\\\370\\\\000\\\\000\\\\000\\\\000\\\\373\\\")\""] [index=0] [region_id=64]
[2019/05/01 12:37:43.465 -07:00] [WARN] [split_observer.rs:98] ["invalid key, skip"] [err="\"key \\\"mBootstr\\\\377a\\\\377pKey\\\\000\\\\000\\\\377\\\\000\\\\000\\\\373\\\\000\\\\000\\\\000\\\\000\\\\000\\\\377\\\\000\\\\000s\\\\000\\\\000\\\\000\\\\000\\\\000\\\\372\\\" should be in (\\\"mBootstr\\\\377a\\\\377pKey\\\\000\\\\000\\\\377\\\\000\\\\000\\\\373\\\\000\\\\000\\\\000\\\\000\\\\000\\\\377\\\\000\\\\000s\\\\000\\\\000\\\\000\\\\000\\\\000\\\\372\\\", \\\"mDB:1\\\\000\\\\000\\\\000\\\\377\\\\000\\\\373\\\\000\\\\000\\\\000\\\\000\\\\000\\\\000\\\\377\\\\000hTable:\\\\37710\\\\3775\\\\000\\\\000\\\\000\\\\000\\\\377\\\\000\\\\000\\\\000\\\\370\\\\000\\\\000\\\\000\\\\000\\\\373\\\")\""] [index=1] [region_id=64]
[2019/05/01 12:37:43.465 -07:00] [WARN] [split_observer.rs:98] ["invalid key, skip"] [err="\"key \\\"mBootstr\\\\377a\\\\377pKey\\\\000\\\\000\\\\377\\\\000\\\\000\\\\373\\\\000\\\\000\\\\000\\\\000\\\\000\\\\377\\\\000\\\\000s\\\\000\\\\000\\\\000\\\\000\\\\000\\\\372\\\" should be in (\\\"mBootstr\\\\377a\\\\377pKey\\\\000\\\\000\\\\377\\\\000\\\\000\\\\373\\\\000\\\\000\\\\000\\\\000\\\\000\\\\377\\\\000\\\\000s\\\\000\\\\000\\\\000\\\\000\\\\000\\\\372\\\", \\\"mDB:1\\\\000\\\\000\\\\000\\\\377\\\\000\\\\373\\\\000\\\\000\\\\000\\\\000\\\\000\\\\000\\\\377\\\\000hTable:\\\\37710\\\\3775\\\\000\\\\000\\\\000\\\\000\\\\377\\\\000\\\\000\\\\000\\\\370\\\\000\\\\000\\\\000\\\\000\\\\373\\\")\""] [index=2] [region_id=64]
[2019/05/01 12:37:43.465 -07:00] [ERROR] [split_observer.rs:161] ["failed to handle split req"] [err="\"no valid key found for split.\""] [region_id=64]
[2019/05/01 12:37:43.465 -07:00] [WARN] [peer.rs:1846] ["skip proposal"] [err="Coprocessor(Other(StringError(\"[src/raftstore/coprocessor/split_observer.rs:166]: no valid key found for split.\")))"] [peer_id=66] [region_id=64]
[2019/05/01 12:37:43.469 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 229], lock_version: 408089909889335303, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 229], lock_ttl: 3002, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:37:43.563 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 230], lock_version: 408089909902442514, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 231], lock_ttl: 3002, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:37:43.569 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 230], lock_version: 408089909902442514, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 231], lock_ttl: 3002, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:37:43.628 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 230], lock_version: 408089909902442514, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 230], lock_ttl: 3002, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:37:43.636 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 230], lock_version: 408089909902442514, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 231], lock_ttl: 3002, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:37:43.654 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 230], lock_version: 408089909902442514, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 231], lock_ttl: 3002, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:37:43.669 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 225], lock_version: 408089909941764098, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 228], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:37:43.791 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 229], lock_version: 408089909981085698, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 229], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:37:43.816 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 230], lock_version: 408089909981085706, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 230], lock_ttl: 3002, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:37:44.104 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 230], lock_version: 408089910046621698, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 232], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:37:44.152 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_409_7_11_(default|lock|write).sst] [snap_key=409_7_11]
[2019/05/01 12:37:44.159 -07:00] [INFO] [unknown:1792] ["[region 409] 1197 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 11, term: 7]"]
[2019/05/01 12:37:44.159 -07:00] [INFO] [unknown:1816] ["[region 409] 1197 restored progress of 410 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:37:44.159 -07:00] [INFO] [unknown:1816] ["[region 409] 1197 restored progress of 411 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:37:44.159 -07:00] [INFO] [unknown:1816] ["[region 409] 1197 restored progress of 900 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:37:44.159 -07:00] [INFO] [unknown:1816] ["[region 409] 1197 restored progress of 1197 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:37:44.159 -07:00] [INFO] [unknown:474] ["[region 409] 1197 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 11, term: 7]"]
[2019/05/01 12:37:44.159 -07:00] [INFO] [unknown:1736] ["[region 409] 1197 [commit: 11] restored snapshot [index: 11, term: 7]"]
[2019/05/01 12:37:44.159 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=1197] [region_id=409]
[2019/05/01 12:37:44.159 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 11, truncated_state: Some(RaftTruncatedState { index: 11, term: 7, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 409, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 99, 104, 101, 99, 255, 107, 95, 112, 114, 255, 111, 120, 121, 255, 95, 117, 115, 101, 114, 255, 115, 0, 255, 0, 0, 0, 0, 0, 0, 248, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 99, 111, 108, 108, 255, 97, 116, 105, 111, 255, 110, 95, 99, 255, 111, 110, 110, 101, 99, 255, 116, 105, 255, 111, 110, 0, 0, 0, 0, 251, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 47, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 410, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 411, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 900, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1197, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1197] [region_id=409]
[2019/05/01 12:37:44.175 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 409, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 99, 104, 101, 99, 255, 107, 95, 112, 114, 255, 111, 120, 121, 255, 95, 117, 115, 101, 114, 255, 115, 0, 255, 0, 0, 0, 0, 0, 0, 248, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 99, 111, 108, 108, 255, 97, 116, 105, 111, 255, 110, 95, 99, 255, 111, 110, 110, 101, 99, 255, 116, 105, 255, 111, 110, 0, 0, 0, 0, 251, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 47, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 410, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 411, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 900, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1197, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1197] [region_id=409]
[2019/05/01 12:37:44.175 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 409] 1197"]
[2019/05/01 12:37:44.175 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=409]
[2019/05/01 12:37:44.192 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=16.444861ms] [region_id=409]
[2019/05/01 12:37:44.224 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=1199] [region_id=105]
[2019/05/01 12:37:44.224 -07:00] [INFO] [unknown:719] ["[region 105] 1199 became follower at term 0"]
[2019/05/01 12:37:44.224 -07:00] [INFO] [unknown:295] ["[region 105] 1199 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:37:44.224 -07:00] [INFO] [unknown:719] ["[region 105] 1199 became follower at term 1"]
[2019/05/01 12:37:44.224 -07:00] [INFO] [unknown:920] ["[region 105] 1199 [term: 1] received a MsgHeartbeat message with higher term from 107 [term: 8]"]
[2019/05/01 12:37:44.224 -07:00] [INFO] [unknown:719] ["[region 105] 1199 became follower at term 8"]
[2019/05/01 12:37:44.230 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 234], lock_version: 408089910099050511, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 234], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:37:44.400 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 236], lock_version: 408089910099050528, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 236], lock_ttl: 3082, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:37:44.491 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 236], lock_version: 408089910164586504, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 236], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:37:44.654 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 234], lock_version: 408089910203908113, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 234], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:37:44.712 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 234], lock_version: 408089910203908113, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 234], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:37:45.205 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 1197, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=12] [term=7] [peer_id=1197] [region_id=409]
[2019/05/01 12:37:45.205 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 9, version: 47, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=1197] [region_id=409]
[2019/05/01 12:37:45.205 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 409, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 99, 104, 101, 99, 255, 107, 95, 112, 114, 255, 111, 120, 121, 255, 95, 117, 115, 101, 114, 255, 115, 0, 255, 0, 0, 0, 0, 0, 0, 248, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 99, 111, 108, 108, 255, 97, 116, 105, 111, 255, 110, 95, 99, 255, 111, 110, 110, 101, 99, 255, 116, 105, 255, 111, 110, 0, 0, 0, 0, 251, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 47, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 410, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 411, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 900, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1197, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1197, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1197] [region_id=409]
[2019/05/01 12:37:45.290 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 410, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=13] [term=7] [peer_id=1197] [region_id=409]
[2019/05/01 12:37:45.290 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 10, version: 47, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=1197] [region_id=409]
[2019/05/01 12:37:45.290 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 409, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 99, 104, 101, 99, 255, 107, 95, 112, 114, 255, 111, 120, 121, 255, 95, 117, 115, 101, 114, 255, 115, 0, 255, 0, 0, 0, 0, 0, 0, 248, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 99, 111, 108, 108, 255, 97, 116, 105, 111, 255, 110, 95, 99, 255, 111, 110, 110, 101, 99, 255, 116, 105, 255, 111, 110, 0, 0, 0, 0, 251, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 10, version: 47, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 410, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 411, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 900, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1197, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 410, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1197] [region_id=409]
[2019/05/01 12:37:45.998 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=1213] [region_id=1178]
[2019/05/01 12:37:46.006 -07:00] [INFO] [unknown:719] ["[region 1178] 1213 became follower at term 0"]
[2019/05/01 12:37:46.006 -07:00] [INFO] [unknown:295] ["[region 1178] 1213 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:37:46.006 -07:00] [INFO] [unknown:719] ["[region 1178] 1213 became follower at term 1"]
[2019/05/01 12:37:46.006 -07:00] [INFO] [unknown:920] ["[region 1178] 1213 [term: 1] received a MsgHeartbeat message with higher term from 1181 [term: 6]"]
[2019/05/01 12:37:46.006 -07:00] [INFO] [unknown:719] ["[region 1178] 1213 became follower at term 6"]
[2019/05/01 12:37:46.228 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_105_8_15_(default|lock|write).sst] [snap_key=105_8_15]
[2019/05/01 12:37:46.251 -07:00] [INFO] [unknown:1792] ["[region 105] 1199 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 15, term: 8]"]
[2019/05/01 12:37:46.251 -07:00] [INFO] [unknown:1816] ["[region 105] 1199 restored progress of 106 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:37:46.251 -07:00] [INFO] [unknown:1816] ["[region 105] 1199 restored progress of 107 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:37:46.251 -07:00] [INFO] [unknown:1816] ["[region 105] 1199 restored progress of 1151 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:37:46.251 -07:00] [INFO] [unknown:1816] ["[region 105] 1199 restored progress of 1199 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:37:46.251 -07:00] [INFO] [unknown:474] ["[region 105] 1199 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 15, term: 8]"]
[2019/05/01 12:37:46.251 -07:00] [INFO] [unknown:1736] ["[region 105] 1199 [commit: 15] restored snapshot [index: 15, term: 8]"]
[2019/05/01 12:37:46.251 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=1199] [region_id=105]
[2019/05/01 12:37:46.251 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 15, truncated_state: Some(RaftTruncatedState { index: 15, term: 8, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 105, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 97, 117, 116, 111, 255, 109, 97, 116, 105, 255, 99, 95, 115, 255, 112, 95, 112, 114, 105, 255, 118, 105, 255, 108, 101, 103, 101, 115, 0, 254, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 97, 118, 111, 105, 255, 100, 95, 116, 101, 255, 109, 112, 111, 255, 114, 97, 108, 95, 117, 255, 112, 103, 255, 114, 97, 100, 101, 0, 0, 253, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 17, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 106, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 107, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1151, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1199, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1199] [region_id=105]
[2019/05/01 12:37:46.282 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 240], lock_version: 408089910570909702, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 240], lock_ttl: 3002, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:37:46.302 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 105] 1199"]
[2019/05/01 12:37:46.302 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=105]
[2019/05/01 12:37:46.302 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 105, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 97, 117, 116, 111, 255, 109, 97, 116, 105, 255, 99, 95, 115, 255, 112, 95, 112, 114, 105, 255, 118, 105, 255, 108, 101, 103, 101, 115, 0, 254, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 97, 118, 111, 105, 255, 100, 95, 116, 101, 255, 109, 112, 111, 255, 114, 97, 108, 95, 117, 255, 112, 103, 255, 114, 97, 100, 101, 0, 0, 253, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 17, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 106, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 107, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1151, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1199, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1199] [region_id=105]
[2019/05/01 12:37:46.347 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=45.106194ms] [region_id=105]
[2019/05/01 12:37:46.349 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 240], lock_version: 408089910570909702, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 240], lock_ttl: 3002, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:37:46.850 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 239], lock_version: 408089910754410504, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 239], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:37:46.944 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 239], lock_version: 408089910754410504, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 239], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:37:47.291 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 1199, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=16] [term=8] [peer_id=1199] [region_id=105]
[2019/05/01 12:37:47.291 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 9, version: 17, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=1199] [region_id=105]
[2019/05/01 12:37:47.291 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 105, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 97, 117, 116, 111, 255, 109, 97, 116, 105, 255, 99, 95, 115, 255, 112, 95, 112, 114, 105, 255, 118, 105, 255, 108, 101, 103, 101, 115, 0, 254, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 97, 118, 111, 105, 255, 100, 95, 116, 101, 255, 109, 112, 111, 255, 114, 97, 108, 95, 117, 255, 112, 103, 255, 114, 97, 100, 101, 0, 0, 253, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 17, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 106, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 107, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1151, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1199, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1199, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1199] [region_id=105]
[2019/05/01 12:37:47.393 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 106, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=17] [term=8] [peer_id=1199] [region_id=105]
[2019/05/01 12:37:47.393 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 10, version: 17, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=1199] [region_id=105]
[2019/05/01 12:37:47.393 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 105, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 97, 117, 116, 111, 255, 109, 97, 116, 105, 255, 99, 95, 115, 255, 112, 95, 112, 114, 105, 255, 118, 105, 255, 108, 101, 103, 101, 115, 0, 254, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 97, 118, 111, 105, 255, 100, 95, 116, 101, 255, 109, 112, 111, 255, 114, 97, 108, 95, 117, 255, 112, 103, 255, 114, 97, 100, 101, 0, 0, 253, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 10, version: 17, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 106, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 107, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1151, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1199, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 106, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1199] [region_id=105]
[2019/05/01 12:37:47.653 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 238], lock_version: 408089910846160906, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 238], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:37:47.742 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 238], lock_version: 408089910846160906, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 238], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:37:48.034 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_1178_6_7_(default|lock|write).sst] [snap_key=1178_6_7]
[2019/05/01 12:37:48.059 -07:00] [INFO] [unknown:1792] ["[region 1178] 1213 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 7, term: 6]"]
[2019/05/01 12:37:48.073 -07:00] [INFO] [unknown:1816] ["[region 1178] 1213 restored progress of 1179 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:37:48.073 -07:00] [INFO] [unknown:1816] ["[region 1178] 1213 restored progress of 1180 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:37:48.073 -07:00] [INFO] [unknown:1816] ["[region 1178] 1213 restored progress of 1181 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:37:48.073 -07:00] [INFO] [unknown:1816] ["[region 1178] 1213 restored progress of 1213 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:37:48.073 -07:00] [INFO] [unknown:474] ["[region 1178] 1213 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 7, term: 6]"]
[2019/05/01 12:37:48.073 -07:00] [INFO] [unknown:1736] ["[region 1178] 1213 [commit: 7] restored snapshot [index: 7, term: 6]"]
[2019/05/01 12:37:48.073 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=1213] [region_id=1178]
[2019/05/01 12:37:48.073 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 7, truncated_state: Some(RaftTruncatedState { index: 7, term: 6, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 1178, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 102, 255, 111, 114, 99, 255, 101, 95, 108, 111, 97, 255, 100, 95, 255, 99, 111, 114, 114, 117, 112, 255, 116, 255, 101, 100, 0, 0, 0, 0, 0, 250, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 102, 255, 111, 114, 99, 255, 101, 95, 114, 101, 99, 255, 111, 118, 255, 101, 114, 121, 0, 0, 0, 252, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 147, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1179, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1180, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1181, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1213, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1213] [region_id=1178]
[2019/05/01 12:37:48.132 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 1178] 1213"]
[2019/05/01 12:37:48.153 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 1178, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 102, 255, 111, 114, 99, 255, 101, 95, 108, 111, 97, 255, 100, 95, 255, 99, 111, 114, 114, 117, 112, 255, 116, 255, 101, 100, 0, 0, 0, 0, 0, 250, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 102, 255, 111, 114, 99, 255, 101, 95, 114, 101, 99, 255, 111, 118, 255, 101, 114, 121, 0, 0, 0, 252, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 147, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1179, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1180, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1181, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1213, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1213] [region_id=1178]
[2019/05/01 12:37:48.153 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=1178]
[2019/05/01 12:37:48.225 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=93.387206ms] [region_id=1178]
[2019/05/01 12:37:48.226 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=1215] [region_id=217]
[2019/05/01 12:37:48.226 -07:00] [INFO] [unknown:719] ["[region 217] 1215 became follower at term 0"]
[2019/05/01 12:37:48.226 -07:00] [INFO] [unknown:295] ["[region 217] 1215 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:37:48.226 -07:00] [INFO] [unknown:719] ["[region 217] 1215 became follower at term 1"]
[2019/05/01 12:37:48.226 -07:00] [INFO] [unknown:920] ["[region 217] 1215 [term: 1] received a MsgHeartbeat message with higher term from 218 [term: 6]"]
[2019/05/01 12:37:48.226 -07:00] [INFO] [unknown:719] ["[region 217] 1215 became follower at term 6"]
[2019/05/01 12:37:48.572 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 241], lock_version: 408089911200055310, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 241], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:37:48.779 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 243], lock_version: 408089911278698510, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 243], lock_ttl: 3002, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:37:48.920 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 244], lock_version: 408089911318020103, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 246], lock_ttl: 3002, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:37:49.018 -07:00] [INFO] [pd.rs:558] ["try to change peer"] [peer="Peer { id: 1256, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [change_type=AddLearnerNode] [region_id=684]
[2019/05/01 12:37:49.026 -07:00] [INFO] [peer.rs:1953] ["propose conf change peer"] [change_peer=1256] [change_type=AddLearnerNode] [peer_id=943] [region_id=684]
[2019/05/01 12:37:49.050 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 1213, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=8] [term=6] [peer_id=1213] [region_id=1178]
[2019/05/01 12:37:49.050 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 6, version: 147, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=1213] [region_id=1178]
[2019/05/01 12:37:49.050 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 1178, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 102, 255, 111, 114, 99, 255, 101, 95, 108, 111, 97, 255, 100, 95, 255, 99, 111, 114, 114, 117, 112, 255, 116, 255, 101, 100, 0, 0, 0, 0, 0, 250, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 102, 255, 111, 114, 99, 255, 101, 95, 114, 101, 99, 255, 111, 118, 255, 101, 114, 121, 0, 0, 0, 252, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 147, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1179, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1180, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1181, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1213, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1213, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1213] [region_id=1178]
[2019/05/01 12:37:49.088 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddLearnerNode, peer: Some(Peer { id: 1256, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=11] [term=7] [peer_id=943] [region_id=684]
[2019/05/01 12:37:49.088 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 8, version: 87, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddLearner] [peer_id=943] [region_id=684]
[2019/05/01 12:37:49.088 -07:00] [INFO] [apply.rs:1476] ["add learner successfully"] [region="Region { id: 684, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 103, 116, 105, 100, 255, 95, 101, 120, 101, 255, 99, 117, 116, 255, 101, 100, 95, 99, 111, 255, 109, 112, 255, 114, 101, 115, 115, 105, 111, 255, 110, 255, 95, 112, 101, 114, 105, 111, 100, 255, 255, 0, 0, 0, 0, 0, 0, 0, 0, 255, 247, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 103, 116, 105, 100, 255, 95, 109, 111, 100, 255, 101, 0, 0, 255, 0, 0, 0, 0, 0, 248, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 8, version: 87, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 685, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 686, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 943, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1256, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=943] [region_id=684]
[2019/05/01 12:37:49.104 -07:00] [INFO] [peer.rs:1318] ["notify pd with change peer region"] [region="Region { id: 684, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 103, 116, 105, 100, 255, 95, 101, 120, 101, 255, 99, 117, 116, 255, 101, 100, 95, 99, 111, 255, 109, 112, 255, 114, 101, 115, 115, 105, 111, 255, 110, 255, 95, 112, 101, 114, 105, 111, 100, 255, 255, 0, 0, 0, 0, 0, 0, 0, 0, 255, 247, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 103, 116, 105, 100, 255, 95, 109, 111, 100, 255, 101, 0, 0, 255, 0, 0, 0, 0, 0, 248, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 87, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 685, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 686, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 943, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1256, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=943] [region_id=684]
[2019/05/01 12:37:49.128 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 1179, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=9] [term=6] [peer_id=1213] [region_id=1178]
[2019/05/01 12:37:49.128 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 7, version: 147, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=1213] [region_id=1178]
[2019/05/01 12:37:49.128 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 1178, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 102, 255, 111, 114, 99, 255, 101, 95, 108, 111, 97, 255, 100, 95, 255, 99, 111, 114, 114, 117, 112, 255, 116, 255, 101, 100, 0, 0, 0, 0, 0, 250, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 102, 255, 111, 114, 99, 255, 101, 95, 114, 101, 99, 255, 111, 118, 255, 101, 114, 121, 0, 0, 0, 252, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 7, version: 147, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1179, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1180, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1181, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1213, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1179, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1213] [region_id=1178]
[2019/05/01 12:37:49.254 -07:00] [INFO] [unknown:920] ["[region 448] 1007 [term: 7] received a MsgRequestVote message with higher term from 778 [term: 8]"]
[2019/05/01 12:37:49.254 -07:00] [INFO] [unknown:719] ["[region 448] 1007 became follower at term 8"]
[2019/05/01 12:37:49.254 -07:00] [INFO] [unknown:1083] ["[region 448] 1007 [logterm: 7, index: 13, vote: 0] cast MsgRequestVote for 778 [logterm: 7, index: 13] at term 8"]
[2019/05/01 12:37:49.370 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 246], lock_version: 408089911435984897, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 246], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:37:49.429 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 247], lock_version: 408089911449092101, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 247], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:37:49.634 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 246], lock_version: 408089911488413698, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 247], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:37:49.644 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 246], lock_version: 408089911488413698, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 246], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:37:49.820 -07:00] [INFO] [peer_storage.rs:759] ["requesting snapshot"] [peer_id=943] [region_id=684]
[2019/05/01 12:37:49.821 -07:00] [INFO] [snap.rs:757] ["scan snapshot of one cf"] [size=0] [key_count=0] [cf=default] [snapshot=/opt/tidb/data/kv/snap/gen_684_7_11_(default|lock|write).sst] [region_id=684]
[2019/05/01 12:37:49.821 -07:00] [INFO] [snap.rs:757] ["scan snapshot of one cf"] [size=0] [key_count=0] [cf=lock] [snapshot=/opt/tidb/data/kv/snap/gen_684_7_11_(default|lock|write).sst] [region_id=684]
[2019/05/01 12:37:49.821 -07:00] [INFO] [snap.rs:757] ["scan snapshot of one cf"] [size=210] [key_count=2] [cf=write] [snapshot=/opt/tidb/data/kv/snap/gen_684_7_11_(default|lock|write).sst] [region_id=684]
[2019/05/01 12:37:49.825 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 245], lock_version: 408089911553949698, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 249], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:37:49.826 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=1257] [region_id=913]
[2019/05/01 12:37:49.826 -07:00] [INFO] [unknown:719] ["[region 913] 1257 became follower at term 0"]
[2019/05/01 12:37:49.826 -07:00] [INFO] [unknown:295] ["[region 913] 1257 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:37:49.826 -07:00] [INFO] [unknown:719] ["[region 913] 1257 became follower at term 1"]
[2019/05/01 12:37:49.827 -07:00] [INFO] [unknown:920] ["[region 913] 1257 [term: 1] received a MsgHeartbeat message with higher term from 914 [term: 6]"]
[2019/05/01 12:37:49.827 -07:00] [INFO] [unknown:719] ["[region 913] 1257 became follower at term 6"]
[2019/05/01 12:37:49.849 -07:00] [INFO] [snap.rs:875] ["scan snapshot"] [takes=28.269269ms] [size=1523] [key_count=2] [snapshot=/opt/tidb/data/kv/snap/gen_684_7_11_(default|lock|write).sst] [region_id=684]
[2019/05/01 12:37:50.185 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 248], lock_version: 408089911645700109, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 251], lock_ttl: 3003, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:37:50.229 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_217_6_7_(default|lock|write).sst] [snap_key=217_6_7]
[2019/05/01 12:37:50.237 -07:00] [INFO] [unknown:1792] ["[region 217] 1215 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 7, term: 6]"]
[2019/05/01 12:37:50.237 -07:00] [INFO] [unknown:1816] ["[region 217] 1215 restored progress of 218 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:37:50.237 -07:00] [INFO] [unknown:1816] ["[region 217] 1215 restored progress of 219 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:37:50.237 -07:00] [INFO] [unknown:1816] ["[region 217] 1215 restored progress of 220 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:37:50.237 -07:00] [INFO] [unknown:1816] ["[region 217] 1215 restored progress of 1215 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:37:50.237 -07:00] [INFO] [unknown:474] ["[region 217] 1215 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 7, term: 6]"]
[2019/05/01 12:37:50.237 -07:00] [INFO] [unknown:1736] ["[region 217] 1215 [commit: 7] restored snapshot [index: 7, term: 6]"]
[2019/05/01 12:37:50.237 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=1215] [region_id=217]
[2019/05/01 12:37:50.237 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 7, truncated_state: Some(RaftTruncatedState { index: 7, term: 6, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 217, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 95, 99, 255, 104, 101, 99, 255, 107, 115, 117, 109, 0, 254, 0, 0, 253], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 95, 100, 255, 105, 114, 101, 255, 99, 116, 95, 110, 111, 255, 110, 95, 255, 116, 114, 97, 110, 115, 97, 255, 99, 255, 116, 105, 111, 110, 97, 108, 95, 255, 255, 117, 112, 100, 97, 116, 101, 115, 0, 255, 254, 0, 0, 0, 0, 0, 0, 0, 248], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 27, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 218, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 219, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 220, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1215, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1215] [region_id=217]
[2019/05/01 12:37:50.253 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 217, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 95, 99, 255, 104, 101, 99, 255, 107, 115, 117, 109, 0, 254, 0, 0, 253], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 95, 100, 255, 105, 114, 101, 255, 99, 116, 95, 110, 111, 255, 110, 95, 255, 116, 114, 97, 110, 115, 97, 255, 99, 255, 116, 105, 111, 110, 97, 108, 95, 255, 255, 117, 112, 100, 97, 116, 101, 115, 0, 255, 254, 0, 0, 0, 0, 0, 0, 0, 248], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 27, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 218, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 219, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 220, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1215, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1215] [region_id=217]
[2019/05/01 12:37:50.254 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 217] 1215"]
[2019/05/01 12:37:50.254 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=217]
[2019/05/01 12:37:50.265 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 248], lock_version: 408089911671914512, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 250], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:37:50.270 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=16.000852ms] [region_id=217]
[2019/05/01 12:37:50.586 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 250], lock_version: 408089911750557712, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 253], lock_ttl: 3002, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:37:50.914 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 248], lock_version: 408089911829200903, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 250], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:37:50.959 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 252], lock_version: 408089911842308105, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 254], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:37:51.261 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 1215, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=8] [term=6] [peer_id=1215] [region_id=217]
[2019/05/01 12:37:51.261 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 6, version: 27, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=1215] [region_id=217]
[2019/05/01 12:37:51.261 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 217, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 95, 99, 255, 104, 101, 99, 255, 107, 115, 117, 109, 0, 254, 0, 0, 253], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 95, 100, 255, 105, 114, 101, 255, 99, 116, 95, 110, 111, 255, 110, 95, 255, 116, 114, 97, 110, 115, 97, 255, 99, 255, 116, 105, 111, 110, 97, 108, 95, 255, 255, 117, 112, 100, 97, 116, 101, 115, 0, 255, 254, 0, 0, 0, 0, 0, 0, 0, 248], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 27, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 218, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 219, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 220, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1215, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1215, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1215] [region_id=217]
[2019/05/01 12:37:51.323 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 219, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=9] [term=6] [peer_id=1215] [region_id=217]
[2019/05/01 12:37:51.323 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 7, version: 27, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=1215] [region_id=217]
[2019/05/01 12:37:51.323 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 217, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 95, 99, 255, 104, 101, 99, 255, 107, 115, 117, 109, 0, 254, 0, 0, 253], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 95, 100, 255, 105, 114, 101, 255, 99, 116, 95, 110, 111, 255, 110, 95, 255, 116, 114, 97, 110, 115, 97, 255, 99, 255, 116, 105, 111, 110, 97, 108, 95, 255, 255, 117, 112, 100, 97, 116, 101, 115, 0, 255, 254, 0, 0, 0, 0, 0, 0, 0, 248], region_epoch: Some(RegionEpoch { conf_ver: 7, version: 27, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 218, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 219, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 220, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1215, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 219, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1215] [region_id=217]
[2019/05/01 12:37:51.394 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 253], lock_version: 408089911868522508, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 253], lock_ttl: 3003, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:37:51.424 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddLearnerNode, peer: Some(Peer { id: 1259, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=10] [term=6] [peer_id=1195] [region_id=472]
[2019/05/01 12:37:51.424 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 8, version: 57, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddLearner] [peer_id=1195] [region_id=472]
[2019/05/01 12:37:51.424 -07:00] [INFO] [apply.rs:1476] ["add learner successfully"] [region="Region { id: 472, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 100, 101, 102, 97, 255, 117, 108, 116, 95, 255, 116, 109, 112, 255, 95, 115, 116, 111, 114, 255, 97, 103, 255, 101, 95, 101, 110, 103, 105, 255, 110, 255, 101, 0, 0, 0, 0, 0, 0, 249, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 100, 101, 102, 97, 255, 117, 108, 116, 95, 255, 119, 101, 101, 255, 107, 95, 102, 111, 114, 255, 109, 97, 255, 116, 0, 0, 0, 0, 0, 250, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 8, version: 57, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 473, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 474, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1195, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1259, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1195] [region_id=472]
[2019/05/01 12:37:51.570 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 0], lock_version: 408089912012701704, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 2], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:37:51.668 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 255], lock_version: 408089912038916098, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 0], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:37:51.724 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 1, 255], lock_version: 408089912038916098, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 0], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:37:51.773 -07:00] [INFO] [unknown:1625] ["[region 317] 1147 [term 6] received MsgTimeoutNow from 320 and starts an election to get leadership."]
[2019/05/01 12:37:51.773 -07:00] [INFO] [unknown:739] ["[region 317] 1147 became candidate at term 7"]
[2019/05/01 12:37:51.773 -07:00] [INFO] [unknown:854] ["[region 317] 1147 received MsgRequestVoteResponse from 1147 at term 7"]
[2019/05/01 12:37:51.773 -07:00] [INFO] [unknown:828] ["[region 317] 1147 [logterm: 6, index: 13] sent MsgRequestVote request to 320 at term 7"]
[2019/05/01 12:37:51.773 -07:00] [INFO] [unknown:828] ["[region 317] 1147 [logterm: 6, index: 13] sent MsgRequestVote request to 318 at term 7"]
[2019/05/01 12:37:51.822 -07:00] [INFO] [unknown:841] ["New connected subchannel at 0x7f8590802520 for subchannel 0x7f864047a800"]
[2019/05/01 12:37:51.839 -07:00] [INFO] [snap.rs:389] ["sent snapshot"] [duration=18.010474ms] [size=1523] [snap_key=684_7_11] [region_id=684]
[2019/05/01 12:37:51.840 -07:00] [INFO] [peer.rs:538] ["report snapshot status"] [status=Finish] [to="Peer { id: 1256, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=943] [region_id=684]
[2019/05/01 12:37:51.869 -07:00] [INFO] [unknown:854] ["[region 317] 1147 received MsgRequestVoteResponse from 318 at term 7"]
[2019/05/01 12:37:51.869 -07:00] [INFO] [unknown:1550] ["[region 317] 1147 [quorum:2] has received 2 MsgRequestVoteResponse votes and 0 vote rejections"]
[2019/05/01 12:37:51.869 -07:00] [INFO] [unknown:789] ["[region 317] 1147 became leader at term 7"]
[2019/05/01 12:37:51.889 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_913_6_7_(default|lock|write).sst] [snap_key=913_6_7]
[2019/05/01 12:37:51.909 -07:00] [INFO] [unknown:1792] ["[region 913] 1257 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 7, term: 6]"]
[2019/05/01 12:37:51.909 -07:00] [INFO] [unknown:1816] ["[region 913] 1257 restored progress of 914 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:37:51.909 -07:00] [INFO] [unknown:1816] ["[region 913] 1257 restored progress of 915 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:37:51.909 -07:00] [INFO] [unknown:1816] ["[region 913] 1257 restored progress of 916 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:37:51.909 -07:00] [INFO] [unknown:1816] ["[region 913] 1257 restored progress of 1257 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:37:51.909 -07:00] [INFO] [unknown:474] ["[region 913] 1257 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 7, term: 6]"]
[2019/05/01 12:37:51.909 -07:00] [INFO] [unknown:1736] ["[region 913] 1257 [commit: 7] restored snapshot [index: 7, term: 6]"]
[2019/05/01 12:37:51.909 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=1257] [region_id=913]
[2019/05/01 12:37:51.909 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 7, truncated_state: Some(RaftTruncatedState { index: 7, term: 6, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 913, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 97, 255, 100, 97, 112, 255, 116, 105, 118, 101, 95, 255, 104, 97, 255, 115, 104, 95, 105, 110, 100, 255, 101, 255, 120, 0, 0, 0, 0, 0, 0, 249, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 97, 255, 100, 97, 112, 255, 116, 105, 118, 101, 95, 255, 109, 97, 255, 120, 95, 115, 108, 101, 101, 255, 112, 255, 95, 100, 101, 108, 97, 121, 0, 254, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 107, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 914, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 915, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 916, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1257, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1257] [region_id=913]
[2019/05/01 12:37:51.950 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 913] 1257"]
[2019/05/01 12:37:51.950 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 913, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 97, 255, 100, 97, 112, 255, 116, 105, 118, 101, 95, 255, 104, 97, 255, 115, 104, 95, 105, 110, 100, 255, 101, 255, 120, 0, 0, 0, 0, 0, 0, 249, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 97, 255, 100, 97, 112, 255, 116, 105, 118, 101, 95, 255, 109, 97, 255, 120, 95, 115, 108, 101, 101, 255, 112, 255, 95, 100, 101, 108, 97, 121, 0, 254, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 107, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 914, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 915, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 916, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1257, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1257] [region_id=913]
[2019/05/01 12:37:51.950 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=913]
[2019/05/01 12:37:51.995 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=45.186771ms] [region_id=913]
[2019/05/01 12:37:52.167 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 2], lock_version: 408089912156880907, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 2], lock_ttl: 3002, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:37:52.168 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 2], lock_version: 408089912156880907, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 2], lock_ttl: 3002, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:37:52.336 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 3], lock_version: 408089912183095309, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 3], lock_ttl: 3061, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:37:52.823 -07:00] [INFO] [pd.rs:558] ["try to change peer"] [peer="Peer { id: 1256, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [change_type=AddNode] [region_id=684]
[2019/05/01 12:37:52.823 -07:00] [INFO] [peer.rs:1953] ["propose conf change peer"] [change_peer=1256] [change_type=AddNode] [peer_id=943] [region_id=684]
[2019/05/01 12:37:52.876 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 1256, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=12] [term=7] [peer_id=943] [region_id=684]
[2019/05/01 12:37:52.876 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 9, version: 87, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=943] [region_id=684]
[2019/05/01 12:37:52.876 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 684, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 103, 116, 105, 100, 255, 95, 101, 120, 101, 255, 99, 117, 116, 255, 101, 100, 95, 99, 111, 255, 109, 112, 255, 114, 101, 115, 115, 105, 111, 255, 110, 255, 95, 112, 101, 114, 105, 111, 100, 255, 255, 0, 0, 0, 0, 0, 0, 0, 0, 255, 247, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 103, 116, 105, 100, 255, 95, 109, 111, 100, 255, 101, 0, 0, 255, 0, 0, 0, 0, 0, 248, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 87, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 685, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 686, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 943, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1256, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1256, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=943] [region_id=684]
[2019/05/01 12:37:52.906 -07:00] [INFO] [peer.rs:1318] ["notify pd with change peer region"] [region="Region { id: 684, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 103, 116, 105, 100, 255, 95, 101, 120, 101, 255, 99, 117, 116, 255, 101, 100, 95, 99, 111, 255, 109, 112, 255, 114, 101, 115, 115, 105, 111, 255, 110, 255, 95, 112, 101, 114, 105, 111, 100, 255, 255, 0, 0, 0, 0, 0, 0, 0, 0, 255, 247, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 103, 116, 105, 100, 255, 95, 109, 111, 100, 255, 101, 0, 0, 255, 0, 0, 0, 0, 0, 248, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 10, version: 87, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 685, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 686, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 943, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1256, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=943] [region_id=684]
[2019/05/01 12:37:52.923 -07:00] [INFO] [pd.rs:558] ["try to change peer"] [peer="Peer { id: 686, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [change_type=RemoveNode] [region_id=684]
[2019/05/01 12:37:52.923 -07:00] [INFO] [peer.rs:1953] ["propose conf change peer"] [change_peer=686] [change_type=RemoveNode] [peer_id=943] [region_id=684]
[2019/05/01 12:37:52.932 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 1257, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=8] [term=6] [peer_id=1257] [region_id=913]
[2019/05/01 12:37:52.932 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 6, version: 107, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=1257] [region_id=913]
[2019/05/01 12:37:52.932 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 913, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 97, 255, 100, 97, 112, 255, 116, 105, 118, 101, 95, 255, 104, 97, 255, 115, 104, 95, 105, 110, 100, 255, 101, 255, 120, 0, 0, 0, 0, 0, 0, 249, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 97, 255, 100, 97, 112, 255, 116, 105, 118, 101, 95, 255, 109, 97, 255, 120, 95, 115, 108, 101, 101, 255, 112, 255, 95, 100, 101, 108, 97, 121, 0, 254, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 107, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 914, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 915, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 916, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1257, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1257, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1257] [region_id=913]
[2019/05/01 12:37:52.958 -07:00] [INFO] [pd.rs:558] ["try to change peer"] [peer="Peer { id: 686, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [change_type=RemoveNode] [region_id=684]
[2019/05/01 12:37:53.011 -07:00] [INFO] [peer.rs:1927] ["there is a pending conf change, try later"] [peer_id=943] [region_id=684]
[2019/05/01 12:37:53.018 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 686, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=13] [term=7] [peer_id=943] [region_id=684]
[2019/05/01 12:37:53.018 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 10, version: 87, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=943] [region_id=684]
[2019/05/01 12:37:53.018 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 684, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 103, 116, 105, 100, 255, 95, 101, 120, 101, 255, 99, 117, 116, 255, 101, 100, 95, 99, 111, 255, 109, 112, 255, 114, 101, 115, 115, 105, 111, 255, 110, 255, 95, 112, 101, 114, 105, 111, 100, 255, 255, 0, 0, 0, 0, 0, 0, 0, 0, 255, 247, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 103, 116, 105, 100, 255, 95, 109, 111, 100, 255, 101, 0, 0, 255, 0, 0, 0, 0, 0, 248, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 10, version: 87, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 685, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 686, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 943, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1256, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 686, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=943] [region_id=684]
[2019/05/01 12:37:53.018 -07:00] [INFO] [unknown:1625] ["[region 1178] 1213 [term 6] received MsgTimeoutNow from 1181 and starts an election to get leadership."]
[2019/05/01 12:37:53.018 -07:00] [INFO] [unknown:739] ["[region 1178] 1213 became candidate at term 7"]
[2019/05/01 12:37:53.018 -07:00] [INFO] [unknown:854] ["[region 1178] 1213 received MsgRequestVoteResponse from 1213 at term 7"]
[2019/05/01 12:37:53.018 -07:00] [INFO] [unknown:828] ["[region 1178] 1213 [logterm: 6, index: 9] sent MsgRequestVote request to 1181 at term 7"]
[2019/05/01 12:37:53.018 -07:00] [INFO] [unknown:828] ["[region 1178] 1213 [logterm: 6, index: 9] sent MsgRequestVote request to 1180 at term 7"]
[2019/05/01 12:37:53.075 -07:00] [INFO] [peer.rs:1318] ["notify pd with change peer region"] [region="Region { id: 684, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 103, 116, 105, 100, 255, 95, 101, 120, 101, 255, 99, 117, 116, 255, 101, 100, 95, 99, 111, 255, 109, 112, 255, 114, 101, 115, 115, 105, 111, 255, 110, 255, 95, 112, 101, 114, 105, 111, 100, 255, 255, 0, 0, 0, 0, 0, 0, 0, 0, 255, 247, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 103, 116, 105, 100, 255, 95, 109, 111, 100, 255, 101, 0, 0, 255, 0, 0, 0, 0, 0, 248, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 11, version: 87, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 685, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 943, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1256, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=943] [region_id=684]
[2019/05/01 12:37:53.107 -07:00] [INFO] [unknown:854] ["[region 1178] 1213 received MsgRequestVoteResponse from 1181 at term 7"]
[2019/05/01 12:37:53.107 -07:00] [INFO] [unknown:1550] ["[region 1178] 1213 [quorum:2] has received 2 MsgRequestVoteResponse votes and 0 vote rejections"]
[2019/05/01 12:37:53.107 -07:00] [INFO] [unknown:789] ["[region 1178] 1213 became leader at term 7"]
[2019/05/01 12:37:53.148 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 915, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=9] [term=6] [peer_id=1257] [region_id=913]
[2019/05/01 12:37:53.148 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 7, version: 107, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=1257] [region_id=913]
[2019/05/01 12:37:53.148 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 913, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 97, 255, 100, 97, 112, 255, 116, 105, 118, 101, 95, 255, 104, 97, 255, 115, 104, 95, 105, 110, 100, 255, 101, 255, 120, 0, 0, 0, 0, 0, 0, 249, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 97, 255, 100, 97, 112, 255, 116, 105, 118, 101, 95, 255, 109, 97, 255, 120, 95, 115, 108, 101, 101, 255, 112, 255, 95, 100, 101, 108, 97, 121, 0, 254, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 7, version: 107, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 914, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 915, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 916, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1257, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 915, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1257] [region_id=913]
[2019/05/01 12:37:53.192 -07:00] [INFO] [pd.rs:558] ["try to change peer"] [peer="Peer { id: 1261, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [change_type=AddLearnerNode] [region_id=808]
[2019/05/01 12:37:53.200 -07:00] [INFO] [peer.rs:1953] ["propose conf change peer"] [change_peer=1261] [change_type=AddLearnerNode] [peer_id=1053] [region_id=808]
[2019/05/01 12:37:53.292 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddLearnerNode, peer: Some(Peer { id: 1261, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=11] [term=7] [peer_id=1053] [region_id=808]
[2019/05/01 12:37:53.292 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 8, version: 97, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddLearner] [peer_id=1053] [region_id=808]
[2019/05/01 12:37:53.292 -07:00] [INFO] [apply.rs:1476] ["add learner successfully"] [region="Region { id: 808, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 104, 111, 115, 116, 255, 95, 99, 97, 99, 255, 104, 101, 95, 255, 115, 105, 122, 101, 0, 254, 0, 0, 253], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 104, 111, 115, 116, 255, 110, 97, 109, 101, 255, 0, 0, 0, 255, 0, 0, 0, 0, 0, 247, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 8, version: 97, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 809, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 811, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1053, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1261, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1053] [region_id=808]
[2019/05/01 12:37:53.319 -07:00] [INFO] [peer.rs:1318] ["notify pd with change peer region"] [region="Region { id: 808, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 104, 111, 115, 116, 255, 95, 99, 97, 99, 255, 104, 101, 95, 255, 115, 105, 122, 101, 0, 254, 0, 0, 253], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 104, 111, 115, 116, 255, 110, 97, 109, 101, 255, 0, 0, 0, 255, 0, 0, 0, 0, 0, 247, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 97, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 809, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 811, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1053, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1261, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1053] [region_id=808]
[2019/05/01 12:37:53.602 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 3], lock_version: 408089912432132098, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 4], lock_ttl: 3403, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:37:53.699 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 4], lock_version: 408089912563204104, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 4], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:37:53.808 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 4], lock_version: 408089912589418508, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 4], lock_ttl: 3087, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:37:53.877 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 0], lock_version: 408089912615632900, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 0], lock_ttl: 3002, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:37:54.049 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 7], lock_version: 408089912654954512, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 7], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:37:54.051 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 7], lock_version: 408089912654954512, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 7], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:37:54.133 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 5], lock_version: 408089912681168915, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 5], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:37:54.235 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=1260] [region_id=369]
[2019/05/01 12:37:54.250 -07:00] [INFO] [unknown:719] ["[region 369] 1260 became follower at term 0"]
[2019/05/01 12:37:54.250 -07:00] [INFO] [unknown:295] ["[region 369] 1260 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:37:54.250 -07:00] [INFO] [unknown:719] ["[region 369] 1260 became follower at term 1"]
[2019/05/01 12:37:54.250 -07:00] [INFO] [unknown:920] ["[region 369] 1260 [term: 1] received a MsgHeartbeat message with higher term from 370 [term: 6]"]
[2019/05/01 12:37:54.250 -07:00] [INFO] [unknown:719] ["[region 369] 1260 became follower at term 6"]
[2019/05/01 12:37:54.533 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 3], lock_version: 408089912799133700, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 10], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:37:54.646 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 10], lock_version: 408089912812240901, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 10], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:37:54.839 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 7], lock_version: 408089912864669699, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 11], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:37:54.960 -07:00] [INFO] [peer_storage.rs:759] ["requesting snapshot"] [peer_id=1053] [region_id=808]
[2019/05/01 12:37:54.960 -07:00] [INFO] [snap.rs:757] ["scan snapshot of one cf"] [size=0] [key_count=0] [cf=default] [snapshot=/opt/tidb/data/kv/snap/gen_808_7_11_(default|lock|write).sst] [region_id=808]
[2019/05/01 12:37:54.960 -07:00] [INFO] [snap.rs:757] ["scan snapshot of one cf"] [size=0] [key_count=0] [cf=lock] [snapshot=/opt/tidb/data/kv/snap/gen_808_7_11_(default|lock|write).sst] [region_id=808]
[2019/05/01 12:37:54.960 -07:00] [INFO] [snap.rs:757] ["scan snapshot of one cf"] [size=138] [key_count=2] [cf=write] [snapshot=/opt/tidb/data/kv/snap/gen_808_7_11_(default|lock|write).sst] [region_id=808]
[2019/05/01 12:37:54.976 -07:00] [INFO] [snap.rs:875] ["scan snapshot"] [takes=15.705211ms] [size=1375] [key_count=2] [snapshot=/opt/tidb/data/kv/snap/gen_808_7_11_(default|lock|write).sst] [region_id=808]
[2019/05/01 12:37:55.145 -07:00] [INFO] [pd.rs:558] ["try to change peer"] [peer="Peer { id: 1262, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [change_type=AddLearnerNode] [region_id=1178]
[2019/05/01 12:37:55.145 -07:00] [INFO] [peer.rs:1953] ["propose conf change peer"] [change_peer=1262] [change_type=AddLearnerNode] [peer_id=1213] [region_id=1178]
[2019/05/01 12:37:55.191 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddLearnerNode, peer: Some(Peer { id: 1262, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=11] [term=7] [peer_id=1213] [region_id=1178]
[2019/05/01 12:37:55.192 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 8, version: 147, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddLearner] [peer_id=1213] [region_id=1178]
[2019/05/01 12:37:55.192 -07:00] [INFO] [apply.rs:1476] ["add learner successfully"] [region="Region { id: 1178, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 102, 255, 111, 114, 99, 255, 101, 95, 108, 111, 97, 255, 100, 95, 255, 99, 111, 114, 114, 117, 112, 255, 116, 255, 101, 100, 0, 0, 0, 0, 0, 250, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 102, 255, 111, 114, 99, 255, 101, 95, 114, 101, 99, 255, 111, 118, 255, 101, 114, 121, 0, 0, 0, 252, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 8, version: 147, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1180, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1181, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1213, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1262, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1213] [region_id=1178]
[2019/05/01 12:37:55.201 -07:00] [INFO] [peer.rs:1318] ["notify pd with change peer region"] [region="Region { id: 1178, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 102, 255, 111, 114, 99, 255, 101, 95, 108, 111, 97, 255, 100, 95, 255, 99, 111, 114, 114, 117, 112, 255, 116, 255, 101, 100, 0, 0, 0, 0, 0, 250, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 102, 255, 111, 114, 99, 255, 101, 95, 114, 101, 99, 255, 111, 118, 255, 101, 114, 121, 0, 0, 0, 252, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 147, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1180, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1181, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1213, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1262, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1213] [region_id=1178]
[2019/05/01 12:37:55.269 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 1259, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=11] [term=6] [peer_id=1195] [region_id=472]
[2019/05/01 12:37:55.269 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 9, version: 57, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=1195] [region_id=472]
[2019/05/01 12:37:55.269 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 472, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 100, 101, 102, 97, 255, 117, 108, 116, 95, 255, 116, 109, 112, 255, 95, 115, 116, 111, 114, 255, 97, 103, 255, 101, 95, 101, 110, 103, 105, 255, 110, 255, 101, 0, 0, 0, 0, 0, 0, 249, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 100, 101, 102, 97, 255, 117, 108, 116, 95, 255, 119, 101, 101, 255, 107, 95, 102, 111, 114, 255, 109, 97, 255, 116, 0, 0, 0, 0, 0, 250, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 57, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 473, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 474, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1195, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1259, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1259, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1195] [region_id=472]
[2019/05/01 12:37:55.352 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 474, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=12] [term=6] [peer_id=1195] [region_id=472]
[2019/05/01 12:37:55.352 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 10, version: 57, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=1195] [region_id=472]
[2019/05/01 12:37:55.352 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 472, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 100, 101, 102, 97, 255, 117, 108, 116, 95, 255, 116, 109, 112, 255, 95, 115, 116, 111, 114, 255, 97, 103, 255, 101, 95, 101, 110, 103, 105, 255, 110, 255, 101, 0, 0, 0, 0, 0, 0, 249, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 100, 101, 102, 97, 255, 117, 108, 116, 95, 255, 119, 101, 101, 255, 107, 95, 102, 111, 114, 255, 109, 97, 255, 116, 0, 0, 0, 0, 0, 250, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 10, version: 57, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 473, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 474, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1195, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1259, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 474, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1195] [region_id=472]
[2019/05/01 12:37:55.640 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 11], lock_version: 408089913074384904, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 11], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:37:55.711 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 11], lock_version: 408089913074384904, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 11], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:37:55.714 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 13], lock_version: 408089913100599298, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 13], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:37:55.722 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 11], lock_version: 408089913074384904, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 11], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:37:55.806 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 13], lock_version: 408089913113706504, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 13], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:37:55.846 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 13], lock_version: 408089913113706504, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 13], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:37:55.868 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=1263] [region_id=405]
[2019/05/01 12:37:55.868 -07:00] [INFO] [unknown:719] ["[region 405] 1263 became follower at term 0"]
[2019/05/01 12:37:55.868 -07:00] [INFO] [unknown:295] ["[region 405] 1263 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:37:55.868 -07:00] [INFO] [unknown:719] ["[region 405] 1263 became follower at term 1"]
[2019/05/01 12:37:55.868 -07:00] [INFO] [unknown:920] ["[region 405] 1263 [term: 1] received a MsgHeartbeat message with higher term from 407 [term: 7]"]
[2019/05/01 12:37:55.869 -07:00] [INFO] [unknown:719] ["[region 405] 1263 became follower at term 7"]
[2019/05/01 12:37:55.876 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 12], lock_version: 408089913139920900, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 12], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:37:55.901 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 12], lock_version: 408089913139920900, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 12], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:37:56.063 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 13], lock_version: 408089913192349701, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 13], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:37:56.240 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_369_6_7_(default|lock|write).sst] [snap_key=369_6_7]
[2019/05/01 12:37:56.247 -07:00] [INFO] [unknown:1792] ["[region 369] 1260 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 7, term: 6]"]
[2019/05/01 12:37:56.247 -07:00] [INFO] [unknown:1816] ["[region 369] 1260 restored progress of 370 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:37:56.247 -07:00] [INFO] [unknown:1816] ["[region 369] 1260 restored progress of 371 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:37:56.247 -07:00] [INFO] [unknown:1816] ["[region 369] 1260 restored progress of 372 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:37:56.247 -07:00] [INFO] [unknown:1816] ["[region 369] 1260 restored progress of 1260 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:37:56.247 -07:00] [INFO] [unknown:474] ["[region 369] 1260 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 7, term: 6]"]
[2019/05/01 12:37:56.247 -07:00] [INFO] [unknown:1736] ["[region 369] 1260 [commit: 7] restored snapshot [index: 7, term: 6]"]
[2019/05/01 12:37:56.247 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=1260] [region_id=369]
[2019/05/01 12:37:56.247 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 7, truncated_state: Some(RaftTruncatedState { index: 7, term: 6, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 369, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 99, 104, 97, 114, 255, 97, 99, 116, 101, 255, 114, 95, 115, 255, 101, 116, 95, 102, 105, 255, 108, 101, 255, 115, 121, 115, 116, 101, 109, 255, 0, 255, 0, 0, 0, 0, 0, 0, 0, 247, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 99, 104, 97, 114, 255, 97, 99, 116, 101, 255, 114, 95, 115, 255, 101, 116, 95, 114, 101, 255, 115, 117, 255, 108, 116, 115, 0, 0, 0, 252, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 37, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 370, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 371, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 372, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1260, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1260] [region_id=369]
[2019/05/01 12:37:56.266 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 369] 1260"]
[2019/05/01 12:37:56.266 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 369, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 99, 104, 97, 114, 255, 97, 99, 116, 101, 255, 114, 95, 115, 255, 101, 116, 95, 102, 105, 255, 108, 101, 255, 115, 121, 115, 116, 101, 109, 255, 0, 255, 0, 0, 0, 0, 0, 0, 0, 247, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 99, 104, 97, 114, 255, 97, 99, 116, 101, 255, 114, 95, 115, 255, 101, 116, 95, 114, 101, 255, 115, 117, 255, 108, 116, 115, 0, 0, 0, 252, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 37, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 370, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 371, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 372, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1260, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1260] [region_id=369]
[2019/05/01 12:37:56.266 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=369]
[2019/05/01 12:37:56.282 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=16.393305ms] [region_id=369]
[2019/05/01 12:37:56.483 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 12], lock_version: 408089913270992905, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 14], lock_ttl: 3053, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:37:56.491 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 12], lock_version: 408089913270992905, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 14], lock_ttl: 3053, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:37:56.613 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 14], lock_version: 408089913323421700, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 14], lock_ttl: 3056, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:37:56.692 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 16], lock_version: 408089913349636110, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 20], lock_ttl: 3002, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:37:56.874 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 18], lock_version: 408089913402064905, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 18], lock_ttl: 3002, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:37:56.962 -07:00] [INFO] [unknown:841] ["New connected subchannel at 0x7f859006ced0 for subchannel 0x7f864047aa00"]
[2019/05/01 12:37:56.981 -07:00] [INFO] [snap.rs:389] ["sent snapshot"] [duration=18.999995ms] [size=1375] [snap_key=808_7_11] [region_id=808]
[2019/05/01 12:37:56.981 -07:00] [INFO] [peer.rs:538] ["report snapshot status"] [status=Finish] [to="Peer { id: 1261, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1053] [region_id=808]
[2019/05/01 12:37:57.016 -07:00] [INFO] [peer_storage.rs:759] ["requesting snapshot"] [peer_id=1213] [region_id=1178]
[2019/05/01 12:37:57.016 -07:00] [INFO] [snap.rs:757] ["scan snapshot of one cf"] [size=0] [key_count=0] [cf=default] [snapshot=/opt/tidb/data/kv/snap/gen_1178_7_11_(default|lock|write).sst] [region_id=1178]
[2019/05/01 12:37:57.016 -07:00] [INFO] [snap.rs:757] ["scan snapshot of one cf"] [size=0] [key_count=0] [cf=lock] [snapshot=/opt/tidb/data/kv/snap/gen_1178_7_11_(default|lock|write).sst] [region_id=1178]
[2019/05/01 12:37:57.016 -07:00] [INFO] [snap.rs:757] ["scan snapshot of one cf"] [size=192] [key_count=2] [cf=write] [snapshot=/opt/tidb/data/kv/snap/gen_1178_7_11_(default|lock|write).sst] [region_id=1178]
[2019/05/01 12:37:57.026 -07:00] [INFO] [snap.rs:875] ["scan snapshot"] [takes=9.928829ms] [size=1487] [key_count=2] [snapshot=/opt/tidb/data/kv/snap/gen_1178_7_11_(default|lock|write).sst] [region_id=1178]
[2019/05/01 12:37:57.074 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 17], lock_version: 408089913454493708, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 19], lock_ttl: 3002, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:37:57.172 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 16], lock_version: 408089913480708099, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 19], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:37:57.205 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 20], lock_version: 408089913493815303, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 20], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:37:57.277 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 1260, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=8] [term=6] [peer_id=1260] [region_id=369]
[2019/05/01 12:37:57.277 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 6, version: 37, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=1260] [region_id=369]
[2019/05/01 12:37:57.277 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 369, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 99, 104, 97, 114, 255, 97, 99, 116, 101, 255, 114, 95, 115, 255, 101, 116, 95, 102, 105, 255, 108, 101, 255, 115, 121, 115, 116, 101, 109, 255, 0, 255, 0, 0, 0, 0, 0, 0, 0, 247, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 99, 104, 97, 114, 255, 97, 99, 116, 101, 255, 114, 95, 115, 255, 101, 116, 95, 114, 101, 255, 115, 117, 255, 108, 116, 115, 0, 0, 0, 252, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 37, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 370, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 371, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 372, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1260, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1260, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1260] [region_id=369]
[2019/05/01 12:37:57.338 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 372, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=9] [term=6] [peer_id=1260] [region_id=369]
[2019/05/01 12:37:57.338 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 7, version: 37, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=1260] [region_id=369]
[2019/05/01 12:37:57.338 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 369, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 99, 104, 97, 114, 255, 97, 99, 116, 101, 255, 114, 95, 115, 255, 101, 116, 95, 102, 105, 255, 108, 101, 255, 115, 121, 115, 116, 101, 109, 255, 0, 255, 0, 0, 0, 0, 0, 0, 0, 247, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 99, 104, 97, 114, 255, 97, 99, 116, 101, 255, 114, 95, 115, 255, 101, 116, 95, 114, 101, 255, 115, 117, 255, 108, 116, 115, 0, 0, 0, 252, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 7, version: 37, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 370, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 371, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 372, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1260, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 372, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1260] [region_id=369]
[2019/05/01 12:37:57.401 -07:00] [INFO] [pd.rs:558] ["try to change peer"] [peer="Peer { id: 1264, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [change_type=AddLearnerNode] [region_id=361]
[2019/05/01 12:37:57.401 -07:00] [INFO] [peer.rs:1953] ["propose conf change peer"] [change_peer=1264] [change_type=AddLearnerNode] [peer_id=781] [region_id=361]
[2019/05/01 12:37:57.431 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddLearnerNode, peer: Some(Peer { id: 1264, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=12] [term=8] [peer_id=781] [region_id=361]
[2019/05/01 12:37:57.431 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 8, version: 37, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddLearner] [peer_id=781] [region_id=361]
[2019/05/01 12:37:57.431 -07:00] [INFO] [apply.rs:1476] ["add learner successfully"] [region="Region { id: 361, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 99, 104, 97, 114, 255, 97, 99, 116, 101, 255, 114, 95, 115, 255, 101, 116, 95, 99, 111, 255, 110, 110, 255, 101, 99, 116, 105, 111, 110, 255, 0, 255, 0, 0, 0, 0, 0, 0, 0, 247, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 99, 104, 97, 114, 255, 97, 99, 116, 101, 255, 114, 95, 115, 255, 101, 116, 95, 100, 97, 255, 116, 97, 255, 98, 97, 115, 101, 0, 0, 253, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 8, version: 37, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 363, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 364, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 781, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1264, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=781] [region_id=361]
[2019/05/01 12:37:57.440 -07:00] [INFO] [peer.rs:1318] ["notify pd with change peer region"] [region="Region { id: 361, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 99, 104, 97, 114, 255, 97, 99, 116, 101, 255, 114, 95, 115, 255, 101, 116, 95, 99, 111, 255, 110, 110, 255, 101, 99, 116, 105, 111, 110, 255, 0, 255, 0, 0, 0, 0, 0, 0, 0, 247, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 99, 104, 97, 114, 255, 97, 99, 116, 101, 255, 114, 95, 115, 255, 101, 116, 95, 100, 97, 255, 116, 97, 255, 98, 97, 115, 101, 0, 0, 253, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 37, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 363, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 364, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 781, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1264, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=781] [region_id=361]
[2019/05/01 12:37:57.571 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 20], lock_version: 408089913585565709, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 20], lock_ttl: 3002, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:37:57.802 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 20], lock_version: 408089913651101702, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 23], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:37:57.818 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 20], lock_version: 408089913651101702, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 23], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:37:57.872 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_405_7_8_(default|lock|write).sst] [snap_key=405_7_8]
[2019/05/01 12:37:57.883 -07:00] [INFO] [unknown:1792] ["[region 405] 1263 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 8, term: 7]"]
[2019/05/01 12:37:57.883 -07:00] [INFO] [unknown:1816] ["[region 405] 1263 restored progress of 406 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:37:57.883 -07:00] [INFO] [unknown:1816] ["[region 405] 1263 restored progress of 407 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:37:57.883 -07:00] [INFO] [unknown:1816] ["[region 405] 1263 restored progress of 408 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:37:57.883 -07:00] [INFO] [unknown:1816] ["[region 405] 1263 restored progress of 1263 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:37:57.883 -07:00] [INFO] [unknown:474] ["[region 405] 1263 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 8, term: 7]"]
[2019/05/01 12:37:57.883 -07:00] [INFO] [unknown:1736] ["[region 405] 1263 [commit: 8] restored snapshot [index: 8, term: 7]"]
[2019/05/01 12:37:57.883 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=1263] [region_id=405]
[2019/05/01 12:37:57.883 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 8, truncated_state: Some(RaftTruncatedState { index: 8, term: 7, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 405, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 99, 104, 97, 114, 255, 97, 99, 116, 101, 255, 114, 95, 115, 255, 101, 116, 115, 95, 100, 255, 105, 114, 255, 0, 0, 0, 0, 0, 0, 249, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 99, 104, 101, 99, 255, 107, 95, 112, 114, 255, 111, 120, 121, 255, 95, 117, 115, 101, 114, 255, 115, 0, 255, 0, 0, 0, 0, 0, 0, 248, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 47, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 406, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 407, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 408, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1263, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1263] [region_id=405]
[2019/05/01 12:37:57.901 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 405, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 99, 104, 97, 114, 255, 97, 99, 116, 101, 255, 114, 95, 115, 255, 101, 116, 115, 95, 100, 255, 105, 114, 255, 0, 0, 0, 0, 0, 0, 249, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 99, 104, 101, 99, 255, 107, 95, 112, 114, 255, 111, 120, 121, 255, 95, 117, 115, 101, 114, 255, 115, 0, 255, 0, 0, 0, 0, 0, 0, 248, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 47, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 406, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 407, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 408, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1263, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1263] [region_id=405]
[2019/05/01 12:37:57.901 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 405] 1263"]
[2019/05/01 12:37:57.901 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=405]
[2019/05/01 12:37:57.918 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=16.176448ms] [region_id=405]
[2019/05/01 12:37:57.921 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 22], lock_version: 408089913664208906, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 22], lock_ttl: 3063, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:37:57.963 -07:00] [INFO] [pd.rs:558] ["try to change peer"] [peer="Peer { id: 1261, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [change_type=AddNode] [region_id=808]
[2019/05/01 12:37:57.971 -07:00] [INFO] [peer_storage.rs:759] ["requesting snapshot"] [peer_id=781] [region_id=361]
[2019/05/01 12:37:57.971 -07:00] [INFO] [peer.rs:1953] ["propose conf change peer"] [change_peer=1261] [change_type=AddNode] [peer_id=1053] [region_id=808]
[2019/05/01 12:37:57.971 -07:00] [INFO] [snap.rs:757] ["scan snapshot of one cf"] [size=0] [key_count=0] [cf=default] [snapshot=/opt/tidb/data/kv/snap/gen_361_8_12_(default|lock|write).sst] [region_id=361]
[2019/05/01 12:37:57.971 -07:00] [INFO] [snap.rs:757] ["scan snapshot of one cf"] [size=0] [key_count=0] [cf=lock] [snapshot=/opt/tidb/data/kv/snap/gen_361_8_12_(default|lock|write).sst] [region_id=361]
[2019/05/01 12:37:57.971 -07:00] [INFO] [snap.rs:757] ["scan snapshot of one cf"] [size=192] [key_count=2] [cf=write] [snapshot=/opt/tidb/data/kv/snap/gen_361_8_12_(default|lock|write).sst] [region_id=361]
[2019/05/01 12:37:57.985 -07:00] [INFO] [snap.rs:875] ["scan snapshot"] [takes=21.592397ms] [size=1467] [key_count=2] [snapshot=/opt/tidb/data/kv/snap/gen_361_8_12_(default|lock|write).sst] [region_id=361]
[2019/05/01 12:37:58.002 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 22], lock_version: 408089913664208906, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 22], lock_ttl: 3063, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:37:58.052 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 1261, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=12] [term=7] [peer_id=1053] [region_id=808]
[2019/05/01 12:37:58.052 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 9, version: 97, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=1053] [region_id=808]
[2019/05/01 12:37:58.052 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 808, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 104, 111, 115, 116, 255, 95, 99, 97, 99, 255, 104, 101, 95, 255, 115, 105, 122, 101, 0, 254, 0, 0, 253], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 104, 111, 115, 116, 255, 110, 97, 109, 101, 255, 0, 0, 0, 255, 0, 0, 0, 0, 0, 247, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 97, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 809, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 811, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1053, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1261, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1261, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1053] [region_id=808]
[2019/05/01 12:37:58.062 -07:00] [INFO] [peer.rs:1318] ["notify pd with change peer region"] [region="Region { id: 808, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 104, 111, 115, 116, 255, 95, 99, 97, 99, 255, 104, 101, 95, 255, 115, 105, 122, 101, 0, 254, 0, 0, 253], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 104, 111, 115, 116, 255, 110, 97, 109, 101, 255, 0, 0, 0, 255, 0, 0, 0, 0, 0, 247, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 10, version: 97, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 809, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 811, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1053, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1261, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1053] [region_id=808]
[2019/05/01 12:37:58.093 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 21], lock_version: 408089913677316101, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 21], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:37:58.098 -07:00] [INFO] [pd.rs:558] ["try to change peer"] [peer="Peer { id: 811, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [change_type=RemoveNode] [region_id=808]
[2019/05/01 12:37:58.098 -07:00] [INFO] [peer.rs:1953] ["propose conf change peer"] [change_peer=811] [change_type=RemoveNode] [peer_id=1053] [region_id=808]
[2019/05/01 12:37:58.113 -07:00] [INFO] [unknown:1625] ["[region 229] 941 [term 7] received MsgTimeoutNow from 232 and starts an election to get leadership."]
[2019/05/01 12:37:58.113 -07:00] [INFO] [unknown:739] ["[region 229] 941 became candidate at term 8"]
[2019/05/01 12:37:58.113 -07:00] [INFO] [unknown:854] ["[region 229] 941 received MsgRequestVoteResponse from 941 at term 8"]
[2019/05/01 12:37:58.113 -07:00] [INFO] [unknown:828] ["[region 229] 941 [logterm: 7, index: 10] sent MsgRequestVote request to 232 at term 8"]
[2019/05/01 12:37:58.113 -07:00] [INFO] [unknown:828] ["[region 229] 941 [logterm: 7, index: 10] sent MsgRequestVote request to 230 at term 8"]
[2019/05/01 12:37:58.135 -07:00] [INFO] [pd.rs:558] ["try to change peer"] [peer="Peer { id: 811, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [change_type=RemoveNode] [region_id=808]
[2019/05/01 12:37:58.136 -07:00] [INFO] [peer.rs:1927] ["there is a pending conf change, try later"] [peer_id=1053] [region_id=808]
[2019/05/01 12:37:58.186 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 811, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=13] [term=7] [peer_id=1053] [region_id=808]
[2019/05/01 12:37:58.186 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 10, version: 97, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=1053] [region_id=808]
[2019/05/01 12:37:58.186 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 808, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 104, 111, 115, 116, 255, 95, 99, 97, 99, 255, 104, 101, 95, 255, 115, 105, 122, 101, 0, 254, 0, 0, 253], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 104, 111, 115, 116, 255, 110, 97, 109, 101, 255, 0, 0, 0, 255, 0, 0, 0, 0, 0, 247, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 10, version: 97, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 809, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 811, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1053, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1261, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 811, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1053] [region_id=808]
[2019/05/01 12:37:58.197 -07:00] [INFO] [peer.rs:1318] ["notify pd with change peer region"] [region="Region { id: 808, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 104, 111, 115, 116, 255, 95, 99, 97, 99, 255, 104, 101, 95, 255, 115, 105, 122, 101, 0, 254, 0, 0, 253], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 104, 111, 115, 116, 255, 110, 97, 109, 101, 255, 0, 0, 0, 255, 0, 0, 0, 0, 0, 247, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 11, version: 97, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 809, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1053, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1261, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1053] [region_id=808]
[2019/05/01 12:37:58.197 -07:00] [INFO] [unknown:854] ["[region 229] 941 received MsgRequestVoteResponse from 232 at term 8"]
[2019/05/01 12:37:58.197 -07:00] [INFO] [unknown:1550] ["[region 229] 941 [quorum:2] has received 2 MsgRequestVoteResponse votes and 0 vote rejections"]
[2019/05/01 12:37:58.197 -07:00] [INFO] [unknown:789] ["[region 229] 941 became leader at term 8"]
[2019/05/01 12:37:58.205 -07:00] [INFO] [store.rs:294] ["raft message is stale, ignore it"] [msg_type=MsgAppendResponse] [current_region_epoch="RegionEpoch { conf_ver: 11, version: 97, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region_id=808]
[2019/05/01 12:37:58.301 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 24], lock_version: 408089913742852100, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 24], lock_ttl: 3094, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:37:58.477 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 23], lock_version: 408089913808388105, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 23], lock_ttl: 3002, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:37:58.484 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 23], lock_version: 408089913808388105, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 23], lock_ttl: 3002, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:37:58.634 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 25], lock_version: 408089913834602505, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 25], lock_ttl: 3089, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:37:58.704 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 27], lock_version: 408089913887031305, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 27], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:37:58.716 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 25], lock_version: 408089913887031311, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 25], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:37:58.914 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 1263, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=9] [term=7] [peer_id=1263] [region_id=405]
[2019/05/01 12:37:58.916 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 6, version: 47, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=1263] [region_id=405]
[2019/05/01 12:37:58.916 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 405, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 99, 104, 97, 114, 255, 97, 99, 116, 101, 255, 114, 95, 115, 255, 101, 116, 115, 95, 100, 255, 105, 114, 255, 0, 0, 0, 0, 0, 0, 249, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 99, 104, 101, 99, 255, 107, 95, 112, 114, 255, 111, 120, 121, 255, 95, 117, 115, 101, 114, 255, 115, 0, 255, 0, 0, 0, 0, 0, 0, 248, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 47, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 406, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 407, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 408, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1263, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1263, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1263] [region_id=405]
[2019/05/01 12:37:58.976 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 408, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=10] [term=7] [peer_id=1263] [region_id=405]
[2019/05/01 12:37:58.976 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 7, version: 47, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=1263] [region_id=405]
[2019/05/01 12:37:58.976 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 405, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 99, 104, 97, 114, 255, 97, 99, 116, 101, 255, 114, 95, 115, 255, 101, 116, 115, 95, 100, 255, 105, 114, 255, 0, 0, 0, 0, 0, 0, 249, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 99, 104, 101, 99, 255, 107, 95, 112, 114, 255, 111, 120, 121, 255, 95, 117, 115, 101, 114, 255, 115, 0, 255, 0, 0, 0, 0, 0, 0, 248, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 7, version: 47, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 406, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 407, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 408, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1263, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 408, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1263] [region_id=405]
[2019/05/01 12:37:59.032 -07:00] [INFO] [unknown:841] ["New connected subchannel at 0x7f858fa019c0 for subchannel 0x7f864047ac00"]
[2019/05/01 12:37:59.044 -07:00] [INFO] [snap.rs:389] ["sent snapshot"] [duration=12.19637ms] [size=1487] [snap_key=1178_7_11] [region_id=1178]
[2019/05/01 12:37:59.044 -07:00] [INFO] [peer.rs:538] ["report snapshot status"] [status=Finish] [to="Peer { id: 1262, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1213] [region_id=1178]
[2019/05/01 12:37:59.746 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 29], lock_version: 408089914149175298, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 29], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:37:59.809 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 27], lock_version: 408089914188496906, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 27], lock_ttl: 3002, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:37:59.824 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=1305] [region_id=696]
[2019/05/01 12:37:59.824 -07:00] [INFO] [unknown:719] ["[region 696] 1305 became follower at term 0"]
[2019/05/01 12:37:59.824 -07:00] [INFO] [unknown:295] ["[region 696] 1305 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:37:59.824 -07:00] [INFO] [unknown:719] ["[region 696] 1305 became follower at term 1"]
[2019/05/01 12:37:59.824 -07:00] [INFO] [unknown:920] ["[region 696] 1305 [term: 1] received a MsgHeartbeat message with higher term from 698 [term: 7]"]
[2019/05/01 12:37:59.824 -07:00] [INFO] [unknown:719] ["[region 696] 1305 became follower at term 7"]
[2019/05/01 12:37:59.978 -07:00] [INFO] [unknown:841] ["New connected subchannel at 0x7f858f661350 for subchannel 0x7f864047ae00"]
[2019/05/01 12:37:59.985 -07:00] [INFO] [snap.rs:389] ["sent snapshot"] [duration=7.486783ms] [size=1467] [snap_key=361_8_12] [region_id=361]
[2019/05/01 12:37:59.985 -07:00] [INFO] [peer.rs:538] ["report snapshot status"] [status=Finish] [to="Peer { id: 1264, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=781] [region_id=361]
[2019/05/01 12:38:00.021 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=1306] [region_id=1190]
[2019/05/01 12:38:00.021 -07:00] [INFO] [unknown:719] ["[region 1190] 1306 became follower at term 0"]
[2019/05/01 12:38:00.021 -07:00] [INFO] [unknown:295] ["[region 1190] 1306 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:38:00.021 -07:00] [INFO] [unknown:719] ["[region 1190] 1306 became follower at term 1"]
[2019/05/01 12:38:00.021 -07:00] [INFO] [unknown:920] ["[region 1190] 1306 [term: 1] received a MsgHeartbeat message with higher term from 1193 [term: 6]"]
[2019/05/01 12:38:00.021 -07:00] [INFO] [unknown:719] ["[region 1190] 1306 became follower at term 6"]
[2019/05/01 12:38:00.026 -07:00] [INFO] [pd.rs:558] ["try to change peer"] [peer="Peer { id: 1262, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [change_type=AddNode] [region_id=1178]
[2019/05/01 12:38:00.026 -07:00] [INFO] [peer.rs:1953] ["propose conf change peer"] [change_peer=1262] [change_type=AddNode] [peer_id=1213] [region_id=1178]
[2019/05/01 12:38:00.075 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 1262, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=12] [term=7] [peer_id=1213] [region_id=1178]
[2019/05/01 12:38:00.075 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 9, version: 147, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=1213] [region_id=1178]
[2019/05/01 12:38:00.075 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 1178, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 102, 255, 111, 114, 99, 255, 101, 95, 108, 111, 97, 255, 100, 95, 255, 99, 111, 114, 114, 117, 112, 255, 116, 255, 101, 100, 0, 0, 0, 0, 0, 250, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 102, 255, 111, 114, 99, 255, 101, 95, 114, 101, 99, 255, 111, 118, 255, 101, 114, 121, 0, 0, 0, 252, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 147, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1180, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1181, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1213, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1262, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1262, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1213] [region_id=1178]
[2019/05/01 12:38:00.090 -07:00] [INFO] [peer.rs:1318] ["notify pd with change peer region"] [region="Region { id: 1178, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 102, 255, 111, 114, 99, 255, 101, 95, 108, 111, 97, 255, 100, 95, 255, 99, 111, 114, 114, 117, 112, 255, 116, 255, 101, 100, 0, 0, 0, 0, 0, 250, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 102, 255, 111, 114, 99, 255, 101, 95, 114, 101, 99, 255, 111, 118, 255, 101, 114, 121, 0, 0, 0, 252, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 10, version: 147, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1180, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1181, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1213, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1262, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1213] [region_id=1178]
[2019/05/01 12:38:00.100 -07:00] [INFO] [pd.rs:558] ["try to change peer"] [peer="Peer { id: 1181, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [change_type=RemoveNode] [region_id=1178]
[2019/05/01 12:38:00.100 -07:00] [INFO] [peer.rs:1953] ["propose conf change peer"] [change_peer=1181] [change_type=RemoveNode] [peer_id=1213] [region_id=1178]
[2019/05/01 12:38:00.146 -07:00] [INFO] [pd.rs:558] ["try to change peer"] [peer="Peer { id: 1181, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [change_type=RemoveNode] [region_id=1178]
[2019/05/01 12:38:00.185 -07:00] [INFO] [peer.rs:1927] ["there is a pending conf change, try later"] [peer_id=1213] [region_id=1178]
[2019/05/01 12:38:00.185 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 1181, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=13] [term=7] [peer_id=1213] [region_id=1178]
[2019/05/01 12:38:00.185 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 10, version: 147, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=1213] [region_id=1178]
[2019/05/01 12:38:00.185 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 1178, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 102, 255, 111, 114, 99, 255, 101, 95, 108, 111, 97, 255, 100, 95, 255, 99, 111, 114, 114, 117, 112, 255, 116, 255, 101, 100, 0, 0, 0, 0, 0, 250, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 102, 255, 111, 114, 99, 255, 101, 95, 114, 101, 99, 255, 111, 118, 255, 101, 114, 121, 0, 0, 0, 252, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 10, version: 147, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1180, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1181, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1213, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1262, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1181, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1213] [region_id=1178]
[2019/05/01 12:38:00.221 -07:00] [INFO] [peer.rs:1318] ["notify pd with change peer region"] [region="Region { id: 1178, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 102, 255, 111, 114, 99, 255, 101, 95, 108, 111, 97, 255, 100, 95, 255, 99, 111, 114, 114, 117, 112, 255, 116, 255, 101, 100, 0, 0, 0, 0, 0, 250, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 102, 255, 111, 114, 99, 255, 101, 95, 114, 101, 99, 255, 111, 118, 255, 101, 114, 121, 0, 0, 0, 252, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 11, version: 147, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1180, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1213, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1262, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1213] [region_id=1178]
[2019/05/01 12:38:00.221 -07:00] [INFO] [store.rs:294] ["raft message is stale, ignore it"] [msg_type=MsgAppendResponse] [current_region_epoch="RegionEpoch { conf_ver: 11, version: 147, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region_id=1178]
[2019/05/01 12:38:00.623 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 32], lock_version: 408089914385104900, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 33], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:00.827 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 33], lock_version: 408089914424426505, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 33], lock_ttl: 3002, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:00.906 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 33], lock_version: 408089914424426505, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 33], lock_ttl: 3002, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:00.966 -07:00] [INFO] [pd.rs:558] ["try to change peer"] [peer="Peer { id: 1264, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [change_type=AddNode] [region_id=361]
[2019/05/01 12:38:00.966 -07:00] [INFO] [peer.rs:1953] ["propose conf change peer"] [change_peer=1264] [change_type=AddNode] [peer_id=781] [region_id=361]
[2019/05/01 12:38:01.003 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 1264, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=13] [term=8] [peer_id=781] [region_id=361]
[2019/05/01 12:38:01.003 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 9, version: 37, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=781] [region_id=361]
[2019/05/01 12:38:01.003 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 361, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 99, 104, 97, 114, 255, 97, 99, 116, 101, 255, 114, 95, 115, 255, 101, 116, 95, 99, 111, 255, 110, 110, 255, 101, 99, 116, 105, 111, 110, 255, 0, 255, 0, 0, 0, 0, 0, 0, 0, 247, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 99, 104, 97, 114, 255, 97, 99, 116, 101, 255, 114, 95, 115, 255, 101, 116, 95, 100, 97, 255, 116, 97, 255, 98, 97, 115, 101, 0, 0, 253, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 37, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 363, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 364, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 781, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1264, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1264, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=781] [region_id=361]
[2019/05/01 12:38:01.011 -07:00] [INFO] [peer.rs:1318] ["notify pd with change peer region"] [region="Region { id: 361, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 99, 104, 97, 114, 255, 97, 99, 116, 101, 255, 114, 95, 115, 255, 101, 116, 95, 99, 111, 255, 110, 110, 255, 101, 99, 116, 105, 111, 110, 255, 0, 255, 0, 0, 0, 0, 0, 0, 0, 247, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 99, 104, 97, 114, 255, 97, 99, 116, 101, 255, 114, 95, 115, 255, 101, 116, 95, 100, 97, 255, 116, 97, 255, 98, 97, 115, 101, 0, 0, 253, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 10, version: 37, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 363, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 364, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 781, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1264, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=781] [region_id=361]
[2019/05/01 12:38:01.018 -07:00] [INFO] [pd.rs:558] ["try to change peer"] [peer="Peer { id: 364, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [change_type=RemoveNode] [region_id=361]
[2019/05/01 12:38:01.018 -07:00] [INFO] [peer.rs:1953] ["propose conf change peer"] [change_peer=364] [change_type=RemoveNode] [peer_id=781] [region_id=361]
[2019/05/01 12:38:01.028 -07:00] [INFO] [pd.rs:558] ["try to change peer"] [peer="Peer { id: 364, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [change_type=RemoveNode] [region_id=361]
[2019/05/01 12:38:01.053 -07:00] [INFO] [peer.rs:1927] ["there is a pending conf change, try later"] [peer_id=781] [region_id=361]
[2019/05/01 12:38:01.053 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 364, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=14] [term=8] [peer_id=781] [region_id=361]
[2019/05/01 12:38:01.053 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 10, version: 37, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=781] [region_id=361]
[2019/05/01 12:38:01.053 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 361, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 99, 104, 97, 114, 255, 97, 99, 116, 101, 255, 114, 95, 115, 255, 101, 116, 95, 99, 111, 255, 110, 110, 255, 101, 99, 116, 105, 111, 110, 255, 0, 255, 0, 0, 0, 0, 0, 0, 0, 247, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 99, 104, 97, 114, 255, 97, 99, 116, 101, 255, 114, 95, 115, 255, 101, 116, 95, 100, 97, 255, 116, 97, 255, 98, 97, 115, 101, 0, 0, 253, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 10, version: 37, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 363, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 364, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 781, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1264, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 364, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=781] [region_id=361]
[2019/05/01 12:38:01.062 -07:00] [INFO] [peer.rs:1318] ["notify pd with change peer region"] [region="Region { id: 361, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 99, 104, 97, 114, 255, 97, 99, 116, 101, 255, 114, 95, 115, 255, 101, 116, 95, 99, 111, 255, 110, 110, 255, 101, 99, 116, 105, 111, 110, 255, 0, 255, 0, 0, 0, 0, 0, 0, 0, 247, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 99, 104, 97, 114, 255, 97, 99, 116, 101, 255, 114, 95, 115, 255, 101, 116, 95, 100, 97, 255, 116, 97, 255, 98, 97, 115, 101, 0, 0, 253, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 11, version: 37, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 363, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 781, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1264, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=781] [region_id=361]
[2019/05/01 12:38:01.828 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_696_7_8_(default|lock|write).sst] [snap_key=696_7_8]
[2019/05/01 12:38:01.838 -07:00] [INFO] [unknown:1792] ["[region 696] 1305 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 8, term: 7]"]
[2019/05/01 12:38:01.838 -07:00] [INFO] [unknown:1816] ["[region 696] 1305 restored progress of 697 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:38:01.838 -07:00] [INFO] [unknown:1816] ["[region 696] 1305 restored progress of 698 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:38:01.838 -07:00] [INFO] [unknown:1816] ["[region 696] 1305 restored progress of 699 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:38:01.838 -07:00] [INFO] [unknown:1816] ["[region 696] 1305 restored progress of 1305 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:38:01.838 -07:00] [INFO] [unknown:474] ["[region 696] 1305 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 8, term: 7]"]
[2019/05/01 12:38:01.838 -07:00] [INFO] [unknown:1736] ["[region 696] 1305 [commit: 8] restored snapshot [index: 8, term: 7]"]
[2019/05/01 12:38:01.838 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=1305] [region_id=696]
[2019/05/01 12:38:01.838 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 8, truncated_state: Some(RaftTruncatedState { index: 8, term: 7, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 696, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 104, 97, 118, 101, 255, 95, 99, 111, 109, 255, 112, 114, 101, 255, 115, 115, 0, 0, 0, 252, 0, 0, 253], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 104, 97, 118, 101, 255, 95, 99, 114, 121, 255, 112, 116, 0, 255, 0, 0, 0, 0, 0, 249, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 87, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 697, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 698, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 699, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1305, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1305] [region_id=696]
[2019/05/01 12:38:01.854 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 696, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 104, 97, 118, 101, 255, 95, 99, 111, 109, 255, 112, 114, 101, 255, 115, 115, 0, 0, 0, 252, 0, 0, 253], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 104, 97, 118, 101, 255, 95, 99, 114, 121, 255, 112, 116, 0, 255, 0, 0, 0, 0, 0, 249, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 87, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 697, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 698, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 699, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1305, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1305] [region_id=696]
[2019/05/01 12:38:01.854 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 696] 1305"]
[2019/05/01 12:38:01.854 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=696]
[2019/05/01 12:38:01.870 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=16.07611ms] [region_id=696]
[2019/05/01 12:38:02.007 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=1307] [region_id=1182]
[2019/05/01 12:38:02.007 -07:00] [INFO] [unknown:719] ["[region 1182] 1307 became follower at term 0"]
[2019/05/01 12:38:02.007 -07:00] [INFO] [unknown:295] ["[region 1182] 1307 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:38:02.007 -07:00] [INFO] [unknown:719] ["[region 1182] 1307 became follower at term 1"]
[2019/05/01 12:38:02.007 -07:00] [INFO] [unknown:920] ["[region 1182] 1307 [term: 1] received a MsgHeartbeat message with higher term from 1184 [term: 7]"]
[2019/05/01 12:38:02.007 -07:00] [INFO] [unknown:719] ["[region 1182] 1307 became follower at term 7"]
[2019/05/01 12:38:02.013 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 39], lock_version: 408089914725892114, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 39], lock_ttl: 3003, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:02.035 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_1190_6_7_(default|lock|write).sst] [snap_key=1190_6_7]
[2019/05/01 12:38:02.044 -07:00] [INFO] [unknown:1792] ["[region 1190] 1306 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 7, term: 6]"]
[2019/05/01 12:38:02.044 -07:00] [INFO] [unknown:1816] ["[region 1190] 1306 restored progress of 1191 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:38:02.044 -07:00] [INFO] [unknown:1816] ["[region 1190] 1306 restored progress of 1192 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:38:02.045 -07:00] [INFO] [unknown:1816] ["[region 1190] 1306 restored progress of 1193 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:38:02.045 -07:00] [INFO] [unknown:1816] ["[region 1190] 1306 restored progress of 1306 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:38:02.045 -07:00] [INFO] [unknown:474] ["[region 1190] 1306 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 7, term: 6]"]
[2019/05/01 12:38:02.045 -07:00] [INFO] [unknown:1736] ["[region 1190] 1306 [commit: 7] restored snapshot [index: 7, term: 6]"]
[2019/05/01 12:38:02.045 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=1306] [region_id=1190]
[2019/05/01 12:38:02.045 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 7, truncated_state: Some(RaftTruncatedState { index: 7, term: 6, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 1190, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 102, 255, 116, 95, 99, 255, 97, 99, 104, 101, 95, 255, 115, 105, 255, 122, 101, 0, 0, 0, 0, 251, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 102, 255, 116, 95, 101, 255, 110, 97, 98, 108, 101, 255, 95, 100, 255, 105, 97, 103, 95, 112, 114, 255, 105, 255, 110, 116, 0, 0, 0, 0, 0, 250, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 147, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1191, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1192, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1193, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1306, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1306] [region_id=1190]
[2019/05/01 12:38:02.063 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 1190] 1306"]
[2019/05/01 12:38:02.063 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 1190, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 102, 255, 116, 95, 99, 255, 97, 99, 104, 101, 95, 255, 115, 105, 255, 122, 101, 0, 0, 0, 0, 251, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 102, 255, 116, 95, 101, 255, 110, 97, 98, 108, 101, 255, 95, 100, 255, 105, 97, 103, 95, 112, 114, 255, 105, 255, 110, 116, 0, 0, 0, 0, 0, 250, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 147, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1191, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1192, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1193, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1306, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1306] [region_id=1190]
[2019/05/01 12:38:02.063 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=1190]
[2019/05/01 12:38:02.079 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=16.389019ms] [region_id=1190]
[2019/05/01 12:38:02.155 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 39], lock_version: 408089914778320911, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 40], lock_ttl: 3002, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:02.419 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 40], lock_version: 408089914843856902, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 42], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:02.533 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 38], lock_version: 408089914883178503, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 38], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:02.567 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 43], lock_version: 408089914896285700, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 43], lock_ttl: 3002, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:02.748 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 41], lock_version: 408089914909392906, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 41], lock_ttl: 3100, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:02.799 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 41], lock_version: 408089914909392906, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 41], lock_ttl: 3100, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:02.922 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 1305, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=9] [term=7] [peer_id=1305] [region_id=696]
[2019/05/01 12:38:02.927 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 6, version: 87, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=1305] [region_id=696]
[2019/05/01 12:38:02.927 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 696, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 104, 97, 118, 101, 255, 95, 99, 111, 109, 255, 112, 114, 101, 255, 115, 115, 0, 0, 0, 252, 0, 0, 253], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 104, 97, 118, 101, 255, 95, 99, 114, 121, 255, 112, 116, 0, 255, 0, 0, 0, 0, 0, 249, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 87, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 697, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 698, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 699, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1305, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1305, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1305] [region_id=696]
[2019/05/01 12:38:03.010 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 42], lock_version: 408089914974928900, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 42], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:03.027 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 697, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=10] [term=7] [peer_id=1305] [region_id=696]
[2019/05/01 12:38:03.027 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 7, version: 87, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=1305] [region_id=696]
[2019/05/01 12:38:03.027 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=1308] [region_id=618]
[2019/05/01 12:38:03.027 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 696, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 104, 97, 118, 101, 255, 95, 99, 111, 109, 255, 112, 114, 101, 255, 115, 115, 0, 0, 0, 252, 0, 0, 253], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 104, 97, 118, 101, 255, 95, 99, 114, 121, 255, 112, 116, 0, 255, 0, 0, 0, 0, 0, 249, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 7, version: 87, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 697, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 698, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 699, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1305, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 697, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1305] [region_id=696]
[2019/05/01 12:38:03.027 -07:00] [INFO] [unknown:719] ["[region 618] 1308 became follower at term 0"]
[2019/05/01 12:38:03.027 -07:00] [INFO] [unknown:295] ["[region 618] 1308 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:38:03.027 -07:00] [INFO] [unknown:719] ["[region 618] 1308 became follower at term 1"]
[2019/05/01 12:38:03.027 -07:00] [INFO] [unknown:920] ["[region 618] 1308 [term: 1] received a MsgHeartbeat message with higher term from 621 [term: 7]"]
[2019/05/01 12:38:03.027 -07:00] [INFO] [unknown:719] ["[region 618] 1308 became follower at term 7"]
[2019/05/01 12:38:03.070 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 42], lock_version: 408089914974928900, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 42], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:03.145 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 1306, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=8] [term=6] [peer_id=1306] [region_id=1190]
[2019/05/01 12:38:03.145 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 6, version: 147, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=1306] [region_id=1190]
[2019/05/01 12:38:03.145 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 1190, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 102, 255, 116, 95, 99, 255, 97, 99, 104, 101, 95, 255, 115, 105, 255, 122, 101, 0, 0, 0, 0, 251, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 102, 255, 116, 95, 101, 255, 110, 97, 98, 108, 101, 255, 95, 100, 255, 105, 97, 103, 95, 112, 114, 255, 105, 255, 110, 116, 0, 0, 0, 0, 0, 250, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 147, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1191, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1192, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1193, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1306, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1306, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1306] [region_id=1190]
[2019/05/01 12:38:03.220 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 42], lock_version: 408089914974928900, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 42], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:03.261 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 1191, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=9] [term=6] [peer_id=1306] [region_id=1190]
[2019/05/01 12:38:03.261 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 7, version: 147, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=1306] [region_id=1190]
[2019/05/01 12:38:03.261 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 1190, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 102, 255, 116, 95, 99, 255, 97, 99, 104, 101, 95, 255, 115, 105, 255, 122, 101, 0, 0, 0, 0, 251, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 102, 255, 116, 95, 101, 255, 110, 97, 98, 108, 101, 255, 95, 100, 255, 105, 97, 103, 95, 112, 114, 255, 105, 255, 110, 116, 0, 0, 0, 0, 0, 250, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 7, version: 147, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1191, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1192, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1193, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1306, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1191, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1306] [region_id=1190]
[2019/05/01 12:38:03.293 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 42], lock_version: 408089914974928900, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 42], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:03.584 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 44], lock_version: 408089915027357706, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 45], lock_ttl: 3431, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:03.587 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 44], lock_version: 408089915027357706, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 45], lock_ttl: 3431, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:03.641 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 44], lock_version: 408089915027357706, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 45], lock_ttl: 3431, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:04.011 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_1182_7_8_(default|lock|write).sst] [snap_key=1182_7_8]
[2019/05/01 12:38:04.021 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 46], lock_version: 408089915184644101, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 46], lock_ttl: 3251, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:04.023 -07:00] [INFO] [unknown:1792] ["[region 1182] 1307 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 8, term: 7]"]
[2019/05/01 12:38:04.023 -07:00] [INFO] [unknown:1816] ["[region 1182] 1307 restored progress of 1183 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:38:04.023 -07:00] [INFO] [unknown:1816] ["[region 1182] 1307 restored progress of 1184 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:38:04.023 -07:00] [INFO] [unknown:1816] ["[region 1182] 1307 restored progress of 1185 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:38:04.023 -07:00] [INFO] [unknown:1816] ["[region 1182] 1307 restored progress of 1307 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:38:04.023 -07:00] [INFO] [unknown:474] ["[region 1182] 1307 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 8, term: 7]"]
[2019/05/01 12:38:04.023 -07:00] [INFO] [unknown:1736] ["[region 1182] 1307 [commit: 8] restored snapshot [index: 8, term: 7]"]
[2019/05/01 12:38:04.023 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=1307] [region_id=1182]
[2019/05/01 12:38:04.023 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 8, truncated_state: Some(RaftTruncatedState { index: 8, term: 7, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 1182, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 102, 255, 111, 114, 99, 255, 101, 95, 114, 101, 99, 255, 111, 118, 255, 101, 114, 121, 0, 0, 0, 252, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 102, 255, 116, 95, 97, 255, 117, 120, 95, 116, 97, 255, 98, 108, 255, 101, 0, 0, 0, 0, 0, 250, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 147, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1183, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1184, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1185, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1307, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1307] [region_id=1182]
[2019/05/01 12:38:04.070 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 1182] 1307"]
[2019/05/01 12:38:04.071 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 1182, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 102, 255, 111, 114, 99, 255, 101, 95, 114, 101, 99, 255, 111, 118, 255, 101, 114, 121, 0, 0, 0, 252, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 102, 255, 116, 95, 97, 255, 117, 120, 95, 116, 97, 255, 98, 108, 255, 101, 0, 0, 0, 0, 0, 250, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 147, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1183, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1184, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1185, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1307, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1307] [region_id=1182]
[2019/05/01 12:38:04.071 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=1182]
[2019/05/01 12:38:04.072 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 46], lock_version: 408089915184644101, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 46], lock_ttl: 3251, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:04.084 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 47], lock_version: 408089915289501702, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 47], lock_ttl: 3003, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:04.115 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=44.134928ms] [region_id=1182]
[2019/05/01 12:38:04.148 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 47], lock_version: 408089915289501702, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 47], lock_ttl: 3003, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:04.175 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 38], lock_version: 408089915237072899, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 44], lock_ttl: 3277, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:05.025 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_618_7_8_(default|lock|write).sst] [snap_key=618_7_8]
[2019/05/01 12:38:05.033 -07:00] [INFO] [unknown:1792] ["[region 618] 1308 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 8, term: 7]"]
[2019/05/01 12:38:05.033 -07:00] [INFO] [unknown:1816] ["[region 618] 1308 restored progress of 619 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:38:05.033 -07:00] [INFO] [unknown:1816] ["[region 618] 1308 restored progress of 620 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:38:05.033 -07:00] [INFO] [unknown:1816] ["[region 618] 1308 restored progress of 621 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:38:05.033 -07:00] [INFO] [unknown:1816] ["[region 618] 1308 restored progress of 1308 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:38:05.033 -07:00] [INFO] [unknown:474] ["[region 618] 1308 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 8, term: 7]"]
[2019/05/01 12:38:05.033 -07:00] [INFO] [unknown:1736] ["[region 618] 1308 [commit: 8] restored snapshot [index: 8, term: 7]"]
[2019/05/01 12:38:05.033 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=1308] [region_id=618]
[2019/05/01 12:38:05.033 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 8, truncated_state: Some(RaftTruncatedState { index: 8, term: 7, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 618, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 102, 116, 95, 115, 255, 116, 111, 112, 119, 255, 111, 114, 100, 255, 95, 102, 105, 108, 101, 255, 0, 0, 255, 0, 0, 0, 0, 0, 0, 247, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 103, 101, 110, 101, 255, 114, 97, 108, 95, 255, 108, 111, 103, 255, 0, 0, 0, 0, 0, 250, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 77, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 619, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 620, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 621, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1308, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1308] [region_id=618]
[2019/05/01 12:38:05.067 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 618] 1308"]
[2019/05/01 12:38:05.067 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=618]
[2019/05/01 12:38:05.067 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 618, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 102, 116, 95, 115, 255, 116, 111, 112, 119, 255, 111, 114, 100, 255, 95, 102, 105, 108, 101, 255, 0, 0, 255, 0, 0, 0, 0, 0, 0, 247, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 103, 101, 110, 101, 255, 114, 97, 108, 95, 255, 108, 111, 103, 255, 0, 0, 0, 0, 0, 250, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 77, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 619, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 620, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 621, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1308, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1308] [region_id=618]
[2019/05/01 12:38:05.112 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=45.157581ms] [region_id=618]
[2019/05/01 12:38:05.135 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 1307, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=9] [term=7] [peer_id=1307] [region_id=1182]
[2019/05/01 12:38:05.135 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 6, version: 147, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=1307] [region_id=1182]
[2019/05/01 12:38:05.135 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 1182, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 102, 255, 111, 114, 99, 255, 101, 95, 114, 101, 99, 255, 111, 118, 255, 101, 114, 121, 0, 0, 0, 252, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 102, 255, 116, 95, 97, 255, 117, 120, 95, 116, 97, 255, 98, 108, 255, 101, 0, 0, 0, 0, 0, 250, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 147, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1183, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1184, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1185, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1307, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1307, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1307] [region_id=1182]
[2019/05/01 12:38:05.240 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 1183, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=10] [term=7] [peer_id=1307] [region_id=1182]
[2019/05/01 12:38:05.244 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 7, version: 147, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=1307] [region_id=1182]
[2019/05/01 12:38:05.245 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 1182, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 102, 255, 111, 114, 99, 255, 101, 95, 114, 101, 99, 255, 111, 118, 255, 101, 114, 121, 0, 0, 0, 252, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 102, 255, 116, 95, 97, 255, 117, 120, 95, 116, 97, 255, 98, 108, 255, 101, 0, 0, 0, 0, 0, 250, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 7, version: 147, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1183, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1184, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1185, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1307, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1183, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1307] [region_id=1182]
[2019/05/01 12:38:05.270 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 48], lock_version: 408089915551645700, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 48], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:05.491 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 45], lock_version: 408089915643396100, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 45], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:05.998 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=1311] [region_id=245]
[2019/05/01 12:38:06.006 -07:00] [INFO] [unknown:719] ["[region 245] 1311 became follower at term 0"]
[2019/05/01 12:38:06.006 -07:00] [INFO] [unknown:295] ["[region 245] 1311 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:38:06.006 -07:00] [INFO] [unknown:719] ["[region 245] 1311 became follower at term 1"]
[2019/05/01 12:38:06.006 -07:00] [INFO] [unknown:920] ["[region 245] 1311 [term: 1] received a MsgHeartbeat message with higher term from 664 [term: 8]"]
[2019/05/01 12:38:06.007 -07:00] [INFO] [unknown:719] ["[region 245] 1311 became follower at term 8"]
[2019/05/01 12:38:06.073 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 51], lock_version: 408089915826896901, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 53], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:06.104 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 1308, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=9] [term=7] [peer_id=1308] [region_id=618]
[2019/05/01 12:38:06.104 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 6, version: 77, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=1308] [region_id=618]
[2019/05/01 12:38:06.104 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 618, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 102, 116, 95, 115, 255, 116, 111, 112, 119, 255, 111, 114, 100, 255, 95, 102, 105, 108, 101, 255, 0, 0, 255, 0, 0, 0, 0, 0, 0, 247, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 103, 101, 110, 101, 255, 114, 97, 108, 95, 255, 108, 111, 103, 255, 0, 0, 0, 0, 0, 250, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 77, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 619, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 620, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 621, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1308, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1308, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1308] [region_id=618]
[2019/05/01 12:38:06.128 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 51], lock_version: 408089915826896901, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 51], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:06.131 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 51], lock_version: 408089915826896901, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 51], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:06.134 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 51], lock_version: 408089915826896901, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 53], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:06.170 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 619, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=10] [term=7] [peer_id=1308] [region_id=618]
[2019/05/01 12:38:06.170 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 7, version: 77, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=1308] [region_id=618]
[2019/05/01 12:38:06.170 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 618, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 102, 116, 95, 115, 255, 116, 111, 112, 119, 255, 111, 114, 100, 255, 95, 102, 105, 108, 101, 255, 0, 0, 255, 0, 0, 0, 0, 0, 0, 247, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 103, 101, 110, 101, 255, 114, 97, 108, 95, 255, 108, 111, 103, 255, 0, 0, 0, 0, 0, 250, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 7, version: 77, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 619, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 620, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 621, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1308, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 619, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1308] [region_id=618]
[2019/05/01 12:38:06.208 -07:00] [INFO] [pd.rs:558] ["try to change peer"] [peer="Peer { id: 1312, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [change_type=AddLearnerNode] [region_id=233]
[2019/05/01 12:38:06.208 -07:00] [INFO] [peer.rs:1953] ["propose conf change peer"] [change_peer=1312] [change_type=AddLearnerNode] [peer_id=780] [region_id=233]
[2019/05/01 12:38:06.244 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddLearnerNode, peer: Some(Peer { id: 1312, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=12] [term=8] [peer_id=780] [region_id=233]
[2019/05/01 12:38:06.244 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 8, version: 27, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddLearner] [peer_id=780] [region_id=233]
[2019/05/01 12:38:06.244 -07:00] [INFO] [apply.rs:1476] ["add learner successfully"] [region="Region { id: 233, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 95, 103, 255, 114, 111, 117, 255, 112, 95, 99, 111, 109, 255, 109, 105, 255, 116, 95, 115, 121, 110, 99, 255, 95, 255, 100, 101, 108, 97, 121, 0, 0, 253, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 95, 103, 255, 114, 111, 117, 255, 112, 95, 99, 111, 109, 255, 109, 105, 255, 116, 95, 115, 121, 110, 99, 255, 95, 255, 110, 111, 95, 100, 101, 108, 97, 255, 255, 121, 95, 99, 111, 117, 110, 116, 0, 255, 254, 0, 0, 0, 0, 0, 0, 0, 248], region_epoch: Some(RegionEpoch { conf_ver: 8, version: 27, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 235, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 236, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 780, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1312, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=780] [region_id=233]
[2019/05/01 12:38:06.252 -07:00] [INFO] [peer.rs:1318] ["notify pd with change peer region"] [region="Region { id: 233, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 95, 103, 255, 114, 111, 117, 255, 112, 95, 99, 111, 109, 255, 109, 105, 255, 116, 95, 115, 121, 110, 99, 255, 95, 255, 100, 101, 108, 97, 121, 0, 0, 253, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 95, 103, 255, 114, 111, 117, 255, 112, 95, 99, 111, 109, 255, 109, 105, 255, 116, 95, 115, 121, 110, 99, 255, 95, 255, 110, 111, 95, 100, 101, 108, 97, 255, 255, 121, 95, 99, 111, 117, 110, 116, 0, 255, 254, 0, 0, 0, 0, 0, 0, 0, 248], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 27, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 235, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 236, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 780, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1312, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=780] [region_id=233]
[2019/05/01 12:38:06.301 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 49], lock_version: 408089915853111302, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 49], lock_ttl: 3002, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:06.415 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 52], lock_version: 408089915905540107, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 55], lock_ttl: 3002, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:06.628 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 51], lock_version: 408089915944861706, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 51], lock_ttl: 3052, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:07.054 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 55], lock_version: 408089916075933700, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 55], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:07.231 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 54], lock_version: 408089916102148113, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 54], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:07.575 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 52], lock_version: 408089916220112903, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 57], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:07.701 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 55], lock_version: 408089916246327314, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 55], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:07.740 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 59], lock_version: 408089916259434501, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 59], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:07.760 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 56], lock_version: 408089916259434498, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 56], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:07.793 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 58], lock_version: 408089916259434511, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 58], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:07.812 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 58], lock_version: 408089916259434511, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 58], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:07.901 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 58], lock_version: 408089916285648908, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 58], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:07.903 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=1313] [region_id=456]
[2019/05/01 12:38:07.903 -07:00] [INFO] [unknown:719] ["[region 456] 1313 became follower at term 0"]
[2019/05/01 12:38:07.903 -07:00] [INFO] [unknown:295] ["[region 456] 1313 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:38:07.903 -07:00] [INFO] [unknown:719] ["[region 456] 1313 became follower at term 1"]
[2019/05/01 12:38:07.903 -07:00] [INFO] [unknown:920] ["[region 456] 1313 [term: 1] received a MsgHeartbeat message with higher term from 459 [term: 7]"]
[2019/05/01 12:38:07.903 -07:00] [INFO] [unknown:719] ["[region 456] 1313 became follower at term 7"]
[2019/05/01 12:38:07.973 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 58], lock_version: 408089916285648908, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 58], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:08.001 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_245_8_12_(default|lock|write).sst] [snap_key=245_8_12]
[2019/05/01 12:38:08.008 -07:00] [INFO] [peer_storage.rs:759] ["requesting snapshot"] [peer_id=780] [region_id=233]
[2019/05/01 12:38:08.008 -07:00] [INFO] [snap.rs:757] ["scan snapshot of one cf"] [size=0] [key_count=0] [cf=default] [snapshot=/opt/tidb/data/kv/snap/gen_233_8_12_(default|lock|write).sst] [region_id=233]
[2019/05/01 12:38:08.008 -07:00] [INFO] [snap.rs:757] ["scan snapshot of one cf"] [size=0] [key_count=0] [cf=lock] [snapshot=/opt/tidb/data/kv/snap/gen_233_8_12_(default|lock|write).sst] [region_id=233]
[2019/05/01 12:38:08.008 -07:00] [INFO] [snap.rs:757] ["scan snapshot of one cf"] [size=192] [key_count=2] [cf=write] [snapshot=/opt/tidb/data/kv/snap/gen_233_8_12_(default|lock|write).sst] [region_id=233]
[2019/05/01 12:38:08.024 -07:00] [INFO] [unknown:1792] ["[region 245] 1311 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 12, term: 8]"]
[2019/05/01 12:38:08.038 -07:00] [INFO] [unknown:1816] ["[region 245] 1311 restored progress of 247 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:38:08.038 -07:00] [INFO] [unknown:1816] ["[region 245] 1311 restored progress of 248 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:38:08.038 -07:00] [INFO] [unknown:1816] ["[region 245] 1311 restored progress of 664 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:38:08.038 -07:00] [INFO] [unknown:1816] ["[region 245] 1311 restored progress of 1311 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:38:08.038 -07:00] [INFO] [unknown:474] ["[region 245] 1311 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 12, term: 8]"]
[2019/05/01 12:38:08.038 -07:00] [INFO] [unknown:1736] ["[region 245] 1311 [commit: 12] restored snapshot [index: 12, term: 8]"]
[2019/05/01 12:38:08.038 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=1311] [region_id=245]
[2019/05/01 12:38:08.038 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 12, truncated_state: Some(RaftTruncatedState { index: 12, term: 8, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 245, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 95, 109, 255, 97, 120, 95, 255, 102, 108, 117, 115, 104, 255, 95, 113, 255, 117, 101, 117, 101, 95, 116, 255, 105, 255, 109, 101, 0, 0, 0, 0, 0, 250, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 95, 111, 255, 114, 100, 101, 255, 114, 95, 99, 111, 109, 255, 109, 105, 255, 116, 115, 0, 0, 0, 0, 251, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 27, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 247, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 248, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 664, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1311, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1311] [region_id=245]
[2019/05/01 12:38:08.046 -07:00] [INFO] [snap.rs:875] ["scan snapshot"] [takes=37.407331ms] [size=1487] [key_count=2] [snapshot=/opt/tidb/data/kv/snap/gen_233_8_12_(default|lock|write).sst] [region_id=233]
[2019/05/01 12:38:08.116 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 245] 1311"]
[2019/05/01 12:38:08.116 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 245, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 95, 109, 255, 97, 120, 95, 255, 102, 108, 117, 115, 104, 255, 95, 113, 255, 117, 101, 117, 101, 95, 116, 255, 105, 255, 109, 101, 0, 0, 0, 0, 0, 250, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 95, 111, 255, 114, 100, 101, 255, 114, 95, 99, 111, 109, 255, 109, 105, 255, 116, 115, 0, 0, 0, 0, 251, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 27, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 247, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 248, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 664, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1311, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1311] [region_id=245]
[2019/05/01 12:38:08.116 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=245]
[2019/05/01 12:38:08.159 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 59], lock_version: 408089916311863298, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 59], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:08.162 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=45.810837ms] [region_id=245]
[2019/05/01 12:38:08.213 -07:00] [INFO] [unknown:1625] ["[region 1190] 1306 [term 6] received MsgTimeoutNow from 1193 and starts an election to get leadership."]
[2019/05/01 12:38:08.213 -07:00] [INFO] [unknown:739] ["[region 1190] 1306 became candidate at term 7"]
[2019/05/01 12:38:08.213 -07:00] [INFO] [unknown:854] ["[region 1190] 1306 received MsgRequestVoteResponse from 1306 at term 7"]
[2019/05/01 12:38:08.213 -07:00] [INFO] [unknown:828] ["[region 1190] 1306 [logterm: 6, index: 9] sent MsgRequestVote request to 1192 at term 7"]
[2019/05/01 12:38:08.213 -07:00] [INFO] [unknown:828] ["[region 1190] 1306 [logterm: 6, index: 9] sent MsgRequestVote request to 1193 at term 7"]
[2019/05/01 12:38:08.246 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 59], lock_version: 408089916311863298, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 59], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:08.263 -07:00] [INFO] [unknown:854] ["[region 1190] 1306 received MsgRequestVoteResponse from 1192 at term 7"]
[2019/05/01 12:38:08.263 -07:00] [INFO] [unknown:1550] ["[region 1190] 1306 [quorum:2] has received 2 MsgRequestVoteResponse votes and 0 vote rejections"]
[2019/05/01 12:38:08.263 -07:00] [INFO] [unknown:789] ["[region 1190] 1306 became leader at term 7"]
[2019/05/01 12:38:08.529 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 58], lock_version: 408089916442935299, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 59], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:08.679 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 60], lock_version: 408089916456042501, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 60], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:08.745 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 60], lock_version: 408089916456042501, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 60], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:09.047 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 1311, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=13] [term=8] [peer_id=1311] [region_id=245]
[2019/05/01 12:38:09.048 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 9, version: 27, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=1311] [region_id=245]
[2019/05/01 12:38:09.048 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 245, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 95, 109, 255, 97, 120, 95, 255, 102, 108, 117, 115, 104, 255, 95, 113, 255, 117, 101, 117, 101, 95, 116, 255, 105, 255, 109, 101, 0, 0, 0, 0, 0, 250, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 95, 111, 255, 114, 100, 101, 255, 114, 95, 99, 111, 109, 255, 109, 105, 255, 116, 115, 0, 0, 0, 0, 251, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 27, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 247, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 248, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 664, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1311, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1311, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1311] [region_id=245]
[2019/05/01 12:38:09.084 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 58], lock_version: 408089916534685700, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 58], lock_ttl: 3092, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:09.139 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 58], lock_version: 408089916534685700, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 58], lock_ttl: 3092, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:09.158 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 247, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=14] [term=8] [peer_id=1311] [region_id=245]
[2019/05/01 12:38:09.162 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 10, version: 27, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=1311] [region_id=245]
[2019/05/01 12:38:09.162 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 245, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 95, 109, 255, 97, 120, 95, 255, 102, 108, 117, 115, 104, 255, 95, 113, 255, 117, 101, 117, 101, 95, 116, 255, 105, 255, 109, 101, 0, 0, 0, 0, 0, 250, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 95, 111, 255, 114, 100, 101, 255, 114, 95, 99, 111, 109, 255, 109, 105, 255, 116, 115, 0, 0, 0, 0, 251, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 10, version: 27, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 247, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 248, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 664, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1311, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 247, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1311] [region_id=245]
[2019/05/01 12:38:09.442 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 60], lock_version: 408089916613328910, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 61], lock_ttl: 3181, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:09.497 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 60], lock_version: 408089916613328910, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 61], lock_ttl: 3181, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:09.865 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 63], lock_version: 408089916809936911, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 63], lock_ttl: 3003, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:09.907 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_456_7_8_(default|lock|write).sst] [snap_key=456_7_8]
[2019/05/01 12:38:09.913 -07:00] [INFO] [unknown:1792] ["[region 456] 1313 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 8, term: 7]"]
[2019/05/01 12:38:09.913 -07:00] [INFO] [unknown:1816] ["[region 456] 1313 restored progress of 457 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:38:09.913 -07:00] [INFO] [unknown:1816] ["[region 456] 1313 restored progress of 458 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:38:09.913 -07:00] [INFO] [unknown:1816] ["[region 456] 1313 restored progress of 459 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:38:09.913 -07:00] [INFO] [unknown:1816] ["[region 456] 1313 restored progress of 1313 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:38:09.913 -07:00] [INFO] [unknown:474] ["[region 456] 1313 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 8, term: 7]"]
[2019/05/01 12:38:09.913 -07:00] [INFO] [unknown:1736] ["[region 456] 1313 [commit: 8] restored snapshot [index: 8, term: 7]"]
[2019/05/01 12:38:09.913 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=1313] [region_id=456]
[2019/05/01 12:38:09.913 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 8, truncated_state: Some(RaftTruncatedState { index: 8, term: 7, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 456, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 100, 97, 116, 101, 255, 116, 105, 109, 101, 255, 95, 102, 111, 255, 114, 109, 97, 116, 0, 254, 0, 0, 253], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 100, 101, 98, 117, 255, 103, 0, 0, 0, 252, 0, 0, 0, 252], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 57, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 457, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 458, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 459, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1313, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1313] [region_id=456]
[2019/05/01 12:38:09.941 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 456] 1313"]
[2019/05/01 12:38:09.941 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=456]
[2019/05/01 12:38:09.941 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 456, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 100, 97, 116, 101, 255, 116, 105, 109, 101, 255, 95, 102, 111, 255, 114, 109, 97, 116, 0, 254, 0, 0, 253], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 100, 101, 98, 117, 255, 103, 0, 0, 0, 252, 0, 0, 0, 252], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 57, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 457, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 458, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 459, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1313, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1313] [region_id=456]
[2019/05/01 12:38:09.961 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=19.246168ms] [region_id=456]
[2019/05/01 12:38:10.028 -07:00] [INFO] [unknown:841] ["New connected subchannel at 0x7f8582c133a0 for subchannel 0x7f8640481000"]
[2019/05/01 12:38:10.052 -07:00] [INFO] [snap.rs:389] ["sent snapshot"] [duration=24.482702ms] [size=1487] [snap_key=233_8_12] [region_id=233]
[2019/05/01 12:38:10.052 -07:00] [INFO] [peer.rs:538] ["report snapshot status"] [status=Finish] [to="Peer { id: 1312, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=780] [region_id=233]
[2019/05/01 12:38:10.295 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=1355] [region_id=517]
[2019/05/01 12:38:10.295 -07:00] [INFO] [unknown:719] ["[region 517] 1355 became follower at term 0"]
[2019/05/01 12:38:10.295 -07:00] [INFO] [unknown:295] ["[region 517] 1355 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:38:10.295 -07:00] [INFO] [unknown:719] ["[region 517] 1355 became follower at term 1"]
[2019/05/01 12:38:10.295 -07:00] [INFO] [unknown:920] ["[region 517] 1355 [term: 1] received a MsgHeartbeat message with higher term from 518 [term: 6]"]
[2019/05/01 12:38:10.295 -07:00] [INFO] [unknown:719] ["[region 517] 1355 became follower at term 6"]
[2019/05/01 12:38:10.563 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 63], lock_version: 408089916993437706, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 65], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:10.627 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 65], lock_version: 408089917006544912, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 65], lock_ttl: 3002, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:10.841 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 65], lock_version: 408089917045866507, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 65], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:10.912 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 68], lock_version: 408089917058973703, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 68], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:10.960 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 1313, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=9] [term=7] [peer_id=1313] [region_id=456]
[2019/05/01 12:38:10.960 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 6, version: 57, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=1313] [region_id=456]
[2019/05/01 12:38:10.960 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 456, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 100, 97, 116, 101, 255, 116, 105, 109, 101, 255, 95, 102, 111, 255, 114, 109, 97, 116, 0, 254, 0, 0, 253], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 100, 101, 98, 117, 255, 103, 0, 0, 0, 252, 0, 0, 0, 252], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 57, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 457, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 458, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 459, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1313, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1313, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1313] [region_id=456]
[2019/05/01 12:38:10.993 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 458, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=10] [term=7] [peer_id=1313] [region_id=456]
[2019/05/01 12:38:10.993 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 7, version: 57, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=1313] [region_id=456]
[2019/05/01 12:38:10.993 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 456, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 100, 97, 116, 101, 255, 116, 105, 109, 101, 255, 95, 102, 111, 255, 114, 109, 97, 116, 0, 254, 0, 0, 253], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 100, 101, 98, 117, 255, 103, 0, 0, 0, 252, 0, 0, 0, 252], region_epoch: Some(RegionEpoch { conf_ver: 7, version: 57, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 457, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 458, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 459, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1313, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 458, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1313] [region_id=456]
[2019/05/01 12:38:11.029 -07:00] [INFO] [pd.rs:558] ["try to change peer"] [peer="Peer { id: 1312, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [change_type=AddNode] [region_id=233]
[2019/05/01 12:38:11.029 -07:00] [INFO] [peer.rs:1953] ["propose conf change peer"] [change_peer=1312] [change_type=AddNode] [peer_id=780] [region_id=233]
[2019/05/01 12:38:11.093 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 1312, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=13] [term=8] [peer_id=780] [region_id=233]
[2019/05/01 12:38:11.093 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 9, version: 27, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=780] [region_id=233]
[2019/05/01 12:38:11.093 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 233, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 95, 103, 255, 114, 111, 117, 255, 112, 95, 99, 111, 109, 255, 109, 105, 255, 116, 95, 115, 121, 110, 99, 255, 95, 255, 100, 101, 108, 97, 121, 0, 0, 253, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 95, 103, 255, 114, 111, 117, 255, 112, 95, 99, 111, 109, 255, 109, 105, 255, 116, 95, 115, 121, 110, 99, 255, 95, 255, 110, 111, 95, 100, 101, 108, 97, 255, 255, 121, 95, 99, 111, 117, 110, 116, 0, 255, 254, 0, 0, 0, 0, 0, 0, 0, 248], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 27, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 235, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 236, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 780, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1312, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1312, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=780] [region_id=233]
[2019/05/01 12:38:11.114 -07:00] [INFO] [peer.rs:1318] ["notify pd with change peer region"] [region="Region { id: 233, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 95, 103, 255, 114, 111, 117, 255, 112, 95, 99, 111, 109, 255, 109, 105, 255, 116, 95, 115, 121, 110, 99, 255, 95, 255, 100, 101, 108, 97, 121, 0, 0, 253, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 95, 103, 255, 114, 111, 117, 255, 112, 95, 99, 111, 109, 255, 109, 105, 255, 116, 95, 115, 121, 110, 99, 255, 95, 255, 110, 111, 95, 100, 101, 108, 97, 255, 255, 121, 95, 99, 111, 117, 110, 116, 0, 255, 254, 0, 0, 0, 0, 0, 0, 0, 248], region_epoch: Some(RegionEpoch { conf_ver: 10, version: 27, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 235, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 236, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 780, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1312, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=780] [region_id=233]
[2019/05/01 12:38:11.134 -07:00] [INFO] [pd.rs:558] ["try to change peer"] [peer="Peer { id: 235, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [change_type=RemoveNode] [region_id=233]
[2019/05/01 12:38:11.134 -07:00] [INFO] [pd.rs:558] ["try to change peer"] [peer="Peer { id: 235, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [change_type=RemoveNode] [region_id=233]
[2019/05/01 12:38:11.134 -07:00] [INFO] [peer.rs:1953] ["propose conf change peer"] [change_peer=235] [change_type=RemoveNode] [peer_id=780] [region_id=233]
[2019/05/01 12:38:11.134 -07:00] [INFO] [peer.rs:1927] ["there is a pending conf change, try later"] [peer_id=780] [region_id=233]
[2019/05/01 12:38:11.203 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 235, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=14] [term=8] [peer_id=780] [region_id=233]
[2019/05/01 12:38:11.203 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 10, version: 27, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=780] [region_id=233]
[2019/05/01 12:38:11.203 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 233, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 95, 103, 255, 114, 111, 117, 255, 112, 95, 99, 111, 109, 255, 109, 105, 255, 116, 95, 115, 121, 110, 99, 255, 95, 255, 100, 101, 108, 97, 121, 0, 0, 253, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 95, 103, 255, 114, 111, 117, 255, 112, 95, 99, 111, 109, 255, 109, 105, 255, 116, 95, 115, 121, 110, 99, 255, 95, 255, 110, 111, 95, 100, 101, 108, 97, 255, 255, 121, 95, 99, 111, 117, 110, 116, 0, 255, 254, 0, 0, 0, 0, 0, 0, 0, 248], region_epoch: Some(RegionEpoch { conf_ver: 10, version: 27, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 235, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 236, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 780, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1312, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 235, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=780] [region_id=233]
[2019/05/01 12:38:11.216 -07:00] [INFO] [peer.rs:1318] ["notify pd with change peer region"] [region="Region { id: 233, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 95, 103, 255, 114, 111, 117, 255, 112, 95, 99, 111, 109, 255, 109, 105, 255, 116, 95, 115, 121, 110, 99, 255, 95, 255, 100, 101, 108, 97, 121, 0, 0, 253, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 95, 103, 255, 114, 111, 117, 255, 112, 95, 99, 111, 109, 255, 109, 105, 255, 116, 95, 115, 121, 110, 99, 255, 95, 255, 110, 111, 95, 100, 101, 108, 97, 255, 255, 121, 95, 99, 111, 117, 110, 116, 0, 255, 254, 0, 0, 0, 0, 0, 0, 0, 248], region_epoch: Some(RegionEpoch { conf_ver: 11, version: 27, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 236, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 780, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1312, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=780] [region_id=233]
[2019/05/01 12:38:11.313 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddLearnerNode, peer: Some(Peer { id: 1358, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=10] [term=6] [peer_id=1148] [region_id=1035]
[2019/05/01 12:38:11.313 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 8, version: 117, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddLearner] [peer_id=1148] [region_id=1035]
[2019/05/01 12:38:11.313 -07:00] [INFO] [apply.rs:1476] ["add learner successfully"] [region="Region { id: 1035, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 98, 255, 117, 102, 102, 255, 101, 114, 95, 112, 111, 255, 111, 108, 255, 95, 102, 105, 108, 101, 110, 255, 97, 255, 109, 101, 0, 0, 0, 0, 0, 250, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 98, 255, 117, 102, 102, 255, 101, 114, 95, 112, 111, 255, 111, 108, 255, 95, 105, 110, 115, 116, 97, 255, 110, 255, 99, 101, 115, 0, 0, 0, 0, 251, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 8, version: 117, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1036, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1038, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1148, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1358, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1148] [region_id=1035]
[2019/05/01 12:38:11.426 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 65], lock_version: 408089917190045702, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 65], lock_ttl: 3093, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:12.004 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=1356] [region_id=373]
[2019/05/01 12:38:12.004 -07:00] [INFO] [unknown:719] ["[region 373] 1356 became follower at term 0"]
[2019/05/01 12:38:12.004 -07:00] [INFO] [unknown:295] ["[region 373] 1356 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:38:12.004 -07:00] [INFO] [unknown:719] ["[region 373] 1356 became follower at term 1"]
[2019/05/01 12:38:12.005 -07:00] [INFO] [unknown:920] ["[region 373] 1356 [term: 1] received a MsgHeartbeat message with higher term from 439 [term: 8]"]
[2019/05/01 12:38:12.005 -07:00] [INFO] [unknown:719] ["[region 373] 1356 became follower at term 8"]
[2019/05/01 12:38:12.298 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_517_6_7_(default|lock|write).sst] [snap_key=517_6_7]
[2019/05/01 12:38:12.309 -07:00] [INFO] [unknown:1792] ["[region 517] 1355 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 7, term: 6]"]
[2019/05/01 12:38:12.309 -07:00] [INFO] [unknown:1816] ["[region 517] 1355 restored progress of 518 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:38:12.309 -07:00] [INFO] [unknown:1816] ["[region 517] 1355 restored progress of 519 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:38:12.309 -07:00] [INFO] [unknown:1816] ["[region 517] 1355 restored progress of 520 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:38:12.309 -07:00] [INFO] [unknown:1816] ["[region 517] 1355 restored progress of 1355 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:38:12.309 -07:00] [INFO] [unknown:474] ["[region 517] 1355 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 7, term: 6]"]
[2019/05/01 12:38:12.309 -07:00] [INFO] [unknown:1736] ["[region 517] 1355 [commit: 7] restored snapshot [index: 7, term: 6]"]
[2019/05/01 12:38:12.309 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=1355] [region_id=517]
[2019/05/01 12:38:12.309 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 7, truncated_state: Some(RaftTruncatedState { index: 7, term: 6, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 517, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 101, 110, 102, 111, 255, 114, 99, 101, 95, 255, 103, 116, 105, 255, 100, 95, 99, 111, 110, 255, 115, 105, 255, 115, 116, 101, 110, 99, 121, 255, 0, 255, 0, 0, 0, 0, 0, 0, 0, 247, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 101, 113, 95, 114, 255, 97, 110, 103, 101, 255, 95, 105, 110, 255, 100, 101, 120, 95, 100, 255, 105, 118, 255, 101, 95, 108, 105, 109, 105, 255, 116, 255, 0, 0, 0, 0, 0, 0, 0, 248, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 67, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 518, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 519, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 520, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1355, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1355] [region_id=517]
[2019/05/01 12:38:12.325 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 517] 1355"]
[2019/05/01 12:38:12.326 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 517, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 101, 110, 102, 111, 255, 114, 99, 101, 95, 255, 103, 116, 105, 255, 100, 95, 99, 111, 110, 255, 115, 105, 255, 115, 116, 101, 110, 99, 121, 255, 0, 255, 0, 0, 0, 0, 0, 0, 0, 247, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 101, 113, 95, 114, 255, 97, 110, 103, 101, 255, 95, 105, 110, 255, 100, 101, 120, 95, 100, 255, 105, 118, 255, 101, 95, 108, 105, 109, 105, 255, 116, 255, 0, 0, 0, 0, 0, 0, 0, 248, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 67, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 518, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 519, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 520, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1355, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1355] [region_id=517]
[2019/05/01 12:38:12.326 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=517]
[2019/05/01 12:38:12.342 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=16.166859ms] [region_id=517]
[2019/05/01 12:38:12.826 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 71], lock_version: 408089917557047301, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 75], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:12.884 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 71], lock_version: 408089917557047301, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 75], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:12.943 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 73], lock_version: 408089917596368903, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 77], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:13.003 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 78], lock_version: 408089917622583304, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 78], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:13.203 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 80], lock_version: 408089917688119301, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 80], lock_ttl: 3002, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:13.354 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 1355, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=8] [term=6] [peer_id=1355] [region_id=517]
[2019/05/01 12:38:13.354 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 6, version: 67, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=1355] [region_id=517]
[2019/05/01 12:38:13.354 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 517, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 101, 110, 102, 111, 255, 114, 99, 101, 95, 255, 103, 116, 105, 255, 100, 95, 99, 111, 110, 255, 115, 105, 255, 115, 116, 101, 110, 99, 121, 255, 0, 255, 0, 0, 0, 0, 0, 0, 0, 247, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 101, 113, 95, 114, 255, 97, 110, 103, 101, 255, 95, 105, 110, 255, 100, 101, 120, 95, 100, 255, 105, 118, 255, 101, 95, 108, 105, 109, 105, 255, 116, 255, 0, 0, 0, 0, 0, 0, 0, 248, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 67, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 518, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 519, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 520, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1355, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1355, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1355] [region_id=517]
[2019/05/01 12:38:13.366 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 81], lock_version: 408089917727440904, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 81], lock_ttl: 3003, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:13.413 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 519, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=9] [term=6] [peer_id=1355] [region_id=517]
[2019/05/01 12:38:13.413 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 7, version: 67, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=1355] [region_id=517]
[2019/05/01 12:38:13.413 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 517, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 101, 110, 102, 111, 255, 114, 99, 101, 95, 255, 103, 116, 105, 255, 100, 95, 99, 111, 110, 255, 115, 105, 255, 115, 116, 101, 110, 99, 121, 255, 0, 255, 0, 0, 0, 0, 0, 0, 0, 247, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 101, 113, 95, 114, 255, 97, 110, 103, 101, 255, 95, 105, 110, 255, 100, 101, 120, 95, 100, 255, 105, 118, 255, 101, 95, 108, 105, 109, 105, 255, 116, 255, 0, 0, 0, 0, 0, 0, 0, 248, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 7, version: 67, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 518, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 519, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 520, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1355, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 519, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1355] [region_id=517]
[2019/05/01 12:38:13.659 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 76], lock_version: 408089917727440908, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 77], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:13.825 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 79], lock_version: 408089917819191311, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 80], lock_ttl: 3002, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:13.827 -07:00] [INFO] [unknown:1625] ["[region 618] 1308 [term 7] received MsgTimeoutNow from 621 and starts an election to get leadership."]
[2019/05/01 12:38:13.827 -07:00] [INFO] [unknown:739] ["[region 618] 1308 became candidate at term 8"]
[2019/05/01 12:38:13.827 -07:00] [INFO] [unknown:854] ["[region 618] 1308 received MsgRequestVoteResponse from 1308 at term 8"]
[2019/05/01 12:38:13.827 -07:00] [INFO] [unknown:828] ["[region 618] 1308 [logterm: 7, index: 10] sent MsgRequestVote request to 621 at term 8"]
[2019/05/01 12:38:13.827 -07:00] [INFO] [unknown:828] ["[region 618] 1308 [logterm: 7, index: 10] sent MsgRequestVote request to 620 at term 8"]
[2019/05/01 12:38:13.847 -07:00] [INFO] [unknown:854] ["[region 618] 1308 received MsgRequestVoteResponse from 621 at term 8"]
[2019/05/01 12:38:13.847 -07:00] [INFO] [unknown:1550] ["[region 618] 1308 [quorum:2] has received 2 MsgRequestVoteResponse votes and 0 vote rejections"]
[2019/05/01 12:38:13.847 -07:00] [INFO] [unknown:789] ["[region 618] 1308 became leader at term 8"]
[2019/05/01 12:38:13.934 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 72], lock_version: 408089917871620112, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 77], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:13.938 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=1359] [region_id=1351]
[2019/05/01 12:38:13.938 -07:00] [INFO] [unknown:719] ["[region 1351] 1359 became follower at term 0"]
[2019/05/01 12:38:13.938 -07:00] [INFO] [unknown:295] ["[region 1351] 1359 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:38:13.938 -07:00] [INFO] [unknown:719] ["[region 1351] 1359 became follower at term 1"]
[2019/05/01 12:38:13.938 -07:00] [INFO] [unknown:920] ["[region 1351] 1359 [term: 1] received a MsgHeartbeat message with higher term from 1353 [term: 7]"]
[2019/05/01 12:38:13.938 -07:00] [INFO] [unknown:719] ["[region 1351] 1359 became follower at term 7"]
[2019/05/01 12:38:14.016 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_373_8_12_(default|lock|write).sst] [snap_key=373_8_12]
[2019/05/01 12:38:14.037 -07:00] [INFO] [unknown:1792] ["[region 373] 1356 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 12, term: 8]"]
[2019/05/01 12:38:14.037 -07:00] [INFO] [unknown:1816] ["[region 373] 1356 restored progress of 375 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:38:14.037 -07:00] [INFO] [unknown:1816] ["[region 373] 1356 restored progress of 376 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:38:14.037 -07:00] [INFO] [unknown:1816] ["[region 373] 1356 restored progress of 439 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:38:14.037 -07:00] [INFO] [unknown:1816] ["[region 373] 1356 restored progress of 1356 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:38:14.037 -07:00] [INFO] [unknown:474] ["[region 373] 1356 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 12, term: 8]"]
[2019/05/01 12:38:14.037 -07:00] [INFO] [unknown:1736] ["[region 373] 1356 [commit: 12] restored snapshot [index: 12, term: 8]"]
[2019/05/01 12:38:14.037 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=1356] [region_id=373]
[2019/05/01 12:38:14.037 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 12, truncated_state: Some(RaftTruncatedState { index: 12, term: 8, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 373, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 99, 104, 97, 114, 255, 97, 99, 116, 101, 255, 114, 95, 115, 255, 101, 116, 95, 114, 101, 255, 115, 117, 255, 108, 116, 115, 0, 0, 0, 252, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 99, 104, 97, 114, 255, 97, 99, 116, 101, 255, 114, 95, 115, 255, 101, 116, 95, 115, 101, 255, 114, 118, 255, 101, 114, 0, 0, 0, 0, 251, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 37, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 375, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 376, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 439, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1356, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1356] [region_id=373]
[2019/05/01 12:38:14.053 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 373] 1356"]
[2019/05/01 12:38:14.053 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 373, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 99, 104, 97, 114, 255, 97, 99, 116, 101, 255, 114, 95, 115, 255, 101, 116, 95, 114, 101, 255, 115, 117, 255, 108, 116, 115, 0, 0, 0, 252, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 99, 104, 97, 114, 255, 97, 99, 116, 101, 255, 114, 95, 115, 255, 101, 116, 95, 115, 101, 255, 114, 118, 255, 101, 114, 0, 0, 0, 0, 251, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 37, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 375, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 376, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 439, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1356, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1356] [region_id=373]
[2019/05/01 12:38:14.053 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=373]
[2019/05/01 12:38:14.077 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=23.001562ms] [region_id=373]
[2019/05/01 12:38:14.080 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 83], lock_version: 408089917910941700, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 83], lock_ttl: 3002, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:14.104 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 77], lock_version: 408089917924048901, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 79], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:14.214 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 84], lock_version: 408089917924048914, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 84], lock_ttl: 3066, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:14.278 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 83], lock_version: 408089917963370516, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 83], lock_ttl: 3002, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:14.345 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 83], lock_version: 408089917963370516, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 83], lock_ttl: 3002, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:14.366 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 80], lock_version: 408089917976477703, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 80], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:14.688 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 77], lock_version: 408089918068228115, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 85], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:14.981 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 1358, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=11] [term=6] [peer_id=1148] [region_id=1035]
[2019/05/01 12:38:14.981 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 9, version: 117, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=1148] [region_id=1035]
[2019/05/01 12:38:14.981 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 1035, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 98, 255, 117, 102, 102, 255, 101, 114, 95, 112, 111, 255, 111, 108, 255, 95, 102, 105, 108, 101, 110, 255, 97, 255, 109, 101, 0, 0, 0, 0, 0, 250, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 98, 255, 117, 102, 102, 255, 101, 114, 95, 112, 111, 255, 111, 108, 255, 95, 105, 110, 115, 116, 97, 255, 110, 255, 99, 101, 115, 0, 0, 0, 0, 251, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 117, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1036, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1038, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1148, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1358, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1358, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1148] [region_id=1035]
[2019/05/01 12:38:15.076 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 1038, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=12] [term=6] [peer_id=1148] [region_id=1035]
[2019/05/01 12:38:15.076 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 10, version: 117, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=1148] [region_id=1035]
[2019/05/01 12:38:15.076 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 1035, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 98, 255, 117, 102, 102, 255, 101, 114, 95, 112, 111, 255, 111, 108, 255, 95, 102, 105, 108, 101, 110, 255, 97, 255, 109, 101, 0, 0, 0, 0, 0, 250, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 98, 255, 117, 102, 102, 255, 101, 114, 95, 112, 111, 255, 111, 108, 255, 95, 105, 110, 115, 116, 97, 255, 110, 255, 99, 101, 115, 0, 0, 0, 0, 251, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 10, version: 117, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1036, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1038, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1148, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1358, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1038, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1148] [region_id=1035]
[2019/05/01 12:38:15.112 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 1356, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=13] [term=8] [peer_id=1356] [region_id=373]
[2019/05/01 12:38:15.112 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 9, version: 37, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=1356] [region_id=373]
[2019/05/01 12:38:15.112 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 373, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 99, 104, 97, 114, 255, 97, 99, 116, 101, 255, 114, 95, 115, 255, 101, 116, 95, 114, 101, 255, 115, 117, 255, 108, 116, 115, 0, 0, 0, 252, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 99, 104, 97, 114, 255, 97, 99, 116, 101, 255, 114, 95, 115, 255, 101, 116, 95, 115, 101, 255, 114, 118, 255, 101, 114, 0, 0, 0, 0, 251, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 37, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 375, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 376, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 439, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1356, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1356, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1356] [region_id=373]
[2019/05/01 12:38:15.230 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 376, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=14] [term=8] [peer_id=1356] [region_id=373]
[2019/05/01 12:38:15.246 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 10, version: 37, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=1356] [region_id=373]
[2019/05/01 12:38:15.246 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 373, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 99, 104, 97, 114, 255, 97, 99, 116, 101, 255, 114, 95, 115, 255, 101, 116, 95, 114, 101, 255, 115, 117, 255, 108, 116, 115, 0, 0, 0, 252, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 99, 104, 97, 114, 255, 97, 99, 116, 101, 255, 114, 95, 115, 255, 101, 116, 95, 115, 101, 255, 114, 118, 255, 101, 114, 0, 0, 0, 0, 251, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 10, version: 37, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 375, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 376, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 439, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1356, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 376, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1356] [region_id=373]
[2019/05/01 12:38:15.278 -07:00] [INFO] [pd.rs:558] ["try to change peer"] [peer="Peer { id: 1361, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [change_type=AddLearnerNode] [region_id=229]
[2019/05/01 12:38:15.278 -07:00] [INFO] [peer.rs:1953] ["propose conf change peer"] [change_peer=1361] [change_type=AddLearnerNode] [peer_id=941] [region_id=229]
[2019/05/01 12:38:15.329 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddLearnerNode, peer: Some(Peer { id: 1361, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=12] [term=8] [peer_id=941] [region_id=229]
[2019/05/01 12:38:15.329 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 8, version: 27, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddLearner] [peer_id=941] [region_id=229]
[2019/05/01 12:38:15.329 -07:00] [INFO] [apply.rs:1476] ["add learner successfully"] [region="Region { id: 229, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 95, 102, 255, 111, 114, 109, 255, 97, 116, 0, 0, 0, 252, 0, 0, 253], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 95, 103, 255, 114, 111, 117, 255, 112, 95, 99, 111, 109, 255, 109, 105, 255, 116, 95, 115, 121, 110, 99, 255, 95, 255, 100, 101, 108, 97, 121, 0, 0, 253, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 8, version: 27, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 230, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 232, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 941, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1361, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=941] [region_id=229]
[2019/05/01 12:38:15.345 -07:00] [INFO] [peer.rs:1318] ["notify pd with change peer region"] [region="Region { id: 229, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 95, 102, 255, 111, 114, 109, 255, 97, 116, 0, 0, 0, 252, 0, 0, 253], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 95, 103, 255, 114, 111, 117, 255, 112, 95, 99, 111, 109, 255, 109, 105, 255, 116, 95, 115, 121, 110, 99, 255, 95, 255, 100, 101, 108, 97, 121, 0, 0, 253, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 27, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 230, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 232, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 941, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1361, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=941] [region_id=229]
[2019/05/01 12:38:15.487 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 87], lock_version: 408089918277943305, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 87], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:15.675 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 84], lock_version: 408089918330372099, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 84], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:15.685 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 86], lock_version: 408089918343479303, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 86], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:15.713 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 87], lock_version: 408089918330372111, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 87], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:15.819 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 87], lock_version: 408089918356586509, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 87], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:15.875 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 91], lock_version: 408089918382800901, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 91], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:15.900 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 85], lock_version: 408089918382800906, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 87], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:15.942 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_1351_7_8_(default|lock|write).sst] [snap_key=1351_7_8]
[2019/05/01 12:38:15.948 -07:00] [INFO] [unknown:1792] ["[region 1351] 1359 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 8, term: 7]"]
[2019/05/01 12:38:15.948 -07:00] [INFO] [unknown:1816] ["[region 1351] 1359 restored progress of 1352 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:38:15.948 -07:00] [INFO] [unknown:1816] ["[region 1351] 1359 restored progress of 1353 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:38:15.948 -07:00] [INFO] [unknown:1816] ["[region 1351] 1359 restored progress of 1354 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:38:15.948 -07:00] [INFO] [unknown:1816] ["[region 1351] 1359 restored progress of 1359 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:38:15.948 -07:00] [INFO] [unknown:474] ["[region 1351] 1359 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 8, term: 7]"]
[2019/05/01 12:38:15.948 -07:00] [INFO] [unknown:1736] ["[region 1351] 1359 [commit: 8] restored snapshot [index: 8, term: 7]"]
[2019/05/01 12:38:15.948 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=1359] [region_id=1351]
[2019/05/01 12:38:15.948 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 8, truncated_state: Some(RaftTruncatedState { index: 8, term: 7, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 1351, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 109, 255, 111, 110, 105, 255, 116, 111, 114, 95, 100, 255, 105, 115, 255, 97, 98, 108, 101, 0, 0, 253, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 109, 255, 111, 110, 105, 255, 116, 111, 114, 95, 101, 255, 110, 97, 255, 98, 108, 101, 0, 0, 0, 252, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 177, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1352, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1353, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1354, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1359, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1359] [region_id=1351]
[2019/05/01 12:38:15.951 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 89], lock_version: 408089918395908110, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 89], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:15.976 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 1351] 1359"]
[2019/05/01 12:38:15.976 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 1351, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 109, 255, 111, 110, 105, 255, 116, 111, 114, 95, 100, 255, 105, 115, 255, 97, 98, 108, 101, 0, 0, 253, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 109, 255, 111, 110, 105, 255, 116, 111, 114, 95, 101, 255, 110, 97, 255, 98, 108, 101, 0, 0, 0, 252, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 177, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1352, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1353, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1354, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1359, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1359] [region_id=1351]
[2019/05/01 12:38:15.976 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=1351]
[2019/05/01 12:38:16.000 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=23.787652ms] [region_id=1351]
[2019/05/01 12:38:16.077 -07:00] [INFO] [peer_storage.rs:759] ["requesting snapshot"] [peer_id=941] [region_id=229]
[2019/05/01 12:38:16.077 -07:00] [INFO] [snap.rs:757] ["scan snapshot of one cf"] [size=0] [key_count=0] [cf=default] [snapshot=/opt/tidb/data/kv/snap/gen_229_8_12_(default|lock|write).sst] [region_id=229]
[2019/05/01 12:38:16.077 -07:00] [INFO] [snap.rs:757] ["scan snapshot of one cf"] [size=0] [key_count=0] [cf=lock] [snapshot=/opt/tidb/data/kv/snap/gen_229_8_12_(default|lock|write).sst] [region_id=229]
[2019/05/01 12:38:16.078 -07:00] [INFO] [snap.rs:757] ["scan snapshot of one cf"] [size=138] [key_count=2] [cf=write] [snapshot=/opt/tidb/data/kv/snap/gen_229_8_12_(default|lock|write).sst] [region_id=229]
[2019/05/01 12:38:16.086 -07:00] [INFO] [snap.rs:875] ["scan snapshot"] [takes=9.078971ms] [size=1375] [key_count=2] [snapshot=/opt/tidb/data/kv/snap/gen_229_8_12_(default|lock|write).sst] [region_id=229]
[2019/05/01 12:38:16.113 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=1362] [region_id=1170]
[2019/05/01 12:38:16.113 -07:00] [INFO] [unknown:719] ["[region 1170] 1362 became follower at term 0"]
[2019/05/01 12:38:16.113 -07:00] [INFO] [unknown:295] ["[region 1170] 1362 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:38:16.113 -07:00] [INFO] [unknown:719] ["[region 1170] 1362 became follower at term 1"]
[2019/05/01 12:38:16.113 -07:00] [INFO] [unknown:920] ["[region 1170] 1362 [term: 1] received a MsgHeartbeat message with higher term from 1173 [term: 6]"]
[2019/05/01 12:38:16.113 -07:00] [INFO] [unknown:719] ["[region 1170] 1362 became follower at term 6"]
[2019/05/01 12:38:16.177 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 92], lock_version: 408089918474551297, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 92], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:16.209 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 90], lock_version: 408089918448336909, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 90], lock_ttl: 3003, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:16.546 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 89], lock_version: 408089918540087306, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 90], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:16.641 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 93], lock_version: 408089918579408900, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 93], lock_ttl: 3058, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:16.878 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 94], lock_version: 408089918644944905, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 94], lock_ttl: 3003, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:16.969 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 1359, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=9] [term=7] [peer_id=1359] [region_id=1351]
[2019/05/01 12:38:16.969 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 6, version: 177, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=1359] [region_id=1351]
[2019/05/01 12:38:16.969 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 1351, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 109, 255, 111, 110, 105, 255, 116, 111, 114, 95, 100, 255, 105, 115, 255, 97, 98, 108, 101, 0, 0, 253, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 109, 255, 111, 110, 105, 255, 116, 111, 114, 95, 101, 255, 110, 97, 255, 98, 108, 101, 0, 0, 0, 252, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 177, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1352, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1353, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1354, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1359, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1359, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1359] [region_id=1351]
[2019/05/01 12:38:17.061 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 1354, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=10] [term=7] [peer_id=1359] [region_id=1351]
[2019/05/01 12:38:17.061 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 7, version: 177, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=1359] [region_id=1351]
[2019/05/01 12:38:17.061 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 1351, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 109, 255, 111, 110, 105, 255, 116, 111, 114, 95, 100, 255, 105, 115, 255, 97, 98, 108, 101, 0, 0, 253, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 109, 255, 111, 110, 105, 255, 116, 111, 114, 95, 101, 255, 110, 97, 255, 98, 108, 101, 0, 0, 0, 252, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 7, version: 177, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1352, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1353, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1354, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1359, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1354, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1359] [region_id=1351]
[2019/05/01 12:38:17.098 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 96], lock_version: 408089918671159302, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 96], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:17.107 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 96], lock_version: 408089918671159302, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 96], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:17.137 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 96], lock_version: 408089918671159302, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 96], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:17.266 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 93], lock_version: 408089918723588110, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 93], lock_ttl: 3002, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:17.423 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 97], lock_version: 408089918776016904, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 98], lock_ttl: 3002, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:17.540 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 95], lock_version: 408089918802231304, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 95], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:17.687 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 96], lock_version: 408089918802231311, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 96], lock_ttl: 3076, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:18.111 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=1363] [region_id=586]
[2019/05/01 12:38:18.111 -07:00] [INFO] [unknown:719] ["[region 586] 1363 became follower at term 0"]
[2019/05/01 12:38:18.111 -07:00] [INFO] [unknown:295] ["[region 586] 1363 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:38:18.111 -07:00] [INFO] [unknown:719] ["[region 586] 1363 became follower at term 1"]
[2019/05/01 12:38:18.111 -07:00] [INFO] [unknown:920] ["[region 586] 1363 [term: 1] received a MsgHeartbeat message with higher term from 712 [term: 7]"]
[2019/05/01 12:38:18.111 -07:00] [INFO] [unknown:719] ["[region 586] 1363 became follower at term 7"]
[2019/05/01 12:38:18.112 -07:00] [INFO] [unknown:841] ["New connected subchannel at 0x7f8582c117b0 for subchannel 0x7f8640481200"]
[2019/05/01 12:38:18.152 -07:00] [INFO] [snap.rs:389] ["sent snapshot"] [duration=40.374639ms] [size=1375] [snap_key=229_8_12] [region_id=229]
[2019/05/01 12:38:18.152 -07:00] [INFO] [peer.rs:538] ["report snapshot status"] [status=Finish] [to="Peer { id: 1361, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=941] [region_id=229]
[2019/05/01 12:38:18.166 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_1170_6_7_(default|lock|write).sst] [snap_key=1170_6_7]
[2019/05/01 12:38:18.180 -07:00] [INFO] [unknown:1792] ["[region 1170] 1362 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 7, term: 6]"]
[2019/05/01 12:38:18.180 -07:00] [INFO] [unknown:1816] ["[region 1170] 1362 restored progress of 1171 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:38:18.180 -07:00] [INFO] [unknown:1816] ["[region 1170] 1362 restored progress of 1172 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:38:18.180 -07:00] [INFO] [unknown:1816] ["[region 1170] 1362 restored progress of 1173 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:38:18.180 -07:00] [INFO] [unknown:1816] ["[region 1170] 1362 restored progress of 1362 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:38:18.180 -07:00] [INFO] [unknown:474] ["[region 1170] 1362 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 7, term: 6]"]
[2019/05/01 12:38:18.180 -07:00] [INFO] [unknown:1736] ["[region 1170] 1362 [commit: 7] restored snapshot [index: 7, term: 6]"]
[2019/05/01 12:38:18.180 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=1362] [region_id=1170]
[2019/05/01 12:38:18.180 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 7, truncated_state: Some(RaftTruncatedState { index: 7, term: 6, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 1170, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 102, 255, 108, 117, 115, 255, 104, 95, 115, 121, 110, 255, 99, 0, 255, 0, 0, 0, 0, 0, 0, 248, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 102, 255, 108, 117, 115, 255, 104, 105, 110, 103, 95, 255, 97, 118, 255, 103, 95, 108, 111, 111, 112, 255, 115, 255, 0, 0, 0, 0, 0, 0, 0, 248, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 147, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1171, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1172, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1173, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1362, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1362] [region_id=1170]
[2019/05/01 12:38:18.205 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 1170, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 102, 255, 108, 117, 115, 255, 104, 95, 115, 121, 110, 255, 99, 0, 255, 0, 0, 0, 0, 0, 0, 248, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 102, 255, 108, 117, 115, 255, 104, 105, 110, 103, 95, 255, 97, 118, 255, 103, 95, 108, 111, 111, 112, 255, 115, 255, 0, 0, 0, 0, 0, 0, 0, 248, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 147, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1171, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1172, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1173, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1362, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1362] [region_id=1170]
[2019/05/01 12:38:18.205 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 1170] 1362"]
[2019/05/01 12:38:18.205 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=1170]
[2019/05/01 12:38:18.234 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=28.566035ms] [region_id=1170]
[2019/05/01 12:38:18.520 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 96], lock_version: 408089919038160901, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 101], lock_ttl: 3067, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:18.612 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 99], lock_version: 408089919090589698, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 99], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:18.754 -07:00] [INFO] [unknown:1625] ["[region 456] 1313 [term 7] received MsgTimeoutNow from 459 and starts an election to get leadership."]
[2019/05/01 12:38:18.754 -07:00] [INFO] [unknown:739] ["[region 456] 1313 became candidate at term 8"]
[2019/05/01 12:38:18.754 -07:00] [INFO] [unknown:854] ["[region 456] 1313 received MsgRequestVoteResponse from 1313 at term 8"]
[2019/05/01 12:38:18.754 -07:00] [INFO] [unknown:828] ["[region 456] 1313 [logterm: 7, index: 10] sent MsgRequestVote request to 459 at term 8"]
[2019/05/01 12:38:18.754 -07:00] [INFO] [unknown:828] ["[region 456] 1313 [logterm: 7, index: 10] sent MsgRequestVote request to 457 at term 8"]
[2019/05/01 12:38:18.772 -07:00] [INFO] [unknown:854] ["[region 456] 1313 received MsgRequestVoteResponse from 459 at term 8"]
[2019/05/01 12:38:18.772 -07:00] [INFO] [unknown:1550] ["[region 456] 1313 [quorum:2] has received 2 MsgRequestVoteResponse votes and 0 vote rejections"]
[2019/05/01 12:38:18.772 -07:00] [INFO] [unknown:789] ["[region 456] 1313 became leader at term 8"]
[2019/05/01 12:38:19.063 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 103], lock_version: 408089919182340119, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 103], lock_ttl: 3002, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:19.112 -07:00] [INFO] [pd.rs:558] ["try to change peer"] [peer="Peer { id: 1361, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [change_type=AddNode] [region_id=229]
[2019/05/01 12:38:19.112 -07:00] [INFO] [peer.rs:1953] ["propose conf change peer"] [change_peer=1361] [change_type=AddNode] [peer_id=941] [region_id=229]
[2019/05/01 12:38:19.155 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 1361, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=13] [term=8] [peer_id=941] [region_id=229]
[2019/05/01 12:38:19.155 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 9, version: 27, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=941] [region_id=229]
[2019/05/01 12:38:19.155 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 229, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 95, 102, 255, 111, 114, 109, 255, 97, 116, 0, 0, 0, 252, 0, 0, 253], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 95, 103, 255, 114, 111, 117, 255, 112, 95, 99, 111, 109, 255, 109, 105, 255, 116, 95, 115, 121, 110, 99, 255, 95, 255, 100, 101, 108, 97, 121, 0, 0, 253, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 27, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 230, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 232, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 941, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1361, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1361, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=941] [region_id=229]
[2019/05/01 12:38:19.163 -07:00] [INFO] [peer.rs:1318] ["notify pd with change peer region"] [region="Region { id: 229, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 95, 102, 255, 111, 114, 109, 255, 97, 116, 0, 0, 0, 252, 0, 0, 253], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 95, 103, 255, 114, 111, 117, 255, 112, 95, 99, 111, 109, 255, 109, 105, 255, 116, 95, 115, 121, 110, 99, 255, 95, 255, 100, 101, 108, 97, 121, 0, 0, 253, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 10, version: 27, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 230, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 232, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 941, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1361, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=941] [region_id=229]
[2019/05/01 12:38:19.169 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 1362, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=8] [term=6] [peer_id=1362] [region_id=1170]
[2019/05/01 12:38:19.169 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 6, version: 147, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=1362] [region_id=1170]
[2019/05/01 12:38:19.169 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 1170, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 102, 255, 108, 117, 115, 255, 104, 95, 115, 121, 110, 255, 99, 0, 255, 0, 0, 0, 0, 0, 0, 248, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 102, 255, 108, 117, 115, 255, 104, 105, 110, 103, 95, 255, 97, 118, 255, 103, 95, 108, 111, 111, 112, 255, 115, 255, 0, 0, 0, 0, 0, 0, 0, 248, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 147, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1171, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1172, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1173, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1362, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1362, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1362] [region_id=1170]
[2019/05/01 12:38:19.174 -07:00] [INFO] [pd.rs:558] ["try to change peer"] [peer="Peer { id: 232, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [change_type=RemoveNode] [region_id=229]
[2019/05/01 12:38:19.181 -07:00] [INFO] [pd.rs:558] ["try to change peer"] [peer="Peer { id: 232, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [change_type=RemoveNode] [region_id=229]
[2019/05/01 12:38:19.181 -07:00] [INFO] [peer.rs:1953] ["propose conf change peer"] [change_peer=232] [change_type=RemoveNode] [peer_id=941] [region_id=229]
[2019/05/01 12:38:19.223 -07:00] [INFO] [peer.rs:1927] ["there is a pending conf change, try later"] [peer_id=941] [region_id=229]
[2019/05/01 12:38:19.258 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 232, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=14] [term=8] [peer_id=941] [region_id=229]
[2019/05/01 12:38:19.258 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 10, version: 27, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=941] [region_id=229]
[2019/05/01 12:38:19.258 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 229, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 95, 102, 255, 111, 114, 109, 255, 97, 116, 0, 0, 0, 252, 0, 0, 253], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 95, 103, 255, 114, 111, 117, 255, 112, 95, 99, 111, 109, 255, 109, 105, 255, 116, 95, 115, 121, 110, 99, 255, 95, 255, 100, 101, 108, 97, 121, 0, 0, 253, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 10, version: 27, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 230, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 232, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 941, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1361, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 232, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=941] [region_id=229]
[2019/05/01 12:38:19.284 -07:00] [INFO] [peer.rs:1318] ["notify pd with change peer region"] [region="Region { id: 229, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 95, 102, 255, 111, 114, 109, 255, 97, 116, 0, 0, 0, 252, 0, 0, 253], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 95, 103, 255, 114, 111, 117, 255, 112, 95, 99, 111, 109, 255, 109, 105, 255, 116, 95, 115, 121, 110, 99, 255, 95, 255, 100, 101, 108, 97, 121, 0, 0, 253, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 11, version: 27, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 230, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 941, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1361, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=941] [region_id=229]
[2019/05/01 12:38:19.339 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 1171, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=9] [term=6] [peer_id=1362] [region_id=1170]
[2019/05/01 12:38:19.346 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 7, version: 147, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=1362] [region_id=1170]
[2019/05/01 12:38:19.346 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 1170, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 102, 255, 108, 117, 115, 255, 104, 95, 115, 121, 110, 255, 99, 0, 255, 0, 0, 0, 0, 0, 0, 248, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 102, 255, 108, 117, 115, 255, 104, 105, 110, 103, 95, 255, 97, 118, 255, 103, 95, 108, 111, 111, 112, 255, 115, 255, 0, 0, 0, 0, 0, 0, 0, 248, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 7, version: 147, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1171, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1172, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1173, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1362, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1171, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1362] [region_id=1170]
[2019/05/01 12:38:19.533 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 106], lock_version: 408089919339626504, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 106], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:19.566 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 106], lock_version: 408089919339626504, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 106], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:19.980 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=1405] [region_id=1265]
[2019/05/01 12:38:19.980 -07:00] [INFO] [unknown:719] ["[region 1265] 1405 became follower at term 0"]
[2019/05/01 12:38:19.980 -07:00] [INFO] [unknown:295] ["[region 1265] 1405 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:38:19.980 -07:00] [INFO] [unknown:719] ["[region 1265] 1405 became follower at term 1"]
[2019/05/01 12:38:19.980 -07:00] [INFO] [unknown:920] ["[region 1265] 1405 [term: 1] received a MsgHeartbeat message with higher term from 1268 [term: 6]"]
[2019/05/01 12:38:19.980 -07:00] [INFO] [unknown:719] ["[region 1265] 1405 became follower at term 6"]
[2019/05/01 12:38:20.003 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 102], lock_version: 408089919431376904, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 106], lock_ttl: 3066, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:20.114 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_586_7_11_(default|lock|write).sst] [snap_key=586_7_11]
[2019/05/01 12:38:20.115 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=96_7_11] [peer_id=1101] [region_id=96]
[2019/05/01 12:38:20.116 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=105_8_15] [peer_id=1199] [region_id=105]
[2019/05/01 12:38:20.116 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=217_6_7] [peer_id=1215] [region_id=217]
[2019/05/01 12:38:20.116 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=245_8_12] [peer_id=1311] [region_id=245]
[2019/05/01 12:38:20.116 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=249_8_12] [peer_id=1194] [region_id=249]
[2019/05/01 12:38:20.116 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=317_6_11] [peer_id=1147] [region_id=317]
[2019/05/01 12:38:20.116 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=369_6_7] [peer_id=1260] [region_id=369]
[2019/05/01 12:38:20.116 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=373_8_12] [peer_id=1356] [region_id=373]
[2019/05/01 12:38:20.116 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=405_7_8] [peer_id=1263] [region_id=405]
[2019/05/01 12:38:20.117 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=409_7_11] [peer_id=1197] [region_id=409]
[2019/05/01 12:38:20.117 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=456_7_8] [peer_id=1313] [region_id=456]
[2019/05/01 12:38:20.117 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=472_6_7] [peer_id=1195] [region_id=472]
[2019/05/01 12:38:20.117 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=517_6_7] [peer_id=1355] [region_id=517]
[2019/05/01 12:38:20.117 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=614_6_7] [peer_id=1095] [region_id=614]
[2019/05/01 12:38:20.117 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=618_7_8] [peer_id=1308] [region_id=618]
[2019/05/01 12:38:20.117 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=696_7_8] [peer_id=1305] [region_id=696]
[2019/05/01 12:38:20.117 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=784_6_7] [peer_id=1097] [region_id=784]
[2019/05/01 12:38:20.117 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=808_6_7] [peer_id=1053] [region_id=808]
[2019/05/01 12:38:20.118 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=901_6_7] [peer_id=1145] [region_id=901]
[2019/05/01 12:38:20.118 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=913_6_7] [peer_id=1257] [region_id=913]
[2019/05/01 12:38:20.118 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=1015_6_7] [peer_id=1098] [region_id=1015]
[2019/05/01 12:38:20.118 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=1031_7_11] [peer_id=1153] [region_id=1031]
[2019/05/01 12:38:20.118 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=1035_6_7] [peer_id=1148] [region_id=1035]
[2019/05/01 12:38:20.118 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=1087_6_7] [peer_id=1102] [region_id=1087]
[2019/05/01 12:38:20.118 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=1170_6_7] [peer_id=1362] [region_id=1170]
[2019/05/01 12:38:20.118 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=1178_6_7] [peer_id=1213] [region_id=1178]
[2019/05/01 12:38:20.118 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=1182_7_8] [peer_id=1307] [region_id=1182]
[2019/05/01 12:38:20.119 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=1190_6_7] [peer_id=1306] [region_id=1190]
[2019/05/01 12:38:20.119 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=1351_7_8] [peer_id=1359] [region_id=1351]
[2019/05/01 12:38:20.126 -07:00] [INFO] [unknown:1792] ["[region 586] 1363 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 11, term: 7]"]
[2019/05/01 12:38:20.126 -07:00] [INFO] [unknown:1816] ["[region 586] 1363 restored progress of 587 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:38:20.126 -07:00] [INFO] [unknown:1816] ["[region 586] 1363 restored progress of 589 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:38:20.126 -07:00] [INFO] [unknown:1816] ["[region 586] 1363 restored progress of 712 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:38:20.126 -07:00] [INFO] [unknown:1816] ["[region 586] 1363 restored progress of 1363 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:38:20.126 -07:00] [INFO] [unknown:474] ["[region 586] 1363 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 11, term: 7]"]
[2019/05/01 12:38:20.126 -07:00] [INFO] [unknown:1736] ["[region 586] 1363 [commit: 11] restored snapshot [index: 11, term: 7]"]
[2019/05/01 12:38:20.126 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=1363] [region_id=586]
[2019/05/01 12:38:20.126 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 11, truncated_state: Some(RaftTruncatedState { index: 11, term: 7, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 586, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 101, 120, 112, 108, 255, 105, 99, 105, 116, 255, 95, 100, 101, 255, 102, 97, 117, 108, 116, 255, 115, 95, 255, 102, 111, 114, 95, 116, 105, 255, 109, 255, 101, 115, 116, 97, 109, 112, 0, 254, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 102, 108, 117, 115, 255, 104, 0, 0, 0, 252, 0, 0, 0, 252], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 77, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 587, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 589, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 712, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1363, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1363] [region_id=586]
[2019/05/01 12:38:20.141 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 586, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 101, 120, 112, 108, 255, 105, 99, 105, 116, 255, 95, 100, 101, 255, 102, 97, 117, 108, 116, 255, 115, 95, 255, 102, 111, 114, 95, 116, 105, 255, 109, 255, 101, 115, 116, 97, 109, 112, 0, 254, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 102, 108, 117, 115, 255, 104, 0, 0, 0, 252, 0, 0, 0, 252], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 77, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 587, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 589, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 712, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1363, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1363] [region_id=586]
[2019/05/01 12:38:20.141 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 586] 1363"]
[2019/05/01 12:38:20.141 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=586]
[2019/05/01 12:38:20.159 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=18.316074ms] [region_id=586]
[2019/05/01 12:38:20.440 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 109], lock_version: 408089919588663299, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 109], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:20.530 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 106], lock_version: 408089919601770505, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 106], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:20.531 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 106], lock_version: 408089919601770505, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 106], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:20.949 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 107], lock_version: 408089919719735305, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 110], lock_ttl: 3002, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:21.032 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 107], lock_version: 408089919732842510, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 113], lock_ttl: 3002, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:21.148 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 111], lock_version: 408089919772164102, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 113], lock_ttl: 3002, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:21.155 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 1363, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=12] [term=7] [peer_id=1363] [region_id=586]
[2019/05/01 12:38:21.155 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 9, version: 77, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=1363] [region_id=586]
[2019/05/01 12:38:21.155 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 586, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 101, 120, 112, 108, 255, 105, 99, 105, 116, 255, 95, 100, 101, 255, 102, 97, 117, 108, 116, 255, 115, 95, 255, 102, 111, 114, 95, 116, 105, 255, 109, 255, 101, 115, 116, 97, 109, 112, 0, 254, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 102, 108, 117, 115, 255, 104, 0, 0, 0, 252, 0, 0, 0, 252], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 77, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 587, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 589, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 712, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1363, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1363, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1363] [region_id=586]
[2019/05/01 12:38:21.200 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 587, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=13] [term=7] [peer_id=1363] [region_id=586]
[2019/05/01 12:38:21.200 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 10, version: 77, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=1363] [region_id=586]
[2019/05/01 12:38:21.200 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 586, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 101, 120, 112, 108, 255, 105, 99, 105, 116, 255, 95, 100, 101, 255, 102, 97, 117, 108, 116, 255, 115, 95, 255, 102, 111, 114, 95, 116, 105, 255, 109, 255, 101, 115, 116, 97, 109, 112, 0, 254, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 102, 108, 117, 115, 255, 104, 0, 0, 0, 252, 0, 0, 0, 252], region_epoch: Some(RegionEpoch { conf_ver: 10, version: 77, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 587, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 589, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 712, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1363, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 587, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1363] [region_id=586]
[2019/05/01 12:38:21.203 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 111], lock_version: 408089919772164102, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 113], lock_ttl: 3002, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:21.208 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=1406] [region_id=1083]
[2019/05/01 12:38:21.208 -07:00] [INFO] [unknown:719] ["[region 1083] 1406 became follower at term 0"]
[2019/05/01 12:38:21.208 -07:00] [INFO] [unknown:295] ["[region 1083] 1406 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:38:21.208 -07:00] [INFO] [unknown:719] ["[region 1083] 1406 became follower at term 1"]
[2019/05/01 12:38:21.208 -07:00] [INFO] [unknown:920] ["[region 1083] 1406 [term: 1] received a MsgHeartbeat message with higher term from 1085 [term: 7]"]
[2019/05/01 12:38:21.208 -07:00] [INFO] [unknown:719] ["[region 1083] 1406 became follower at term 7"]
[2019/05/01 12:38:21.211 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 107], lock_version: 408089919759056901, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 108], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:21.341 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 111], lock_version: 408089919811485705, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 111], lock_ttl: 3002, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:21.350 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 111], lock_version: 408089919811485705, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 111], lock_ttl: 3002, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:21.395 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 111], lock_version: 408089919811485705, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 111], lock_ttl: 3002, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:21.483 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 112], lock_version: 408089919785271301, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 112], lock_ttl: 3207, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:21.983 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_1265_6_7_(default|lock|write).sst] [snap_key=1265_6_7]
[2019/05/01 12:38:21.996 -07:00] [INFO] [unknown:1792] ["[region 1265] 1405 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 7, term: 6]"]
[2019/05/01 12:38:21.996 -07:00] [INFO] [unknown:1816] ["[region 1265] 1405 restored progress of 1266 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:38:21.996 -07:00] [INFO] [unknown:1816] ["[region 1265] 1405 restored progress of 1267 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:38:21.996 -07:00] [INFO] [unknown:1816] ["[region 1265] 1405 restored progress of 1268 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:38:21.996 -07:00] [INFO] [unknown:1816] ["[region 1265] 1405 restored progress of 1405 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:38:21.997 -07:00] [INFO] [unknown:474] ["[region 1265] 1405 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 7, term: 6]"]
[2019/05/01 12:38:21.997 -07:00] [INFO] [unknown:1736] ["[region 1265] 1405 [commit: 7] restored snapshot [index: 7, term: 6]"]
[2019/05/01 12:38:21.997 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=1405] [region_id=1265]
[2019/05/01 12:38:21.997 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 7, truncated_state: Some(RaftTruncatedState { index: 7, term: 6, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 1265, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 105, 255, 111, 95, 99, 255, 97, 112, 97, 99, 105, 255, 116, 121, 255, 0, 0, 0, 0, 0, 0, 249, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 105, 255, 111, 95, 99, 255, 97, 112, 97, 99, 105, 255, 116, 121, 255, 95, 109, 97, 120, 0, 0, 253, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 167, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1266, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1267, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1268, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1405, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1405] [region_id=1265]
[2019/05/01 12:38:22.013 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 1265, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 105, 255, 111, 95, 99, 255, 97, 112, 97, 99, 105, 255, 116, 121, 255, 0, 0, 0, 0, 0, 0, 249, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 105, 255, 111, 95, 99, 255, 97, 112, 97, 99, 105, 255, 116, 121, 255, 95, 109, 97, 120, 0, 0, 253, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 167, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1266, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1267, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1268, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1405, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1405] [region_id=1265]
[2019/05/01 12:38:22.013 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 1265] 1405"]
[2019/05/01 12:38:22.013 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=1265]
[2019/05/01 12:38:22.028 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=14.887597ms] [region_id=1265]
[2019/05/01 12:38:22.065 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 112], lock_version: 408089919955664898, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 114], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:22.171 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 116], lock_version: 408089920034308102, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 118], lock_ttl: 3002, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:22.253 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 115], lock_version: 408089920047415307, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 117], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:22.939 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 115], lock_version: 408089920165380103, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 117], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:23.034 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 115], lock_version: 408089920165380103, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 117], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:23.038 -07:00] [INFO] [unknown:1625] ["[region 1170] 1362 [term 6] received MsgTimeoutNow from 1173 and starts an election to get leadership."]
[2019/05/01 12:38:23.038 -07:00] [INFO] [unknown:739] ["[region 1170] 1362 became candidate at term 7"]
[2019/05/01 12:38:23.038 -07:00] [INFO] [unknown:854] ["[region 1170] 1362 received MsgRequestVoteResponse from 1362 at term 7"]
[2019/05/01 12:38:23.038 -07:00] [INFO] [unknown:828] ["[region 1170] 1362 [logterm: 6, index: 9] sent MsgRequestVote request to 1172 at term 7"]
[2019/05/01 12:38:23.038 -07:00] [INFO] [unknown:828] ["[region 1170] 1362 [logterm: 6, index: 9] sent MsgRequestVote request to 1173 at term 7"]
[2019/05/01 12:38:23.056 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 1405, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=8] [term=6] [peer_id=1405] [region_id=1265]
[2019/05/01 12:38:23.056 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 6, version: 167, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=1405] [region_id=1265]
[2019/05/01 12:38:23.057 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 1265, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 105, 255, 111, 95, 99, 255, 97, 112, 97, 99, 105, 255, 116, 121, 255, 0, 0, 0, 0, 0, 0, 249, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 105, 255, 111, 95, 99, 255, 97, 112, 97, 99, 105, 255, 116, 121, 255, 95, 109, 97, 120, 0, 0, 253, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 167, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1266, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1267, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1268, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1405, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1405, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1405] [region_id=1265]
[2019/05/01 12:38:23.104 -07:00] [INFO] [unknown:854] ["[region 1170] 1362 received MsgRequestVoteResponse from 1173 at term 7"]
[2019/05/01 12:38:23.104 -07:00] [INFO] [unknown:1550] ["[region 1170] 1362 [quorum:2] has received 2 MsgRequestVoteResponse votes and 0 vote rejections"]
[2019/05/01 12:38:23.104 -07:00] [INFO] [unknown:789] ["[region 1170] 1362 became leader at term 7"]
[2019/05/01 12:38:23.162 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 1266, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=9] [term=6] [peer_id=1405] [region_id=1265]
[2019/05/01 12:38:23.162 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 7, version: 167, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=1405] [region_id=1265]
[2019/05/01 12:38:23.162 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 1265, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 105, 255, 111, 95, 99, 255, 97, 112, 97, 99, 105, 255, 116, 121, 255, 0, 0, 0, 0, 0, 0, 249, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 105, 255, 111, 95, 99, 255, 97, 112, 97, 99, 105, 255, 116, 121, 255, 95, 109, 97, 120, 0, 0, 253, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 7, version: 167, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1266, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1267, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1268, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1405, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1266, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1405] [region_id=1265]
[2019/05/01 12:38:23.211 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_1083_7_8_(default|lock|write).sst] [snap_key=1083_7_8]
[2019/05/01 12:38:23.238 -07:00] [INFO] [unknown:1792] ["[region 1083] 1406 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 8, term: 7]"]
[2019/05/01 12:38:23.243 -07:00] [INFO] [unknown:1816] ["[region 1083] 1406 restored progress of 1084 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:38:23.243 -07:00] [INFO] [unknown:1816] ["[region 1083] 1406 restored progress of 1085 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:38:23.243 -07:00] [INFO] [unknown:1816] ["[region 1083] 1406 restored progress of 1086 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:38:23.243 -07:00] [INFO] [unknown:1816] ["[region 1083] 1406 restored progress of 1406 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:38:23.243 -07:00] [INFO] [unknown:474] ["[region 1083] 1406 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 8, term: 7]"]
[2019/05/01 12:38:23.243 -07:00] [INFO] [unknown:1736] ["[region 1083] 1406 [commit: 8] restored snapshot [index: 8, term: 7]"]
[2019/05/01 12:38:23.243 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=1406] [region_id=1083]
[2019/05/01 12:38:23.243 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 8, truncated_state: Some(RaftTruncatedState { index: 8, term: 7, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 1083, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 99, 255, 111, 109, 109, 255, 105, 116, 95, 99, 111, 255, 110, 99, 255, 117, 114, 114, 101, 110, 99, 255, 121, 255, 0, 0, 0, 0, 0, 0, 0, 248, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 99, 255, 111, 109, 112, 255, 114, 101, 115, 115, 105, 255, 111, 110, 255, 95, 102, 97, 105, 108, 117, 255, 114, 255, 101, 95, 116, 104, 114, 101, 115, 255, 255, 104, 111, 108, 100, 95, 112, 99, 116, 255, 255, 0, 0, 0, 0, 0, 0, 0, 255, 0, 247, 0, 0, 0, 0, 0, 0, 249], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 127, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1084, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1085, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1086, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1406, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1406] [region_id=1083]
[2019/05/01 12:38:23.293 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 1083] 1406"]
[2019/05/01 12:38:23.293 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 1083, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 99, 255, 111, 109, 109, 255, 105, 116, 95, 99, 111, 255, 110, 99, 255, 117, 114, 114, 101, 110, 99, 255, 121, 255, 0, 0, 0, 0, 0, 0, 0, 248, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 99, 255, 111, 109, 112, 255, 114, 101, 115, 115, 105, 255, 111, 110, 255, 95, 102, 97, 105, 108, 117, 255, 114, 255, 101, 95, 116, 104, 114, 101, 115, 255, 255, 104, 111, 108, 100, 95, 112, 99, 116, 255, 255, 0, 0, 0, 0, 0, 0, 0, 255, 0, 247, 0, 0, 0, 0, 0, 0, 249], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 127, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1084, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1085, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1086, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1406, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1406] [region_id=1083]
[2019/05/01 12:38:23.293 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=1083]
[2019/05/01 12:38:23.339 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=45.712975ms] [region_id=1083]
[2019/05/01 12:38:23.434 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 118], lock_version: 408089920204701698, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 120], lock_ttl: 3086, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:23.982 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 121], lock_version: 408089920479952906, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 121], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:24.077 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 121], lock_version: 408089920479952906, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 121], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:24.248 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 1406, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=9] [term=7] [peer_id=1406] [region_id=1083]
[2019/05/01 12:38:24.248 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 6, version: 127, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=1406] [region_id=1083]
[2019/05/01 12:38:24.248 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 1083, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 99, 255, 111, 109, 109, 255, 105, 116, 95, 99, 111, 255, 110, 99, 255, 117, 114, 114, 101, 110, 99, 255, 121, 255, 0, 0, 0, 0, 0, 0, 0, 248, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 99, 255, 111, 109, 112, 255, 114, 101, 115, 115, 105, 255, 111, 110, 255, 95, 102, 97, 105, 108, 117, 255, 114, 255, 101, 95, 116, 104, 114, 101, 115, 255, 255, 104, 111, 108, 100, 95, 112, 99, 116, 255, 255, 0, 0, 0, 0, 0, 0, 0, 255, 0, 247, 0, 0, 0, 0, 0, 0, 249], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 127, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1084, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1085, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1086, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1406, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1406, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1406] [region_id=1083]
[2019/05/01 12:38:24.254 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=1408] [region_id=594]
[2019/05/01 12:38:24.260 -07:00] [INFO] [unknown:719] ["[region 594] 1408 became follower at term 0"]
[2019/05/01 12:38:24.260 -07:00] [INFO] [unknown:295] ["[region 594] 1408 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:38:24.260 -07:00] [INFO] [unknown:719] ["[region 594] 1408 became follower at term 1"]
[2019/05/01 12:38:24.260 -07:00] [INFO] [unknown:920] ["[region 594] 1408 [term: 1] received a MsgHeartbeat message with higher term from 595 [term: 6]"]
[2019/05/01 12:38:24.260 -07:00] [INFO] [unknown:719] ["[region 594] 1408 became follower at term 6"]
[2019/05/01 12:38:24.314 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 1084, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=10] [term=7] [peer_id=1406] [region_id=1083]
[2019/05/01 12:38:24.314 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 7, version: 127, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=1406] [region_id=1083]
[2019/05/01 12:38:24.314 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 1083, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 99, 255, 111, 109, 109, 255, 105, 116, 95, 99, 111, 255, 110, 99, 255, 117, 114, 114, 101, 110, 99, 255, 121, 255, 0, 0, 0, 0, 0, 0, 0, 248, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 99, 255, 111, 109, 112, 255, 114, 101, 115, 115, 105, 255, 111, 110, 255, 95, 102, 97, 105, 108, 117, 255, 114, 255, 101, 95, 116, 104, 114, 101, 115, 255, 255, 104, 111, 108, 100, 95, 112, 99, 116, 255, 255, 0, 0, 0, 0, 0, 0, 0, 255, 0, 247, 0, 0, 0, 0, 0, 0, 249], region_epoch: Some(RegionEpoch { conf_ver: 7, version: 127, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1084, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1085, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1086, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1406, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1084, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1406] [region_id=1083]
[2019/05/01 12:38:24.725 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 123], lock_version: 408089920689668097, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 123], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:24.749 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 123], lock_version: 408089920689668097, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 123], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:24.776 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 123], lock_version: 408089920689668097, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 123], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:25.046 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 122], lock_version: 408089920768311305, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 126], lock_ttl: 3002, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:25.072 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 122], lock_version: 408089920768311305, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 122], lock_ttl: 3002, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:25.128 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 124], lock_version: 408089920807632912, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 124], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:25.139 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 126], lock_version: 408089920807632919, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 126], lock_ttl: 3003, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:25.258 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 125], lock_version: 408089920807632911, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 125], lock_ttl: 3102, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:25.293 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 122], lock_version: 408089920820740104, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 122], lock_ttl: 3057, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:25.547 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 126], lock_version: 408089920912490504, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 126], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:25.586 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 122], lock_version: 408089920912490507, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 122], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:25.842 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 127], lock_version: 408089920991133709, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 127], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:25.987 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=1411] [region_id=1347]
[2019/05/01 12:38:25.987 -07:00] [INFO] [unknown:719] ["[region 1347] 1411 became follower at term 0"]
[2019/05/01 12:38:25.987 -07:00] [INFO] [unknown:295] ["[region 1347] 1411 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:38:25.987 -07:00] [INFO] [unknown:719] ["[region 1347] 1411 became follower at term 1"]
[2019/05/01 12:38:25.987 -07:00] [INFO] [unknown:920] ["[region 1347] 1411 [term: 1] received a MsgHeartbeat message with higher term from 1350 [term: 6]"]
[2019/05/01 12:38:25.987 -07:00] [INFO] [unknown:719] ["[region 1347] 1411 became follower at term 6"]
[2019/05/01 12:38:26.257 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_594_6_7_(default|lock|write).sst] [snap_key=594_6_7]
[2019/05/01 12:38:26.266 -07:00] [INFO] [unknown:1792] ["[region 594] 1408 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 7, term: 6]"]
[2019/05/01 12:38:26.266 -07:00] [INFO] [unknown:1816] ["[region 594] 1408 restored progress of 595 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:38:26.266 -07:00] [INFO] [unknown:1816] ["[region 594] 1408 restored progress of 596 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:38:26.266 -07:00] [INFO] [unknown:1816] ["[region 594] 1408 restored progress of 597 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:38:26.266 -07:00] [INFO] [unknown:1816] ["[region 594] 1408 restored progress of 1408 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:38:26.266 -07:00] [INFO] [unknown:474] ["[region 594] 1408 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 7, term: 6]"]
[2019/05/01 12:38:26.266 -07:00] [INFO] [unknown:1736] ["[region 594] 1408 [commit: 7] restored snapshot [index: 7, term: 6]"]
[2019/05/01 12:38:26.266 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=1408] [region_id=594]
[2019/05/01 12:38:26.266 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 7, truncated_state: Some(RaftTruncatedState { index: 7, term: 6, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 594, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 102, 108, 117, 115, 255, 104, 95, 116, 105, 255, 109, 101, 0, 255, 0, 0, 0, 0, 0, 249, 0, 0, 253], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 102, 111, 114, 101, 255, 105, 103, 110, 95, 255, 107, 101, 121, 255, 95, 99, 104, 101, 99, 255, 107, 115, 255, 0, 0, 0, 0, 0, 0, 249, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 77, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 595, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 596, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 597, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1408, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1408] [region_id=594]
[2019/05/01 12:38:26.282 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 594] 1408"]
[2019/05/01 12:38:26.282 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=594]
[2019/05/01 12:38:26.283 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 594, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 102, 108, 117, 115, 255, 104, 95, 116, 105, 255, 109, 101, 0, 255, 0, 0, 0, 0, 0, 249, 0, 0, 253], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 102, 111, 114, 101, 255, 105, 103, 110, 95, 255, 107, 101, 121, 255, 95, 99, 104, 101, 99, 255, 107, 115, 255, 0, 0, 0, 0, 0, 0, 249, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 77, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 595, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 596, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 597, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1408, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1408] [region_id=594]
[2019/05/01 12:38:26.299 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=16.385254ms] [region_id=594]
[2019/05/01 12:38:26.486 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 129], lock_version: 408089921161527302, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 129], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:26.546 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 129], lock_version: 408089921161527302, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 129], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:26.747 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 131], lock_version: 408089921240170498, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 131], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:26.828 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 131], lock_version: 408089921240170498, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 131], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:26.855 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 132], lock_version: 408089921266384902, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 132], lock_ttl: 3002, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:27.067 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 133], lock_version: 408089921305706500, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 133], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:27.139 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 135], lock_version: 408089921331920898, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 135], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:27.142 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 135], lock_version: 408089921331920898, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 135], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:27.258 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 131], lock_version: 408089921345028110, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 134], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:27.296 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 1408, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=8] [term=6] [peer_id=1408] [region_id=594]
[2019/05/01 12:38:27.296 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 6, version: 77, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=1408] [region_id=594]
[2019/05/01 12:38:27.296 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 594, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 102, 108, 117, 115, 255, 104, 95, 116, 105, 255, 109, 101, 0, 255, 0, 0, 0, 0, 0, 249, 0, 0, 253], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 102, 111, 114, 101, 255, 105, 103, 110, 95, 255, 107, 101, 121, 255, 95, 99, 104, 101, 99, 255, 107, 115, 255, 0, 0, 0, 0, 0, 0, 249, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 77, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 595, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 596, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 597, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1408, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1408, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1408] [region_id=594]
[2019/05/01 12:38:27.306 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 136], lock_version: 408089921358135300, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 136], lock_ttl: 3094, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:27.343 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 596, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=9] [term=6] [peer_id=1408] [region_id=594]
[2019/05/01 12:38:27.343 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 7, version: 77, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=1408] [region_id=594]
[2019/05/01 12:38:27.343 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 594, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 102, 108, 117, 115, 255, 104, 95, 116, 105, 255, 109, 101, 0, 255, 0, 0, 0, 0, 0, 249, 0, 0, 253], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 102, 111, 114, 101, 255, 105, 103, 110, 95, 255, 107, 101, 121, 255, 95, 99, 104, 101, 99, 255, 107, 115, 255, 0, 0, 0, 0, 0, 0, 249, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 7, version: 77, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 595, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 596, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 597, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1408, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 596, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1408] [region_id=594]
[2019/05/01 12:38:27.483 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 132], lock_version: 408089921397456904, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 132], lock_ttl: 3095, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:27.661 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 135], lock_version: 408089921476100107, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 136], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:28.022 -07:00] [INFO] [unknown:1625] ["[region 1265] 1405 [term 6] received MsgTimeoutNow from 1268 and starts an election to get leadership."]
[2019/05/01 12:38:28.022 -07:00] [INFO] [unknown:739] ["[region 1265] 1405 became candidate at term 7"]
[2019/05/01 12:38:28.022 -07:00] [INFO] [unknown:854] ["[region 1265] 1405 received MsgRequestVoteResponse from 1405 at term 7"]
[2019/05/01 12:38:28.022 -07:00] [INFO] [unknown:828] ["[region 1265] 1405 [logterm: 6, index: 9] sent MsgRequestVote request to 1268 at term 7"]
[2019/05/01 12:38:28.022 -07:00] [INFO] [unknown:828] ["[region 1265] 1405 [logterm: 6, index: 9] sent MsgRequestVote request to 1267 at term 7"]
[2019/05/01 12:38:28.054 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_1347_6_7_(default|lock|write).sst] [snap_key=1347_6_7]
[2019/05/01 12:38:28.082 -07:00] [INFO] [unknown:1792] ["[region 1347] 1411 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 7, term: 6]"]
[2019/05/01 12:38:28.082 -07:00] [INFO] [unknown:1816] ["[region 1347] 1411 restored progress of 1348 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:38:28.082 -07:00] [INFO] [unknown:1816] ["[region 1347] 1411 restored progress of 1349 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:38:28.083 -07:00] [INFO] [unknown:1816] ["[region 1347] 1411 restored progress of 1350 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:38:28.083 -07:00] [INFO] [unknown:1816] ["[region 1347] 1411 restored progress of 1411 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:38:28.083 -07:00] [INFO] [unknown:474] ["[region 1347] 1411 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 7, term: 6]"]
[2019/05/01 12:38:28.083 -07:00] [INFO] [unknown:1736] ["[region 1347] 1411 [commit: 7] restored snapshot [index: 7, term: 6]"]
[2019/05/01 12:38:28.083 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=1411] [region_id=1347]
[2019/05/01 12:38:28.083 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 7, truncated_state: Some(RaftTruncatedState { index: 7, term: 6, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 1347, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 109, 255, 105, 114, 114, 255, 111, 114, 101, 100, 95, 255, 108, 111, 255, 103, 95, 103, 114, 111, 117, 255, 112, 255, 115, 0, 0, 0, 0, 0, 0, 249, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 109, 255, 111, 110, 105, 255, 116, 111, 114, 95, 100, 255, 105, 115, 255, 97, 98, 108, 101, 0, 0, 253, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 177, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1348, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1349, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1350, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1411, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1411] [region_id=1347]
[2019/05/01 12:38:28.104 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 134], lock_version: 408089921541636106, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 134], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:28.112 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 134], lock_version: 408089921541636106, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 134], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:28.116 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 1347] 1411"]
[2019/05/01 12:38:28.116 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 1347, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 109, 255, 105, 114, 114, 255, 111, 114, 101, 100, 95, 255, 108, 111, 255, 103, 95, 103, 114, 111, 117, 255, 112, 255, 115, 0, 0, 0, 0, 0, 0, 249, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 109, 255, 111, 110, 105, 255, 116, 111, 114, 95, 100, 255, 105, 115, 255, 97, 98, 108, 101, 0, 0, 253, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 177, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1348, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1349, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1350, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1411, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1411] [region_id=1347]
[2019/05/01 12:38:28.116 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=1347]
[2019/05/01 12:38:28.144 -07:00] [INFO] [unknown:854] ["[region 1265] 1405 received MsgRequestVoteResponse from 1267 at term 7"]
[2019/05/01 12:38:28.144 -07:00] [INFO] [unknown:1550] ["[region 1265] 1405 [quorum:2] has received 2 MsgRequestVoteResponse votes and 0 vote rejections"]
[2019/05/01 12:38:28.144 -07:00] [INFO] [unknown:789] ["[region 1265] 1405 became leader at term 7"]
[2019/05/01 12:38:28.162 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 134], lock_version: 408089921541636106, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 134], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:28.192 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 134], lock_version: 408089921541636106, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 134], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:28.200 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=83.563947ms] [region_id=1347]
[2019/05/01 12:38:28.265 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 134], lock_version: 408089921541636106, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 134], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:28.510 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 140], lock_version: 408089921659600911, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 140], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:28.585 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 135], lock_version: 408089921712029711, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 137], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:28.742 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 139], lock_version: 408089921751351299, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 139], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:28.744 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 139], lock_version: 408089921751351299, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 139], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:28.807 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 139], lock_version: 408089921777565711, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 139], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:28.993 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 139], lock_version: 408089921790672907, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 139], lock_ttl: 3091, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:29.057 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 1411, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=8] [term=6] [peer_id=1411] [region_id=1347]
[2019/05/01 12:38:29.057 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 6, version: 177, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=1411] [region_id=1347]
[2019/05/01 12:38:29.057 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 1347, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 109, 255, 105, 114, 114, 255, 111, 114, 101, 100, 95, 255, 108, 111, 255, 103, 95, 103, 114, 111, 117, 255, 112, 255, 115, 0, 0, 0, 0, 0, 0, 249, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 109, 255, 111, 110, 105, 255, 116, 111, 114, 95, 100, 255, 105, 115, 255, 97, 98, 108, 101, 0, 0, 253, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 177, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1348, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1349, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1350, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1411, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1411, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1411] [region_id=1347]
[2019/05/01 12:38:29.091 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 139], lock_version: 408089921790672907, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 139], lock_ttl: 3091, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:29.138 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 1349, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=9] [term=6] [peer_id=1411] [region_id=1347]
[2019/05/01 12:38:29.146 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 7, version: 177, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=1411] [region_id=1347]
[2019/05/01 12:38:29.146 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 1347, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 109, 255, 105, 114, 114, 255, 111, 114, 101, 100, 95, 255, 108, 111, 255, 103, 95, 103, 114, 111, 117, 255, 112, 255, 115, 0, 0, 0, 0, 0, 0, 249, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 109, 255, 111, 110, 105, 255, 116, 111, 114, 95, 100, 255, 105, 115, 255, 97, 98, 108, 101, 0, 0, 253, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 7, version: 177, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1348, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1349, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1350, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1411, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1349, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1411] [region_id=1347]
[2019/05/01 12:38:29.376 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 141], lock_version: 408089921843101702, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 141], lock_ttl: 3281, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:29.429 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddLearnerNode, peer: Some(Peer { id: 1455, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=10] [term=6] [peer_id=1145] [region_id=901]
[2019/05/01 12:38:29.429 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 8, version: 107, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddLearner] [peer_id=1145] [region_id=901]
[2019/05/01 12:38:29.429 -07:00] [INFO] [apply.rs:1476] ["add learner successfully"] [region="Region { id: 901, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 105, 116, 255, 95, 115, 108, 97, 255, 118, 101, 0, 255, 0, 0, 0, 0, 0, 249, 0, 0, 253], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 97, 255, 100, 97, 112, 255, 116, 105, 118, 101, 95, 255, 102, 108, 255, 117, 115, 104, 105, 110, 103, 255, 0, 255, 0, 0, 0, 0, 0, 0, 0, 247, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 8, version: 107, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 902, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 904, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1145, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1455, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1145] [region_id=901]
[2019/05/01 12:38:29.644 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 144], lock_version: 408089921947959314, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 144], lock_ttl: 3075, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:29.769 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 145], lock_version: 408089922026602505, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 145], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:29.859 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=1453] [region_id=1023]
[2019/05/01 12:38:29.859 -07:00] [INFO] [unknown:719] ["[region 1023] 1453 became follower at term 0"]
[2019/05/01 12:38:29.859 -07:00] [INFO] [unknown:295] ["[region 1023] 1453 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:38:29.859 -07:00] [INFO] [unknown:719] ["[region 1023] 1453 became follower at term 1"]
[2019/05/01 12:38:29.859 -07:00] [INFO] [unknown:920] ["[region 1023] 1453 [term: 1] received a MsgHeartbeat message with higher term from 1024 [term: 6]"]
[2019/05/01 12:38:29.859 -07:00] [INFO] [unknown:719] ["[region 1023] 1453 became follower at term 6"]
[2019/05/01 12:38:29.918 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 141], lock_version: 408089922052816902, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 141], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:30.011 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=1454] [region_id=341]
[2019/05/01 12:38:30.011 -07:00] [INFO] [unknown:719] ["[region 341] 1454 became follower at term 0"]
[2019/05/01 12:38:30.011 -07:00] [INFO] [unknown:295] ["[region 341] 1454 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:38:30.011 -07:00] [INFO] [unknown:719] ["[region 341] 1454 became follower at term 1"]
[2019/05/01 12:38:30.011 -07:00] [INFO] [unknown:920] ["[region 341] 1454 [term: 1] received a MsgHeartbeat message with higher term from 343 [term: 7]"]
[2019/05/01 12:38:30.011 -07:00] [INFO] [unknown:719] ["[region 341] 1454 became follower at term 7"]
[2019/05/01 12:38:30.068 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 143], lock_version: 408089922079031303, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 143], lock_ttl: 3067, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:30.437 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 142], lock_version: 408089922196996102, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 143], lock_ttl: 3003, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:30.517 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 146], lock_version: 408089922223210501, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 146], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:30.632 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 146], lock_version: 408089922249424900, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 149], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:30.632 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 146], lock_version: 408089922249424900, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 146], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:30.804 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 146], lock_version: 408089922301853709, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 146], lock_ttl: 3002, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:30.873 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 145], lock_version: 408089922301853702, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 145], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:31.143 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 147], lock_version: 408089922354282510, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 147], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:31.862 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_1023_6_7_(default|lock|write).sst] [snap_key=1023_6_7]
[2019/05/01 12:38:31.877 -07:00] [INFO] [unknown:1792] ["[region 1023] 1453 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 7, term: 6]"]
[2019/05/01 12:38:31.877 -07:00] [INFO] [unknown:1816] ["[region 1023] 1453 restored progress of 1024 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:38:31.877 -07:00] [INFO] [unknown:1816] ["[region 1023] 1453 restored progress of 1025 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:38:31.877 -07:00] [INFO] [unknown:1816] ["[region 1023] 1453 restored progress of 1026 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:38:31.877 -07:00] [INFO] [unknown:1816] ["[region 1023] 1453 restored progress of 1453 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:38:31.877 -07:00] [INFO] [unknown:474] ["[region 1023] 1453 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 7, term: 6]"]
[2019/05/01 12:38:31.877 -07:00] [INFO] [unknown:1736] ["[region 1023] 1453 [commit: 7] restored snapshot [index: 7, term: 6]"]
[2019/05/01 12:38:31.877 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=1453] [region_id=1023]
[2019/05/01 12:38:31.877 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 7, truncated_state: Some(RaftTruncatedState { index: 7, term: 6, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 1023, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 98, 255, 117, 102, 102, 255, 101, 114, 95, 112, 111, 255, 111, 108, 255, 95, 100, 117, 109, 112, 95, 255, 97, 255, 116, 95, 115, 104, 117, 116, 100, 255, 255, 111, 119, 110, 0, 0, 0, 0, 0, 255, 250, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 98, 255, 117, 102, 102, 255, 101, 114, 95, 112, 111, 255, 111, 108, 255, 95, 100, 117, 109, 112, 95, 255, 110, 255, 111, 119, 0, 0, 0, 0, 0, 250, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 117, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1024, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1025, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1026, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1453, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1453] [region_id=1023]
[2019/05/01 12:38:31.914 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 1023] 1453"]
[2019/05/01 12:38:31.914 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 1023, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 98, 255, 117, 102, 102, 255, 101, 114, 95, 112, 111, 255, 111, 108, 255, 95, 100, 117, 109, 112, 95, 255, 97, 255, 116, 95, 115, 104, 117, 116, 100, 255, 255, 111, 119, 110, 0, 0, 0, 0, 0, 255, 250, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 98, 255, 117, 102, 102, 255, 101, 114, 95, 112, 111, 255, 111, 108, 255, 95, 100, 117, 109, 112, 95, 255, 110, 255, 111, 119, 0, 0, 0, 0, 0, 250, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 117, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1024, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1025, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1026, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1453, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1453] [region_id=1023]
[2019/05/01 12:38:31.914 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=1023]
[2019/05/01 12:38:31.925 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 150], lock_version: 408089922524676100, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 150], lock_ttl: 3148, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:31.938 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=23.76104ms] [region_id=1023]
[2019/05/01 12:38:32.014 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_341_7_11_(default|lock|write).sst] [snap_key=341_7_11]
[2019/05/01 12:38:32.020 -07:00] [INFO] [unknown:1792] ["[region 341] 1454 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 11, term: 7]"]
[2019/05/01 12:38:32.020 -07:00] [INFO] [unknown:1816] ["[region 341] 1454 restored progress of 343 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:38:32.020 -07:00] [INFO] [unknown:1816] ["[region 341] 1454 restored progress of 344 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:38:32.020 -07:00] [INFO] [unknown:1816] ["[region 341] 1454 restored progress of 1008 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:38:32.020 -07:00] [INFO] [unknown:1816] ["[region 341] 1454 restored progress of 1454 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:38:32.020 -07:00] [INFO] [unknown:474] ["[region 341] 1454 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 11, term: 7]"]
[2019/05/01 12:38:32.020 -07:00] [INFO] [unknown:1736] ["[region 341] 1454 [commit: 11] restored snapshot [index: 11, term: 7]"]
[2019/05/01 12:38:32.020 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=1454] [region_id=341]
[2019/05/01 12:38:32.020 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 11, truncated_state: Some(RaftTruncatedState { index: 11, term: 7, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 341, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 95, 115, 255, 116, 109, 116, 255, 95, 99, 97, 99, 104, 255, 101, 95, 255, 115, 105, 122, 101, 0, 0, 253, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 103, 105, 255, 110, 103, 95, 255, 105, 109, 112, 111, 115, 255, 115, 105, 255, 98, 108, 101, 95, 109, 111, 255, 100, 255, 101, 0, 0, 0, 0, 0, 0, 249, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 37, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 343, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 344, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1008, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1454, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1454] [region_id=341]
[2019/05/01 12:38:32.036 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 341] 1454"]
[2019/05/01 12:38:32.036 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 341, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 95, 115, 255, 116, 109, 116, 255, 95, 99, 97, 99, 104, 255, 101, 95, 255, 115, 105, 122, 101, 0, 0, 253, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 103, 105, 255, 110, 103, 95, 255, 105, 109, 112, 111, 115, 255, 115, 105, 255, 98, 108, 101, 95, 109, 111, 255, 100, 255, 101, 0, 0, 0, 0, 0, 0, 249, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 37, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 343, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 344, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1008, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1454, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1454] [region_id=341]
[2019/05/01 12:38:32.036 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=341]
[2019/05/01 12:38:32.053 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=16.976664ms] [region_id=341]
[2019/05/01 12:38:32.203 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 150], lock_version: 408089922668855304, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 153], lock_ttl: 3002, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:32.268 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 150], lock_version: 408089922668855304, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 153], lock_ttl: 3002, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:32.303 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 150], lock_version: 408089922668855304, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 153], lock_ttl: 3002, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:32.446 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 151], lock_version: 408089922695069699, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 151], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:32.560 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 154], lock_version: 408089922747498514, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 154], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:32.904 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 1453, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=8] [term=6] [peer_id=1453] [region_id=1023]
[2019/05/01 12:38:32.904 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 6, version: 117, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=1453] [region_id=1023]
[2019/05/01 12:38:32.904 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 1023, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 98, 255, 117, 102, 102, 255, 101, 114, 95, 112, 111, 255, 111, 108, 255, 95, 100, 117, 109, 112, 95, 255, 97, 255, 116, 95, 115, 104, 117, 116, 100, 255, 255, 111, 119, 110, 0, 0, 0, 0, 0, 255, 250, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 98, 255, 117, 102, 102, 255, 101, 114, 95, 112, 111, 255, 111, 108, 255, 95, 100, 117, 109, 112, 95, 255, 110, 255, 111, 119, 0, 0, 0, 0, 0, 250, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 117, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1024, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1025, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1026, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1453, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1453, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1453] [region_id=1023]
[2019/05/01 12:38:32.934 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 1455, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=11] [term=6] [peer_id=1145] [region_id=901]
[2019/05/01 12:38:32.934 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 9, version: 107, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=1145] [region_id=901]
[2019/05/01 12:38:32.934 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 901, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 105, 116, 255, 95, 115, 108, 97, 255, 118, 101, 0, 255, 0, 0, 0, 0, 0, 249, 0, 0, 253], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 97, 255, 100, 97, 112, 255, 116, 105, 118, 101, 95, 255, 102, 108, 255, 117, 115, 104, 105, 110, 103, 255, 0, 255, 0, 0, 0, 0, 0, 0, 0, 247, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 107, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 902, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 904, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1145, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1455, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1455, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1145] [region_id=901]
[2019/05/01 12:38:32.977 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 1026, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=9] [term=6] [peer_id=1453] [region_id=1023]
[2019/05/01 12:38:32.977 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 7, version: 117, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=1453] [region_id=1023]
[2019/05/01 12:38:32.977 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 1023, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 98, 255, 117, 102, 102, 255, 101, 114, 95, 112, 111, 255, 111, 108, 255, 95, 100, 117, 109, 112, 95, 255, 97, 255, 116, 95, 115, 104, 117, 116, 100, 255, 255, 111, 119, 110, 0, 0, 0, 0, 0, 255, 250, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 98, 255, 117, 102, 102, 255, 101, 114, 95, 112, 111, 255, 111, 108, 255, 95, 100, 117, 109, 112, 95, 255, 110, 255, 111, 119, 0, 0, 0, 0, 0, 250, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 7, version: 117, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1024, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1025, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1026, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1453, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1026, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1453] [region_id=1023]
[2019/05/01 12:38:32.977 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 904, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=12] [term=6] [peer_id=1145] [region_id=901]
[2019/05/01 12:38:32.977 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 10, version: 107, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=1145] [region_id=901]
[2019/05/01 12:38:32.977 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 901, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 105, 116, 255, 95, 115, 108, 97, 255, 118, 101, 0, 255, 0, 0, 0, 0, 0, 249, 0, 0, 253], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 97, 255, 100, 97, 112, 255, 116, 105, 118, 101, 95, 255, 102, 108, 255, 117, 115, 104, 105, 110, 103, 255, 0, 255, 0, 0, 0, 0, 0, 0, 0, 247, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 10, version: 107, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 902, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 904, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1145, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1455, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 904, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1145] [region_id=901]
[2019/05/01 12:38:33.063 -07:00] [INFO] [unknown:1625] ["[region 1347] 1411 [term 6] received MsgTimeoutNow from 1350 and starts an election to get leadership."]
[2019/05/01 12:38:33.063 -07:00] [INFO] [unknown:739] ["[region 1347] 1411 became candidate at term 7"]
[2019/05/01 12:38:33.063 -07:00] [INFO] [unknown:854] ["[region 1347] 1411 received MsgRequestVoteResponse from 1411 at term 7"]
[2019/05/01 12:38:33.063 -07:00] [INFO] [unknown:828] ["[region 1347] 1411 [logterm: 6, index: 9] sent MsgRequestVote request to 1348 at term 7"]
[2019/05/01 12:38:33.063 -07:00] [INFO] [unknown:828] ["[region 1347] 1411 [logterm: 6, index: 9] sent MsgRequestVote request to 1350 at term 7"]
[2019/05/01 12:38:33.079 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 1454, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=12] [term=7] [peer_id=1454] [region_id=341]
[2019/05/01 12:38:33.079 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 9, version: 37, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=1454] [region_id=341]
[2019/05/01 12:38:33.079 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 341, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 95, 115, 255, 116, 109, 116, 255, 95, 99, 97, 99, 104, 255, 101, 95, 255, 115, 105, 122, 101, 0, 0, 253, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 103, 105, 255, 110, 103, 95, 255, 105, 109, 112, 111, 115, 255, 115, 105, 255, 98, 108, 101, 95, 109, 111, 255, 100, 255, 101, 0, 0, 0, 0, 0, 0, 249, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 37, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 343, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 344, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1008, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1454, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1454, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1454] [region_id=341]
[2019/05/01 12:38:33.146 -07:00] [INFO] [unknown:854] ["[region 1347] 1411 received MsgRequestVoteResponse from 1350 at term 7"]
[2019/05/01 12:38:33.146 -07:00] [INFO] [unknown:1550] ["[region 1347] 1411 [quorum:2] has received 2 MsgRequestVoteResponse votes and 0 vote rejections"]
[2019/05/01 12:38:33.146 -07:00] [INFO] [unknown:789] ["[region 1347] 1411 became leader at term 7"]
[2019/05/01 12:38:33.186 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 344, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=13] [term=7] [peer_id=1454] [region_id=341]
[2019/05/01 12:38:33.186 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 10, version: 37, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=1454] [region_id=341]
[2019/05/01 12:38:33.186 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 341, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 95, 115, 255, 116, 109, 116, 255, 95, 99, 97, 99, 104, 255, 101, 95, 255, 115, 105, 122, 101, 0, 0, 253, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 103, 105, 255, 110, 103, 95, 255, 105, 109, 112, 111, 115, 255, 115, 105, 255, 98, 108, 101, 95, 109, 111, 255, 100, 255, 101, 0, 0, 0, 0, 0, 0, 249, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 10, version: 37, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 343, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 344, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1008, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1454, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 344, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1454] [region_id=341]
[2019/05/01 12:38:33.413 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 154], lock_version: 408089922970320897, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 158], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:33.536 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 153], lock_version: 408089922996535301, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 156], lock_ttl: 3064, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:33.600 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 153], lock_version: 408089922996535301, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 156], lock_ttl: 3064, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:33.618 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 154], lock_version: 408089923022749700, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 155], lock_ttl: 3003, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:33.734 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 157], lock_version: 408089923048964106, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 157], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:33.907 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=1457] [region_id=345]
[2019/05/01 12:38:33.907 -07:00] [INFO] [unknown:719] ["[region 345] 1457 became follower at term 0"]
[2019/05/01 12:38:33.907 -07:00] [INFO] [unknown:295] ["[region 345] 1457 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:38:33.907 -07:00] [INFO] [unknown:719] ["[region 345] 1457 became follower at term 1"]
[2019/05/01 12:38:33.907 -07:00] [INFO] [unknown:920] ["[region 345] 1457 [term: 1] received a MsgHeartbeat message with higher term from 347 [term: 7]"]
[2019/05/01 12:38:33.907 -07:00] [INFO] [unknown:719] ["[region 345] 1457 became follower at term 7"]
[2019/05/01 12:38:34.002 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 162], lock_version: 408089923140714500, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 162], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:34.060 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 159], lock_version: 408089923140714502, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 161], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:34.303 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=1459] [region_id=150]
[2019/05/01 12:38:34.303 -07:00] [INFO] [unknown:719] ["[region 150] 1459 became follower at term 0"]
[2019/05/01 12:38:34.303 -07:00] [INFO] [unknown:295] ["[region 150] 1459 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:38:34.303 -07:00] [INFO] [unknown:719] ["[region 150] 1459 became follower at term 1"]
[2019/05/01 12:38:34.303 -07:00] [INFO] [unknown:920] ["[region 150] 1459 [term: 1] received a MsgHeartbeat message with higher term from 152 [term: 7]"]
[2019/05/01 12:38:34.303 -07:00] [INFO] [unknown:719] ["[region 150] 1459 became follower at term 7"]
[2019/05/01 12:38:34.436 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 161], lock_version: 408089923245572101, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 161], lock_ttl: 3002, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:34.518 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 161], lock_version: 408089923258679305, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 161], lock_ttl: 3057, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:34.612 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 162], lock_version: 408089923284893703, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 162], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:34.762 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 162], lock_version: 408089923324215303, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 165], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:34.988 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 163], lock_version: 408089923376644106, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 163], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:35.029 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=1458] [region_id=1277]
[2019/05/01 12:38:35.029 -07:00] [INFO] [unknown:719] ["[region 1277] 1458 became follower at term 0"]
[2019/05/01 12:38:35.029 -07:00] [INFO] [unknown:295] ["[region 1277] 1458 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:38:35.029 -07:00] [INFO] [unknown:719] ["[region 1277] 1458 became follower at term 1"]
[2019/05/01 12:38:35.029 -07:00] [INFO] [unknown:920] ["[region 1277] 1458 [term: 1] received a MsgHeartbeat message with higher term from 1314 [term: 7]"]
[2019/05/01 12:38:35.029 -07:00] [INFO] [unknown:719] ["[region 1277] 1458 became follower at term 7"]
[2019/05/01 12:38:35.086 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 167], lock_version: 408089923429072900, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 167], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:35.151 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 166], lock_version: 408089923402858502, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 166], lock_ttl: 3096, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:35.297 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 168], lock_version: 408089923481501713, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 168], lock_ttl: 3002, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:35.443 -07:00] [INFO] [pd.rs:558] ["try to change peer"] [peer="Peer { id: 1460, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [change_type=AddLearnerNode] [region_id=529]
[2019/05/01 12:38:35.443 -07:00] [INFO] [peer.rs:1953] ["propose conf change peer"] [change_peer=1460] [change_type=AddLearnerNode] [peer_id=671] [region_id=529]
[2019/05/01 12:38:35.486 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddLearnerNode, peer: Some(Peer { id: 1460, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=11] [term=7] [peer_id=671] [region_id=529]
[2019/05/01 12:38:35.486 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 8, version: 67, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddLearner] [peer_id=671] [region_id=529]
[2019/05/01 12:38:35.486 -07:00] [INFO] [apply.rs:1476] ["add learner successfully"] [region="Region { id: 529, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 101, 120, 101, 99, 255, 117, 116, 101, 100, 255, 95, 103, 116, 255, 105, 100, 115, 95, 99, 255, 111, 109, 255, 112, 114, 101, 115, 115, 105, 255, 111, 255, 110, 95, 112, 101, 114, 105, 111, 255, 255, 100, 0, 0, 0, 0, 0, 0, 0, 255, 248, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 101, 120, 112, 105, 255, 114, 101, 95, 108, 255, 111, 103, 115, 255, 95, 100, 97, 121, 115, 255, 0, 0, 255, 0, 0, 0, 0, 0, 0, 247, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 8, version: 67, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 530, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 532, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 671, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1460, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=671] [region_id=529]
[2019/05/01 12:38:35.494 -07:00] [INFO] [peer.rs:1318] ["notify pd with change peer region"] [region="Region { id: 529, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 101, 120, 101, 99, 255, 117, 116, 101, 100, 255, 95, 103, 116, 255, 105, 100, 115, 95, 99, 255, 111, 109, 255, 112, 114, 101, 115, 115, 105, 255, 111, 255, 110, 95, 112, 101, 114, 105, 111, 255, 255, 100, 0, 0, 0, 0, 0, 0, 0, 255, 248, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 101, 120, 112, 105, 255, 114, 101, 95, 108, 255, 111, 103, 115, 255, 95, 100, 97, 121, 115, 255, 0, 0, 255, 0, 0, 0, 0, 0, 0, 247, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 67, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 530, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 532, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 671, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1460, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=671] [region_id=529]
[2019/05/01 12:38:35.910 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_345_7_8_(default|lock|write).sst] [snap_key=345_7_8]
[2019/05/01 12:38:35.933 -07:00] [INFO] [unknown:1792] ["[region 345] 1457 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 8, term: 7]"]
[2019/05/01 12:38:35.933 -07:00] [INFO] [unknown:1816] ["[region 345] 1457 restored progress of 346 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:38:35.933 -07:00] [INFO] [unknown:1816] ["[region 345] 1457 restored progress of 347 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:38:35.933 -07:00] [INFO] [unknown:1816] ["[region 345] 1457 restored progress of 348 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:38:35.933 -07:00] [INFO] [unknown:1816] ["[region 345] 1457 restored progress of 1457 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:38:35.933 -07:00] [INFO] [unknown:474] ["[region 345] 1457 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 8, term: 7]"]
[2019/05/01 12:38:35.933 -07:00] [INFO] [unknown:1736] ["[region 345] 1457 [commit: 8] restored snapshot [index: 8, term: 7]"]
[2019/05/01 12:38:35.933 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=1457] [region_id=345]
[2019/05/01 12:38:35.933 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 8, truncated_state: Some(RaftTruncatedState { index: 8, term: 7, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 345, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 103, 105, 255, 110, 103, 95, 255, 105, 109, 112, 111, 115, 255, 115, 105, 255, 98, 108, 101, 95, 109, 111, 255, 100, 255, 101, 0, 0, 0, 0, 0, 0, 249, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 108, 111, 99, 255, 107, 95, 101, 110, 255, 99, 114, 121, 255, 112, 116, 105, 111, 110, 255, 95, 109, 255, 111, 100, 101, 0, 0, 0, 252, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 37, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 346, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 347, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 348, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1457, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1457] [region_id=345]
[2019/05/01 12:38:35.984 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 345] 1457"]
[2019/05/01 12:38:35.984 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 345, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 103, 105, 255, 110, 103, 95, 255, 105, 109, 112, 111, 115, 255, 115, 105, 255, 98, 108, 101, 95, 109, 111, 255, 100, 255, 101, 0, 0, 0, 0, 0, 0, 249, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 108, 111, 99, 255, 107, 95, 101, 110, 255, 99, 114, 121, 255, 112, 116, 105, 111, 110, 255, 95, 109, 255, 111, 100, 101, 0, 0, 0, 252, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 37, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 346, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 347, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 348, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1457, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1457] [region_id=345]
[2019/05/01 12:38:35.996 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=345]
[2019/05/01 12:38:36.041 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=56.158153ms] [region_id=345]
[2019/05/01 12:38:36.306 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_150_7_11_(default|lock|write).sst] [snap_key=150_7_11]
[2019/05/01 12:38:36.326 -07:00] [INFO] [unknown:1792] ["[region 150] 1459 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 11, term: 7]"]
[2019/05/01 12:38:36.326 -07:00] [INFO] [unknown:1816] ["[region 150] 1459 restored progress of 151 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:38:36.326 -07:00] [INFO] [unknown:1816] ["[region 150] 1459 restored progress of 152 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:38:36.326 -07:00] [INFO] [unknown:1816] ["[region 150] 1459 restored progress of 328 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:38:36.326 -07:00] [INFO] [unknown:1816] ["[region 150] 1459 restored progress of 1459 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:38:36.326 -07:00] [INFO] [unknown:474] ["[region 150] 1459 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 11, term: 7]"]
[2019/05/01 12:38:36.326 -07:00] [INFO] [unknown:1736] ["[region 150] 1459 [commit: 11] restored snapshot [index: 11, term: 7]"]
[2019/05/01 12:38:36.326 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=1459] [region_id=150]
[2019/05/01 12:38:36.326 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 11, truncated_state: Some(RaftTruncatedState { index: 11, term: 7, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 150, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 114, 128, 0, 0, 0, 0, 255, 0, 234, 97, 0, 0, 0, 0, 0, 250], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 114, 128, 0, 0, 0, 0, 255, 1, 212, 193, 0, 0, 0, 0, 0, 250], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 18, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 151, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 152, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 328, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1459, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1459] [region_id=150]
[2019/05/01 12:38:36.376 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 150, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 114, 128, 0, 0, 0, 0, 255, 0, 234, 97, 0, 0, 0, 0, 0, 250], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 114, 128, 0, 0, 0, 0, 255, 1, 212, 193, 0, 0, 0, 0, 0, 250], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 18, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 151, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 152, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 328, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1459, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1459] [region_id=150]
[2019/05/01 12:38:36.376 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 150] 1459"]
[2019/05/01 12:38:36.376 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=150]
[2019/05/01 12:38:36.389 -07:00] [INFO] [peer_storage.rs:759] ["requesting snapshot"] [peer_id=671] [region_id=529]
[2019/05/01 12:38:36.453 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=75.738049ms] [region_id=150]
[2019/05/01 12:38:36.453 -07:00] [INFO] [snap.rs:757] ["scan snapshot of one cf"] [size=0] [key_count=0] [cf=default] [snapshot=/opt/tidb/data/kv/snap/gen_529_7_11_(default|lock|write).sst] [region_id=529]
[2019/05/01 12:38:36.453 -07:00] [INFO] [snap.rs:757] ["scan snapshot of one cf"] [size=0] [key_count=0] [cf=lock] [snapshot=/opt/tidb/data/kv/snap/gen_529_7_11_(default|lock|write).sst] [region_id=529]
[2019/05/01 12:38:36.453 -07:00] [INFO] [snap.rs:757] ["scan snapshot of one cf"] [size=210] [key_count=2] [cf=write] [snapshot=/opt/tidb/data/kv/snap/gen_529_7_11_(default|lock|write).sst] [region_id=529]
[2019/05/01 12:38:36.479 -07:00] [INFO] [snap.rs:875] ["scan snapshot"] [takes=26.336003ms] [size=1523] [key_count=2] [snapshot=/opt/tidb/data/kv/snap/gen_529_7_11_(default|lock|write).sst] [region_id=529]
[2019/05/01 12:38:36.539 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 168], lock_version: 408089923678109706, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 171], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:36.599 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 168], lock_version: 408089923678109706, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 171], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:36.972 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 1457, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=9] [term=7] [peer_id=1457] [region_id=345]
[2019/05/01 12:38:36.991 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 6, version: 37, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=1457] [region_id=345]
[2019/05/01 12:38:36.991 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 345, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 103, 105, 255, 110, 103, 95, 255, 105, 109, 112, 111, 115, 255, 115, 105, 255, 98, 108, 101, 95, 109, 111, 255, 100, 255, 101, 0, 0, 0, 0, 0, 0, 249, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 108, 111, 99, 255, 107, 95, 101, 110, 255, 99, 114, 121, 255, 112, 116, 105, 111, 110, 255, 95, 109, 255, 111, 100, 101, 0, 0, 0, 252, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 37, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 346, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 347, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 348, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1457, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1457, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1457] [region_id=345]
[2019/05/01 12:38:37.039 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_1277_7_11_(default|lock|write).sst] [snap_key=1277_7_11]
[2019/05/01 12:38:37.062 -07:00] [INFO] [unknown:1792] ["[region 1277] 1458 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 11, term: 7]"]
[2019/05/01 12:38:37.062 -07:00] [INFO] [unknown:1816] ["[region 1277] 1458 restored progress of 1278 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:38:37.062 -07:00] [INFO] [unknown:1816] ["[region 1277] 1458 restored progress of 1280 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:38:37.062 -07:00] [INFO] [unknown:1816] ["[region 1277] 1458 restored progress of 1314 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:38:37.063 -07:00] [INFO] [unknown:1816] ["[region 1277] 1458 restored progress of 1458 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:38:37.063 -07:00] [INFO] [unknown:474] ["[region 1277] 1458 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 11, term: 7]"]
[2019/05/01 12:38:37.063 -07:00] [INFO] [unknown:1736] ["[region 1277] 1458 [commit: 11] restored snapshot [index: 11, term: 7]"]
[2019/05/01 12:38:37.063 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=1458] [region_id=1277]
[2019/05/01 12:38:37.063 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 11, truncated_state: Some(RaftTruncatedState { index: 11, term: 7, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 1277, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 108, 255, 111, 99, 107, 255, 95, 119, 97, 105, 116, 255, 95, 116, 255, 105, 109, 101, 111, 117, 116, 255, 0, 255, 0, 0, 0, 0, 0, 0, 0, 247, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 108, 255, 111, 99, 107, 255, 115, 95, 117, 110, 115, 255, 97, 102, 255, 101, 95, 102, 111, 114, 95, 255, 98, 255, 105, 110, 108, 111, 103, 0, 0, 253, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 167, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1278, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1280, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1314, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1458, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1458] [region_id=1277]
[2019/05/01 12:38:37.065 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 168], lock_version: 408089923861610507, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 172], lock_ttl: 3002, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:37.082 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 348, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=10] [term=7] [peer_id=1457] [region_id=345]
[2019/05/01 12:38:37.082 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 7, version: 37, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=1457] [region_id=345]
[2019/05/01 12:38:37.082 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 345, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 103, 105, 255, 110, 103, 95, 255, 105, 109, 112, 111, 115, 255, 115, 105, 255, 98, 108, 101, 95, 109, 111, 255, 100, 255, 101, 0, 0, 0, 0, 0, 0, 249, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 108, 111, 99, 255, 107, 95, 101, 110, 255, 99, 114, 121, 255, 112, 116, 105, 111, 110, 255, 95, 109, 255, 111, 100, 101, 0, 0, 0, 252, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 7, version: 37, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 346, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 347, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 348, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1457, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 348, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1457] [region_id=345]
[2019/05/01 12:38:37.095 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 1277, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 108, 255, 111, 99, 107, 255, 95, 119, 97, 105, 116, 255, 95, 116, 255, 105, 109, 101, 111, 117, 116, 255, 0, 255, 0, 0, 0, 0, 0, 0, 0, 247, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 108, 255, 111, 99, 107, 255, 115, 95, 117, 110, 115, 255, 97, 102, 255, 101, 95, 102, 111, 114, 95, 255, 98, 255, 105, 110, 108, 111, 103, 0, 0, 253, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 167, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1278, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1280, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1314, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1458, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1458] [region_id=1277]
[2019/05/01 12:38:37.105 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 1277] 1458"]
[2019/05/01 12:38:37.105 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=1277]
[2019/05/01 12:38:37.136 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 168], lock_version: 408089923861610507, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 172], lock_ttl: 3002, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:37.155 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=59.888348ms] [region_id=1277]
[2019/05/01 12:38:37.240 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 168], lock_version: 408089923861610507, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 172], lock_ttl: 3002, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:37.355 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 1459, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=12] [term=7] [peer_id=1459] [region_id=150]
[2019/05/01 12:38:37.355 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 6, version: 18, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=1459] [region_id=150]
[2019/05/01 12:38:37.355 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 150, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 114, 128, 0, 0, 0, 0, 255, 0, 234, 97, 0, 0, 0, 0, 0, 250], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 114, 128, 0, 0, 0, 0, 255, 1, 212, 193, 0, 0, 0, 0, 0, 250], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 18, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 151, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 152, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 328, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1459, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1459, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1459] [region_id=150]
[2019/05/01 12:38:37.437 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 151, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=13] [term=7] [peer_id=1459] [region_id=150]
[2019/05/01 12:38:37.437 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 7, version: 18, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=1459] [region_id=150]
[2019/05/01 12:38:37.437 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 150, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 114, 128, 0, 0, 0, 0, 255, 0, 234, 97, 0, 0, 0, 0, 0, 250], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 114, 128, 0, 0, 0, 0, 255, 1, 212, 193, 0, 0, 0, 0, 0, 250], region_epoch: Some(RegionEpoch { conf_ver: 7, version: 18, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 151, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 152, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 328, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1459, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 151, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1459] [region_id=150]
[2019/05/01 12:38:37.459 -07:00] [INFO] [pd.rs:558] ["try to change peer"] [peer="Peer { id: 1462, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [change_type=AddLearnerNode] [region_id=64]
[2019/05/01 12:38:37.459 -07:00] [INFO] [peer.rs:1953] ["propose conf change peer"] [change_peer=1462] [change_type=AddLearnerNode] [peer_id=66] [region_id=64]
[2019/05/01 12:38:37.508 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddLearnerNode, peer: Some(Peer { id: 1462, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=20] [term=8] [peer_id=66] [region_id=64]
[2019/05/01 12:38:37.508 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 5, version: 5, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddLearner] [peer_id=66] [region_id=64]
[2019/05/01 12:38:37.508 -07:00] [INFO] [apply.rs:1476] ["add learner successfully"] [region="Region { id: 64, start_key: [109, 66, 111, 111, 116, 115, 116, 114, 255, 97, 255, 112, 75, 101, 121, 0, 0, 255, 0, 0, 251, 0, 0, 0, 0, 0, 255, 0, 0, 115, 0, 0, 0, 0, 0, 250], end_key: [109, 68, 66, 58, 49, 0, 0, 0, 255, 0, 251, 0, 0, 0, 0, 0, 0, 255, 0, 104, 84, 97, 98, 108, 101, 58, 255, 49, 48, 255, 53, 0, 0, 0, 0, 255, 0, 0, 0, 248, 0, 0, 0, 0, 251], region_epoch: Some(RegionEpoch { conf_ver: 5, version: 5, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 65, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 66, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 157, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1462, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=66] [region_id=64]
[2019/05/01 12:38:37.525 -07:00] [INFO] [peer.rs:1318] ["notify pd with change peer region"] [region="Region { id: 64, start_key: [109, 66, 111, 111, 116, 115, 116, 114, 255, 97, 255, 112, 75, 101, 121, 0, 0, 255, 0, 0, 251, 0, 0, 0, 0, 0, 255, 0, 0, 115, 0, 0, 0, 0, 0, 250], end_key: [109, 68, 66, 58, 49, 0, 0, 0, 255, 0, 251, 0, 0, 0, 0, 0, 0, 255, 0, 104, 84, 97, 98, 108, 101, 58, 255, 49, 48, 255, 53, 0, 0, 0, 0, 255, 0, 0, 0, 248, 0, 0, 0, 0, 251], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 5, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 65, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 66, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 157, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1462, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=66] [region_id=64]
[2019/05/01 12:38:37.945 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 172], lock_version: 408089924136861710, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 172], lock_ttl: 3003, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:38.037 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 172], lock_version: 408089924136861710, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 172], lock_ttl: 3003, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:38.178 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 1458, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=12] [term=7] [peer_id=1458] [region_id=1277]
[2019/05/01 12:38:38.179 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 9, version: 167, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=1458] [region_id=1277]
[2019/05/01 12:38:38.179 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 1277, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 108, 255, 111, 99, 107, 255, 95, 119, 97, 105, 116, 255, 95, 116, 255, 105, 109, 101, 111, 117, 116, 255, 0, 255, 0, 0, 0, 0, 0, 0, 0, 247, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 108, 255, 111, 99, 107, 255, 115, 95, 117, 110, 115, 255, 97, 102, 255, 101, 95, 102, 111, 114, 95, 255, 98, 255, 105, 110, 108, 111, 103, 0, 0, 253, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 167, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1278, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1280, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1314, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1458, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1458, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1458] [region_id=1277]
[2019/05/01 12:38:38.342 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 1280, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=13] [term=7] [peer_id=1458] [region_id=1277]
[2019/05/01 12:38:38.342 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 10, version: 167, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=1458] [region_id=1277]
[2019/05/01 12:38:38.342 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 1277, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 108, 255, 111, 99, 107, 255, 95, 119, 97, 105, 116, 255, 95, 116, 255, 105, 109, 101, 111, 117, 116, 255, 0, 255, 0, 0, 0, 0, 0, 0, 0, 247, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 108, 255, 111, 99, 107, 255, 115, 95, 117, 110, 115, 255, 97, 102, 255, 101, 95, 102, 111, 114, 95, 255, 98, 255, 105, 110, 108, 111, 103, 0, 0, 253, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 10, version: 167, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1278, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1280, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1314, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1458, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1280, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1458] [region_id=1277]
[2019/05/01 12:38:38.346 -07:00] [INFO] [unknown:841] ["New connected subchannel at 0x7f858fa01660 for subchannel 0x7f8640481400"]
[2019/05/01 12:38:38.376 -07:00] [INFO] [snap.rs:389] ["sent snapshot"] [duration=30.56775ms] [size=1523] [snap_key=529_7_11] [region_id=529]
[2019/05/01 12:38:38.376 -07:00] [INFO] [peer.rs:538] ["report snapshot status"] [status=Finish] [to="Peer { id: 1460, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=671] [region_id=529]
[2019/05/01 12:38:38.692 -07:00] [INFO] [peer_storage.rs:759] ["requesting snapshot"] [peer_id=66] [region_id=64]
[2019/05/01 12:38:38.693 -07:00] [INFO] [snap.rs:757] ["scan snapshot of one cf"] [size=0] [key_count=0] [cf=default] [snapshot=/opt/tidb/data/kv/snap/gen_64_8_20_(default|lock|write).sst] [region_id=64]
[2019/05/01 12:38:38.693 -07:00] [INFO] [snap.rs:757] ["scan snapshot of one cf"] [size=0] [key_count=0] [cf=lock] [snapshot=/opt/tidb/data/kv/snap/gen_64_8_20_(default|lock|write).sst] [region_id=64]
[2019/05/01 12:38:38.693 -07:00] [INFO] [snap.rs:757] ["scan snapshot of one cf"] [size=572] [key_count=10] [cf=write] [snapshot=/opt/tidb/data/kv/snap/gen_64_8_20_(default|lock|write).sst] [region_id=64]
[2019/05/01 12:38:38.713 -07:00] [INFO] [snap.rs:875] ["scan snapshot"] [takes=20.041179ms] [size=1525] [key_count=10] [snapshot=/opt/tidb/data/kv/snap/gen_64_8_20_(default|lock|write).sst] [region_id=64]
[2019/05/01 12:38:39.163 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 175], lock_version: 408089924477648911, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 175], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:39.342 -07:00] [INFO] [pd.rs:558] ["try to change peer"] [peer="Peer { id: 1460, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [change_type=AddNode] [region_id=529]
[2019/05/01 12:38:39.342 -07:00] [INFO] [peer.rs:1953] ["propose conf change peer"] [change_peer=1460] [change_type=AddNode] [peer_id=671] [region_id=529]
[2019/05/01 12:38:39.374 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 1460, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=12] [term=7] [peer_id=671] [region_id=529]
[2019/05/01 12:38:39.374 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 9, version: 67, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=671] [region_id=529]
[2019/05/01 12:38:39.374 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 529, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 101, 120, 101, 99, 255, 117, 116, 101, 100, 255, 95, 103, 116, 255, 105, 100, 115, 95, 99, 255, 111, 109, 255, 112, 114, 101, 115, 115, 105, 255, 111, 255, 110, 95, 112, 101, 114, 105, 111, 255, 255, 100, 0, 0, 0, 0, 0, 0, 0, 255, 248, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 101, 120, 112, 105, 255, 114, 101, 95, 108, 255, 111, 103, 115, 255, 95, 100, 97, 121, 115, 255, 0, 0, 255, 0, 0, 0, 0, 0, 0, 247, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 67, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 530, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 532, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 671, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1460, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1460, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=671] [region_id=529]
[2019/05/01 12:38:39.384 -07:00] [INFO] [peer.rs:1318] ["notify pd with change peer region"] [region="Region { id: 529, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 101, 120, 101, 99, 255, 117, 116, 101, 100, 255, 95, 103, 116, 255, 105, 100, 115, 95, 99, 255, 111, 109, 255, 112, 114, 101, 115, 115, 105, 255, 111, 255, 110, 95, 112, 101, 114, 105, 111, 255, 255, 100, 0, 0, 0, 0, 0, 0, 0, 255, 248, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 101, 120, 112, 105, 255, 114, 101, 95, 108, 255, 111, 103, 115, 255, 95, 100, 97, 121, 115, 255, 0, 0, 255, 0, 0, 0, 0, 0, 0, 247, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 10, version: 67, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 530, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 532, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 671, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1460, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=671] [region_id=529]
[2019/05/01 12:38:39.403 -07:00] [INFO] [pd.rs:558] ["try to change peer"] [peer="Peer { id: 530, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [change_type=RemoveNode] [region_id=529]
[2019/05/01 12:38:39.403 -07:00] [INFO] [peer.rs:1953] ["propose conf change peer"] [change_peer=530] [change_type=RemoveNode] [peer_id=671] [region_id=529]
[2019/05/01 12:38:39.459 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 530, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=13] [term=7] [peer_id=671] [region_id=529]
[2019/05/01 12:38:39.459 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 10, version: 67, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=671] [region_id=529]
[2019/05/01 12:38:39.459 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 529, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 101, 120, 101, 99, 255, 117, 116, 101, 100, 255, 95, 103, 116, 255, 105, 100, 115, 95, 99, 255, 111, 109, 255, 112, 114, 101, 115, 115, 105, 255, 111, 255, 110, 95, 112, 101, 114, 105, 111, 255, 255, 100, 0, 0, 0, 0, 0, 0, 0, 255, 248, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 101, 120, 112, 105, 255, 114, 101, 95, 108, 255, 111, 103, 115, 255, 95, 100, 97, 121, 115, 255, 0, 0, 255, 0, 0, 0, 0, 0, 0, 247, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 10, version: 67, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 530, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 532, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 671, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1460, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 530, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=671] [region_id=529]
[2019/05/01 12:38:39.460 -07:00] [INFO] [pd.rs:558] ["try to change peer"] [peer="Peer { id: 530, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [change_type=RemoveNode] [region_id=529]
[2019/05/01 12:38:39.460 -07:00] [INFO] [peer.rs:1927] ["there is a pending conf change, try later"] [peer_id=671] [region_id=529]
[2019/05/01 12:38:39.471 -07:00] [INFO] [peer.rs:1318] ["notify pd with change peer region"] [region="Region { id: 529, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 101, 120, 101, 99, 255, 117, 116, 101, 100, 255, 95, 103, 116, 255, 105, 100, 115, 95, 99, 255, 111, 109, 255, 112, 114, 101, 115, 115, 105, 255, 111, 255, 110, 95, 112, 101, 114, 105, 111, 255, 255, 100, 0, 0, 0, 0, 0, 0, 0, 255, 248, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 101, 120, 112, 105, 255, 114, 101, 95, 108, 255, 111, 103, 115, 255, 95, 100, 97, 121, 115, 255, 0, 0, 255, 0, 0, 0, 0, 0, 0, 247, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 11, version: 67, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 532, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 671, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1460, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=671] [region_id=529]
[2019/05/01 12:38:39.698 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 176], lock_version: 408089924621828101, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 176], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:39.869 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 175], lock_version: 408089924674256907, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 176], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:39.948 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 175], lock_version: 408089924674256907, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 176], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:40.072 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 180], lock_version: 408089924739792901, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 181], lock_ttl: 3003, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:40.120 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 177], lock_version: 408089924739792905, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 177], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:40.201 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 178], lock_version: 408089924739792912, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 178], lock_ttl: 3060, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:40.221 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=1503] [region_id=1133]
[2019/05/01 12:38:40.221 -07:00] [INFO] [unknown:719] ["[region 1133] 1503 became follower at term 0"]
[2019/05/01 12:38:40.221 -07:00] [INFO] [unknown:295] ["[region 1133] 1503 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:38:40.221 -07:00] [INFO] [unknown:719] ["[region 1133] 1503 became follower at term 1"]
[2019/05/01 12:38:40.221 -07:00] [INFO] [unknown:920] ["[region 1133] 1503 [term: 1] received a MsgHeartbeat message with higher term from 1136 [term: 6]"]
[2019/05/01 12:38:40.221 -07:00] [INFO] [unknown:719] ["[region 1133] 1503 became follower at term 6"]
[2019/05/01 12:38:40.319 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 179], lock_version: 408089924779114497, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 179], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:40.418 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 180], lock_version: 408089924805328916, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 180], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:40.695 -07:00] [INFO] [unknown:841] ["New connected subchannel at 0x7f858f662af0 for subchannel 0x7f8640481600"]
[2019/05/01 12:38:40.703 -07:00] [INFO] [snap.rs:389] ["sent snapshot"] [duration=9.020474ms] [size=1525] [snap_key=64_8_20] [region_id=64]
[2019/05/01 12:38:40.703 -07:00] [INFO] [peer.rs:538] ["report snapshot status"] [status=Finish] [to="Peer { id: 1462, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=66] [region_id=64]
[2019/05/01 12:38:40.784 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 178], lock_version: 408089924897079302, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 178], lock_ttl: 3055, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:40.845 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 180], lock_version: 408089924923293704, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 180], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:41.031 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 182], lock_version: 408089924949508107, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 182], lock_ttl: 3002, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:41.283 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 183], lock_version: 408089925028151302, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 184], lock_ttl: 3002, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:41.446 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 185], lock_version: 408089925067472904, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 185], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:41.483 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 183], lock_version: 408089925067472903, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 183], lock_ttl: 3100, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:41.549 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 183], lock_version: 408089925067472903, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 183], lock_ttl: 3100, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:41.696 -07:00] [INFO] [pd.rs:558] ["try to change peer"] [peer="Peer { id: 1462, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [change_type=AddNode] [region_id=64]
[2019/05/01 12:38:41.696 -07:00] [INFO] [peer.rs:1953] ["propose conf change peer"] [change_peer=1462] [change_type=AddNode] [peer_id=66] [region_id=64]
[2019/05/01 12:38:41.721 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 1462, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=21] [term=8] [peer_id=66] [region_id=64]
[2019/05/01 12:38:41.721 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 6, version: 5, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=66] [region_id=64]
[2019/05/01 12:38:41.721 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 64, start_key: [109, 66, 111, 111, 116, 115, 116, 114, 255, 97, 255, 112, 75, 101, 121, 0, 0, 255, 0, 0, 251, 0, 0, 0, 0, 0, 255, 0, 0, 115, 0, 0, 0, 0, 0, 250], end_key: [109, 68, 66, 58, 49, 0, 0, 0, 255, 0, 251, 0, 0, 0, 0, 0, 0, 255, 0, 104, 84, 97, 98, 108, 101, 58, 255, 49, 48, 255, 53, 0, 0, 0, 0, 255, 0, 0, 0, 248, 0, 0, 0, 0, 251], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 5, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 65, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 66, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 157, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1462, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1462, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=66] [region_id=64]
[2019/05/01 12:38:41.746 -07:00] [INFO] [peer.rs:1318] ["notify pd with change peer region"] [region="Region { id: 64, start_key: [109, 66, 111, 111, 116, 115, 116, 114, 255, 97, 255, 112, 75, 101, 121, 0, 0, 255, 0, 0, 251, 0, 0, 0, 0, 0, 255, 0, 0, 115, 0, 0, 0, 0, 0, 250], end_key: [109, 68, 66, 58, 49, 0, 0, 0, 255, 0, 251, 0, 0, 0, 0, 0, 0, 255, 0, 104, 84, 97, 98, 108, 101, 58, 255, 49, 48, 255, 53, 0, 0, 0, 0, 255, 0, 0, 0, 248, 0, 0, 0, 0, 251], region_epoch: Some(RegionEpoch { conf_ver: 7, version: 5, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 65, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 66, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 157, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1462, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=66] [region_id=64]
[2019/05/01 12:38:41.766 -07:00] [INFO] [pd.rs:558] ["try to change peer"] [peer="Peer { id: 65, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [change_type=RemoveNode] [region_id=64]
[2019/05/01 12:38:41.769 -07:00] [INFO] [peer.rs:1953] ["propose conf change peer"] [change_peer=65] [change_type=RemoveNode] [peer_id=66] [region_id=64]
[2019/05/01 12:38:41.780 -07:00] [INFO] [pd.rs:558] ["try to change peer"] [peer="Peer { id: 65, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [change_type=RemoveNode] [region_id=64]
[2019/05/01 12:38:41.810 -07:00] [INFO] [peer.rs:1927] ["there is a pending conf change, try later"] [peer_id=66] [region_id=64]
[2019/05/01 12:38:41.810 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 65, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=22] [term=8] [peer_id=66] [region_id=64]
[2019/05/01 12:38:41.810 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 7, version: 5, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=66] [region_id=64]
[2019/05/01 12:38:41.810 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 64, start_key: [109, 66, 111, 111, 116, 115, 116, 114, 255, 97, 255, 112, 75, 101, 121, 0, 0, 255, 0, 0, 251, 0, 0, 0, 0, 0, 255, 0, 0, 115, 0, 0, 0, 0, 0, 250], end_key: [109, 68, 66, 58, 49, 0, 0, 0, 255, 0, 251, 0, 0, 0, 0, 0, 0, 255, 0, 104, 84, 97, 98, 108, 101, 58, 255, 49, 48, 255, 53, 0, 0, 0, 0, 255, 0, 0, 0, 248, 0, 0, 0, 0, 251], region_epoch: Some(RegionEpoch { conf_ver: 7, version: 5, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 65, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 66, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 157, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1462, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 65, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=66] [region_id=64]
[2019/05/01 12:38:41.824 -07:00] [INFO] [peer.rs:1318] ["notify pd with change peer region"] [region="Region { id: 64, start_key: [109, 66, 111, 111, 116, 115, 116, 114, 255, 97, 255, 112, 75, 101, 121, 0, 0, 255, 0, 0, 251, 0, 0, 0, 0, 0, 255, 0, 0, 115, 0, 0, 0, 0, 0, 250], end_key: [109, 68, 66, 58, 49, 0, 0, 0, 255, 0, 251, 0, 0, 0, 0, 0, 0, 255, 0, 104, 84, 97, 98, 108, 101, 58, 255, 49, 48, 255, 53, 0, 0, 0, 0, 255, 0, 0, 0, 248, 0, 0, 0, 0, 251], region_epoch: Some(RegionEpoch { conf_ver: 8, version: 5, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 66, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 157, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1462, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=66] [region_id=64]
[2019/05/01 12:38:41.962 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 186], lock_version: 408089925211652100, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 186], lock_ttl: 3002, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:42.183 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=1505] [region_id=1125]
[2019/05/01 12:38:42.183 -07:00] [INFO] [unknown:719] ["[region 1125] 1505 became follower at term 0"]
[2019/05/01 12:38:42.183 -07:00] [INFO] [unknown:295] ["[region 1125] 1505 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:38:42.183 -07:00] [INFO] [unknown:719] ["[region 1125] 1505 became follower at term 1"]
[2019/05/01 12:38:42.183 -07:00] [INFO] [unknown:920] ["[region 1125] 1505 [term: 1] received a MsgHeartbeat message with higher term from 1128 [term: 6]"]
[2019/05/01 12:38:42.183 -07:00] [INFO] [unknown:719] ["[region 1125] 1505 became follower at term 6"]
[2019/05/01 12:38:42.198 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 186], lock_version: 408089925290295307, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 186], lock_ttl: 3002, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:42.226 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_1133_6_7_(default|lock|write).sst] [snap_key=1133_6_7]
[2019/05/01 12:38:42.239 -07:00] [INFO] [unknown:1792] ["[region 1133] 1503 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 7, term: 6]"]
[2019/05/01 12:38:42.239 -07:00] [INFO] [unknown:1816] ["[region 1133] 1503 restored progress of 1134 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:38:42.239 -07:00] [INFO] [unknown:1816] ["[region 1133] 1503 restored progress of 1135 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:38:42.239 -07:00] [INFO] [unknown:1816] ["[region 1133] 1503 restored progress of 1136 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:38:42.239 -07:00] [INFO] [unknown:1816] ["[region 1133] 1503 restored progress of 1503 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:38:42.239 -07:00] [INFO] [unknown:474] ["[region 1133] 1503 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 7, term: 6]"]
[2019/05/01 12:38:42.239 -07:00] [INFO] [unknown:1736] ["[region 1133] 1503 [commit: 7] restored snapshot [index: 7, term: 6]"]
[2019/05/01 12:38:42.239 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=1503] [region_id=1133]
[2019/05/01 12:38:42.239 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 7, truncated_state: Some(RaftTruncatedState { index: 7, term: 6, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 1133, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 102, 255, 105, 108, 101, 255, 95, 102, 111, 114, 109, 255, 97, 116, 255, 95, 99, 104, 101, 99, 107, 255, 0, 255, 0, 0, 0, 0, 0, 0, 0, 247, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 102, 255, 105, 108, 101, 255, 95, 102, 111, 114, 109, 255, 97, 116, 255, 95, 109, 97, 120, 0, 0, 253, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 137, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1134, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1135, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1136, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1503, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1503] [region_id=1133]
[2019/05/01 12:38:42.255 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 1133] 1503"]
[2019/05/01 12:38:42.255 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 1133, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 102, 255, 105, 108, 101, 255, 95, 102, 111, 114, 109, 255, 97, 116, 255, 95, 99, 104, 101, 99, 107, 255, 0, 255, 0, 0, 0, 0, 0, 0, 0, 247, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 102, 255, 105, 108, 101, 255, 95, 102, 111, 114, 109, 255, 97, 116, 255, 95, 109, 97, 120, 0, 0, 253, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 137, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1134, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1135, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1136, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1503, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1503] [region_id=1133]
[2019/05/01 12:38:42.255 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=1133]
[2019/05/01 12:38:42.272 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=16.6991ms] [region_id=1133]
[2019/05/01 12:38:42.420 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 181], lock_version: 408089925342724105, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 182], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:42.431 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 181], lock_version: 408089925342724105, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 182], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:42.727 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 191], lock_version: 408089925421367309, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 192], lock_ttl: 3002, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:43.052 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 187], lock_version: 408089925473796105, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 192], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:43.119 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 187], lock_version: 408089925473796105, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 192], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:43.243 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 187], lock_version: 408089925473796105, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 192], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:43.259 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 187], lock_version: 408089925473796105, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 189], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:43.317 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 187], lock_version: 408089925473796105, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 189], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:43.345 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 1503, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=8] [term=6] [peer_id=1503] [region_id=1133]
[2019/05/01 12:38:43.351 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 6, version: 137, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=1503] [region_id=1133]
[2019/05/01 12:38:43.351 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 1133, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 102, 255, 105, 108, 101, 255, 95, 102, 111, 114, 109, 255, 97, 116, 255, 95, 99, 104, 101, 99, 107, 255, 0, 255, 0, 0, 0, 0, 0, 0, 0, 247, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 102, 255, 105, 108, 101, 255, 95, 102, 111, 114, 109, 255, 97, 116, 255, 95, 109, 97, 120, 0, 0, 253, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 137, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1134, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1135, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1136, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1503, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1503, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1503] [region_id=1133]
[2019/05/01 12:38:43.377 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 187], lock_version: 408089925473796105, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 192], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:43.461 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 1134, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=9] [term=6] [peer_id=1503] [region_id=1133]
[2019/05/01 12:38:43.461 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 7, version: 137, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=1503] [region_id=1133]
[2019/05/01 12:38:43.461 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 1133, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 102, 255, 105, 108, 101, 255, 95, 102, 111, 114, 109, 255, 97, 116, 255, 95, 99, 104, 101, 99, 107, 255, 0, 255, 0, 0, 0, 0, 0, 0, 0, 247, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 102, 255, 105, 108, 101, 255, 95, 102, 111, 114, 109, 255, 97, 116, 255, 95, 109, 97, 120, 0, 0, 253, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 7, version: 137, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1134, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1135, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1136, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1503, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1134, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1503] [region_id=1133]
[2019/05/01 12:38:43.468 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 187], lock_version: 408089925473796105, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 192], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:43.484 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 187], lock_version: 408089925473796105, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 189], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:43.755 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 192], lock_version: 408089925644189701, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 192], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:43.874 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=1507] [region_id=1011]
[2019/05/01 12:38:43.874 -07:00] [INFO] [unknown:719] ["[region 1011] 1507 became follower at term 0"]
[2019/05/01 12:38:43.874 -07:00] [INFO] [unknown:295] ["[region 1011] 1507 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:38:43.874 -07:00] [INFO] [unknown:719] ["[region 1011] 1507 became follower at term 1"]
[2019/05/01 12:38:43.874 -07:00] [INFO] [unknown:920] ["[region 1011] 1507 [term: 1] received a MsgHeartbeat message with higher term from 1012 [term: 6]"]
[2019/05/01 12:38:43.874 -07:00] [INFO] [unknown:719] ["[region 1011] 1507 became follower at term 6"]
[2019/05/01 12:38:44.172 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 192], lock_version: 408089925788368904, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 192], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:44.186 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_1125_6_7_(default|lock|write).sst] [snap_key=1125_6_7]
[2019/05/01 12:38:44.204 -07:00] [INFO] [unknown:1792] ["[region 1125] 1505 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 7, term: 6]"]
[2019/05/01 12:38:44.204 -07:00] [INFO] [unknown:1816] ["[region 1125] 1505 restored progress of 1126 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:38:44.204 -07:00] [INFO] [unknown:1816] ["[region 1125] 1505 restored progress of 1127 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:38:44.204 -07:00] [INFO] [unknown:1816] ["[region 1125] 1505 restored progress of 1128 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:38:44.204 -07:00] [INFO] [unknown:1816] ["[region 1125] 1505 restored progress of 1505 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:38:44.204 -07:00] [INFO] [unknown:474] ["[region 1125] 1505 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 7, term: 6]"]
[2019/05/01 12:38:44.204 -07:00] [INFO] [unknown:1736] ["[region 1125] 1505 [commit: 7] restored snapshot [index: 7, term: 6]"]
[2019/05/01 12:38:44.204 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=1505] [region_id=1125]
[2019/05/01 12:38:44.204 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 7, truncated_state: Some(RaftTruncatedState { index: 7, term: 6, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 1125, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 102, 255, 97, 115, 116, 255, 95, 115, 104, 117, 116, 255, 100, 111, 255, 119, 110, 0, 0, 0, 0, 251, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 102, 255, 105, 108, 101, 255, 95, 102, 111, 114, 109, 255, 97, 116, 255, 0, 0, 0, 0, 0, 0, 249, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 137, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1126, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1127, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1128, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1505, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1505] [region_id=1125]
[2019/05/01 12:38:44.250 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 192], lock_version: 408089925788368904, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 192], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:44.254 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 1125] 1505"]
[2019/05/01 12:38:44.254 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 1125, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 102, 255, 97, 115, 116, 255, 95, 115, 104, 117, 116, 255, 100, 111, 255, 119, 110, 0, 0, 0, 0, 251, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 102, 255, 105, 108, 101, 255, 95, 102, 111, 114, 109, 255, 97, 116, 255, 0, 0, 0, 0, 0, 0, 249, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 137, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1126, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1127, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1128, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1505, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1505] [region_id=1125]
[2019/05/01 12:38:44.254 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=1125]
[2019/05/01 12:38:44.303 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=48.428ms] [region_id=1125]
[2019/05/01 12:38:44.583 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 194], lock_version: 408089925880119311, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 194], lock_ttl: 3064, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:44.795 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 191], lock_version: 408089925945655298, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 194], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:44.830 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 190], lock_version: 408089925932548098, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 190], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:44.880 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 190], lock_version: 408089925932548098, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 190], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:45.259 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 1505, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=8] [term=6] [peer_id=1505] [region_id=1125]
[2019/05/01 12:38:45.264 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 6, version: 137, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=1505] [region_id=1125]
[2019/05/01 12:38:45.264 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 1125, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 102, 255, 97, 115, 116, 255, 95, 115, 104, 117, 116, 255, 100, 111, 255, 119, 110, 0, 0, 0, 0, 251, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 102, 255, 105, 108, 101, 255, 95, 102, 111, 114, 109, 255, 97, 116, 255, 0, 0, 0, 0, 0, 0, 249, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 137, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1126, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1127, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1128, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1505, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1505, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1505] [region_id=1125]
[2019/05/01 12:38:45.368 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 1127, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=9] [term=6] [peer_id=1505] [region_id=1125]
[2019/05/01 12:38:45.368 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 7, version: 137, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=1505] [region_id=1125]
[2019/05/01 12:38:45.368 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 1125, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 102, 255, 97, 115, 116, 255, 95, 115, 104, 117, 116, 255, 100, 111, 255, 119, 110, 0, 0, 0, 0, 251, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 102, 255, 105, 108, 101, 255, 95, 102, 111, 114, 109, 255, 97, 116, 255, 0, 0, 0, 0, 0, 0, 249, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 7, version: 137, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1126, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1127, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1128, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1505, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1127, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1505] [region_id=1125]
[2019/05/01 12:38:45.546 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 191], lock_version: 408089926102941700, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 193], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:45.639 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 191], lock_version: 408089926102941700, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 193], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:45.797 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 191], lock_version: 408089926102941700, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 193], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:45.878 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_1011_6_7_(default|lock|write).sst] [snap_key=1011_6_7]
[2019/05/01 12:38:45.902 -07:00] [INFO] [unknown:1792] ["[region 1011] 1507 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 7, term: 6]"]
[2019/05/01 12:38:45.902 -07:00] [INFO] [unknown:1816] ["[region 1011] 1507 restored progress of 1012 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:38:45.902 -07:00] [INFO] [unknown:1816] ["[region 1011] 1507 restored progress of 1013 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:38:45.902 -07:00] [INFO] [unknown:1816] ["[region 1011] 1507 restored progress of 1014 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:38:45.902 -07:00] [INFO] [unknown:1816] ["[region 1011] 1507 restored progress of 1507 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:38:45.902 -07:00] [INFO] [unknown:474] ["[region 1011] 1507 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 7, term: 6]"]
[2019/05/01 12:38:45.902 -07:00] [INFO] [unknown:1736] ["[region 1011] 1507 [commit: 7] restored snapshot [index: 7, term: 6]"]
[2019/05/01 12:38:45.902 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=1507] [region_id=1011]
[2019/05/01 12:38:45.902 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 7, truncated_state: Some(RaftTruncatedState { index: 7, term: 6, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 1011, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 97, 255, 112, 105, 95, 255, 116, 114, 120, 95, 108, 255, 101, 118, 255, 101, 108, 0, 0, 0, 0, 251, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 97, 255, 117, 116, 111, 255, 101, 120, 116, 101, 110, 255, 100, 95, 255, 105, 110, 99, 114, 101, 109, 255, 101, 255, 110, 116, 0, 0, 0, 0, 0, 250, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 117, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1012, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1013, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1014, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1507, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1507] [region_id=1011]
[2019/05/01 12:38:45.927 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 195], lock_version: 408089926234013701, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 195], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:45.952 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 1011] 1507"]
[2019/05/01 12:38:45.952 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 1011, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 97, 255, 112, 105, 95, 255, 116, 114, 120, 95, 108, 255, 101, 118, 255, 101, 108, 0, 0, 0, 0, 251, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 97, 255, 117, 116, 111, 255, 101, 120, 116, 101, 110, 255, 100, 95, 255, 105, 110, 99, 114, 101, 109, 255, 101, 255, 110, 116, 0, 0, 0, 0, 0, 250, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 117, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1012, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1013, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1014, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1507, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1507] [region_id=1011]
[2019/05/01 12:38:45.952 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=1011]
[2019/05/01 12:38:45.996 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=43.779488ms] [region_id=1011]
[2019/05/01 12:38:46.022 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=1509] [region_id=1425]
[2019/05/01 12:38:46.022 -07:00] [INFO] [unknown:719] ["[region 1425] 1509 became follower at term 0"]
[2019/05/01 12:38:46.022 -07:00] [INFO] [unknown:295] ["[region 1425] 1509 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:38:46.022 -07:00] [INFO] [unknown:719] ["[region 1425] 1509 became follower at term 1"]
[2019/05/01 12:38:46.022 -07:00] [INFO] [unknown:920] ["[region 1425] 1509 [term: 1] received a MsgHeartbeat message with higher term from 1428 [term: 6]"]
[2019/05/01 12:38:46.022 -07:00] [INFO] [unknown:719] ["[region 1425] 1509 became follower at term 6"]
[2019/05/01 12:38:46.527 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 197], lock_version: 408089926365085698, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 197], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:46.657 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 196], lock_version: 408089926430621700, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 198], lock_ttl: 3056, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:46.754 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 195], lock_version: 408089926483050505, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 195], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:46.854 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 198], lock_version: 408089926509264909, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 201], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:46.912 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 1507, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=8] [term=6] [peer_id=1507] [region_id=1011]
[2019/05/01 12:38:46.912 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 6, version: 117, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=1507] [region_id=1011]
[2019/05/01 12:38:46.912 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 1011, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 97, 255, 112, 105, 95, 255, 116, 114, 120, 95, 108, 255, 101, 118, 255, 101, 108, 0, 0, 0, 0, 251, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 97, 255, 117, 116, 111, 255, 101, 120, 116, 101, 110, 255, 100, 95, 255, 105, 110, 99, 114, 101, 109, 255, 101, 255, 110, 116, 0, 0, 0, 0, 0, 250, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 117, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1012, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1013, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1014, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1507, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1507, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1507] [region_id=1011]
[2019/05/01 12:38:46.983 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 1013, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=9] [term=6] [peer_id=1507] [region_id=1011]
[2019/05/01 12:38:46.983 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 7, version: 117, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=1507] [region_id=1011]
[2019/05/01 12:38:46.983 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 1011, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 97, 255, 112, 105, 95, 255, 116, 114, 120, 95, 108, 255, 101, 118, 255, 101, 108, 0, 0, 0, 0, 251, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 97, 255, 117, 116, 111, 255, 101, 120, 116, 101, 110, 255, 100, 95, 255, 105, 110, 99, 114, 101, 109, 255, 101, 255, 110, 116, 0, 0, 0, 0, 0, 250, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 7, version: 117, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1012, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1013, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1014, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1507, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1013, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1507] [region_id=1011]
[2019/05/01 12:38:47.127 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 201], lock_version: 408089926574800904, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 201], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:47.558 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 202], lock_version: 408089926666551303, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 202], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:47.614 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 202], lock_version: 408089926666551303, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 202], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:47.662 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 198], lock_version: 408089926718980108, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 202], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:47.921 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=1511] [region_id=349]
[2019/05/01 12:38:47.921 -07:00] [INFO] [unknown:719] ["[region 349] 1511 became follower at term 0"]
[2019/05/01 12:38:47.921 -07:00] [INFO] [unknown:295] ["[region 349] 1511 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:38:47.921 -07:00] [INFO] [unknown:719] ["[region 349] 1511 became follower at term 1"]
[2019/05/01 12:38:47.921 -07:00] [INFO] [unknown:920] ["[region 349] 1511 [term: 1] received a MsgHeartbeat message with higher term from 351 [term: 7]"]
[2019/05/01 12:38:47.921 -07:00] [INFO] [unknown:719] ["[region 349] 1511 became follower at term 7"]
[2019/05/01 12:38:48.036 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_1425_6_7_(default|lock|write).sst] [snap_key=1425_6_7]
[2019/05/01 12:38:48.057 -07:00] [INFO] [unknown:1792] ["[region 1425] 1509 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 7, term: 6]"]
[2019/05/01 12:38:48.057 -07:00] [INFO] [unknown:1816] ["[region 1425] 1509 restored progress of 1426 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:38:48.057 -07:00] [INFO] [unknown:1816] ["[region 1425] 1509 restored progress of 1427 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:38:48.057 -07:00] [INFO] [unknown:1816] ["[region 1425] 1509 restored progress of 1428 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:38:48.057 -07:00] [INFO] [unknown:1816] ["[region 1425] 1509 restored progress of 1509 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:38:48.057 -07:00] [INFO] [unknown:474] ["[region 1425] 1509 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 7, term: 6]"]
[2019/05/01 12:38:48.057 -07:00] [INFO] [unknown:1736] ["[region 1425] 1509 [commit: 7] restored snapshot [index: 7, term: 6]"]
[2019/05/01 12:38:48.057 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=1509] [region_id=1425]
[2019/05/01 12:38:48.057 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 7, truncated_state: Some(RaftTruncatedState { index: 7, term: 6, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 1425, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 114, 255, 97, 110, 100, 255, 111, 109, 95, 114, 101, 255, 97, 100, 255, 95, 97, 104, 101, 97, 100, 255, 0, 255, 0, 0, 0, 0, 0, 0, 0, 247, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 114, 255, 101, 97, 100, 255, 95, 97, 104, 101, 97, 255, 100, 95, 255, 116, 104, 114, 101, 115, 104, 255, 111, 255, 108, 100, 0, 0, 0, 0, 0, 250, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 197, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1426, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1427, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1428, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1509, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1509] [region_id=1425]
[2019/05/01 12:38:48.098 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 1425] 1509"]
[2019/05/01 12:38:48.098 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 1425, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 114, 255, 97, 110, 100, 255, 111, 109, 95, 114, 101, 255, 97, 100, 255, 95, 97, 104, 101, 97, 100, 255, 0, 255, 0, 0, 0, 0, 0, 0, 0, 247, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 114, 255, 101, 97, 100, 255, 95, 97, 104, 101, 97, 255, 100, 95, 255, 116, 104, 114, 101, 115, 104, 255, 111, 255, 108, 100, 0, 0, 0, 0, 0, 250, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 197, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1426, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1427, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1428, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1509, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1509] [region_id=1425]
[2019/05/01 12:38:48.099 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=1425]
[2019/05/01 12:38:48.154 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=55.195881ms] [region_id=1425]
[2019/05/01 12:38:48.243 -07:00] [INFO] [unknown:1625] ["[region 1133] 1503 [term 6] received MsgTimeoutNow from 1136 and starts an election to get leadership."]
[2019/05/01 12:38:48.243 -07:00] [INFO] [unknown:739] ["[region 1133] 1503 became candidate at term 7"]
[2019/05/01 12:38:48.243 -07:00] [INFO] [unknown:854] ["[region 1133] 1503 received MsgRequestVoteResponse from 1503 at term 7"]
[2019/05/01 12:38:48.243 -07:00] [INFO] [unknown:828] ["[region 1133] 1503 [logterm: 6, index: 9] sent MsgRequestVote request to 1136 at term 7"]
[2019/05/01 12:38:48.243 -07:00] [INFO] [unknown:828] ["[region 1133] 1503 [logterm: 6, index: 9] sent MsgRequestVote request to 1135 at term 7"]
[2019/05/01 12:38:48.319 -07:00] [INFO] [unknown:854] ["[region 1133] 1503 received MsgRequestVoteResponse from 1135 at term 7"]
[2019/05/01 12:38:48.319 -07:00] [INFO] [unknown:1550] ["[region 1133] 1503 [quorum:2] has received 2 MsgRequestVoteResponse votes and 0 vote rejections"]
[2019/05/01 12:38:48.319 -07:00] [INFO] [unknown:789] ["[region 1133] 1503 became leader at term 7"]
[2019/05/01 12:38:48.344 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 205], lock_version: 408089926823837699, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 205], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:48.667 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 203], lock_version: 408089926889373699, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 205], lock_ttl: 3199, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:48.966 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 204], lock_version: 408089926968016901, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 204], lock_ttl: 3252, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:49.101 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 1509, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=8] [term=6] [peer_id=1509] [region_id=1425]
[2019/05/01 12:38:49.107 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 6, version: 197, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=1509] [region_id=1425]
[2019/05/01 12:38:49.107 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 1425, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 114, 255, 97, 110, 100, 255, 111, 109, 95, 114, 101, 255, 97, 100, 255, 95, 97, 104, 101, 97, 100, 255, 0, 255, 0, 0, 0, 0, 0, 0, 0, 247, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 114, 255, 101, 97, 100, 255, 95, 97, 104, 101, 97, 255, 100, 95, 255, 116, 104, 114, 101, 115, 104, 255, 111, 255, 108, 100, 0, 0, 0, 0, 0, 250, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 197, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1426, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1427, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1428, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1509, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1509, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1509] [region_id=1425]
[2019/05/01 12:38:49.130 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 206], lock_version: 408089927085981699, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 206], lock_ttl: 3002, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:49.174 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 1427, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=9] [term=6] [peer_id=1509] [region_id=1425]
[2019/05/01 12:38:49.174 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 7, version: 197, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=1509] [region_id=1425]
[2019/05/01 12:38:49.174 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 1425, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 114, 255, 97, 110, 100, 255, 111, 109, 95, 114, 101, 255, 97, 100, 255, 95, 97, 104, 101, 97, 100, 255, 0, 255, 0, 0, 0, 0, 0, 0, 0, 247, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 114, 255, 101, 97, 100, 255, 95, 97, 104, 101, 97, 255, 100, 95, 255, 116, 104, 114, 101, 115, 104, 255, 111, 255, 108, 100, 0, 0, 0, 0, 0, 250, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 7, version: 197, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1426, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1427, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1428, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1509, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1427, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1509] [region_id=1425]
[2019/05/01 12:38:49.185 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=1512] [region_id=1063]
[2019/05/01 12:38:49.185 -07:00] [INFO] [unknown:719] ["[region 1063] 1512 became follower at term 0"]
[2019/05/01 12:38:49.185 -07:00] [INFO] [unknown:295] ["[region 1063] 1512 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:38:49.185 -07:00] [INFO] [unknown:719] ["[region 1063] 1512 became follower at term 1"]
[2019/05/01 12:38:49.185 -07:00] [INFO] [unknown:920] ["[region 1063] 1512 [term: 1] received a MsgHeartbeat message with higher term from 1407 [term: 7]"]
[2019/05/01 12:38:49.185 -07:00] [INFO] [unknown:719] ["[region 1063] 1512 became follower at term 7"]
[2019/05/01 12:38:49.190 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 206], lock_version: 408089927085981699, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 206], lock_ttl: 3002, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:49.236 -07:00] [INFO] [pd.rs:558] ["try to change peer"] [peer="Peer { id: 1553, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [change_type=AddLearnerNode] [region_id=18]
[2019/05/01 12:38:49.236 -07:00] [INFO] [peer.rs:1953] ["propose conf change peer"] [change_peer=1553] [change_type=AddLearnerNode] [peer_id=49] [region_id=18]
[2019/05/01 12:38:49.262 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 208], lock_version: 408089927112196105, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 208], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:49.281 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddLearnerNode, peer: Some(Peer { id: 1553, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=19] [term=7] [peer_id=49] [region_id=18]
[2019/05/01 12:38:49.281 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 5, version: 5, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddLearner] [peer_id=49] [region_id=18]
[2019/05/01 12:38:49.281 -07:00] [INFO] [apply.rs:1476] ["add learner successfully"] [region="Region { id: 18, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 7, 95, 114, 128, 0, 0, 0, 0, 255, 0, 234, 97, 0, 0, 0, 0, 0, 250], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 9, 0, 0, 0, 0, 0, 0, 0, 248], region_epoch: Some(RegionEpoch { conf_ver: 5, version: 5, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 19, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 49, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 165, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1553, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=49] [region_id=18]
[2019/05/01 12:38:49.308 -07:00] [INFO] [peer.rs:1318] ["notify pd with change peer region"] [region="Region { id: 18, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 7, 95, 114, 128, 0, 0, 0, 0, 255, 0, 234, 97, 0, 0, 0, 0, 0, 250], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 9, 0, 0, 0, 0, 0, 0, 0, 248], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 5, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 19, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 49, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 165, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1553, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=49] [region_id=18]
[2019/05/01 12:38:49.684 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 204], lock_version: 408089927217053703, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 204], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:49.880 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 204], lock_version: 408089927282589699, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 204], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:49.924 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_349_7_11_(default|lock|write).sst] [snap_key=349_7_11]
[2019/05/01 12:38:49.945 -07:00] [INFO] [unknown:1792] ["[region 349] 1511 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 11, term: 7]"]
[2019/05/01 12:38:49.945 -07:00] [INFO] [unknown:1816] ["[region 349] 1511 restored progress of 351 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:38:49.945 -07:00] [INFO] [unknown:1816] ["[region 349] 1511 restored progress of 352 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:38:49.945 -07:00] [INFO] [unknown:1816] ["[region 349] 1511 restored progress of 1104 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:38:49.945 -07:00] [INFO] [unknown:1816] ["[region 349] 1511 restored progress of 1511 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:38:49.945 -07:00] [INFO] [unknown:474] ["[region 349] 1511 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 11, term: 7]"]
[2019/05/01 12:38:49.945 -07:00] [INFO] [unknown:1736] ["[region 349] 1511 [commit: 11] restored snapshot [index: 11, term: 7]"]
[2019/05/01 12:38:49.945 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=1511] [region_id=349]
[2019/05/01 12:38:49.945 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 11, truncated_state: Some(RaftTruncatedState { index: 11, term: 7, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 349, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 108, 111, 99, 255, 107, 95, 101, 110, 255, 99, 114, 121, 255, 112, 116, 105, 111, 110, 255, 95, 109, 255, 111, 100, 101, 0, 0, 0, 252, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 117, 108, 107, 255, 95, 105, 110, 115, 255, 101, 114, 116, 255, 95, 98, 117, 102, 102, 255, 101, 114, 255, 95, 115, 105, 122, 101, 0, 254, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 37, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 351, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 352, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1104, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1511, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1511] [region_id=349]
[2019/05/01 12:38:49.948 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 204], lock_version: 408089927282589699, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 204], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:49.974 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 349] 1511"]
[2019/05/01 12:38:49.974 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 349, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 108, 111, 99, 255, 107, 95, 101, 110, 255, 99, 114, 121, 255, 112, 116, 105, 111, 110, 255, 95, 109, 255, 111, 100, 101, 0, 0, 0, 252, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 117, 108, 107, 255, 95, 105, 110, 115, 255, 101, 114, 116, 255, 95, 98, 117, 102, 102, 255, 101, 114, 255, 95, 115, 105, 122, 101, 0, 254, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 37, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 351, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 352, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1104, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1511, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1511] [region_id=349]
[2019/05/01 12:38:49.974 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=349]
[2019/05/01 12:38:50.032 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=58.400308ms] [region_id=349]
[2019/05/01 12:38:50.035 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 208], lock_version: 408089927308804106, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 208], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:50.237 -07:00] [INFO] [pd.rs:558] ["try to change peer"] [peer="Peer { id: 1554, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [change_type=AddLearnerNode] [region_id=321]
[2019/05/01 12:38:50.237 -07:00] [INFO] [peer.rs:1953] ["propose conf change peer"] [change_peer=1554] [change_type=AddLearnerNode] [peer_id=442] [region_id=321]
[2019/05/01 12:38:50.332 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddLearnerNode, peer: Some(Peer { id: 1554, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=11] [term=7] [peer_id=442] [region_id=321]
[2019/05/01 12:38:50.332 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 8, version: 20, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddLearner] [peer_id=442] [region_id=321]
[2019/05/01 12:38:50.332 -07:00] [INFO] [apply.rs:1476] ["add learner successfully"] [region="Region { id: 321, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 114, 128, 0, 0, 0, 0, 255, 1, 212, 197, 0, 0, 0, 0, 0, 250], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 114, 128, 0, 0, 0, 0, 255, 1, 212, 199, 0, 0, 0, 0, 0, 250], region_epoch: Some(RegionEpoch { conf_ver: 8, version: 20, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 323, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 324, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 442, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1554, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=442] [region_id=321]
[2019/05/01 12:38:50.363 -07:00] [INFO] [peer.rs:1318] ["notify pd with change peer region"] [region="Region { id: 321, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 114, 128, 0, 0, 0, 0, 255, 1, 212, 197, 0, 0, 0, 0, 0, 250], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 114, 128, 0, 0, 0, 0, 255, 1, 212, 199, 0, 0, 0, 0, 0, 250], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 20, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 323, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 324, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 442, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1554, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=442] [region_id=321]
[2019/05/01 12:38:50.366 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 208], lock_version: 408089927374340097, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 208], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:50.380 -07:00] [INFO] [peer_storage.rs:759] ["requesting snapshot"] [peer_id=49] [region_id=18]
[2019/05/01 12:38:50.385 -07:00] [INFO] [snap.rs:757] ["scan snapshot of one cf"] [size=0] [key_count=0] [cf=default] [snapshot=/opt/tidb/data/kv/snap/gen_18_7_19_(default|lock|write).sst] [region_id=18]
[2019/05/01 12:38:50.385 -07:00] [INFO] [snap.rs:757] ["scan snapshot of one cf"] [size=0] [key_count=0] [cf=lock] [snapshot=/opt/tidb/data/kv/snap/gen_18_7_19_(default|lock|write).sst] [region_id=18]
[2019/05/01 12:38:50.385 -07:00] [INFO] [snap.rs:757] ["scan snapshot of one cf"] [size=138] [key_count=3] [cf=write] [snapshot=/opt/tidb/data/kv/snap/gen_18_7_19_(default|lock|write).sst] [region_id=18]
[2019/05/01 12:38:50.404 -07:00] [INFO] [snap.rs:875] ["scan snapshot"] [takes=23.342675ms] [size=1367] [key_count=3] [snapshot=/opt/tidb/data/kv/snap/gen_18_7_19_(default|lock|write).sst] [region_id=18]
[2019/05/01 12:38:50.437 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 208], lock_version: 408089927374340097, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 208], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:50.521 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 206], lock_version: 408089927308804099, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 206], lock_ttl: 3251, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:50.628 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 206], lock_version: 408089927492304917, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 210], lock_ttl: 3003, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:50.643 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 206], lock_version: 408089927492304917, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 206], lock_ttl: 3003, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:50.817 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 206], lock_version: 408089927505412102, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 211], lock_ttl: 3078, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:50.884 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 212], lock_version: 408089927557840909, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 212], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:50.913 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 212], lock_version: 408089927557840909, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 212], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:50.934 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 212], lock_version: 408089927557840909, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 213], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:50.969 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 212], lock_version: 408089927557840909, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 212], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:50.981 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 1511, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=12] [term=7] [peer_id=1511] [region_id=349]
[2019/05/01 12:38:50.981 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 9, version: 37, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=1511] [region_id=349]
[2019/05/01 12:38:50.981 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 349, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 108, 111, 99, 255, 107, 95, 101, 110, 255, 99, 114, 121, 255, 112, 116, 105, 111, 110, 255, 95, 109, 255, 111, 100, 101, 0, 0, 0, 252, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 117, 108, 107, 255, 95, 105, 110, 115, 255, 101, 114, 116, 255, 95, 98, 117, 102, 102, 255, 101, 114, 255, 95, 115, 105, 122, 101, 0, 254, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 37, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 351, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 352, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1104, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1511, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1511, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1511] [region_id=349]
[2019/05/01 12:38:51.043 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 352, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=13] [term=7] [peer_id=1511] [region_id=349]
[2019/05/01 12:38:51.043 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 10, version: 37, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=1511] [region_id=349]
[2019/05/01 12:38:51.043 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 349, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 108, 111, 99, 255, 107, 95, 101, 110, 255, 99, 114, 121, 255, 112, 116, 105, 111, 110, 255, 95, 109, 255, 111, 100, 101, 0, 0, 0, 252, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 117, 108, 107, 255, 95, 105, 110, 115, 255, 101, 114, 116, 255, 95, 98, 117, 102, 102, 255, 101, 114, 255, 95, 115, 105, 122, 101, 0, 254, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 10, version: 37, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 351, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 352, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1104, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1511, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 352, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1511] [region_id=349]
[2019/05/01 12:38:51.080 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddLearnerNode, peer: Some(Peer { id: 1555, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=12] [term=7] [peer_id=330] [region_id=30]
[2019/05/01 12:38:51.080 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 5, version: 9, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddLearner] [peer_id=330] [region_id=30]
[2019/05/01 12:38:51.080 -07:00] [INFO] [apply.rs:1476] ["add learner successfully"] [region="Region { id: 30, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 44, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 49, 0, 0, 0, 0, 0, 0, 0, 248], region_epoch: Some(RegionEpoch { conf_ver: 5, version: 9, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 31, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 55, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 330, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1555, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=330] [region_id=30]
[2019/05/01 12:38:51.146 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 213], lock_version: 408089927623376905, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 213], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:51.195 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_1063_7_11_(default|lock|write).sst] [snap_key=1063_7_11]
[2019/05/01 12:38:51.206 -07:00] [INFO] [unknown:1792] ["[region 1063] 1512 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 11, term: 7]"]
[2019/05/01 12:38:51.206 -07:00] [INFO] [unknown:1816] ["[region 1063] 1512 restored progress of 1064 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:38:51.206 -07:00] [INFO] [unknown:1816] ["[region 1063] 1512 restored progress of 1066 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:38:51.206 -07:00] [INFO] [unknown:1816] ["[region 1063] 1512 restored progress of 1407 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:38:51.206 -07:00] [INFO] [unknown:1816] ["[region 1063] 1512 restored progress of 1512 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:38:51.206 -07:00] [INFO] [unknown:474] ["[region 1063] 1512 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 11, term: 7]"]
[2019/05/01 12:38:51.206 -07:00] [INFO] [unknown:1736] ["[region 1063] 1512 [commit: 11] restored snapshot [index: 11, term: 7]"]
[2019/05/01 12:38:51.206 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=1512] [region_id=1063]
[2019/05/01 12:38:51.206 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 11, truncated_state: Some(RaftTruncatedState { index: 11, term: 7, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 1063, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 99, 255, 104, 97, 110, 255, 103, 101, 95, 98, 117, 255, 102, 102, 255, 101, 114, 95, 109, 97, 120, 255, 95, 255, 115, 105, 122, 101, 0, 0, 0, 252, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 99, 255, 104, 97, 110, 255, 103, 101, 95, 98, 117, 255, 102, 102, 255, 101, 114, 105, 110, 103, 0, 254, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 127, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1064, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1066, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1407, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1512, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1512] [region_id=1063]
[2019/05/01 12:38:51.226 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 1063, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 99, 255, 104, 97, 110, 255, 103, 101, 95, 98, 117, 255, 102, 102, 255, 101, 114, 95, 109, 97, 120, 255, 95, 255, 115, 105, 122, 101, 0, 0, 0, 252, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 99, 255, 104, 97, 110, 255, 103, 101, 95, 98, 117, 255, 102, 102, 255, 101, 114, 105, 110, 103, 0, 254, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 127, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1064, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1066, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1407, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1512, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1512] [region_id=1063]
[2019/05/01 12:38:51.226 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 1063] 1512"]
[2019/05/01 12:38:51.226 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=1063]
[2019/05/01 12:38:51.242 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=16.022557ms] [region_id=1063]
[2019/05/01 12:38:51.244 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 210], lock_version: 408089927649591306, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 210], lock_ttl: 3059, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:51.277 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 211], lock_version: 408089927649591302, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 211], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:51.469 -07:00] [INFO] [peer_storage.rs:759] ["requesting snapshot"] [peer_id=442] [region_id=321]
[2019/05/01 12:38:51.470 -07:00] [INFO] [snap.rs:757] ["scan snapshot of one cf"] [size=274] [key_count=2] [cf=default] [snapshot=/opt/tidb/data/kv/snap/gen_321_7_11_(default|lock|write).sst] [region_id=321]
[2019/05/01 12:38:51.470 -07:00] [INFO] [snap.rs:757] ["scan snapshot of one cf"] [size=0] [key_count=0] [cf=lock] [snapshot=/opt/tidb/data/kv/snap/gen_321_7_11_(default|lock|write).sst] [region_id=321]
[2019/05/01 12:38:51.470 -07:00] [INFO] [snap.rs:757] ["scan snapshot of one cf"] [size=92] [key_count=2] [cf=write] [snapshot=/opt/tidb/data/kv/snap/gen_321_7_11_(default|lock|write).sst] [region_id=321]
[2019/05/01 12:38:51.501 -07:00] [INFO] [snap.rs:875] ["scan snapshot"] [takes=31.658621ms] [size=2511] [key_count=4] [snapshot=/opt/tidb/data/kv/snap/gen_321_7_11_(default|lock|write).sst] [region_id=321]
[2019/05/01 12:38:51.746 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 213], lock_version: 408089927793770502, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 213], lock_ttl: 3002, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:51.770 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 215], lock_version: 408089927806877701, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 215], lock_ttl: 3002, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:51.778 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 215], lock_version: 408089927806877701, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 215], lock_ttl: 3002, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:51.879 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 216], lock_version: 408089927806877706, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 216], lock_ttl: 3093, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:51.895 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 215], lock_version: 408089927806877712, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 215], lock_ttl: 3085, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:51.937 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 215], lock_version: 408089927806877712, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 215], lock_ttl: 3085, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:52.034 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 214], lock_version: 408089927872413701, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 214], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:52.066 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 217], lock_version: 408089927872413705, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 217], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:52.140 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 214], lock_version: 408089927885520909, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 214], lock_ttl: 3003, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:52.158 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 218], lock_version: 408089927872413715, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 218], lock_ttl: 3072, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:52.221 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 216], lock_version: 408089927911735314, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 217], lock_ttl: 3002, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:52.229 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 1512, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=12] [term=7] [peer_id=1512] [region_id=1063]
[2019/05/01 12:38:52.229 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 9, version: 127, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=1512] [region_id=1063]
[2019/05/01 12:38:52.229 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 1063, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 99, 255, 104, 97, 110, 255, 103, 101, 95, 98, 117, 255, 102, 102, 255, 101, 114, 95, 109, 97, 120, 255, 95, 255, 115, 105, 122, 101, 0, 0, 0, 252, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 99, 255, 104, 97, 110, 255, 103, 101, 95, 98, 117, 255, 102, 102, 255, 101, 114, 105, 110, 103, 0, 254, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 127, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1064, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1066, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1407, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1512, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1512, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1512] [region_id=1063]
[2019/05/01 12:38:52.304 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 1066, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=13] [term=7] [peer_id=1512] [region_id=1063]
[2019/05/01 12:38:52.304 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 10, version: 127, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=1512] [region_id=1063]
[2019/05/01 12:38:52.304 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 1063, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 99, 255, 104, 97, 110, 255, 103, 101, 95, 98, 117, 255, 102, 102, 255, 101, 114, 95, 109, 97, 120, 255, 95, 255, 115, 105, 122, 101, 0, 0, 0, 252, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 99, 255, 104, 97, 110, 255, 103, 101, 95, 98, 117, 255, 102, 102, 255, 101, 114, 105, 110, 103, 0, 254, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 10, version: 127, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1064, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1066, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1407, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1512, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1066, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1512] [region_id=1063]
[2019/05/01 12:38:52.383 -07:00] [INFO] [unknown:841] ["New connected subchannel at 0x7f8582c118a0 for subchannel 0x7f8640481800"]
[2019/05/01 12:38:52.404 -07:00] [INFO] [snap.rs:389] ["sent snapshot"] [duration=21.98608ms] [size=1367] [snap_key=18_7_19] [region_id=18]
[2019/05/01 12:38:52.404 -07:00] [INFO] [peer.rs:538] ["report snapshot status"] [status=Finish] [to="Peer { id: 1553, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=49] [region_id=18]
[2019/05/01 12:38:53.036 -07:00] [INFO] [unknown:1625] ["[region 1425] 1509 [term 6] received MsgTimeoutNow from 1428 and starts an election to get leadership."]
[2019/05/01 12:38:53.036 -07:00] [INFO] [unknown:739] ["[region 1425] 1509 became candidate at term 7"]
[2019/05/01 12:38:53.036 -07:00] [INFO] [unknown:854] ["[region 1425] 1509 received MsgRequestVoteResponse from 1509 at term 7"]
[2019/05/01 12:38:53.036 -07:00] [INFO] [unknown:828] ["[region 1425] 1509 [logterm: 6, index: 9] sent MsgRequestVote request to 1428 at term 7"]
[2019/05/01 12:38:53.036 -07:00] [INFO] [unknown:828] ["[region 1425] 1509 [logterm: 6, index: 9] sent MsgRequestVote request to 1426 at term 7"]
[2019/05/01 12:38:53.039 -07:00] [INFO] [unknown:1625] ["[region 1125] 1505 [term 6] received MsgTimeoutNow from 1128 and starts an election to get leadership."]
[2019/05/01 12:38:53.039 -07:00] [INFO] [unknown:739] ["[region 1125] 1505 became candidate at term 7"]
[2019/05/01 12:38:53.039 -07:00] [INFO] [unknown:854] ["[region 1125] 1505 received MsgRequestVoteResponse from 1505 at term 7"]
[2019/05/01 12:38:53.039 -07:00] [INFO] [unknown:828] ["[region 1125] 1505 [logterm: 6, index: 9] sent MsgRequestVote request to 1128 at term 7"]
[2019/05/01 12:38:53.039 -07:00] [INFO] [unknown:828] ["[region 1125] 1505 [logterm: 6, index: 9] sent MsgRequestVote request to 1126 at term 7"]
[2019/05/01 12:38:53.057 -07:00] [INFO] [unknown:854] ["[region 1425] 1509 received MsgRequestVoteResponse from 1428 at term 7"]
[2019/05/01 12:38:53.057 -07:00] [INFO] [unknown:1550] ["[region 1425] 1509 [quorum:2] has received 2 MsgRequestVoteResponse votes and 0 vote rejections"]
[2019/05/01 12:38:53.057 -07:00] [INFO] [unknown:789] ["[region 1425] 1509 became leader at term 7"]
[2019/05/01 12:38:53.073 -07:00] [INFO] [unknown:854] ["[region 1125] 1505 received MsgRequestVoteResponse from 1128 at term 7"]
[2019/05/01 12:38:53.073 -07:00] [INFO] [unknown:1550] ["[region 1125] 1505 [quorum:2] has received 2 MsgRequestVoteResponse votes and 0 vote rejections"]
[2019/05/01 12:38:53.073 -07:00] [INFO] [unknown:789] ["[region 1125] 1505 became leader at term 7"]
[2019/05/01 12:38:53.114 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=1556] [region_id=99]
[2019/05/01 12:38:53.114 -07:00] [INFO] [unknown:719] ["[region 99] 1556 became follower at term 0"]
[2019/05/01 12:38:53.114 -07:00] [INFO] [unknown:295] ["[region 99] 1556 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:38:53.114 -07:00] [INFO] [unknown:719] ["[region 99] 1556 became follower at term 1"]
[2019/05/01 12:38:53.122 -07:00] [INFO] [unknown:920] ["[region 99] 1556 [term: 1] received a MsgHeartbeat message with higher term from 170 [term: 7]"]
[2019/05/01 12:38:53.122 -07:00] [INFO] [unknown:719] ["[region 99] 1556 became follower at term 7"]
[2019/05/01 12:38:53.252 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 218], lock_version: 408089928160772099, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 218], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:53.259 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 219], lock_version: 408089928160772102, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 220], lock_ttl: 3089, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:53.383 -07:00] [INFO] [pd.rs:558] ["try to change peer"] [peer="Peer { id: 1553, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [change_type=AddNode] [region_id=18]
[2019/05/01 12:38:53.383 -07:00] [INFO] [peer.rs:1953] ["propose conf change peer"] [change_peer=1553] [change_type=AddNode] [peer_id=49] [region_id=18]
[2019/05/01 12:38:53.429 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 1553, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=20] [term=7] [peer_id=49] [region_id=18]
[2019/05/01 12:38:53.429 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 6, version: 5, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=49] [region_id=18]
[2019/05/01 12:38:53.429 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 18, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 7, 95, 114, 128, 0, 0, 0, 0, 255, 0, 234, 97, 0, 0, 0, 0, 0, 250], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 9, 0, 0, 0, 0, 0, 0, 0, 248], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 5, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 19, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 49, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 165, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1553, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1553, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=49] [region_id=18]
[2019/05/01 12:38:53.437 -07:00] [INFO] [peer.rs:1318] ["notify pd with change peer region"] [region="Region { id: 18, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 7, 95, 114, 128, 0, 0, 0, 0, 255, 0, 234, 97, 0, 0, 0, 0, 0, 250], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 9, 0, 0, 0, 0, 0, 0, 0, 248], region_epoch: Some(RegionEpoch { conf_ver: 7, version: 5, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 19, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 49, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 165, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1553, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=49] [region_id=18]
[2019/05/01 12:38:53.444 -07:00] [INFO] [pd.rs:558] ["try to change peer"] [peer="Peer { id: 165, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [change_type=RemoveNode] [region_id=18]
[2019/05/01 12:38:53.444 -07:00] [INFO] [peer.rs:1953] ["propose conf change peer"] [change_peer=165] [change_type=RemoveNode] [peer_id=49] [region_id=18]
[2019/05/01 12:38:53.482 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 165, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=21] [term=7] [peer_id=49] [region_id=18]
[2019/05/01 12:38:53.482 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 7, version: 5, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=49] [region_id=18]
[2019/05/01 12:38:53.482 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 18, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 7, 95, 114, 128, 0, 0, 0, 0, 255, 0, 234, 97, 0, 0, 0, 0, 0, 250], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 9, 0, 0, 0, 0, 0, 0, 0, 248], region_epoch: Some(RegionEpoch { conf_ver: 7, version: 5, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 19, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 49, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 165, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1553, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 165, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=49] [region_id=18]
[2019/05/01 12:38:53.482 -07:00] [INFO] [pd.rs:558] ["try to change peer"] [peer="Peer { id: 165, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [change_type=RemoveNode] [region_id=18]
[2019/05/01 12:38:53.482 -07:00] [INFO] [peer.rs:1927] ["there is a pending conf change, try later"] [peer_id=49] [region_id=18]
[2019/05/01 12:38:53.483 -07:00] [INFO] [unknown:841] ["New connected subchannel at 0x7f859006e940 for subchannel 0x7f8640481a00"]
[2019/05/01 12:38:53.498 -07:00] [INFO] [peer.rs:1318] ["notify pd with change peer region"] [region="Region { id: 18, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 7, 95, 114, 128, 0, 0, 0, 0, 255, 0, 234, 97, 0, 0, 0, 0, 0, 250], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 9, 0, 0, 0, 0, 0, 0, 0, 248], region_epoch: Some(RegionEpoch { conf_ver: 8, version: 5, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 19, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 49, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1553, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=49] [region_id=18]
[2019/05/01 12:38:53.499 -07:00] [INFO] [snap.rs:389] ["sent snapshot"] [duration=16.50017ms] [size=2511] [snap_key=321_7_11] [region_id=321]
[2019/05/01 12:38:53.499 -07:00] [INFO] [peer.rs:538] ["report snapshot status"] [status=Finish] [to="Peer { id: 1554, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=442] [region_id=321]
[2019/05/01 12:38:53.791 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 224], lock_version: 408089928331165700, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 224], lock_ttl: 3002, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:53.893 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 223], lock_version: 408089928344272906, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 223], lock_ttl: 3003, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:53.950 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=1557] [region_id=460]
[2019/05/01 12:38:53.950 -07:00] [INFO] [unknown:719] ["[region 460] 1557 became follower at term 0"]
[2019/05/01 12:38:53.950 -07:00] [INFO] [unknown:295] ["[region 460] 1557 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:38:53.950 -07:00] [INFO] [unknown:719] ["[region 460] 1557 became follower at term 1"]
[2019/05/01 12:38:53.950 -07:00] [INFO] [unknown:920] ["[region 460] 1557 [term: 1] received a MsgHeartbeat message with higher term from 463 [term: 7]"]
[2019/05/01 12:38:53.950 -07:00] [INFO] [unknown:719] ["[region 460] 1557 became follower at term 7"]
[2019/05/01 12:38:54.405 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 223], lock_version: 408089928475344900, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 223], lock_ttl: 3075, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:54.445 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 225], lock_version: 408089928488452100, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 225], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:54.483 -07:00] [INFO] [pd.rs:558] ["try to change peer"] [peer="Peer { id: 1554, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [change_type=AddNode] [region_id=321]
[2019/05/01 12:38:54.483 -07:00] [INFO] [peer.rs:1953] ["propose conf change peer"] [change_peer=1554] [change_type=AddNode] [peer_id=442] [region_id=321]
[2019/05/01 12:38:54.524 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 1554, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=12] [term=7] [peer_id=442] [region_id=321]
[2019/05/01 12:38:54.524 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 9, version: 20, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=442] [region_id=321]
[2019/05/01 12:38:54.524 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 321, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 114, 128, 0, 0, 0, 0, 255, 1, 212, 197, 0, 0, 0, 0, 0, 250], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 114, 128, 0, 0, 0, 0, 255, 1, 212, 199, 0, 0, 0, 0, 0, 250], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 20, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 323, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 324, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 442, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1554, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1554, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=442] [region_id=321]
[2019/05/01 12:38:54.541 -07:00] [INFO] [peer.rs:1318] ["notify pd with change peer region"] [region="Region { id: 321, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 114, 128, 0, 0, 0, 0, 255, 1, 212, 197, 0, 0, 0, 0, 0, 250], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 114, 128, 0, 0, 0, 0, 255, 1, 212, 199, 0, 0, 0, 0, 0, 250], region_epoch: Some(RegionEpoch { conf_ver: 10, version: 20, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 323, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 324, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 442, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1554, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=442] [region_id=321]
[2019/05/01 12:38:54.548 -07:00] [INFO] [pd.rs:558] ["try to change peer"] [peer="Peer { id: 324, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [change_type=RemoveNode] [region_id=321]
[2019/05/01 12:38:54.548 -07:00] [INFO] [peer.rs:1953] ["propose conf change peer"] [change_peer=324] [change_type=RemoveNode] [peer_id=442] [region_id=321]
[2019/05/01 12:38:54.570 -07:00] [INFO] [pd.rs:558] ["try to change peer"] [peer="Peer { id: 324, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [change_type=RemoveNode] [region_id=321]
[2019/05/01 12:38:54.594 -07:00] [INFO] [peer.rs:1927] ["there is a pending conf change, try later"] [peer_id=442] [region_id=321]
[2019/05/01 12:38:54.595 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 324, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=13] [term=7] [peer_id=442] [region_id=321]
[2019/05/01 12:38:54.595 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 10, version: 20, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=442] [region_id=321]
[2019/05/01 12:38:54.595 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 321, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 114, 128, 0, 0, 0, 0, 255, 1, 212, 197, 0, 0, 0, 0, 0, 250], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 114, 128, 0, 0, 0, 0, 255, 1, 212, 199, 0, 0, 0, 0, 0, 250], region_epoch: Some(RegionEpoch { conf_ver: 10, version: 20, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 323, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 324, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 442, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1554, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 324, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=442] [region_id=321]
[2019/05/01 12:38:54.603 -07:00] [INFO] [peer.rs:1318] ["notify pd with change peer region"] [region="Region { id: 321, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 114, 128, 0, 0, 0, 0, 255, 1, 212, 197, 0, 0, 0, 0, 0, 250], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 114, 128, 0, 0, 0, 0, 255, 1, 212, 199, 0, 0, 0, 0, 0, 250], region_epoch: Some(RegionEpoch { conf_ver: 11, version: 20, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 323, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 442, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1554, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=442] [region_id=321]
[2019/05/01 12:38:54.612 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 225], lock_version: 408089928514666510, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 225], lock_ttl: 3081, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:54.655 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 224], lock_version: 408089928527773705, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 224], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:54.754 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 223], lock_version: 408089928540880898, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 223], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:54.782 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 225], lock_version: 408089928553988099, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 225], lock_ttl: 3054, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:54.845 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 227], lock_version: 408089928606416900, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 227], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:54.936 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 227], lock_version: 408089928619524101, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 227], lock_ttl: 3057, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:55.064 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 230], lock_version: 408089928645738510, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 230], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:55.068 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=1558] [region_id=1273]
[2019/05/01 12:38:55.068 -07:00] [INFO] [unknown:719] ["[region 1273] 1558 became follower at term 0"]
[2019/05/01 12:38:55.068 -07:00] [INFO] [unknown:295] ["[region 1273] 1558 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:38:55.068 -07:00] [INFO] [unknown:719] ["[region 1273] 1558 became follower at term 1"]
[2019/05/01 12:38:55.068 -07:00] [INFO] [unknown:920] ["[region 1273] 1558 [term: 1] received a MsgHeartbeat message with higher term from 1412 [term: 7]"]
[2019/05/01 12:38:55.068 -07:00] [INFO] [unknown:719] ["[region 1273] 1558 became follower at term 7"]
[2019/05/01 12:38:55.106 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_99_7_11_(default|lock|write).sst] [snap_key=99_7_11]
[2019/05/01 12:38:55.110 -07:00] [INFO] [unknown:1792] ["[region 99] 1556 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 11, term: 7]"]
[2019/05/01 12:38:55.110 -07:00] [INFO] [unknown:1816] ["[region 99] 1556 restored progress of 100 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:38:55.110 -07:00] [INFO] [unknown:1816] ["[region 99] 1556 restored progress of 101 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:38:55.110 -07:00] [INFO] [unknown:1816] ["[region 99] 1556 restored progress of 170 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:38:55.110 -07:00] [INFO] [unknown:1816] ["[region 99] 1556 restored progress of 1556 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:38:55.110 -07:00] [INFO] [unknown:474] ["[region 99] 1556 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 11, term: 7]"]
[2019/05/01 12:38:55.110 -07:00] [INFO] [unknown:1736] ["[region 99] 1556 [commit: 11] restored snapshot [index: 11, term: 7]"]
[2019/05/01 12:38:55.110 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=1556] [region_id=99]
[2019/05/01 12:38:55.111 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 11, truncated_state: Some(RaftTruncatedState { index: 11, term: 7, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 99, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 97, 117, 116, 111, 255, 95, 105, 110, 99, 255, 114, 101, 109, 255, 101, 110, 116, 95, 111, 255, 102, 102, 255, 115, 101, 116, 0, 0, 0, 252, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 97, 117, 116, 111, 255, 99, 111, 109, 109, 255, 105, 116, 0, 255, 0, 0, 0, 0, 0, 249, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 17, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 100, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 101, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 170, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1556, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1556] [region_id=99]
[2019/05/01 12:38:55.127 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 99] 1556"]
[2019/05/01 12:38:55.127 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 99, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 97, 117, 116, 111, 255, 95, 105, 110, 99, 255, 114, 101, 109, 255, 101, 110, 116, 95, 111, 255, 102, 102, 255, 115, 101, 116, 0, 0, 0, 252, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 97, 117, 116, 111, 255, 99, 111, 109, 109, 255, 105, 116, 0, 255, 0, 0, 0, 0, 0, 249, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 17, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 100, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 101, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 170, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1556, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1556] [region_id=99]
[2019/05/01 12:38:55.127 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=99]
[2019/05/01 12:38:55.150 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 228], lock_version: 408089928671952906, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 228], lock_ttl: 3003, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:55.154 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=26.603974ms] [region_id=99]
[2019/05/01 12:38:55.375 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 1555, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=13] [term=7] [peer_id=330] [region_id=30]
[2019/05/01 12:38:55.375 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 6, version: 9, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=330] [region_id=30]
[2019/05/01 12:38:55.375 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 30, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 44, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 49, 0, 0, 0, 0, 0, 0, 0, 248], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 9, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 31, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 55, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 330, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1555, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1555, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=330] [region_id=30]
[2019/05/01 12:38:55.416 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 31, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=14] [term=7] [peer_id=330] [region_id=30]
[2019/05/01 12:38:55.417 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 7, version: 9, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=330] [region_id=30]
[2019/05/01 12:38:55.417 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 30, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 44, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 49, 0, 0, 0, 0, 0, 0, 0, 248], region_epoch: Some(RegionEpoch { conf_ver: 7, version: 9, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 31, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 55, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 330, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1555, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 31, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=330] [region_id=30]
[2019/05/01 12:38:55.476 -07:00] [INFO] [pd.rs:558] ["try to change peer"] [peer="Peer { id: 1559, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [change_type=AddLearnerNode] [region_id=1087]
[2019/05/01 12:38:55.476 -07:00] [INFO] [peer.rs:1953] ["propose conf change peer"] [change_peer=1559] [change_type=AddLearnerNode] [peer_id=1102] [region_id=1087]
[2019/05/01 12:38:55.511 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddLearnerNode, peer: Some(Peer { id: 1559, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=11] [term=7] [peer_id=1102] [region_id=1087]
[2019/05/01 12:38:55.511 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 8, version: 127, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddLearner] [peer_id=1102] [region_id=1087]
[2019/05/01 12:38:55.511 -07:00] [INFO] [apply.rs:1476] ["add learner successfully"] [region="Region { id: 1087, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 99, 255, 111, 109, 112, 255, 114, 101, 115, 115, 105, 255, 111, 110, 255, 95, 102, 97, 105, 108, 117, 255, 114, 255, 101, 95, 116, 104, 114, 101, 115, 255, 255, 104, 111, 108, 100, 95, 112, 99, 116, 255, 255, 0, 0, 0, 0, 0, 0, 0, 255, 0, 247, 0, 0, 0, 0, 0, 0, 249], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 99, 255, 111, 109, 112, 255, 114, 101, 115, 115, 105, 255, 111, 110, 255, 95, 108, 101, 118, 101, 108, 255, 0, 255, 0, 0, 0, 0, 0, 0, 0, 247, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 8, version: 127, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1089, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1090, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1102, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1559, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1102] [region_id=1087]
[2019/05/01 12:38:55.519 -07:00] [INFO] [peer.rs:1318] ["notify pd with change peer region"] [region="Region { id: 1087, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 99, 255, 111, 109, 112, 255, 114, 101, 115, 115, 105, 255, 111, 110, 255, 95, 102, 97, 105, 108, 117, 255, 114, 255, 101, 95, 116, 104, 114, 101, 115, 255, 255, 104, 111, 108, 100, 95, 112, 99, 116, 255, 255, 0, 0, 0, 0, 0, 0, 0, 255, 0, 247, 0, 0, 0, 0, 0, 0, 249], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 99, 255, 111, 109, 112, 255, 114, 101, 115, 115, 105, 255, 111, 110, 255, 95, 108, 101, 118, 101, 108, 255, 0, 255, 0, 0, 0, 0, 0, 0, 0, 247, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 127, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1089, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1090, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1102, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1559, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1102] [region_id=1087]
[2019/05/01 12:38:55.677 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 232], lock_version: 408089928816132102, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 232], lock_ttl: 3002, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:55.760 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 229], lock_version: 408089928842346500, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 229], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:55.762 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 229], lock_version: 408089928842346500, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 229], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:55.954 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_460_7_8_(default|lock|write).sst] [snap_key=460_7_8]
[2019/05/01 12:38:55.958 -07:00] [INFO] [unknown:1792] ["[region 460] 1557 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 8, term: 7]"]
[2019/05/01 12:38:55.958 -07:00] [INFO] [unknown:1816] ["[region 460] 1557 restored progress of 461 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:38:55.958 -07:00] [INFO] [unknown:1816] ["[region 460] 1557 restored progress of 462 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:38:55.958 -07:00] [INFO] [unknown:1816] ["[region 460] 1557 restored progress of 463 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:38:55.958 -07:00] [INFO] [unknown:1816] ["[region 460] 1557 restored progress of 1557 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:38:55.958 -07:00] [INFO] [unknown:474] ["[region 460] 1557 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 8, term: 7]"]
[2019/05/01 12:38:55.958 -07:00] [INFO] [unknown:1736] ["[region 460] 1557 [commit: 8] restored snapshot [index: 8, term: 7]"]
[2019/05/01 12:38:55.958 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=1557] [region_id=460]
[2019/05/01 12:38:55.958 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 8, truncated_state: Some(RaftTruncatedState { index: 8, term: 7, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 460, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 100, 101, 98, 117, 255, 103, 0, 0, 0, 252, 0, 0, 0, 252], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 100, 101, 102, 97, 255, 117, 108, 116, 95, 255, 112, 97, 115, 255, 115, 119, 111, 114, 100, 255, 95, 108, 255, 105, 102, 101, 116, 105, 109, 255, 101, 255, 0, 0, 0, 0, 0, 0, 0, 248, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 57, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 461, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 462, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 463, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1557, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1557] [region_id=460]
[2019/05/01 12:38:55.977 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 460, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 100, 101, 98, 117, 255, 103, 0, 0, 0, 252, 0, 0, 0, 252], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 100, 101, 102, 97, 255, 117, 108, 116, 95, 255, 112, 97, 115, 255, 115, 119, 111, 114, 100, 255, 95, 108, 255, 105, 102, 101, 116, 105, 109, 255, 101, 255, 0, 0, 0, 0, 0, 0, 0, 248, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 57, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 461, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 462, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 463, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1557, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1557] [region_id=460]
[2019/05/01 12:38:55.977 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 460] 1557"]
[2019/05/01 12:38:55.977 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=460]
[2019/05/01 12:38:55.998 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=21.516809ms] [region_id=460]
[2019/05/01 12:38:56.194 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 1556, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=12] [term=7] [peer_id=1556] [region_id=99]
[2019/05/01 12:38:56.194 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 6, version: 17, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=1556] [region_id=99]
[2019/05/01 12:38:56.194 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 99, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 97, 117, 116, 111, 255, 95, 105, 110, 99, 255, 114, 101, 109, 255, 101, 110, 116, 95, 111, 255, 102, 102, 255, 115, 101, 116, 0, 0, 0, 252, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 97, 117, 116, 111, 255, 99, 111, 109, 109, 255, 105, 116, 0, 255, 0, 0, 0, 0, 0, 249, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 17, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 100, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 101, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 170, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1556, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1556, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1556] [region_id=99]
[2019/05/01 12:38:56.241 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 100, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=13] [term=7] [peer_id=1556] [region_id=99]
[2019/05/01 12:38:56.241 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 7, version: 17, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=1556] [region_id=99]
[2019/05/01 12:38:56.241 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 99, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 97, 117, 116, 111, 255, 95, 105, 110, 99, 255, 114, 101, 109, 255, 101, 110, 116, 95, 111, 255, 102, 102, 255, 115, 101, 116, 0, 0, 0, 252, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 97, 117, 116, 111, 255, 99, 111, 109, 109, 255, 105, 116, 0, 255, 0, 0, 0, 0, 0, 249, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 7, version: 17, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 100, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 101, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 170, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1556, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 100, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1556] [region_id=99]
[2019/05/01 12:38:56.354 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 233], lock_version: 408089928973418505, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 233], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:56.474 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 232], lock_version: 408089928947204100, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 234], lock_ttl: 3100, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:56.568 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 233], lock_version: 408089929052061708, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 234], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:56.708 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 231], lock_version: 408089929078276101, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 235], lock_ttl: 3002, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:56.764 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 231], lock_version: 408089929078276101, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 235], lock_ttl: 3002, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:56.805 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 233], lock_version: 408089929091383300, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 233], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:56.857 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 233], lock_version: 408089929091383300, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 233], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:57.019 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 1557, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=9] [term=7] [peer_id=1557] [region_id=460]
[2019/05/01 12:38:57.027 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 6, version: 57, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=1557] [region_id=460]
[2019/05/01 12:38:57.027 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 460, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 100, 101, 98, 117, 255, 103, 0, 0, 0, 252, 0, 0, 0, 252], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 100, 101, 102, 97, 255, 117, 108, 116, 95, 255, 112, 97, 115, 255, 115, 119, 111, 114, 100, 255, 95, 108, 255, 105, 102, 101, 116, 105, 109, 255, 101, 255, 0, 0, 0, 0, 0, 0, 0, 248, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 57, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 461, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 462, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 463, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1557, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1557, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1557] [region_id=460]
[2019/05/01 12:38:57.077 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_1273_7_11_(default|lock|write).sst] [snap_key=1273_7_11]
[2019/05/01 12:38:57.122 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 461, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=10] [term=7] [peer_id=1557] [region_id=460]
[2019/05/01 12:38:57.122 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 7, version: 57, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=1557] [region_id=460]
[2019/05/01 12:38:57.122 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 460, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 100, 101, 98, 117, 255, 103, 0, 0, 0, 252, 0, 0, 0, 252], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 100, 101, 102, 97, 255, 117, 108, 116, 95, 255, 112, 97, 115, 255, 115, 119, 111, 114, 100, 255, 95, 108, 255, 105, 102, 101, 116, 105, 109, 255, 101, 255, 0, 0, 0, 0, 0, 0, 0, 248, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 7, version: 57, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 461, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 462, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 463, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1557, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 461, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1557] [region_id=460]
[2019/05/01 12:38:57.122 -07:00] [INFO] [unknown:1792] ["[region 1273] 1558 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 11, term: 7]"]
[2019/05/01 12:38:57.122 -07:00] [INFO] [unknown:1816] ["[region 1273] 1558 restored progress of 1274 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:38:57.122 -07:00] [INFO] [unknown:1816] ["[region 1273] 1558 restored progress of 1276 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:38:57.122 -07:00] [INFO] [unknown:1816] ["[region 1273] 1558 restored progress of 1412 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:38:57.122 -07:00] [INFO] [unknown:1816] ["[region 1273] 1558 restored progress of 1558 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:38:57.122 -07:00] [INFO] [unknown:474] ["[region 1273] 1558 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 11, term: 7]"]
[2019/05/01 12:38:57.122 -07:00] [INFO] [unknown:1736] ["[region 1273] 1558 [commit: 11] restored snapshot [index: 11, term: 7]"]
[2019/05/01 12:38:57.122 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=1558] [region_id=1273]
[2019/05/01 12:38:57.122 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 11, truncated_state: Some(RaftTruncatedState { index: 11, term: 7, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 1273, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 108, 255, 97, 114, 103, 255, 101, 95, 112, 114, 101, 255, 102, 105, 255, 120, 0, 0, 0, 0, 0, 250, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 108, 255, 111, 99, 107, 255, 95, 119, 97, 105, 116, 255, 95, 116, 255, 105, 109, 101, 111, 117, 116, 255, 0, 255, 0, 0, 0, 0, 0, 0, 0, 247, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 167, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1274, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1276, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1412, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1558, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1558] [region_id=1273]
[2019/05/01 12:38:57.185 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 232], lock_version: 408089929143812103, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 233], lock_ttl: 3093, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:57.204 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 1273] 1558"]
[2019/05/01 12:38:57.204 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 1273, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 108, 255, 97, 114, 103, 255, 101, 95, 112, 114, 101, 255, 102, 105, 255, 120, 0, 0, 0, 0, 0, 250, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 108, 255, 111, 99, 107, 255, 95, 119, 97, 105, 116, 255, 95, 116, 255, 105, 109, 101, 111, 117, 116, 255, 0, 255, 0, 0, 0, 0, 0, 0, 0, 247, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 167, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1274, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1276, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1412, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1558, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1558] [region_id=1273]
[2019/05/01 12:38:57.204 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=1273]
[2019/05/01 12:38:57.254 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 232], lock_version: 408089929143812103, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 233], lock_ttl: 3093, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:57.258 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=53.263109ms] [region_id=1273]
[2019/05/01 12:38:57.311 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 235], lock_version: 408089929170026500, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 235], lock_ttl: 3002, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:57.349 -07:00] [INFO] [peer_storage.rs:759] ["requesting snapshot"] [peer_id=1102] [region_id=1087]
[2019/05/01 12:38:57.349 -07:00] [INFO] [snap.rs:757] ["scan snapshot of one cf"] [size=0] [key_count=0] [cf=default] [snapshot=/opt/tidb/data/kv/snap/gen_1087_7_11_(default|lock|write).sst] [region_id=1087]
[2019/05/01 12:38:57.349 -07:00] [INFO] [snap.rs:757] ["scan snapshot of one cf"] [size=0] [key_count=0] [cf=lock] [snapshot=/opt/tidb/data/kv/snap/gen_1087_7_11_(default|lock|write).sst] [region_id=1087]
[2019/05/01 12:38:57.349 -07:00] [INFO] [snap.rs:757] ["scan snapshot of one cf"] [size=228] [key_count=2] [cf=write] [snapshot=/opt/tidb/data/kv/snap/gen_1087_7_11_(default|lock|write).sst] [region_id=1087]
[2019/05/01 12:38:57.374 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 235], lock_version: 408089929170026500, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 235], lock_ttl: 3002, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:57.377 -07:00] [INFO] [snap.rs:875] ["scan snapshot"] [takes=27.589284ms] [size=1559] [key_count=2] [snapshot=/opt/tidb/data/kv/snap/gen_1087_7_11_(default|lock|write).sst] [region_id=1087]
[2019/05/01 12:38:57.504 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 235], lock_version: 408089929170026500, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 235], lock_ttl: 3002, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:57.549 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 237], lock_version: 408089929235562501, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 237], lock_ttl: 3216, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:58.328 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 1558, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=12] [term=7] [peer_id=1558] [region_id=1273]
[2019/05/01 12:38:58.328 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 9, version: 167, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=1558] [region_id=1273]
[2019/05/01 12:38:58.328 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 1273, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 108, 255, 97, 114, 103, 255, 101, 95, 112, 114, 101, 255, 102, 105, 255, 120, 0, 0, 0, 0, 0, 250, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 108, 255, 111, 99, 107, 255, 95, 119, 97, 105, 116, 255, 95, 116, 255, 105, 109, 101, 111, 117, 116, 255, 0, 255, 0, 0, 0, 0, 0, 0, 0, 247, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 167, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1274, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1276, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1412, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1558, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1558, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1558] [region_id=1273]
[2019/05/01 12:38:58.383 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 238], lock_version: 408089929405956100, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 238], lock_ttl: 3223, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:58.433 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=1561] [region_id=525]
[2019/05/01 12:38:58.433 -07:00] [INFO] [unknown:719] ["[region 525] 1561 became follower at term 0"]
[2019/05/01 12:38:58.433 -07:00] [INFO] [unknown:295] ["[region 525] 1561 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:38:58.433 -07:00] [INFO] [unknown:719] ["[region 525] 1561 became follower at term 1"]
[2019/05/01 12:38:58.433 -07:00] [INFO] [unknown:920] ["[region 525] 1561 [term: 1] received a MsgHeartbeat message with higher term from 526 [term: 6]"]
[2019/05/01 12:38:58.433 -07:00] [INFO] [unknown:719] ["[region 525] 1561 became follower at term 6"]
[2019/05/01 12:38:58.458 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 1274, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=13] [term=7] [peer_id=1558] [region_id=1273]
[2019/05/01 12:38:58.458 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 10, version: 167, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=1558] [region_id=1273]
[2019/05/01 12:38:58.458 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 1273, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 108, 255, 97, 114, 103, 255, 101, 95, 112, 114, 101, 255, 102, 105, 255, 120, 0, 0, 0, 0, 0, 250, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 108, 255, 111, 99, 107, 255, 95, 119, 97, 105, 116, 255, 95, 116, 255, 105, 109, 101, 111, 117, 116, 255, 0, 255, 0, 0, 0, 0, 0, 0, 0, 247, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 10, version: 167, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1274, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1276, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1412, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1558, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1274, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1558] [region_id=1273]
[2019/05/01 12:38:58.636 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 240], lock_version: 408089929563242501, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 241], lock_ttl: 3002, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:58.968 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 238], lock_version: 408089929628778498, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 238], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:59.140 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 240], lock_version: 408089929681207301, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 240], lock_ttl: 3086, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:59.330 -07:00] [INFO] [unknown:841] ["New connected subchannel at 0x7f858fa02200 for subchannel 0x7f8640481c00"]
[2019/05/01 12:38:59.344 -07:00] [INFO] [snap.rs:389] ["sent snapshot"] [duration=15.288048ms] [size=1559] [snap_key=1087_7_11] [region_id=1087]
[2019/05/01 12:38:59.344 -07:00] [INFO] [peer.rs:538] ["report snapshot status"] [status=Finish] [to="Peer { id: 1559, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1102] [region_id=1087]
[2019/05/01 12:38:59.380 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 241], lock_version: 408089929772957703, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 241], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:59.380 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 241], lock_version: 408089929772957703, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 241], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:59.644 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 239], lock_version: 408089929825386503, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 239], lock_ttl: 3075, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:38:59.700 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 239], lock_version: 408089929825386503, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 239], lock_ttl: 3075, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:39:00.263 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 242], lock_version: 408089929930244104, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 242], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:39:00.313 -07:00] [INFO] [pd.rs:558] ["try to change peer"] [peer="Peer { id: 1559, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [change_type=AddNode] [region_id=1087]
[2019/05/01 12:39:00.313 -07:00] [INFO] [peer.rs:1953] ["propose conf change peer"] [change_peer=1559] [change_type=AddNode] [peer_id=1102] [region_id=1087]
[2019/05/01 12:39:00.343 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 1559, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=12] [term=7] [peer_id=1102] [region_id=1087]
[2019/05/01 12:39:00.343 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 9, version: 127, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=1102] [region_id=1087]
[2019/05/01 12:39:00.344 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 1087, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 99, 255, 111, 109, 112, 255, 114, 101, 115, 115, 105, 255, 111, 110, 255, 95, 102, 97, 105, 108, 117, 255, 114, 255, 101, 95, 116, 104, 114, 101, 115, 255, 255, 104, 111, 108, 100, 95, 112, 99, 116, 255, 255, 0, 0, 0, 0, 0, 0, 0, 255, 0, 247, 0, 0, 0, 0, 0, 0, 249], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 99, 255, 111, 109, 112, 255, 114, 101, 115, 115, 105, 255, 111, 110, 255, 95, 108, 101, 118, 101, 108, 255, 0, 255, 0, 0, 0, 0, 0, 0, 0, 247, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 127, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1089, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1090, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1102, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1559, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1559, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1102] [region_id=1087]
[2019/05/01 12:39:00.352 -07:00] [INFO] [peer.rs:1318] ["notify pd with change peer region"] [region="Region { id: 1087, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 99, 255, 111, 109, 112, 255, 114, 101, 115, 115, 105, 255, 111, 110, 255, 95, 102, 97, 105, 108, 117, 255, 114, 255, 101, 95, 116, 104, 114, 101, 115, 255, 255, 104, 111, 108, 100, 95, 112, 99, 116, 255, 255, 0, 0, 0, 0, 0, 0, 0, 255, 0, 247, 0, 0, 0, 0, 0, 0, 249], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 99, 255, 111, 109, 112, 255, 114, 101, 115, 115, 105, 255, 111, 110, 255, 95, 108, 101, 118, 101, 108, 255, 0, 255, 0, 0, 0, 0, 0, 0, 0, 247, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 10, version: 127, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1089, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1090, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1102, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1559, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1102] [region_id=1087]
[2019/05/01 12:39:00.367 -07:00] [INFO] [pd.rs:558] ["try to change peer"] [peer="Peer { id: 1089, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [change_type=RemoveNode] [region_id=1087]
[2019/05/01 12:39:00.368 -07:00] [INFO] [peer.rs:1953] ["propose conf change peer"] [change_peer=1089] [change_type=RemoveNode] [peer_id=1102] [region_id=1087]
[2019/05/01 12:39:00.400 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 1089, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=13] [term=7] [peer_id=1102] [region_id=1087]
[2019/05/01 12:39:00.400 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 10, version: 127, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=1102] [region_id=1087]
[2019/05/01 12:39:00.400 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 1087, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 99, 255, 111, 109, 112, 255, 114, 101, 115, 115, 105, 255, 111, 110, 255, 95, 102, 97, 105, 108, 117, 255, 114, 255, 101, 95, 116, 104, 114, 101, 115, 255, 255, 104, 111, 108, 100, 95, 112, 99, 116, 255, 255, 0, 0, 0, 0, 0, 0, 0, 255, 0, 247, 0, 0, 0, 0, 0, 0, 249], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 99, 255, 111, 109, 112, 255, 114, 101, 115, 115, 105, 255, 111, 110, 255, 95, 108, 101, 118, 101, 108, 255, 0, 255, 0, 0, 0, 0, 0, 0, 0, 247, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 10, version: 127, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1089, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1090, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1102, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1559, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1089, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1102] [region_id=1087]
[2019/05/01 12:39:00.400 -07:00] [INFO] [pd.rs:558] ["try to change peer"] [peer="Peer { id: 1089, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [change_type=RemoveNode] [region_id=1087]
[2019/05/01 12:39:00.400 -07:00] [INFO] [peer.rs:1927] ["there is a pending conf change, try later"] [peer_id=1102] [region_id=1087]
[2019/05/01 12:39:00.425 -07:00] [INFO] [peer.rs:1318] ["notify pd with change peer region"] [region="Region { id: 1087, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 99, 255, 111, 109, 112, 255, 114, 101, 115, 115, 105, 255, 111, 110, 255, 95, 102, 97, 105, 108, 117, 255, 114, 255, 101, 95, 116, 104, 114, 101, 115, 255, 255, 104, 111, 108, 100, 95, 112, 99, 116, 255, 255, 0, 0, 0, 0, 0, 0, 0, 255, 0, 247, 0, 0, 0, 0, 0, 0, 249], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 99, 255, 111, 109, 112, 255, 114, 101, 115, 115, 105, 255, 111, 110, 255, 95, 108, 101, 118, 101, 108, 255, 0, 255, 0, 0, 0, 0, 0, 0, 0, 247, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 11, version: 127, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1090, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1102, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1559, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1102] [region_id=1087]
[2019/05/01 12:39:00.426 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_525_6_10_(default|lock|write).sst] [snap_key=525_6_10]
[2019/05/01 12:39:00.428 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 244], lock_version: 408089930035101708, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 244], lock_ttl: 3074, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:39:00.450 -07:00] [INFO] [unknown:1792] ["[region 525] 1561 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 10, term: 6]"]
[2019/05/01 12:39:00.450 -07:00] [INFO] [unknown:1816] ["[region 525] 1561 restored progress of 526 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:39:00.450 -07:00] [INFO] [unknown:1816] ["[region 525] 1561 restored progress of 527 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:39:00.450 -07:00] [INFO] [unknown:1816] ["[region 525] 1561 restored progress of 1456 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:39:00.450 -07:00] [INFO] [unknown:1816] ["[region 525] 1561 restored progress of 1561 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:39:00.450 -07:00] [INFO] [unknown:474] ["[region 525] 1561 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 10, term: 6]"]
[2019/05/01 12:39:00.450 -07:00] [INFO] [unknown:1736] ["[region 525] 1561 [commit: 10] restored snapshot [index: 10, term: 6]"]
[2019/05/01 12:39:00.450 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=1561] [region_id=525]
[2019/05/01 12:39:00.450 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 10, truncated_state: Some(RaftTruncatedState { index: 10, term: 6, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 525, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 101, 118, 101, 110, 255, 116, 95, 115, 99, 255, 104, 101, 100, 255, 117, 108, 101, 114, 0, 254, 0, 0, 253], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 101, 120, 101, 99, 255, 117, 116, 101, 100, 255, 95, 103, 116, 255, 105, 100, 115, 95, 99, 255, 111, 109, 255, 112, 114, 101, 115, 115, 105, 255, 111, 255, 110, 95, 112, 101, 114, 105, 111, 255, 255, 100, 0, 0, 0, 0, 0, 0, 0, 255, 248, 0, 0, 0, 0, 0, 0, 0, 248], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 67, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 526, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 527, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1456, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1561, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1561] [region_id=525]
[2019/05/01 12:39:00.477 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 525] 1561"]
[2019/05/01 12:39:00.477 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 525, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 101, 118, 101, 110, 255, 116, 95, 115, 99, 255, 104, 101, 100, 255, 117, 108, 101, 114, 0, 254, 0, 0, 253], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 101, 120, 101, 99, 255, 117, 116, 101, 100, 255, 95, 103, 116, 255, 105, 100, 115, 95, 99, 255, 111, 109, 255, 112, 114, 101, 115, 115, 105, 255, 111, 255, 110, 95, 112, 101, 114, 105, 111, 255, 255, 100, 0, 0, 0, 0, 0, 0, 0, 255, 248, 0, 0, 0, 0, 0, 0, 0, 248], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 67, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 526, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 527, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1456, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1561, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1561] [region_id=525]
[2019/05/01 12:39:00.477 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=525]
[2019/05/01 12:39:00.497 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 244], lock_version: 408089930035101708, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 244], lock_ttl: 3074, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:39:00.504 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=26.677423ms] [region_id=525]
[2019/05/01 12:39:00.601 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 240], lock_version: 408089930035101697, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 242], lock_ttl: 3101, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:39:00.744 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 245], lock_version: 408089930126852103, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 245], lock_ttl: 3098, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:39:00.937 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 244], lock_version: 408089930179280908, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 244], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:39:01.263 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 243], lock_version: 408089930257924103, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 243], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:39:01.282 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=1603] [region_id=1323]
[2019/05/01 12:39:01.282 -07:00] [INFO] [unknown:719] ["[region 1323] 1603 became follower at term 0"]
[2019/05/01 12:39:01.282 -07:00] [INFO] [unknown:295] ["[region 1323] 1603 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:39:01.282 -07:00] [INFO] [unknown:719] ["[region 1323] 1603 became follower at term 1"]
[2019/05/01 12:39:01.282 -07:00] [INFO] [unknown:920] ["[region 1323] 1603 [term: 1] received a MsgHeartbeat message with higher term from 1324 [term: 7]"]
[2019/05/01 12:39:01.282 -07:00] [INFO] [unknown:719] ["[region 1323] 1603 became follower at term 7"]
[2019/05/01 12:39:01.323 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 246], lock_version: 408089930297245705, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 247], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:39:01.425 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=1604] [region_id=501]
[2019/05/01 12:39:01.425 -07:00] [INFO] [unknown:719] ["[region 501] 1604 became follower at term 0"]
[2019/05/01 12:39:01.425 -07:00] [INFO] [unknown:295] ["[region 501] 1604 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:39:01.425 -07:00] [INFO] [unknown:719] ["[region 501] 1604 became follower at term 1"]
[2019/05/01 12:39:01.425 -07:00] [INFO] [unknown:920] ["[region 501] 1604 [term: 1] received a MsgHeartbeat message with higher term from 502 [term: 8]"]
[2019/05/01 12:39:01.425 -07:00] [INFO] [unknown:719] ["[region 501] 1604 became follower at term 8"]
[2019/05/01 12:39:01.453 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 244], lock_version: 408089930323460098, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 245], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:39:01.487 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 1561, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=11] [term=6] [peer_id=1561] [region_id=525]
[2019/05/01 12:39:01.487 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 9, version: 67, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=1561] [region_id=525]
[2019/05/01 12:39:01.487 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 525, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 101, 118, 101, 110, 255, 116, 95, 115, 99, 255, 104, 101, 100, 255, 117, 108, 101, 114, 0, 254, 0, 0, 253], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 101, 120, 101, 99, 255, 117, 116, 101, 100, 255, 95, 103, 116, 255, 105, 100, 115, 95, 99, 255, 111, 109, 255, 112, 114, 101, 115, 115, 105, 255, 111, 255, 110, 95, 112, 101, 114, 105, 111, 255, 255, 100, 0, 0, 0, 0, 0, 0, 0, 255, 248, 0, 0, 0, 0, 0, 0, 0, 248], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 67, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 526, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 527, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1456, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1561, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1561, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1561] [region_id=525]
[2019/05/01 12:39:01.545 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 527, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=12] [term=6] [peer_id=1561] [region_id=525]
[2019/05/01 12:39:01.545 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 10, version: 67, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=1561] [region_id=525]
[2019/05/01 12:39:01.545 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 525, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 101, 118, 101, 110, 255, 116, 95, 115, 99, 255, 104, 101, 100, 255, 117, 108, 101, 114, 0, 254, 0, 0, 253], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 101, 120, 101, 99, 255, 117, 116, 101, 100, 255, 95, 103, 116, 255, 105, 100, 115, 95, 99, 255, 111, 109, 255, 112, 114, 101, 115, 115, 105, 255, 111, 255, 110, 95, 112, 101, 114, 105, 111, 255, 255, 100, 0, 0, 0, 0, 0, 0, 0, 255, 248, 0, 0, 0, 0, 0, 0, 0, 248], region_epoch: Some(RegionEpoch { conf_ver: 10, version: 67, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 526, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 527, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1456, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1561, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 527, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1561] [region_id=525]
[2019/05/01 12:39:01.545 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 244], lock_version: 408089930323460098, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 245], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:39:02.037 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 247], lock_version: 408089930467639317, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 247], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:39:02.084 -07:00] [INFO] [unknown:1625] ["[region 147] 327 [term 7] received MsgTimeoutNow from 149 and starts an election to get leadership."]
[2019/05/01 12:39:02.101 -07:00] [INFO] [unknown:739] ["[region 147] 327 became candidate at term 8"]
[2019/05/01 12:39:02.101 -07:00] [INFO] [unknown:854] ["[region 147] 327 received MsgRequestVoteResponse from 327 at term 8"]
[2019/05/01 12:39:02.101 -07:00] [INFO] [unknown:828] ["[region 147] 327 [logterm: 7, index: 13] sent MsgRequestVote request to 575 at term 8"]
[2019/05/01 12:39:02.101 -07:00] [INFO] [unknown:828] ["[region 147] 327 [logterm: 7, index: 13] sent MsgRequestVote request to 149 at term 8"]
[2019/05/01 12:39:02.145 -07:00] [INFO] [unknown:854] ["[region 147] 327 received MsgRequestVoteResponse from 575 at term 8"]
[2019/05/01 12:39:02.160 -07:00] [INFO] [unknown:1550] ["[region 147] 327 [quorum:2] has received 2 MsgRequestVoteResponse votes and 0 vote rejections"]
[2019/05/01 12:39:02.161 -07:00] [INFO] [unknown:789] ["[region 147] 327 became leader at term 8"]
[2019/05/01 12:39:02.205 -07:00] [INFO] [unknown:1625] ["[region 1083] 1406 [term 7] received MsgTimeoutNow from 1085 and starts an election to get leadership."]
[2019/05/01 12:39:02.205 -07:00] [INFO] [unknown:739] ["[region 1083] 1406 became candidate at term 8"]
[2019/05/01 12:39:02.205 -07:00] [INFO] [unknown:854] ["[region 1083] 1406 received MsgRequestVoteResponse from 1406 at term 8"]
[2019/05/01 12:39:02.205 -07:00] [INFO] [unknown:828] ["[region 1083] 1406 [logterm: 7, index: 10] sent MsgRequestVote request to 1085 at term 8"]
[2019/05/01 12:39:02.205 -07:00] [INFO] [unknown:828] ["[region 1083] 1406 [logterm: 7, index: 10] sent MsgRequestVote request to 1086 at term 8"]
[2019/05/01 12:39:02.226 -07:00] [INFO] [unknown:1625] ["[region 150] 1459 [term 7] received MsgTimeoutNow from 152 and starts an election to get leadership."]
[2019/05/01 12:39:02.226 -07:00] [INFO] [unknown:739] ["[region 150] 1459 became candidate at term 8"]
[2019/05/01 12:39:02.226 -07:00] [INFO] [unknown:854] ["[region 150] 1459 received MsgRequestVoteResponse from 1459 at term 8"]
[2019/05/01 12:39:02.226 -07:00] [INFO] [unknown:828] ["[region 150] 1459 [logterm: 7, index: 13] sent MsgRequestVote request to 328 at term 8"]
[2019/05/01 12:39:02.226 -07:00] [INFO] [unknown:828] ["[region 150] 1459 [logterm: 7, index: 13] sent MsgRequestVote request to 152 at term 8"]
[2019/05/01 12:39:02.289 -07:00] [INFO] [unknown:854] ["[region 1083] 1406 received MsgRequestVoteResponse from 1086 at term 8"]
[2019/05/01 12:39:02.289 -07:00] [INFO] [unknown:1550] ["[region 1083] 1406 [quorum:2] has received 2 MsgRequestVoteResponse votes and 0 vote rejections"]
[2019/05/01 12:39:02.289 -07:00] [INFO] [unknown:789] ["[region 1083] 1406 became leader at term 8"]
[2019/05/01 12:39:02.316 -07:00] [INFO] [unknown:854] ["[region 150] 1459 received MsgRequestVoteResponse from 328 at term 8"]
[2019/05/01 12:39:02.316 -07:00] [INFO] [unknown:1550] ["[region 150] 1459 [quorum:2] has received 2 MsgRequestVoteResponse votes and 0 vote rejections"]
[2019/05/01 12:39:02.316 -07:00] [INFO] [unknown:789] ["[region 150] 1459 became leader at term 8"]
[2019/05/01 12:39:02.339 -07:00] [INFO] [unknown:1625] ["[region 405] 1263 [term 7] received MsgTimeoutNow from 407 and starts an election to get leadership."]
[2019/05/01 12:39:02.339 -07:00] [INFO] [unknown:739] ["[region 405] 1263 became candidate at term 8"]
[2019/05/01 12:39:02.339 -07:00] [INFO] [unknown:854] ["[region 405] 1263 received MsgRequestVoteResponse from 1263 at term 8"]
[2019/05/01 12:39:02.339 -07:00] [INFO] [unknown:828] ["[region 405] 1263 [logterm: 7, index: 10] sent MsgRequestVote request to 407 at term 8"]
[2019/05/01 12:39:02.339 -07:00] [INFO] [unknown:828] ["[region 405] 1263 [logterm: 7, index: 10] sent MsgRequestVote request to 406 at term 8"]
[2019/05/01 12:39:02.403 -07:00] [INFO] [unknown:854] ["[region 405] 1263 received MsgRequestVoteResponse from 406 at term 8"]
[2019/05/01 12:39:02.403 -07:00] [INFO] [unknown:1550] ["[region 405] 1263 [quorum:2] has received 2 MsgRequestVoteResponse votes and 0 vote rejections"]
[2019/05/01 12:39:02.403 -07:00] [INFO] [unknown:789] ["[region 405] 1263 became leader at term 8"]
[2019/05/01 12:39:02.417 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 247], lock_version: 408089930506960905, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 247], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:39:02.501 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 247], lock_version: 408089930506960905, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 247], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:39:02.513 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 246], lock_version: 408089930572496906, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 248], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:39:02.593 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 246], lock_version: 408089930572496906, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 248], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:39:03.296 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_1323_7_8_(default|lock|write).sst] [snap_key=1323_7_8]
[2019/05/01 12:39:03.316 -07:00] [INFO] [unknown:1792] ["[region 1323] 1603 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 8, term: 7]"]
[2019/05/01 12:39:03.316 -07:00] [INFO] [unknown:1816] ["[region 1323] 1603 restored progress of 1324 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:39:03.316 -07:00] [INFO] [unknown:1816] ["[region 1323] 1603 restored progress of 1325 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:39:03.316 -07:00] [INFO] [unknown:1816] ["[region 1323] 1603 restored progress of 1326 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:39:03.316 -07:00] [INFO] [unknown:1816] ["[region 1323] 1603 restored progress of 1603 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:39:03.316 -07:00] [INFO] [unknown:474] ["[region 1323] 1603 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 8, term: 7]"]
[2019/05/01 12:39:03.316 -07:00] [INFO] [unknown:1736] ["[region 1323] 1603 [commit: 8] restored snapshot [index: 8, term: 7]"]
[2019/05/01 12:39:03.316 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=1603] [region_id=1323]
[2019/05/01 12:39:03.316 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 8, truncated_state: Some(RaftTruncatedState { index: 8, term: 7, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 1323, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 108, 255, 114, 117, 95, 255, 115, 99, 97, 110, 95, 255, 100, 101, 255, 112, 116, 104, 0, 0, 0, 252, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 109, 255, 97, 120, 95, 255, 100, 105, 114, 116, 121, 255, 95, 112, 255, 97, 103, 101, 115, 95, 112, 255, 99, 255, 116, 0, 0, 0, 0, 0, 0, 249, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 177, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1324, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1325, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1326, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1603, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1603] [region_id=1323]
[2019/05/01 12:39:03.363 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 1323] 1603"]
[2019/05/01 12:39:03.363 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 1323, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 108, 255, 114, 117, 95, 255, 115, 99, 97, 110, 95, 255, 100, 101, 255, 112, 116, 104, 0, 0, 0, 252, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 109, 255, 97, 120, 95, 255, 100, 105, 114, 116, 121, 255, 95, 112, 255, 97, 103, 101, 115, 95, 112, 255, 99, 255, 116, 0, 0, 0, 0, 0, 0, 249, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 177, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1324, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1325, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1326, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1603, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1603] [region_id=1323]
[2019/05/01 12:39:03.363 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=1323]
[2019/05/01 12:39:03.408 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=44.741658ms] [region_id=1323]
[2019/05/01 12:39:03.429 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_501_8_9_(default|lock|write).sst] [snap_key=501_8_9]
[2019/05/01 12:39:03.448 -07:00] [INFO] [unknown:1792] ["[region 501] 1604 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 9, term: 8]"]
[2019/05/01 12:39:03.448 -07:00] [INFO] [unknown:1816] ["[region 501] 1604 restored progress of 502 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:39:03.448 -07:00] [INFO] [unknown:1816] ["[region 501] 1604 restored progress of 503 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:39:03.448 -07:00] [INFO] [unknown:1816] ["[region 501] 1604 restored progress of 504 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:39:03.448 -07:00] [INFO] [unknown:1816] ["[region 501] 1604 restored progress of 1604 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:39:03.448 -07:00] [INFO] [unknown:474] ["[region 501] 1604 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 9, term: 8]"]
[2019/05/01 12:39:03.448 -07:00] [INFO] [unknown:1736] ["[region 501] 1604 [commit: 9] restored snapshot [index: 9, term: 8]"]
[2019/05/01 12:39:03.448 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=1604] [region_id=501]
[2019/05/01 12:39:03.448 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 9, truncated_state: Some(RaftTruncatedState { index: 9, term: 8, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 501, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 100, 101, 108, 97, 255, 121, 101, 100, 95, 255, 113, 117, 101, 255, 117, 101, 95, 115, 105, 255, 122, 101, 255, 0, 0, 0, 0, 0, 0, 249, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 100, 105, 115, 99, 255, 111, 110, 110, 101, 255, 99, 116, 95, 255, 111, 110, 95, 101, 120, 255, 112, 105, 255, 114, 101, 100, 95, 112, 97, 255, 115, 255, 115, 119, 111, 114, 100, 0, 0, 253, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 67, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 502, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 503, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 504, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1604, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1604] [region_id=501]
[2019/05/01 12:39:03.513 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 501, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 100, 101, 108, 97, 255, 121, 101, 100, 95, 255, 113, 117, 101, 255, 117, 101, 95, 115, 105, 255, 122, 101, 255, 0, 0, 0, 0, 0, 0, 249, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 100, 105, 115, 99, 255, 111, 110, 110, 101, 255, 99, 116, 95, 255, 111, 110, 95, 101, 120, 255, 112, 105, 255, 114, 101, 100, 95, 112, 97, 255, 115, 255, 115, 119, 111, 114, 100, 0, 0, 253, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 67, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 502, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 503, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 504, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1604, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1604] [region_id=501]
[2019/05/01 12:39:03.513 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 501] 1604"]
[2019/05/01 12:39:03.513 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=501]
[2019/05/01 12:39:03.550 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=36.935825ms] [region_id=501]
[2019/05/01 12:39:03.619 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 253], lock_version: 408089930887069707, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 253], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:39:03.687 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 253], lock_version: 408089930887069707, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 253], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:39:03.763 -07:00] [INFO] [unknown:1625] ["[region 460] 1557 [term 7] received MsgTimeoutNow from 463 and starts an election to get leadership."]
[2019/05/01 12:39:03.763 -07:00] [INFO] [unknown:739] ["[region 460] 1557 became candidate at term 8"]
[2019/05/01 12:39:03.763 -07:00] [INFO] [unknown:854] ["[region 460] 1557 received MsgRequestVoteResponse from 1557 at term 8"]
[2019/05/01 12:39:03.763 -07:00] [INFO] [unknown:828] ["[region 460] 1557 [logterm: 7, index: 10] sent MsgRequestVote request to 462 at term 8"]
[2019/05/01 12:39:03.763 -07:00] [INFO] [unknown:828] ["[region 460] 1557 [logterm: 7, index: 10] sent MsgRequestVote request to 463 at term 8"]
[2019/05/01 12:39:03.807 -07:00] [INFO] [unknown:854] ["[region 460] 1557 received MsgRequestVoteResponse from 463 at term 8"]
[2019/05/01 12:39:03.807 -07:00] [INFO] [unknown:1550] ["[region 460] 1557 [quorum:2] has received 2 MsgRequestVoteResponse votes and 0 vote rejections"]
[2019/05/01 12:39:03.807 -07:00] [INFO] [unknown:789] ["[region 460] 1557 became leader at term 8"]
[2019/05/01 12:39:03.875 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 253], lock_version: 408089930900176901, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 253], lock_ttl: 3197, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:39:04.116 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 253], lock_version: 408089931005034497, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 253], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:39:04.207 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=1646] [region_id=493]
[2019/05/01 12:39:04.207 -07:00] [INFO] [unknown:719] ["[region 493] 1646 became follower at term 0"]
[2019/05/01 12:39:04.207 -07:00] [INFO] [unknown:295] ["[region 493] 1646 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:39:04.207 -07:00] [INFO] [unknown:719] ["[region 493] 1646 became follower at term 1"]
[2019/05/01 12:39:04.207 -07:00] [INFO] [unknown:920] ["[region 493] 1646 [term: 1] received a MsgHeartbeat message with higher term from 495 [term: 7]"]
[2019/05/01 12:39:04.207 -07:00] [INFO] [unknown:719] ["[region 493] 1646 became follower at term 7"]
[2019/05/01 12:39:04.373 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 1603, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=9] [term=7] [peer_id=1603] [region_id=1323]
[2019/05/01 12:39:04.373 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 6, version: 177, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=1603] [region_id=1323]
[2019/05/01 12:39:04.373 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 1323, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 108, 255, 114, 117, 95, 255, 115, 99, 97, 110, 95, 255, 100, 101, 255, 112, 116, 104, 0, 0, 0, 252, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 109, 255, 97, 120, 95, 255, 100, 105, 114, 116, 121, 255, 95, 112, 255, 97, 103, 101, 115, 95, 112, 255, 99, 255, 116, 0, 0, 0, 0, 0, 0, 249, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 177, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1324, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1325, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1326, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1603, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1603, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1603] [region_id=1323]
[2019/05/01 12:39:04.430 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 252], lock_version: 408089930991927301, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 252], lock_ttl: 3253, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:39:04.461 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 1325, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=10] [term=7] [peer_id=1603] [region_id=1323]
[2019/05/01 12:39:04.462 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 7, version: 177, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=1603] [region_id=1323]
[2019/05/01 12:39:04.462 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 1323, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 108, 255, 114, 117, 95, 255, 115, 99, 97, 110, 95, 255, 100, 101, 255, 112, 116, 104, 0, 0, 0, 252, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 109, 255, 97, 120, 95, 255, 100, 105, 114, 116, 121, 255, 95, 112, 255, 97, 103, 101, 115, 95, 112, 255, 99, 255, 116, 0, 0, 0, 0, 0, 0, 249, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 7, version: 177, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1324, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1325, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1326, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1603, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1325, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1603] [region_id=1323]
[2019/05/01 12:39:04.491 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 252], lock_version: 408089930991927301, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 252], lock_ttl: 3253, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:39:04.533 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 1604, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=10] [term=8] [peer_id=1604] [region_id=501]
[2019/05/01 12:39:04.534 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 6, version: 67, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=1604] [region_id=501]
[2019/05/01 12:39:04.534 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 501, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 100, 101, 108, 97, 255, 121, 101, 100, 95, 255, 113, 117, 101, 255, 117, 101, 95, 115, 105, 255, 122, 101, 255, 0, 0, 0, 0, 0, 0, 249, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 100, 105, 115, 99, 255, 111, 110, 110, 101, 255, 99, 116, 95, 255, 111, 110, 95, 101, 120, 255, 112, 105, 255, 114, 101, 100, 95, 112, 97, 255, 115, 255, 115, 119, 111, 114, 100, 0, 0, 253, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 67, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 502, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 503, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 504, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1604, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1604, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1604] [region_id=501]
[2019/05/01 12:39:04.652 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 504, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=11] [term=8] [peer_id=1604] [region_id=501]
[2019/05/01 12:39:04.652 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 7, version: 67, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=1604] [region_id=501]
[2019/05/01 12:39:04.652 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 501, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 100, 101, 108, 97, 255, 121, 101, 100, 95, 255, 113, 117, 101, 255, 117, 101, 95, 115, 105, 255, 122, 101, 255, 0, 0, 0, 0, 0, 0, 249, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 100, 105, 115, 99, 255, 111, 110, 110, 101, 255, 99, 116, 95, 255, 111, 110, 95, 101, 120, 255, 112, 105, 255, 114, 101, 100, 95, 112, 97, 255, 115, 255, 115, 119, 111, 114, 100, 0, 0, 253, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 7, version: 67, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 502, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 503, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 504, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1604, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 504, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1604] [region_id=501]
[2019/05/01 12:39:04.660 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 252], lock_version: 408089930991927301, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 252], lock_ttl: 3253, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:39:04.930 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 251], lock_version: 408089931162320903, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 251], lock_ttl: 3201, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:39:05.864 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 254], lock_version: 408089931476893700, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 254], lock_ttl: 3002, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:39:05.949 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 254], lock_version: 408089931503108117, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 255], lock_ttl: 3002, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:39:06.057 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 252], lock_version: 408089931529322502, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 254], lock_ttl: 3058, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:39:06.121 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 2], lock_version: 408089931555536906, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 2], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:39:06.209 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=1649] [region_id=521]
[2019/05/01 12:39:06.210 -07:00] [INFO] [unknown:719] ["[region 521] 1649 became follower at term 0"]
[2019/05/01 12:39:06.210 -07:00] [INFO] [unknown:295] ["[region 521] 1649 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:39:06.210 -07:00] [INFO] [unknown:719] ["[region 521] 1649 became follower at term 1"]
[2019/05/01 12:39:06.210 -07:00] [INFO] [unknown:920] ["[region 521] 1649 [term: 1] received a MsgHeartbeat message with higher term from 523 [term: 7]"]
[2019/05/01 12:39:06.210 -07:00] [INFO] [unknown:719] ["[region 521] 1649 became follower at term 7"]
[2019/05/01 12:39:06.211 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_493_7_11_(default|lock|write).sst] [snap_key=493_7_11]
[2019/05/01 12:39:06.220 -07:00] [INFO] [unknown:1792] ["[region 493] 1646 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 11, term: 7]"]
[2019/05/01 12:39:06.220 -07:00] [INFO] [unknown:1816] ["[region 493] 1646 restored progress of 495 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:39:06.220 -07:00] [INFO] [unknown:1816] ["[region 493] 1646 restored progress of 496 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:39:06.220 -07:00] [INFO] [unknown:1816] ["[region 493] 1646 restored progress of 1010 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:39:06.220 -07:00] [INFO] [unknown:1816] ["[region 493] 1646 restored progress of 1646 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:39:06.220 -07:00] [INFO] [unknown:474] ["[region 493] 1646 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 11, term: 7]"]
[2019/05/01 12:39:06.220 -07:00] [INFO] [unknown:1736] ["[region 493] 1646 [commit: 11] restored snapshot [index: 11, term: 7]"]
[2019/05/01 12:39:06.220 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=1646] [region_id=493]
[2019/05/01 12:39:06.220 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 11, truncated_state: Some(RaftTruncatedState { index: 11, term: 7, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 493, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 100, 101, 108, 97, 255, 121, 101, 100, 95, 255, 105, 110, 115, 255, 101, 114, 116, 95, 108, 255, 105, 109, 255, 105, 116, 0, 0, 0, 0, 251, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 100, 101, 108, 97, 255, 121, 101, 100, 95, 255, 105, 110, 115, 255, 101, 114, 116, 95, 116, 255, 105, 109, 255, 101, 111, 117, 116, 0, 0, 253, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 67, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 495, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 496, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1010, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1646, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1646] [region_id=493]
[2019/05/01 12:39:06.236 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 493] 1646"]
[2019/05/01 12:39:06.236 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=493]
[2019/05/01 12:39:06.236 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 493, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 100, 101, 108, 97, 255, 121, 101, 100, 95, 255, 105, 110, 115, 255, 101, 114, 116, 95, 108, 255, 105, 109, 255, 105, 116, 0, 0, 0, 0, 251, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 100, 101, 108, 97, 255, 121, 101, 100, 95, 255, 105, 110, 115, 255, 101, 114, 116, 95, 116, 255, 105, 109, 255, 101, 111, 117, 116, 0, 0, 253, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 67, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 495, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 496, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1010, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1646, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1646] [region_id=493]
[2019/05/01 12:39:06.253 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=16.09016ms] [region_id=493]
[2019/05/01 12:39:06.255 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 255], lock_version: 408089931581751307, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 2, 255], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:39:06.346 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 1], lock_version: 408089931621072904, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 3], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:39:06.378 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 0], lock_version: 408089931621072908, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 0], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:39:06.404 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 2], lock_version: 408089931621072901, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 2], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:39:06.494 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 6], lock_version: 408089931647287308, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 6], lock_ttl: 3059, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:39:06.501 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 6], lock_version: 408089931647287308, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 6], lock_ttl: 3059, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:39:06.740 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 3], lock_version: 408089931712823302, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 7], lock_ttl: 3003, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:39:06.900 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 4], lock_version: 408089931765252099, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 4], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:39:06.966 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 4], lock_version: 408089931778359305, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 4], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:39:07.240 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 1646, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=12] [term=7] [peer_id=1646] [region_id=493]
[2019/05/01 12:39:07.240 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 9, version: 67, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=1646] [region_id=493]
[2019/05/01 12:39:07.240 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 493, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 100, 101, 108, 97, 255, 121, 101, 100, 95, 255, 105, 110, 115, 255, 101, 114, 116, 95, 108, 255, 105, 109, 255, 105, 116, 0, 0, 0, 0, 251, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 100, 101, 108, 97, 255, 121, 101, 100, 95, 255, 105, 110, 115, 255, 101, 114, 116, 95, 116, 255, 105, 109, 255, 101, 111, 117, 116, 0, 0, 253, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 67, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 495, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 496, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1010, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1646, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1646, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1646] [region_id=493]
[2019/05/01 12:39:07.295 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 496, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=13] [term=7] [peer_id=1646] [region_id=493]
[2019/05/01 12:39:07.295 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 10, version: 67, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=1646] [region_id=493]
[2019/05/01 12:39:07.295 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 493, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 100, 101, 108, 97, 255, 121, 101, 100, 95, 255, 105, 110, 115, 255, 101, 114, 116, 95, 108, 255, 105, 109, 255, 105, 116, 0, 0, 0, 0, 251, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 100, 101, 108, 97, 255, 121, 101, 100, 95, 255, 105, 110, 115, 255, 101, 114, 116, 95, 116, 255, 105, 109, 255, 101, 111, 117, 116, 0, 0, 253, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 10, version: 67, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 495, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 496, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1010, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1646, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 496, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1646] [region_id=493]
[2019/05/01 12:39:07.480 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 6], lock_version: 408089931896324097, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 6], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:39:07.530 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 6], lock_version: 408089931896324097, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 6], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:39:07.758 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 9], lock_version: 408089931988074506, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 9], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:39:08.213 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_521_7_8_(default|lock|write).sst] [snap_key=521_7_8]
[2019/05/01 12:39:08.232 -07:00] [INFO] [unknown:1792] ["[region 521] 1649 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 8, term: 7]"]
[2019/05/01 12:39:08.232 -07:00] [INFO] [unknown:1816] ["[region 521] 1649 restored progress of 522 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:39:08.232 -07:00] [INFO] [unknown:1816] ["[region 521] 1649 restored progress of 523 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:39:08.232 -07:00] [INFO] [unknown:1816] ["[region 521] 1649 restored progress of 524 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:39:08.232 -07:00] [INFO] [unknown:1816] ["[region 521] 1649 restored progress of 1649 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:39:08.232 -07:00] [INFO] [unknown:474] ["[region 521] 1649 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 8, term: 7]"]
[2019/05/01 12:39:08.232 -07:00] [INFO] [unknown:1736] ["[region 521] 1649 [commit: 8] restored snapshot [index: 8, term: 7]"]
[2019/05/01 12:39:08.232 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=1649] [region_id=521]
[2019/05/01 12:39:08.232 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 8, truncated_state: Some(RaftTruncatedState { index: 8, term: 7, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 521, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 101, 113, 95, 114, 255, 97, 110, 103, 101, 255, 95, 105, 110, 255, 100, 101, 120, 95, 100, 255, 105, 118, 255, 101, 95, 108, 105, 109, 105, 255, 116, 255, 0, 0, 0, 0, 0, 0, 0, 248, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 101, 118, 101, 110, 255, 116, 95, 115, 99, 255, 104, 101, 100, 255, 117, 108, 101, 114, 0, 254, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 67, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 522, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 523, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 524, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1649, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1649] [region_id=521]
[2019/05/01 12:39:08.286 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 521] 1649"]
[2019/05/01 12:39:08.286 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 521, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 101, 113, 95, 114, 255, 97, 110, 103, 101, 255, 95, 105, 110, 255, 100, 101, 120, 95, 100, 255, 105, 118, 255, 101, 95, 108, 105, 109, 105, 255, 116, 255, 0, 0, 0, 0, 0, 0, 0, 248, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 101, 118, 101, 110, 255, 116, 95, 115, 99, 255, 104, 101, 100, 255, 117, 108, 101, 114, 0, 254, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 67, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 522, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 523, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 524, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1649, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1649] [region_id=521]
[2019/05/01 12:39:08.286 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=521]
[2019/05/01 12:39:08.363 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=76.424057ms] [region_id=521]
[2019/05/01 12:39:08.573 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 11], lock_version: 408089932079824902, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 11], lock_ttl: 3277, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:39:09.261 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 1649, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=9] [term=7] [peer_id=1649] [region_id=521]
[2019/05/01 12:39:09.261 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 6, version: 67, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=1649] [region_id=521]
[2019/05/01 12:39:09.261 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 521, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 101, 113, 95, 114, 255, 97, 110, 103, 101, 255, 95, 105, 110, 255, 100, 101, 120, 95, 100, 255, 105, 118, 255, 101, 95, 108, 105, 109, 105, 255, 116, 255, 0, 0, 0, 0, 0, 0, 0, 248, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 101, 118, 101, 110, 255, 116, 95, 115, 99, 255, 104, 101, 100, 255, 117, 108, 101, 114, 0, 254, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 67, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 522, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 523, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 524, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1649, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1649, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1649] [region_id=521]
[2019/05/01 12:39:09.397 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 522, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=10] [term=7] [peer_id=1649] [region_id=521]
[2019/05/01 12:39:09.402 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 7, version: 67, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=1649] [region_id=521]
[2019/05/01 12:39:09.402 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 521, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 101, 113, 95, 114, 255, 97, 110, 103, 101, 255, 95, 105, 110, 255, 100, 101, 120, 95, 100, 255, 105, 118, 255, 101, 95, 108, 105, 109, 105, 255, 116, 255, 0, 0, 0, 0, 0, 0, 0, 248, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 101, 118, 101, 110, 255, 116, 95, 115, 99, 255, 104, 101, 100, 255, 117, 108, 101, 114, 0, 254, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 7, version: 67, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 522, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 523, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 524, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1649, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 522, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1649] [region_id=521]
[2019/05/01 12:39:09.551 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 8], lock_version: 408089932407504904, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 8], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:39:09.614 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 9], lock_version: 408089932407504903, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 12], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:39:09.970 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 8], lock_version: 408089932538576901, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 8], lock_ttl: 3003, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:39:10.059 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 12], lock_version: 408089932525469702, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 12], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:39:10.090 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=1651] [region_id=1487]
[2019/05/01 12:39:10.090 -07:00] [INFO] [unknown:719] ["[region 1487] 1651 became follower at term 0"]
[2019/05/01 12:39:10.090 -07:00] [INFO] [unknown:295] ["[region 1487] 1651 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:39:10.090 -07:00] [INFO] [unknown:719] ["[region 1487] 1651 became follower at term 1"]
[2019/05/01 12:39:10.090 -07:00] [INFO] [unknown:920] ["[region 1487] 1651 [term: 1] received a MsgHeartbeat message with higher term from 1490 [term: 6]"]
[2019/05/01 12:39:10.090 -07:00] [INFO] [unknown:719] ["[region 1487] 1651 became follower at term 6"]
[2019/05/01 12:39:10.198 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 12], lock_version: 408089932617220098, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 14], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:39:10.297 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=1653] [region_id=1339]
[2019/05/01 12:39:10.297 -07:00] [INFO] [unknown:719] ["[region 1339] 1653 became follower at term 0"]
[2019/05/01 12:39:10.297 -07:00] [INFO] [unknown:295] ["[region 1339] 1653 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:39:10.297 -07:00] [INFO] [unknown:719] ["[region 1339] 1653 became follower at term 1"]
[2019/05/01 12:39:10.297 -07:00] [INFO] [unknown:920] ["[region 1339] 1653 [term: 1] received a MsgHeartbeat message with higher term from 1342 [term: 6]"]
[2019/05/01 12:39:10.297 -07:00] [INFO] [unknown:719] ["[region 1339] 1653 became follower at term 6"]
[2019/05/01 12:39:10.418 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 15], lock_version: 408089932669648907, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 15], lock_ttl: 3002, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:39:10.547 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 15], lock_version: 408089932695863313, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 15], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:39:10.720 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 16], lock_version: 408089932761399313, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 16], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:39:10.925 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 16], lock_version: 408089932800720917, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 16], lock_ttl: 3054, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:39:10.935 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 16], lock_version: 408089932800720917, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 16], lock_ttl: 3054, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:39:11.175 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 13], lock_version: 408089932879364111, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 13], lock_ttl: 3002, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:39:11.234 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 13], lock_version: 408089932905578504, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 19], lock_ttl: 3002, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:39:11.547 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 19], lock_version: 408089932958007300, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 19], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:39:11.592 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 19], lock_version: 408089932958007300, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 19], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:39:11.620 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 19], lock_version: 408089932958007300, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 19], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:39:11.681 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 13], lock_version: 408089932997328904, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 18], lock_ttl: 3075, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:39:11.913 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 23], lock_version: 408089933075972119, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 24], lock_ttl: 3002, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:39:12.026 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=1654] [region_id=1517]
[2019/05/01 12:39:12.026 -07:00] [INFO] [unknown:719] ["[region 1517] 1654 became follower at term 0"]
[2019/05/01 12:39:12.026 -07:00] [INFO] [unknown:295] ["[region 1517] 1654 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:39:12.026 -07:00] [INFO] [unknown:719] ["[region 1517] 1654 became follower at term 1"]
[2019/05/01 12:39:12.026 -07:00] [INFO] [unknown:920] ["[region 1517] 1654 [term: 1] received a MsgHeartbeat message with higher term from 1520 [term: 6]"]
[2019/05/01 12:39:12.026 -07:00] [INFO] [unknown:719] ["[region 1517] 1654 became follower at term 6"]
[2019/05/01 12:39:12.136 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_1487_6_7_(default|lock|write).sst] [snap_key=1487_6_7]
[2019/05/01 12:39:12.163 -07:00] [INFO] [unknown:1792] ["[region 1487] 1651 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 7, term: 6]"]
[2019/05/01 12:39:12.164 -07:00] [INFO] [unknown:1816] ["[region 1487] 1651 restored progress of 1488 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:39:12.164 -07:00] [INFO] [unknown:1816] ["[region 1487] 1651 restored progress of 1489 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:39:12.164 -07:00] [INFO] [unknown:1816] ["[region 1487] 1651 restored progress of 1490 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:39:12.164 -07:00] [INFO] [unknown:1816] ["[region 1487] 1651 restored progress of 1651 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:39:12.164 -07:00] [INFO] [unknown:474] ["[region 1487] 1651 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 7, term: 6]"]
[2019/05/01 12:39:12.164 -07:00] [INFO] [unknown:1736] ["[region 1487] 1651 [commit: 7] restored snapshot [index: 7, term: 6]"]
[2019/05/01 12:39:12.164 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=1651] [region_id=1487]
[2019/05/01 12:39:12.164 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 7, truncated_state: Some(RaftTruncatedState { index: 7, term: 6, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 1487, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 115, 255, 116, 97, 116, 255, 115, 95, 112, 101, 114, 255, 115, 105, 255, 115, 116, 101, 110, 116, 95, 255, 115, 255, 97, 109, 112, 108, 101, 95, 112, 255, 255, 97, 103, 101, 115, 0, 0, 0, 0, 255, 251, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 115, 255, 116, 97, 116, 255, 115, 95, 115, 97, 109, 255, 112, 108, 255, 101, 95, 112, 97, 103, 101, 255, 115, 255, 0, 0, 0, 0, 0, 0, 0, 248, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 207, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1488, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1489, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1490, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1651, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1651] [region_id=1487]
[2019/05/01 12:39:12.185 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 1487, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 115, 255, 116, 97, 116, 255, 115, 95, 112, 101, 114, 255, 115, 105, 255, 115, 116, 101, 110, 116, 95, 255, 115, 255, 97, 109, 112, 108, 101, 95, 112, 255, 255, 97, 103, 101, 115, 0, 0, 0, 0, 255, 251, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 115, 255, 116, 97, 116, 255, 115, 95, 115, 97, 109, 255, 112, 108, 255, 101, 95, 112, 97, 103, 101, 255, 115, 255, 0, 0, 0, 0, 0, 0, 0, 248, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 207, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1488, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1489, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1490, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1651, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1651] [region_id=1487]
[2019/05/01 12:39:12.185 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 1487] 1651"]
[2019/05/01 12:39:12.185 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=1487]
[2019/05/01 12:39:12.201 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=16.01325ms] [region_id=1487]
[2019/05/01 12:39:12.301 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_1339_6_7_(default|lock|write).sst] [snap_key=1339_6_7]
[2019/05/01 12:39:12.305 -07:00] [INFO] [unknown:1792] ["[region 1339] 1653 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 7, term: 6]"]
[2019/05/01 12:39:12.305 -07:00] [INFO] [unknown:1816] ["[region 1339] 1653 restored progress of 1340 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:39:12.305 -07:00] [INFO] [unknown:1816] ["[region 1339] 1653 restored progress of 1341 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:39:12.305 -07:00] [INFO] [unknown:1816] ["[region 1339] 1653 restored progress of 1342 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:39:12.305 -07:00] [INFO] [unknown:1816] ["[region 1339] 1653 restored progress of 1653 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:39:12.305 -07:00] [INFO] [unknown:474] ["[region 1339] 1653 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 7, term: 6]"]
[2019/05/01 12:39:12.305 -07:00] [INFO] [unknown:1736] ["[region 1339] 1653 [commit: 7] restored snapshot [index: 7, term: 6]"]
[2019/05/01 12:39:12.305 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=1653] [region_id=1339]
[2019/05/01 12:39:12.305 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 7, truncated_state: Some(RaftTruncatedState { index: 7, term: 6, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 1339, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 109, 255, 97, 120, 95, 255, 112, 117, 114, 103, 101, 255, 95, 108, 255, 97, 103, 95, 100, 101, 108, 255, 97, 255, 121, 0, 0, 0, 0, 0, 0, 249, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 109, 255, 97, 120, 95, 255, 117, 110, 100, 111, 95, 255, 108, 111, 255, 103, 95, 115, 105, 122, 101, 255, 0, 255, 0, 0, 0, 0, 0, 0, 0, 247, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 177, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1340, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1341, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1342, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1653, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1653] [region_id=1339]
[2019/05/01 12:39:12.321 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 1339, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 109, 255, 97, 120, 95, 255, 112, 117, 114, 103, 101, 255, 95, 108, 255, 97, 103, 95, 100, 101, 108, 255, 97, 255, 121, 0, 0, 0, 0, 0, 0, 249, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 109, 255, 97, 120, 95, 255, 117, 110, 100, 111, 95, 255, 108, 111, 255, 103, 95, 115, 105, 122, 101, 255, 0, 255, 0, 0, 0, 0, 0, 0, 0, 247, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 177, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1340, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1341, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1342, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1653, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1653] [region_id=1339]
[2019/05/01 12:39:12.321 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 1339] 1653"]
[2019/05/01 12:39:12.321 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=1339]
[2019/05/01 12:39:12.338 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=16.363234ms] [region_id=1339]
[2019/05/01 12:39:12.923 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 28], lock_version: 408089933338116104, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 28], lock_ttl: 3002, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:39:13.105 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 25], lock_version: 408089933351223312, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 26], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:39:13.144 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 1651, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=8] [term=6] [peer_id=1651] [region_id=1487]
[2019/05/01 12:39:13.144 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 6, version: 207, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=1651] [region_id=1487]
[2019/05/01 12:39:13.144 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 1487, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 115, 255, 116, 97, 116, 255, 115, 95, 112, 101, 114, 255, 115, 105, 255, 115, 116, 101, 110, 116, 95, 255, 115, 255, 97, 109, 112, 108, 101, 95, 112, 255, 255, 97, 103, 101, 115, 0, 0, 0, 0, 255, 251, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 115, 255, 116, 97, 116, 255, 115, 95, 115, 97, 109, 255, 112, 108, 255, 101, 95, 112, 97, 103, 101, 255, 115, 255, 0, 0, 0, 0, 0, 0, 0, 248, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 207, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1488, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1489, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1490, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1651, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1651, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1651] [region_id=1487]
[2019/05/01 12:39:13.180 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 25], lock_version: 408089933351223312, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 26], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:39:13.238 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 1488, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=9] [term=6] [peer_id=1651] [region_id=1487]
[2019/05/01 12:39:13.238 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 7, version: 207, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=1651] [region_id=1487]
[2019/05/01 12:39:13.238 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 1487, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 115, 255, 116, 97, 116, 255, 115, 95, 112, 101, 114, 255, 115, 105, 255, 115, 116, 101, 110, 116, 95, 255, 115, 255, 97, 109, 112, 108, 101, 95, 112, 255, 255, 97, 103, 101, 115, 0, 0, 0, 0, 255, 251, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 115, 255, 116, 97, 116, 255, 115, 95, 115, 97, 109, 255, 112, 108, 255, 101, 95, 112, 97, 103, 101, 255, 115, 255, 0, 0, 0, 0, 0, 0, 0, 248, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 7, version: 207, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1488, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1489, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1490, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1651, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1488, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1651] [region_id=1487]
[2019/05/01 12:39:13.303 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 25], lock_version: 408089933351223312, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 26], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:39:13.339 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 1653, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=8] [term=6] [peer_id=1653] [region_id=1339]
[2019/05/01 12:39:13.339 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 6, version: 177, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=1653] [region_id=1339]
[2019/05/01 12:39:13.339 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 1339, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 109, 255, 97, 120, 95, 255, 112, 117, 114, 103, 101, 255, 95, 108, 255, 97, 103, 95, 100, 101, 108, 255, 97, 255, 121, 0, 0, 0, 0, 0, 0, 249, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 109, 255, 97, 120, 95, 255, 117, 110, 100, 111, 95, 255, 108, 111, 255, 103, 95, 115, 105, 122, 101, 255, 0, 255, 0, 0, 0, 0, 0, 0, 0, 247, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 177, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1340, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1341, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1342, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1653, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1653, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1653] [region_id=1339]
[2019/05/01 12:39:13.414 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 1341, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=9] [term=6] [peer_id=1653] [region_id=1339]
[2019/05/01 12:39:13.414 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 7, version: 177, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=1653] [region_id=1339]
[2019/05/01 12:39:13.414 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 1339, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 109, 255, 97, 120, 95, 255, 112, 117, 114, 103, 101, 255, 95, 108, 255, 97, 103, 95, 100, 101, 108, 255, 97, 255, 121, 0, 0, 0, 0, 0, 0, 249, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 109, 255, 97, 120, 95, 255, 117, 110, 100, 111, 95, 255, 108, 111, 255, 103, 95, 115, 105, 122, 101, 255, 0, 255, 0, 0, 0, 0, 0, 0, 0, 247, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 7, version: 177, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1340, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1341, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1342, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1653, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1341, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1653] [region_id=1339]
[2019/05/01 12:39:13.867 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 26], lock_version: 408089933560938506, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 29], lock_ttl: 3056, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:39:13.969 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=1697] [region_id=1675]
[2019/05/01 12:39:13.969 -07:00] [INFO] [unknown:719] ["[region 1675] 1697 became follower at term 0"]
[2019/05/01 12:39:13.969 -07:00] [INFO] [unknown:295] ["[region 1675] 1697 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:39:13.969 -07:00] [INFO] [unknown:719] ["[region 1675] 1697 became follower at term 1"]
[2019/05/01 12:39:13.969 -07:00] [INFO] [unknown:920] ["[region 1675] 1697 [term: 1] received a MsgHeartbeat message with higher term from 1677 [term: 6]"]
[2019/05/01 12:39:13.969 -07:00] [INFO] [unknown:719] ["[region 1675] 1697 became follower at term 6"]
[2019/05/01 12:39:13.981 -07:00] [INFO] [unknown:1625] ["[region 1351] 1359 [term 7] received MsgTimeoutNow from 1353 and starts an election to get leadership."]
[2019/05/01 12:39:13.981 -07:00] [INFO] [unknown:739] ["[region 1351] 1359 became candidate at term 8"]
[2019/05/01 12:39:13.981 -07:00] [INFO] [unknown:854] ["[region 1351] 1359 received MsgRequestVoteResponse from 1359 at term 8"]
[2019/05/01 12:39:13.981 -07:00] [INFO] [unknown:828] ["[region 1351] 1359 [logterm: 7, index: 10] sent MsgRequestVote request to 1352 at term 8"]
[2019/05/01 12:39:13.981 -07:00] [INFO] [unknown:828] ["[region 1351] 1359 [logterm: 7, index: 10] sent MsgRequestVote request to 1353 at term 8"]
[2019/05/01 12:39:14.023 -07:00] [INFO] [unknown:854] ["[region 1351] 1359 received MsgRequestVoteResponse from 1353 at term 8"]
[2019/05/01 12:39:14.023 -07:00] [INFO] [unknown:1550] ["[region 1351] 1359 [quorum:2] has received 2 MsgRequestVoteResponse votes and 0 vote rejections"]
[2019/05/01 12:39:14.023 -07:00] [INFO] [unknown:789] ["[region 1351] 1359 became leader at term 8"]
[2019/05/01 12:39:14.068 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_1517_6_7_(default|lock|write).sst] [snap_key=1517_6_7]
[2019/05/01 12:39:14.075 -07:00] [INFO] [unknown:1792] ["[region 1517] 1654 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 7, term: 6]"]
[2019/05/01 12:39:14.075 -07:00] [INFO] [unknown:1816] ["[region 1517] 1654 restored progress of 1518 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:39:14.075 -07:00] [INFO] [unknown:1816] ["[region 1517] 1654 restored progress of 1519 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:39:14.075 -07:00] [INFO] [unknown:1816] ["[region 1517] 1654 restored progress of 1520 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:39:14.075 -07:00] [INFO] [unknown:1816] ["[region 1517] 1654 restored progress of 1654 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:39:14.075 -07:00] [INFO] [unknown:474] ["[region 1517] 1654 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 7, term: 6]"]
[2019/05/01 12:39:14.075 -07:00] [INFO] [unknown:1736] ["[region 1517] 1654 [commit: 7] restored snapshot [index: 7, term: 6]"]
[2019/05/01 12:39:14.075 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=1654] [region_id=1517]
[2019/05/01 12:39:14.075 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 7, truncated_state: Some(RaftTruncatedState { index: 7, term: 6, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 1517, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 115, 255, 116, 114, 105, 255, 99, 116, 95, 109, 111, 255, 100, 101, 255, 0, 0, 0, 0, 0, 0, 249, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 115, 255, 117, 112, 112, 255, 111, 114, 116, 95, 120, 255, 97, 0, 255, 0, 0, 0, 0, 0, 0, 248, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 217, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1518, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1519, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1520, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1654, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1654] [region_id=1517]
[2019/05/01 12:39:14.091 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 1517, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 115, 255, 116, 114, 105, 255, 99, 116, 95, 109, 111, 255, 100, 101, 255, 0, 0, 0, 0, 0, 0, 249, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 115, 255, 117, 112, 112, 255, 111, 114, 116, 95, 120, 255, 97, 0, 255, 0, 0, 0, 0, 0, 0, 248, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 217, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1518, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1519, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1520, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1654, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1654] [region_id=1517]
[2019/05/01 12:39:14.091 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 1517] 1654"]
[2019/05/01 12:39:14.091 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=1517]
[2019/05/01 12:39:14.116 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=24.765106ms] [region_id=1517]
[2019/05/01 12:39:14.185 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 27], lock_version: 408089933626474498, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 27], lock_ttl: 3002, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:39:14.356 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 28], lock_version: 408089933692010515, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 28], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:39:14.717 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 30], lock_version: 408089933809975312, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 30], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:39:14.727 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 27], lock_version: 408089933809975304, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 27], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:39:14.779 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 27], lock_version: 408089933809975304, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 27], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:39:14.779 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 27], lock_version: 408089933809975304, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 27], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:39:15.083 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 1654, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=8] [term=6] [peer_id=1654] [region_id=1517]
[2019/05/01 12:39:15.083 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 6, version: 217, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=1654] [region_id=1517]
[2019/05/01 12:39:15.083 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 1517, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 115, 255, 116, 114, 105, 255, 99, 116, 95, 109, 111, 255, 100, 101, 255, 0, 0, 0, 0, 0, 0, 249, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 115, 255, 117, 112, 112, 255, 111, 114, 116, 95, 120, 255, 97, 0, 255, 0, 0, 0, 0, 0, 0, 248, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 217, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1518, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1519, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1520, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1654, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1654, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1654] [region_id=1517]
[2019/05/01 12:39:15.128 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 1519, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=9] [term=6] [peer_id=1654] [region_id=1517]
[2019/05/01 12:39:15.128 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 7, version: 217, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=1654] [region_id=1517]
[2019/05/01 12:39:15.128 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 1517, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 115, 255, 116, 114, 105, 255, 99, 116, 95, 109, 111, 255, 100, 101, 255, 0, 0, 0, 0, 0, 0, 249, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 115, 255, 117, 112, 112, 255, 111, 114, 116, 95, 120, 255, 97, 0, 255, 0, 0, 0, 0, 0, 0, 248, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 7, version: 217, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1518, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1519, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1520, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1654, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1519, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1654] [region_id=1517]
[2019/05/01 12:39:15.197 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddLearnerNode, peer: Some(Peer { id: 1698, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=10] [term=6] [peer_id=1507] [region_id=1011]
[2019/05/01 12:39:15.197 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 8, version: 117, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddLearner] [peer_id=1507] [region_id=1011]
[2019/05/01 12:39:15.197 -07:00] [INFO] [apply.rs:1476] ["add learner successfully"] [region="Region { id: 1011, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 97, 255, 112, 105, 95, 255, 116, 114, 120, 95, 108, 255, 101, 118, 255, 101, 108, 0, 0, 0, 0, 251, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 97, 255, 117, 116, 111, 255, 101, 120, 116, 101, 110, 255, 100, 95, 255, 105, 110, 99, 114, 101, 109, 255, 101, 255, 110, 116, 0, 0, 0, 0, 0, 250, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 8, version: 117, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1012, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1014, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1507, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1698, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1507] [region_id=1011]
[2019/05/01 12:39:15.214 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 33], lock_version: 408089933914832909, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 34], lock_ttl: 3002, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:39:15.249 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 33], lock_version: 408089933914832909, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 34], lock_ttl: 3002, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:39:15.339 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 35], lock_version: 408089933941047303, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 35], lock_ttl: 3099, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:39:15.544 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 31], lock_version: 408089934006583309, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 34], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:39:15.598 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 34], lock_version: 408089934045904906, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 34], lock_ttl: 3004, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:39:15.741 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 34], lock_version: 408089934059012099, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 34], lock_ttl: 3085, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:39:15.973 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_1675_6_7_(default|lock|write).sst] [snap_key=1675_6_7]
[2019/05/01 12:39:15.986 -07:00] [INFO] [unknown:1792] ["[region 1675] 1697 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 7, term: 6]"]
[2019/05/01 12:39:15.986 -07:00] [INFO] [unknown:1816] ["[region 1675] 1697 restored progress of 1676 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:39:15.986 -07:00] [INFO] [unknown:1816] ["[region 1675] 1697 restored progress of 1677 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:39:15.986 -07:00] [INFO] [unknown:1816] ["[region 1675] 1697 restored progress of 1678 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:39:15.986 -07:00] [INFO] [unknown:1816] ["[region 1675] 1697 restored progress of 1697 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:39:15.986 -07:00] [INFO] [unknown:474] ["[region 1675] 1697 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 7, term: 6]"]
[2019/05/01 12:39:15.986 -07:00] [INFO] [unknown:1736] ["[region 1675] 1697 [commit: 7] restored snapshot [index: 7, term: 6]"]
[2019/05/01 12:39:15.986 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=1697] [region_id=1675]
[2019/05/01 12:39:15.986 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 7, truncated_state: Some(RaftTruncatedState { index: 7, term: 6, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 1675, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 108, 111, 103, 95, 255, 98, 105, 110, 0, 254, 0, 0, 0, 252], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 108, 111, 103, 95, 255, 98, 105, 110, 95, 255, 116, 114, 117, 255, 115, 116, 95, 102, 117, 255, 110, 99, 255, 116, 105, 111, 110, 95, 99, 255, 114, 255, 101, 97, 116, 111, 114, 115, 0, 254, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 247, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1676, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1677, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1678, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1697, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1697] [region_id=1675]
[2019/05/01 12:39:16.003 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 1675, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 108, 111, 103, 95, 255, 98, 105, 110, 0, 254, 0, 0, 0, 252], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 108, 111, 103, 95, 255, 98, 105, 110, 95, 255, 116, 114, 117, 255, 115, 116, 95, 102, 117, 255, 110, 99, 255, 116, 105, 111, 110, 95, 99, 255, 114, 255, 101, 97, 116, 111, 114, 115, 0, 254, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 247, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1676, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1677, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1678, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1697, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1697] [region_id=1675]
[2019/05/01 12:39:16.003 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 1675] 1697"]
[2019/05/01 12:39:16.003 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=1675]
[2019/05/01 12:39:16.027 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=23.920207ms] [region_id=1675]
[2019/05/01 12:39:16.326 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 38], lock_version: 408089934216298507, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 40], lock_ttl: 3003, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:39:16.584 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 38], lock_version: 408089934281834500, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 40], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:39:16.646 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 39], lock_version: 408089934308048904, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 43], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:39:16.790 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 39], lock_version: 408089934347370505, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 42], lock_ttl: 3002, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:39:17.012 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 1697, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=8] [term=6] [peer_id=1697] [region_id=1675]
[2019/05/01 12:39:17.012 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 6, version: 247, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=1697] [region_id=1675]
[2019/05/01 12:39:17.012 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 1675, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 108, 111, 103, 95, 255, 98, 105, 110, 0, 254, 0, 0, 0, 252], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 108, 111, 103, 95, 255, 98, 105, 110, 95, 255, 116, 114, 117, 255, 115, 116, 95, 102, 117, 255, 110, 99, 255, 116, 105, 111, 110, 95, 99, 255, 114, 255, 101, 97, 116, 111, 114, 115, 0, 254, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 247, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1676, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1677, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1678, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1697, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1697, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1697] [region_id=1675]
[2019/05/01 12:39:17.070 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 1678, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=9] [term=6] [peer_id=1697] [region_id=1675]
[2019/05/01 12:39:17.070 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 7, version: 247, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=1697] [region_id=1675]
[2019/05/01 12:39:17.070 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 1675, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 108, 111, 103, 95, 255, 98, 105, 110, 0, 254, 0, 0, 0, 252], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 108, 111, 103, 95, 255, 98, 105, 110, 95, 255, 116, 114, 117, 255, 115, 116, 95, 102, 117, 255, 110, 99, 255, 116, 105, 111, 110, 95, 99, 255, 114, 255, 101, 97, 116, 111, 114, 115, 0, 254, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 7, version: 247, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1676, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1677, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1678, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1697, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1678, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1697] [region_id=1675]
[2019/05/01 12:39:17.206 -07:00] [INFO] [unknown:1625] ["[region 153] 488 [term 7] received MsgTimeoutNow from 155 and starts an election to get leadership."]
[2019/05/01 12:39:17.206 -07:00] [INFO] [unknown:739] ["[region 153] 488 became candidate at term 8"]
[2019/05/01 12:39:17.206 -07:00] [INFO] [unknown:854] ["[region 153] 488 received MsgRequestVoteResponse from 488 at term 8"]
[2019/05/01 12:39:17.206 -07:00] [INFO] [unknown:828] ["[region 153] 488 [logterm: 7, index: 19] sent MsgRequestVote request to 155 at term 8"]
[2019/05/01 12:39:17.206 -07:00] [INFO] [unknown:828] ["[region 153] 488 [logterm: 7, index: 19] sent MsgRequestVote request to 329 at term 8"]
[2019/05/01 12:39:17.235 -07:00] [INFO] [unknown:854] ["[region 153] 488 received MsgRequestVoteResponse from 155 at term 8"]
[2019/05/01 12:39:17.243 -07:00] [INFO] [unknown:1550] ["[region 153] 488 [quorum:2] has received 2 MsgRequestVoteResponse votes and 0 vote rejections"]
[2019/05/01 12:39:17.243 -07:00] [INFO] [unknown:789] ["[region 153] 488 became leader at term 8"]
[2019/05/01 12:39:17.277 -07:00] [INFO] [unknown:920] ["[region 138] 316 [term: 7] received a MsgRequestVote message with higher term from 440 [term: 8]"]
[2019/05/01 12:39:17.277 -07:00] [INFO] [unknown:719] ["[region 138] 316 became follower at term 8"]
[2019/05/01 12:39:17.277 -07:00] [INFO] [unknown:1083] ["[region 138] 316 [logterm: 7, index: 13, vote: 0] cast MsgRequestVote for 440 [logterm: 7, index: 13] at term 8"]
[2019/05/01 12:39:17.299 -07:00] [INFO] [unknown:1625] ["[region 521] 1649 [term 7] received MsgTimeoutNow from 523 and starts an election to get leadership."]
[2019/05/01 12:39:17.299 -07:00] [INFO] [unknown:739] ["[region 521] 1649 became candidate at term 8"]
[2019/05/01 12:39:17.299 -07:00] [INFO] [unknown:854] ["[region 521] 1649 received MsgRequestVoteResponse from 1649 at term 8"]
[2019/05/01 12:39:17.299 -07:00] [INFO] [unknown:828] ["[region 521] 1649 [logterm: 7, index: 10] sent MsgRequestVote request to 523 at term 8"]
[2019/05/01 12:39:17.299 -07:00] [INFO] [unknown:828] ["[region 521] 1649 [logterm: 7, index: 10] sent MsgRequestVote request to 524 at term 8"]
[2019/05/01 12:39:17.371 -07:00] [INFO] [unknown:854] ["[region 521] 1649 received MsgRequestVoteResponse from 524 at term 8"]
[2019/05/01 12:39:17.371 -07:00] [INFO] [unknown:1550] ["[region 521] 1649 [quorum:2] has received 2 MsgRequestVoteResponse votes and 0 vote rejections"]
[2019/05/01 12:39:17.371 -07:00] [INFO] [unknown:789] ["[region 521] 1649 became leader at term 8"]
[2019/05/01 12:39:17.406 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddLearnerNode, peer: Some(Peer { id: 1700, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=11] [term=7] [peer_id=1307] [region_id=1182]
[2019/05/01 12:39:17.414 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 8, version: 147, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddLearner] [peer_id=1307] [region_id=1182]
[2019/05/01 12:39:17.414 -07:00] [INFO] [apply.rs:1476] ["add learner successfully"] [region="Region { id: 1182, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 102, 255, 111, 114, 99, 255, 101, 95, 114, 101, 99, 255, 111, 118, 255, 101, 114, 121, 0, 0, 0, 252, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 102, 255, 116, 95, 97, 255, 117, 120, 95, 116, 97, 255, 98, 108, 255, 101, 0, 0, 0, 0, 0, 250, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 8, version: 147, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1184, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1185, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1307, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1700, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1307] [region_id=1182]
[2019/05/01 12:39:17.687 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 43], lock_version: 408089934596407306, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 43], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:39:17.738 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 44], lock_version: 408089934596407311, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 44], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:39:17.841 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 43], lock_version: 408089934622621706, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 43], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:39:18.108 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 47], lock_version: 408089934688157698, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 47], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:39:18.175 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=1701] [region_id=602]
[2019/05/01 12:39:18.175 -07:00] [INFO] [unknown:719] ["[region 602] 1701 became follower at term 0"]
[2019/05/01 12:39:18.175 -07:00] [INFO] [unknown:295] ["[region 602] 1701 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:39:18.175 -07:00] [INFO] [unknown:719] ["[region 602] 1701 became follower at term 1"]
[2019/05/01 12:39:18.176 -07:00] [INFO] [unknown:920] ["[region 602] 1701 [term: 1] received a MsgHeartbeat message with higher term from 779 [term: 8]"]
[2019/05/01 12:39:18.176 -07:00] [INFO] [unknown:719] ["[region 602] 1701 became follower at term 8"]
[2019/05/01 12:39:18.209 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 47], lock_version: 408089934727479301, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 47], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:39:18.269 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=1699] [region_id=1281]
[2019/05/01 12:39:18.269 -07:00] [INFO] [unknown:719] ["[region 1281] 1699 became follower at term 0"]
[2019/05/01 12:39:18.269 -07:00] [INFO] [unknown:295] ["[region 1281] 1699 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:39:18.269 -07:00] [INFO] [unknown:719] ["[region 1281] 1699 became follower at term 1"]
[2019/05/01 12:39:18.270 -07:00] [INFO] [unknown:920] ["[region 1281] 1699 [term: 1] received a MsgHeartbeat message with higher term from 1282 [term: 7]"]
[2019/05/01 12:39:18.270 -07:00] [INFO] [unknown:719] ["[region 1281] 1699 became follower at term 7"]
[2019/05/01 12:39:18.325 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 46], lock_version: 408089934727479297, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 46], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:39:18.401 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 46], lock_version: 408089934727479297, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 46], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:39:18.425 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 49], lock_version: 408089934779908105, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 49], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:39:18.722 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 49], lock_version: 408089934819229701, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 49], lock_ttl: 3084, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:39:18.757 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 44], lock_version: 408089934819229707, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 48], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:39:18.989 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 46], lock_version: 408089934858551302, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 46], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:39:19.009 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 1698, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=11] [term=6] [peer_id=1507] [region_id=1011]
[2019/05/01 12:39:19.014 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 9, version: 117, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=1507] [region_id=1011]
[2019/05/01 12:39:19.014 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 1011, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 97, 255, 112, 105, 95, 255, 116, 114, 120, 95, 108, 255, 101, 118, 255, 101, 108, 0, 0, 0, 0, 251, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 97, 255, 117, 116, 111, 255, 101, 120, 116, 101, 110, 255, 100, 95, 255, 105, 110, 99, 114, 101, 109, 255, 101, 255, 110, 116, 0, 0, 0, 0, 0, 250, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 117, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1012, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1014, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1507, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1698, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1698, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1507] [region_id=1011]
[2019/05/01 12:39:19.040 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 46], lock_version: 408089934858551302, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 46], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:39:19.089 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 46], lock_version: 408089934858551302, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 46], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:39:19.091 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 46], lock_version: 408089934858551302, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 46], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:39:19.102 -07:00] [INFO] [keys.rs:155] ["approximate keys over threshold, need to do split check"] [threshold=5] [keys=5] [region_id=153]
[2019/05/01 12:39:19.158 -07:00] [INFO] [peer.rs:294] ["on split"] [split_keys="key \"t\\200\\000\\000\\000\\000\\000\\000\\377(_r\\200\\000\\000\\000\\000\\377\\001\\324\\301\\000\\000\\000\\000\\000\\372\\372V,h5/\\377\\365\""] [peer_id=488] [region_id=153]
[2019/05/01 12:39:19.158 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 1014, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=12] [term=6] [peer_id=1507] [region_id=1011]
[2019/05/01 12:39:19.158 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 10, version: 117, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=1507] [region_id=1011]
[2019/05/01 12:39:19.158 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 1011, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 97, 255, 112, 105, 95, 255, 116, 114, 120, 95, 108, 255, 101, 118, 255, 101, 108, 0, 0, 0, 0, 251, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 97, 255, 117, 116, 111, 255, 101, 120, 116, 101, 110, 255, 100, 95, 255, 105, 110, 99, 114, 101, 109, 255, 101, 255, 110, 116, 0, 0, 0, 0, 0, 250, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 10, version: 117, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1012, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1014, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1507, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1698, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1014, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1507] [region_id=1011]
[2019/05/01 12:39:19.158 -07:00] [INFO] [pd.rs:285] ["try to batch split region"] [region="Region { id: 153, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 114, 128, 0, 0, 0, 0, 255, 1, 212, 193, 0, 0, 0, 0, 0, 250], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 114, 128, 0, 0, 0, 0, 255, 1, 212, 195, 0, 0, 0, 0, 0, 250], region_epoch: Some(RegionEpoch { conf_ver: 8, version: 18, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 155, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 329, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 488, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [new_region_ids="[SplitID { new_region_id: 1702, new_peer_ids: [1703, 1704, 1705], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }]"] [region_id=153]
[2019/05/01 12:39:19.158 -07:00] [WARN] [split_observer.rs:98] ["invalid key, skip"] [err="\"key \\\"t\\\\200\\\\000\\\\000\\\\000\\\\000\\\\000\\\\000\\\\377(_r\\\\200\\\\000\\\\000\\\\000\\\\000\\\\377\\\\001\\\\324\\\\301\\\\000\\\\000\\\\000\\\\000\\\\000\\\\372\\\" should be in (\\\"t\\\\200\\\\000\\\\000\\\\000\\\\000\\\\000\\\\000\\\\377(_r\\\\200\\\\000\\\\000\\\\000\\\\000\\\\377\\\\001\\\\324\\\\301\\\\000\\\\000\\\\000\\\\000\\\\000\\\\372\\\", \\\"t\\\\200\\\\000\\\\000\\\\000\\\\000\\\\000\\\\000\\\\377(_r\\\\200\\\\000\\\\000\\\\000\\\\000\\\\377\\\\001\\\\324\\\\303\\\\000\\\\000\\\\000\\\\000\\\\000\\\\372\\\")\""] [index=0] [region_id=153]
[2019/05/01 12:39:19.158 -07:00] [ERROR] [split_observer.rs:161] ["failed to handle split req"] [err="\"no valid key found for split.\""] [region_id=153]
[2019/05/01 12:39:19.158 -07:00] [WARN] [peer.rs:1846] ["skip proposal"] [err="Coprocessor(Other(StringError(\"[src/raftstore/coprocessor/split_observer.rs:166]: no valid key found for split.\")))"] [peer_id=488] [region_id=153]
[2019/05/01 12:39:19.218 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 46], lock_version: 408089934858551302, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 46], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:39:19.422 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 45], lock_version: 408089935015837703, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 45], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:39:19.571 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 46], lock_version: 408089934963408902, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 50], lock_ttl: 3249, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:39:19.603 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 46], lock_version: 408089934963408902, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 50], lock_ttl: 3249, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:39:19.625 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 46], lock_version: 408089934963408902, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 50], lock_ttl: 3249, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:39:19.922 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 52], lock_version: 408089935160016901, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 52], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:39:20.117 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=99_7_11] [peer_id=1556] [region_id=99]
[2019/05/01 12:39:20.117 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=150_7_11] [peer_id=1459] [region_id=150]
[2019/05/01 12:39:20.117 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=341_7_11] [peer_id=1454] [region_id=341]
[2019/05/01 12:39:20.118 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=345_7_8] [peer_id=1457] [region_id=345]
[2019/05/01 12:39:20.118 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=349_7_11] [peer_id=1511] [region_id=349]
[2019/05/01 12:39:20.118 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=460_7_8] [peer_id=1557] [region_id=460]
[2019/05/01 12:39:20.118 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=493_7_11] [peer_id=1646] [region_id=493]
[2019/05/01 12:39:20.118 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=501_8_9] [peer_id=1604] [region_id=501]
[2019/05/01 12:39:20.118 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=521_7_8] [peer_id=1649] [region_id=521]
[2019/05/01 12:39:20.118 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=525_6_10] [peer_id=1561] [region_id=525]
[2019/05/01 12:39:20.118 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=586_7_11] [peer_id=1363] [region_id=586]
[2019/05/01 12:39:20.119 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=594_6_7] [peer_id=1408] [region_id=594]
[2019/05/01 12:39:20.119 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=1011_6_7] [peer_id=1507] [region_id=1011]
[2019/05/01 12:39:20.119 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=1023_6_7] [peer_id=1453] [region_id=1023]
[2019/05/01 12:39:20.119 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=1063_7_11] [peer_id=1512] [region_id=1063]
[2019/05/01 12:39:20.119 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=1083_7_8] [peer_id=1406] [region_id=1083]
[2019/05/01 12:39:20.119 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=1125_6_7] [peer_id=1505] [region_id=1125]
[2019/05/01 12:39:20.119 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=1133_6_7] [peer_id=1503] [region_id=1133]
[2019/05/01 12:39:20.119 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=1265_6_7] [peer_id=1405] [region_id=1265]
[2019/05/01 12:39:20.119 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=1273_7_11] [peer_id=1558] [region_id=1273]
[2019/05/01 12:39:20.120 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=1277_7_11] [peer_id=1458] [region_id=1277]
[2019/05/01 12:39:20.120 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=1323_7_8] [peer_id=1603] [region_id=1323]
[2019/05/01 12:39:20.120 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=1339_6_7] [peer_id=1653] [region_id=1339]
[2019/05/01 12:39:20.120 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=1347_6_7] [peer_id=1411] [region_id=1347]
[2019/05/01 12:39:20.120 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=1425_6_7] [peer_id=1509] [region_id=1425]
[2019/05/01 12:39:20.120 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=1487_6_7] [peer_id=1651] [region_id=1487]
[2019/05/01 12:39:20.120 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=1517_6_7] [peer_id=1654] [region_id=1517]
[2019/05/01 12:39:20.120 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=1675_6_7] [peer_id=1697] [region_id=1675]
[2019/05/01 12:39:20.179 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_602_8_12_(default|lock|write).sst] [snap_key=602_8_12]
[2019/05/01 12:39:20.199 -07:00] [INFO] [unknown:1792] ["[region 602] 1701 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 12, term: 8]"]
[2019/05/01 12:39:20.199 -07:00] [INFO] [unknown:1816] ["[region 602] 1701 restored progress of 604 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:39:20.199 -07:00] [INFO] [unknown:1816] ["[region 602] 1701 restored progress of 605 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:39:20.199 -07:00] [INFO] [unknown:1816] ["[region 602] 1701 restored progress of 779 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:39:20.199 -07:00] [INFO] [unknown:1816] ["[region 602] 1701 restored progress of 1701 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:39:20.199 -07:00] [INFO] [unknown:474] ["[region 602] 1701 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 12, term: 8]"]
[2019/05/01 12:39:20.199 -07:00] [INFO] [unknown:1736] ["[region 602] 1701 [commit: 12] restored snapshot [index: 12, term: 8]"]
[2019/05/01 12:39:20.199 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=1701] [region_id=602]
[2019/05/01 12:39:20.199 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 12, truncated_state: Some(RaftTruncatedState { index: 12, term: 8, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 602, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 102, 116, 95, 98, 255, 111, 111, 108, 101, 255, 97, 110, 95, 255, 115, 121, 110, 116, 97, 255, 120, 0, 255, 0, 0, 0, 0, 0, 0, 248, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 102, 116, 95, 109, 255, 97, 120, 95, 119, 255, 111, 114, 100, 255, 95, 108, 101, 110, 0, 254, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 77, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 604, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 605, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 779, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1701, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1701] [region_id=602]
[2019/05/01 12:39:20.235 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 52], lock_version: 408089935238660104, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 53], lock_ttl: 3002, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:39:20.254 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 602, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 102, 116, 95, 98, 255, 111, 111, 108, 101, 255, 97, 110, 95, 255, 115, 121, 110, 116, 97, 255, 120, 0, 255, 0, 0, 0, 0, 0, 0, 248, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 102, 116, 95, 109, 255, 97, 120, 95, 119, 255, 111, 114, 100, 255, 95, 108, 101, 110, 0, 254, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 77, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 604, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 605, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 779, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1701, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1701] [region_id=602]
[2019/05/01 12:39:20.254 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 602] 1701"]
[2019/05/01 12:39:20.254 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=602]
[2019/05/01 12:39:20.273 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_1281_7_8_(default|lock|write).sst] [snap_key=1281_7_8]
[2019/05/01 12:39:20.288 -07:00] [INFO] [unknown:1792] ["[region 1281] 1699 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 8, term: 7]"]
[2019/05/01 12:39:20.288 -07:00] [INFO] [unknown:1816] ["[region 1281] 1699 restored progress of 1282 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:39:20.288 -07:00] [INFO] [unknown:1816] ["[region 1281] 1699 restored progress of 1283 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:39:20.288 -07:00] [INFO] [unknown:1816] ["[region 1281] 1699 restored progress of 1284 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:39:20.288 -07:00] [INFO] [unknown:1816] ["[region 1281] 1699 restored progress of 1699 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:39:20.288 -07:00] [INFO] [unknown:474] ["[region 1281] 1699 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 8, term: 7]"]
[2019/05/01 12:39:20.288 -07:00] [INFO] [unknown:1736] ["[region 1281] 1699 [commit: 8] restored snapshot [index: 8, term: 7]"]
[2019/05/01 12:39:20.288 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=1699] [region_id=1281]
[2019/05/01 12:39:20.288 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 8, truncated_state: Some(RaftTruncatedState { index: 8, term: 7, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 1281, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 108, 255, 111, 99, 107, 255, 115, 95, 117, 110, 115, 255, 97, 102, 255, 101, 95, 102, 111, 114, 95, 255, 98, 255, 105, 110, 108, 111, 103, 0, 0, 253, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 108, 255, 111, 103, 95, 255, 98, 117, 102, 102, 101, 255, 114, 95, 255, 115, 105, 122, 101, 0, 0, 253, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 167, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1282, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1283, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1284, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1699, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1699] [region_id=1281]
[2019/05/01 12:39:20.327 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 52], lock_version: 408089935238660104, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 53], lock_ttl: 3002, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:39:20.343 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=88.803326ms] [region_id=602]
[2019/05/01 12:39:20.356 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 1281, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 108, 255, 111, 99, 107, 255, 115, 95, 117, 110, 115, 255, 97, 102, 255, 101, 95, 102, 111, 114, 95, 255, 98, 255, 105, 110, 108, 111, 103, 0, 0, 253, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 108, 255, 111, 103, 95, 255, 98, 117, 102, 102, 101, 255, 114, 95, 255, 115, 105, 122, 101, 0, 0, 253, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 167, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1282, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1283, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1284, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1699, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1699] [region_id=1281]
[2019/05/01 12:39:20.356 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 1281] 1699"]
[2019/05/01 12:39:20.356 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=1281]
[2019/05/01 12:39:20.403 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=46.973528ms] [region_id=1281]
[2019/05/01 12:39:20.857 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 48], lock_version: 408089935369732100, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 52], lock_ttl: 3142, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:39:20.908 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 48], lock_version: 408089935369732100, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 52], lock_ttl: 3142, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:39:21.242 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 1701, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=13] [term=8] [peer_id=1701] [region_id=602]
[2019/05/01 12:39:21.242 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 9, version: 77, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=1701] [region_id=602]
[2019/05/01 12:39:21.242 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 602, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 102, 116, 95, 98, 255, 111, 111, 108, 101, 255, 97, 110, 95, 255, 115, 121, 110, 116, 97, 255, 120, 0, 255, 0, 0, 0, 0, 0, 0, 248, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 102, 116, 95, 109, 255, 97, 120, 95, 119, 255, 111, 114, 100, 255, 95, 108, 101, 110, 0, 254, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 77, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 604, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 605, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 779, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1701, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1701, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1701] [region_id=602]
[2019/05/01 12:39:21.319 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 1700, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=12] [term=7] [peer_id=1307] [region_id=1182]
[2019/05/01 12:39:21.319 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 9, version: 147, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=1307] [region_id=1182]
[2019/05/01 12:39:21.319 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 1182, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 102, 255, 111, 114, 99, 255, 101, 95, 114, 101, 99, 255, 111, 118, 255, 101, 114, 121, 0, 0, 0, 252, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 102, 255, 116, 95, 97, 255, 117, 120, 95, 116, 97, 255, 98, 108, 255, 101, 0, 0, 0, 0, 0, 250, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 147, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1184, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1185, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1307, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1700, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1700, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1307] [region_id=1182]
[2019/05/01 12:39:21.382 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 605, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=14] [term=8] [peer_id=1701] [region_id=602]
[2019/05/01 12:39:21.382 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 10, version: 77, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=1701] [region_id=602]
[2019/05/01 12:39:21.382 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 602, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 102, 116, 95, 98, 255, 111, 111, 108, 101, 255, 97, 110, 95, 255, 115, 121, 110, 116, 97, 255, 120, 0, 255, 0, 0, 0, 0, 0, 0, 248, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 102, 116, 95, 109, 255, 97, 120, 95, 119, 255, 111, 114, 100, 255, 95, 108, 101, 110, 0, 254, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 10, version: 77, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 604, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 605, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 779, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1701, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 605, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1701] [region_id=602]
[2019/05/01 12:39:21.404 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 1699, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=9] [term=7] [peer_id=1699] [region_id=1281]
[2019/05/01 12:39:21.404 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 6, version: 167, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=1699] [region_id=1281]
[2019/05/01 12:39:21.404 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 1281, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 108, 255, 111, 99, 107, 255, 115, 95, 117, 110, 115, 255, 97, 102, 255, 101, 95, 102, 111, 114, 95, 255, 98, 255, 105, 110, 108, 111, 103, 0, 0, 253, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 108, 255, 111, 103, 95, 255, 98, 117, 102, 102, 101, 255, 114, 95, 255, 115, 105, 122, 101, 0, 0, 253, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 167, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1282, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1283, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1284, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1699, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1699, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1699] [region_id=1281]
[2019/05/01 12:39:21.461 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 1185, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=13] [term=7] [peer_id=1307] [region_id=1182]
[2019/05/01 12:39:21.461 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 10, version: 147, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=1307] [region_id=1182]
[2019/05/01 12:39:21.461 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 1182, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 102, 255, 111, 114, 99, 255, 101, 95, 114, 101, 99, 255, 111, 118, 255, 101, 114, 121, 0, 0, 0, 252, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 102, 255, 116, 95, 97, 255, 117, 120, 95, 116, 97, 255, 98, 108, 255, 101, 0, 0, 0, 0, 0, 250, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 10, version: 147, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1184, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1185, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1307, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1700, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1185, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1307] [region_id=1182]
[2019/05/01 12:39:21.473 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 1283, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=10] [term=7] [peer_id=1699] [region_id=1281]
[2019/05/01 12:39:21.473 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 7, version: 167, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=1699] [region_id=1281]
[2019/05/01 12:39:21.473 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 1281, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 108, 255, 111, 99, 107, 255, 115, 95, 117, 110, 115, 255, 97, 102, 255, 101, 95, 102, 111, 114, 95, 255, 98, 255, 105, 110, 108, 111, 103, 0, 0, 253, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 108, 255, 111, 103, 95, 255, 98, 117, 102, 102, 101, 255, 114, 95, 255, 115, 105, 122, 101, 0, 0, 253, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 7, version: 167, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1282, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1283, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1284, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1699, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1283, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1699] [region_id=1281]
[2019/05/01 12:39:22.050 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=1709] [region_id=1525]
[2019/05/01 12:39:22.051 -07:00] [INFO] [unknown:719] ["[region 1525] 1709 became follower at term 0"]
[2019/05/01 12:39:22.051 -07:00] [INFO] [unknown:295] ["[region 1525] 1709 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:39:22.051 -07:00] [INFO] [unknown:719] ["[region 1525] 1709 became follower at term 1"]
[2019/05/01 12:39:22.051 -07:00] [INFO] [unknown:920] ["[region 1525] 1709 [term: 1] received a MsgHeartbeat message with higher term from 1527 [term: 7]"]
[2019/05/01 12:39:22.051 -07:00] [INFO] [unknown:719] ["[region 1525] 1709 became follower at term 7"]
[2019/05/01 12:39:22.103 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=1707] [region_id=1376]
[2019/05/01 12:39:22.104 -07:00] [INFO] [unknown:719] ["[region 1376] 1707 became follower at term 0"]
[2019/05/01 12:39:22.104 -07:00] [INFO] [unknown:295] ["[region 1376] 1707 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:39:22.104 -07:00] [INFO] [unknown:719] ["[region 1376] 1707 became follower at term 1"]
[2019/05/01 12:39:22.104 -07:00] [INFO] [unknown:920] ["[region 1376] 1707 [term: 1] received a MsgHeartbeat message with higher term from 1379 [term: 6]"]
[2019/05/01 12:39:22.104 -07:00] [INFO] [unknown:719] ["[region 1376] 1707 became follower at term 6"]
[2019/05/01 12:39:22.343 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=1708] [region_id=1343]
[2019/05/01 12:39:22.344 -07:00] [INFO] [unknown:719] ["[region 1343] 1708 became follower at term 0"]
[2019/05/01 12:39:22.344 -07:00] [INFO] [unknown:295] ["[region 1343] 1708 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:39:22.344 -07:00] [INFO] [unknown:719] ["[region 1343] 1708 became follower at term 1"]
[2019/05/01 12:39:22.344 -07:00] [INFO] [unknown:920] ["[region 1343] 1708 [term: 1] received a MsgHeartbeat message with higher term from 1346 [term: 6]"]
[2019/05/01 12:39:22.344 -07:00] [INFO] [unknown:719] ["[region 1343] 1708 became follower at term 6"]
[2019/05/01 12:39:22.747 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 57], lock_version: 408089935907127308, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 59], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:39:22.890 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 57], lock_version: 408089935959556101, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 57], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:39:22.917 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 58], lock_version: 408089935959556098, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 59], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:39:23.023 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 59], lock_version: 408089935985770500, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 59], lock_ttl: 3002, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:39:23.465 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 57], lock_version: 408089936090628098, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 61], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:39:23.649 -07:00] [INFO] [unknown:1625] ["[region 1182] 1307 [term 7] received MsgTimeoutNow from 1184 and starts an election to get leadership."]
[2019/05/01 12:39:23.649 -07:00] [INFO] [unknown:739] ["[region 1182] 1307 became candidate at term 8"]
[2019/05/01 12:39:23.650 -07:00] [INFO] [unknown:854] ["[region 1182] 1307 received MsgRequestVoteResponse from 1307 at term 8"]
[2019/05/01 12:39:23.650 -07:00] [INFO] [unknown:828] ["[region 1182] 1307 [logterm: 7, index: 13] sent MsgRequestVote request to 1184 at term 8"]
[2019/05/01 12:39:23.650 -07:00] [INFO] [unknown:828] ["[region 1182] 1307 [logterm: 7, index: 13] sent MsgRequestVote request to 1700 at term 8"]
[2019/05/01 12:39:23.675 -07:00] [INFO] [unknown:854] ["[region 1182] 1307 received MsgRequestVoteResponse from 1184 at term 8"]
[2019/05/01 12:39:23.675 -07:00] [INFO] [unknown:1550] ["[region 1182] 1307 [quorum:2] has received 2 MsgRequestVoteResponse votes and 0 vote rejections"]
[2019/05/01 12:39:23.675 -07:00] [INFO] [unknown:789] ["[region 1182] 1307 became leader at term 8"]
[2019/05/01 12:39:23.682 -07:00] [INFO] [unknown:1625] ["[region 135] 315 [term 7] received MsgTimeoutNow from 137 and starts an election to get leadership."]
[2019/05/01 12:39:23.682 -07:00] [INFO] [unknown:739] ["[region 135] 315 became candidate at term 8"]
[2019/05/01 12:39:23.682 -07:00] [INFO] [unknown:854] ["[region 135] 315 received MsgRequestVoteResponse from 315 at term 8"]
[2019/05/01 12:39:23.682 -07:00] [INFO] [unknown:828] ["[region 135] 315 [logterm: 7, index: 10] sent MsgRequestVote request to 136 at term 8"]
[2019/05/01 12:39:23.682 -07:00] [INFO] [unknown:828] ["[region 135] 315 [logterm: 7, index: 10] sent MsgRequestVote request to 137 at term 8"]
[2019/05/01 12:39:23.698 -07:00] [INFO] [unknown:1625] ["[region 429] 577 [term 7] received MsgTimeoutNow from 431 and starts an election to get leadership."]
[2019/05/01 12:39:23.698 -07:00] [INFO] [unknown:739] ["[region 429] 577 became candidate at term 8"]
[2019/05/01 12:39:23.698 -07:00] [INFO] [unknown:854] ["[region 429] 577 received MsgRequestVoteResponse from 577 at term 8"]
[2019/05/01 12:39:23.698 -07:00] [INFO] [unknown:828] ["[region 429] 577 [logterm: 7, index: 10] sent MsgRequestVote request to 432 at term 8"]
[2019/05/01 12:39:23.698 -07:00] [INFO] [unknown:828] ["[region 429] 577 [logterm: 7, index: 10] sent MsgRequestVote request to 431 at term 8"]
[2019/05/01 12:39:23.707 -07:00] [INFO] [unknown:920] ["[region 120] 485 [term: 7] received a MsgRequestVote message with higher term from 259 [term: 8]"]
[2019/05/01 12:39:23.707 -07:00] [INFO] [unknown:719] ["[region 120] 485 became follower at term 8"]
[2019/05/01 12:39:23.707 -07:00] [INFO] [unknown:1083] ["[region 120] 485 [logterm: 7, index: 13, vote: 0] cast MsgRequestVote for 259 [logterm: 7, index: 13] at term 8"]
[2019/05/01 12:39:23.747 -07:00] [INFO] [unknown:854] ["[region 135] 315 received MsgRequestVoteResponse from 136 at term 8"]
[2019/05/01 12:39:23.747 -07:00] [INFO] [unknown:1550] ["[region 135] 315 [quorum:2] has received 2 MsgRequestVoteResponse votes and 0 vote rejections"]
[2019/05/01 12:39:23.747 -07:00] [INFO] [unknown:789] ["[region 135] 315 became leader at term 8"]
[2019/05/01 12:39:23.755 -07:00] [INFO] [unknown:854] ["[region 429] 577 received MsgRequestVoteResponse from 432 at term 8"]
[2019/05/01 12:39:23.755 -07:00] [INFO] [unknown:1550] ["[region 429] 577 [quorum:2] has received 2 MsgRequestVoteResponse votes and 0 vote rejections"]
[2019/05/01 12:39:23.755 -07:00] [INFO] [unknown:789] ["[region 429] 577 became leader at term 8"]
[2019/05/01 12:39:23.856 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 60], lock_version: 408089936182378497, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 63], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:39:23.935 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 61], lock_version: 408089936195485699, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 61], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:39:24.053 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_1525_7_8_(default|lock|write).sst] [snap_key=1525_7_8]
[2019/05/01 12:39:24.064 -07:00] [INFO] [unknown:1792] ["[region 1525] 1709 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 8, term: 7]"]
[2019/05/01 12:39:24.064 -07:00] [INFO] [unknown:1816] ["[region 1525] 1709 restored progress of 1526 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:39:24.064 -07:00] [INFO] [unknown:1816] ["[region 1525] 1709 restored progress of 1527 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:39:24.064 -07:00] [INFO] [unknown:1816] ["[region 1525] 1709 restored progress of 1528 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:39:24.064 -07:00] [INFO] [unknown:1816] ["[region 1525] 1709 restored progress of 1709 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:39:24.064 -07:00] [INFO] [unknown:474] ["[region 1525] 1709 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 8, term: 7]"]
[2019/05/01 12:39:24.064 -07:00] [INFO] [unknown:1736] ["[region 1525] 1709 [commit: 8] restored snapshot [index: 8, term: 7]"]
[2019/05/01 12:39:24.064 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=1709] [region_id=1525]
[2019/05/01 12:39:24.064 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 8, truncated_state: Some(RaftTruncatedState { index: 8, term: 7, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 1525, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 115, 255, 121, 110, 99, 255, 95, 97, 114, 114, 97, 255, 121, 95, 255, 115, 105, 122, 101, 0, 0, 253, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 115, 255, 121, 110, 99, 255, 95, 115, 112, 105, 110, 255, 95, 108, 255, 111, 111, 112, 115, 0, 0, 253, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 217, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1526, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1527, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1528, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1709, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1709] [region_id=1525]
[2019/05/01 12:39:24.079 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 1525, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 115, 255, 121, 110, 99, 255, 95, 97, 114, 114, 97, 255, 121, 95, 255, 115, 105, 122, 101, 0, 0, 253, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 115, 255, 121, 110, 99, 255, 95, 115, 112, 105, 110, 255, 95, 108, 255, 111, 111, 112, 115, 0, 0, 253, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 217, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1526, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1527, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1528, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1709, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1709] [region_id=1525]
[2019/05/01 12:39:24.079 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 1525] 1709"]
[2019/05/01 12:39:24.079 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=1525]
[2019/05/01 12:39:24.096 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=16.301399ms] [region_id=1525]
[2019/05/01 12:39:24.106 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_1376_6_7_(default|lock|write).sst] [snap_key=1376_6_7]
[2019/05/01 12:39:24.112 -07:00] [INFO] [unknown:1792] ["[region 1376] 1707 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 7, term: 6]"]
[2019/05/01 12:39:24.112 -07:00] [INFO] [unknown:1816] ["[region 1376] 1707 restored progress of 1377 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:39:24.112 -07:00] [INFO] [unknown:1816] ["[region 1376] 1707 restored progress of 1378 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:39:24.112 -07:00] [INFO] [unknown:1816] ["[region 1376] 1707 restored progress of 1379 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:39:24.112 -07:00] [INFO] [unknown:1816] ["[region 1376] 1707 restored progress of 1707 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:39:24.112 -07:00] [INFO] [unknown:474] ["[region 1376] 1707 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 7, term: 6]"]
[2019/05/01 12:39:24.112 -07:00] [INFO] [unknown:1736] ["[region 1376] 1707 [commit: 7] restored snapshot [index: 7, term: 6]"]
[2019/05/01 12:39:24.112 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=1707] [region_id=1376]
[2019/05/01 12:39:24.112 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 7, truncated_state: Some(RaftTruncatedState { index: 7, term: 6, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 1376, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 111, 255, 108, 100, 95, 255, 98, 108, 111, 99, 107, 255, 115, 95, 255, 112, 99, 116, 0, 0, 0, 252, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 111, 255, 108, 100, 95, 255, 98, 108, 111, 99, 107, 255, 115, 95, 255, 116, 105, 109, 101, 0, 0, 253, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 187, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1377, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1378, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1379, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1707, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1707] [region_id=1376]
[2019/05/01 12:39:24.129 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 1376, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 111, 255, 108, 100, 95, 255, 98, 108, 111, 99, 107, 255, 115, 95, 255, 112, 99, 116, 0, 0, 0, 252, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 111, 255, 108, 100, 95, 255, 98, 108, 111, 99, 107, 255, 115, 95, 255, 116, 105, 109, 101, 0, 0, 253, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 187, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1377, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1378, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1379, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1707, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1707] [region_id=1376]
[2019/05/01 12:39:24.129 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 1376] 1707"]
[2019/05/01 12:39:24.129 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=1376]
[2019/05/01 12:39:24.155 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=26.441698ms] [region_id=1376]
[2019/05/01 12:39:24.300 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 62], lock_version: 408089936287236100, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 64], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:39:24.347 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_1343_6_7_(default|lock|write).sst] [snap_key=1343_6_7]
[2019/05/01 12:39:24.353 -07:00] [INFO] [unknown:1792] ["[region 1343] 1708 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 7, term: 6]"]
[2019/05/01 12:39:24.353 -07:00] [INFO] [unknown:1816] ["[region 1343] 1708 restored progress of 1344 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:39:24.353 -07:00] [INFO] [unknown:1816] ["[region 1343] 1708 restored progress of 1345 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:39:24.353 -07:00] [INFO] [unknown:1816] ["[region 1343] 1708 restored progress of 1346 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:39:24.353 -07:00] [INFO] [unknown:1816] ["[region 1343] 1708 restored progress of 1708 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:39:24.353 -07:00] [INFO] [unknown:474] ["[region 1343] 1708 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 7, term: 6]"]
[2019/05/01 12:39:24.353 -07:00] [INFO] [unknown:1736] ["[region 1343] 1708 [commit: 7] restored snapshot [index: 7, term: 6]"]
[2019/05/01 12:39:24.353 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=1708] [region_id=1343]
[2019/05/01 12:39:24.353 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 7, truncated_state: Some(RaftTruncatedState { index: 7, term: 6, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 1343, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 109, 255, 97, 120, 95, 255, 117, 110, 100, 111, 95, 255, 108, 111, 255, 103, 95, 115, 105, 122, 101, 255, 0, 255, 0, 0, 0, 0, 0, 0, 0, 247, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 109, 255, 105, 114, 114, 255, 111, 114, 101, 100, 95, 255, 108, 111, 255, 103, 95, 103, 114, 111, 117, 255, 112, 255, 115, 0, 0, 0, 0, 0, 0, 249, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 177, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1344, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1345, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1346, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1708, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1708] [region_id=1343]
[2019/05/01 12:39:24.368 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 1343] 1708"]
[2019/05/01 12:39:24.368 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 1343, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 109, 255, 97, 120, 95, 255, 117, 110, 100, 111, 95, 255, 108, 111, 255, 103, 95, 115, 105, 122, 101, 255, 0, 255, 0, 0, 0, 0, 0, 0, 0, 247, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 109, 255, 105, 114, 114, 255, 111, 114, 101, 100, 95, 255, 108, 111, 255, 103, 95, 103, 114, 111, 117, 255, 112, 255, 115, 0, 0, 0, 0, 0, 0, 249, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 177, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1344, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1345, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1346, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1708, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1708] [region_id=1343]
[2019/05/01 12:39:24.368 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=1343]
[2019/05/01 12:39:24.401 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=32.259333ms] [region_id=1343]
[2019/05/01 12:39:24.806 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 65], lock_version: 408089936418308102, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 67], lock_ttl: 3095, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:39:24.836 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 65], lock_version: 408089936418308102, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 67], lock_ttl: 3095, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:39:24.883 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 65], lock_version: 408089936418308102, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 67], lock_ttl: 3095, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:39:25.066 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 67], lock_version: 408089936483844113, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 67], lock_ttl: 3002, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:39:25.125 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 1709, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=9] [term=7] [peer_id=1709] [region_id=1525]
[2019/05/01 12:39:25.125 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 6, version: 217, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=1709] [region_id=1525]
[2019/05/01 12:39:25.125 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 1525, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 115, 255, 121, 110, 99, 255, 95, 97, 114, 114, 97, 255, 121, 95, 255, 115, 105, 122, 101, 0, 0, 253, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 115, 255, 121, 110, 99, 255, 95, 115, 112, 105, 110, 255, 95, 108, 255, 111, 111, 112, 115, 0, 0, 253, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 217, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1526, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1527, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1528, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1709, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1709, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1709] [region_id=1525]
[2019/05/01 12:39:25.207 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 1707, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=8] [term=6] [peer_id=1707] [region_id=1376]
[2019/05/01 12:39:25.207 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 6, version: 187, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=1707] [region_id=1376]
[2019/05/01 12:39:25.207 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 1376, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 111, 255, 108, 100, 95, 255, 98, 108, 111, 99, 107, 255, 115, 95, 255, 112, 99, 116, 0, 0, 0, 252, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 111, 255, 108, 100, 95, 255, 98, 108, 111, 99, 107, 255, 115, 95, 255, 116, 105, 109, 101, 0, 0, 253, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 187, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1377, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1378, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1379, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1707, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1707, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1707] [region_id=1376]
[2019/05/01 12:39:25.218 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 1526, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=10] [term=7] [peer_id=1709] [region_id=1525]
[2019/05/01 12:39:25.228 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 7, version: 217, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=1709] [region_id=1525]
[2019/05/01 12:39:25.228 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 1525, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 115, 255, 121, 110, 99, 255, 95, 97, 114, 114, 97, 255, 121, 95, 255, 115, 105, 122, 101, 0, 0, 253, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 115, 255, 121, 110, 99, 255, 95, 115, 112, 105, 110, 255, 95, 108, 255, 111, 111, 112, 115, 0, 0, 253, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 7, version: 217, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1526, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1527, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1528, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1709, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1526, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1709] [region_id=1525]
[2019/05/01 12:39:25.256 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 68], lock_version: 408089936536272902, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 68], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:39:25.311 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 70], lock_version: 408089936549380101, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 70], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:39:25.348 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 1377, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=9] [term=6] [peer_id=1707] [region_id=1376]
[2019/05/01 12:39:25.348 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 7, version: 187, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=1707] [region_id=1376]
[2019/05/01 12:39:25.348 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 1376, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 111, 255, 108, 100, 95, 255, 98, 108, 111, 99, 107, 255, 115, 95, 255, 112, 99, 116, 0, 0, 0, 252, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 111, 255, 108, 100, 95, 255, 98, 108, 111, 99, 107, 255, 115, 95, 255, 116, 105, 109, 101, 0, 0, 253, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 7, version: 187, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1377, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1378, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1379, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1707, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1377, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1707] [region_id=1376]
[2019/05/01 12:39:25.380 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 70], lock_version: 408089936549380101, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 70], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:39:25.439 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 1708, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=8] [term=6] [peer_id=1708] [region_id=1343]
[2019/05/01 12:39:25.445 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 6, version: 177, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=1708] [region_id=1343]
[2019/05/01 12:39:25.445 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 1343, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 109, 255, 97, 120, 95, 255, 117, 110, 100, 111, 95, 255, 108, 111, 255, 103, 95, 115, 105, 122, 101, 255, 0, 255, 0, 0, 0, 0, 0, 0, 0, 247, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 109, 255, 105, 114, 114, 255, 111, 114, 101, 100, 95, 255, 108, 111, 255, 103, 95, 103, 114, 111, 117, 255, 112, 255, 115, 0, 0, 0, 0, 0, 0, 249, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 177, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1344, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1345, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1346, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1708, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1708, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1708] [region_id=1343]
[2019/05/01 12:39:25.491 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 70], lock_version: 408089936549380101, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 70], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:39:25.567 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 1344, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=9] [term=6] [peer_id=1708] [region_id=1343]
[2019/05/01 12:39:25.567 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 7, version: 177, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=1708] [region_id=1343]
[2019/05/01 12:39:25.567 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 1343, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 109, 255, 97, 120, 95, 255, 117, 110, 100, 111, 95, 255, 108, 111, 255, 103, 95, 115, 105, 122, 101, 255, 0, 255, 0, 0, 0, 0, 0, 0, 0, 247, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 109, 255, 105, 114, 114, 255, 111, 114, 101, 100, 95, 255, 108, 111, 255, 103, 95, 103, 114, 111, 117, 255, 112, 255, 115, 0, 0, 0, 0, 0, 0, 249, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 7, version: 177, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1344, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1345, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1346, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1708, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1344, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1708] [region_id=1343]
[2019/05/01 12:39:25.604 -07:00] [INFO] [pd.rs:558] ["try to change peer"] [peer="Peer { id: 1753, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [change_type=AddLearnerNode] [region_id=1170]
[2019/05/01 12:39:25.604 -07:00] [INFO] [peer.rs:1953] ["propose conf change peer"] [change_peer=1753] [change_type=AddLearnerNode] [peer_id=1362] [region_id=1170]
[2019/05/01 12:39:25.616 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 68], lock_version: 408089936575594498, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 68], lock_ttl: 3240, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:39:25.679 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddLearnerNode, peer: Some(Peer { id: 1753, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=11] [term=7] [peer_id=1362] [region_id=1170]
[2019/05/01 12:39:25.679 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 8, version: 147, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddLearner] [peer_id=1362] [region_id=1170]
[2019/05/01 12:39:25.679 -07:00] [INFO] [apply.rs:1476] ["add learner successfully"] [region="Region { id: 1170, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 102, 255, 108, 117, 115, 255, 104, 95, 115, 121, 110, 255, 99, 0, 255, 0, 0, 0, 0, 0, 0, 248, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 102, 255, 108, 117, 115, 255, 104, 105, 110, 103, 95, 255, 97, 118, 255, 103, 95, 108, 111, 111, 112, 255, 115, 255, 0, 0, 0, 0, 0, 0, 0, 248, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 8, version: 147, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1172, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1173, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1362, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1753, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1362] [region_id=1170]
[2019/05/01 12:39:25.691 -07:00] [INFO] [peer.rs:1318] ["notify pd with change peer region"] [region="Region { id: 1170, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 102, 255, 108, 117, 115, 255, 104, 95, 115, 121, 110, 255, 99, 0, 255, 0, 0, 0, 0, 0, 0, 248, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 102, 255, 108, 117, 115, 255, 104, 105, 110, 103, 95, 255, 97, 118, 255, 103, 95, 108, 111, 111, 112, 255, 115, 255, 0, 0, 0, 0, 0, 0, 0, 248, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 147, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1172, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1173, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1362, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1753, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1362] [region_id=1170]
[2019/05/01 12:39:26.105 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 70], lock_version: 408089936798416907, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 70], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:39:26.276 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 72], lock_version: 408089936837738510, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 73], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:39:26.349 -07:00] [INFO] [peer_storage.rs:759] ["requesting snapshot"] [peer_id=1362] [region_id=1170]
[2019/05/01 12:39:26.349 -07:00] [INFO] [snap.rs:757] ["scan snapshot of one cf"] [size=0] [key_count=0] [cf=default] [snapshot=/opt/tidb/data/kv/snap/gen_1170_7_11_(default|lock|write).sst] [region_id=1170]
[2019/05/01 12:39:26.349 -07:00] [INFO] [snap.rs:757] ["scan snapshot of one cf"] [size=0] [key_count=0] [cf=lock] [snapshot=/opt/tidb/data/kv/snap/gen_1170_7_11_(default|lock|write).sst] [region_id=1170]
[2019/05/01 12:39:26.349 -07:00] [INFO] [snap.rs:757] ["scan snapshot of one cf"] [size=156] [key_count=2] [cf=write] [snapshot=/opt/tidb/data/kv/snap/gen_1170_7_11_(default|lock|write).sst] [region_id=1170]
[2019/05/01 12:39:26.361 -07:00] [INFO] [snap.rs:875] ["scan snapshot"] [takes=11.575083ms] [size=1414] [key_count=2] [snapshot=/opt/tidb/data/kv/snap/gen_1170_7_11_(default|lock|write).sst] [region_id=1170]
[2019/05/01 12:39:26.499 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 69], lock_version: 408089936890167305, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 69], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:39:26.579 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 71], lock_version: 408089936916381711, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 71], lock_ttl: 3002, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:39:26.771 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 68], lock_version: 408089936942596103, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 71], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:39:26.886 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 73], lock_version: 408089936981917707, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 73], lock_ttl: 3002, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:39:26.941 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 73], lock_version: 408089936981917707, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 73], lock_ttl: 3002, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:39:26.986 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=1752] [region_id=464]
[2019/05/01 12:39:26.986 -07:00] [INFO] [unknown:719] ["[region 464] 1752 became follower at term 0"]
[2019/05/01 12:39:26.986 -07:00] [INFO] [unknown:295] ["[region 464] 1752 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:39:26.986 -07:00] [INFO] [unknown:719] ["[region 464] 1752 became follower at term 1"]
[2019/05/01 12:39:26.986 -07:00] [INFO] [unknown:920] ["[region 464] 1752 [term: 1] received a MsgHeartbeat message with higher term from 1212 [term: 8]"]
[2019/05/01 12:39:26.986 -07:00] [INFO] [unknown:719] ["[region 464] 1752 became follower at term 8"]
[2019/05/01 12:39:27.192 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddLearnerNode, peer: Some(Peer { id: 1754, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=10] [term=6] [peer_id=1095] [region_id=614]
[2019/05/01 12:39:27.192 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 8, version: 77, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddLearner] [peer_id=1095] [region_id=614]
[2019/05/01 12:39:27.192 -07:00] [INFO] [apply.rs:1476] ["add learner successfully"] [region="Region { id: 614, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 102, 116, 95, 113, 255, 117, 101, 114, 121, 255, 95, 101, 120, 255, 112, 97, 110, 115, 105, 255, 111, 110, 255, 95, 108, 105, 109, 105, 116, 255, 0, 255, 0, 0, 0, 0, 0, 0, 0, 247, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 102, 116, 95, 115, 255, 116, 111, 112, 119, 255, 111, 114, 100, 255, 95, 102, 105, 108, 101, 255, 0, 0, 255, 0, 0, 0, 0, 0, 0, 247, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 8, version: 77, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 615, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 616, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1095, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1754, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1095] [region_id=614]
[2019/05/01 12:39:27.317 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 66], lock_version: 408089937060560899, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 72], lock_ttl: 3025, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:39:27.718 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 74], lock_version: 408089937217847299, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 74], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:39:27.724 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 74], lock_version: 408089937217847299, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 74], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:39:28.351 -07:00] [INFO] [unknown:841] ["New connected subchannel at 0x7f8582c2ba00 for subchannel 0x7f8640481e00"]
[2019/05/01 12:39:28.359 -07:00] [INFO] [snap.rs:389] ["sent snapshot"] [duration=7.815687ms] [size=1414] [snap_key=1170_7_11] [region_id=1170]
[2019/05/01 12:39:28.359 -07:00] [INFO] [peer.rs:538] ["report snapshot status"] [status=Finish] [to="Peer { id: 1753, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1362] [region_id=1170]
[2019/05/01 12:39:29.003 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_464_8_12_(default|lock|write).sst] [snap_key=464_8_12]
[2019/05/01 12:39:29.027 -07:00] [INFO] [unknown:1792] ["[region 464] 1752 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 12, term: 8]"]
[2019/05/01 12:39:29.027 -07:00] [INFO] [unknown:1816] ["[region 464] 1752 restored progress of 466 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:39:29.027 -07:00] [INFO] [unknown:1816] ["[region 464] 1752 restored progress of 467 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:39:29.027 -07:00] [INFO] [unknown:1816] ["[region 464] 1752 restored progress of 1212 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:39:29.027 -07:00] [INFO] [unknown:1816] ["[region 464] 1752 restored progress of 1752 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:39:29.027 -07:00] [INFO] [unknown:474] ["[region 464] 1752 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 12, term: 8]"]
[2019/05/01 12:39:29.027 -07:00] [INFO] [unknown:1736] ["[region 464] 1752 [commit: 12] restored snapshot [index: 12, term: 8]"]
[2019/05/01 12:39:29.027 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=1752] [region_id=464]
[2019/05/01 12:39:29.027 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 12, truncated_state: Some(RaftTruncatedState { index: 12, term: 8, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 464, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 100, 101, 102, 97, 255, 117, 108, 116, 95, 255, 112, 97, 115, 255, 115, 119, 111, 114, 100, 255, 95, 108, 255, 105, 102, 101, 116, 105, 109, 255, 101, 255, 0, 0, 0, 0, 0, 0, 0, 248, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 100, 101, 102, 97, 255, 117, 108, 116, 95, 255, 115, 116, 111, 255, 114, 97, 103, 101, 95, 255, 101, 110, 255, 103, 105, 110, 101, 0, 0, 253, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 57, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 466, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 467, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1212, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1752, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1752] [region_id=464]
[2019/05/01 12:39:29.038 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 79], lock_version: 408089937545527298, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 79], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:39:29.038 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 80], lock_version: 408089937545527304, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 80], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:39:29.045 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 464] 1752"]
[2019/05/01 12:39:29.045 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 464, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 100, 101, 102, 97, 255, 117, 108, 116, 95, 255, 112, 97, 115, 255, 115, 119, 111, 114, 100, 255, 95, 108, 255, 105, 102, 101, 116, 105, 109, 255, 101, 255, 0, 0, 0, 0, 0, 0, 0, 248, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 100, 101, 102, 97, 255, 117, 108, 116, 95, 255, 115, 116, 111, 255, 114, 97, 103, 101, 95, 255, 101, 110, 255, 103, 105, 110, 101, 0, 0, 253, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 57, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 466, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 467, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1212, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1752, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1752] [region_id=464]
[2019/05/01 12:39:29.045 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=464]
[2019/05/01 12:39:29.087 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=42.358169ms] [region_id=464]
[2019/05/01 12:39:29.090 -07:00] [INFO] [pd.rs:558] ["try to change peer"] [peer="Peer { id: 1755, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [change_type=AddLearnerNode] [region_id=460]
[2019/05/01 12:39:29.090 -07:00] [INFO] [peer.rs:1953] ["propose conf change peer"] [change_peer=1755] [change_type=AddLearnerNode] [peer_id=1557] [region_id=460]
[2019/05/01 12:39:29.142 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddLearnerNode, peer: Some(Peer { id: 1755, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=12] [term=8] [peer_id=1557] [region_id=460]
[2019/05/01 12:39:29.142 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 8, version: 57, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddLearner] [peer_id=1557] [region_id=460]
[2019/05/01 12:39:29.142 -07:00] [INFO] [apply.rs:1476] ["add learner successfully"] [region="Region { id: 460, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 100, 101, 98, 117, 255, 103, 0, 0, 0, 252, 0, 0, 0, 252], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 100, 101, 102, 97, 255, 117, 108, 116, 95, 255, 112, 97, 115, 255, 115, 119, 111, 114, 100, 255, 95, 108, 255, 105, 102, 101, 116, 105, 109, 255, 101, 255, 0, 0, 0, 0, 0, 0, 0, 248, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 8, version: 57, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 462, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 463, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1557, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1755, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1557] [region_id=460]
[2019/05/01 12:39:29.150 -07:00] [INFO] [peer.rs:1318] ["notify pd with change peer region"] [region="Region { id: 460, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 100, 101, 98, 117, 255, 103, 0, 0, 0, 252, 0, 0, 0, 252], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 100, 101, 102, 97, 255, 117, 108, 116, 95, 255, 112, 97, 115, 255, 115, 119, 111, 114, 100, 255, 95, 108, 255, 105, 102, 101, 116, 105, 109, 255, 101, 255, 0, 0, 0, 0, 0, 0, 0, 248, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 57, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 462, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 463, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1557, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1755, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1557] [region_id=460]
[2019/05/01 12:39:29.282 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 80], lock_version: 408089937624170513, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 80], lock_ttl: 3002, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:39:29.353 -07:00] [INFO] [pd.rs:558] ["try to change peer"] [peer="Peer { id: 1753, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [change_type=AddNode] [region_id=1170]
[2019/05/01 12:39:29.369 -07:00] [INFO] [peer.rs:1953] ["propose conf change peer"] [change_peer=1753] [change_type=AddNode] [peer_id=1362] [region_id=1170]
[2019/05/01 12:39:29.396 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 1753, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=12] [term=7] [peer_id=1362] [region_id=1170]
[2019/05/01 12:39:29.396 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 9, version: 147, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=1362] [region_id=1170]
[2019/05/01 12:39:29.396 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 1170, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 102, 255, 108, 117, 115, 255, 104, 95, 115, 121, 110, 255, 99, 0, 255, 0, 0, 0, 0, 0, 0, 248, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 102, 255, 108, 117, 115, 255, 104, 105, 110, 103, 95, 255, 97, 118, 255, 103, 95, 108, 111, 111, 112, 255, 115, 255, 0, 0, 0, 0, 0, 0, 0, 248, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 147, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1172, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1173, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1362, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1753, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1753, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1362] [region_id=1170]
[2019/05/01 12:39:29.404 -07:00] [INFO] [peer.rs:1318] ["notify pd with change peer region"] [region="Region { id: 1170, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 102, 255, 108, 117, 115, 255, 104, 95, 115, 121, 110, 255, 99, 0, 255, 0, 0, 0, 0, 0, 0, 248, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 102, 255, 108, 117, 115, 255, 104, 105, 110, 103, 95, 255, 97, 118, 255, 103, 95, 108, 111, 111, 112, 255, 115, 255, 0, 0, 0, 0, 0, 0, 0, 248, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 10, version: 147, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1172, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1173, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1362, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1753, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1362] [region_id=1170]
[2019/05/01 12:39:29.418 -07:00] [INFO] [pd.rs:558] ["try to change peer"] [peer="Peer { id: 1173, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [change_type=RemoveNode] [region_id=1170]
[2019/05/01 12:39:29.422 -07:00] [INFO] [peer.rs:1953] ["propose conf change peer"] [change_peer=1173] [change_type=RemoveNode] [peer_id=1362] [region_id=1170]
[2019/05/01 12:39:29.456 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 1173, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=13] [term=7] [peer_id=1362] [region_id=1170]
[2019/05/01 12:39:29.456 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 10, version: 147, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=1362] [region_id=1170]
[2019/05/01 12:39:29.456 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 1170, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 102, 255, 108, 117, 115, 255, 104, 95, 115, 121, 110, 255, 99, 0, 255, 0, 0, 0, 0, 0, 0, 248, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 102, 255, 108, 117, 115, 255, 104, 105, 110, 103, 95, 255, 97, 118, 255, 103, 95, 108, 111, 111, 112, 255, 115, 255, 0, 0, 0, 0, 0, 0, 0, 248, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 10, version: 147, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1172, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1173, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1362, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1753, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1173, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1362] [region_id=1170]
[2019/05/01 12:39:29.457 -07:00] [INFO] [pd.rs:558] ["try to change peer"] [peer="Peer { id: 1173, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [change_type=RemoveNode] [region_id=1170]
[2019/05/01 12:39:29.457 -07:00] [INFO] [peer.rs:1927] ["there is a pending conf change, try later"] [peer_id=1362] [region_id=1170]
[2019/05/01 12:39:29.473 -07:00] [INFO] [peer.rs:1318] ["notify pd with change peer region"] [region="Region { id: 1170, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 102, 255, 108, 117, 115, 255, 104, 95, 115, 121, 110, 255, 99, 0, 255, 0, 0, 0, 0, 0, 0, 248, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 102, 255, 108, 117, 115, 255, 104, 105, 110, 103, 95, 255, 97, 118, 255, 103, 95, 108, 111, 111, 112, 255, 115, 255, 0, 0, 0, 0, 0, 0, 0, 248, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 11, version: 147, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1172, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1362, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1753, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1362] [region_id=1170]
[2019/05/01 12:39:29.495 -07:00] [INFO] [pd.rs:558] ["try to change peer"] [peer="Peer { id: 1756, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [change_type=AddLearnerNode] [region_id=521]
[2019/05/01 12:39:29.495 -07:00] [INFO] [peer.rs:1953] ["propose conf change peer"] [change_peer=1756] [change_type=AddLearnerNode] [peer_id=1649] [region_id=521]
[2019/05/01 12:39:29.541 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddLearnerNode, peer: Some(Peer { id: 1756, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=12] [term=8] [peer_id=1649] [region_id=521]
[2019/05/01 12:39:29.542 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 8, version: 67, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddLearner] [peer_id=1649] [region_id=521]
[2019/05/01 12:39:29.542 -07:00] [INFO] [apply.rs:1476] ["add learner successfully"] [region="Region { id: 521, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 101, 113, 95, 114, 255, 97, 110, 103, 101, 255, 95, 105, 110, 255, 100, 101, 120, 95, 100, 255, 105, 118, 255, 101, 95, 108, 105, 109, 105, 255, 116, 255, 0, 0, 0, 0, 0, 0, 0, 248, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 101, 118, 101, 110, 255, 116, 95, 115, 99, 255, 104, 101, 100, 255, 117, 108, 101, 114, 0, 254, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 8, version: 67, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 523, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 524, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1649, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1756, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1649] [region_id=521]
[2019/05/01 12:39:29.553 -07:00] [INFO] [peer.rs:1318] ["notify pd with change peer region"] [region="Region { id: 521, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 101, 113, 95, 114, 255, 97, 110, 103, 101, 255, 95, 105, 110, 255, 100, 101, 120, 95, 100, 255, 105, 118, 255, 101, 95, 108, 105, 109, 105, 255, 116, 255, 0, 0, 0, 0, 0, 0, 0, 248, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 101, 118, 101, 110, 255, 116, 95, 115, 99, 255, 104, 101, 100, 255, 117, 108, 101, 114, 0, 254, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 67, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 523, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 524, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1649, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1756, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1649] [region_id=521]
[2019/05/01 12:39:29.555 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 80], lock_version: 408089937689706497, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 84], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:39:29.556 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 80], lock_version: 408089937689706497, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 84], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:39:29.595 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 82], lock_version: 408089937715920902, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 82], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:39:29.756 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 84], lock_version: 408089937729028102, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 84], lock_ttl: 3065, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:39:29.848 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 81], lock_version: 408089937742135315, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 82], lock_ttl: 3091, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:39:30.026 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 1752, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=13] [term=8] [peer_id=1752] [region_id=464]
[2019/05/01 12:39:30.026 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 9, version: 57, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=1752] [region_id=464]
[2019/05/01 12:39:30.026 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 464, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 100, 101, 102, 97, 255, 117, 108, 116, 95, 255, 112, 97, 115, 255, 115, 119, 111, 114, 100, 255, 95, 108, 255, 105, 102, 101, 116, 105, 109, 255, 101, 255, 0, 0, 0, 0, 0, 0, 0, 248, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 100, 101, 102, 97, 255, 117, 108, 116, 95, 255, 115, 116, 111, 255, 114, 97, 103, 101, 95, 255, 101, 110, 255, 103, 105, 110, 101, 0, 0, 253, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 57, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 466, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 467, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1212, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1752, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1752, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1752] [region_id=464]
[2019/05/01 12:39:30.086 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 466, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=14] [term=8] [peer_id=1752] [region_id=464]
[2019/05/01 12:39:30.086 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 10, version: 57, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=1752] [region_id=464]
[2019/05/01 12:39:30.086 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 464, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 100, 101, 102, 97, 255, 117, 108, 116, 95, 255, 112, 97, 115, 255, 115, 119, 111, 114, 100, 255, 95, 108, 255, 105, 102, 101, 116, 105, 109, 255, 101, 255, 0, 0, 0, 0, 0, 0, 0, 248, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 100, 101, 102, 97, 255, 117, 108, 116, 95, 255, 115, 116, 111, 255, 114, 97, 103, 101, 95, 255, 101, 110, 255, 103, 105, 110, 101, 0, 0, 253, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 10, version: 57, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 466, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 467, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1212, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1752, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 466, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1752] [region_id=464]
[2019/05/01 12:39:30.311 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 86], lock_version: 408089937873207298, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 86], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:39:30.450 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 88], lock_version: 408089937938743308, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 90], lock_ttl: 3003, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:39:30.509 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=1757] [region_id=365]
[2019/05/01 12:39:30.509 -07:00] [INFO] [unknown:719] ["[region 365] 1757 became follower at term 0"]
[2019/05/01 12:39:30.509 -07:00] [INFO] [unknown:295] ["[region 365] 1757 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:39:30.509 -07:00] [INFO] [unknown:719] ["[region 365] 1757 became follower at term 1"]
[2019/05/01 12:39:30.509 -07:00] [INFO] [unknown:920] ["[region 365] 1757 [term: 1] received a MsgHeartbeat message with higher term from 366 [term: 6]"]
[2019/05/01 12:39:30.509 -07:00] [INFO] [unknown:719] ["[region 365] 1757 became follower at term 6"]
[2019/05/01 12:39:30.555 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 89], lock_version: 408089937951850503, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 90], lock_ttl: 3053, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:39:30.994 -07:00] [INFO] [peer_storage.rs:759] ["requesting snapshot"] [peer_id=1557] [region_id=460]
[2019/05/01 12:39:30.994 -07:00] [INFO] [snap.rs:757] ["scan snapshot of one cf"] [size=0] [key_count=0] [cf=default] [snapshot=/opt/tidb/data/kv/snap/gen_460_8_12_(default|lock|write).sst] [region_id=460]
[2019/05/01 12:39:30.994 -07:00] [INFO] [snap.rs:757] ["scan snapshot of one cf"] [size=0] [key_count=0] [cf=lock] [snapshot=/opt/tidb/data/kv/snap/gen_460_8_12_(default|lock|write).sst] [region_id=460]
[2019/05/01 12:39:30.995 -07:00] [INFO] [snap.rs:757] ["scan snapshot of one cf"] [size=120] [key_count=2] [cf=write] [snapshot=/opt/tidb/data/kv/snap/gen_460_8_12_(default|lock|write).sst] [region_id=460]
[2019/05/01 12:39:31.012 -07:00] [INFO] [snap.rs:875] ["scan snapshot"] [takes=18.271987ms] [size=1339] [key_count=2] [snapshot=/opt/tidb/data/kv/snap/gen_460_8_12_(default|lock|write).sst] [region_id=460]
[2019/05/01 12:39:31.043 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 88], lock_version: 408089938082922512, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 88], lock_ttl: 3002, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:39:31.133 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 87], lock_version: 408089938122244102, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 87], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:39:31.268 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 88], lock_version: 408089938148458507, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 88], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:39:31.290 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 87], lock_version: 408089938148458499, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 87], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:39:31.337 -07:00] [INFO] [peer_storage.rs:759] ["requesting snapshot"] [peer_id=1649] [region_id=521]
[2019/05/01 12:39:31.338 -07:00] [INFO] [snap.rs:757] ["scan snapshot of one cf"] [size=0] [key_count=0] [cf=default] [snapshot=/opt/tidb/data/kv/snap/gen_521_8_12_(default|lock|write).sst] [region_id=521]
[2019/05/01 12:39:31.338 -07:00] [INFO] [snap.rs:757] ["scan snapshot of one cf"] [size=0] [key_count=0] [cf=lock] [snapshot=/opt/tidb/data/kv/snap/gen_521_8_12_(default|lock|write).sst] [region_id=521]
[2019/05/01 12:39:31.338 -07:00] [INFO] [snap.rs:757] ["scan snapshot of one cf"] [size=192] [key_count=2] [cf=write] [snapshot=/opt/tidb/data/kv/snap/gen_521_8_12_(default|lock|write).sst] [region_id=521]
[2019/05/01 12:39:31.340 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 91], lock_version: 408089938161565701, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 92], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:39:31.350 -07:00] [INFO] [snap.rs:875] ["scan snapshot"] [takes=11.521551ms] [size=1487] [key_count=2] [snapshot=/opt/tidb/data/kv/snap/gen_521_8_12_(default|lock|write).sst] [region_id=521]
[2019/05/01 12:39:31.359 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 91], lock_version: 408089938161565701, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 92], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:39:31.372 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 91], lock_version: 408089938161565701, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 92], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:39:31.436 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 92], lock_version: 408089938187780117, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 92], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:39:31.520 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 90], lock_version: 408089938187780103, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 91], lock_ttl: 3062, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:39:31.549 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 1754, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=11] [term=6] [peer_id=1095] [region_id=614]
[2019/05/01 12:39:31.549 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 9, version: 77, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=1095] [region_id=614]
[2019/05/01 12:39:31.549 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 614, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 102, 116, 95, 113, 255, 117, 101, 114, 121, 255, 95, 101, 120, 255, 112, 97, 110, 115, 105, 255, 111, 110, 255, 95, 108, 105, 109, 105, 116, 255, 0, 255, 0, 0, 0, 0, 0, 0, 0, 247, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 102, 116, 95, 115, 255, 116, 111, 112, 119, 255, 111, 114, 100, 255, 95, 102, 105, 108, 101, 255, 0, 0, 255, 0, 0, 0, 0, 0, 0, 247, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 77, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 615, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 616, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1095, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1754, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1754, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1095] [region_id=614]
[2019/05/01 12:39:31.586 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 90], lock_version: 408089938187780103, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 91], lock_ttl: 3062, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:39:31.623 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 616, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=12] [term=6] [peer_id=1095] [region_id=614]
[2019/05/01 12:39:31.623 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 10, version: 77, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=1095] [region_id=614]
[2019/05/01 12:39:31.623 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 614, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 102, 116, 95, 113, 255, 117, 101, 114, 121, 255, 95, 101, 120, 255, 112, 97, 110, 115, 105, 255, 111, 110, 255, 95, 108, 105, 109, 105, 116, 255, 0, 255, 0, 0, 0, 0, 0, 0, 0, 247, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 102, 116, 95, 115, 255, 116, 111, 112, 119, 255, 111, 114, 100, 255, 95, 102, 105, 108, 101, 255, 0, 0, 255, 0, 0, 0, 0, 0, 0, 247, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 10, version: 77, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 615, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 616, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1095, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1754, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 616, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1095] [region_id=614]
[2019/05/01 12:39:32.143 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=1758] [region_id=1622]
[2019/05/01 12:39:32.143 -07:00] [INFO] [unknown:719] ["[region 1622] 1758 became follower at term 0"]
[2019/05/01 12:39:32.143 -07:00] [INFO] [unknown:295] ["[region 1622] 1758 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:39:32.143 -07:00] [INFO] [unknown:719] ["[region 1622] 1758 became follower at term 1"]
[2019/05/01 12:39:32.143 -07:00] [INFO] [unknown:920] ["[region 1622] 1758 [term: 1] received a MsgHeartbeat message with higher term from 1624 [term: 6]"]
[2019/05/01 12:39:32.143 -07:00] [INFO] [unknown:719] ["[region 1622] 1758 became follower at term 6"]
[2019/05/01 12:39:32.418 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 93], lock_version: 408089938423709697, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 96], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:39:32.541 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_365_6_7_(default|lock|write).sst] [snap_key=365_6_7]
[2019/05/01 12:39:32.549 -07:00] [INFO] [unknown:1792] ["[region 365] 1757 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 7, term: 6]"]
[2019/05/01 12:39:32.549 -07:00] [INFO] [unknown:1816] ["[region 365] 1757 restored progress of 366 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:39:32.549 -07:00] [INFO] [unknown:1816] ["[region 365] 1757 restored progress of 367 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:39:32.549 -07:00] [INFO] [unknown:1816] ["[region 365] 1757 restored progress of 368 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:39:32.549 -07:00] [INFO] [unknown:1816] ["[region 365] 1757 restored progress of 1757 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:39:32.549 -07:00] [INFO] [unknown:474] ["[region 365] 1757 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 7, term: 6]"]
[2019/05/01 12:39:32.549 -07:00] [INFO] [unknown:1736] ["[region 365] 1757 [commit: 7] restored snapshot [index: 7, term: 6]"]
[2019/05/01 12:39:32.549 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=1757] [region_id=365]
[2019/05/01 12:39:32.549 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 7, truncated_state: Some(RaftTruncatedState { index: 7, term: 6, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 365, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 99, 104, 97, 114, 255, 97, 99, 116, 101, 255, 114, 95, 115, 255, 101, 116, 95, 100, 97, 255, 116, 97, 255, 98, 97, 115, 101, 0, 0, 253, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 99, 104, 97, 114, 255, 97, 99, 116, 101, 255, 114, 95, 115, 255, 101, 116, 95, 102, 105, 255, 108, 101, 255, 115, 121, 115, 116, 101, 109, 255, 0, 255, 0, 0, 0, 0, 0, 0, 0, 247, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 37, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 366, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 367, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 368, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1757, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1757] [region_id=365]
[2019/05/01 12:39:32.573 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 365] 1757"]
[2019/05/01 12:39:32.574 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 365, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 99, 104, 97, 114, 255, 97, 99, 116, 101, 255, 114, 95, 115, 255, 101, 116, 95, 100, 97, 255, 116, 97, 255, 98, 97, 115, 101, 0, 0, 253, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 99, 104, 97, 114, 255, 97, 99, 116, 101, 255, 114, 95, 115, 255, 101, 116, 95, 102, 105, 255, 108, 101, 255, 115, 121, 115, 116, 101, 109, 255, 0, 255, 0, 0, 0, 0, 0, 0, 0, 247, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 37, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 366, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 367, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 368, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1757, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1757] [region_id=365]
[2019/05/01 12:39:32.574 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=365]
[2019/05/01 12:39:32.590 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=16.420683ms] [region_id=365]
[2019/05/01 12:39:32.593 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 94], lock_version: 408089938463031304, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 94], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:39:32.734 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 96], lock_version: 408089938515460108, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 97], lock_ttl: 3002, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:39:32.996 -07:00] [INFO] [unknown:841] ["New connected subchannel at 0x7f859006dbc0 for subchannel 0x7f86404a6000"]
[2019/05/01 12:39:33.017 -07:00] [INFO] [snap.rs:389] ["sent snapshot"] [duration=21.777071ms] [size=1339] [snap_key=460_8_12] [region_id=460]
[2019/05/01 12:39:33.017 -07:00] [INFO] [peer.rs:538] ["report snapshot status"] [status=Finish] [to="Peer { id: 1755, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1557] [region_id=460]
[2019/05/01 12:39:33.322 -07:00] [INFO] [unknown:841] ["New connected subchannel at 0x7f8584001540 for subchannel 0x7f86404a6200"]
[2019/05/01 12:39:33.331 -07:00] [INFO] [snap.rs:389] ["sent snapshot"] [duration=9.75895ms] [size=1487] [snap_key=521_8_12] [region_id=521]
[2019/05/01 12:39:33.331 -07:00] [INFO] [peer.rs:538] ["report snapshot status"] [status=Finish] [to="Peer { id: 1756, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1649] [region_id=521]
[2019/05/01 12:39:33.431 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 99], lock_version: 408089938698960907, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 101], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:39:33.539 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 100], lock_version: 408089938725175304, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 100], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:39:33.551 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 1757, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=8] [term=6] [peer_id=1757] [region_id=365]
[2019/05/01 12:39:33.551 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 6, version: 37, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=1757] [region_id=365]
[2019/05/01 12:39:33.551 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 365, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 99, 104, 97, 114, 255, 97, 99, 116, 101, 255, 114, 95, 115, 255, 101, 116, 95, 100, 97, 255, 116, 97, 255, 98, 97, 115, 101, 0, 0, 253, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 99, 104, 97, 114, 255, 97, 99, 116, 101, 255, 114, 95, 115, 255, 101, 116, 95, 102, 105, 255, 108, 101, 255, 115, 121, 115, 116, 101, 109, 255, 0, 255, 0, 0, 0, 0, 0, 0, 0, 247, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 37, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 366, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 367, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 368, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1757, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1757, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1757] [region_id=365]
[2019/05/01 12:39:33.576 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 98], lock_version: 408089938751389701, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 98], lock_ttl: 3003, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:39:33.616 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 367, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=9] [term=6] [peer_id=1757] [region_id=365]
[2019/05/01 12:39:33.616 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 7, version: 37, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=1757] [region_id=365]
[2019/05/01 12:39:33.616 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 365, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 99, 104, 97, 114, 255, 97, 99, 116, 101, 255, 114, 95, 115, 255, 101, 116, 95, 100, 97, 255, 116, 97, 255, 98, 97, 115, 101, 0, 0, 253, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 99, 104, 97, 114, 255, 97, 99, 116, 101, 255, 114, 95, 115, 255, 101, 116, 95, 102, 105, 255, 108, 101, 255, 115, 121, 115, 116, 101, 109, 255, 0, 255, 0, 0, 0, 0, 0, 0, 0, 247, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 7, version: 37, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 366, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 367, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 368, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1757, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 367, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1757] [region_id=365]
[2019/05/01 12:39:33.653 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 98], lock_version: 408089938751389701, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 98], lock_ttl: 3003, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:39:33.656 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 98], lock_version: 408089938751389701, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 98], lock_ttl: 3003, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:39:33.746 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 98], lock_version: 408089938751389701, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 98], lock_ttl: 3003, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:39:33.849 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 98], lock_version: 408089938803818500, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 98], lock_ttl: 3067, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:39:33.997 -07:00] [INFO] [pd.rs:558] ["try to change peer"] [peer="Peer { id: 1755, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [change_type=AddNode] [region_id=460]
[2019/05/01 12:39:33.997 -07:00] [INFO] [peer.rs:1953] ["propose conf change peer"] [change_peer=1755] [change_type=AddNode] [peer_id=1557] [region_id=460]
[2019/05/01 12:39:34.046 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 1755, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=13] [term=8] [peer_id=1557] [region_id=460]
[2019/05/01 12:39:34.046 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 9, version: 57, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=1557] [region_id=460]
[2019/05/01 12:39:34.046 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 460, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 100, 101, 98, 117, 255, 103, 0, 0, 0, 252, 0, 0, 0, 252], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 100, 101, 102, 97, 255, 117, 108, 116, 95, 255, 112, 97, 115, 255, 115, 119, 111, 114, 100, 255, 95, 108, 255, 105, 102, 101, 116, 105, 109, 255, 101, 255, 0, 0, 0, 0, 0, 0, 0, 248, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 57, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 462, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 463, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1557, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1755, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1755, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1557] [region_id=460]
[2019/05/01 12:39:34.057 -07:00] [INFO] [peer.rs:1318] ["notify pd with change peer region"] [region="Region { id: 460, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 100, 101, 98, 117, 255, 103, 0, 0, 0, 252, 0, 0, 0, 252], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 100, 101, 102, 97, 255, 117, 108, 116, 95, 255, 112, 97, 115, 255, 115, 119, 111, 114, 100, 255, 95, 108, 255, 105, 102, 101, 116, 105, 109, 255, 101, 255, 0, 0, 0, 0, 0, 0, 0, 248, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 10, version: 57, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 462, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 463, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1557, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1755, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1557] [region_id=460]
[2019/05/01 12:39:34.066 -07:00] [INFO] [pd.rs:558] ["try to change peer"] [peer="Peer { id: 462, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [change_type=RemoveNode] [region_id=460]
[2019/05/01 12:39:34.066 -07:00] [INFO] [peer.rs:1953] ["propose conf change peer"] [change_peer=462] [change_type=RemoveNode] [peer_id=1557] [region_id=460]
[2019/05/01 12:39:34.091 -07:00] [INFO] [pd.rs:558] ["try to change peer"] [peer="Peer { id: 462, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [change_type=RemoveNode] [region_id=460]
[2019/05/01 12:39:34.117 -07:00] [INFO] [peer.rs:1927] ["there is a pending conf change, try later"] [peer_id=1557] [region_id=460]
[2019/05/01 12:39:34.118 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 462, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=14] [term=8] [peer_id=1557] [region_id=460]
[2019/05/01 12:39:34.118 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 10, version: 57, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=1557] [region_id=460]
[2019/05/01 12:39:34.118 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 460, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 100, 101, 98, 117, 255, 103, 0, 0, 0, 252, 0, 0, 0, 252], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 100, 101, 102, 97, 255, 117, 108, 116, 95, 255, 112, 97, 115, 255, 115, 119, 111, 114, 100, 255, 95, 108, 255, 105, 102, 101, 116, 105, 109, 255, 101, 255, 0, 0, 0, 0, 0, 0, 0, 248, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 10, version: 57, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 462, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 463, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1557, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1755, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 462, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1557] [region_id=460]
[2019/05/01 12:39:34.133 -07:00] [INFO] [peer.rs:1318] ["notify pd with change peer region"] [region="Region { id: 460, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 100, 101, 98, 117, 255, 103, 0, 0, 0, 252, 0, 0, 0, 252], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 100, 101, 102, 97, 255, 117, 108, 116, 95, 255, 112, 97, 115, 255, 115, 119, 111, 114, 100, 255, 95, 108, 255, 105, 102, 101, 116, 105, 109, 255, 101, 255, 0, 0, 0, 0, 0, 0, 0, 248, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 11, version: 57, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 463, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1557, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1755, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1557] [region_id=460]
[2019/05/01 12:39:34.146 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_1622_6_7_(default|lock|write).sst] [snap_key=1622_6_7]
[2019/05/01 12:39:34.160 -07:00] [INFO] [unknown:1792] ["[region 1622] 1758 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 7, term: 6]"]
[2019/05/01 12:39:34.160 -07:00] [INFO] [unknown:1816] ["[region 1622] 1758 restored progress of 1623 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:39:34.160 -07:00] [INFO] [unknown:1816] ["[region 1622] 1758 restored progress of 1624 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:39:34.160 -07:00] [INFO] [unknown:1816] ["[region 1622] 1758 restored progress of 1625 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:39:34.160 -07:00] [INFO] [unknown:1816] ["[region 1622] 1758 restored progress of 1758 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:39:34.160 -07:00] [INFO] [unknown:474] ["[region 1622] 1758 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 7, term: 6]"]
[2019/05/01 12:39:34.160 -07:00] [INFO] [unknown:1736] ["[region 1622] 1758 [commit: 7] restored snapshot [index: 7, term: 6]"]
[2019/05/01 12:39:34.160 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=1758] [region_id=1622]
[2019/05/01 12:39:34.160 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 7, truncated_state: Some(RaftTruncatedState { index: 7, term: 6, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 1622, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 108, 97, 114, 103, 255, 101, 95, 102, 105, 255, 108, 101, 115, 255, 95, 115, 117, 112, 112, 255, 111, 114, 255, 116, 0, 0, 0, 0, 0, 250, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 108, 97, 114, 103, 255, 101, 95, 112, 97, 255, 103, 101, 95, 255, 115, 105, 122, 101, 0, 254, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 237, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1623, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1624, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1625, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1758, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1758] [region_id=1622]
[2019/05/01 12:39:34.195 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 1622] 1758"]
[2019/05/01 12:39:34.195 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 1622, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 108, 97, 114, 103, 255, 101, 95, 102, 105, 255, 108, 101, 115, 255, 95, 115, 117, 112, 112, 255, 111, 114, 255, 116, 0, 0, 0, 0, 0, 250, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 108, 97, 114, 103, 255, 101, 95, 112, 97, 255, 103, 101, 95, 255, 115, 105, 122, 101, 0, 254, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 237, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1623, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1624, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1625, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1758, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1758] [region_id=1622]
[2019/05/01 12:39:34.195 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=1622]
[2019/05/01 12:39:34.220 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=24.825276ms] [region_id=1622]
[2019/05/01 12:39:34.254 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 101], lock_version: 408089938921783309, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 101], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:39:34.323 -07:00] [INFO] [pd.rs:558] ["try to change peer"] [peer="Peer { id: 1756, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [change_type=AddNode] [region_id=521]
[2019/05/01 12:39:34.323 -07:00] [INFO] [peer.rs:1953] ["propose conf change peer"] [change_peer=1756] [change_type=AddNode] [peer_id=1649] [region_id=521]
[2019/05/01 12:39:34.367 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 1756, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=13] [term=8] [peer_id=1649] [region_id=521]
[2019/05/01 12:39:34.367 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 9, version: 67, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=1649] [region_id=521]
[2019/05/01 12:39:34.367 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 521, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 101, 113, 95, 114, 255, 97, 110, 103, 101, 255, 95, 105, 110, 255, 100, 101, 120, 95, 100, 255, 105, 118, 255, 101, 95, 108, 105, 109, 105, 255, 116, 255, 0, 0, 0, 0, 0, 0, 0, 248, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 101, 118, 101, 110, 255, 116, 95, 115, 99, 255, 104, 101, 100, 255, 117, 108, 101, 114, 0, 254, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 67, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 523, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 524, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1649, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1756, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1756, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1649] [region_id=521]
[2019/05/01 12:39:34.375 -07:00] [INFO] [peer.rs:1318] ["notify pd with change peer region"] [region="Region { id: 521, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 101, 113, 95, 114, 255, 97, 110, 103, 101, 255, 95, 105, 110, 255, 100, 101, 120, 95, 100, 255, 105, 118, 255, 101, 95, 108, 105, 109, 105, 255, 116, 255, 0, 0, 0, 0, 0, 0, 0, 248, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 101, 118, 101, 110, 255, 116, 95, 115, 99, 255, 104, 101, 100, 255, 117, 108, 101, 114, 0, 254, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 10, version: 67, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 523, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 524, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1649, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1756, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1649] [region_id=521]
[2019/05/01 12:39:34.382 -07:00] [INFO] [pd.rs:558] ["try to change peer"] [peer="Peer { id: 523, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [change_type=RemoveNode] [region_id=521]
[2019/05/01 12:39:34.382 -07:00] [INFO] [peer.rs:1953] ["propose conf change peer"] [change_peer=523] [change_type=RemoveNode] [peer_id=1649] [region_id=521]
[2019/05/01 12:39:34.392 -07:00] [INFO] [pd.rs:558] ["try to change peer"] [peer="Peer { id: 523, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [change_type=RemoveNode] [region_id=521]
[2019/05/01 12:39:34.423 -07:00] [INFO] [peer.rs:1927] ["there is a pending conf change, try later"] [peer_id=1649] [region_id=521]
[2019/05/01 12:39:34.423 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 523, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=14] [term=8] [peer_id=1649] [region_id=521]
[2019/05/01 12:39:34.423 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 10, version: 67, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=1649] [region_id=521]
[2019/05/01 12:39:34.423 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 521, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 101, 113, 95, 114, 255, 97, 110, 103, 101, 255, 95, 105, 110, 255, 100, 101, 120, 95, 100, 255, 105, 118, 255, 101, 95, 108, 105, 109, 105, 255, 116, 255, 0, 0, 0, 0, 0, 0, 0, 248, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 101, 118, 101, 110, 255, 116, 95, 115, 99, 255, 104, 101, 100, 255, 117, 108, 101, 114, 0, 254, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 10, version: 67, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 523, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 524, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1649, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1756, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 523, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1649] [region_id=521]
[2019/05/01 12:39:34.447 -07:00] [INFO] [peer.rs:1318] ["notify pd with change peer region"] [region="Region { id: 521, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 101, 113, 95, 114, 255, 97, 110, 103, 101, 255, 95, 105, 110, 255, 100, 101, 120, 95, 100, 255, 105, 118, 255, 101, 95, 108, 105, 109, 105, 255, 116, 255, 0, 0, 0, 0, 0, 0, 0, 248, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 101, 118, 101, 110, 255, 116, 95, 115, 99, 255, 104, 101, 100, 255, 117, 108, 101, 114, 0, 254, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 11, version: 67, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 524, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1649, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1756, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1649] [region_id=521]
[2019/05/01 12:39:34.448 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=1799] [region_id=1248]
[2019/05/01 12:39:34.448 -07:00] [INFO] [unknown:719] ["[region 1248] 1799 became follower at term 0"]
[2019/05/01 12:39:34.448 -07:00] [INFO] [unknown:295] ["[region 1248] 1799 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:39:34.448 -07:00] [INFO] [unknown:719] ["[region 1248] 1799 became follower at term 1"]
[2019/05/01 12:39:34.448 -07:00] [INFO] [unknown:920] ["[region 1248] 1799 [term: 1] received a MsgHeartbeat message with higher term from 1249 [term: 7]"]
[2019/05/01 12:39:34.448 -07:00] [INFO] [unknown:719] ["[region 1248] 1799 became follower at term 7"]
[2019/05/01 12:39:34.979 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=1801] [region_id=413]
[2019/05/01 12:39:34.979 -07:00] [INFO] [unknown:719] ["[region 413] 1801 became follower at term 0"]
[2019/05/01 12:39:34.979 -07:00] [INFO] [unknown:295] ["[region 413] 1801 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:39:34.979 -07:00] [INFO] [unknown:719] ["[region 413] 1801 became follower at term 1"]
[2019/05/01 12:39:34.979 -07:00] [INFO] [unknown:920] ["[region 413] 1801 [term: 1] received a MsgHeartbeat message with higher term from 415 [term: 7]"]
[2019/05/01 12:39:34.979 -07:00] [INFO] [unknown:719] ["[region 413] 1801 became follower at term 7"]
[2019/05/01 12:39:35.195 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 1758, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=8] [term=6] [peer_id=1758] [region_id=1622]
[2019/05/01 12:39:35.195 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 6, version: 237, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=1758] [region_id=1622]
[2019/05/01 12:39:35.195 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 1622, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 108, 97, 114, 103, 255, 101, 95, 102, 105, 255, 108, 101, 115, 255, 95, 115, 117, 112, 112, 255, 111, 114, 255, 116, 0, 0, 0, 0, 0, 250, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 108, 97, 114, 103, 255, 101, 95, 112, 97, 255, 103, 101, 95, 255, 115, 105, 122, 101, 0, 254, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 237, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1623, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1624, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1625, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1758, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1758, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1758] [region_id=1622]
[2019/05/01 12:39:35.259 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 1625, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=9] [term=6] [peer_id=1758] [region_id=1622]
[2019/05/01 12:39:35.259 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 7, version: 237, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=1758] [region_id=1622]
[2019/05/01 12:39:35.260 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 1622, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 108, 97, 114, 103, 255, 101, 95, 102, 105, 255, 108, 101, 115, 255, 95, 115, 117, 112, 112, 255, 111, 114, 255, 116, 0, 0, 0, 0, 0, 250, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 108, 97, 114, 103, 255, 101, 95, 112, 97, 255, 103, 101, 95, 255, 115, 105, 122, 101, 0, 254, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 7, version: 237, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1623, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1624, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1625, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1758, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1625, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1758] [region_id=1622]
[2019/05/01 12:39:35.265 -07:00] [INFO] [pd.rs:558] ["try to change peer"] [peer="Peer { id: 1802, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [change_type=AddLearnerNode] [region_id=317]
[2019/05/01 12:39:35.265 -07:00] [INFO] [peer.rs:1953] ["propose conf change peer"] [change_peer=1802] [change_type=AddLearnerNode] [peer_id=1147] [region_id=317]
[2019/05/01 12:39:35.271 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 107], lock_version: 408089939183927301, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 107], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:39:35.300 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddLearnerNode, peer: Some(Peer { id: 1802, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=19] [term=7] [peer_id=1147] [region_id=317]
[2019/05/01 12:39:35.300 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 8, version: 20, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddLearner] [peer_id=1147] [region_id=317]
[2019/05/01 12:39:35.300 -07:00] [INFO] [apply.rs:1476] ["add learner successfully"] [region="Region { id: 317, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 114, 128, 0, 0, 0, 0, 255, 1, 212, 195, 0, 0, 0, 0, 0, 250], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 114, 128, 0, 0, 0, 0, 255, 1, 212, 197, 0, 0, 0, 0, 0, 250], region_epoch: Some(RegionEpoch { conf_ver: 8, version: 20, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 318, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 320, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1147, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1802, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1147] [region_id=317]
[2019/05/01 12:39:35.307 -07:00] [INFO] [peer.rs:1318] ["notify pd with change peer region"] [region="Region { id: 317, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 114, 128, 0, 0, 0, 0, 255, 1, 212, 195, 0, 0, 0, 0, 0, 250], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 114, 128, 0, 0, 0, 0, 255, 1, 212, 197, 0, 0, 0, 0, 0, 250], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 20, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 318, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 320, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1147, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1802, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1147] [region_id=317]
[2019/05/01 12:39:35.411 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 109], lock_version: 408089939210141707, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 109], lock_ttl: 3103, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:39:35.554 -07:00] [INFO] [peer_storage.rs:759] ["requesting snapshot"] [peer_id=1147] [region_id=317]
[2019/05/01 12:39:35.555 -07:00] [INFO] [snap.rs:757] ["scan snapshot of one cf"] [size=680] [key_count=5] [cf=default] [snapshot=/opt/tidb/data/kv/snap/gen_317_7_19_(default|lock|write).sst] [region_id=317]
[2019/05/01 12:39:35.555 -07:00] [INFO] [snap.rs:757] ["scan snapshot of one cf"] [size=0] [key_count=0] [cf=lock] [snapshot=/opt/tidb/data/kv/snap/gen_317_7_19_(default|lock|write).sst] [region_id=317]
[2019/05/01 12:39:35.555 -07:00] [INFO] [snap.rs:757] ["scan snapshot of one cf"] [size=332] [key_count=6] [cf=write] [snapshot=/opt/tidb/data/kv/snap/gen_317_7_19_(default|lock|write).sst] [region_id=317]
[2019/05/01 12:39:35.584 -07:00] [INFO] [snap.rs:875] ["scan snapshot"] [takes=29.161853ms] [size=2637] [key_count=11] [snapshot=/opt/tidb/data/kv/snap/gen_317_7_19_(default|lock|write).sst] [region_id=317]
[2019/05/01 12:39:35.839 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 110], lock_version: 408089939354320901, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 110], lock_ttl: 3002, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:39:35.891 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 110], lock_version: 408089939354320901, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 110], lock_ttl: 3002, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:39:35.946 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 106], lock_version: 408089939367428103, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 106], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:39:36.022 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=1800] [region_id=800]
[2019/05/01 12:39:36.022 -07:00] [INFO] [unknown:719] ["[region 800] 1800 became follower at term 0"]
[2019/05/01 12:39:36.022 -07:00] [INFO] [unknown:295] ["[region 800] 1800 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:39:36.022 -07:00] [INFO] [unknown:719] ["[region 800] 1800 became follower at term 1"]
[2019/05/01 12:39:36.022 -07:00] [INFO] [unknown:920] ["[region 800] 1800 [term: 1] received a MsgHeartbeat message with higher term from 895 [term: 7]"]
[2019/05/01 12:39:36.022 -07:00] [INFO] [unknown:719] ["[region 800] 1800 became follower at term 7"]
[2019/05/01 12:39:36.070 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 109], lock_version: 408089939393642504, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 109], lock_ttl: 3064, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:39:36.085 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 109], lock_version: 408089939393642504, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 109], lock_ttl: 3064, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:39:36.243 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 112], lock_version: 408089939446071303, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 112], lock_ttl: 3002, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:39:36.386 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 113], lock_version: 408089939485392905, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 113], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:39:36.451 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_1248_7_8_(default|lock|write).sst] [snap_key=1248_7_8]
[2019/05/01 12:39:36.460 -07:00] [INFO] [unknown:1792] ["[region 1248] 1799 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 8, term: 7]"]
[2019/05/01 12:39:36.460 -07:00] [INFO] [unknown:1816] ["[region 1248] 1799 restored progress of 1249 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:39:36.460 -07:00] [INFO] [unknown:1816] ["[region 1248] 1799 restored progress of 1250 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:39:36.460 -07:00] [INFO] [unknown:1816] ["[region 1248] 1799 restored progress of 1251 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:39:36.460 -07:00] [INFO] [unknown:1816] ["[region 1248] 1799 restored progress of 1799 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:39:36.460 -07:00] [INFO] [unknown:474] ["[region 1248] 1799 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 8, term: 7]"]
[2019/05/01 12:39:36.460 -07:00] [INFO] [unknown:1736] ["[region 1248] 1799 [commit: 8] restored snapshot [index: 8, term: 7]"]
[2019/05/01 12:39:36.460 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=1799] [region_id=1248]
[2019/05/01 12:39:36.460 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 8, truncated_state: Some(RaftTruncatedState { index: 8, term: 7, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 1248, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 102, 255, 116, 95, 116, 255, 111, 116, 97, 108, 95, 255, 99, 97, 255, 99, 104, 101, 95, 115, 105, 255, 122, 255, 101, 0, 0, 0, 0, 0, 0, 249, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 102, 255, 116, 95, 117, 255, 115, 101, 114, 95, 115, 255, 116, 111, 255, 112, 119, 111, 114, 100, 95, 255, 116, 255, 97, 98, 108, 101, 0, 0, 0, 252, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 157, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1249, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1250, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1251, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1799, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1799] [region_id=1248]
[2019/05/01 12:39:36.477 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 1248] 1799"]
[2019/05/01 12:39:36.477 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 1248, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 102, 255, 116, 95, 116, 255, 111, 116, 97, 108, 95, 255, 99, 97, 255, 99, 104, 101, 95, 115, 105, 255, 122, 255, 101, 0, 0, 0, 0, 0, 0, 249, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 102, 255, 116, 95, 117, 255, 115, 101, 114, 95, 115, 255, 116, 111, 255, 112, 119, 111, 114, 100, 95, 255, 116, 255, 97, 98, 108, 101, 0, 0, 0, 252, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 157, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1249, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1250, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1251, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1799, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1799] [region_id=1248]
[2019/05/01 12:39:36.477 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=1248]
[2019/05/01 12:39:36.494 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=16.888384ms] [region_id=1248]
[2019/05/01 12:39:36.717 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 114], lock_version: 408089939590250499, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 114], lock_ttl: 3002, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:39:36.841 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 114], lock_version: 408089939603357703, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 114], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:39:36.983 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_413_7_11_(default|lock|write).sst] [snap_key=413_7_11]
[2019/05/01 12:39:36.997 -07:00] [INFO] [unknown:1792] ["[region 413] 1801 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 11, term: 7]"]
[2019/05/01 12:39:36.997 -07:00] [INFO] [unknown:1816] ["[region 413] 1801 restored progress of 415 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:39:36.997 -07:00] [INFO] [unknown:1816] ["[region 413] 1801 restored progress of 416 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:39:36.997 -07:00] [INFO] [unknown:1816] ["[region 413] 1801 restored progress of 896 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:39:36.997 -07:00] [INFO] [unknown:1816] ["[region 413] 1801 restored progress of 1801 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:39:36.997 -07:00] [INFO] [unknown:474] ["[region 413] 1801 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 11, term: 7]"]
[2019/05/01 12:39:36.997 -07:00] [INFO] [unknown:1736] ["[region 413] 1801 [commit: 11] restored snapshot [index: 11, term: 7]"]
[2019/05/01 12:39:36.997 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=1801] [region_id=413]
[2019/05/01 12:39:36.997 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 11, truncated_state: Some(RaftTruncatedState { index: 11, term: 7, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 413, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 99, 111, 108, 108, 255, 97, 116, 105, 111, 255, 110, 95, 99, 255, 111, 110, 110, 101, 99, 255, 116, 105, 255, 111, 110, 0, 0, 0, 0, 251, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 99, 111, 108, 108, 255, 97, 116, 105, 111, 255, 110, 95, 100, 255, 97, 116, 97, 98, 97, 255, 115, 101, 255, 0, 0, 0, 0, 0, 0, 249, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 47, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 415, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 416, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 896, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1801, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1801] [region_id=413]
[2019/05/01 12:39:37.016 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 413] 1801"]
[2019/05/01 12:39:37.016 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 413, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 99, 111, 108, 108, 255, 97, 116, 105, 111, 255, 110, 95, 99, 255, 111, 110, 110, 101, 99, 255, 116, 105, 255, 111, 110, 0, 0, 0, 0, 251, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 99, 111, 108, 108, 255, 97, 116, 105, 111, 255, 110, 95, 100, 255, 97, 116, 97, 98, 97, 255, 115, 101, 255, 0, 0, 0, 0, 0, 0, 249, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 47, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 415, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 416, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 896, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1801, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1801] [region_id=413]
[2019/05/01 12:39:37.016 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=413]
[2019/05/01 12:39:37.032 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=15.822072ms] [region_id=413]
[2019/05/01 12:39:37.241 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 115], lock_version: 408089939721322499, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 115], lock_ttl: 3002, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:39:37.461 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 116], lock_version: 408089939760644098, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 118], lock_ttl: 3073, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:39:37.493 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 1799, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=9] [term=7] [peer_id=1799] [region_id=1248]
[2019/05/01 12:39:37.493 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 6, version: 157, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=1799] [region_id=1248]
[2019/05/01 12:39:37.493 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 1248, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 102, 255, 116, 95, 116, 255, 111, 116, 97, 108, 95, 255, 99, 97, 255, 99, 104, 101, 95, 115, 105, 255, 122, 255, 101, 0, 0, 0, 0, 0, 0, 249, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 102, 255, 116, 95, 117, 255, 115, 101, 114, 95, 115, 255, 116, 111, 255, 112, 119, 111, 114, 100, 95, 255, 116, 255, 97, 98, 108, 101, 0, 0, 0, 252, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 157, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1249, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1250, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1251, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1799, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1799, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1799] [region_id=1248]
[2019/05/01 12:39:37.550 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 1251, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=10] [term=7] [peer_id=1799] [region_id=1248]
[2019/05/01 12:39:37.550 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 7, version: 157, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=1799] [region_id=1248]
[2019/05/01 12:39:37.550 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 1248, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 102, 255, 116, 95, 116, 255, 111, 116, 97, 108, 95, 255, 99, 97, 255, 99, 104, 101, 95, 115, 105, 255, 122, 255, 101, 0, 0, 0, 0, 0, 0, 249, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 102, 255, 116, 95, 117, 255, 115, 101, 114, 95, 115, 255, 116, 111, 255, 112, 119, 111, 114, 100, 95, 255, 116, 255, 97, 98, 108, 101, 0, 0, 0, 252, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 7, version: 157, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1249, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1250, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1251, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1799, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1251, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1799] [region_id=1248]
[2019/05/01 12:39:37.556 -07:00] [INFO] [unknown:841] ["New connected subchannel at 0x7f85840015d0 for subchannel 0x7f86404a6400"]
[2019/05/01 12:39:37.570 -07:00] [INFO] [snap.rs:389] ["sent snapshot"] [duration=14.047065ms] [size=2637] [snap_key=317_7_19] [region_id=317]
[2019/05/01 12:39:37.570 -07:00] [INFO] [peer.rs:538] ["report snapshot status"] [status=Finish] [to="Peer { id: 1802, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1147] [region_id=317]
[2019/05/01 12:39:37.620 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 114], lock_version: 408089939786858507, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 114], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:39:37.627 -07:00] [INFO] [unknown:1625] ["[region 345] 1457 [term 7] received MsgTimeoutNow from 347 and starts an election to get leadership."]
[2019/05/01 12:39:37.628 -07:00] [INFO] [unknown:739] ["[region 345] 1457 became candidate at term 8"]
[2019/05/01 12:39:37.628 -07:00] [INFO] [unknown:854] ["[region 345] 1457 received MsgRequestVoteResponse from 1457 at term 8"]
[2019/05/01 12:39:37.628 -07:00] [INFO] [unknown:828] ["[region 345] 1457 [logterm: 7, index: 10] sent MsgRequestVote request to 346 at term 8"]
[2019/05/01 12:39:37.628 -07:00] [INFO] [unknown:828] ["[region 345] 1457 [logterm: 7, index: 10] sent MsgRequestVote request to 347 at term 8"]
[2019/05/01 12:39:37.628 -07:00] [INFO] [unknown:920] ["[region 132] 314 [term: 7] received a MsgRequestVote message with higher term from 574 [term: 8]"]
[2019/05/01 12:39:37.628 -07:00] [INFO] [unknown:719] ["[region 132] 314 became follower at term 8"]
[2019/05/01 12:39:37.628 -07:00] [INFO] [unknown:1083] ["[region 132] 314 [logterm: 7, index: 13, vote: 0] cast MsgRequestVote for 574 [logterm: 7, index: 13] at term 8"]
[2019/05/01 12:39:37.654 -07:00] [INFO] [unknown:1625] ["[region 480] 825 [term 7] received MsgTimeoutNow from 482 and starts an election to get leadership."]
[2019/05/01 12:39:37.654 -07:00] [INFO] [unknown:739] ["[region 480] 825 became candidate at term 8"]
[2019/05/01 12:39:37.654 -07:00] [INFO] [unknown:854] ["[region 480] 825 received MsgRequestVoteResponse from 825 at term 8"]
[2019/05/01 12:39:37.654 -07:00] [INFO] [unknown:828] ["[region 480] 825 [logterm: 7, index: 10] sent MsgRequestVote request to 482 at term 8"]
[2019/05/01 12:39:37.654 -07:00] [INFO] [unknown:828] ["[region 480] 825 [logterm: 7, index: 10] sent MsgRequestVote request to 483 at term 8"]
[2019/05/01 12:39:37.657 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 118], lock_version: 408089939786858506, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 118], lock_ttl: 3080, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:39:37.688 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 114], lock_version: 408089939786858507, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 114], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:39:37.694 -07:00] [INFO] [unknown:1625] ["[region 123] 260 [term 7] received MsgTimeoutNow from 125 and starts an election to get leadership."]
[2019/05/01 12:39:37.694 -07:00] [INFO] [unknown:739] ["[region 123] 260 became candidate at term 8"]
[2019/05/01 12:39:37.694 -07:00] [INFO] [unknown:854] ["[region 123] 260 received MsgRequestVoteResponse from 260 at term 8"]
[2019/05/01 12:39:37.694 -07:00] [INFO] [unknown:828] ["[region 123] 260 [logterm: 7, index: 13] sent MsgRequestVote request to 125 at term 8"]
[2019/05/01 12:39:37.694 -07:00] [INFO] [unknown:828] ["[region 123] 260 [logterm: 7, index: 13] sent MsgRequestVote request to 491 at term 8"]
[2019/05/01 12:39:37.702 -07:00] [INFO] [unknown:854] ["[region 345] 1457 received MsgRequestVoteResponse from 347 at term 8"]
[2019/05/01 12:39:37.702 -07:00] [INFO] [unknown:1550] ["[region 345] 1457 [quorum:2] has received 2 MsgRequestVoteResponse votes and 0 vote rejections"]
[2019/05/01 12:39:37.702 -07:00] [INFO] [unknown:789] ["[region 345] 1457 became leader at term 8"]
[2019/05/01 12:39:37.710 -07:00] [INFO] [unknown:920] ["[region 349] 1511 [term: 7] received a MsgRequestVote message with higher term from 1104 [term: 8]"]
[2019/05/01 12:39:37.710 -07:00] [INFO] [unknown:719] ["[region 349] 1511 became follower at term 8"]
[2019/05/01 12:39:37.710 -07:00] [INFO] [unknown:1083] ["[region 349] 1511 [logterm: 7, index: 13, vote: 0] cast MsgRequestVote for 1104 [logterm: 7, index: 13] at term 8"]
[2019/05/01 12:39:37.710 -07:00] [INFO] [unknown:854] ["[region 480] 825 received MsgRequestVoteResponse from 483 at term 8"]
[2019/05/01 12:39:37.710 -07:00] [INFO] [unknown:1550] ["[region 480] 825 [quorum:2] has received 2 MsgRequestVoteResponse votes and 0 vote rejections"]
[2019/05/01 12:39:37.710 -07:00] [INFO] [unknown:789] ["[region 480] 825 became leader at term 8"]
[2019/05/01 12:39:37.735 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 118], lock_version: 408089939786858506, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 118], lock_ttl: 3080, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:39:37.742 -07:00] [INFO] [unknown:854] ["[region 123] 260 received MsgRequestVoteResponse from 491 at term 8"]
[2019/05/01 12:39:37.742 -07:00] [INFO] [unknown:1550] ["[region 123] 260 [quorum:2] has received 2 MsgRequestVoteResponse votes and 0 vote rejections"]
[2019/05/01 12:39:37.742 -07:00] [INFO] [unknown:789] ["[region 123] 260 became leader at term 8"]
[2019/05/01 12:39:37.959 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 116], lock_version: 408089939891716103, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 116], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:39:37.960 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 116], lock_version: 408089939891716103, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 116], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:39:38.175 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 1801, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=12] [term=7] [peer_id=1801] [region_id=413]
[2019/05/01 12:39:38.188 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 9, version: 47, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=1801] [region_id=413]
[2019/05/01 12:39:38.188 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 413, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 99, 111, 108, 108, 255, 97, 116, 105, 111, 255, 110, 95, 99, 255, 111, 110, 110, 101, 99, 255, 116, 105, 255, 111, 110, 0, 0, 0, 0, 251, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 99, 111, 108, 108, 255, 97, 116, 105, 111, 255, 110, 95, 100, 255, 97, 116, 97, 98, 97, 255, 115, 101, 255, 0, 0, 0, 0, 0, 0, 249, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 47, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 415, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 416, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 896, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1801, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1801, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1801] [region_id=413]
[2019/05/01 12:39:38.188 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_800_7_11_(default|lock|write).sst] [snap_key=800_7_11]
[2019/05/01 12:39:38.288 -07:00] [INFO] [unknown:1792] ["[region 800] 1800 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 11, term: 7]"]
[2019/05/01 12:39:38.288 -07:00] [INFO] [unknown:1816] ["[region 800] 1800 restored progress of 801 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:39:38.288 -07:00] [INFO] [unknown:1816] ["[region 800] 1800 restored progress of 803 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:39:38.288 -07:00] [INFO] [unknown:1816] ["[region 800] 1800 restored progress of 895 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:39:38.288 -07:00] [INFO] [unknown:1816] ["[region 800] 1800 restored progress of 1800 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:39:38.288 -07:00] [INFO] [unknown:474] ["[region 800] 1800 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 11, term: 7]"]
[2019/05/01 12:39:38.288 -07:00] [INFO] [unknown:1736] ["[region 800] 1800 [commit: 11] restored snapshot [index: 11, term: 7]"]
[2019/05/01 12:39:38.288 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=1800] [region_id=800]
[2019/05/01 12:39:38.288 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 11, truncated_state: Some(RaftTruncatedState { index: 11, term: 7, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 800, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 104, 97, 118, 101, 255, 95, 115, 115, 108, 255, 0, 0, 0, 255, 0, 0, 0, 0, 0, 247, 0, 0, 253], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 104, 97, 118, 101, 255, 95, 115, 121, 109, 255, 108, 105, 110, 255, 107, 0, 0, 0, 0, 251, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 97, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 801, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 803, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 895, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1800, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1800] [region_id=800]
[2019/05/01 12:39:38.396 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 416, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=13] [term=7] [peer_id=1801] [region_id=413]
[2019/05/01 12:39:38.408 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 800] 1800"]
[2019/05/01 12:39:38.408 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 10, version: 47, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=1801] [region_id=413]
[2019/05/01 12:39:38.408 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 800, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 104, 97, 118, 101, 255, 95, 115, 115, 108, 255, 0, 0, 0, 255, 0, 0, 0, 0, 0, 247, 0, 0, 253], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 104, 97, 118, 101, 255, 95, 115, 121, 109, 255, 108, 105, 110, 255, 107, 0, 0, 0, 0, 251, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 97, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 801, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 803, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 895, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1800, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1800] [region_id=800]
[2019/05/01 12:39:38.408 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 413, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 99, 111, 108, 108, 255, 97, 116, 105, 111, 255, 110, 95, 99, 255, 111, 110, 110, 101, 99, 255, 116, 105, 255, 111, 110, 0, 0, 0, 0, 251, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 99, 111, 108, 108, 255, 97, 116, 105, 111, 255, 110, 95, 100, 255, 97, 116, 97, 98, 97, 255, 115, 101, 255, 0, 0, 0, 0, 0, 0, 249, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 10, version: 47, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 415, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 416, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 896, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1801, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 416, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1801] [region_id=413]
[2019/05/01 12:39:38.408 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=800]
[2019/05/01 12:39:38.479 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=83.104868ms] [region_id=800]
[2019/05/01 12:39:38.523 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 114], lock_version: 408089939891716105, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 118], lock_ttl: 3242, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:39:38.562 -07:00] [INFO] [pd.rs:558] ["try to change peer"] [peer="Peer { id: 1802, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [change_type=AddNode] [region_id=317]
[2019/05/01 12:39:38.562 -07:00] [INFO] [peer.rs:1953] ["propose conf change peer"] [change_peer=1802] [change_type=AddNode] [peer_id=1147] [region_id=317]
[2019/05/01 12:39:38.617 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 114], lock_version: 408089939891716105, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 118], lock_ttl: 3242, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:39:38.716 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 1802, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=20] [term=7] [peer_id=1147] [region_id=317]
[2019/05/01 12:39:38.716 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 9, version: 20, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=1147] [region_id=317]
[2019/05/01 12:39:38.716 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 317, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 114, 128, 0, 0, 0, 0, 255, 1, 212, 195, 0, 0, 0, 0, 0, 250], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 114, 128, 0, 0, 0, 0, 255, 1, 212, 197, 0, 0, 0, 0, 0, 250], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 20, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 318, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 320, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1147, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1802, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1802, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1147] [region_id=317]
[2019/05/01 12:39:38.740 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 114], lock_version: 408089939891716105, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 118], lock_ttl: 3242, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:39:38.769 -07:00] [INFO] [peer.rs:1318] ["notify pd with change peer region"] [region="Region { id: 317, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 114, 128, 0, 0, 0, 0, 255, 1, 212, 195, 0, 0, 0, 0, 0, 250], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 114, 128, 0, 0, 0, 0, 255, 1, 212, 197, 0, 0, 0, 0, 0, 250], region_epoch: Some(RegionEpoch { conf_ver: 10, version: 20, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 318, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 320, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1147, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1802, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1147] [region_id=317]
[2019/05/01 12:39:38.809 -07:00] [INFO] [pd.rs:558] ["try to change peer"] [peer="Peer { id: 320, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [change_type=RemoveNode] [region_id=317]
[2019/05/01 12:39:38.809 -07:00] [INFO] [peer.rs:1953] ["propose conf change peer"] [change_peer=320] [change_type=RemoveNode] [peer_id=1147] [region_id=317]
[2019/05/01 12:39:38.879 -07:00] [INFO] [pd.rs:558] ["try to change peer"] [peer="Peer { id: 320, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [change_type=RemoveNode] [region_id=317]
[2019/05/01 12:39:38.963 -07:00] [INFO] [peer.rs:1927] ["there is a pending conf change, try later"] [peer_id=1147] [region_id=317]
[2019/05/01 12:39:38.963 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 320, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=21] [term=7] [peer_id=1147] [region_id=317]
[2019/05/01 12:39:38.963 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 10, version: 20, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=1147] [region_id=317]
[2019/05/01 12:39:38.963 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 317, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 114, 128, 0, 0, 0, 0, 255, 1, 212, 195, 0, 0, 0, 0, 0, 250], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 114, 128, 0, 0, 0, 0, 255, 1, 212, 197, 0, 0, 0, 0, 0, 250], region_epoch: Some(RegionEpoch { conf_ver: 10, version: 20, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 318, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 320, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1147, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1802, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 320, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1147] [region_id=317]
[2019/05/01 12:39:39.018 -07:00] [INFO] [peer.rs:1318] ["notify pd with change peer region"] [region="Region { id: 317, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 114, 128, 0, 0, 0, 0, 255, 1, 212, 195, 0, 0, 0, 0, 0, 250], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 114, 128, 0, 0, 0, 0, 255, 1, 212, 197, 0, 0, 0, 0, 0, 250], region_epoch: Some(RegionEpoch { conf_ver: 11, version: 20, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 318, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1147, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1802, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1147] [region_id=317]
[2019/05/01 12:39:39.074 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 114], lock_version: 408089939891716105, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 118], lock_ttl: 3242, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:39:39.332 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 1800, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=12] [term=7] [peer_id=1800] [region_id=800]
[2019/05/01 12:39:39.332 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 9, version: 97, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=1800] [region_id=800]
[2019/05/01 12:39:39.332 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 800, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 104, 97, 118, 101, 255, 95, 115, 115, 108, 255, 0, 0, 0, 255, 0, 0, 0, 0, 0, 247, 0, 0, 253], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 104, 97, 118, 101, 255, 95, 115, 121, 109, 255, 108, 105, 110, 255, 107, 0, 0, 0, 0, 251, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 97, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 801, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 803, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 895, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1800, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1800, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1800] [region_id=800]
[2019/05/01 12:39:39.577 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 803, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=13] [term=7] [peer_id=1800] [region_id=800]
[2019/05/01 12:39:39.577 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 10, version: 97, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=1800] [region_id=800]
[2019/05/01 12:39:39.577 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 800, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 104, 97, 118, 101, 255, 95, 115, 115, 108, 255, 0, 0, 0, 255, 0, 0, 0, 0, 0, 247, 0, 0, 253], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 104, 97, 118, 101, 255, 95, 115, 121, 109, 255, 108, 105, 110, 255, 107, 0, 0, 0, 0, 251, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 10, version: 97, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 801, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 803, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 895, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1800, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 803, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1800] [region_id=800]
[2019/05/01 12:39:40.060 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=1805] [region_id=1372]
[2019/05/01 12:39:40.060 -07:00] [INFO] [unknown:719] ["[region 1372] 1805 became follower at term 0"]
[2019/05/01 12:39:40.061 -07:00] [INFO] [unknown:295] ["[region 1372] 1805 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:39:40.061 -07:00] [INFO] [unknown:719] ["[region 1372] 1805 became follower at term 1"]
[2019/05/01 12:39:40.061 -07:00] [INFO] [unknown:920] ["[region 1372] 1805 [term: 1] received a MsgHeartbeat message with higher term from 1375 [term: 6]"]
[2019/05/01 12:39:40.061 -07:00] [INFO] [unknown:719] ["[region 1372] 1805 became follower at term 6"]
[2019/05/01 12:39:40.732 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 116], lock_version: 408089940547076106, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 116], lock_ttl: 3002, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:39:40.814 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 116], lock_version: 408089940547076106, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 116], lock_ttl: 3002, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:39:42.146 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_1372_6_7_(default|lock|write).sst] [snap_key=1372_6_7]
[2019/05/01 12:39:42.185 -07:00] [INFO] [unknown:1792] ["[region 1372] 1805 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 7, term: 6]"]
[2019/05/01 12:39:42.207 -07:00] [INFO] [unknown:1816] ["[region 1372] 1805 restored progress of 1373 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:39:42.207 -07:00] [INFO] [unknown:1816] ["[region 1372] 1805 restored progress of 1374 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:39:42.207 -07:00] [INFO] [unknown:1816] ["[region 1372] 1805 restored progress of 1375 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:39:42.207 -07:00] [INFO] [unknown:1816] ["[region 1372] 1805 restored progress of 1805 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:39:42.207 -07:00] [INFO] [unknown:474] ["[region 1372] 1805 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 7, term: 6]"]
[2019/05/01 12:39:42.207 -07:00] [INFO] [unknown:1736] ["[region 1372] 1805 [commit: 7] restored snapshot [index: 7, term: 6]"]
[2019/05/01 12:39:42.207 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=1805] [region_id=1372]
[2019/05/01 12:39:42.207 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 7, truncated_state: Some(RaftTruncatedState { index: 7, term: 6, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 1372, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 109, 255, 111, 110, 105, 255, 116, 111, 114, 95, 114, 255, 101, 115, 255, 101, 116, 95, 97, 108, 108, 255, 0, 255, 0, 0, 0, 0, 0, 0, 0, 247, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 111, 255, 108, 100, 95, 255, 98, 108, 111, 99, 107, 255, 115, 95, 255, 112, 99, 116, 0, 0, 0, 252, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 187, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1373, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1374, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1375, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1805, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1805] [region_id=1372]
[2019/05/01 12:39:42.296 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 1372, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 109, 255, 111, 110, 105, 255, 116, 111, 114, 95, 114, 255, 101, 115, 255, 101, 116, 95, 97, 108, 108, 255, 0, 255, 0, 0, 0, 0, 0, 0, 0, 247, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 111, 255, 108, 100, 95, 255, 98, 108, 111, 99, 107, 255, 115, 95, 255, 112, 99, 116, 0, 0, 0, 252, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 187, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1373, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1374, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1375, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1805, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1805] [region_id=1372]
[2019/05/01 12:39:42.297 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 1372] 1805"]
[2019/05/01 12:39:42.297 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=1372]
[2019/05/01 12:39:42.341 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=43.806372ms] [region_id=1372]
[2019/05/01 12:39:42.602 -07:00] [INFO] [unknown:920] ["[region 141] 573 [term: 7] received a MsgRequestVote message with higher term from 325 [term: 8]"]
[2019/05/01 12:39:42.602 -07:00] [INFO] [unknown:719] ["[region 141] 573 became follower at term 8"]
[2019/05/01 12:39:42.602 -07:00] [INFO] [unknown:1083] ["[region 141] 573 [logterm: 7, index: 13, vote: 0] cast MsgRequestVote for 325 [logterm: 7, index: 13] at term 8"]
[2019/05/01 12:39:42.768 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 124], lock_version: 408089941136900100, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 124], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:39:42.830 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 124], lock_version: 408089941136900100, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 124], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:39:43.165 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 1805, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=8] [term=6] [peer_id=1805] [region_id=1372]
[2019/05/01 12:39:43.165 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 6, version: 187, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=1805] [region_id=1372]
[2019/05/01 12:39:43.165 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 1372, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 109, 255, 111, 110, 105, 255, 116, 111, 114, 95, 114, 255, 101, 115, 255, 101, 116, 95, 97, 108, 108, 255, 0, 255, 0, 0, 0, 0, 0, 0, 0, 247, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 111, 255, 108, 100, 95, 255, 98, 108, 111, 99, 107, 255, 115, 95, 255, 112, 99, 116, 0, 0, 0, 252, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 187, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1373, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1374, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1375, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1805, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1805, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1805] [region_id=1372]
[2019/05/01 12:39:43.233 -07:00] [INFO] [pd.rs:558] ["try to change peer"] [peer="Peer { id: 1848, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [change_type=AddLearnerNode] [region_id=135]
[2019/05/01 12:39:43.240 -07:00] [INFO] [peer.rs:1953] ["propose conf change peer"] [change_peer=1848] [change_type=AddLearnerNode] [peer_id=315] [region_id=135]
[2019/05/01 12:39:43.260 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 1373, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=9] [term=6] [peer_id=1805] [region_id=1372]
[2019/05/01 12:39:43.260 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 7, version: 187, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=1805] [region_id=1372]
[2019/05/01 12:39:43.260 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 1372, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 109, 255, 111, 110, 105, 255, 116, 111, 114, 95, 114, 255, 101, 115, 255, 101, 116, 95, 97, 108, 108, 255, 0, 255, 0, 0, 0, 0, 0, 0, 0, 247, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 111, 255, 108, 100, 95, 255, 98, 108, 111, 99, 107, 255, 115, 95, 255, 112, 99, 116, 0, 0, 0, 252, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 7, version: 187, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1373, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1374, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1375, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1805, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1373, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1805] [region_id=1372]
[2019/05/01 12:39:43.285 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddLearnerNode, peer: Some(Peer { id: 1848, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=12] [term=8] [peer_id=315] [region_id=135]
[2019/05/01 12:39:43.285 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 5, version: 18, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddLearner] [peer_id=315] [region_id=135]
[2019/05/01 12:39:43.285 -07:00] [INFO] [apply.rs:1476] ["add learner successfully"] [region="Region { id: 135, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 116, 105, 107, 118, 255, 95, 103, 99, 95, 255, 108, 101, 97, 255, 100, 101, 114, 95, 100, 255, 101, 115, 255, 99, 0, 0, 0, 0, 0, 250, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 116, 105, 107, 118, 255, 95, 103, 99, 95, 255, 108, 101, 97, 255, 100, 101, 114, 95, 117, 255, 117, 105, 255, 100, 0, 0, 0, 0, 0, 250, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 5, version: 18, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 136, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 137, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 315, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1848, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=315] [region_id=135]
[2019/05/01 12:39:43.293 -07:00] [INFO] [peer.rs:1318] ["notify pd with change peer region"] [region="Region { id: 135, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 116, 105, 107, 118, 255, 95, 103, 99, 95, 255, 108, 101, 97, 255, 100, 101, 114, 95, 100, 255, 101, 115, 255, 99, 0, 0, 0, 0, 0, 250, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 116, 105, 107, 118, 255, 95, 103, 99, 95, 255, 108, 101, 97, 255, 100, 101, 114, 95, 117, 255, 117, 105, 255, 100, 0, 0, 0, 0, 0, 250, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 18, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 136, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 137, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 315, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1848, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=315] [region_id=135]
[2019/05/01 12:39:43.562 -07:00] [INFO] [peer_storage.rs:759] ["requesting snapshot"] [peer_id=315] [region_id=135]
[2019/05/01 12:39:43.562 -07:00] [INFO] [snap.rs:757] ["scan snapshot of one cf"] [size=0] [key_count=0] [cf=default] [snapshot=/opt/tidb/data/kv/snap/gen_135_8_12_(default|lock|write).sst] [region_id=135]
[2019/05/01 12:39:43.562 -07:00] [INFO] [snap.rs:757] ["scan snapshot of one cf"] [size=0] [key_count=0] [cf=lock] [snapshot=/opt/tidb/data/kv/snap/gen_135_8_12_(default|lock|write).sst] [region_id=135]
[2019/05/01 12:39:43.562 -07:00] [INFO] [snap.rs:757] ["scan snapshot of one cf"] [size=166] [key_count=2] [cf=write] [snapshot=/opt/tidb/data/kv/snap/gen_135_8_12_(default|lock|write).sst] [region_id=135]
[2019/05/01 12:39:43.575 -07:00] [INFO] [snap.rs:875] ["scan snapshot"] [takes=12.832033ms] [size=1482] [key_count=2] [snapshot=/opt/tidb/data/kv/snap/gen_135_8_12_(default|lock|write).sst] [region_id=135]
[2019/05/01 12:39:43.989 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=1847] [region_id=1795]
[2019/05/01 12:39:43.996 -07:00] [INFO] [unknown:719] ["[region 1795] 1847 became follower at term 0"]
[2019/05/01 12:39:43.996 -07:00] [INFO] [unknown:295] ["[region 1795] 1847 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:39:43.996 -07:00] [INFO] [unknown:719] ["[region 1795] 1847 became follower at term 1"]
[2019/05/01 12:39:43.996 -07:00] [INFO] [unknown:920] ["[region 1795] 1847 [term: 1] received a MsgHeartbeat message with higher term from 1797 [term: 6]"]
[2019/05/01 12:39:43.996 -07:00] [INFO] [unknown:719] ["[region 1795] 1847 became follower at term 6"]
[2019/05/01 12:39:44.071 -07:00] [INFO] [unknown:920] ["[region 30] 330 [term: 7] received a MsgRequestVote message with higher term from 1555 [term: 8]"]
[2019/05/01 12:39:44.071 -07:00] [INFO] [unknown:719] ["[region 30] 330 became follower at term 8"]
[2019/05/01 12:39:44.071 -07:00] [INFO] [unknown:1083] ["[region 30] 330 [logterm: 7, index: 14, vote: 0] cast MsgRequestVote for 1555 [logterm: 7, index: 14] at term 8"]
[2019/05/01 12:39:44.112 -07:00] [INFO] [unknown:1625] ["[region 696] 1305 [term 7] received MsgTimeoutNow from 698 and starts an election to get leadership."]
[2019/05/01 12:39:44.112 -07:00] [INFO] [unknown:739] ["[region 696] 1305 became candidate at term 8"]
[2019/05/01 12:39:44.112 -07:00] [INFO] [unknown:854] ["[region 696] 1305 received MsgRequestVoteResponse from 1305 at term 8"]
[2019/05/01 12:39:44.112 -07:00] [INFO] [unknown:828] ["[region 696] 1305 [logterm: 7, index: 10] sent MsgRequestVote request to 698 at term 8"]
[2019/05/01 12:39:44.112 -07:00] [INFO] [unknown:828] ["[region 696] 1305 [logterm: 7, index: 10] sent MsgRequestVote request to 699 at term 8"]
[2019/05/01 12:39:44.145 -07:00] [INFO] [unknown:920] ["[region 144] 665 [term: 7] received a MsgRequestVote message with higher term from 326 [term: 8]"]
[2019/05/01 12:39:44.145 -07:00] [INFO] [unknown:719] ["[region 144] 665 became follower at term 8"]
[2019/05/01 12:39:44.145 -07:00] [INFO] [unknown:1083] ["[region 144] 665 [logterm: 7, index: 13, vote: 0] cast MsgRequestVote for 326 [logterm: 7, index: 13] at term 8"]
[2019/05/01 12:39:44.202 -07:00] [INFO] [unknown:854] ["[region 696] 1305 received MsgRequestVoteResponse from 699 at term 8"]
[2019/05/01 12:39:44.202 -07:00] [INFO] [unknown:1550] ["[region 696] 1305 [quorum:2] has received 2 MsgRequestVoteResponse votes and 0 vote rejections"]
[2019/05/01 12:39:44.202 -07:00] [INFO] [unknown:789] ["[region 696] 1305 became leader at term 8"]
[2019/05/01 12:39:44.500 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 125], lock_version: 408089941595652106, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 125], lock_ttl: 3092, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:39:44.569 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=1850] [region_id=401]
[2019/05/01 12:39:44.569 -07:00] [INFO] [unknown:719] ["[region 401] 1850 became follower at term 0"]
[2019/05/01 12:39:44.569 -07:00] [INFO] [unknown:295] ["[region 401] 1850 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:39:44.569 -07:00] [INFO] [unknown:719] ["[region 401] 1850 became follower at term 1"]
[2019/05/01 12:39:44.569 -07:00] [INFO] [unknown:920] ["[region 401] 1850 [term: 1] received a MsgHeartbeat message with higher term from 402 [term: 6]"]
[2019/05/01 12:39:44.569 -07:00] [INFO] [unknown:719] ["[region 401] 1850 became follower at term 6"]
[2019/05/01 12:39:44.603 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 126], lock_version: 408089941648080901, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 126], lock_ttl: 3003, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:39:45.551 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 133], lock_version: 408089941897117705, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 135], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:39:45.565 -07:00] [INFO] [unknown:841] ["New connected subchannel at 0x7f858f661fb0 for subchannel 0x7f86404a6600"]
[2019/05/01 12:39:45.577 -07:00] [INFO] [snap.rs:389] ["sent snapshot"] [duration=13.553682ms] [size=1482] [snap_key=135_8_12] [region_id=135]
[2019/05/01 12:39:45.577 -07:00] [INFO] [peer.rs:538] ["report snapshot status"] [status=Finish] [to="Peer { id: 1848, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=315] [region_id=135]
[2019/05/01 12:39:45.657 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 132], lock_version: 408089941910224904, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 132], lock_ttl: 3058, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:39:45.668 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 132], lock_version: 408089941910224904, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 132], lock_ttl: 3058, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:39:45.781 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 136], lock_version: 408089941949546511, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 136], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:39:45.867 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 131], lock_version: 408089941975760906, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 131], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:39:45.992 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_1795_6_7_(default|lock|write).sst] [snap_key=1795_6_7]
[2019/05/01 12:39:46.011 -07:00] [INFO] [unknown:1792] ["[region 1795] 1847 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 7, term: 6]"]
[2019/05/01 12:39:46.011 -07:00] [INFO] [unknown:1816] ["[region 1795] 1847 restored progress of 1796 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:39:46.011 -07:00] [INFO] [unknown:1816] ["[region 1795] 1847 restored progress of 1797 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:39:46.011 -07:00] [INFO] [unknown:1816] ["[region 1795] 1847 restored progress of 1798 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:39:46.011 -07:00] [INFO] [unknown:1816] ["[region 1795] 1847 restored progress of 1847 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:39:46.011 -07:00] [INFO] [unknown:474] ["[region 1795] 1847 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 7, term: 6]"]
[2019/05/01 12:39:46.012 -07:00] [INFO] [unknown:1736] ["[region 1795] 1847 [commit: 7] restored snapshot [index: 7, term: 6]"]
[2019/05/01 12:39:46.012 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=1847] [region_id=1795]
[2019/05/01 12:39:46.012 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 7, truncated_state: Some(RaftTruncatedState { index: 7, term: 6, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 1795, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 109, 97, 120, 95, 255, 98, 105, 110, 108, 255, 111, 103, 95, 255, 99, 97, 99, 104, 101, 255, 95, 115, 255, 105, 122, 101, 0, 0, 0, 252, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 109, 97, 120, 95, 255, 98, 105, 110, 108, 255, 111, 103, 95, 255, 115, 105, 122, 101, 0, 254, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 267, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1796, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1797, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1798, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1847, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1847] [region_id=1795]
[2019/05/01 12:39:46.040 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 1795] 1847"]
[2019/05/01 12:39:46.040 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 1795, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 109, 97, 120, 95, 255, 98, 105, 110, 108, 255, 111, 103, 95, 255, 99, 97, 99, 104, 101, 255, 95, 115, 255, 105, 122, 101, 0, 0, 0, 252, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 109, 97, 120, 95, 255, 98, 105, 110, 108, 255, 111, 103, 95, 255, 115, 105, 122, 101, 0, 254, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 267, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1796, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1797, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1798, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1847, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1847] [region_id=1795]
[2019/05/01 12:39:46.040 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=1795]
[2019/05/01 12:39:46.057 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=16.239727ms] [region_id=1795]
[2019/05/01 12:39:46.114 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 134], lock_version: 408089941988868103, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 137], lock_ttl: 3079, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:39:46.234 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 130], lock_version: 408089942067511301, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 131], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:39:46.333 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 131], lock_version: 408089942080618498, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 131], lock_ttl: 3051, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:39:46.459 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 137], lock_version: 408089942106832905, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 137], lock_ttl: 3089, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:39:46.499 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 131], lock_version: 408089942133047299, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 135], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:39:46.565 -07:00] [INFO] [pd.rs:558] ["try to change peer"] [peer="Peer { id: 1848, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [change_type=AddNode] [region_id=135]
[2019/05/01 12:39:46.565 -07:00] [INFO] [peer.rs:1953] ["propose conf change peer"] [change_peer=1848] [change_type=AddNode] [peer_id=315] [region_id=135]
[2019/05/01 12:39:46.595 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 1848, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=13] [term=8] [peer_id=315] [region_id=135]
[2019/05/01 12:39:46.595 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 6, version: 18, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=315] [region_id=135]
[2019/05/01 12:39:46.595 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 135, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 116, 105, 107, 118, 255, 95, 103, 99, 95, 255, 108, 101, 97, 255, 100, 101, 114, 95, 100, 255, 101, 115, 255, 99, 0, 0, 0, 0, 0, 250, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 116, 105, 107, 118, 255, 95, 103, 99, 95, 255, 108, 101, 97, 255, 100, 101, 114, 95, 117, 255, 117, 105, 255, 100, 0, 0, 0, 0, 0, 250, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 18, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 136, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 137, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 315, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1848, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1848, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=315] [region_id=135]
[2019/05/01 12:39:46.610 -07:00] [INFO] [peer.rs:1318] ["notify pd with change peer region"] [region="Region { id: 135, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 116, 105, 107, 118, 255, 95, 103, 99, 95, 255, 108, 101, 97, 255, 100, 101, 114, 95, 100, 255, 101, 115, 255, 99, 0, 0, 0, 0, 0, 250, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 116, 105, 107, 118, 255, 95, 103, 99, 95, 255, 108, 101, 97, 255, 100, 101, 114, 95, 117, 255, 117, 105, 255, 100, 0, 0, 0, 0, 0, 250, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 7, version: 18, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 136, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 137, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 315, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1848, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=315] [region_id=135]
[2019/05/01 12:39:46.612 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_401_6_7_(default|lock|write).sst] [snap_key=401_6_7]
[2019/05/01 12:39:46.619 -07:00] [INFO] [pd.rs:558] ["try to change peer"] [peer="Peer { id: 136, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [change_type=RemoveNode] [region_id=135]
[2019/05/01 12:39:46.619 -07:00] [INFO] [peer.rs:1953] ["propose conf change peer"] [change_peer=136] [change_type=RemoveNode] [peer_id=315] [region_id=135]
[2019/05/01 12:39:46.628 -07:00] [INFO] [unknown:1792] ["[region 401] 1850 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 7, term: 6]"]
[2019/05/01 12:39:46.628 -07:00] [INFO] [unknown:1816] ["[region 401] 1850 restored progress of 402 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:39:46.628 -07:00] [INFO] [unknown:1816] ["[region 401] 1850 restored progress of 403 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:39:46.628 -07:00] [INFO] [unknown:1816] ["[region 401] 1850 restored progress of 404 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:39:46.628 -07:00] [INFO] [unknown:1816] ["[region 401] 1850 restored progress of 1850 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:39:46.628 -07:00] [INFO] [unknown:474] ["[region 401] 1850 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 7, term: 6]"]
[2019/05/01 12:39:46.628 -07:00] [INFO] [unknown:1736] ["[region 401] 1850 [commit: 7] restored snapshot [index: 7, term: 6]"]
[2019/05/01 12:39:46.628 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=1850] [region_id=401]
[2019/05/01 12:39:46.628 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 7, truncated_state: Some(RaftTruncatedState { index: 7, term: 6, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 401, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 99, 104, 97, 114, 255, 97, 99, 116, 101, 255, 114, 95, 115, 255, 101, 116, 95, 115, 121, 255, 115, 116, 255, 101, 109, 0, 0, 0, 0, 251, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 99, 104, 97, 114, 255, 97, 99, 116, 101, 255, 114, 95, 115, 255, 101, 116, 115, 95, 100, 255, 105, 114, 255, 0, 0, 0, 0, 0, 0, 249, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 47, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 402, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 403, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 404, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1850, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1850] [region_id=401]
[2019/05/01 12:39:46.645 -07:00] [INFO] [pd.rs:558] ["try to change peer"] [peer="Peer { id: 136, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [change_type=RemoveNode] [region_id=135]
[2019/05/01 12:39:46.647 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 401, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 99, 104, 97, 114, 255, 97, 99, 116, 101, 255, 114, 95, 115, 255, 101, 116, 95, 115, 121, 255, 115, 116, 255, 101, 109, 0, 0, 0, 0, 251, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 99, 104, 97, 114, 255, 97, 99, 116, 101, 255, 114, 95, 115, 255, 101, 116, 115, 95, 100, 255, 105, 114, 255, 0, 0, 0, 0, 0, 0, 249, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 47, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 402, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 403, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 404, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1850, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1850] [region_id=401]
[2019/05/01 12:39:46.647 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 401] 1850"]
[2019/05/01 12:39:46.647 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=401]
[2019/05/01 12:39:46.655 -07:00] [INFO] [peer.rs:1927] ["there is a pending conf change, try later"] [peer_id=315] [region_id=135]
[2019/05/01 12:39:46.655 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 136, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=14] [term=8] [peer_id=315] [region_id=135]
[2019/05/01 12:39:46.655 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 7, version: 18, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=315] [region_id=135]
[2019/05/01 12:39:46.655 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 135, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 116, 105, 107, 118, 255, 95, 103, 99, 95, 255, 108, 101, 97, 255, 100, 101, 114, 95, 100, 255, 101, 115, 255, 99, 0, 0, 0, 0, 0, 250, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 116, 105, 107, 118, 255, 95, 103, 99, 95, 255, 108, 101, 97, 255, 100, 101, 114, 95, 117, 255, 117, 105, 255, 100, 0, 0, 0, 0, 0, 250, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 7, version: 18, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 136, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 137, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 315, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1848, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 136, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=315] [region_id=135]
[2019/05/01 12:39:46.682 -07:00] [INFO] [peer.rs:1318] ["notify pd with change peer region"] [region="Region { id: 135, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 116, 105, 107, 118, 255, 95, 103, 99, 95, 255, 108, 101, 97, 255, 100, 101, 114, 95, 100, 255, 101, 115, 255, 99, 0, 0, 0, 0, 0, 250, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 116, 105, 107, 118, 255, 95, 103, 99, 95, 255, 108, 101, 97, 255, 100, 101, 114, 95, 117, 255, 117, 105, 255, 100, 0, 0, 0, 0, 0, 250, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 8, version: 18, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 137, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 315, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1848, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=315] [region_id=135]
[2019/05/01 12:39:46.705 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=57.347133ms] [region_id=401]
[2019/05/01 12:39:46.711 -07:00] [INFO] [pd.rs:558] ["try to change peer"] [peer="Peer { id: 1851, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [change_type=AddLearnerNode] [region_id=696]
[2019/05/01 12:39:46.711 -07:00] [INFO] [peer.rs:1953] ["propose conf change peer"] [change_peer=1851] [change_type=AddLearnerNode] [peer_id=1305] [region_id=696]
[2019/05/01 12:39:46.781 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddLearnerNode, peer: Some(Peer { id: 1851, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=12] [term=8] [peer_id=1305] [region_id=696]
[2019/05/01 12:39:46.781 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 8, version: 87, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddLearner] [peer_id=1305] [region_id=696]
[2019/05/01 12:39:46.781 -07:00] [INFO] [apply.rs:1476] ["add learner successfully"] [region="Region { id: 696, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 104, 97, 118, 101, 255, 95, 99, 111, 109, 255, 112, 114, 101, 255, 115, 115, 0, 0, 0, 252, 0, 0, 253], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 104, 97, 118, 101, 255, 95, 99, 114, 121, 255, 112, 116, 0, 255, 0, 0, 0, 0, 0, 249, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 8, version: 87, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 698, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 699, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1305, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1851, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1305] [region_id=696]
[2019/05/01 12:39:46.790 -07:00] [INFO] [peer.rs:1318] ["notify pd with change peer region"] [region="Region { id: 696, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 104, 97, 118, 101, 255, 95, 99, 111, 109, 255, 112, 114, 101, 255, 115, 115, 0, 0, 0, 252, 0, 0, 253], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 104, 97, 118, 101, 255, 95, 99, 114, 121, 255, 112, 116, 0, 255, 0, 0, 0, 0, 0, 249, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 87, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 698, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 699, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1305, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1851, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1305] [region_id=696]
[2019/05/01 12:39:47.027 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 1847, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=8] [term=6] [peer_id=1847] [region_id=1795]
[2019/05/01 12:39:47.027 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 6, version: 267, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=1847] [region_id=1795]
[2019/05/01 12:39:47.027 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 1795, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 109, 97, 120, 95, 255, 98, 105, 110, 108, 255, 111, 103, 95, 255, 99, 97, 99, 104, 101, 255, 95, 115, 255, 105, 122, 101, 0, 0, 0, 252, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 109, 97, 120, 95, 255, 98, 105, 110, 108, 255, 111, 103, 95, 255, 115, 105, 122, 101, 0, 254, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 267, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1796, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1797, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1798, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1847, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1847, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1847] [region_id=1795]
[2019/05/01 12:39:47.109 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 1796, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=9] [term=6] [peer_id=1847] [region_id=1795]
[2019/05/01 12:39:47.109 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 7, version: 267, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=1847] [region_id=1795]
[2019/05/01 12:39:47.109 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 1795, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 109, 97, 120, 95, 255, 98, 105, 110, 108, 255, 111, 103, 95, 255, 99, 97, 99, 104, 101, 255, 95, 115, 255, 105, 122, 101, 0, 0, 0, 252, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 109, 97, 120, 95, 255, 98, 105, 110, 108, 255, 111, 103, 95, 255, 115, 105, 122, 101, 0, 254, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 7, version: 267, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1796, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1797, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1798, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1847, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1796, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1847] [region_id=1795]
[2019/05/01 12:39:47.607 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 1850, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=8] [term=6] [peer_id=1850] [region_id=401]
[2019/05/01 12:39:47.607 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 6, version: 47, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=1850] [region_id=401]
[2019/05/01 12:39:47.607 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 401, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 99, 104, 97, 114, 255, 97, 99, 116, 101, 255, 114, 95, 115, 255, 101, 116, 95, 115, 121, 255, 115, 116, 255, 101, 109, 0, 0, 0, 0, 251, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 99, 104, 97, 114, 255, 97, 99, 116, 101, 255, 114, 95, 115, 255, 101, 116, 115, 95, 100, 255, 105, 114, 255, 0, 0, 0, 0, 0, 0, 249, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 47, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 402, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 403, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 404, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1850, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1850, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1850] [region_id=401]
[2019/05/01 12:39:47.621 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 136], lock_version: 408089942408298514, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 139], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:39:47.673 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 403, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=9] [term=6] [peer_id=1850] [region_id=401]
[2019/05/01 12:39:47.673 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 7, version: 47, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=1850] [region_id=401]
[2019/05/01 12:39:47.673 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 401, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 99, 104, 97, 114, 255, 97, 99, 116, 101, 255, 114, 95, 115, 255, 101, 116, 95, 115, 121, 255, 115, 116, 255, 101, 109, 0, 0, 0, 0, 251, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 99, 104, 97, 114, 255, 97, 99, 116, 101, 255, 114, 95, 115, 255, 101, 116, 115, 95, 100, 255, 105, 114, 255, 0, 0, 0, 0, 0, 0, 249, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 7, version: 47, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 402, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 403, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 404, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1850, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 403, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1850] [region_id=401]
[2019/05/01 12:39:47.828 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 140], lock_version: 408089942473834502, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 140], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:39:47.920 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=1852] [region_id=905]
[2019/05/01 12:39:47.920 -07:00] [INFO] [unknown:719] ["[region 905] 1852 became follower at term 0"]
[2019/05/01 12:39:47.920 -07:00] [INFO] [unknown:295] ["[region 905] 1852 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:39:47.920 -07:00] [INFO] [unknown:719] ["[region 905] 1852 became follower at term 1"]
[2019/05/01 12:39:47.921 -07:00] [INFO] [unknown:920] ["[region 905] 1852 [term: 1] received a MsgHeartbeat message with higher term from 908 [term: 7]"]
[2019/05/01 12:39:47.921 -07:00] [INFO] [unknown:719] ["[region 905] 1852 became follower at term 7"]
[2019/05/01 12:39:47.941 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=1854] [region_id=1027]
[2019/05/01 12:39:47.941 -07:00] [INFO] [unknown:719] ["[region 1027] 1854 became follower at term 0"]
[2019/05/01 12:39:47.941 -07:00] [INFO] [unknown:295] ["[region 1027] 1854 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:39:47.941 -07:00] [INFO] [unknown:719] ["[region 1027] 1854 became follower at term 1"]
[2019/05/01 12:39:47.941 -07:00] [INFO] [unknown:920] ["[region 1027] 1854 [term: 1] received a MsgHeartbeat message with higher term from 1028 [term: 6]"]
[2019/05/01 12:39:47.941 -07:00] [INFO] [unknown:719] ["[region 1027] 1854 became follower at term 6"]
[2019/05/01 12:39:47.973 -07:00] [INFO] [peer_storage.rs:759] ["requesting snapshot"] [peer_id=1305] [region_id=696]
[2019/05/01 12:39:47.973 -07:00] [INFO] [snap.rs:757] ["scan snapshot of one cf"] [size=0] [key_count=0] [cf=default] [snapshot=/opt/tidb/data/kv/snap/gen_696_8_12_(default|lock|write).sst] [region_id=696]
[2019/05/01 12:39:47.973 -07:00] [INFO] [snap.rs:757] ["scan snapshot of one cf"] [size=0] [key_count=0] [cf=lock] [snapshot=/opt/tidb/data/kv/snap/gen_696_8_12_(default|lock|write).sst] [region_id=696]
[2019/05/01 12:39:47.974 -07:00] [INFO] [snap.rs:757] ["scan snapshot of one cf"] [size=138] [key_count=2] [cf=write] [snapshot=/opt/tidb/data/kv/snap/gen_696_8_12_(default|lock|write).sst] [region_id=696]
[2019/05/01 12:39:47.987 -07:00] [INFO] [snap.rs:875] ["scan snapshot"] [takes=13.789803ms] [size=1375] [key_count=2] [snapshot=/opt/tidb/data/kv/snap/gen_696_8_12_(default|lock|write).sst] [region_id=696]
[2019/05/01 12:39:48.066 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 138], lock_version: 408089942552477709, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 141], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:39:48.067 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 138], lock_version: 408089942552477709, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 140], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:39:48.346 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 141], lock_version: 408089942604906504, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 141], lock_ttl: 3003, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:39:48.348 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=1853] [region_id=672]
[2019/05/01 12:39:48.348 -07:00] [INFO] [unknown:719] ["[region 672] 1853 became follower at term 0"]
[2019/05/01 12:39:48.348 -07:00] [INFO] [unknown:295] ["[region 672] 1853 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:39:48.348 -07:00] [INFO] [unknown:719] ["[region 672] 1853 became follower at term 1"]
[2019/05/01 12:39:48.348 -07:00] [INFO] [unknown:920] ["[region 672] 1853 [term: 1] received a MsgHeartbeat message with higher term from 673 [term: 6]"]
[2019/05/01 12:39:48.348 -07:00] [INFO] [unknown:719] ["[region 672] 1853 became follower at term 6"]
[2019/05/01 12:39:48.519 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 144], lock_version: 408089942670442504, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 144], lock_ttl: 3002, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:39:48.609 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 147], lock_version: 408089942696656905, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 147], lock_ttl: 3002, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:39:48.693 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 142], lock_version: 408089942709764106, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 143], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:39:49.208 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 147], lock_version: 408089942827728914, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 147], lock_ttl: 3071, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:39:49.241 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 147], lock_version: 408089942827728914, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 147], lock_ttl: 3071, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:39:49.316 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 149], lock_version: 408089942880157712, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 149], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:39:49.317 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 149], lock_version: 408089942880157712, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 149], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:39:49.448 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 149], lock_version: 408089942893264910, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 149], lock_ttl: 3075, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:39:49.924 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_905_7_8_(default|lock|write).sst] [snap_key=905_7_8]
[2019/05/01 12:39:49.943 -07:00] [INFO] [unknown:1792] ["[region 905] 1852 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 8, term: 7]"]
[2019/05/01 12:39:49.943 -07:00] [INFO] [unknown:1816] ["[region 905] 1852 restored progress of 906 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:39:49.943 -07:00] [INFO] [unknown:1816] ["[region 905] 1852 restored progress of 907 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:39:49.943 -07:00] [INFO] [unknown:1816] ["[region 905] 1852 restored progress of 908 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:39:49.943 -07:00] [INFO] [unknown:1816] ["[region 905] 1852 restored progress of 1852 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:39:49.943 -07:00] [INFO] [unknown:474] ["[region 905] 1852 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 8, term: 7]"]
[2019/05/01 12:39:49.943 -07:00] [INFO] [unknown:1736] ["[region 905] 1852 [commit: 8] restored snapshot [index: 8, term: 7]"]
[2019/05/01 12:39:49.943 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=1852] [region_id=905]
[2019/05/01 12:39:49.943 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 8, truncated_state: Some(RaftTruncatedState { index: 8, term: 7, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 905, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 97, 255, 100, 97, 112, 255, 116, 105, 118, 101, 95, 255, 102, 108, 255, 117, 115, 104, 105, 110, 103, 255, 0, 255, 0, 0, 0, 0, 0, 0, 0, 247, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 97, 255, 100, 97, 112, 255, 116, 105, 118, 101, 95, 255, 102, 108, 255, 117, 115, 104, 105, 110, 103, 255, 95, 255, 108, 119, 109, 0, 0, 0, 0, 251, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 107, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 906, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 907, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 908, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1852, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1852] [region_id=905]
[2019/05/01 12:39:49.960 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 905] 1852"]
[2019/05/01 12:39:49.960 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 905, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 97, 255, 100, 97, 112, 255, 116, 105, 118, 101, 95, 255, 102, 108, 255, 117, 115, 104, 105, 110, 103, 255, 0, 255, 0, 0, 0, 0, 0, 0, 0, 247, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 97, 255, 100, 97, 112, 255, 116, 105, 118, 101, 95, 255, 102, 108, 255, 117, 115, 104, 105, 110, 103, 255, 95, 255, 108, 119, 109, 0, 0, 0, 0, 251, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 107, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 906, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 907, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 908, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1852, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1852] [region_id=905]
[2019/05/01 12:39:49.960 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=905]
[2019/05/01 12:39:49.962 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_1027_6_7_(default|lock|write).sst] [snap_key=1027_6_7]
[2019/05/01 12:39:49.975 -07:00] [INFO] [unknown:841] ["New connected subchannel at 0x7f8582c2a560 for subchannel 0x7f86404a6800"]
[2019/05/01 12:39:49.977 -07:00] [INFO] [unknown:1792] ["[region 1027] 1854 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 7, term: 6]"]
[2019/05/01 12:39:49.977 -07:00] [INFO] [unknown:1816] ["[region 1027] 1854 restored progress of 1028 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:39:49.977 -07:00] [INFO] [unknown:1816] ["[region 1027] 1854 restored progress of 1029 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:39:49.977 -07:00] [INFO] [unknown:1816] ["[region 1027] 1854 restored progress of 1030 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:39:49.977 -07:00] [INFO] [unknown:1816] ["[region 1027] 1854 restored progress of 1854 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:39:49.977 -07:00] [INFO] [unknown:474] ["[region 1027] 1854 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 7, term: 6]"]
[2019/05/01 12:39:49.977 -07:00] [INFO] [unknown:1736] ["[region 1027] 1854 [commit: 7] restored snapshot [index: 7, term: 6]"]
[2019/05/01 12:39:49.977 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=1854] [region_id=1027]
[2019/05/01 12:39:49.977 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 7, truncated_state: Some(RaftTruncatedState { index: 7, term: 6, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 1027, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 98, 255, 117, 102, 102, 255, 101, 114, 95, 112, 111, 255, 111, 108, 255, 95, 100, 117, 109, 112, 95, 255, 110, 255, 111, 119, 0, 0, 0, 0, 0, 250, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 98, 255, 117, 102, 102, 255, 101, 114, 95, 112, 111, 255, 111, 108, 255, 95, 100, 117, 109, 112, 95, 255, 112, 255, 99, 116, 0, 0, 0, 0, 0, 250, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 117, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1028, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1029, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1030, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1854, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1854] [region_id=1027]
[2019/05/01 12:39:49.991 -07:00] [INFO] [snap.rs:389] ["sent snapshot"] [duration=16.13109ms] [size=1375] [snap_key=696_8_12] [region_id=696]
[2019/05/01 12:39:49.991 -07:00] [INFO] [peer.rs:538] ["report snapshot status"] [status=Finish] [to="Peer { id: 1851, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1305] [region_id=696]
[2019/05/01 12:39:50.001 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=40.246236ms] [region_id=905]
[2019/05/01 12:39:50.014 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 1027, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 98, 255, 117, 102, 102, 255, 101, 114, 95, 112, 111, 255, 111, 108, 255, 95, 100, 117, 109, 112, 95, 255, 110, 255, 111, 119, 0, 0, 0, 0, 0, 250, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 98, 255, 117, 102, 102, 255, 101, 114, 95, 112, 111, 255, 111, 108, 255, 95, 100, 117, 109, 112, 95, 255, 112, 255, 99, 116, 0, 0, 0, 0, 0, 250, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 117, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1028, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1029, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1030, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1854, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1854] [region_id=1027]
[2019/05/01 12:39:50.014 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=1027]
[2019/05/01 12:39:50.014 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 1027] 1854"]
[2019/05/01 12:39:50.054 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=40.48098ms] [region_id=1027]
[2019/05/01 12:39:50.305 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 152], lock_version: 408089943102980102, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 152], lock_ttl: 3002, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:39:50.351 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_672_6_7_(default|lock|write).sst] [snap_key=672_6_7]
[2019/05/01 12:39:50.357 -07:00] [INFO] [unknown:1792] ["[region 672] 1853 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 7, term: 6]"]
[2019/05/01 12:39:50.357 -07:00] [INFO] [unknown:1816] ["[region 672] 1853 restored progress of 673 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:39:50.357 -07:00] [INFO] [unknown:1816] ["[region 672] 1853 restored progress of 674 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:39:50.357 -07:00] [INFO] [unknown:1816] ["[region 672] 1853 restored progress of 675 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:39:50.357 -07:00] [INFO] [unknown:1816] ["[region 672] 1853 restored progress of 1853 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:39:50.357 -07:00] [INFO] [unknown:474] ["[region 672] 1853 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 7, term: 6]"]
[2019/05/01 12:39:50.357 -07:00] [INFO] [unknown:1736] ["[region 672] 1853 [commit: 7] restored snapshot [index: 7, term: 6]"]
[2019/05/01 12:39:50.357 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=1853] [region_id=672]
[2019/05/01 12:39:50.357 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 7, truncated_state: Some(RaftTruncatedState { index: 7, term: 6, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 672, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 103, 101, 110, 101, 255, 114, 97, 108, 95, 255, 108, 111, 103, 255, 0, 0, 0, 0, 0, 250, 0, 0, 253], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 103, 101, 110, 101, 255, 114, 97, 108, 95, 255, 108, 111, 103, 255, 95, 102, 105, 108, 101, 255, 0, 0, 255, 0, 0, 0, 0, 0, 0, 247, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 87, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 673, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 674, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 675, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1853, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1853] [region_id=672]
[2019/05/01 12:39:50.367 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 152], lock_version: 408089943102980102, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 152], lock_ttl: 3002, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:39:50.373 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 672, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 103, 101, 110, 101, 255, 114, 97, 108, 95, 255, 108, 111, 103, 255, 0, 0, 0, 0, 0, 250, 0, 0, 253], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 103, 101, 110, 101, 255, 114, 97, 108, 95, 255, 108, 111, 103, 255, 95, 102, 105, 108, 101, 255, 0, 0, 255, 0, 0, 0, 0, 0, 0, 247, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 87, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 673, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 674, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 675, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1853, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1853] [region_id=672]
[2019/05/01 12:39:50.374 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 672] 1853"]
[2019/05/01 12:39:50.374 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=672]
[2019/05/01 12:39:50.378 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 152], lock_version: 408089943102980102, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 152], lock_ttl: 3002, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:39:50.391 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=17.303596ms] [region_id=672]
[2019/05/01 12:39:50.854 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 153], lock_version: 408089943273373703, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 154], lock_ttl: 3002, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:39:50.959 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 1852, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=9] [term=7] [peer_id=1852] [region_id=905]
[2019/05/01 12:39:50.959 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 6, version: 107, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=1852] [region_id=905]
[2019/05/01 12:39:50.959 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 905, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 97, 255, 100, 97, 112, 255, 116, 105, 118, 101, 95, 255, 102, 108, 255, 117, 115, 104, 105, 110, 103, 255, 0, 255, 0, 0, 0, 0, 0, 0, 0, 247, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 97, 255, 100, 97, 112, 255, 116, 105, 118, 101, 95, 255, 102, 108, 255, 117, 115, 104, 105, 110, 103, 255, 95, 255, 108, 119, 109, 0, 0, 0, 0, 251, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 107, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 906, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 907, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 908, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1852, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1852, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1852] [region_id=905]
[2019/05/01 12:39:50.984 -07:00] [INFO] [pd.rs:558] ["try to change peer"] [peer="Peer { id: 1851, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [change_type=AddNode] [region_id=696]
[2019/05/01 12:39:51.001 -07:00] [INFO] [peer.rs:1953] ["propose conf change peer"] [change_peer=1851] [change_type=AddNode] [peer_id=1305] [region_id=696]
[2019/05/01 12:39:51.007 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 907, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=10] [term=7] [peer_id=1852] [region_id=905]
[2019/05/01 12:39:51.007 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 7, version: 107, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=1852] [region_id=905]
[2019/05/01 12:39:51.007 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 905, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 97, 255, 100, 97, 112, 255, 116, 105, 118, 101, 95, 255, 102, 108, 255, 117, 115, 104, 105, 110, 103, 255, 0, 255, 0, 0, 0, 0, 0, 0, 0, 247, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 97, 255, 100, 97, 112, 255, 116, 105, 118, 101, 95, 255, 102, 108, 255, 117, 115, 104, 105, 110, 103, 255, 95, 255, 108, 119, 109, 0, 0, 0, 0, 251, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 7, version: 107, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 906, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 907, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 908, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1852, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 907, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1852] [region_id=905]
[2019/05/01 12:39:51.026 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 1854, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=8] [term=6] [peer_id=1854] [region_id=1027]
[2019/05/01 12:39:51.026 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 6, version: 117, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=1854] [region_id=1027]
[2019/05/01 12:39:51.026 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 1027, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 98, 255, 117, 102, 102, 255, 101, 114, 95, 112, 111, 255, 111, 108, 255, 95, 100, 117, 109, 112, 95, 255, 110, 255, 111, 119, 0, 0, 0, 0, 0, 250, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 98, 255, 117, 102, 102, 255, 101, 114, 95, 112, 111, 255, 111, 108, 255, 95, 100, 117, 109, 112, 95, 255, 112, 255, 99, 116, 0, 0, 0, 0, 0, 250, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 117, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1028, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1029, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1030, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1854, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1854, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1854] [region_id=1027]
[2019/05/01 12:39:51.054 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 1851, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=13] [term=8] [peer_id=1305] [region_id=696]
[2019/05/01 12:39:51.054 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 9, version: 87, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=1305] [region_id=696]
[2019/05/01 12:39:51.054 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 696, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 104, 97, 118, 101, 255, 95, 99, 111, 109, 255, 112, 114, 101, 255, 115, 115, 0, 0, 0, 252, 0, 0, 253], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 104, 97, 118, 101, 255, 95, 99, 114, 121, 255, 112, 116, 0, 255, 0, 0, 0, 0, 0, 249, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 87, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 698, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 699, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1305, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1851, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1851, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1305] [region_id=696]
[2019/05/01 12:39:51.077 -07:00] [INFO] [peer.rs:1318] ["notify pd with change peer region"] [region="Region { id: 696, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 104, 97, 118, 101, 255, 95, 99, 111, 109, 255, 112, 114, 101, 255, 115, 115, 0, 0, 0, 252, 0, 0, 253], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 104, 97, 118, 101, 255, 95, 99, 114, 121, 255, 112, 116, 0, 255, 0, 0, 0, 0, 0, 249, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 10, version: 87, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 698, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 699, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1305, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1851, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1305] [region_id=696]
[2019/05/01 12:39:51.092 -07:00] [INFO] [pd.rs:558] ["try to change peer"] [peer="Peer { id: 698, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [change_type=RemoveNode] [region_id=696]
[2019/05/01 12:39:51.092 -07:00] [INFO] [peer.rs:1953] ["propose conf change peer"] [change_peer=698] [change_type=RemoveNode] [peer_id=1305] [region_id=696]
[2019/05/01 12:39:51.147 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 1029, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=9] [term=6] [peer_id=1854] [region_id=1027]
[2019/05/01 12:39:51.147 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 7, version: 117, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=1854] [region_id=1027]
[2019/05/01 12:39:51.147 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 1027, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 98, 255, 117, 102, 102, 255, 101, 114, 95, 112, 111, 255, 111, 108, 255, 95, 100, 117, 109, 112, 95, 255, 110, 255, 111, 119, 0, 0, 0, 0, 0, 250, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 98, 255, 117, 102, 102, 255, 101, 114, 95, 112, 111, 255, 111, 108, 255, 95, 100, 117, 109, 112, 95, 255, 112, 255, 99, 116, 0, 0, 0, 0, 0, 250, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 7, version: 117, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1028, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1029, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1030, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1854, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1029, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1854] [region_id=1027]
[2019/05/01 12:39:51.147 -07:00] [INFO] [pd.rs:558] ["try to change peer"] [peer="Peer { id: 698, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [change_type=RemoveNode] [region_id=696]
[2019/05/01 12:39:51.174 -07:00] [INFO] [peer.rs:1927] ["there is a pending conf change, try later"] [peer_id=1305] [region_id=696]
[2019/05/01 12:39:51.174 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 698, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=14] [term=8] [peer_id=1305] [region_id=696]
[2019/05/01 12:39:51.174 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 10, version: 87, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=1305] [region_id=696]
[2019/05/01 12:39:51.174 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 696, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 104, 97, 118, 101, 255, 95, 99, 111, 109, 255, 112, 114, 101, 255, 115, 115, 0, 0, 0, 252, 0, 0, 253], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 104, 97, 118, 101, 255, 95, 99, 114, 121, 255, 112, 116, 0, 255, 0, 0, 0, 0, 0, 249, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 10, version: 87, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 698, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 699, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1305, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1851, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 698, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1305] [region_id=696]
[2019/05/01 12:39:51.191 -07:00] [INFO] [peer.rs:1318] ["notify pd with change peer region"] [region="Region { id: 696, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 104, 97, 118, 101, 255, 95, 99, 111, 109, 255, 112, 114, 101, 255, 115, 115, 0, 0, 0, 252, 0, 0, 253], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 104, 97, 118, 101, 255, 95, 99, 114, 121, 255, 112, 116, 0, 255, 0, 0, 0, 0, 0, 249, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 11, version: 87, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 699, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1305, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1851, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1305] [region_id=696]
[2019/05/01 12:39:51.276 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 155], lock_version: 408089943325802500, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 155], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:39:51.400 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 1853, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=8] [term=6] [peer_id=1853] [region_id=672]
[2019/05/01 12:39:51.400 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 6, version: 87, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=1853] [region_id=672]
[2019/05/01 12:39:51.400 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 672, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 103, 101, 110, 101, 255, 114, 97, 108, 95, 255, 108, 111, 103, 255, 0, 0, 0, 0, 0, 250, 0, 0, 253], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 103, 101, 110, 101, 255, 114, 97, 108, 95, 255, 108, 111, 103, 255, 95, 102, 105, 108, 101, 255, 0, 0, 255, 0, 0, 0, 0, 0, 0, 247, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 87, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 673, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 674, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 675, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1853, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1853, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1853] [region_id=672]
[2019/05/01 12:39:51.413 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 150], lock_version: 408089943299588098, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 153], lock_ttl: 3071, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:39:51.464 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 674, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=9] [term=6] [peer_id=1853] [region_id=672]
[2019/05/01 12:39:51.464 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 7, version: 87, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=1853] [region_id=672]
[2019/05/01 12:39:51.464 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 672, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 103, 101, 110, 101, 255, 114, 97, 108, 95, 255, 108, 111, 103, 255, 0, 0, 0, 0, 0, 250, 0, 0, 253], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 103, 101, 110, 101, 255, 114, 97, 108, 95, 255, 108, 111, 103, 255, 95, 102, 105, 108, 101, 255, 0, 0, 255, 0, 0, 0, 0, 0, 0, 247, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 7, version: 87, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 673, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 674, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 675, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1853, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 674, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1853] [region_id=672]
[2019/05/01 12:39:51.558 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 158], lock_version: 408089943456874508, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 158], lock_ttl: 3002, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:39:51.594 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 158], lock_version: 408089943456874508, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 158], lock_ttl: 3002, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:39:51.734 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 158], lock_version: 408089943522410500, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 161], lock_ttl: 3002, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:39:51.794 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 158], lock_version: 408089943535517698, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 161], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:39:52.035 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 158], lock_version: 408089943561732104, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 158], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:39:52.150 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=1855] [region_id=1578]
[2019/05/01 12:39:52.150 -07:00] [INFO] [unknown:719] ["[region 1578] 1855 became follower at term 0"]
[2019/05/01 12:39:52.150 -07:00] [INFO] [unknown:295] ["[region 1578] 1855 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:39:52.150 -07:00] [INFO] [unknown:719] ["[region 1578] 1855 became follower at term 1"]
[2019/05/01 12:39:52.150 -07:00] [INFO] [unknown:920] ["[region 1578] 1855 [term: 1] received a MsgHeartbeat message with higher term from 1581 [term: 6]"]
[2019/05/01 12:39:52.150 -07:00] [INFO] [unknown:719] ["[region 1578] 1855 became follower at term 6"]
[2019/05/01 12:39:52.333 -07:00] [INFO] [unknown:920] ["[region 105] 1199 [term: 8] received a MsgRequestVote message with higher term from 1151 [term: 9]"]
[2019/05/01 12:39:52.333 -07:00] [INFO] [unknown:719] ["[region 105] 1199 became follower at term 9"]
[2019/05/01 12:39:52.333 -07:00] [INFO] [unknown:1083] ["[region 105] 1199 [logterm: 8, index: 17, vote: 0] cast MsgRequestVote for 1151 [logterm: 8, index: 17] at term 9"]
[2019/05/01 12:39:52.391 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=1857] [region_id=241]
[2019/05/01 12:39:52.391 -07:00] [INFO] [unknown:719] ["[region 241] 1857 became follower at term 0"]
[2019/05/01 12:39:52.391 -07:00] [INFO] [unknown:295] ["[region 241] 1857 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:39:52.391 -07:00] [INFO] [unknown:719] ["[region 241] 1857 became follower at term 1"]
[2019/05/01 12:39:52.391 -07:00] [INFO] [unknown:920] ["[region 241] 1857 [term: 1] received a MsgHeartbeat message with higher term from 894 [term: 7]"]
[2019/05/01 12:39:52.391 -07:00] [INFO] [unknown:719] ["[region 241] 1857 became follower at term 7"]
[2019/05/01 12:39:52.394 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 158], lock_version: 408089943640375301, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 159], lock_ttl: 3087, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:39:52.454 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 162], lock_version: 408089943679696901, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 162], lock_ttl: 3101, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:39:52.491 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 162], lock_version: 408089943719018506, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 162], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:39:52.639 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 163], lock_version: 408089943745232905, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 163], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:39:52.813 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 160], lock_version: 408089943784554506, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 160], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:39:53.082 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 160], lock_version: 408089943876304902, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 165], lock_ttl: 3002, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:39:53.091 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 160], lock_version: 408089943876304902, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 165], lock_ttl: 3002, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:39:53.732 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 164], lock_version: 408089944033591302, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 164], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:39:54.153 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_1578_6_10_(default|lock|write).sst] [snap_key=1578_6_10]
[2019/05/01 12:39:54.168 -07:00] [INFO] [unknown:1792] ["[region 1578] 1855 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 10, term: 6]"]
[2019/05/01 12:39:54.168 -07:00] [INFO] [unknown:1816] ["[region 1578] 1855 restored progress of 1580 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:39:54.168 -07:00] [INFO] [unknown:1816] ["[region 1578] 1855 restored progress of 1581 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:39:54.168 -07:00] [INFO] [unknown:1816] ["[region 1578] 1855 restored progress of 1652 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:39:54.168 -07:00] [INFO] [unknown:1816] ["[region 1578] 1855 restored progress of 1855 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:39:54.168 -07:00] [INFO] [unknown:474] ["[region 1578] 1855 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 10, term: 6]"]
[2019/05/01 12:39:54.168 -07:00] [INFO] [unknown:1736] ["[region 1578] 1855 [commit: 10] restored snapshot [index: 10, term: 6]"]
[2019/05/01 12:39:54.168 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=1855] [region_id=1578]
[2019/05/01 12:39:54.168 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 10, truncated_state: Some(RaftTruncatedState { index: 10, term: 6, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 1578, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 118, 255, 101, 114, 115, 255, 105, 111, 110, 0, 0, 253, 0, 0, 253], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 119, 255, 114, 105, 116, 255, 101, 95, 105, 111, 95, 255, 116, 104, 255, 114, 101, 97, 100, 115, 0, 254, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 227, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1580, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1581, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1652, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1855, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1855] [region_id=1578]
[2019/05/01 12:39:54.212 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 1578] 1855"]
[2019/05/01 12:39:54.212 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 1578, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 118, 255, 101, 114, 115, 255, 105, 111, 110, 0, 0, 253, 0, 0, 253], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 119, 255, 114, 105, 116, 255, 101, 95, 105, 111, 95, 255, 116, 104, 255, 114, 101, 97, 100, 115, 0, 254, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 227, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1580, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1581, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1652, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1855, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1855] [region_id=1578]
[2019/05/01 12:39:54.212 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=1578]
[2019/05/01 12:39:54.257 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=45.181393ms] [region_id=1578]
[2019/05/01 12:39:54.389 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_241_7_11_(default|lock|write).sst] [snap_key=241_7_11]
[2019/05/01 12:39:54.407 -07:00] [INFO] [unknown:1792] ["[region 241] 1857 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 11, term: 7]"]
[2019/05/01 12:39:54.407 -07:00] [INFO] [unknown:1816] ["[region 241] 1857 restored progress of 242 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:39:54.407 -07:00] [INFO] [unknown:1816] ["[region 241] 1857 restored progress of 244 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:39:54.407 -07:00] [INFO] [unknown:1816] ["[region 241] 1857 restored progress of 894 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:39:54.407 -07:00] [INFO] [unknown:1816] ["[region 241] 1857 restored progress of 1857 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:39:54.407 -07:00] [INFO] [unknown:474] ["[region 241] 1857 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 11, term: 7]"]
[2019/05/01 12:39:54.407 -07:00] [INFO] [unknown:1736] ["[region 241] 1857 [commit: 11] restored snapshot [index: 11, term: 7]"]
[2019/05/01 12:39:54.408 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=1857] [region_id=241]
[2019/05/01 12:39:54.408 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 11, truncated_state: Some(RaftTruncatedState { index: 11, term: 7, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 241, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 95, 103, 255, 116, 105, 100, 255, 95, 115, 105, 109, 112, 255, 108, 101, 255, 95, 114, 101, 99, 111, 118, 255, 101, 255, 114, 121, 0, 0, 0, 0, 0, 250, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 95, 109, 255, 97, 120, 95, 255, 102, 108, 117, 115, 104, 255, 95, 113, 255, 117, 101, 117, 101, 95, 116, 255, 105, 255, 109, 101, 0, 0, 0, 0, 0, 250, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 27, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 242, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 244, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 894, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1857, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1857] [region_id=241]
[2019/05/01 12:39:54.452 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 241] 1857"]
[2019/05/01 12:39:54.452 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 241, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 95, 103, 255, 116, 105, 100, 255, 95, 115, 105, 109, 112, 255, 108, 101, 255, 95, 114, 101, 99, 111, 118, 255, 101, 255, 114, 121, 0, 0, 0, 0, 0, 250, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 95, 109, 255, 97, 120, 95, 255, 102, 108, 117, 115, 104, 255, 95, 113, 255, 117, 101, 117, 101, 95, 116, 255, 105, 255, 109, 101, 0, 0, 0, 0, 0, 250, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 27, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 242, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 244, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 894, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1857, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1857] [region_id=241]
[2019/05/01 12:39:54.452 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=241]
[2019/05/01 12:39:54.509 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=57.164347ms] [region_id=241]
[2019/05/01 12:39:54.514 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 164], lock_version: 408089944125341702, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 169], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:39:54.793 -07:00] [INFO] [unknown:1625] ["[region 493] 1646 [term 7] received MsgTimeoutNow from 495 and starts an election to get leadership."]
[2019/05/01 12:39:54.793 -07:00] [INFO] [unknown:739] ["[region 493] 1646 became candidate at term 8"]
[2019/05/01 12:39:54.793 -07:00] [INFO] [unknown:854] ["[region 493] 1646 received MsgRequestVoteResponse from 1646 at term 8"]
[2019/05/01 12:39:54.793 -07:00] [INFO] [unknown:828] ["[region 493] 1646 [logterm: 7, index: 13] sent MsgRequestVote request to 1010 at term 8"]
[2019/05/01 12:39:54.793 -07:00] [INFO] [unknown:828] ["[region 493] 1646 [logterm: 7, index: 13] sent MsgRequestVote request to 495 at term 8"]
[2019/05/01 12:39:54.806 -07:00] [INFO] [unknown:1625] ["[region 102] 171 [term 7] received MsgTimeoutNow from 104 and starts an election to get leadership."]
[2019/05/01 12:39:54.806 -07:00] [INFO] [unknown:739] ["[region 102] 171 became candidate at term 8"]
[2019/05/01 12:39:54.806 -07:00] [INFO] [unknown:854] ["[region 102] 171 received MsgRequestVoteResponse from 171 at term 8"]
[2019/05/01 12:39:54.806 -07:00] [INFO] [unknown:828] ["[region 102] 171 [logterm: 7, index: 10] sent MsgRequestVote request to 104 at term 8"]
[2019/05/01 12:39:54.806 -07:00] [INFO] [unknown:828] ["[region 102] 171 [logterm: 7, index: 10] sent MsgRequestVote request to 103 at term 8"]
[2019/05/01 12:39:54.816 -07:00] [INFO] [unknown:1625] ["[region 1675] 1697 [term 6] received MsgTimeoutNow from 1677 and starts an election to get leadership."]
[2019/05/01 12:39:54.816 -07:00] [INFO] [unknown:739] ["[region 1675] 1697 became candidate at term 7"]
[2019/05/01 12:39:54.816 -07:00] [INFO] [unknown:854] ["[region 1675] 1697 received MsgRequestVoteResponse from 1697 at term 7"]
[2019/05/01 12:39:54.816 -07:00] [INFO] [unknown:828] ["[region 1675] 1697 [logterm: 6, index: 9] sent MsgRequestVote request to 1677 at term 7"]
[2019/05/01 12:39:54.816 -07:00] [INFO] [unknown:828] ["[region 1675] 1697 [logterm: 6, index: 9] sent MsgRequestVote request to 1676 at term 7"]
[2019/05/01 12:39:54.828 -07:00] [INFO] [unknown:1625] ["[region 425] 662 [term 7] received MsgTimeoutNow from 427 and starts an election to get leadership."]
[2019/05/01 12:39:54.828 -07:00] [INFO] [unknown:739] ["[region 425] 662 became candidate at term 8"]
[2019/05/01 12:39:54.828 -07:00] [INFO] [unknown:854] ["[region 425] 662 received MsgRequestVoteResponse from 662 at term 8"]
[2019/05/01 12:39:54.828 -07:00] [INFO] [unknown:828] ["[region 425] 662 [logterm: 7, index: 13] sent MsgRequestVote request to 1152 at term 8"]
[2019/05/01 12:39:54.828 -07:00] [INFO] [unknown:828] ["[region 425] 662 [logterm: 7, index: 13] sent MsgRequestVote request to 427 at term 8"]
[2019/05/01 12:39:54.850 -07:00] [INFO] [unknown:854] ["[region 493] 1646 received MsgRequestVoteResponse from 495 at term 8"]
[2019/05/01 12:39:54.850 -07:00] [INFO] [unknown:1550] ["[region 493] 1646 [quorum:2] has received 2 MsgRequestVoteResponse votes and 0 vote rejections"]
[2019/05/01 12:39:54.850 -07:00] [INFO] [unknown:789] ["[region 493] 1646 became leader at term 8"]
[2019/05/01 12:39:54.874 -07:00] [INFO] [unknown:854] ["[region 102] 171 received MsgRequestVoteResponse from 103 at term 8"]
[2019/05/01 12:39:54.874 -07:00] [INFO] [unknown:1550] ["[region 102] 171 [quorum:2] has received 2 MsgRequestVoteResponse votes and 0 vote rejections"]
[2019/05/01 12:39:54.874 -07:00] [INFO] [unknown:789] ["[region 102] 171 became leader at term 8"]
[2019/05/01 12:39:54.896 -07:00] [INFO] [unknown:854] ["[region 1675] 1697 received MsgRequestVoteResponse from 1676 at term 7"]
[2019/05/01 12:39:54.901 -07:00] [INFO] [unknown:1550] ["[region 1675] 1697 [quorum:2] has received 2 MsgRequestVoteResponse votes and 0 vote rejections"]
[2019/05/01 12:39:54.901 -07:00] [INFO] [unknown:789] ["[region 1675] 1697 became leader at term 7"]
[2019/05/01 12:39:54.919 -07:00] [INFO] [unknown:920] ["[region 413] 1801 [term: 7] received a MsgRequestVote message with higher term from 896 [term: 8]"]
[2019/05/01 12:39:54.919 -07:00] [INFO] [unknown:719] ["[region 413] 1801 became follower at term 8"]
[2019/05/01 12:39:54.919 -07:00] [INFO] [unknown:1083] ["[region 413] 1801 [logterm: 7, index: 13, vote: 0] cast MsgRequestVote for 896 [logterm: 7, index: 13] at term 8"]
[2019/05/01 12:39:54.945 -07:00] [INFO] [unknown:854] ["[region 425] 662 received MsgRequestVoteResponse from 1152 at term 8"]
[2019/05/01 12:39:54.945 -07:00] [INFO] [unknown:1550] ["[region 425] 662 [quorum:2] has received 2 MsgRequestVoteResponse votes and 0 vote rejections"]
[2019/05/01 12:39:54.945 -07:00] [INFO] [unknown:789] ["[region 425] 662 became leader at term 8"]
[2019/05/01 12:39:55.228 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 1855, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=11] [term=6] [peer_id=1855] [region_id=1578]
[2019/05/01 12:39:55.228 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 9, version: 227, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=1855] [region_id=1578]
[2019/05/01 12:39:55.228 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 1578, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 118, 255, 101, 114, 115, 255, 105, 111, 110, 0, 0, 253, 0, 0, 253], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 119, 255, 114, 105, 116, 255, 101, 95, 105, 111, 95, 255, 116, 104, 255, 114, 101, 97, 100, 115, 0, 254, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 227, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1580, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1581, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1652, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1855, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1855, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1855] [region_id=1578]
[2019/05/01 12:39:55.352 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 1580, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=12] [term=6] [peer_id=1855] [region_id=1578]
[2019/05/01 12:39:55.352 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 10, version: 227, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=1855] [region_id=1578]
[2019/05/01 12:39:55.352 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 1578, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 118, 255, 101, 114, 115, 255, 105, 111, 110, 0, 0, 253, 0, 0, 253], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 119, 255, 114, 105, 116, 255, 101, 95, 105, 111, 95, 255, 116, 104, 255, 114, 101, 97, 100, 115, 0, 254, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 10, version: 227, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1580, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1581, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1652, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1855, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1580, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1855] [region_id=1578]
[2019/05/01 12:39:55.464 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 166], lock_version: 408089944335056903, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 166], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:39:55.487 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 1857, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=12] [term=7] [peer_id=1857] [region_id=241]
[2019/05/01 12:39:55.487 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 9, version: 27, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=1857] [region_id=241]
[2019/05/01 12:39:55.487 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 241, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 95, 103, 255, 116, 105, 100, 255, 95, 115, 105, 109, 112, 255, 108, 101, 255, 95, 114, 101, 99, 111, 118, 255, 101, 255, 114, 121, 0, 0, 0, 0, 0, 250, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 95, 109, 255, 97, 120, 95, 255, 102, 108, 117, 115, 104, 255, 95, 113, 255, 117, 101, 117, 101, 95, 116, 255, 105, 255, 109, 101, 0, 0, 0, 0, 0, 250, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 27, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 242, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 244, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 894, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1857, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1857, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1857] [region_id=241]
[2019/05/01 12:39:55.529 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 166], lock_version: 408089944335056903, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 166], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:39:55.607 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 244, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=13] [term=7] [peer_id=1857] [region_id=241]
[2019/05/01 12:39:55.607 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 10, version: 27, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=1857] [region_id=241]
[2019/05/01 12:39:55.607 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 241, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 95, 103, 255, 116, 105, 100, 255, 95, 115, 105, 109, 112, 255, 108, 101, 255, 95, 114, 101, 99, 111, 118, 255, 101, 255, 114, 121, 0, 0, 0, 0, 0, 250, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 95, 109, 255, 97, 120, 95, 255, 102, 108, 117, 115, 104, 255, 95, 113, 255, 117, 101, 117, 101, 95, 116, 255, 105, 255, 109, 101, 0, 0, 0, 0, 0, 250, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 10, version: 27, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 242, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 244, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 894, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1857, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 244, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1857] [region_id=241]
[2019/05/01 12:39:55.812 -07:00] [INFO] [pd.rs:558] ["try to change peer"] [peer="Peer { id: 1902, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [change_type=AddLearnerNode] [region_id=1347]
[2019/05/01 12:39:55.812 -07:00] [INFO] [peer.rs:1953] ["propose conf change peer"] [change_peer=1902] [change_type=AddLearnerNode] [peer_id=1411] [region_id=1347]
[2019/05/01 12:39:55.867 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddLearnerNode, peer: Some(Peer { id: 1902, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=11] [term=7] [peer_id=1411] [region_id=1347]
[2019/05/01 12:39:55.867 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 8, version: 177, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddLearner] [peer_id=1411] [region_id=1347]
[2019/05/01 12:39:55.867 -07:00] [INFO] [apply.rs:1476] ["add learner successfully"] [region="Region { id: 1347, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 109, 255, 105, 114, 114, 255, 111, 114, 101, 100, 95, 255, 108, 111, 255, 103, 95, 103, 114, 111, 117, 255, 112, 255, 115, 0, 0, 0, 0, 0, 0, 249, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 109, 255, 111, 110, 105, 255, 116, 111, 114, 95, 100, 255, 105, 115, 255, 97, 98, 108, 101, 0, 0, 253, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 8, version: 177, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1348, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1350, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1411, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1902, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1411] [region_id=1347]
[2019/05/01 12:39:55.890 -07:00] [INFO] [peer.rs:1318] ["notify pd with change peer region"] [region="Region { id: 1347, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 109, 255, 105, 114, 114, 255, 111, 114, 101, 100, 95, 255, 108, 111, 255, 103, 95, 103, 114, 111, 117, 255, 112, 255, 115, 0, 0, 0, 0, 0, 0, 249, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 109, 255, 111, 110, 105, 255, 116, 111, 114, 95, 100, 255, 105, 115, 255, 97, 98, 108, 101, 0, 0, 253, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 177, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1348, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1350, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1411, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1902, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1411] [region_id=1347]
[2019/05/01 12:39:56.701 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 171], lock_version: 408089944741380101, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 171], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:39:56.785 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 171], lock_version: 408089944741380101, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 171], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:39:56.940 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=1900] [region_id=929]
[2019/05/01 12:39:56.940 -07:00] [INFO] [unknown:719] ["[region 929] 1900 became follower at term 0"]
[2019/05/01 12:39:56.940 -07:00] [INFO] [unknown:295] ["[region 929] 1900 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:39:56.940 -07:00] [INFO] [unknown:719] ["[region 929] 1900 became follower at term 1"]
[2019/05/01 12:39:56.940 -07:00] [INFO] [unknown:920] ["[region 929] 1900 [term: 1] received a MsgHeartbeat message with higher term from 1149 [term: 8]"]
[2019/05/01 12:39:56.940 -07:00] [INFO] [unknown:719] ["[region 929] 1900 became follower at term 8"]
[2019/05/01 12:39:57.256 -07:00] [INFO] [peer_storage.rs:759] ["requesting snapshot"] [peer_id=1411] [region_id=1347]
[2019/05/01 12:39:57.257 -07:00] [INFO] [snap.rs:757] ["scan snapshot of one cf"] [size=0] [key_count=0] [cf=default] [snapshot=/opt/tidb/data/kv/snap/gen_1347_7_11_(default|lock|write).sst] [region_id=1347]
[2019/05/01 12:39:57.257 -07:00] [INFO] [snap.rs:757] ["scan snapshot of one cf"] [size=0] [key_count=0] [cf=lock] [snapshot=/opt/tidb/data/kv/snap/gen_1347_7_11_(default|lock|write).sst] [region_id=1347]
[2019/05/01 12:39:57.257 -07:00] [INFO] [snap.rs:757] ["scan snapshot of one cf"] [size=192] [key_count=2] [cf=write] [snapshot=/opt/tidb/data/kv/snap/gen_1347_7_11_(default|lock|write).sst] [region_id=1347]
[2019/05/01 12:39:57.258 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 174], lock_version: 408089944964202501, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 174], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:39:57.267 -07:00] [INFO] [snap.rs:875] ["scan snapshot"] [takes=10.8504ms] [size=1487] [key_count=2] [snapshot=/opt/tidb/data/kv/snap/gen_1347_7_11_(default|lock|write).sst] [region_id=1347]
[2019/05/01 12:39:57.283 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 171], lock_version: 408089944885559301, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 171], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:39:57.320 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=1899] [region_id=1220]
[2019/05/01 12:39:57.320 -07:00] [INFO] [unknown:719] ["[region 1220] 1899 became follower at term 0"]
[2019/05/01 12:39:57.320 -07:00] [INFO] [unknown:295] ["[region 1220] 1899 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:39:57.320 -07:00] [INFO] [unknown:719] ["[region 1220] 1899 became follower at term 1"]
[2019/05/01 12:39:57.320 -07:00] [INFO] [unknown:920] ["[region 1220] 1899 [term: 1] received a MsgHeartbeat message with higher term from 1409 [term: 7]"]
[2019/05/01 12:39:57.320 -07:00] [INFO] [unknown:719] ["[region 1220] 1899 became follower at term 7"]
[2019/05/01 12:39:57.338 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 171], lock_version: 408089944885559301, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 171], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:39:57.662 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 173], lock_version: 408089945069060105, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 173], lock_ttl: 3003, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:39:57.825 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 175], lock_version: 408089945108381705, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 176], lock_ttl: 3002, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:39:58.033 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 175], lock_version: 408089945147703307, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 175], lock_ttl: 3002, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:39:58.330 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 176], lock_version: 408089945239453699, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 178], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:39:58.943 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_929_8_12_(default|lock|write).sst] [snap_key=929_8_12]
[2019/05/01 12:39:58.954 -07:00] [INFO] [unknown:1792] ["[region 929] 1900 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 12, term: 8]"]
[2019/05/01 12:39:58.954 -07:00] [INFO] [unknown:1816] ["[region 929] 1900 restored progress of 930 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:39:58.954 -07:00] [INFO] [unknown:1816] ["[region 929] 1900 restored progress of 932 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:39:58.954 -07:00] [INFO] [unknown:1816] ["[region 929] 1900 restored progress of 1149 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:39:58.954 -07:00] [INFO] [unknown:1816] ["[region 929] 1900 restored progress of 1900 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:39:58.954 -07:00] [INFO] [unknown:474] ["[region 929] 1900 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 12, term: 8]"]
[2019/05/01 12:39:58.954 -07:00] [INFO] [unknown:1736] ["[region 929] 1900 [commit: 12] restored snapshot [index: 12, term: 8]"]
[2019/05/01 12:39:58.954 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=1900] [region_id=929]
[2019/05/01 12:39:58.954 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 12, truncated_state: Some(RaftTruncatedState { index: 12, term: 8, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 929, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 97, 255, 112, 105, 95, 255, 100, 105, 115, 97, 98, 255, 108, 101, 255, 95, 114, 111, 119, 108, 111, 255, 99, 255, 107, 0, 0, 0, 0, 0, 0, 249, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 97, 255, 112, 105, 95, 255, 101, 110, 97, 98, 108, 255, 101, 95, 255, 98, 105, 110, 108, 111, 103, 255, 0, 255, 0, 0, 0, 0, 0, 0, 0, 247, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 107, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 930, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 932, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1149, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1900, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1900] [region_id=929]
[2019/05/01 12:39:58.980 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 929] 1900"]
[2019/05/01 12:39:58.980 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 929, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 97, 255, 112, 105, 95, 255, 100, 105, 115, 97, 98, 255, 108, 101, 255, 95, 114, 111, 119, 108, 111, 255, 99, 255, 107, 0, 0, 0, 0, 0, 0, 249, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 97, 255, 112, 105, 95, 255, 101, 110, 97, 98, 108, 255, 101, 95, 255, 98, 105, 110, 108, 111, 103, 255, 0, 255, 0, 0, 0, 0, 0, 0, 0, 247, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 107, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 930, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 932, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1149, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1900, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1900] [region_id=929]
[2019/05/01 12:39:58.980 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=929]
[2019/05/01 12:39:59.014 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=33.824261ms] [region_id=929]
[2019/05/01 12:39:59.259 -07:00] [INFO] [unknown:841] ["New connected subchannel at 0x7f859006cc90 for subchannel 0x7f86404a6a00"]
[2019/05/01 12:39:59.279 -07:00] [INFO] [snap.rs:389] ["sent snapshot"] [duration=21.216681ms] [size=1487] [snap_key=1347_7_11] [region_id=1347]
[2019/05/01 12:39:59.279 -07:00] [INFO] [peer.rs:538] ["report snapshot status"] [status=Finish] [to="Peer { id: 1902, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1411] [region_id=1347]
[2019/05/01 12:39:59.323 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_1220_7_11_(default|lock|write).sst] [snap_key=1220_7_11]
[2019/05/01 12:39:59.329 -07:00] [INFO] [unknown:1792] ["[region 1220] 1899 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 11, term: 7]"]
[2019/05/01 12:39:59.329 -07:00] [INFO] [unknown:1816] ["[region 1220] 1899 restored progress of 1221 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:39:59.329 -07:00] [INFO] [unknown:1816] ["[region 1220] 1899 restored progress of 1223 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:39:59.329 -07:00] [INFO] [unknown:1816] ["[region 1220] 1899 restored progress of 1409 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:39:59.329 -07:00] [INFO] [unknown:1816] ["[region 1220] 1899 restored progress of 1899 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:39:59.329 -07:00] [INFO] [unknown:474] ["[region 1220] 1899 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 11, term: 7]"]
[2019/05/01 12:39:59.329 -07:00] [INFO] [unknown:1736] ["[region 1220] 1899 [commit: 11] restored snapshot [index: 11, term: 7]"]
[2019/05/01 12:39:59.329 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=1899] [region_id=1220]
[2019/05/01 12:39:59.329 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 11, truncated_state: Some(RaftTruncatedState { index: 11, term: 7, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 1220, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 102, 255, 116, 95, 101, 255, 110, 97, 98, 108, 101, 255, 95, 115, 255, 116, 111, 112, 119, 111, 114, 255, 100, 255, 0, 0, 0, 0, 0, 0, 0, 248, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 102, 255, 116, 95, 109, 255, 97, 120, 95, 116, 111, 255, 107, 101, 255, 110, 95, 115, 105, 122, 101, 255, 0, 255, 0, 0, 0, 0, 0, 0, 0, 247, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 157, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1221, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1223, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1409, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1899, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1899] [region_id=1220]
[2019/05/01 12:39:59.343 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 182], lock_version: 408089945501597703, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 182], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:39:59.345 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 1220] 1899"]
[2019/05/01 12:39:59.345 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 1220, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 102, 255, 116, 95, 101, 255, 110, 97, 98, 108, 101, 255, 95, 115, 255, 116, 111, 112, 119, 111, 114, 255, 100, 255, 0, 0, 0, 0, 0, 0, 0, 248, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 102, 255, 116, 95, 109, 255, 97, 120, 95, 116, 111, 255, 107, 101, 255, 110, 95, 115, 105, 122, 101, 255, 0, 255, 0, 0, 0, 0, 0, 0, 0, 247, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 157, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1221, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1223, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1409, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1899, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1899] [region_id=1220]
[2019/05/01 12:39:59.345 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=1220]
[2019/05/01 12:39:59.362 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=16.146862ms] [region_id=1220]
[2019/05/01 12:39:59.521 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 182], lock_version: 408089945540919307, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 182], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:39:59.594 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 181], lock_version: 408089945554026500, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 181], lock_ttl: 3098, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:39:59.598 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 185], lock_version: 408089945580240898, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 185], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:39:59.599 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 181], lock_version: 408089945554026500, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 183], lock_ttl: 3098, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:39:59.675 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 185], lock_version: 408089945580240898, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 185], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:39:59.683 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 182], lock_version: 408089945567133702, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 182], lock_ttl: 3095, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:39:59.689 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 182], lock_version: 408089945567133702, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 182], lock_ttl: 3095, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:39:59.691 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 182], lock_version: 408089945567133702, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 182], lock_ttl: 3095, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:39:59.799 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 182], lock_version: 408089945619562507, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 182], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:39:59.869 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 181], lock_version: 408089945632669707, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 183], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:40:00.006 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 1900, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=13] [term=8] [peer_id=1900] [region_id=929]
[2019/05/01 12:40:00.006 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 9, version: 107, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=1900] [region_id=929]
[2019/05/01 12:40:00.006 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 929, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 97, 255, 112, 105, 95, 255, 100, 105, 115, 97, 98, 255, 108, 101, 255, 95, 114, 111, 119, 108, 111, 255, 99, 255, 107, 0, 0, 0, 0, 0, 0, 249, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 97, 255, 112, 105, 95, 255, 101, 110, 97, 98, 108, 255, 101, 95, 255, 98, 105, 110, 108, 111, 103, 255, 0, 255, 0, 0, 0, 0, 0, 0, 0, 247, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 107, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 930, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 932, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1149, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1900, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1900, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1900] [region_id=929]
[2019/05/01 12:40:00.053 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 930, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=14] [term=8] [peer_id=1900] [region_id=929]
[2019/05/01 12:40:00.053 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 10, version: 107, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=1900] [region_id=929]
[2019/05/01 12:40:00.053 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 929, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 97, 255, 112, 105, 95, 255, 100, 105, 115, 97, 98, 255, 108, 101, 255, 95, 114, 111, 119, 108, 111, 255, 99, 255, 107, 0, 0, 0, 0, 0, 0, 249, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 97, 255, 112, 105, 95, 255, 101, 110, 97, 98, 108, 255, 101, 95, 255, 98, 105, 110, 108, 111, 103, 255, 0, 255, 0, 0, 0, 0, 0, 0, 0, 247, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 10, version: 107, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 930, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 932, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1149, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1900, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 930, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1900] [region_id=929]
[2019/05/01 12:40:00.246 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=1904] [region_id=1162]
[2019/05/01 12:40:00.246 -07:00] [INFO] [unknown:719] ["[region 1162] 1904 became follower at term 0"]
[2019/05/01 12:40:00.246 -07:00] [INFO] [unknown:295] ["[region 1162] 1904 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:40:00.246 -07:00] [INFO] [unknown:719] ["[region 1162] 1904 became follower at term 1"]
[2019/05/01 12:40:00.246 -07:00] [INFO] [unknown:920] ["[region 1162] 1904 [term: 1] received a MsgHeartbeat message with higher term from 1214 [term: 7]"]
[2019/05/01 12:40:00.246 -07:00] [INFO] [unknown:719] ["[region 1162] 1904 became follower at term 7"]
[2019/05/01 12:40:00.259 -07:00] [INFO] [pd.rs:558] ["try to change peer"] [peer="Peer { id: 1902, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [change_type=AddNode] [region_id=1347]
[2019/05/01 12:40:00.259 -07:00] [INFO] [peer.rs:1953] ["propose conf change peer"] [change_peer=1902] [change_type=AddNode] [peer_id=1411] [region_id=1347]
[2019/05/01 12:40:00.299 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 1902, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=12] [term=7] [peer_id=1411] [region_id=1347]
[2019/05/01 12:40:00.299 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 9, version: 177, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=1411] [region_id=1347]
[2019/05/01 12:40:00.299 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 1347, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 109, 255, 105, 114, 114, 255, 111, 114, 101, 100, 95, 255, 108, 111, 255, 103, 95, 103, 114, 111, 117, 255, 112, 255, 115, 0, 0, 0, 0, 0, 0, 249, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 109, 255, 111, 110, 105, 255, 116, 111, 114, 95, 100, 255, 105, 115, 255, 97, 98, 108, 101, 0, 0, 253, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 177, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1348, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1350, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1411, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1902, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1902, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1411] [region_id=1347]
[2019/05/01 12:40:00.307 -07:00] [INFO] [peer.rs:1318] ["notify pd with change peer region"] [region="Region { id: 1347, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 109, 255, 105, 114, 114, 255, 111, 114, 101, 100, 95, 255, 108, 111, 255, 103, 95, 103, 114, 111, 117, 255, 112, 255, 115, 0, 0, 0, 0, 0, 0, 249, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 109, 255, 111, 110, 105, 255, 116, 111, 114, 95, 100, 255, 105, 115, 255, 97, 98, 108, 101, 0, 0, 253, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 10, version: 177, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1348, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1350, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1411, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1902, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1411] [region_id=1347]
[2019/05/01 12:40:00.321 -07:00] [INFO] [pd.rs:558] ["try to change peer"] [peer="Peer { id: 1348, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [change_type=RemoveNode] [region_id=1347]
[2019/05/01 12:40:00.324 -07:00] [INFO] [peer.rs:1953] ["propose conf change peer"] [change_peer=1348] [change_type=RemoveNode] [peer_id=1411] [region_id=1347]
[2019/05/01 12:40:00.361 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 1899, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=12] [term=7] [peer_id=1899] [region_id=1220]
[2019/05/01 12:40:00.361 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 9, version: 157, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=1899] [region_id=1220]
[2019/05/01 12:40:00.361 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 1220, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 102, 255, 116, 95, 101, 255, 110, 97, 98, 108, 101, 255, 95, 115, 255, 116, 111, 112, 119, 111, 114, 255, 100, 255, 0, 0, 0, 0, 0, 0, 0, 248, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 102, 255, 116, 95, 109, 255, 97, 120, 95, 116, 111, 255, 107, 101, 255, 110, 95, 115, 105, 122, 101, 255, 0, 255, 0, 0, 0, 0, 0, 0, 0, 247, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 157, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1221, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1223, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1409, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1899, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1899, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1899] [region_id=1220]
[2019/05/01 12:40:00.361 -07:00] [INFO] [pd.rs:558] ["try to change peer"] [peer="Peer { id: 1348, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [change_type=RemoveNode] [region_id=1347]
[2019/05/01 12:40:00.396 -07:00] [INFO] [peer.rs:1927] ["there is a pending conf change, try later"] [peer_id=1411] [region_id=1347]
[2019/05/01 12:40:00.396 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 1348, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=13] [term=7] [peer_id=1411] [region_id=1347]
[2019/05/01 12:40:00.396 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 10, version: 177, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=1411] [region_id=1347]
[2019/05/01 12:40:00.396 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 1347, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 109, 255, 105, 114, 114, 255, 111, 114, 101, 100, 95, 255, 108, 111, 255, 103, 95, 103, 114, 111, 117, 255, 112, 255, 115, 0, 0, 0, 0, 0, 0, 249, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 109, 255, 111, 110, 105, 255, 116, 111, 114, 95, 100, 255, 105, 115, 255, 97, 98, 108, 101, 0, 0, 253, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 10, version: 177, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1348, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1350, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1411, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1902, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1348, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1411] [region_id=1347]
[2019/05/01 12:40:00.423 -07:00] [INFO] [peer.rs:1318] ["notify pd with change peer region"] [region="Region { id: 1347, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 109, 255, 105, 114, 114, 255, 111, 114, 101, 100, 95, 255, 108, 111, 255, 103, 95, 103, 114, 111, 117, 255, 112, 255, 115, 0, 0, 0, 0, 0, 0, 249, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 109, 255, 111, 110, 105, 255, 116, 111, 114, 95, 100, 255, 105, 115, 255, 97, 98, 108, 101, 0, 0, 253, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 11, version: 177, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1350, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1411, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1902, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1411] [region_id=1347]
[2019/05/01 12:40:00.458 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 1223, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=13] [term=7] [peer_id=1899] [region_id=1220]
[2019/05/01 12:40:00.458 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 10, version: 157, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=1899] [region_id=1220]
[2019/05/01 12:40:00.458 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 1220, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 102, 255, 116, 95, 101, 255, 110, 97, 98, 108, 101, 255, 95, 115, 255, 116, 111, 112, 119, 111, 114, 255, 100, 255, 0, 0, 0, 0, 0, 0, 0, 248, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 102, 255, 116, 95, 109, 255, 97, 120, 95, 116, 111, 255, 107, 101, 255, 110, 95, 115, 105, 122, 101, 255, 0, 255, 0, 0, 0, 0, 0, 0, 0, 247, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 10, version: 157, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1221, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1223, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1409, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1899, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1223, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1899] [region_id=1220]
[2019/05/01 12:40:00.567 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 187], lock_version: 408089945816170501, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 187], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:40:00.567 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 187], lock_version: 408089945816170501, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 187], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:40:00.587 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 183], lock_version: 408089945816170498, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 189], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:40:00.639 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 183], lock_version: 408089945816170498, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 189], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:40:00.729 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 190], lock_version: 408089945868599309, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 190], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:40:00.769 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 186], lock_version: 408089945868599317, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 186], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:40:01.036 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 190], lock_version: 408089945907920901, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 190], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:40:01.441 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 188], lock_version: 408089946025885703, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 189], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:40:01.681 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 189], lock_version: 408089946104528900, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 189], lock_ttl: 3002, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:40:02.251 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_1162_7_11_(default|lock|write).sst] [snap_key=1162_7_11]
[2019/05/01 12:40:02.279 -07:00] [INFO] [unknown:1792] ["[region 1162] 1904 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 11, term: 7]"]
[2019/05/01 12:40:02.287 -07:00] [INFO] [unknown:1816] ["[region 1162] 1904 restored progress of 1163 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:40:02.287 -07:00] [INFO] [unknown:1816] ["[region 1162] 1904 restored progress of 1165 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:40:02.287 -07:00] [INFO] [unknown:1816] ["[region 1162] 1904 restored progress of 1214 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:40:02.287 -07:00] [INFO] [unknown:1816] ["[region 1162] 1904 restored progress of 1904 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:40:02.287 -07:00] [INFO] [unknown:474] ["[region 1162] 1904 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 11, term: 7]"]
[2019/05/01 12:40:02.287 -07:00] [INFO] [unknown:1736] ["[region 1162] 1904 [commit: 11] restored snapshot [index: 11, term: 7]"]
[2019/05/01 12:40:02.287 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=1904] [region_id=1162]
[2019/05/01 12:40:02.287 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 11, truncated_state: Some(RaftTruncatedState { index: 11, term: 7, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 1162, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 102, 255, 108, 117, 115, 255, 104, 95, 108, 111, 103, 255, 95, 97, 255, 116, 95, 116, 114, 120, 95, 255, 99, 255, 111, 109, 109, 105, 116, 0, 0, 253, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 102, 255, 108, 117, 115, 255, 104, 95, 110, 101, 105, 255, 103, 104, 255, 98, 111, 114, 115, 0, 0, 253, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 147, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1163, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1165, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1214, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1904, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1904] [region_id=1162]
[2019/05/01 12:40:02.339 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 1162] 1904"]
[2019/05/01 12:40:02.347 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 1162, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 102, 255, 108, 117, 115, 255, 104, 95, 108, 111, 103, 255, 95, 97, 255, 116, 95, 116, 114, 120, 95, 255, 99, 255, 111, 109, 109, 105, 116, 0, 0, 253, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 102, 255, 108, 117, 115, 255, 104, 95, 110, 101, 105, 255, 103, 104, 255, 98, 111, 114, 115, 0, 0, 253, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 147, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1163, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1165, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1214, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1904, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1904] [region_id=1162]
[2019/05/01 12:40:02.347 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=1162]
[2019/05/01 12:40:02.385 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=37.956739ms] [region_id=1162]
[2019/05/01 12:40:02.472 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 188], lock_version: 408089946301136911, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 193], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:40:02.687 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 192], lock_version: 408089946366672900, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 192], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:40:03.320 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 1904, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=12] [term=7] [peer_id=1904] [region_id=1162]
[2019/05/01 12:40:03.321 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 9, version: 147, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=1904] [region_id=1162]
[2019/05/01 12:40:03.321 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 1162, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 102, 255, 108, 117, 115, 255, 104, 95, 108, 111, 103, 255, 95, 97, 255, 116, 95, 116, 114, 120, 95, 255, 99, 255, 111, 109, 109, 105, 116, 0, 0, 253, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 102, 255, 108, 117, 115, 255, 104, 95, 110, 101, 105, 255, 103, 104, 255, 98, 111, 114, 115, 0, 0, 253, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 147, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1163, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1165, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1214, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1904, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1904, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1904] [region_id=1162]
[2019/05/01 12:40:03.396 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 1165, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=13] [term=7] [peer_id=1904] [region_id=1162]
[2019/05/01 12:40:03.401 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 10, version: 147, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=1904] [region_id=1162]
[2019/05/01 12:40:03.401 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 1162, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 102, 255, 108, 117, 115, 255, 104, 95, 108, 111, 103, 255, 95, 97, 255, 116, 95, 116, 114, 120, 95, 255, 99, 255, 111, 109, 109, 105, 116, 0, 0, 253, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 102, 255, 108, 117, 115, 255, 104, 95, 110, 101, 105, 255, 103, 104, 255, 98, 111, 114, 115, 0, 0, 253, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 10, version: 147, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1163, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1165, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1214, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1904, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1165, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1904] [region_id=1162]
[2019/05/01 12:40:03.483 -07:00] [INFO] [pd.rs:558] ["try to change peer"] [peer="Peer { id: 1947, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [change_type=AddLearnerNode] [region_id=1265]
[2019/05/01 12:40:03.483 -07:00] [INFO] [peer.rs:1953] ["propose conf change peer"] [change_peer=1947] [change_type=AddLearnerNode] [peer_id=1405] [region_id=1265]
[2019/05/01 12:40:03.587 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddLearnerNode, peer: Some(Peer { id: 1947, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=11] [term=7] [peer_id=1405] [region_id=1265]
[2019/05/01 12:40:03.592 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 8, version: 167, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddLearner] [peer_id=1405] [region_id=1265]
[2019/05/01 12:40:03.592 -07:00] [INFO] [apply.rs:1476] ["add learner successfully"] [region="Region { id: 1265, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 105, 255, 111, 95, 99, 255, 97, 112, 97, 99, 105, 255, 116, 121, 255, 0, 0, 0, 0, 0, 0, 249, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 105, 255, 111, 95, 99, 255, 97, 112, 97, 99, 105, 255, 116, 121, 255, 95, 109, 97, 120, 0, 0, 253, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 8, version: 167, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1267, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1268, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1405, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1947, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1405] [region_id=1265]
[2019/05/01 12:40:03.614 -07:00] [INFO] [peer.rs:1318] ["notify pd with change peer region"] [region="Region { id: 1265, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 105, 255, 111, 95, 99, 255, 97, 112, 97, 99, 105, 255, 116, 121, 255, 0, 0, 0, 0, 0, 0, 249, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 105, 255, 111, 95, 99, 255, 97, 112, 97, 99, 105, 255, 116, 121, 255, 95, 109, 97, 120, 0, 0, 253, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 167, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1267, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1268, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1405, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1947, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1405] [region_id=1265]
[2019/05/01 12:40:03.616 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 188], lock_version: 408089946523959297, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 193], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:40:03.675 -07:00] [INFO] [pd.rs:558] ["try to change peer"] [peer="Peer { id: 1948, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [change_type=AddLearnerNode] [region_id=405]
[2019/05/01 12:40:03.675 -07:00] [INFO] [peer.rs:1953] ["propose conf change peer"] [change_peer=1948] [change_type=AddLearnerNode] [peer_id=1263] [region_id=405]
[2019/05/01 12:40:03.684 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 188], lock_version: 408089946523959297, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 193], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:40:03.727 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddLearnerNode, peer: Some(Peer { id: 1948, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=12] [term=8] [peer_id=1263] [region_id=405]
[2019/05/01 12:40:03.727 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 8, version: 47, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddLearner] [peer_id=1263] [region_id=405]
[2019/05/01 12:40:03.727 -07:00] [INFO] [apply.rs:1476] ["add learner successfully"] [region="Region { id: 405, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 99, 104, 97, 114, 255, 97, 99, 116, 101, 255, 114, 95, 115, 255, 101, 116, 115, 95, 100, 255, 105, 114, 255, 0, 0, 0, 0, 0, 0, 249, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 99, 104, 101, 99, 255, 107, 95, 112, 114, 255, 111, 120, 121, 255, 95, 117, 115, 101, 114, 255, 115, 0, 255, 0, 0, 0, 0, 0, 0, 248, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 8, version: 47, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 406, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 407, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1263, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1948, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1263] [region_id=405]
[2019/05/01 12:40:03.735 -07:00] [INFO] [peer.rs:1318] ["notify pd with change peer region"] [region="Region { id: 405, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 99, 104, 97, 114, 255, 97, 99, 116, 101, 255, 114, 95, 115, 255, 101, 116, 115, 95, 100, 255, 105, 114, 255, 0, 0, 0, 0, 0, 0, 249, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 99, 104, 101, 99, 255, 107, 95, 112, 114, 255, 111, 120, 121, 255, 95, 117, 115, 101, 114, 255, 115, 0, 255, 0, 0, 0, 0, 0, 0, 248, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 47, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 406, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 407, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1263, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1948, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1263] [region_id=405]
[2019/05/01 12:40:03.821 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 191], lock_version: 408089946655031299, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 195], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:40:03.841 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 191], lock_version: 408089946655031299, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 191], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:40:03.916 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 187], lock_version: 408089946707460106, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 191], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:40:04.160 -07:00] [INFO] [peer_storage.rs:759] ["requesting snapshot"] [peer_id=1263] [region_id=405]
[2019/05/01 12:40:04.161 -07:00] [INFO] [snap.rs:757] ["scan snapshot of one cf"] [size=0] [key_count=0] [cf=default] [snapshot=/opt/tidb/data/kv/snap/gen_405_8_12_(default|lock|write).sst] [region_id=405]
[2019/05/01 12:40:04.161 -07:00] [INFO] [snap.rs:757] ["scan snapshot of one cf"] [size=0] [key_count=0] [cf=lock] [snapshot=/opt/tidb/data/kv/snap/gen_405_8_12_(default|lock|write).sst] [region_id=405]
[2019/05/01 12:40:04.161 -07:00] [INFO] [snap.rs:757] ["scan snapshot of one cf"] [size=156] [key_count=2] [cf=write] [snapshot=/opt/tidb/data/kv/snap/gen_405_8_12_(default|lock|write).sst] [region_id=405]
[2019/05/01 12:40:04.175 -07:00] [INFO] [snap.rs:875] ["scan snapshot"] [takes=13.926953ms] [size=1414] [key_count=2] [snapshot=/opt/tidb/data/kv/snap/gen_405_8_12_(default|lock|write).sst] [region_id=405]
[2019/05/01 12:40:04.190 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 194], lock_version: 408089946746781702, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 194], lock_ttl: 3002, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:40:04.275 -07:00] [INFO] [peer_storage.rs:759] ["requesting snapshot"] [peer_id=1405] [region_id=1265]
[2019/05/01 12:40:04.275 -07:00] [INFO] [snap.rs:757] ["scan snapshot of one cf"] [size=0] [key_count=0] [cf=default] [snapshot=/opt/tidb/data/kv/snap/gen_1265_7_11_(default|lock|write).sst] [region_id=1265]
[2019/05/01 12:40:04.276 -07:00] [INFO] [snap.rs:757] ["scan snapshot of one cf"] [size=0] [key_count=0] [cf=lock] [snapshot=/opt/tidb/data/kv/snap/gen_1265_7_11_(default|lock|write).sst] [region_id=1265]
[2019/05/01 12:40:04.276 -07:00] [INFO] [snap.rs:757] ["scan snapshot of one cf"] [size=156] [key_count=2] [cf=write] [snapshot=/opt/tidb/data/kv/snap/gen_1265_7_11_(default|lock|write).sst] [region_id=1265]
[2019/05/01 12:40:04.290 -07:00] [INFO] [snap.rs:875] ["scan snapshot"] [takes=14.444693ms] [size=1414] [key_count=2] [snapshot=/opt/tidb/data/kv/snap/gen_1265_7_11_(default|lock|write).sst] [region_id=1265]
[2019/05/01 12:40:04.514 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 197], lock_version: 408089946864746498, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 197], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:40:04.636 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 195], lock_version: 408089946877853701, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 195], lock_ttl: 3059, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:40:04.728 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 194], lock_version: 408089946917175305, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 194], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:40:04.819 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 193], lock_version: 408089946956496897, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 195], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:40:04.884 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 196], lock_version: 408089946969604101, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 196], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:40:04.972 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 200], lock_version: 408089946982711304, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 200], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:40:05.263 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddLearnerNode, peer: Some(Peer { id: 1949, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=10] [term=6] [peer_id=1098] [region_id=1015]
[2019/05/01 12:40:05.263 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 8, version: 117, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddLearner] [peer_id=1098] [region_id=1015]
[2019/05/01 12:40:05.263 -07:00] [INFO] [apply.rs:1476] ["add learner successfully"] [region="Region { id: 1015, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 97, 255, 117, 116, 111, 255, 101, 120, 116, 101, 110, 255, 100, 95, 255, 105, 110, 99, 114, 101, 109, 255, 101, 255, 110, 116, 0, 0, 0, 0, 0, 250, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 97, 255, 117, 116, 111, 255, 105, 110, 99, 95, 108, 255, 111, 99, 255, 107, 95, 109, 111, 100, 101, 255, 0, 255, 0, 0, 0, 0, 0, 0, 0, 247, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 8, version: 117, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1016, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1017, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1098, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1949, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1098] [region_id=1015]
[2019/05/01 12:40:05.508 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 201], lock_version: 408089947100676102, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 201], lock_ttl: 3002, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:40:05.558 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 201], lock_version: 408089947100676102, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 201], lock_ttl: 3002, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:40:05.583 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 201], lock_version: 408089947100676102, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 201], lock_ttl: 3002, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:40:05.588 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 201], lock_version: 408089947100676102, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 201], lock_ttl: 3002, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:40:05.615 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 199], lock_version: 408089947139997698, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 199], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:40:05.685 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 202], lock_version: 408089947166212105, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 202], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:40:06.163 -07:00] [INFO] [unknown:841] ["New connected subchannel at 0x7f858fb3a1b0 for subchannel 0x7f86404a6c00"]
[2019/05/01 12:40:06.175 -07:00] [INFO] [snap.rs:389] ["sent snapshot"] [duration=12.995455ms] [size=1414] [snap_key=405_8_12] [region_id=405]
[2019/05/01 12:40:06.175 -07:00] [INFO] [peer.rs:538] ["report snapshot status"] [status=Finish] [to="Peer { id: 1948, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1263] [region_id=405]
[2019/05/01 12:40:06.272 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 200], lock_version: 408089947310391299, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 200], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:40:06.278 -07:00] [INFO] [unknown:841] ["New connected subchannel at 0x7f858f661110 for subchannel 0x7f86404a6e00"]
[2019/05/01 12:40:06.278 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=1950] [region_id=680]
[2019/05/01 12:40:06.278 -07:00] [INFO] [unknown:719] ["[region 680] 1950 became follower at term 0"]
[2019/05/01 12:40:06.278 -07:00] [INFO] [unknown:295] ["[region 680] 1950 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:40:06.278 -07:00] [INFO] [unknown:719] ["[region 680] 1950 became follower at term 1"]
[2019/05/01 12:40:06.278 -07:00] [INFO] [unknown:920] ["[region 680] 1950 [term: 1] received a MsgHeartbeat message with higher term from 681 [term: 6]"]
[2019/05/01 12:40:06.278 -07:00] [INFO] [unknown:719] ["[region 680] 1950 became follower at term 6"]
[2019/05/01 12:40:06.287 -07:00] [INFO] [snap.rs:389] ["sent snapshot"] [duration=9.934682ms] [size=1414] [snap_key=1265_7_11] [region_id=1265]
[2019/05/01 12:40:06.287 -07:00] [INFO] [peer.rs:538] ["report snapshot status"] [status=Finish] [to="Peer { id: 1947, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1405] [region_id=1265]
[2019/05/01 12:40:06.365 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 198], lock_version: 408089947336605702, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 198], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:40:06.365 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 198], lock_version: 408089947336605702, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 199], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:40:06.380 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 200], lock_version: 408089947336605703, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 200], lock_ttl: 3088, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:40:06.488 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 198], lock_version: 408089947375927311, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 203], lock_ttl: 3002, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:40:06.719 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 206], lock_version: 408089947441463302, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 206], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:40:06.925 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 204], lock_version: 408089947493892108, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 204], lock_ttl: 3002, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:40:06.994 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 206], lock_version: 408089947493892102, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 206], lock_ttl: 3072, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:40:07.008 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 206], lock_version: 408089947493892102, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 206], lock_ttl: 3072, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:40:07.117 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 204], lock_version: 408089947546320898, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 206], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:40:07.132 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 204], lock_version: 408089947546320898, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 207], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:40:07.163 -07:00] [INFO] [pd.rs:558] ["try to change peer"] [peer="Peer { id: 1948, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [change_type=AddNode] [region_id=405]
[2019/05/01 12:40:07.163 -07:00] [INFO] [peer.rs:1953] ["propose conf change peer"] [change_peer=1948] [change_type=AddNode] [peer_id=1263] [region_id=405]
[2019/05/01 12:40:07.194 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 1948, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=13] [term=8] [peer_id=1263] [region_id=405]
[2019/05/01 12:40:07.194 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 9, version: 47, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=1263] [region_id=405]
[2019/05/01 12:40:07.194 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 405, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 99, 104, 97, 114, 255, 97, 99, 116, 101, 255, 114, 95, 115, 255, 101, 116, 115, 95, 100, 255, 105, 114, 255, 0, 0, 0, 0, 0, 0, 249, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 99, 104, 101, 99, 255, 107, 95, 112, 114, 255, 111, 120, 121, 255, 95, 117, 115, 101, 114, 255, 115, 0, 255, 0, 0, 0, 0, 0, 0, 248, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 47, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 406, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 407, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1263, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1948, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1948, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1263] [region_id=405]
[2019/05/01 12:40:07.210 -07:00] [INFO] [peer.rs:1318] ["notify pd with change peer region"] [region="Region { id: 405, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 99, 104, 97, 114, 255, 97, 99, 116, 101, 255, 114, 95, 115, 255, 101, 116, 115, 95, 100, 255, 105, 114, 255, 0, 0, 0, 0, 0, 0, 249, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 99, 104, 101, 99, 255, 107, 95, 112, 114, 255, 111, 120, 121, 255, 95, 117, 115, 101, 114, 255, 115, 0, 255, 0, 0, 0, 0, 0, 0, 248, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 10, version: 47, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 406, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 407, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1263, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1948, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1263] [region_id=405]
[2019/05/01 12:40:07.218 -07:00] [INFO] [pd.rs:558] ["try to change peer"] [peer="Peer { id: 407, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [change_type=RemoveNode] [region_id=405]
[2019/05/01 12:40:07.218 -07:00] [INFO] [peer.rs:1953] ["propose conf change peer"] [change_peer=407] [change_type=RemoveNode] [peer_id=1263] [region_id=405]
[2019/05/01 12:40:07.235 -07:00] [INFO] [pd.rs:558] ["try to change peer"] [peer="Peer { id: 407, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [change_type=RemoveNode] [region_id=405]
[2019/05/01 12:40:07.261 -07:00] [INFO] [peer.rs:1927] ["there is a pending conf change, try later"] [peer_id=1263] [region_id=405]
[2019/05/01 12:40:07.261 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 407, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=14] [term=8] [peer_id=1263] [region_id=405]
[2019/05/01 12:40:07.261 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 10, version: 47, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=1263] [region_id=405]
[2019/05/01 12:40:07.261 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 405, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 99, 104, 97, 114, 255, 97, 99, 116, 101, 255, 114, 95, 115, 255, 101, 116, 115, 95, 100, 255, 105, 114, 255, 0, 0, 0, 0, 0, 0, 249, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 99, 104, 101, 99, 255, 107, 95, 112, 114, 255, 111, 120, 121, 255, 95, 117, 115, 101, 114, 255, 115, 0, 255, 0, 0, 0, 0, 0, 0, 248, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 10, version: 47, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 406, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 407, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1263, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1948, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 407, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1263] [region_id=405]
[2019/05/01 12:40:07.284 -07:00] [INFO] [pd.rs:558] ["try to change peer"] [peer="Peer { id: 1947, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [change_type=AddNode] [region_id=1265]
[2019/05/01 12:40:07.284 -07:00] [INFO] [peer.rs:1953] ["propose conf change peer"] [change_peer=1947] [change_type=AddNode] [peer_id=1405] [region_id=1265]
[2019/05/01 12:40:07.305 -07:00] [INFO] [peer.rs:1318] ["notify pd with change peer region"] [region="Region { id: 405, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 99, 104, 97, 114, 255, 97, 99, 116, 101, 255, 114, 95, 115, 255, 101, 116, 115, 95, 100, 255, 105, 114, 255, 0, 0, 0, 0, 0, 0, 249, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 99, 104, 101, 99, 255, 107, 95, 112, 114, 255, 111, 120, 121, 255, 95, 117, 115, 101, 114, 255, 115, 0, 255, 0, 0, 0, 0, 0, 0, 248, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 11, version: 47, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 406, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1263, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1948, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1263] [region_id=405]
[2019/05/01 12:40:07.320 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 207], lock_version: 408089947572535298, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 207], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:40:07.326 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 1947, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=12] [term=7] [peer_id=1405] [region_id=1265]
[2019/05/01 12:40:07.326 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 9, version: 167, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=1405] [region_id=1265]
[2019/05/01 12:40:07.326 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 1265, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 105, 255, 111, 95, 99, 255, 97, 112, 97, 99, 105, 255, 116, 121, 255, 0, 0, 0, 0, 0, 0, 249, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 105, 255, 111, 95, 99, 255, 97, 112, 97, 99, 105, 255, 116, 121, 255, 95, 109, 97, 120, 0, 0, 253, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 167, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1267, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1268, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1405, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1947, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1947, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1405] [region_id=1265]
[2019/05/01 12:40:07.343 -07:00] [INFO] [peer.rs:1318] ["notify pd with change peer region"] [region="Region { id: 1265, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 105, 255, 111, 95, 99, 255, 97, 112, 97, 99, 105, 255, 116, 121, 255, 0, 0, 0, 0, 0, 0, 249, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 105, 255, 111, 95, 99, 255, 97, 112, 97, 99, 105, 255, 116, 121, 255, 95, 109, 97, 120, 0, 0, 253, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 10, version: 167, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1267, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1268, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1405, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1947, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1405] [region_id=1265]
[2019/05/01 12:40:07.360 -07:00] [INFO] [pd.rs:558] ["try to change peer"] [peer="Peer { id: 1267, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [change_type=RemoveNode] [region_id=1265]
[2019/05/01 12:40:07.360 -07:00] [INFO] [peer.rs:1953] ["propose conf change peer"] [change_peer=1267] [change_type=RemoveNode] [peer_id=1405] [region_id=1265]
[2019/05/01 12:40:07.379 -07:00] [INFO] [pd.rs:558] ["try to change peer"] [peer="Peer { id: 1267, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [change_type=RemoveNode] [region_id=1265]
[2019/05/01 12:40:07.399 -07:00] [INFO] [peer.rs:1927] ["there is a pending conf change, try later"] [peer_id=1405] [region_id=1265]
[2019/05/01 12:40:07.399 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 1267, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=13] [term=7] [peer_id=1405] [region_id=1265]
[2019/05/01 12:40:07.399 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 10, version: 167, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=1405] [region_id=1265]
[2019/05/01 12:40:07.399 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 1265, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 105, 255, 111, 95, 99, 255, 97, 112, 97, 99, 105, 255, 116, 121, 255, 0, 0, 0, 0, 0, 0, 249, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 105, 255, 111, 95, 99, 255, 97, 112, 97, 99, 105, 255, 116, 121, 255, 95, 109, 97, 120, 0, 0, 253, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 10, version: 167, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1267, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1268, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1405, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1947, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1267, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1405] [region_id=1265]
[2019/05/01 12:40:07.425 -07:00] [INFO] [peer.rs:1318] ["notify pd with change peer region"] [region="Region { id: 1265, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 105, 255, 111, 95, 99, 255, 97, 112, 97, 99, 105, 255, 116, 121, 255, 0, 0, 0, 0, 0, 0, 249, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 105, 255, 111, 95, 99, 255, 97, 112, 97, 99, 105, 255, 116, 121, 255, 95, 109, 97, 120, 0, 0, 253, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 11, version: 167, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1268, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1405, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1947, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1405] [region_id=1265]
[2019/05/01 12:40:07.793 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 211], lock_version: 408089947729821700, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 211], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:40:07.847 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 209], lock_version: 408089947742928912, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 209], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:40:07.964 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 210], lock_version: 408089947756036101, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 210], lock_ttl: 3053, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:40:08.180 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 209], lock_version: 408089947821572098, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 209], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:40:08.254 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=1952] [region_id=1396]
[2019/05/01 12:40:08.254 -07:00] [INFO] [unknown:719] ["[region 1396] 1952 became follower at term 0"]
[2019/05/01 12:40:08.254 -07:00] [INFO] [unknown:295] ["[region 1396] 1952 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:40:08.254 -07:00] [INFO] [unknown:719] ["[region 1396] 1952 became follower at term 1"]
[2019/05/01 12:40:08.254 -07:00] [INFO] [unknown:920] ["[region 1396] 1952 [term: 1] received a MsgHeartbeat message with higher term from 1602 [term: 7]"]
[2019/05/01 12:40:08.254 -07:00] [INFO] [unknown:719] ["[region 1396] 1952 became follower at term 7"]
[2019/05/01 12:40:08.280 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=1951] [region_id=1529]
[2019/05/01 12:40:08.280 -07:00] [INFO] [unknown:719] ["[region 1529] 1951 became follower at term 0"]
[2019/05/01 12:40:08.280 -07:00] [INFO] [unknown:295] ["[region 1529] 1951 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:40:08.280 -07:00] [INFO] [unknown:719] ["[region 1529] 1951 became follower at term 1"]
[2019/05/01 12:40:08.280 -07:00] [INFO] [unknown:920] ["[region 1529] 1951 [term: 1] received a MsgHeartbeat message with higher term from 1532 [term: 6]"]
[2019/05/01 12:40:08.280 -07:00] [INFO] [unknown:719] ["[region 1529] 1951 became follower at term 6"]
[2019/05/01 12:40:08.281 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_680_6_7_(default|lock|write).sst] [snap_key=680_6_7]
[2019/05/01 12:40:08.290 -07:00] [INFO] [unknown:1792] ["[region 680] 1950 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 7, term: 6]"]
[2019/05/01 12:40:08.290 -07:00] [INFO] [unknown:1816] ["[region 680] 1950 restored progress of 681 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:40:08.290 -07:00] [INFO] [unknown:1816] ["[region 680] 1950 restored progress of 682 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:40:08.290 -07:00] [INFO] [unknown:1816] ["[region 680] 1950 restored progress of 683 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:40:08.290 -07:00] [INFO] [unknown:1816] ["[region 680] 1950 restored progress of 1950 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:40:08.290 -07:00] [INFO] [unknown:474] ["[region 680] 1950 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 7, term: 6]"]
[2019/05/01 12:40:08.290 -07:00] [INFO] [unknown:1736] ["[region 680] 1950 [commit: 7] restored snapshot [index: 7, term: 6]"]
[2019/05/01 12:40:08.290 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=1950] [region_id=680]
[2019/05/01 12:40:08.290 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 7, truncated_state: Some(RaftTruncatedState { index: 7, term: 6, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 680, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 103, 114, 111, 117, 255, 112, 95, 99, 111, 255, 110, 99, 97, 255, 116, 95, 109, 97, 120, 255, 95, 108, 255, 101, 110, 0, 0, 0, 0, 251, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 103, 116, 105, 100, 255, 95, 101, 120, 101, 255, 99, 117, 116, 255, 101, 100, 95, 99, 111, 255, 109, 112, 255, 114, 101, 115, 115, 105, 111, 255, 110, 255, 95, 112, 101, 114, 105, 111, 100, 255, 255, 0, 0, 0, 0, 0, 0, 0, 0, 255, 247, 0, 0, 0, 0, 0, 0, 0, 248], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 87, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 681, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 682, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 683, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1950, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1950] [region_id=680]
[2019/05/01 12:40:08.306 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 680] 1950"]
[2019/05/01 12:40:08.306 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 680, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 103, 114, 111, 117, 255, 112, 95, 99, 111, 255, 110, 99, 97, 255, 116, 95, 109, 97, 120, 255, 95, 108, 255, 101, 110, 0, 0, 0, 0, 251, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 103, 116, 105, 100, 255, 95, 101, 120, 101, 255, 99, 117, 116, 255, 101, 100, 95, 99, 111, 255, 109, 112, 255, 114, 101, 115, 115, 105, 111, 255, 110, 255, 95, 112, 101, 114, 105, 111, 100, 255, 255, 0, 0, 0, 0, 0, 0, 0, 0, 255, 247, 0, 0, 0, 0, 0, 0, 0, 248], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 87, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 681, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 682, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 683, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1950, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1950] [region_id=680]
[2019/05/01 12:40:08.306 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=680]
[2019/05/01 12:40:08.322 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=15.49853ms] [region_id=680]
[2019/05/01 12:40:08.489 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 211], lock_version: 408089947900215309, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 211], lock_ttl: 3003, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:40:08.744 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 211], lock_version: 408089947952644106, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 211], lock_ttl: 3002, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:40:08.821 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 215], lock_version: 408089947991965706, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 215], lock_ttl: 3003, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:40:08.876 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 215], lock_version: 408089947991965706, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 215], lock_ttl: 3003, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:40:09.043 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 213], lock_version: 408089948005072901, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 213], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:40:09.052 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 1949, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=11] [term=6] [peer_id=1098] [region_id=1015]
[2019/05/01 12:40:09.062 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 9, version: 117, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=1098] [region_id=1015]
[2019/05/01 12:40:09.062 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 1015, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 97, 255, 117, 116, 111, 255, 101, 120, 116, 101, 110, 255, 100, 95, 255, 105, 110, 99, 114, 101, 109, 255, 101, 255, 110, 116, 0, 0, 0, 0, 0, 250, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 97, 255, 117, 116, 111, 255, 105, 110, 99, 95, 108, 255, 111, 99, 255, 107, 95, 109, 111, 100, 101, 255, 0, 255, 0, 0, 0, 0, 0, 0, 0, 247, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 117, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1016, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1017, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1098, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1949, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1949, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1098] [region_id=1015]
[2019/05/01 12:40:09.129 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 213], lock_version: 408089948005072901, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 213], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:40:09.161 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 1017, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=12] [term=6] [peer_id=1098] [region_id=1015]
[2019/05/01 12:40:09.161 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 10, version: 117, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=1098] [region_id=1015]
[2019/05/01 12:40:09.161 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 1015, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 97, 255, 117, 116, 111, 255, 101, 120, 116, 101, 110, 255, 100, 95, 255, 105, 110, 99, 114, 101, 109, 255, 101, 255, 110, 116, 0, 0, 0, 0, 0, 250, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 97, 255, 117, 116, 111, 255, 105, 110, 99, 95, 108, 255, 111, 99, 255, 107, 95, 109, 111, 100, 101, 255, 0, 255, 0, 0, 0, 0, 0, 0, 0, 247, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 10, version: 117, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1016, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1017, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1098, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1949, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1017, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1098] [region_id=1015]
[2019/05/01 12:40:09.358 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 1950, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=8] [term=6] [peer_id=1950] [region_id=680]
[2019/05/01 12:40:09.358 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 6, version: 87, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=1950] [region_id=680]
[2019/05/01 12:40:09.358 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 680, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 103, 114, 111, 117, 255, 112, 95, 99, 111, 255, 110, 99, 97, 255, 116, 95, 109, 97, 120, 255, 95, 108, 255, 101, 110, 0, 0, 0, 0, 251, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 103, 116, 105, 100, 255, 95, 101, 120, 101, 255, 99, 117, 116, 255, 101, 100, 95, 99, 111, 255, 109, 112, 255, 114, 101, 115, 115, 105, 111, 255, 110, 255, 95, 112, 101, 114, 105, 111, 100, 255, 255, 0, 0, 0, 0, 0, 0, 0, 0, 255, 247, 0, 0, 0, 0, 0, 0, 0, 248], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 87, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 681, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 682, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 683, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1950, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1950, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1950] [region_id=680]
[2019/05/01 12:40:09.454 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 683, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=9] [term=6] [peer_id=1950] [region_id=680]
[2019/05/01 12:40:09.454 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 7, version: 87, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=1950] [region_id=680]
[2019/05/01 12:40:09.454 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 680, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 103, 114, 111, 117, 255, 112, 95, 99, 111, 255, 110, 99, 97, 255, 116, 95, 109, 97, 120, 255, 95, 108, 255, 101, 110, 0, 0, 0, 0, 251, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 103, 116, 105, 100, 255, 95, 101, 120, 101, 255, 99, 117, 116, 255, 101, 100, 95, 99, 111, 255, 109, 112, 255, 114, 101, 115, 115, 105, 111, 255, 110, 255, 95, 112, 101, 114, 105, 111, 100, 255, 255, 0, 0, 0, 0, 0, 0, 0, 0, 255, 247, 0, 0, 0, 0, 0, 0, 0, 248], region_epoch: Some(RegionEpoch { conf_ver: 7, version: 87, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 681, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 682, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 683, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1950, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 683, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1950] [region_id=680]
[2019/05/01 12:40:10.257 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_1396_7_11_(default|lock|write).sst] [snap_key=1396_7_11]
[2019/05/01 12:40:10.275 -07:00] [INFO] [unknown:1792] ["[region 1396] 1952 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 11, term: 7]"]
[2019/05/01 12:40:10.275 -07:00] [INFO] [unknown:1816] ["[region 1396] 1952 restored progress of 1397 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:40:10.275 -07:00] [INFO] [unknown:1816] ["[region 1396] 1952 restored progress of 1399 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:40:10.275 -07:00] [INFO] [unknown:1816] ["[region 1396] 1952 restored progress of 1602 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:40:10.275 -07:00] [INFO] [unknown:1816] ["[region 1396] 1952 restored progress of 1952 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:40:10.275 -07:00] [INFO] [unknown:474] ["[region 1396] 1952 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 11, term: 7]"]
[2019/05/01 12:40:10.275 -07:00] [INFO] [unknown:1736] ["[region 1396] 1952 [commit: 11] restored snapshot [index: 11, term: 7]"]
[2019/05/01 12:40:10.275 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=1952] [region_id=1396]
[2019/05/01 12:40:10.275 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 11, truncated_state: Some(RaftTruncatedState { index: 11, term: 7, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 1396, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 112, 255, 97, 103, 101, 255, 95, 115, 105, 122, 101, 255, 0, 0, 255, 0, 0, 0, 0, 0, 0, 247, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 112, 255, 114, 105, 110, 255, 116, 95, 97, 108, 108, 255, 95, 100, 255, 101, 97, 100, 108, 111, 99, 255, 107, 255, 115, 0, 0, 0, 0, 0, 0, 249, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 187, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1397, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1399, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1602, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1952, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1952] [region_id=1396]
[2019/05/01 12:40:10.310 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_1529_6_7_(default|lock|write).sst] [snap_key=1529_6_7]
[2019/05/01 12:40:10.318 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 1396] 1952"]
[2019/05/01 12:40:10.319 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=1396]
[2019/05/01 12:40:10.319 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 1396, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 112, 255, 97, 103, 101, 255, 95, 115, 105, 122, 101, 255, 0, 0, 255, 0, 0, 0, 0, 0, 0, 247, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 112, 255, 114, 105, 110, 255, 116, 95, 97, 108, 108, 255, 95, 100, 255, 101, 97, 100, 108, 111, 99, 255, 107, 255, 115, 0, 0, 0, 0, 0, 0, 249, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 187, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1397, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1399, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1602, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1952, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1952] [region_id=1396]
[2019/05/01 12:40:10.331 -07:00] [INFO] [unknown:1792] ["[region 1529] 1951 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 7, term: 6]"]
[2019/05/01 12:40:10.331 -07:00] [INFO] [unknown:1816] ["[region 1529] 1951 restored progress of 1530 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:40:10.331 -07:00] [INFO] [unknown:1816] ["[region 1529] 1951 restored progress of 1531 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:40:10.331 -07:00] [INFO] [unknown:1816] ["[region 1529] 1951 restored progress of 1532 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:40:10.331 -07:00] [INFO] [unknown:1816] ["[region 1529] 1951 restored progress of 1951 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:40:10.331 -07:00] [INFO] [unknown:474] ["[region 1529] 1951 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 7, term: 6]"]
[2019/05/01 12:40:10.331 -07:00] [INFO] [unknown:1736] ["[region 1529] 1951 [commit: 7] restored snapshot [index: 7, term: 6]"]
[2019/05/01 12:40:10.331 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=1951] [region_id=1529]
[2019/05/01 12:40:10.331 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 7, truncated_state: Some(RaftTruncatedState { index: 7, term: 6, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 1529, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 115, 255, 121, 110, 99, 255, 95, 115, 112, 105, 110, 255, 95, 108, 255, 111, 111, 112, 115, 0, 0, 253, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 116, 255, 97, 98, 108, 255, 101, 95, 108, 111, 99, 255, 107, 115, 255, 0, 0, 0, 0, 0, 0, 249, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 217, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1530, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1531, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1532, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1951, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1951] [region_id=1529]
[2019/05/01 12:40:10.376 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=57.077415ms] [region_id=1396]
[2019/05/01 12:40:10.391 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 1529, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 115, 255, 121, 110, 99, 255, 95, 115, 112, 105, 110, 255, 95, 108, 255, 111, 111, 112, 115, 0, 0, 253, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 116, 255, 97, 98, 108, 255, 101, 95, 108, 111, 99, 255, 107, 115, 255, 0, 0, 0, 0, 0, 0, 249, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 217, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1530, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1531, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1532, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1951, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1951] [region_id=1529]
[2019/05/01 12:40:10.391 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 1529] 1951"]
[2019/05/01 12:40:10.391 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=1529]
[2019/05/01 12:40:10.391 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=1953] [region_id=933]
[2019/05/01 12:40:10.392 -07:00] [INFO] [unknown:719] ["[region 933] 1953 became follower at term 0"]
[2019/05/01 12:40:10.392 -07:00] [INFO] [unknown:295] ["[region 933] 1953 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:40:10.392 -07:00] [INFO] [unknown:719] ["[region 933] 1953 became follower at term 1"]
[2019/05/01 12:40:10.392 -07:00] [INFO] [unknown:920] ["[region 933] 1953 [term: 1] received a MsgHeartbeat message with higher term from 934 [term: 6]"]
[2019/05/01 12:40:10.392 -07:00] [INFO] [unknown:719] ["[region 933] 1953 became follower at term 6"]
[2019/05/01 12:40:10.436 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=44.416484ms] [region_id=1529]
[2019/05/01 12:40:10.555 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 215], lock_version: 408089948411396106, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 217], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:40:10.616 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 215], lock_version: 408089948411396106, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 217], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:40:11.346 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 1952, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=12] [term=7] [peer_id=1952] [region_id=1396]
[2019/05/01 12:40:11.346 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 9, version: 187, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=1952] [region_id=1396]
[2019/05/01 12:40:11.346 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 1396, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 112, 255, 97, 103, 101, 255, 95, 115, 105, 122, 101, 255, 0, 0, 255, 0, 0, 0, 0, 0, 0, 247, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 112, 255, 114, 105, 110, 255, 116, 95, 97, 108, 108, 255, 95, 100, 255, 101, 97, 100, 108, 111, 99, 255, 107, 255, 115, 0, 0, 0, 0, 0, 0, 249, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 187, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1397, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1399, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1602, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1952, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1952, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1952] [region_id=1396]
[2019/05/01 12:40:11.388 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 1951, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=8] [term=6] [peer_id=1951] [region_id=1529]
[2019/05/01 12:40:11.388 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 6, version: 217, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=1951] [region_id=1529]
[2019/05/01 12:40:11.388 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 1529, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 115, 255, 121, 110, 99, 255, 95, 115, 112, 105, 110, 255, 95, 108, 255, 111, 111, 112, 115, 0, 0, 253, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 116, 255, 97, 98, 108, 255, 101, 95, 108, 111, 99, 255, 107, 115, 255, 0, 0, 0, 0, 0, 0, 249, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 217, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1530, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1531, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1532, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1951, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1951, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1951] [region_id=1529]
[2019/05/01 12:40:11.504 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 1399, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=13] [term=7] [peer_id=1952] [region_id=1396]
[2019/05/01 12:40:11.504 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 10, version: 187, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=1952] [region_id=1396]
[2019/05/01 12:40:11.504 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 1396, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 112, 255, 97, 103, 101, 255, 95, 115, 105, 122, 101, 255, 0, 0, 255, 0, 0, 0, 0, 0, 0, 247, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 112, 255, 114, 105, 110, 255, 116, 95, 97, 108, 108, 255, 95, 100, 255, 101, 97, 100, 108, 111, 99, 255, 107, 255, 115, 0, 0, 0, 0, 0, 0, 249, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 10, version: 187, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1397, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1399, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1602, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1952, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1399, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1952] [region_id=1396]
[2019/05/01 12:40:11.523 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 1530, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=9] [term=6] [peer_id=1951] [region_id=1529]
[2019/05/01 12:40:11.523 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 7, version: 217, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=1951] [region_id=1529]
[2019/05/01 12:40:11.523 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 1529, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 115, 255, 121, 110, 99, 255, 95, 115, 112, 105, 110, 255, 95, 108, 255, 111, 111, 112, 115, 0, 0, 253, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 116, 255, 97, 98, 108, 255, 101, 95, 108, 111, 99, 255, 107, 115, 255, 0, 0, 0, 0, 0, 0, 249, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 7, version: 217, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1530, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1531, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1532, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1951, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1530, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1951] [region_id=1529]
[2019/05/01 12:40:11.701 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 219], lock_version: 408089948725968904, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 219], lock_ttl: 3058, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:40:11.831 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 217], lock_version: 408089948765290503, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 219], lock_ttl: 3068, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:40:11.974 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 214], lock_version: 408089948778397706, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 221], lock_ttl: 3080, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:40:12.172 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=1955] [region_id=1413]
[2019/05/01 12:40:12.172 -07:00] [INFO] [unknown:719] ["[region 1413] 1955 became follower at term 0"]
[2019/05/01 12:40:12.172 -07:00] [INFO] [unknown:295] ["[region 1413] 1955 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:40:12.172 -07:00] [INFO] [unknown:719] ["[region 1413] 1955 became follower at term 1"]
[2019/05/01 12:40:12.172 -07:00] [INFO] [unknown:920] ["[region 1413] 1955 [term: 1] received a MsgHeartbeat message with higher term from 1416 [term: 6]"]
[2019/05/01 12:40:12.172 -07:00] [INFO] [unknown:719] ["[region 1413] 1955 became follower at term 6"]
[2019/05/01 12:40:12.331 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 220], lock_version: 408089948817719305, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 220], lock_ttl: 3103, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:40:12.389 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_933_6_7_(default|lock|write).sst] [snap_key=933_6_7]
[2019/05/01 12:40:12.398 -07:00] [INFO] [unknown:1792] ["[region 933] 1953 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 7, term: 6]"]
[2019/05/01 12:40:12.398 -07:00] [INFO] [unknown:1816] ["[region 933] 1953 restored progress of 934 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:40:12.398 -07:00] [INFO] [unknown:1816] ["[region 933] 1953 restored progress of 935 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:40:12.398 -07:00] [INFO] [unknown:1816] ["[region 933] 1953 restored progress of 936 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:40:12.398 -07:00] [INFO] [unknown:1816] ["[region 933] 1953 restored progress of 1953 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:40:12.398 -07:00] [INFO] [unknown:474] ["[region 933] 1953 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 7, term: 6]"]
[2019/05/01 12:40:12.398 -07:00] [INFO] [unknown:1736] ["[region 933] 1953 [commit: 7] restored snapshot [index: 7, term: 6]"]
[2019/05/01 12:40:12.398 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=1953] [region_id=933]
[2019/05/01 12:40:12.398 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 7, truncated_state: Some(RaftTruncatedState { index: 7, term: 6, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 933, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 97, 255, 112, 105, 95, 255, 101, 110, 97, 98, 108, 255, 101, 95, 255, 98, 105, 110, 108, 111, 103, 255, 0, 255, 0, 0, 0, 0, 0, 0, 0, 247, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 97, 255, 112, 105, 95, 255, 101, 110, 97, 98, 108, 255, 101, 95, 255, 109, 100, 108, 0, 0, 0, 252, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 107, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 934, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 935, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 936, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1953, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1953] [region_id=933]
[2019/05/01 12:40:12.414 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 933, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 97, 255, 112, 105, 95, 255, 101, 110, 97, 98, 108, 255, 101, 95, 255, 98, 105, 110, 108, 111, 103, 255, 0, 255, 0, 0, 0, 0, 0, 0, 0, 247, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 97, 255, 112, 105, 95, 255, 101, 110, 97, 98, 108, 255, 101, 95, 255, 109, 100, 108, 0, 0, 0, 252, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 107, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 934, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 935, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 936, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1953, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1953] [region_id=933]
[2019/05/01 12:40:12.414 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 933] 1953"]
[2019/05/01 12:40:12.414 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=933]
[2019/05/01 12:40:12.431 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=16.011923ms] [region_id=933]
[2019/05/01 12:40:13.100 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 222], lock_version: 408089949106077702, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 223], lock_ttl: 3059, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:40:13.169 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 222], lock_version: 408089949106077702, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 223], lock_ttl: 3059, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:40:13.192 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 222], lock_version: 408089949106077702, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 223], lock_ttl: 3059, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:40:13.199 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 222], lock_version: 408089949106077702, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 223], lock_ttl: 3059, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:40:13.461 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 1953, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=8] [term=6] [peer_id=1953] [region_id=933]
[2019/05/01 12:40:13.461 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 6, version: 107, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=1953] [region_id=933]
[2019/05/01 12:40:13.461 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=1997] [region_id=1331]
[2019/05/01 12:40:13.461 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 933, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 97, 255, 112, 105, 95, 255, 101, 110, 97, 98, 108, 255, 101, 95, 255, 98, 105, 110, 108, 111, 103, 255, 0, 255, 0, 0, 0, 0, 0, 0, 0, 247, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 97, 255, 112, 105, 95, 255, 101, 110, 97, 98, 108, 255, 101, 95, 255, 109, 100, 108, 0, 0, 0, 252, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 107, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 934, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 935, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 936, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1953, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1953, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1953] [region_id=933]
[2019/05/01 12:40:13.461 -07:00] [INFO] [unknown:719] ["[region 1331] 1997 became follower at term 0"]
[2019/05/01 12:40:13.461 -07:00] [INFO] [unknown:295] ["[region 1331] 1997 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:40:13.461 -07:00] [INFO] [unknown:719] ["[region 1331] 1997 became follower at term 1"]
[2019/05/01 12:40:13.461 -07:00] [INFO] [unknown:920] ["[region 1331] 1997 [term: 1] received a MsgHeartbeat message with higher term from 1332 [term: 7]"]
[2019/05/01 12:40:13.461 -07:00] [INFO] [unknown:719] ["[region 1331] 1997 became follower at term 7"]
[2019/05/01 12:40:13.513 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 936, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=9] [term=6] [peer_id=1953] [region_id=933]
[2019/05/01 12:40:13.513 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 7, version: 107, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=1953] [region_id=933]
[2019/05/01 12:40:13.513 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 933, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 97, 255, 112, 105, 95, 255, 101, 110, 97, 98, 108, 255, 101, 95, 255, 98, 105, 110, 108, 111, 103, 255, 0, 255, 0, 0, 0, 0, 0, 0, 0, 247, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 97, 255, 112, 105, 95, 255, 101, 110, 97, 98, 108, 255, 101, 95, 255, 109, 100, 108, 0, 0, 0, 252, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 7, version: 107, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 934, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 935, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 936, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1953, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 936, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1953] [region_id=933]
[2019/05/01 12:40:13.661 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 229], lock_version: 408089949263364102, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 229], lock_ttl: 3002, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:40:14.175 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_1413_6_7_(default|lock|write).sst] [snap_key=1413_6_7]
[2019/05/01 12:40:14.186 -07:00] [INFO] [unknown:1792] ["[region 1413] 1955 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 7, term: 6]"]
[2019/05/01 12:40:14.186 -07:00] [INFO] [unknown:1816] ["[region 1413] 1955 restored progress of 1414 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:40:14.186 -07:00] [INFO] [unknown:1816] ["[region 1413] 1955 restored progress of 1415 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:40:14.186 -07:00] [INFO] [unknown:1816] ["[region 1413] 1955 restored progress of 1416 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:40:14.186 -07:00] [INFO] [unknown:1816] ["[region 1413] 1955 restored progress of 1955 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:40:14.186 -07:00] [INFO] [unknown:474] ["[region 1413] 1955 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 7, term: 6]"]
[2019/05/01 12:40:14.186 -07:00] [INFO] [unknown:1736] ["[region 1413] 1955 [commit: 7] restored snapshot [index: 7, term: 6]"]
[2019/05/01 12:40:14.186 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=1955] [region_id=1413]
[2019/05/01 12:40:14.186 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 7, truncated_state: Some(RaftTruncatedState { index: 7, term: 6, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 1413, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 112, 255, 117, 114, 103, 255, 101, 95, 98, 97, 116, 255, 99, 104, 255, 95, 115, 105, 122, 101, 0, 254, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 112, 255, 117, 114, 103, 255, 101, 95, 114, 115, 101, 255, 103, 95, 255, 116, 114, 117, 110, 99, 97, 255, 116, 255, 101, 95, 102, 114, 101, 113, 117, 255, 255, 101, 110, 99, 121, 0, 0, 0, 0, 255, 251, 0, 0, 0, 0, 0, 0, 0, 248], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 197, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1414, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1415, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1416, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1955, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1955] [region_id=1413]
[2019/05/01 12:40:14.203 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 1413, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 112, 255, 117, 114, 103, 255, 101, 95, 98, 97, 116, 255, 99, 104, 255, 95, 115, 105, 122, 101, 0, 254, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 112, 255, 117, 114, 103, 255, 101, 95, 114, 115, 101, 255, 103, 95, 255, 116, 114, 117, 110, 99, 97, 255, 116, 255, 101, 95, 102, 114, 101, 113, 117, 255, 255, 101, 110, 99, 121, 0, 0, 0, 0, 255, 251, 0, 0, 0, 0, 0, 0, 0, 248], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 197, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1414, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1415, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1416, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1955, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1955] [region_id=1413]
[2019/05/01 12:40:14.203 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=1413]
[2019/05/01 12:40:14.203 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 1413] 1955"]
[2019/05/01 12:40:14.220 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=17.091089ms] [region_id=1413]
[2019/05/01 12:40:14.451 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 226], lock_version: 408089949473079297, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 228], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:40:14.507 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 230], lock_version: 408089949486186505, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 230], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:40:14.824 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 232], lock_version: 408089949564829705, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 235], lock_ttl: 3002, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:40:14.918 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 233], lock_version: 408089949591044101, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 233], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:40:14.920 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 233], lock_version: 408089949591044101, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 233], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:40:14.987 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 234], lock_version: 408089949591044107, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 234], lock_ttl: 3053, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:40:15.195 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 235], lock_version: 408089949630365702, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 235], lock_ttl: 3096, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:40:15.208 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 1955, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=8] [term=6] [peer_id=1955] [region_id=1413]
[2019/05/01 12:40:15.208 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 6, version: 197, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=1955] [region_id=1413]
[2019/05/01 12:40:15.208 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 1413, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 112, 255, 117, 114, 103, 255, 101, 95, 98, 97, 116, 255, 99, 104, 255, 95, 115, 105, 122, 101, 0, 254, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 112, 255, 117, 114, 103, 255, 101, 95, 114, 115, 101, 255, 103, 95, 255, 116, 114, 117, 110, 99, 97, 255, 116, 255, 101, 95, 102, 114, 101, 113, 117, 255, 255, 101, 110, 99, 121, 0, 0, 0, 0, 255, 251, 0, 0, 0, 0, 0, 0, 0, 248], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 197, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1414, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1415, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1416, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1955, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1955, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1955] [region_id=1413]
[2019/05/01 12:40:15.253 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 235], lock_version: 408089949630365702, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 235], lock_ttl: 3096, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:40:15.260 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 1414, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=9] [term=6] [peer_id=1955] [region_id=1413]
[2019/05/01 12:40:15.260 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 7, version: 197, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=1955] [region_id=1413]
[2019/05/01 12:40:15.260 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 1413, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 112, 255, 117, 114, 103, 255, 101, 95, 98, 97, 116, 255, 99, 104, 255, 95, 115, 105, 122, 101, 0, 254, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 112, 255, 117, 114, 103, 255, 101, 95, 114, 115, 101, 255, 103, 95, 255, 116, 114, 117, 110, 99, 97, 255, 116, 255, 101, 95, 102, 114, 101, 113, 117, 255, 255, 101, 110, 99, 121, 0, 0, 0, 0, 255, 251, 0, 0, 0, 0, 0, 0, 0, 248], region_epoch: Some(RegionEpoch { conf_ver: 7, version: 197, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1414, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1415, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1416, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1955, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1414, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1955] [region_id=1413]
[2019/05/01 12:40:15.342 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 235], lock_version: 408089949630365702, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 235], lock_ttl: 3096, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:40:15.424 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 232], lock_version: 408089949682794499, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 232], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:40:15.464 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_1331_7_8_(default|lock|write).sst] [snap_key=1331_7_8]
[2019/05/01 12:40:15.486 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 232], lock_version: 408089949682794499, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 232], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:40:15.488 -07:00] [INFO] [unknown:1792] ["[region 1331] 1997 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 8, term: 7]"]
[2019/05/01 12:40:15.488 -07:00] [INFO] [unknown:1816] ["[region 1331] 1997 restored progress of 1332 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:40:15.488 -07:00] [INFO] [unknown:1816] ["[region 1331] 1997 restored progress of 1333 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:40:15.488 -07:00] [INFO] [unknown:1816] ["[region 1331] 1997 restored progress of 1334 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:40:15.489 -07:00] [INFO] [unknown:1816] ["[region 1331] 1997 restored progress of 1997 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:40:15.489 -07:00] [INFO] [unknown:474] ["[region 1331] 1997 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 8, term: 7]"]
[2019/05/01 12:40:15.489 -07:00] [INFO] [unknown:1736] ["[region 1331] 1997 [commit: 8] restored snapshot [index: 8, term: 7]"]
[2019/05/01 12:40:15.489 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=1997] [region_id=1331]
[2019/05/01 12:40:15.489 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 8, truncated_state: Some(RaftTruncatedState { index: 8, term: 7, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 1331, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 109, 255, 97, 120, 95, 255, 100, 105, 114, 116, 121, 255, 95, 112, 255, 97, 103, 101, 115, 95, 112, 255, 99, 255, 116, 95, 108, 119, 109, 0, 0, 253, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 109, 255, 97, 120, 95, 255, 112, 117, 114, 103, 101, 255, 95, 108, 255, 97, 103, 0, 0, 0, 0, 251, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 177, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1332, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1333, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1334, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1997, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1997] [region_id=1331]
[2019/05/01 12:40:15.527 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 1331] 1997"]
[2019/05/01 12:40:15.527 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 1331, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 109, 255, 97, 120, 95, 255, 100, 105, 114, 116, 121, 255, 95, 112, 255, 97, 103, 101, 115, 95, 112, 255, 99, 255, 116, 95, 108, 119, 109, 0, 0, 253, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 109, 255, 97, 120, 95, 255, 112, 117, 114, 103, 101, 255, 95, 108, 255, 97, 103, 0, 0, 0, 0, 251, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 177, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1332, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1333, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1334, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1997, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1997] [region_id=1331]
[2019/05/01 12:40:15.527 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=1331]
[2019/05/01 12:40:15.580 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=51.986887ms] [region_id=1331]
[2019/05/01 12:40:15.780 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 238], lock_version: 408089949813866508, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 238], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:40:16.101 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 237], lock_version: 408089949905616903, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 239], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:40:16.340 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=2000] [region_id=1121]
[2019/05/01 12:40:16.340 -07:00] [INFO] [unknown:719] ["[region 1121] 2000 became follower at term 0"]
[2019/05/01 12:40:16.340 -07:00] [INFO] [unknown:295] ["[region 1121] 2000 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:40:16.340 -07:00] [INFO] [unknown:719] ["[region 1121] 2000 became follower at term 1"]
[2019/05/01 12:40:16.340 -07:00] [INFO] [unknown:920] ["[region 1121] 2000 [term: 1] received a MsgHeartbeat message with higher term from 1150 [term: 7]"]
[2019/05/01 12:40:16.340 -07:00] [INFO] [unknown:719] ["[region 1121] 2000 became follower at term 7"]
[2019/05/01 12:40:16.410 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=1999] [region_id=1105]
[2019/05/01 12:40:16.410 -07:00] [INFO] [unknown:719] ["[region 1105] 1999 became follower at term 0"]
[2019/05/01 12:40:16.410 -07:00] [INFO] [unknown:295] ["[region 1105] 1999 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:40:16.410 -07:00] [INFO] [unknown:719] ["[region 1105] 1999 became follower at term 1"]
[2019/05/01 12:40:16.410 -07:00] [INFO] [unknown:920] ["[region 1105] 1999 [term: 1] received a MsgHeartbeat message with higher term from 1108 [term: 6]"]
[2019/05/01 12:40:16.410 -07:00] [INFO] [unknown:719] ["[region 1105] 1999 became follower at term 6"]
[2019/05/01 12:40:16.455 -07:00] [INFO] [unknown:1625] ["[region 341] 1454 [term 7] received MsgTimeoutNow from 343 and starts an election to get leadership."]
[2019/05/01 12:40:16.455 -07:00] [INFO] [unknown:739] ["[region 341] 1454 became candidate at term 8"]
[2019/05/01 12:40:16.455 -07:00] [INFO] [unknown:854] ["[region 341] 1454 received MsgRequestVoteResponse from 1454 at term 8"]
[2019/05/01 12:40:16.456 -07:00] [INFO] [unknown:828] ["[region 341] 1454 [logterm: 7, index: 13] sent MsgRequestVote request to 343 at term 8"]
[2019/05/01 12:40:16.456 -07:00] [INFO] [unknown:828] ["[region 341] 1454 [logterm: 7, index: 13] sent MsgRequestVote request to 1008 at term 8"]
[2019/05/01 12:40:16.525 -07:00] [INFO] [unknown:854] ["[region 341] 1454 received MsgRequestVoteResponse from 1008 at term 8"]
[2019/05/01 12:40:16.525 -07:00] [INFO] [unknown:1550] ["[region 341] 1454 [quorum:2] has received 2 MsgRequestVoteResponse votes and 0 vote rejections"]
[2019/05/01 12:40:16.525 -07:00] [INFO] [unknown:789] ["[region 341] 1454 became leader at term 8"]
[2019/05/01 12:40:16.534 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 234], lock_version: 408089949944938499, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 236], lock_ttl: 3087, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:40:16.558 -07:00] [INFO] [unknown:1625] ["[region 117] 258 [term 7] received MsgTimeoutNow from 119 and starts an election to get leadership."]
[2019/05/01 12:40:16.558 -07:00] [INFO] [unknown:739] ["[region 117] 258 became candidate at term 8"]
[2019/05/01 12:40:16.558 -07:00] [INFO] [unknown:854] ["[region 117] 258 received MsgRequestVoteResponse from 258 at term 8"]
[2019/05/01 12:40:16.558 -07:00] [INFO] [unknown:828] ["[region 117] 258 [logterm: 7, index: 13] sent MsgRequestVote request to 119 at term 8"]
[2019/05/01 12:40:16.558 -07:00] [INFO] [unknown:828] ["[region 117] 258 [logterm: 7, index: 13] sent MsgRequestVote request to 1005 at term 8"]
[2019/05/01 12:40:16.592 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 1997, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=9] [term=7] [peer_id=1997] [region_id=1331]
[2019/05/01 12:40:16.592 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 6, version: 177, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=1997] [region_id=1331]
[2019/05/01 12:40:16.592 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 1331, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 109, 255, 97, 120, 95, 255, 100, 105, 114, 116, 121, 255, 95, 112, 255, 97, 103, 101, 115, 95, 112, 255, 99, 255, 116, 95, 108, 119, 109, 0, 0, 253, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 109, 255, 97, 120, 95, 255, 112, 117, 114, 103, 101, 255, 95, 108, 255, 97, 103, 0, 0, 0, 0, 251, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 177, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1332, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1333, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1334, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1997, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1997, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1997] [region_id=1331]
[2019/05/01 12:40:16.614 -07:00] [INFO] [unknown:854] ["[region 117] 258 received MsgRequestVoteResponse from 1005 at term 8"]
[2019/05/01 12:40:16.614 -07:00] [INFO] [unknown:1550] ["[region 117] 258 [quorum:2] has received 2 MsgRequestVoteResponse votes and 0 vote rejections"]
[2019/05/01 12:40:16.614 -07:00] [INFO] [unknown:789] ["[region 117] 258 became leader at term 8"]
[2019/05/01 12:40:16.632 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 234], lock_version: 408089949944938499, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 236], lock_ttl: 3087, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:40:16.764 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 1334, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=10] [term=7] [peer_id=1997] [region_id=1331]
[2019/05/01 12:40:16.764 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 7, version: 177, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=1997] [region_id=1331]
[2019/05/01 12:40:16.764 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 1331, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 109, 255, 97, 120, 95, 255, 100, 105, 114, 116, 121, 255, 95, 112, 255, 97, 103, 101, 115, 95, 112, 255, 99, 255, 116, 95, 108, 119, 109, 0, 0, 253, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 109, 255, 97, 120, 95, 255, 112, 117, 114, 103, 101, 255, 95, 108, 255, 97, 103, 0, 0, 0, 0, 251, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 7, version: 177, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1332, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1333, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1334, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1997, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1334, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1997] [region_id=1331]
[2019/05/01 12:40:16.972 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 238], lock_version: 408089950023581708, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 238], lock_ttl: 3286, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:40:17.048 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 236], lock_version: 408089950089117702, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 237], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:40:17.100 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 239], lock_version: 408089950115332101, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 241], lock_ttl: 3002, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:40:17.111 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 239], lock_version: 408089950115332101, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 241], lock_ttl: 3002, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:40:17.167 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 239], lock_version: 408089950115332101, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 241], lock_ttl: 3002, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:40:17.171 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 239], lock_version: 408089950115332101, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 241], lock_ttl: 3002, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:40:17.297 -07:00] [INFO] [pd.rs:558] ["try to change peer"] [peer="Peer { id: 2002, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [change_type=AddLearnerNode] [region_id=1083]
[2019/05/01 12:40:17.297 -07:00] [INFO] [peer.rs:1953] ["propose conf change peer"] [change_peer=2002] [change_type=AddLearnerNode] [peer_id=1406] [region_id=1083]
[2019/05/01 12:40:17.365 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddLearnerNode, peer: Some(Peer { id: 2002, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=12] [term=8] [peer_id=1406] [region_id=1083]
[2019/05/01 12:40:17.365 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 8, version: 127, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddLearner] [peer_id=1406] [region_id=1083]
[2019/05/01 12:40:17.366 -07:00] [INFO] [apply.rs:1476] ["add learner successfully"] [region="Region { id: 1083, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 99, 255, 111, 109, 109, 255, 105, 116, 95, 99, 111, 255, 110, 99, 255, 117, 114, 114, 101, 110, 99, 255, 121, 255, 0, 0, 0, 0, 0, 0, 0, 248, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 99, 255, 111, 109, 112, 255, 114, 101, 115, 115, 105, 255, 111, 110, 255, 95, 102, 97, 105, 108, 117, 255, 114, 255, 101, 95, 116, 104, 114, 101, 115, 255, 255, 104, 111, 108, 100, 95, 112, 99, 116, 255, 255, 0, 0, 0, 0, 0, 0, 0, 255, 0, 247, 0, 0, 0, 0, 0, 0, 249], region_epoch: Some(RegionEpoch { conf_ver: 8, version: 127, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1085, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1086, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1406, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 2002, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1406] [region_id=1083]
[2019/05/01 12:40:17.390 -07:00] [INFO] [peer.rs:1318] ["notify pd with change peer region"] [region="Region { id: 1083, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 99, 255, 111, 109, 109, 255, 105, 116, 95, 99, 111, 255, 110, 99, 255, 117, 114, 114, 101, 110, 99, 255, 121, 255, 0, 0, 0, 0, 0, 0, 0, 248, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 99, 255, 111, 109, 112, 255, 114, 101, 115, 115, 105, 255, 111, 110, 255, 95, 102, 97, 105, 108, 117, 255, 114, 255, 101, 95, 116, 104, 114, 101, 115, 255, 255, 104, 111, 108, 100, 95, 112, 99, 116, 255, 255, 0, 0, 0, 0, 0, 0, 0, 255, 0, 247, 0, 0, 0, 0, 0, 0, 249], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 127, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1085, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1086, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1406, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 2002, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1406] [region_id=1083]
[2019/05/01 12:40:17.483 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 241], lock_version: 408089950207082504, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 241], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:40:17.563 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 243], lock_version: 408089950285725701, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 243], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:40:17.581 -07:00] [INFO] [peer_storage.rs:759] ["requesting snapshot"] [peer_id=1406] [region_id=1083]
[2019/05/01 12:40:17.582 -07:00] [INFO] [snap.rs:757] ["scan snapshot of one cf"] [size=0] [key_count=0] [cf=default] [snapshot=/opt/tidb/data/kv/snap/gen_1083_8_12_(default|lock|write).sst] [region_id=1083]
[2019/05/01 12:40:17.582 -07:00] [INFO] [snap.rs:757] ["scan snapshot of one cf"] [size=0] [key_count=0] [cf=lock] [snapshot=/opt/tidb/data/kv/snap/gen_1083_8_12_(default|lock|write).sst] [region_id=1083]
[2019/05/01 12:40:17.582 -07:00] [INFO] [snap.rs:757] ["scan snapshot of one cf"] [size=192] [key_count=2] [cf=write] [snapshot=/opt/tidb/data/kv/snap/gen_1083_8_12_(default|lock|write).sst] [region_id=1083]
[2019/05/01 12:40:17.604 -07:00] [INFO] [snap.rs:875] ["scan snapshot"] [takes=21.843905ms] [size=1487] [key_count=2] [snapshot=/opt/tidb/data/kv/snap/gen_1083_8_12_(default|lock|write).sst] [region_id=1083]
[2019/05/01 12:40:17.624 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 243], lock_version: 408089950285725701, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 243], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:40:17.629 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 238], lock_version: 408089950167760897, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 240], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:40:18.124 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 237], lock_version: 408089950390583310, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 242], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:40:18.182 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 237], lock_version: 408089950390583310, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 242], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:40:18.343 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_1121_7_11_(default|lock|write).sst] [snap_key=1121_7_11]
[2019/05/01 12:40:18.358 -07:00] [INFO] [unknown:1792] ["[region 1121] 2000 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 11, term: 7]"]
[2019/05/01 12:40:18.358 -07:00] [INFO] [unknown:1816] ["[region 1121] 2000 restored progress of 1123 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:40:18.358 -07:00] [INFO] [unknown:1816] ["[region 1121] 2000 restored progress of 1124 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:40:18.358 -07:00] [INFO] [unknown:1816] ["[region 1121] 2000 restored progress of 1150 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:40:18.358 -07:00] [INFO] [unknown:1816] ["[region 1121] 2000 restored progress of 2000 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:40:18.358 -07:00] [INFO] [unknown:474] ["[region 1121] 2000 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 11, term: 7]"]
[2019/05/01 12:40:18.358 -07:00] [INFO] [unknown:1736] ["[region 1121] 2000 [commit: 11] restored snapshot [index: 11, term: 7]"]
[2019/05/01 12:40:18.358 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=2000] [region_id=1121]
[2019/05/01 12:40:18.358 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 11, truncated_state: Some(RaftTruncatedState { index: 11, term: 7, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 1121, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 100, 255, 111, 117, 98, 255, 108, 101, 119, 114, 105, 255, 116, 101, 255, 0, 0, 0, 0, 0, 0, 249, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 102, 255, 97, 115, 116, 255, 95, 115, 104, 117, 116, 255, 100, 111, 255, 119, 110, 0, 0, 0, 0, 251, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 137, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1123, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1124, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1150, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 2000, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=2000] [region_id=1121]
[2019/05/01 12:40:18.395 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 1121, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 100, 255, 111, 117, 98, 255, 108, 101, 119, 114, 105, 255, 116, 101, 255, 0, 0, 0, 0, 0, 0, 249, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 102, 255, 97, 115, 116, 255, 95, 115, 104, 117, 116, 255, 100, 111, 255, 119, 110, 0, 0, 0, 0, 251, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 137, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1123, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1124, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1150, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 2000, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=2000] [region_id=1121]
[2019/05/01 12:40:18.395 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 1121] 2000"]
[2019/05/01 12:40:18.395 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=1121]
[2019/05/01 12:40:18.413 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_1105_6_10_(default|lock|write).sst] [snap_key=1105_6_10]
[2019/05/01 12:40:18.429 -07:00] [INFO] [unknown:1792] ["[region 1105] 1999 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 10, term: 6]"]
[2019/05/01 12:40:18.429 -07:00] [INFO] [unknown:1816] ["[region 1105] 1999 restored progress of 1107 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:40:18.429 -07:00] [INFO] [unknown:1816] ["[region 1105] 1999 restored progress of 1108 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:40:18.429 -07:00] [INFO] [unknown:1816] ["[region 1105] 1999 restored progress of 1903 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:40:18.429 -07:00] [INFO] [unknown:1816] ["[region 1105] 1999 restored progress of 1999 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:40:18.429 -07:00] [INFO] [unknown:474] ["[region 1105] 1999 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 10, term: 6]"]
[2019/05/01 12:40:18.429 -07:00] [INFO] [unknown:1736] ["[region 1105] 1999 [commit: 10] restored snapshot [index: 10, term: 6]"]
[2019/05/01 12:40:18.429 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=1999] [region_id=1105]
[2019/05/01 12:40:18.429 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 10, truncated_state: Some(RaftTruncatedState { index: 10, term: 6, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 1105, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 99, 255, 111, 109, 112, 255, 114, 101, 115, 115, 105, 255, 111, 110, 255, 95, 112, 97, 100, 95, 112, 255, 99, 255, 116, 95, 109, 97, 120, 0, 0, 253, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 99, 255, 111, 110, 99, 255, 117, 114, 114, 101, 110, 255, 99, 121, 255, 95, 116, 105, 99, 107, 101, 255, 116, 255, 115, 0, 0, 0, 0, 0, 0, 249, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 137, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1107, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1108, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1903, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1999, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1999] [region_id=1105]
[2019/05/01 12:40:18.463 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=67.26261ms] [region_id=1121]
[2019/05/01 12:40:18.485 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 1105, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 99, 255, 111, 109, 112, 255, 114, 101, 115, 115, 105, 255, 111, 110, 255, 95, 112, 97, 100, 95, 112, 255, 99, 255, 116, 95, 109, 97, 120, 0, 0, 253, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 99, 255, 111, 110, 99, 255, 117, 114, 114, 101, 110, 255, 99, 121, 255, 95, 116, 105, 99, 107, 101, 255, 116, 255, 115, 0, 0, 0, 0, 0, 0, 249, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 137, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1107, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1108, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1903, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1999, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1999] [region_id=1105]
[2019/05/01 12:40:18.486 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 1105] 1999"]
[2019/05/01 12:40:18.486 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=1105]
[2019/05/01 12:40:18.501 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 241], lock_version: 408089950482333705, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 242], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:40:18.530 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=44.267266ms] [region_id=1105]
[2019/05/01 12:40:19.273 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 245], lock_version: 408089950678941699, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 245], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:40:19.323 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 245], lock_version: 408089950678941699, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 245], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:40:19.418 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 2000, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=12] [term=7] [peer_id=2000] [region_id=1121]
[2019/05/01 12:40:19.418 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 9, version: 137, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=2000] [region_id=1121]
[2019/05/01 12:40:19.418 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 1121, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 100, 255, 111, 117, 98, 255, 108, 101, 119, 114, 105, 255, 116, 101, 255, 0, 0, 0, 0, 0, 0, 249, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 102, 255, 97, 115, 116, 255, 95, 115, 104, 117, 116, 255, 100, 111, 255, 119, 110, 0, 0, 0, 0, 251, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 137, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1123, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1124, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1150, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 2000, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 2000, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=2000] [region_id=1121]
[2019/05/01 12:40:19.506 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 1999, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=11] [term=6] [peer_id=1999] [region_id=1105]
[2019/05/01 12:40:19.506 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 9, version: 137, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=1999] [region_id=1105]
[2019/05/01 12:40:19.506 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 1105, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 99, 255, 111, 109, 112, 255, 114, 101, 115, 115, 105, 255, 111, 110, 255, 95, 112, 97, 100, 95, 112, 255, 99, 255, 116, 95, 109, 97, 120, 0, 0, 253, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 99, 255, 111, 110, 99, 255, 117, 114, 114, 101, 110, 255, 99, 121, 255, 95, 116, 105, 99, 107, 101, 255, 116, 255, 115, 0, 0, 0, 0, 0, 0, 249, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 137, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1107, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1108, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1903, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1999, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1999, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1999] [region_id=1105]
[2019/05/01 12:40:19.568 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 1123, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=13] [term=7] [peer_id=2000] [region_id=1121]
[2019/05/01 12:40:19.576 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 10, version: 137, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=2000] [region_id=1121]
[2019/05/01 12:40:19.576 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 1121, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 100, 255, 111, 117, 98, 255, 108, 101, 119, 114, 105, 255, 116, 101, 255, 0, 0, 0, 0, 0, 0, 249, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 102, 255, 97, 115, 116, 255, 95, 115, 104, 117, 116, 255, 100, 111, 255, 119, 110, 0, 0, 0, 0, 251, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 10, version: 137, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1123, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1124, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1150, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 2000, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1123, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=2000] [region_id=1121]
[2019/05/01 12:40:19.620 -07:00] [INFO] [unknown:841] ["New connected subchannel at 0x7f8584001180 for subchannel 0x7f8640441800"]
[2019/05/01 12:40:19.644 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 1107, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=12] [term=6] [peer_id=1999] [region_id=1105]
[2019/05/01 12:40:19.650 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 10, version: 137, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=1999] [region_id=1105]
[2019/05/01 12:40:19.650 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 1105, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 99, 255, 111, 109, 112, 255, 114, 101, 115, 115, 105, 255, 111, 110, 255, 95, 112, 97, 100, 95, 112, 255, 99, 255, 116, 95, 109, 97, 120, 0, 0, 253, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 99, 255, 111, 110, 99, 255, 117, 114, 114, 101, 110, 255, 99, 121, 255, 95, 116, 105, 99, 107, 101, 255, 116, 255, 115, 0, 0, 0, 0, 0, 0, 249, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 10, version: 137, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1107, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1108, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1903, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1999, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1107, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1999] [region_id=1105]
[2019/05/01 12:40:19.650 -07:00] [INFO] [snap.rs:389] ["sent snapshot"] [duration=25.425974ms] [size=1487] [snap_key=1083_8_12] [region_id=1083]
[2019/05/01 12:40:19.650 -07:00] [INFO] [peer.rs:538] ["report snapshot status"] [status=Finish] [to="Peer { id: 2002, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1406] [region_id=1083]
[2019/05/01 12:40:20.042 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=2003] [region_id=1871]
[2019/05/01 12:40:20.042 -07:00] [INFO] [unknown:719] ["[region 1871] 2003 became follower at term 0"]
[2019/05/01 12:40:20.042 -07:00] [INFO] [unknown:295] ["[region 1871] 2003 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:40:20.042 -07:00] [INFO] [unknown:719] ["[region 1871] 2003 became follower at term 1"]
[2019/05/01 12:40:20.042 -07:00] [INFO] [unknown:920] ["[region 1871] 2003 [term: 1] received a MsgHeartbeat message with higher term from 1873 [term: 6]"]
[2019/05/01 12:40:20.042 -07:00] [INFO] [unknown:719] ["[region 1871] 2003 became follower at term 6"]
[2019/05/01 12:40:20.082 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=2004] [region_id=1843]
[2019/05/01 12:40:20.082 -07:00] [INFO] [unknown:719] ["[region 1843] 2004 became follower at term 0"]
[2019/05/01 12:40:20.082 -07:00] [INFO] [unknown:295] ["[region 1843] 2004 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:40:20.082 -07:00] [INFO] [unknown:719] ["[region 1843] 2004 became follower at term 1"]
[2019/05/01 12:40:20.082 -07:00] [INFO] [unknown:920] ["[region 1843] 2004 [term: 1] received a MsgHeartbeat message with higher term from 1845 [term: 6]"]
[2019/05/01 12:40:20.082 -07:00] [INFO] [unknown:719] ["[region 1843] 2004 became follower at term 6"]
[2019/05/01 12:40:20.103 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 246], lock_version: 408089950941085698, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 246], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:40:20.119 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=241_7_11] [peer_id=1857] [region_id=241]
[2019/05/01 12:40:20.119 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=602_8_12] [peer_id=1701] [region_id=602]
[2019/05/01 12:40:20.119 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=365_6_7] [peer_id=1757] [region_id=365]
[2019/05/01 12:40:20.119 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=672_6_7] [peer_id=1853] [region_id=672]
[2019/05/01 12:40:20.119 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=401_6_7] [peer_id=1850] [region_id=401]
[2019/05/01 12:40:20.119 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=680_6_7] [peer_id=1950] [region_id=680]
[2019/05/01 12:40:20.119 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=413_7_11] [peer_id=1801] [region_id=413]
[2019/05/01 12:40:20.119 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=464_8_12] [peer_id=1752] [region_id=464]
[2019/05/01 12:40:20.119 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=800_7_11] [peer_id=1800] [region_id=800]
[2019/05/01 12:40:20.119 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=905_7_8] [peer_id=1852] [region_id=905]
[2019/05/01 12:40:20.119 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=929_8_12] [peer_id=1900] [region_id=929]
[2019/05/01 12:40:20.120 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=933_6_7] [peer_id=1953] [region_id=933]
[2019/05/01 12:40:20.120 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=1027_6_7] [peer_id=1854] [region_id=1027]
[2019/05/01 12:40:20.120 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=1105_6_10] [peer_id=1999] [region_id=1105]
[2019/05/01 12:40:20.120 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=1121_7_11] [peer_id=2000] [region_id=1121]
[2019/05/01 12:40:20.120 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=1162_7_11] [peer_id=1904] [region_id=1162]
[2019/05/01 12:40:20.120 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=1220_7_11] [peer_id=1899] [region_id=1220]
[2019/05/01 12:40:20.120 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=1248_7_8] [peer_id=1799] [region_id=1248]
[2019/05/01 12:40:20.120 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=1281_7_8] [peer_id=1699] [region_id=1281]
[2019/05/01 12:40:20.120 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=1331_7_8] [peer_id=1997] [region_id=1331]
[2019/05/01 12:40:20.120 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=1343_6_7] [peer_id=1708] [region_id=1343]
[2019/05/01 12:40:20.121 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=1372_6_7] [peer_id=1805] [region_id=1372]
[2019/05/01 12:40:20.121 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=1376_6_7] [peer_id=1707] [region_id=1376]
[2019/05/01 12:40:20.121 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=1396_7_11] [peer_id=1952] [region_id=1396]
[2019/05/01 12:40:20.121 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=1413_6_7] [peer_id=1955] [region_id=1413]
[2019/05/01 12:40:20.121 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=1525_7_8] [peer_id=1709] [region_id=1525]
[2019/05/01 12:40:20.121 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=1529_6_7] [peer_id=1951] [region_id=1529]
[2019/05/01 12:40:20.121 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=1578_6_10] [peer_id=1855] [region_id=1578]
[2019/05/01 12:40:20.121 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=1622_6_7] [peer_id=1758] [region_id=1622]
[2019/05/01 12:40:20.121 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=1795_6_7] [peer_id=1847] [region_id=1795]
[2019/05/01 12:40:20.260 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 249], lock_version: 408089950993514498, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 249], lock_ttl: 3002, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:40:20.505 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 250], lock_version: 408089951059050507, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 250], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:40:20.559 -07:00] [INFO] [pd.rs:558] ["try to change peer"] [peer="Peer { id: 2002, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [change_type=AddNode] [region_id=1083]
[2019/05/01 12:40:20.559 -07:00] [INFO] [peer.rs:1953] ["propose conf change peer"] [change_peer=2002] [change_type=AddNode] [peer_id=1406] [region_id=1083]
[2019/05/01 12:40:20.597 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 2002, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=13] [term=8] [peer_id=1406] [region_id=1083]
[2019/05/01 12:40:20.597 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 9, version: 127, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=1406] [region_id=1083]
[2019/05/01 12:40:20.597 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 1083, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 99, 255, 111, 109, 109, 255, 105, 116, 95, 99, 111, 255, 110, 99, 255, 117, 114, 114, 101, 110, 99, 255, 121, 255, 0, 0, 0, 0, 0, 0, 0, 248, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 99, 255, 111, 109, 112, 255, 114, 101, 115, 115, 105, 255, 111, 110, 255, 95, 102, 97, 105, 108, 117, 255, 114, 255, 101, 95, 116, 104, 114, 101, 115, 255, 255, 104, 111, 108, 100, 95, 112, 99, 116, 255, 255, 0, 0, 0, 0, 0, 0, 0, 255, 0, 247, 0, 0, 0, 0, 0, 0, 249], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 127, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1085, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1086, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1406, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 2002, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 2002, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1406] [region_id=1083]
[2019/05/01 12:40:20.605 -07:00] [INFO] [peer.rs:1318] ["notify pd with change peer region"] [region="Region { id: 1083, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 99, 255, 111, 109, 109, 255, 105, 116, 95, 99, 111, 255, 110, 99, 255, 117, 114, 114, 101, 110, 99, 255, 121, 255, 0, 0, 0, 0, 0, 0, 0, 248, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 99, 255, 111, 109, 112, 255, 114, 101, 115, 115, 105, 255, 111, 110, 255, 95, 102, 97, 105, 108, 117, 255, 114, 255, 101, 95, 116, 104, 114, 101, 115, 255, 255, 104, 111, 108, 100, 95, 112, 99, 116, 255, 255, 0, 0, 0, 0, 0, 0, 0, 255, 0, 247, 0, 0, 0, 0, 0, 0, 249], region_epoch: Some(RegionEpoch { conf_ver: 10, version: 127, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1085, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1086, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1406, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 2002, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1406] [region_id=1083]
[2019/05/01 12:40:20.611 -07:00] [INFO] [pd.rs:558] ["try to change peer"] [peer="Peer { id: 1085, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [change_type=RemoveNode] [region_id=1083]
[2019/05/01 12:40:20.612 -07:00] [INFO] [peer.rs:1953] ["propose conf change peer"] [change_peer=1085] [change_type=RemoveNode] [peer_id=1406] [region_id=1083]
[2019/05/01 12:40:20.624 -07:00] [INFO] [pd.rs:558] ["try to change peer"] [peer="Peer { id: 1085, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [change_type=RemoveNode] [region_id=1083]
[2019/05/01 12:40:20.659 -07:00] [INFO] [peer.rs:1927] ["there is a pending conf change, try later"] [peer_id=1406] [region_id=1083]
[2019/05/01 12:40:20.659 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 1085, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=14] [term=8] [peer_id=1406] [region_id=1083]
[2019/05/01 12:40:20.659 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 10, version: 127, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=1406] [region_id=1083]
[2019/05/01 12:40:20.659 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 1083, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 99, 255, 111, 109, 109, 255, 105, 116, 95, 99, 111, 255, 110, 99, 255, 117, 114, 114, 101, 110, 99, 255, 121, 255, 0, 0, 0, 0, 0, 0, 0, 248, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 99, 255, 111, 109, 112, 255, 114, 101, 115, 115, 105, 255, 111, 110, 255, 95, 102, 97, 105, 108, 117, 255, 114, 255, 101, 95, 116, 104, 114, 101, 115, 255, 255, 104, 111, 108, 100, 95, 112, 99, 116, 255, 255, 0, 0, 0, 0, 0, 0, 0, 255, 0, 247, 0, 0, 0, 0, 0, 0, 249], region_epoch: Some(RegionEpoch { conf_ver: 10, version: 127, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1085, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1086, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1406, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 2002, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1085, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1406] [region_id=1083]
[2019/05/01 12:40:20.676 -07:00] [INFO] [peer.rs:1318] ["notify pd with change peer region"] [region="Region { id: 1083, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 99, 255, 111, 109, 109, 255, 105, 116, 95, 99, 111, 255, 110, 99, 255, 117, 114, 114, 101, 110, 99, 255, 121, 255, 0, 0, 0, 0, 0, 0, 0, 248, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 99, 255, 111, 109, 112, 255, 114, 101, 115, 115, 105, 255, 111, 110, 255, 95, 102, 97, 105, 108, 117, 255, 114, 255, 101, 95, 116, 104, 114, 101, 115, 255, 255, 104, 111, 108, 100, 95, 112, 99, 116, 255, 255, 0, 0, 0, 0, 0, 0, 0, 255, 0, 247, 0, 0, 0, 0, 0, 0, 249], region_epoch: Some(RegionEpoch { conf_ver: 11, version: 127, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1086, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1406, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 2002, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1406] [region_id=1083]
[2019/05/01 12:40:20.908 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 247], lock_version: 408089951163908108, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 251], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:40:21.062 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 248], lock_version: 408089951190122501, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 248], lock_ttl: 3070, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:40:21.120 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 249], lock_version: 408089951216336910, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 251], lock_ttl: 3003, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:40:21.269 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 254], lock_version: 408089951216336906, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 254], lock_ttl: 3065, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:40:21.469 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 255], lock_version: 408089951294980100, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 255], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:40:21.524 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 255], lock_version: 408089951294980100, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 255], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:40:21.694 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 249], lock_version: 408089951268765699, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 251], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:40:21.767 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 255], lock_version: 408089951373623307, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 255], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:40:21.882 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 253], lock_version: 408089951386730502, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 253], lock_ttl: 3002, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:40:21.951 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 253], lock_version: 408089951386730502, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 253], lock_ttl: 3002, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:40:22.107 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_1871_6_7_(default|lock|write).sst] [snap_key=1871_6_7]
[2019/05/01 12:40:22.144 -07:00] [INFO] [unknown:1792] ["[region 1871] 2003 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 7, term: 6]"]
[2019/05/01 12:40:22.154 -07:00] [INFO] [unknown:1816] ["[region 1871] 2003 restored progress of 1872 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:40:22.154 -07:00] [INFO] [unknown:1816] ["[region 1871] 2003 restored progress of 1873 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:40:22.154 -07:00] [INFO] [unknown:1816] ["[region 1871] 2003 restored progress of 1874 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:40:22.154 -07:00] [INFO] [unknown:1816] ["[region 1871] 2003 restored progress of 2003 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:40:22.154 -07:00] [INFO] [unknown:474] ["[region 1871] 2003 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 7, term: 6]"]
[2019/05/01 12:40:22.154 -07:00] [INFO] [unknown:1736] ["[region 1871] 2003 [commit: 7] restored snapshot [index: 7, term: 6]"]
[2019/05/01 12:40:22.154 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=2003] [region_id=1871]
[2019/05/01 12:40:22.154 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 7, truncated_state: Some(RaftTruncatedState { index: 7, term: 6, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 1871, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 109, 97, 120, 95, 255, 114, 101, 108, 97, 255, 121, 95, 108, 255, 111, 103, 95, 115, 105, 255, 122, 101, 255, 0, 0, 0, 0, 0, 0, 249, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 109, 97, 120, 95, 255, 115, 101, 101, 107, 255, 115, 95, 102, 255, 111, 114, 95, 107, 101, 255, 121, 0, 255, 0, 0, 0, 0, 0, 0, 248, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 287, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1872, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1873, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1874, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 2003, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=2003] [region_id=1871]
[2019/05/01 12:40:22.163 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_1843_6_7_(default|lock|write).sst] [snap_key=1843_6_7]
[2019/05/01 12:40:22.186 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 253], lock_version: 408089951465373705, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 254], lock_ttl: 3002, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:40:22.221 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 1871, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 109, 97, 120, 95, 255, 114, 101, 108, 97, 255, 121, 95, 108, 255, 111, 103, 95, 115, 105, 255, 122, 101, 255, 0, 0, 0, 0, 0, 0, 249, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 109, 97, 120, 95, 255, 115, 101, 101, 107, 255, 115, 95, 102, 255, 111, 114, 95, 107, 101, 255, 121, 0, 255, 0, 0, 0, 0, 0, 0, 248, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 287, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1872, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1873, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1874, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 2003, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=2003] [region_id=1871]
[2019/05/01 12:40:22.221 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 1871] 2003"]
[2019/05/01 12:40:22.221 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=1871]
[2019/05/01 12:40:22.221 -07:00] [INFO] [unknown:1792] ["[region 1843] 2004 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 7, term: 6]"]
[2019/05/01 12:40:22.221 -07:00] [INFO] [unknown:1816] ["[region 1843] 2004 restored progress of 1844 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:40:22.221 -07:00] [INFO] [unknown:1816] ["[region 1843] 2004 restored progress of 1845 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:40:22.221 -07:00] [INFO] [unknown:1816] ["[region 1843] 2004 restored progress of 1846 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:40:22.221 -07:00] [INFO] [unknown:1816] ["[region 1843] 2004 restored progress of 2004 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:40:22.221 -07:00] [INFO] [unknown:474] ["[region 1843] 2004 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 7, term: 6]"]
[2019/05/01 12:40:22.221 -07:00] [INFO] [unknown:1736] ["[region 1843] 2004 [commit: 7] restored snapshot [index: 7, term: 6]"]
[2019/05/01 12:40:22.221 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=2004] [region_id=1843]
[2019/05/01 12:40:22.221 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 7, truncated_state: Some(RaftTruncatedState { index: 7, term: 6, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 1843, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 109, 97, 120, 95, 255, 106, 111, 105, 110, 255, 95, 115, 105, 255, 122, 101, 0, 0, 0, 252, 0, 0, 253], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 109, 97, 120, 95, 255, 108, 101, 110, 103, 255, 116, 104, 95, 255, 102, 111, 114, 95, 115, 255, 111, 114, 255, 116, 95, 100, 97, 116, 97, 255, 0, 255, 0, 0, 0, 0, 0, 0, 0, 247, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 277, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1844, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1845, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1846, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 2004, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=2004] [region_id=1843]
[2019/05/01 12:40:22.257 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 253], lock_version: 408089951465373705, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 254], lock_ttl: 3002, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:40:22.275 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=53.70017ms] [region_id=1871]
[2019/05/01 12:40:22.275 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 1843, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 109, 97, 120, 95, 255, 106, 111, 105, 110, 255, 95, 115, 105, 255, 122, 101, 0, 0, 0, 252, 0, 0, 253], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 109, 97, 120, 95, 255, 108, 101, 110, 103, 255, 116, 104, 95, 255, 102, 111, 114, 95, 115, 255, 111, 114, 255, 116, 95, 100, 97, 116, 97, 255, 0, 255, 0, 0, 0, 0, 0, 0, 0, 247, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 277, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1844, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1845, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1846, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 2004, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=2004] [region_id=1843]
[2019/05/01 12:40:22.275 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 1843] 2004"]
[2019/05/01 12:40:22.275 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=1843]
[2019/05/01 12:40:22.326 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=50.412874ms] [region_id=1843]
[2019/05/01 12:40:23.080 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 253], lock_version: 408089951648874498, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 253], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:40:23.099 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 2003, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=8] [term=6] [peer_id=2003] [region_id=1871]
[2019/05/01 12:40:23.100 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 6, version: 287, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=2003] [region_id=1871]
[2019/05/01 12:40:23.100 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 1871, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 109, 97, 120, 95, 255, 114, 101, 108, 97, 255, 121, 95, 108, 255, 111, 103, 95, 115, 105, 255, 122, 101, 255, 0, 0, 0, 0, 0, 0, 249, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 109, 97, 120, 95, 255, 115, 101, 101, 107, 255, 115, 95, 102, 255, 111, 114, 95, 107, 101, 255, 121, 0, 255, 0, 0, 0, 0, 0, 0, 248, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 287, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1872, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1873, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1874, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 2003, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 2003, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=2003] [region_id=1871]
[2019/05/01 12:40:23.176 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 2004, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=8] [term=6] [peer_id=2004] [region_id=1843]
[2019/05/01 12:40:23.182 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 6, version: 277, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=2004] [region_id=1843]
[2019/05/01 12:40:23.182 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 1843, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 109, 97, 120, 95, 255, 106, 111, 105, 110, 255, 95, 115, 105, 255, 122, 101, 0, 0, 0, 252, 0, 0, 253], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 109, 97, 120, 95, 255, 108, 101, 110, 103, 255, 116, 104, 95, 255, 102, 111, 114, 95, 115, 255, 111, 114, 255, 116, 95, 100, 97, 116, 97, 255, 0, 255, 0, 0, 0, 0, 0, 0, 0, 247, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 277, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1844, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1845, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1846, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 2004, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 2004, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=2004] [region_id=1843]
[2019/05/01 12:40:23.182 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 253], lock_version: 408089951648874498, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 253], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:40:23.248 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 1874, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=9] [term=6] [peer_id=2003] [region_id=1871]
[2019/05/01 12:40:23.248 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 7, version: 287, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=2003] [region_id=1871]
[2019/05/01 12:40:23.248 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 1871, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 109, 97, 120, 95, 255, 114, 101, 108, 97, 255, 121, 95, 108, 255, 111, 103, 95, 115, 105, 255, 122, 101, 255, 0, 0, 0, 0, 0, 0, 249, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 109, 97, 120, 95, 255, 115, 101, 101, 107, 255, 115, 95, 102, 255, 111, 114, 95, 107, 101, 255, 121, 0, 255, 0, 0, 0, 0, 0, 0, 248, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 7, version: 287, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1872, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1873, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1874, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 2003, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1874, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=2003] [region_id=1871]
[2019/05/01 12:40:23.369 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 1846, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=9] [term=6] [peer_id=2004] [region_id=1843]
[2019/05/01 12:40:23.369 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 7, version: 277, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=2004] [region_id=1843]
[2019/05/01 12:40:23.369 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 1843, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 109, 97, 120, 95, 255, 106, 111, 105, 110, 255, 95, 115, 105, 255, 122, 101, 0, 0, 0, 252, 0, 0, 253], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 109, 97, 120, 95, 255, 108, 101, 110, 103, 255, 116, 104, 95, 255, 102, 111, 114, 95, 115, 255, 111, 114, 255, 116, 95, 100, 97, 116, 97, 255, 0, 255, 0, 0, 0, 0, 0, 0, 0, 247, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 7, version: 277, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1844, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1845, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1846, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 2004, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1846, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=2004] [region_id=1843]
[2019/05/01 12:40:23.439 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 252], lock_version: 408089951740624900, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 252], lock_ttl: 3213, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:40:23.494 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 252], lock_version: 408089951740624900, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 3, 252], lock_ttl: 3213, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:40:23.670 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 4, 2], lock_version: 408089951884804118, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 4, 2], lock_ttl: 3002, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:40:23.729 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 4, 4], lock_version: 408089951911018500, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 4, 4], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:40:23.821 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 4, 2], lock_version: 408089951924125713, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 4, 4], lock_ttl: 3002, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:40:23.959 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 4, 4], lock_version: 408089951937232914, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 4, 4], lock_ttl: 3078, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:40:24.057 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=2047] [region_id=1931]
[2019/05/01 12:40:24.057 -07:00] [INFO] [unknown:719] ["[region 1931] 2047 became follower at term 0"]
[2019/05/01 12:40:24.057 -07:00] [INFO] [unknown:295] ["[region 1931] 2047 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:40:24.057 -07:00] [INFO] [unknown:719] ["[region 1931] 2047 became follower at term 1"]
[2019/05/01 12:40:24.057 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=2048] [region_id=1891]
[2019/05/01 12:40:24.057 -07:00] [INFO] [unknown:719] ["[region 1891] 2048 became follower at term 0"]
[2019/05/01 12:40:24.057 -07:00] [INFO] [unknown:295] ["[region 1891] 2048 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:40:24.057 -07:00] [INFO] [unknown:719] ["[region 1891] 2048 became follower at term 1"]
[2019/05/01 12:40:24.057 -07:00] [INFO] [unknown:920] ["[region 1931] 2047 [term: 1] received a MsgHeartbeat message with higher term from 1933 [term: 6]"]
[2019/05/01 12:40:24.057 -07:00] [INFO] [unknown:719] ["[region 1931] 2047 became follower at term 6"]
[2019/05/01 12:40:24.057 -07:00] [INFO] [unknown:920] ["[region 1891] 2048 [term: 1] received a MsgHeartbeat message with higher term from 1893 [term: 6]"]
[2019/05/01 12:40:24.057 -07:00] [INFO] [unknown:719] ["[region 1891] 2048 became follower at term 6"]
[2019/05/01 12:40:24.541 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 4, 3], lock_version: 408089952107626500, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 4, 3], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:40:24.542 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 4, 3], lock_version: 408089952107626500, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 4, 3], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:40:24.836 -07:00] [INFO] [unknown:1625] ["[region 129] 667 [term 7] received MsgTimeoutNow from 131 and starts an election to get leadership."]
[2019/05/01 12:40:24.837 -07:00] [INFO] [unknown:739] ["[region 129] 667 became candidate at term 8"]
[2019/05/01 12:40:24.837 -07:00] [INFO] [unknown:854] ["[region 129] 667 received MsgRequestVoteResponse from 667 at term 8"]
[2019/05/01 12:40:24.837 -07:00] [INFO] [unknown:828] ["[region 129] 667 [logterm: 7, index: 13] sent MsgRequestVote request to 273 at term 8"]
[2019/05/01 12:40:24.837 -07:00] [INFO] [unknown:828] ["[region 129] 667 [logterm: 7, index: 13] sent MsgRequestVote request to 131 at term 8"]
[2019/05/01 12:40:24.890 -07:00] [INFO] [unknown:854] ["[region 129] 667 received MsgRequestVoteResponse from 131 at term 8"]
[2019/05/01 12:40:24.890 -07:00] [INFO] [unknown:1550] ["[region 129] 667 [quorum:2] has received 2 MsgRequestVoteResponse votes and 0 vote rejections"]
[2019/05/01 12:40:24.890 -07:00] [INFO] [unknown:789] ["[region 129] 667 became leader at term 8"]
[2019/05/01 12:40:25.068 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 4, 5], lock_version: 408089952212484097, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 4, 5], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:40:25.312 -07:00] [INFO] [pd.rs:558] ["try to change peer"] [peer="Peer { id: 2050, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [change_type=AddLearnerNode] [region_id=102]
[2019/05/01 12:40:25.312 -07:00] [INFO] [peer.rs:1953] ["propose conf change peer"] [change_peer=2050] [change_type=AddLearnerNode] [peer_id=171] [region_id=102]
[2019/05/01 12:40:25.359 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddLearnerNode, peer: Some(Peer { id: 2050, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=12] [term=8] [peer_id=171] [region_id=102]
[2019/05/01 12:40:25.359 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 5, version: 17, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddLearner] [peer_id=171] [region_id=102]
[2019/05/01 12:40:25.359 -07:00] [INFO] [apply.rs:1476] ["add learner successfully"] [region="Region { id: 102, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 97, 117, 116, 111, 255, 99, 111, 109, 109, 255, 105, 116, 0, 255, 0, 0, 0, 0, 0, 249, 0, 0, 253], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 97, 117, 116, 111, 255, 109, 97, 116, 105, 255, 99, 95, 115, 255, 112, 95, 112, 114, 105, 255, 118, 105, 255, 108, 101, 103, 101, 115, 0, 254, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 5, version: 17, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 103, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 104, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 171, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 2050, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=171] [region_id=102]
[2019/05/01 12:40:25.379 -07:00] [INFO] [peer.rs:1318] ["notify pd with change peer region"] [region="Region { id: 102, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 97, 117, 116, 111, 255, 99, 111, 109, 109, 255, 105, 116, 0, 255, 0, 0, 0, 0, 0, 249, 0, 0, 253], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 97, 117, 116, 111, 255, 109, 97, 116, 105, 255, 99, 95, 115, 255, 112, 95, 112, 114, 105, 255, 118, 105, 255, 108, 101, 103, 101, 115, 0, 254, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 17, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 103, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 104, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 171, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 2050, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=171] [region_id=102]
[2019/05/01 12:40:25.393 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 4, 5], lock_version: 408089952304234520, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 4, 5], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:40:25.538 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 4, 9], lock_version: 408089952369770501, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 4, 9], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:40:25.824 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 4, 6], lock_version: 408089952435306505, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 4, 10], lock_ttl: 3090, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:40:25.825 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 4, 6], lock_version: 408089952435306505, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 4, 10], lock_ttl: 3090, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:40:26.061 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_1931_6_7_(default|lock|write).sst] [snap_key=1931_6_7]
[2019/05/01 12:40:26.061 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_1891_6_7_(default|lock|write).sst] [snap_key=1891_6_7]
[2019/05/01 12:40:26.071 -07:00] [INFO] [unknown:1792] ["[region 1891] 2048 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 7, term: 6]"]
[2019/05/01 12:40:26.071 -07:00] [INFO] [unknown:1816] ["[region 1891] 2048 restored progress of 1892 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:40:26.071 -07:00] [INFO] [unknown:1816] ["[region 1891] 2048 restored progress of 1893 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:40:26.071 -07:00] [INFO] [unknown:1816] ["[region 1891] 2048 restored progress of 1894 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:40:26.071 -07:00] [INFO] [unknown:1816] ["[region 1891] 2048 restored progress of 2048 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:40:26.071 -07:00] [INFO] [unknown:474] ["[region 1891] 2048 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 7, term: 6]"]
[2019/05/01 12:40:26.071 -07:00] [INFO] [unknown:1736] ["[region 1891] 2048 [commit: 7] restored snapshot [index: 7, term: 6]"]
[2019/05/01 12:40:26.071 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=2048] [region_id=1891]
[2019/05/01 12:40:26.071 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 7, truncated_state: Some(RaftTruncatedState { index: 7, term: 6, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 1891, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 109, 97, 120, 95, 255, 116, 109, 112, 95, 255, 116, 97, 98, 255, 108, 101, 115, 0, 0, 253, 0, 0, 253], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 109, 97, 120, 95, 255, 117, 115, 101, 114, 255, 95, 99, 111, 255, 110, 110, 101, 99, 116, 255, 105, 111, 255, 110, 115, 0, 0, 0, 0, 251, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 287, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1892, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1893, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1894, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 2048, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=2048] [region_id=1891]
[2019/05/01 12:40:26.071 -07:00] [INFO] [unknown:1792] ["[region 1931] 2047 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 7, term: 6]"]
[2019/05/01 12:40:26.071 -07:00] [INFO] [unknown:1816] ["[region 1931] 2047 restored progress of 1932 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:40:26.071 -07:00] [INFO] [unknown:1816] ["[region 1931] 2047 restored progress of 1933 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:40:26.071 -07:00] [INFO] [unknown:1816] ["[region 1931] 2047 restored progress of 1934 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:40:26.071 -07:00] [INFO] [unknown:1816] ["[region 1931] 2047 restored progress of 2047 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:40:26.071 -07:00] [INFO] [unknown:474] ["[region 1931] 2047 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 7, term: 6]"]
[2019/05/01 12:40:26.071 -07:00] [INFO] [unknown:1736] ["[region 1931] 2047 [commit: 7] restored snapshot [index: 7, term: 6]"]
[2019/05/01 12:40:26.071 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=2047] [region_id=1931]
[2019/05/01 12:40:26.071 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 7, truncated_state: Some(RaftTruncatedState { index: 7, term: 6, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 1931, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 109, 121, 105, 115, 255, 97, 109, 95, 109, 255, 97, 120, 95, 255, 115, 111, 114, 116, 95, 255, 102, 105, 255, 108, 101, 95, 115, 105, 122, 255, 101, 255, 0, 0, 0, 0, 0, 0, 0, 248, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 109, 121, 105, 115, 255, 97, 109, 95, 109, 255, 109, 97, 112, 255, 95, 115, 105, 122, 101, 255, 0, 0, 255, 0, 0, 0, 0, 0, 0, 247, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 297, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1932, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1933, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1934, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 2047, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=2047] [region_id=1931]
[2019/05/01 12:40:26.087 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 1891, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 109, 97, 120, 95, 255, 116, 109, 112, 95, 255, 116, 97, 98, 255, 108, 101, 115, 0, 0, 253, 0, 0, 253], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 109, 97, 120, 95, 255, 117, 115, 101, 114, 255, 95, 99, 111, 255, 110, 110, 101, 99, 116, 255, 105, 111, 255, 110, 115, 0, 0, 0, 0, 251, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 287, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1892, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1893, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1894, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 2048, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=2048] [region_id=1891]
[2019/05/01 12:40:26.087 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=1891]
[2019/05/01 12:40:26.087 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 1931, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 109, 121, 105, 115, 255, 97, 109, 95, 109, 255, 97, 120, 95, 255, 115, 111, 114, 116, 95, 255, 102, 105, 255, 108, 101, 95, 115, 105, 122, 255, 101, 255, 0, 0, 0, 0, 0, 0, 0, 248, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 109, 121, 105, 115, 255, 97, 109, 95, 109, 255, 109, 97, 112, 255, 95, 115, 105, 122, 101, 255, 0, 0, 255, 0, 0, 0, 0, 0, 0, 247, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 297, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1932, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1933, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1934, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 2047, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=2047] [region_id=1931]
[2019/05/01 12:40:26.087 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 1891] 2048"]
[2019/05/01 12:40:26.087 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 1931] 2047"]
[2019/05/01 12:40:26.110 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=23.146184ms] [region_id=1891]
[2019/05/01 12:40:26.110 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=1931]
[2019/05/01 12:40:26.135 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=24.398378ms] [region_id=1931]
[2019/05/01 12:40:26.263 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 4, 14], lock_version: 408089952540164110, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 4, 14], lock_ttl: 3078, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:40:26.336 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 4, 14], lock_version: 408089952540164110, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 4, 14], lock_ttl: 3078, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:40:26.396 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 4, 6], lock_version: 408089952566378506, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 4, 10], lock_ttl: 3056, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:40:26.550 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 4, 11], lock_version: 408089952645021697, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 4, 11], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:40:26.630 -07:00] [INFO] [peer_storage.rs:759] ["requesting snapshot"] [peer_id=171] [region_id=102]
[2019/05/01 12:40:26.631 -07:00] [INFO] [snap.rs:757] ["scan snapshot of one cf"] [size=0] [key_count=0] [cf=default] [snapshot=/opt/tidb/data/kv/snap/gen_102_8_12_(default|lock|write).sst] [region_id=102]
[2019/05/01 12:40:26.631 -07:00] [INFO] [snap.rs:757] ["scan snapshot of one cf"] [size=0] [key_count=0] [cf=lock] [snapshot=/opt/tidb/data/kv/snap/gen_102_8_12_(default|lock|write).sst] [region_id=102]
[2019/05/01 12:40:26.631 -07:00] [INFO] [snap.rs:757] ["scan snapshot of one cf"] [size=138] [key_count=2] [cf=write] [snapshot=/opt/tidb/data/kv/snap/gen_102_8_12_(default|lock|write).sst] [region_id=102]
[2019/05/01 12:40:26.642 -07:00] [INFO] [snap.rs:875] ["scan snapshot"] [takes=11.650042ms] [size=1375] [key_count=2] [snapshot=/opt/tidb/data/kv/snap/gen_102_8_12_(default|lock|write).sst] [region_id=102]
[2019/05/01 12:40:26.672 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 4, 11], lock_version: 408089952658128902, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 4, 11], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:40:26.690 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 4, 14], lock_version: 408089952671236104, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 4, 16], lock_ttl: 3002, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:40:26.742 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 4, 12], lock_version: 408089952671236100, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 4, 12], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:40:27.106 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 2048, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=8] [term=6] [peer_id=2048] [region_id=1891]
[2019/05/01 12:40:27.106 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 6, version: 287, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=2048] [region_id=1891]
[2019/05/01 12:40:27.106 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 1891, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 109, 97, 120, 95, 255, 116, 109, 112, 95, 255, 116, 97, 98, 255, 108, 101, 115, 0, 0, 253, 0, 0, 253], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 109, 97, 120, 95, 255, 117, 115, 101, 114, 255, 95, 99, 111, 255, 110, 110, 101, 99, 116, 255, 105, 111, 255, 110, 115, 0, 0, 0, 0, 251, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 287, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1892, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1893, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1894, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 2048, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 2048, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=2048] [region_id=1891]
[2019/05/01 12:40:27.112 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 2047, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=8] [term=6] [peer_id=2047] [region_id=1931]
[2019/05/01 12:40:27.112 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 6, version: 297, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=2047] [region_id=1931]
[2019/05/01 12:40:27.112 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 1931, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 109, 121, 105, 115, 255, 97, 109, 95, 109, 255, 97, 120, 95, 255, 115, 111, 114, 116, 95, 255, 102, 105, 255, 108, 101, 95, 115, 105, 122, 255, 101, 255, 0, 0, 0, 0, 0, 0, 0, 248, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 109, 121, 105, 115, 255, 97, 109, 95, 109, 255, 109, 97, 112, 255, 95, 115, 105, 122, 101, 255, 0, 0, 255, 0, 0, 0, 0, 0, 0, 247, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 297, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1932, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1933, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1934, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 2047, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 2047, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=2047] [region_id=1931]
[2019/05/01 12:40:27.216 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 1892, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=9] [term=6] [peer_id=2048] [region_id=1891]
[2019/05/01 12:40:27.216 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 7, version: 287, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=2048] [region_id=1891]
[2019/05/01 12:40:27.216 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 1891, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 109, 97, 120, 95, 255, 116, 109, 112, 95, 255, 116, 97, 98, 255, 108, 101, 115, 0, 0, 253, 0, 0, 253], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 109, 97, 120, 95, 255, 117, 115, 101, 114, 255, 95, 99, 111, 255, 110, 110, 101, 99, 116, 255, 105, 111, 255, 110, 115, 0, 0, 0, 0, 251, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 7, version: 287, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1892, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1893, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1894, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 2048, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1892, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=2048] [region_id=1891]
[2019/05/01 12:40:27.226 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 1934, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=9] [term=6] [peer_id=2047] [region_id=1931]
[2019/05/01 12:40:27.226 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 7, version: 297, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=2047] [region_id=1931]
[2019/05/01 12:40:27.226 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 1931, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 109, 121, 105, 115, 255, 97, 109, 95, 109, 255, 97, 120, 95, 255, 115, 111, 114, 116, 95, 255, 102, 105, 255, 108, 101, 95, 115, 105, 122, 255, 101, 255, 0, 0, 0, 0, 0, 0, 0, 248, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 109, 121, 105, 115, 255, 97, 109, 95, 109, 255, 109, 97, 112, 255, 95, 115, 105, 122, 101, 255, 0, 0, 255, 0, 0, 0, 0, 0, 0, 247, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 7, version: 297, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1932, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1933, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1934, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 2047, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1934, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=2047] [region_id=1931]
[2019/05/01 12:40:27.560 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 4, 17], lock_version: 408089952854736907, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 4, 18], lock_ttl: 3002, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:40:27.627 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 4, 17], lock_version: 408089952920272914, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 4, 20], lock_ttl: 3002, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:40:27.651 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 4, 17], lock_version: 408089952920272914, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 4, 20], lock_ttl: 3002, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:40:27.750 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 4, 19], lock_version: 408089952959594507, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 4, 19], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:40:27.955 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 4, 17], lock_version: 408089952998916117, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 4, 21], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:40:28.014 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=2053] [region_id=1985]
[2019/05/01 12:40:28.015 -07:00] [INFO] [unknown:719] ["[region 1985] 2053 became follower at term 0"]
[2019/05/01 12:40:28.015 -07:00] [INFO] [unknown:295] ["[region 1985] 2053 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:40:28.015 -07:00] [INFO] [unknown:719] ["[region 1985] 2053 became follower at term 1"]
[2019/05/01 12:40:28.031 -07:00] [INFO] [unknown:920] ["[region 1985] 2053 [term: 1] received a MsgHeartbeat message with higher term from 1987 [term: 6]"]
[2019/05/01 12:40:28.031 -07:00] [INFO] [unknown:719] ["[region 1985] 2053 became follower at term 6"]
[2019/05/01 12:40:28.211 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 4, 18], lock_version: 408089953077559303, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 4, 20], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:40:28.326 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 4, 19], lock_version: 408089953103773697, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 4, 19], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:40:28.378 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 4, 21], lock_version: 408089953116880911, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 4, 21], lock_ttl: 3002, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:40:28.422 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=2051] [region_id=1244]
[2019/05/01 12:40:28.422 -07:00] [INFO] [unknown:719] ["[region 1244] 2051 became follower at term 0"]
[2019/05/01 12:40:28.422 -07:00] [INFO] [unknown:295] ["[region 1244] 2051 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:40:28.422 -07:00] [INFO] [unknown:719] ["[region 1244] 2051 became follower at term 1"]
[2019/05/01 12:40:28.422 -07:00] [INFO] [unknown:920] ["[region 1244] 2051 [term: 1] received a MsgHeartbeat message with higher term from 1247 [term: 6]"]
[2019/05/01 12:40:28.422 -07:00] [INFO] [unknown:719] ["[region 1244] 2051 became follower at term 6"]
[2019/05/01 12:40:28.437 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 4, 23], lock_version: 408089953129988108, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 4, 23], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:40:28.649 -07:00] [INFO] [unknown:841] ["New connected subchannel at 0x7f859006c300 for subchannel 0x7f8640441a00"]
[2019/05/01 12:40:28.656 -07:00] [INFO] [snap.rs:389] ["sent snapshot"] [duration=8.375632ms] [size=1375] [snap_key=102_8_12] [region_id=102]
[2019/05/01 12:40:28.656 -07:00] [INFO] [peer.rs:538] ["report snapshot status"] [status=Finish] [to="Peer { id: 2050, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=171] [region_id=102]
[2019/05/01 12:40:28.811 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 4, 23], lock_version: 408089953234845707, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 4, 23], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:40:28.844 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 4, 23], lock_version: 408089953234845707, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 4, 25], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:40:29.173 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 4, 26], lock_version: 408089953313488901, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 4, 26], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:40:29.181 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 4, 23], lock_version: 408089953287274501, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 4, 23], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:40:29.190 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 4, 23], lock_version: 408089953287274501, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 4, 23], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:40:29.319 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 4, 24], lock_version: 408089953365917709, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 4, 24], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:40:29.450 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 4, 25], lock_version: 408089953379024901, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 4, 25], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:40:29.628 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 4, 24], lock_version: 408089953444560910, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 4, 29], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:40:29.634 -07:00] [INFO] [pd.rs:558] ["try to change peer"] [peer="Peer { id: 2050, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [change_type=AddNode] [region_id=102]
[2019/05/01 12:40:29.634 -07:00] [INFO] [peer.rs:1953] ["propose conf change peer"] [change_peer=2050] [change_type=AddNode] [peer_id=171] [region_id=102]
[2019/05/01 12:40:29.675 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 2050, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=13] [term=8] [peer_id=171] [region_id=102]
[2019/05/01 12:40:29.675 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 6, version: 17, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=171] [region_id=102]
[2019/05/01 12:40:29.675 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 102, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 97, 117, 116, 111, 255, 99, 111, 109, 109, 255, 105, 116, 0, 255, 0, 0, 0, 0, 0, 249, 0, 0, 253], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 97, 117, 116, 111, 255, 109, 97, 116, 105, 255, 99, 95, 115, 255, 112, 95, 112, 114, 105, 255, 118, 105, 255, 108, 101, 103, 101, 115, 0, 254, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 17, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 103, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 104, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 171, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 2050, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 2050, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=171] [region_id=102]
[2019/05/01 12:40:29.700 -07:00] [INFO] [peer.rs:1318] ["notify pd with change peer region"] [region="Region { id: 102, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 97, 117, 116, 111, 255, 99, 111, 109, 109, 255, 105, 116, 0, 255, 0, 0, 0, 0, 0, 249, 0, 0, 253], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 97, 117, 116, 111, 255, 109, 97, 116, 105, 255, 99, 95, 115, 255, 112, 95, 112, 114, 105, 255, 118, 105, 255, 108, 101, 103, 101, 115, 0, 254, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 7, version: 17, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 103, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 104, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 171, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 2050, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=171] [region_id=102]
[2019/05/01 12:40:29.707 -07:00] [INFO] [pd.rs:558] ["try to change peer"] [peer="Peer { id: 103, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [change_type=RemoveNode] [region_id=102]
[2019/05/01 12:40:29.707 -07:00] [INFO] [peer.rs:1953] ["propose conf change peer"] [change_peer=103] [change_type=RemoveNode] [peer_id=171] [region_id=102]
[2019/05/01 12:40:29.717 -07:00] [INFO] [pd.rs:558] ["try to change peer"] [peer="Peer { id: 103, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [change_type=RemoveNode] [region_id=102]
[2019/05/01 12:40:29.728 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 4, 26], lock_version: 408089953457668102, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 4, 26], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:40:29.748 -07:00] [INFO] [peer.rs:1927] ["there is a pending conf change, try later"] [peer_id=171] [region_id=102]
[2019/05/01 12:40:29.748 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 103, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=14] [term=8] [peer_id=171] [region_id=102]
[2019/05/01 12:40:29.748 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 7, version: 17, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=171] [region_id=102]
[2019/05/01 12:40:29.748 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 102, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 97, 117, 116, 111, 255, 99, 111, 109, 109, 255, 105, 116, 0, 255, 0, 0, 0, 0, 0, 249, 0, 0, 253], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 97, 117, 116, 111, 255, 109, 97, 116, 105, 255, 99, 95, 115, 255, 112, 95, 112, 114, 105, 255, 118, 105, 255, 108, 101, 103, 101, 115, 0, 254, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 7, version: 17, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 103, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 104, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 171, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 2050, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 103, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=171] [region_id=102]
[2019/05/01 12:40:29.762 -07:00] [INFO] [peer.rs:1318] ["notify pd with change peer region"] [region="Region { id: 102, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 97, 117, 116, 111, 255, 99, 111, 109, 109, 255, 105, 116, 0, 255, 0, 0, 0, 0, 0, 249, 0, 0, 253], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 97, 117, 116, 111, 255, 109, 97, 116, 105, 255, 99, 95, 115, 255, 112, 95, 112, 114, 105, 255, 118, 105, 255, 108, 101, 103, 101, 115, 0, 254, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 8, version: 17, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 104, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 171, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 2050, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=171] [region_id=102]
[2019/05/01 12:40:29.895 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 4, 24], lock_version: 408089953523204100, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 4, 24], lock_ttl: 3003, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:40:30.013 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_1985_6_7_(default|lock|write).sst] [snap_key=1985_6_7]
[2019/05/01 12:40:30.021 -07:00] [INFO] [unknown:1792] ["[region 1985] 2053 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 7, term: 6]"]
[2019/05/01 12:40:30.021 -07:00] [INFO] [unknown:1816] ["[region 1985] 2053 restored progress of 1986 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:40:30.021 -07:00] [INFO] [unknown:1816] ["[region 1985] 2053 restored progress of 1987 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:40:30.021 -07:00] [INFO] [unknown:1816] ["[region 1985] 2053 restored progress of 1988 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:40:30.021 -07:00] [INFO] [unknown:1816] ["[region 1985] 2053 restored progress of 2053 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:40:30.021 -07:00] [INFO] [unknown:474] ["[region 1985] 2053 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 7, term: 6]"]
[2019/05/01 12:40:30.021 -07:00] [INFO] [unknown:1736] ["[region 1985] 2053 [commit: 7] restored snapshot [index: 7, term: 6]"]
[2019/05/01 12:40:30.021 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=2053] [region_id=1985]
[2019/05/01 12:40:30.021 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 7, truncated_state: Some(RaftTruncatedState { index: 7, term: 6, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 1985, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 110, 100, 98, 95, 255, 101, 118, 101, 110, 255, 116, 98, 117, 255, 102, 102, 101, 114, 95, 255, 102, 114, 255, 101, 101, 95, 112, 101, 114, 255, 99, 255, 101, 110, 116, 0, 0, 0, 0, 251, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 110, 100, 98, 95, 255, 101, 118, 101, 110, 255, 116, 98, 117, 255, 102, 102, 101, 114, 95, 255, 109, 97, 255, 120, 95, 97, 108, 108, 111, 255, 99, 255, 0, 0, 0, 0, 0, 0, 0, 248, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 307, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1986, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1987, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1988, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 2053, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=2053] [region_id=1985]
[2019/05/01 12:40:30.039 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 1985, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 110, 100, 98, 95, 255, 101, 118, 101, 110, 255, 116, 98, 117, 255, 102, 102, 101, 114, 95, 255, 102, 114, 255, 101, 101, 95, 112, 101, 114, 255, 99, 255, 101, 110, 116, 0, 0, 0, 0, 251, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 110, 100, 98, 95, 255, 101, 118, 101, 110, 255, 116, 98, 117, 255, 102, 102, 101, 114, 95, 255, 109, 97, 255, 120, 95, 97, 108, 108, 111, 255, 99, 255, 0, 0, 0, 0, 0, 0, 0, 248, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 307, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1986, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1987, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1988, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 2053, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=2053] [region_id=1985]
[2019/05/01 12:40:30.039 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 1985] 2053"]
[2019/05/01 12:40:30.039 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=1985]
[2019/05/01 12:40:30.063 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=24.064802ms] [region_id=1985]
[2019/05/01 12:40:30.189 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 4, 26], lock_version: 408089953562525699, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 4, 28], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:40:30.260 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 4, 26], lock_version: 408089953562525699, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 4, 28], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:40:30.367 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 4, 28], lock_version: 408089953628061705, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 4, 28], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:40:30.425 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_1244_6_10_(default|lock|write).sst] [snap_key=1244_6_10]
[2019/05/01 12:40:30.430 -07:00] [INFO] [unknown:1792] ["[region 1244] 2051 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 10, term: 6]"]
[2019/05/01 12:40:30.430 -07:00] [INFO] [unknown:1816] ["[region 1244] 2051 restored progress of 1245 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:40:30.430 -07:00] [INFO] [unknown:1816] ["[region 1244] 2051 restored progress of 1247 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:40:30.430 -07:00] [INFO] [unknown:1816] ["[region 1244] 2051 restored progress of 1696 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:40:30.430 -07:00] [INFO] [unknown:1816] ["[region 1244] 2051 restored progress of 2051 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:40:30.430 -07:00] [INFO] [unknown:474] ["[region 1244] 2051 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 10, term: 6]"]
[2019/05/01 12:40:30.430 -07:00] [INFO] [unknown:1736] ["[region 1244] 2051 [commit: 10] restored snapshot [index: 10, term: 6]"]
[2019/05/01 12:40:30.430 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=2051] [region_id=1244]
[2019/05/01 12:40:30.430 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 10, truncated_state: Some(RaftTruncatedState { index: 10, term: 6, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 1244, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 102, 255, 116, 95, 115, 255, 111, 114, 116, 95, 112, 255, 108, 108, 255, 95, 100, 101, 103, 114, 101, 255, 101, 255, 0, 0, 0, 0, 0, 0, 0, 248, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 102, 255, 116, 95, 116, 255, 111, 116, 97, 108, 95, 255, 99, 97, 255, 99, 104, 101, 95, 115, 105, 255, 122, 255, 101, 0, 0, 0, 0, 0, 0, 249, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 157, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1245, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1247, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1696, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 2051, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=2051] [region_id=1244]
[2019/05/01 12:40:30.456 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 1244, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 102, 255, 116, 95, 115, 255, 111, 114, 116, 95, 112, 255, 108, 108, 255, 95, 100, 101, 103, 114, 101, 255, 101, 255, 0, 0, 0, 0, 0, 0, 0, 248, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 102, 255, 116, 95, 116, 255, 111, 116, 97, 108, 95, 255, 99, 97, 255, 99, 104, 101, 95, 115, 105, 255, 122, 255, 101, 0, 0, 0, 0, 0, 0, 249, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 157, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1245, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1247, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1696, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 2051, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=2051] [region_id=1244]
[2019/05/01 12:40:30.456 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 1244] 2051"]
[2019/05/01 12:40:30.456 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=1244]
[2019/05/01 12:40:30.472 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=16.254362ms] [region_id=1244]
[2019/05/01 12:40:31.084 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 2053, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=8] [term=6] [peer_id=2053] [region_id=1985]
[2019/05/01 12:40:31.084 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 6, version: 307, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=2053] [region_id=1985]
[2019/05/01 12:40:31.084 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 1985, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 110, 100, 98, 95, 255, 101, 118, 101, 110, 255, 116, 98, 117, 255, 102, 102, 101, 114, 95, 255, 102, 114, 255, 101, 101, 95, 112, 101, 114, 255, 99, 255, 101, 110, 116, 0, 0, 0, 0, 251, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 110, 100, 98, 95, 255, 101, 118, 101, 110, 255, 116, 98, 117, 255, 102, 102, 101, 114, 95, 255, 109, 97, 255, 120, 95, 97, 108, 108, 111, 255, 99, 255, 0, 0, 0, 0, 0, 0, 0, 248, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 307, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1986, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1987, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1988, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 2053, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 2053, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=2053] [region_id=1985]
[2019/05/01 12:40:31.134 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 4, 34], lock_version: 408089953837776901, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 4, 34], lock_ttl: 3002, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:40:31.144 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 1986, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=9] [term=6] [peer_id=2053] [region_id=1985]
[2019/05/01 12:40:31.144 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 7, version: 307, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=2053] [region_id=1985]
[2019/05/01 12:40:31.144 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 1985, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 110, 100, 98, 95, 255, 101, 118, 101, 110, 255, 116, 98, 117, 255, 102, 102, 101, 114, 95, 255, 102, 114, 255, 101, 101, 95, 112, 101, 114, 255, 99, 255, 101, 110, 116, 0, 0, 0, 0, 251, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 110, 100, 98, 95, 255, 101, 118, 101, 110, 255, 116, 98, 117, 255, 102, 102, 101, 114, 95, 255, 109, 97, 255, 120, 95, 97, 108, 108, 111, 255, 99, 255, 0, 0, 0, 0, 0, 0, 0, 248, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 7, version: 307, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1986, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1987, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1988, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 2053, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1986, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=2053] [region_id=1985]
[2019/05/01 12:40:31.191 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 4, 34], lock_version: 408089953837776901, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 4, 34], lock_ttl: 3002, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:40:31.474 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 2051, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=11] [term=6] [peer_id=2051] [region_id=1244]
[2019/05/01 12:40:31.474 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 9, version: 157, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=2051] [region_id=1244]
[2019/05/01 12:40:31.474 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 1244, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 102, 255, 116, 95, 115, 255, 111, 114, 116, 95, 112, 255, 108, 108, 255, 95, 100, 101, 103, 114, 101, 255, 101, 255, 0, 0, 0, 0, 0, 0, 0, 248, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 102, 255, 116, 95, 116, 255, 111, 116, 97, 108, 95, 255, 99, 97, 255, 99, 104, 101, 95, 115, 105, 255, 122, 255, 101, 0, 0, 0, 0, 0, 0, 249, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 157, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1245, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1247, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1696, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 2051, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 2051, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=2051] [region_id=1244]
[2019/05/01 12:40:31.504 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 4, 33], lock_version: 408089953916420098, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 4, 33], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:40:31.544 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 1245, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=12] [term=6] [peer_id=2051] [region_id=1244]
[2019/05/01 12:40:31.544 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 10, version: 157, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=2051] [region_id=1244]
[2019/05/01 12:40:31.544 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 1244, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 102, 255, 116, 95, 115, 255, 111, 114, 116, 95, 112, 255, 108, 108, 255, 95, 100, 101, 103, 114, 101, 255, 101, 255, 0, 0, 0, 0, 0, 0, 0, 248, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 102, 255, 116, 95, 116, 255, 111, 116, 97, 108, 95, 255, 99, 97, 255, 99, 104, 101, 95, 115, 105, 255, 122, 255, 101, 0, 0, 0, 0, 0, 0, 249, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 10, version: 157, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1245, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1247, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1696, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 2051, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1245, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=2051] [region_id=1244]
[2019/05/01 12:40:31.577 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 4, 33], lock_version: 408089953916420098, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 4, 33], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:40:31.709 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 4, 35], lock_version: 408089953890205699, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 4, 35], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:40:31.998 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 4, 31], lock_version: 408089954008170505, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 4, 35], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:40:32.643 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=2056] [region_id=816]
[2019/05/01 12:40:32.643 -07:00] [INFO] [unknown:719] ["[region 816] 2056 became follower at term 0"]
[2019/05/01 12:40:32.643 -07:00] [INFO] [unknown:295] ["[region 816] 2056 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:40:32.643 -07:00] [INFO] [unknown:719] ["[region 816] 2056 became follower at term 1"]
[2019/05/01 12:40:32.643 -07:00] [INFO] [unknown:920] ["[region 816] 2056 [term: 1] received a MsgHeartbeat message with higher term from 817 [term: 6]"]
[2019/05/01 12:40:32.643 -07:00] [INFO] [unknown:719] ["[region 816] 2056 became follower at term 6"]
[2019/05/01 12:40:33.008 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 4, 32], lock_version: 408089954086813700, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 4, 32], lock_ttl: 3595, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:40:33.041 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 4, 34], lock_version: 408089954309636108, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 4, 34], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:40:33.075 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 4, 34], lock_version: 408089954309636108, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 4, 38], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:40:33.870 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 4, 38], lock_version: 408089954545565700, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 4, 38], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:40:33.922 -07:00] [INFO] [peer.rs:626] ["failed to schedule peer tick"] [err="sending on a disconnected channel"] [tick=CheckPeerStaleState] [peer_id=93] [region_id=91]
[2019/05/01 12:40:33.922 -07:00] [INFO] [peer.rs:626] ["failed to schedule peer tick"] [err="sending on a disconnected channel"] [tick=CheckPeerStaleState] [peer_id=90] [region_id=88]
[2019/05/01 12:40:33.944 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 4, 38], lock_version: 408089954545565700, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 4, 38], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:40:34.160 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 4, 37], lock_version: 408089954611101705, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 4, 37], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:40:34.287 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=2098] [region_id=1679]
[2019/05/01 12:40:34.287 -07:00] [INFO] [unknown:719] ["[region 1679] 2098 became follower at term 0"]
[2019/05/01 12:40:34.287 -07:00] [INFO] [unknown:295] ["[region 1679] 2098 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:40:34.287 -07:00] [INFO] [unknown:719] ["[region 1679] 2098 became follower at term 1"]
[2019/05/01 12:40:34.287 -07:00] [INFO] [unknown:920] ["[region 1679] 2098 [term: 1] received a MsgHeartbeat message with higher term from 1680 [term: 7]"]
[2019/05/01 12:40:34.287 -07:00] [INFO] [unknown:719] ["[region 1679] 2098 became follower at term 7"]
[2019/05/01 12:40:34.636 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_816_6_7_(default|lock|write).sst] [snap_key=816_6_7]
[2019/05/01 12:40:34.649 -07:00] [INFO] [unknown:1792] ["[region 816] 2056 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 7, term: 6]"]
[2019/05/01 12:40:34.649 -07:00] [INFO] [unknown:1816] ["[region 816] 2056 restored progress of 817 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:40:34.649 -07:00] [INFO] [unknown:1816] ["[region 816] 2056 restored progress of 818 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:40:34.649 -07:00] [INFO] [unknown:1816] ["[region 816] 2056 restored progress of 819 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:40:34.649 -07:00] [INFO] [unknown:1816] ["[region 816] 2056 restored progress of 2056 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:40:34.649 -07:00] [INFO] [unknown:474] ["[region 816] 2056 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 7, term: 6]"]
[2019/05/01 12:40:34.649 -07:00] [INFO] [unknown:1736] ["[region 816] 2056 [commit: 7] restored snapshot [index: 7, term: 6]"]
[2019/05/01 12:40:34.649 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=2056] [region_id=816]
[2019/05/01 12:40:34.649 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 7, truncated_state: Some(RaftTruncatedState { index: 7, term: 6, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 816, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 103, 110, 111, 255, 114, 101, 95, 98, 255, 117, 105, 108, 255, 116, 105, 110, 95, 105, 255, 110, 110, 255, 111, 100, 98, 0, 0, 0, 252, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 105, 116, 255, 95, 99, 111, 110, 255, 110, 101, 99, 255, 116, 0, 0, 0, 0, 251, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 97, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 817, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 818, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 819, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 2056, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=2056] [region_id=816]
[2019/05/01 12:40:34.683 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 816, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 103, 110, 111, 255, 114, 101, 95, 98, 255, 117, 105, 108, 255, 116, 105, 110, 95, 105, 255, 110, 110, 255, 111, 100, 98, 0, 0, 0, 252, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 105, 116, 255, 95, 99, 111, 110, 255, 110, 101, 99, 255, 116, 0, 0, 0, 0, 251, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 97, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 817, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 818, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 819, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 2056, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=2056] [region_id=816]
[2019/05/01 12:40:34.683 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 816] 2056"]
[2019/05/01 12:40:34.683 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=816]
[2019/05/01 12:40:34.743 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=60.036471ms] [region_id=816]
[2019/05/01 12:40:34.746 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 4, 41], lock_version: 408089954742173699, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 4, 42], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:40:35.033 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 4, 39], lock_version: 408089954860138500, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 4, 43], lock_ttl: 3002, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:40:35.294 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=2099] [region_id=221]
[2019/05/01 12:40:35.294 -07:00] [INFO] [unknown:719] ["[region 221] 2099 became follower at term 0"]
[2019/05/01 12:40:35.294 -07:00] [INFO] [unknown:295] ["[region 221] 2099 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:40:35.294 -07:00] [INFO] [unknown:719] ["[region 221] 2099 became follower at term 1"]
[2019/05/01 12:40:35.294 -07:00] [INFO] [unknown:920] ["[region 221] 2099 [term: 1] received a MsgHeartbeat message with higher term from 1198 [term: 8]"]
[2019/05/01 12:40:35.294 -07:00] [INFO] [unknown:719] ["[region 221] 2099 became follower at term 8"]
[2019/05/01 12:40:35.438 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 4, 40], lock_version: 408089954886352902, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 4, 40], lock_ttl: 3002, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:40:35.542 -07:00] [INFO] [unknown:1625] ["[region 1891] 2048 [term 6] received MsgTimeoutNow from 1893 and starts an election to get leadership."]
[2019/05/01 12:40:35.543 -07:00] [INFO] [unknown:739] ["[region 1891] 2048 became candidate at term 7"]
[2019/05/01 12:40:35.543 -07:00] [INFO] [unknown:854] ["[region 1891] 2048 received MsgRequestVoteResponse from 2048 at term 7"]
[2019/05/01 12:40:35.543 -07:00] [INFO] [unknown:828] ["[region 1891] 2048 [logterm: 6, index: 9] sent MsgRequestVote request to 1893 at term 7"]
[2019/05/01 12:40:35.543 -07:00] [INFO] [unknown:828] ["[region 1891] 2048 [logterm: 6, index: 9] sent MsgRequestVote request to 1894 at term 7"]
[2019/05/01 12:40:35.582 -07:00] [INFO] [unknown:1625] ["[region 1843] 2004 [term 6] received MsgTimeoutNow from 1845 and starts an election to get leadership."]
[2019/05/01 12:40:35.582 -07:00] [INFO] [unknown:739] ["[region 1843] 2004 became candidate at term 7"]
[2019/05/01 12:40:35.582 -07:00] [INFO] [unknown:854] ["[region 1843] 2004 received MsgRequestVoteResponse from 2004 at term 7"]
[2019/05/01 12:40:35.582 -07:00] [INFO] [unknown:828] ["[region 1843] 2004 [logterm: 6, index: 9] sent MsgRequestVote request to 1844 at term 7"]
[2019/05/01 12:40:35.582 -07:00] [INFO] [unknown:828] ["[region 1843] 2004 [logterm: 6, index: 9] sent MsgRequestVote request to 1845 at term 7"]
[2019/05/01 12:40:35.590 -07:00] [INFO] [unknown:854] ["[region 1891] 2048 received MsgRequestVoteResponse from 1894 at term 7"]
[2019/05/01 12:40:35.590 -07:00] [INFO] [unknown:1550] ["[region 1891] 2048 [quorum:2] has received 2 MsgRequestVoteResponse votes and 0 vote rejections"]
[2019/05/01 12:40:35.590 -07:00] [INFO] [unknown:789] ["[region 1891] 2048 became leader at term 7"]
[2019/05/01 12:40:35.592 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 4, 39], lock_version: 408089954991210516, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 4, 39], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:40:35.655 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 4, 39], lock_version: 408089954991210516, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 4, 39], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:40:35.660 -07:00] [INFO] [unknown:854] ["[region 1843] 2004 received MsgRequestVoteResponse from 1845 at term 7"]
[2019/05/01 12:40:35.660 -07:00] [INFO] [unknown:1550] ["[region 1843] 2004 [quorum:2] has received 2 MsgRequestVoteResponse votes and 0 vote rejections"]
[2019/05/01 12:40:35.660 -07:00] [INFO] [unknown:789] ["[region 1843] 2004 became leader at term 7"]
[2019/05/01 12:40:35.713 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 4, 42], lock_version: 408089955030532099, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 4, 42], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:40:35.773 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 2056, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=8] [term=6] [peer_id=2056] [region_id=816]
[2019/05/01 12:40:35.773 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 6, version: 97, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=2056] [region_id=816]
[2019/05/01 12:40:35.773 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 816, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 103, 110, 111, 255, 114, 101, 95, 98, 255, 117, 105, 108, 255, 116, 105, 110, 95, 105, 255, 110, 110, 255, 111, 100, 98, 0, 0, 0, 252, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 105, 116, 255, 95, 99, 111, 110, 255, 110, 101, 99, 255, 116, 0, 0, 0, 0, 251, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 97, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 817, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 818, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 819, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 2056, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 2056, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=2056] [region_id=816]
[2019/05/01 12:40:35.837 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 818, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=9] [term=6] [peer_id=2056] [region_id=816]
[2019/05/01 12:40:35.837 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 7, version: 97, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=2056] [region_id=816]
[2019/05/01 12:40:35.838 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 816, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 103, 110, 111, 255, 114, 101, 95, 98, 255, 117, 105, 108, 255, 116, 105, 110, 95, 105, 255, 110, 110, 255, 111, 100, 98, 0, 0, 0, 252, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 105, 116, 255, 95, 99, 111, 110, 255, 110, 101, 99, 255, 116, 0, 0, 0, 0, 251, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 7, version: 97, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 817, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 818, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 819, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 2056, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 818, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=2056] [region_id=816]
[2019/05/01 12:40:36.003 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 4, 40], lock_version: 408089955056746502, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 4, 40], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:40:36.220 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 4, 40], lock_version: 408089955161604101, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 4, 40], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:40:36.296 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_1679_7_8_(default|lock|write).sst] [snap_key=1679_7_8]
[2019/05/01 12:40:36.307 -07:00] [INFO] [unknown:1792] ["[region 1679] 2098 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 8, term: 7]"]
[2019/05/01 12:40:36.307 -07:00] [INFO] [unknown:1816] ["[region 1679] 2098 restored progress of 1680 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:40:36.307 -07:00] [INFO] [unknown:1816] ["[region 1679] 2098 restored progress of 1681 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:40:36.307 -07:00] [INFO] [unknown:1816] ["[region 1679] 2098 restored progress of 1682 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:40:36.307 -07:00] [INFO] [unknown:1816] ["[region 1679] 2098 restored progress of 2098 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:40:36.307 -07:00] [INFO] [unknown:474] ["[region 1679] 2098 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 8, term: 7]"]
[2019/05/01 12:40:36.307 -07:00] [INFO] [unknown:1736] ["[region 1679] 2098 [commit: 8] restored snapshot [index: 8, term: 7]"]
[2019/05/01 12:40:36.307 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=2098] [region_id=1679]
[2019/05/01 12:40:36.307 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 8, truncated_state: Some(RaftTruncatedState { index: 8, term: 7, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 1679, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 108, 111, 103, 95, 255, 98, 105, 110, 95, 255, 116, 114, 117, 255, 115, 116, 95, 102, 117, 255, 110, 99, 255, 116, 105, 111, 110, 95, 99, 255, 114, 255, 101, 97, 116, 111, 114, 115, 0, 254, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 108, 111, 103, 95, 255, 98, 105, 110, 95, 255, 117, 115, 101, 255, 95, 118, 49, 95, 114, 255, 111, 119, 255, 95, 101, 118, 101, 110, 116, 255, 115, 255, 0, 0, 0, 0, 0, 0, 0, 248, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 247, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1680, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1681, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1682, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 2098, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=2098] [region_id=1679]
[2019/05/01 12:40:36.328 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 1679, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 108, 111, 103, 95, 255, 98, 105, 110, 95, 255, 116, 114, 117, 255, 115, 116, 95, 102, 117, 255, 110, 99, 255, 116, 105, 111, 110, 95, 99, 255, 114, 255, 101, 97, 116, 111, 114, 115, 0, 254, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 108, 111, 103, 95, 255, 98, 105, 110, 95, 255, 117, 115, 101, 255, 95, 118, 49, 95, 114, 255, 111, 119, 255, 95, 101, 118, 101, 110, 116, 255, 115, 255, 0, 0, 0, 0, 0, 0, 0, 248, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 247, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1680, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1681, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1682, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 2098, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=2098] [region_id=1679]
[2019/05/01 12:40:36.328 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 1679] 2098"]
[2019/05/01 12:40:36.328 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=1679]
[2019/05/01 12:40:36.352 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=23.547816ms] [region_id=1679]
[2019/05/01 12:40:36.484 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 4, 44], lock_version: 408089955227140112, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 4, 46], lock_ttl: 3002, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:40:36.639 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 4, 45], lock_version: 408089955266461697, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 4, 45], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:40:37.239 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 4, 45], lock_version: 408089955436855300, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 4, 51], lock_ttl: 3060, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:40:37.302 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_221_8_12_(default|lock|write).sst] [snap_key=221_8_12]
[2019/05/01 12:40:37.317 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 2098, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=9] [term=7] [peer_id=2098] [region_id=1679]
[2019/05/01 12:40:37.317 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 6, version: 247, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=2098] [region_id=1679]
[2019/05/01 12:40:37.317 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 1679, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 108, 111, 103, 95, 255, 98, 105, 110, 95, 255, 116, 114, 117, 255, 115, 116, 95, 102, 117, 255, 110, 99, 255, 116, 105, 111, 110, 95, 99, 255, 114, 255, 101, 97, 116, 111, 114, 115, 0, 254, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 108, 111, 103, 95, 255, 98, 105, 110, 95, 255, 117, 115, 101, 255, 95, 118, 49, 95, 114, 255, 111, 119, 255, 95, 101, 118, 101, 110, 116, 255, 115, 255, 0, 0, 0, 0, 0, 0, 0, 248, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 247, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1680, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1681, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1682, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 2098, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 2098, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=2098] [region_id=1679]
[2019/05/01 12:40:37.317 -07:00] [INFO] [unknown:1792] ["[region 221] 2099 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 12, term: 8]"]
[2019/05/01 12:40:37.317 -07:00] [INFO] [unknown:1816] ["[region 221] 2099 restored progress of 223 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:40:37.317 -07:00] [INFO] [unknown:1816] ["[region 221] 2099 restored progress of 224 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:40:37.317 -07:00] [INFO] [unknown:1816] ["[region 221] 2099 restored progress of 1198 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:40:37.317 -07:00] [INFO] [unknown:1816] ["[region 221] 2099 restored progress of 2099 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:40:37.317 -07:00] [INFO] [unknown:474] ["[region 221] 2099 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 12, term: 8]"]
[2019/05/01 12:40:37.317 -07:00] [INFO] [unknown:1736] ["[region 221] 2099 [commit: 12] restored snapshot [index: 12, term: 8]"]
[2019/05/01 12:40:37.317 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=2099] [region_id=221]
[2019/05/01 12:40:37.317 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 12, truncated_state: Some(RaftTruncatedState { index: 12, term: 8, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 221, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 95, 100, 255, 105, 114, 101, 255, 99, 116, 95, 110, 111, 255, 110, 95, 255, 116, 114, 97, 110, 115, 97, 255, 99, 255, 116, 105, 111, 110, 97, 108, 95, 255, 255, 117, 112, 100, 97, 116, 101, 115, 0, 255, 254, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 95, 101, 255, 114, 114, 111, 255, 114, 95, 97, 99, 116, 255, 105, 111, 255, 110, 0, 0, 0, 0, 0, 250, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 27, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 223, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 224, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1198, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 2099, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=2099] [region_id=221]
[2019/05/01 12:40:37.365 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 221, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 95, 100, 255, 105, 114, 101, 255, 99, 116, 95, 110, 111, 255, 110, 95, 255, 116, 114, 97, 110, 115, 97, 255, 99, 255, 116, 105, 111, 110, 97, 108, 95, 255, 255, 117, 112, 100, 97, 116, 101, 115, 0, 255, 254, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 95, 101, 255, 114, 114, 111, 255, 114, 95, 97, 99, 116, 255, 105, 111, 255, 110, 0, 0, 0, 0, 0, 250, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 27, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 223, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 224, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1198, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 2099, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=2099] [region_id=221]
[2019/05/01 12:40:37.365 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 221] 2099"]
[2019/05/01 12:40:37.365 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=221]
[2019/05/01 12:40:37.373 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 1681, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=10] [term=7] [peer_id=2098] [region_id=1679]
[2019/05/01 12:40:37.373 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 7, version: 247, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=2098] [region_id=1679]
[2019/05/01 12:40:37.373 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 1679, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 108, 111, 103, 95, 255, 98, 105, 110, 95, 255, 116, 114, 117, 255, 115, 116, 95, 102, 117, 255, 110, 99, 255, 116, 105, 111, 110, 95, 99, 255, 114, 255, 101, 97, 116, 111, 114, 115, 0, 254, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 108, 111, 103, 95, 255, 98, 105, 110, 95, 255, 117, 115, 101, 255, 95, 118, 49, 95, 114, 255, 111, 119, 255, 95, 101, 118, 101, 110, 116, 255, 115, 255, 0, 0, 0, 0, 0, 0, 0, 248, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 7, version: 247, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1680, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1681, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1682, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 2098, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1681, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=2098] [region_id=1679]
[2019/05/01 12:40:37.391 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=25.842284ms] [region_id=221]
[2019/05/01 12:40:37.393 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 4, 44], lock_version: 408089955489284101, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 4, 46], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:40:37.905 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 4, 50], lock_version: 408089955581034506, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 4, 50], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:40:38.149 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 4, 54], lock_version: 408089955672784904, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 4, 54], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:40:38.360 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 2099, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=13] [term=8] [peer_id=2099] [region_id=221]
[2019/05/01 12:40:38.360 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 9, version: 27, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=2099] [region_id=221]
[2019/05/01 12:40:38.360 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 221, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 95, 100, 255, 105, 114, 101, 255, 99, 116, 95, 110, 111, 255, 110, 95, 255, 116, 114, 97, 110, 115, 97, 255, 99, 255, 116, 105, 111, 110, 97, 108, 95, 255, 255, 117, 112, 100, 97, 116, 101, 115, 0, 255, 254, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 95, 101, 255, 114, 114, 111, 255, 114, 95, 97, 99, 116, 255, 105, 111, 255, 110, 0, 0, 0, 0, 0, 250, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 27, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 223, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 224, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1198, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 2099, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 2099, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=2099] [region_id=221]
[2019/05/01 12:40:38.420 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=2102] [region_id=796]
[2019/05/01 12:40:38.420 -07:00] [INFO] [unknown:719] ["[region 796] 2102 became follower at term 0"]
[2019/05/01 12:40:38.420 -07:00] [INFO] [unknown:295] ["[region 796] 2102 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:40:38.420 -07:00] [INFO] [unknown:719] ["[region 796] 2102 became follower at term 1"]
[2019/05/01 12:40:38.420 -07:00] [INFO] [unknown:920] ["[region 796] 2102 [term: 1] received a MsgHeartbeat message with higher term from 797 [term: 6]"]
[2019/05/01 12:40:38.420 -07:00] [INFO] [unknown:719] ["[region 796] 2102 became follower at term 6"]
[2019/05/01 12:40:38.466 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 223, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=14] [term=8] [peer_id=2099] [region_id=221]
[2019/05/01 12:40:38.466 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 10, version: 27, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=2099] [region_id=221]
[2019/05/01 12:40:38.466 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 221, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 95, 100, 255, 105, 114, 101, 255, 99, 116, 95, 110, 111, 255, 110, 95, 255, 116, 114, 97, 110, 115, 97, 255, 99, 255, 116, 105, 111, 110, 97, 108, 95, 255, 255, 117, 112, 100, 97, 116, 101, 115, 0, 255, 254, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 95, 101, 255, 114, 114, 111, 255, 114, 95, 97, 99, 116, 255, 105, 111, 255, 110, 0, 0, 0, 0, 0, 250, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 10, version: 27, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 223, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 224, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1198, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 2099, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 223, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=2099] [region_id=221]
[2019/05/01 12:40:38.513 -07:00] [INFO] [pd.rs:558] ["try to change peer"] [peer="Peer { id: 2103, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [change_type=AddLearnerNode] [region_id=456]
[2019/05/01 12:40:38.513 -07:00] [INFO] [peer.rs:1953] ["propose conf change peer"] [change_peer=2103] [change_type=AddLearnerNode] [peer_id=1313] [region_id=456]
[2019/05/01 12:40:38.517 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 4, 53], lock_version: 408089955738320903, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 4, 53], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:40:38.574 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddLearnerNode, peer: Some(Peer { id: 2103, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=12] [term=8] [peer_id=1313] [region_id=456]
[2019/05/01 12:40:38.574 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 8, version: 57, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddLearner] [peer_id=1313] [region_id=456]
[2019/05/01 12:40:38.574 -07:00] [INFO] [apply.rs:1476] ["add learner successfully"] [region="Region { id: 456, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 100, 97, 116, 101, 255, 116, 105, 109, 101, 255, 95, 102, 111, 255, 114, 109, 97, 116, 0, 254, 0, 0, 253], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 100, 101, 98, 117, 255, 103, 0, 0, 0, 252, 0, 0, 0, 252], region_epoch: Some(RegionEpoch { conf_ver: 8, version: 57, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 457, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 459, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1313, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 2103, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1313] [region_id=456]
[2019/05/01 12:40:38.578 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 4, 53], lock_version: 408089955738320903, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 4, 53], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:40:38.602 -07:00] [INFO] [peer.rs:1318] ["notify pd with change peer region"] [region="Region { id: 456, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 100, 97, 116, 101, 255, 116, 105, 109, 101, 255, 95, 102, 111, 255, 114, 109, 97, 116, 0, 254, 0, 0, 253], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 100, 101, 98, 117, 255, 103, 0, 0, 0, 252, 0, 0, 0, 252], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 57, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 457, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 459, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1313, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 2103, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1313] [region_id=456]
[2019/05/01 12:40:39.447 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 4, 55], lock_version: 408089956026679305, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 4, 56], lock_ttl: 3002, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:40:39.936 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 4, 53], lock_version: 408089956118429711, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 4, 54], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:40:39.937 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 4, 53], lock_version: 408089956118429711, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 4, 54], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:40:40.152 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 4, 57], lock_version: 408089956210180098, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 4, 58], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:40:40.158 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=2104] [region_id=1831]
[2019/05/01 12:40:40.158 -07:00] [INFO] [unknown:719] ["[region 1831] 2104 became follower at term 0"]
[2019/05/01 12:40:40.158 -07:00] [INFO] [unknown:295] ["[region 1831] 2104 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:40:40.158 -07:00] [INFO] [unknown:719] ["[region 1831] 2104 became follower at term 1"]
[2019/05/01 12:40:40.158 -07:00] [INFO] [unknown:920] ["[region 1831] 2104 [term: 1] received a MsgHeartbeat message with higher term from 1833 [term: 6]"]
[2019/05/01 12:40:40.158 -07:00] [INFO] [unknown:719] ["[region 1831] 2104 became follower at term 6"]
[2019/05/01 12:40:40.178 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 4, 54], lock_version: 408089956183965701, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 4, 54], lock_ttl: 3002, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:40:40.205 -07:00] [INFO] [peer_storage.rs:759] ["requesting snapshot"] [peer_id=1313] [region_id=456]
[2019/05/01 12:40:40.206 -07:00] [INFO] [snap.rs:757] ["scan snapshot of one cf"] [size=0] [key_count=0] [cf=default] [snapshot=/opt/tidb/data/kv/snap/gen_456_8_12_(default|lock|write).sst] [region_id=456]
[2019/05/01 12:40:40.206 -07:00] [INFO] [snap.rs:757] ["scan snapshot of one cf"] [size=0] [key_count=0] [cf=lock] [snapshot=/opt/tidb/data/kv/snap/gen_456_8_12_(default|lock|write).sst] [region_id=456]
[2019/05/01 12:40:40.206 -07:00] [INFO] [snap.rs:757] ["scan snapshot of one cf"] [size=138] [key_count=2] [cf=write] [snapshot=/opt/tidb/data/kv/snap/gen_456_8_12_(default|lock|write).sst] [region_id=456]
[2019/05/01 12:40:40.220 -07:00] [INFO] [snap.rs:875] ["scan snapshot"] [takes=13.721341ms] [size=1375] [key_count=2] [snapshot=/opt/tidb/data/kv/snap/gen_456_8_12_(default|lock|write).sst] [region_id=456]
[2019/05/01 12:40:40.275 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 4, 60], lock_version: 408089956236394502, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 4, 60], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:40:40.341 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 4, 54], lock_version: 408089956249501709, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 4, 54], lock_ttl: 3002, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:40:40.422 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_796_6_10_(default|lock|write).sst] [snap_key=796_6_10]
[2019/05/01 12:40:40.431 -07:00] [INFO] [unknown:1792] ["[region 796] 2102 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 10, term: 6]"]
[2019/05/01 12:40:40.431 -07:00] [INFO] [unknown:1816] ["[region 796] 2102 restored progress of 797 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:40:40.431 -07:00] [INFO] [unknown:1816] ["[region 796] 2102 restored progress of 799 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:40:40.431 -07:00] [INFO] [unknown:1816] ["[region 796] 2102 restored progress of 1410 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:40:40.431 -07:00] [INFO] [unknown:1816] ["[region 796] 2102 restored progress of 2102 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:40:40.431 -07:00] [INFO] [unknown:474] ["[region 796] 2102 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 10, term: 6]"]
[2019/05/01 12:40:40.431 -07:00] [INFO] [unknown:1736] ["[region 796] 2102 [commit: 10] restored snapshot [index: 10, term: 6]"]
[2019/05/01 12:40:40.431 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=2102] [region_id=796]
[2019/05/01 12:40:40.431 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 10, truncated_state: Some(RaftTruncatedState { index: 10, term: 6, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 796, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 104, 97, 118, 101, 255, 95, 114, 116, 114, 255, 101, 101, 95, 255, 107, 101, 121, 115, 0, 254, 0, 0, 253], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 104, 97, 118, 101, 255, 95, 115, 115, 108, 255, 0, 0, 0, 255, 0, 0, 0, 0, 0, 247, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 97, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 797, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 799, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1410, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 2102, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=2102] [region_id=796]
[2019/05/01 12:40:40.448 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 796, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 104, 97, 118, 101, 255, 95, 114, 116, 114, 255, 101, 101, 95, 255, 107, 101, 121, 115, 0, 254, 0, 0, 253], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 104, 97, 118, 101, 255, 95, 115, 115, 108, 255, 0, 0, 0, 255, 0, 0, 0, 0, 0, 247, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 97, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 797, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 799, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1410, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 2102, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=2102] [region_id=796]
[2019/05/01 12:40:40.448 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 796] 2102"]
[2019/05/01 12:40:40.448 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=796]
[2019/05/01 12:40:40.464 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=15.815867ms] [region_id=796]
[2019/05/01 12:40:40.468 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 4, 62], lock_version: 408089956275716101, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 4, 62], lock_ttl: 3100, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:40:40.645 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 4, 63], lock_version: 408089956328144906, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 4, 63], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:40:40.668 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 4, 62], lock_version: 408089956341252101, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 4, 62], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:40:40.829 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 4, 62], lock_version: 408089956367466517, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 4, 63], lock_ttl: 3003, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:40:40.979 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 4, 60], lock_version: 408089956380573701, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 4, 60], lock_ttl: 3090, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:40:40.995 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 4, 64], lock_version: 408089956433002513, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 4, 64], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:40:41.098 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 4, 60], lock_version: 408089956459216901, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 4, 63], lock_ttl: 3003, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:40:41.170 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 4, 63], lock_version: 408089956459216907, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 4, 63], lock_ttl: 3065, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:40:41.195 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 4, 63], lock_version: 408089956459216907, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 4, 65], lock_ttl: 3065, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:40:41.408 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 4, 66], lock_version: 408089956537860102, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 4, 66], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:40:41.434 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 4, 67], lock_version: 408089956550967302, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 4, 67], lock_ttl: 3002, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:40:41.473 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 2102, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=11] [term=6] [peer_id=2102] [region_id=796]
[2019/05/01 12:40:41.473 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 9, version: 97, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=2102] [region_id=796]
[2019/05/01 12:40:41.473 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 796, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 104, 97, 118, 101, 255, 95, 114, 116, 114, 255, 101, 101, 95, 255, 107, 101, 121, 115, 0, 254, 0, 0, 253], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 104, 97, 118, 101, 255, 95, 115, 115, 108, 255, 0, 0, 0, 255, 0, 0, 0, 0, 0, 247, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 97, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 797, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 799, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1410, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 2102, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 2102, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=2102] [region_id=796]
[2019/05/01 12:40:41.532 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 799, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=12] [term=6] [peer_id=2102] [region_id=796]
[2019/05/01 12:40:41.532 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 10, version: 97, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=2102] [region_id=796]
[2019/05/01 12:40:41.532 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 796, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 104, 97, 118, 101, 255, 95, 114, 116, 114, 255, 101, 101, 95, 255, 107, 101, 121, 115, 0, 254, 0, 0, 253], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 104, 97, 118, 101, 255, 95, 115, 115, 108, 255, 0, 0, 0, 255, 0, 0, 0, 0, 0, 247, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 10, version: 97, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 797, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 799, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1410, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 2102, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 799, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=2102] [region_id=796]
[2019/05/01 12:40:41.779 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 4, 66], lock_version: 408089956616503308, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 4, 66], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:40:41.823 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 4, 62], lock_version: 408089956629610510, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 4, 62], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:40:42.124 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 4, 65], lock_version: 408089956695146498, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 4, 67], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:40:42.193 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_1831_6_7_(default|lock|write).sst] [snap_key=1831_6_7]
[2019/05/01 12:40:42.204 -07:00] [INFO] [unknown:1792] ["[region 1831] 2104 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 7, term: 6]"]
[2019/05/01 12:40:42.204 -07:00] [INFO] [unknown:1816] ["[region 1831] 2104 restored progress of 1832 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:40:42.204 -07:00] [INFO] [unknown:1816] ["[region 1831] 2104 restored progress of 1833 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:40:42.204 -07:00] [INFO] [unknown:1816] ["[region 1831] 2104 restored progress of 1834 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:40:42.204 -07:00] [INFO] [unknown:1816] ["[region 1831] 2104 restored progress of 2104 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:40:42.204 -07:00] [INFO] [unknown:474] ["[region 1831] 2104 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 7, term: 6]"]
[2019/05/01 12:40:42.204 -07:00] [INFO] [unknown:1736] ["[region 1831] 2104 [commit: 7] restored snapshot [index: 7, term: 6]"]
[2019/05/01 12:40:42.204 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=2104] [region_id=1831]
[2019/05/01 12:40:42.204 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 7, truncated_state: Some(RaftTruncatedState { index: 7, term: 6, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 1831, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 109, 97, 120, 95, 255, 101, 114, 114, 111, 255, 114, 95, 99, 255, 111, 117, 110, 116, 0, 254, 0, 0, 253], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 109, 97, 120, 95, 255, 104, 101, 97, 112, 255, 95, 116, 97, 255, 98, 108, 101, 95, 115, 255, 105, 122, 255, 101, 0, 0, 0, 0, 0, 250, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 277, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1832, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1833, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1834, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 2104, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=2104] [region_id=1831]
[2019/05/01 12:40:42.236 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 1831] 2104"]
[2019/05/01 12:40:42.236 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 1831, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 109, 97, 120, 95, 255, 101, 114, 114, 111, 255, 114, 95, 99, 255, 111, 117, 110, 116, 0, 254, 0, 0, 253], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 109, 97, 120, 95, 255, 104, 101, 97, 112, 255, 95, 116, 97, 255, 98, 108, 101, 95, 115, 255, 105, 122, 255, 101, 0, 0, 0, 0, 0, 250, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 277, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1832, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1833, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1834, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 2104, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=2104] [region_id=1831]
[2019/05/01 12:40:42.236 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=1831]
[2019/05/01 12:40:42.237 -07:00] [INFO] [unknown:841] ["New connected subchannel at 0x7f858fa03850 for subchannel 0x7f864040e000"]
[2019/05/01 12:40:42.245 -07:00] [INFO] [snap.rs:389] ["sent snapshot"] [duration=8.297637ms] [size=1375] [snap_key=456_8_12] [region_id=456]
[2019/05/01 12:40:42.245 -07:00] [INFO] [peer.rs:538] ["report snapshot status"] [status=Finish] [to="Peer { id: 2103, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1313] [region_id=456]
[2019/05/01 12:40:42.261 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=24.283655ms] [region_id=1831]
[2019/05/01 12:40:42.500 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=2106] [region_id=1549]
[2019/05/01 12:40:42.500 -07:00] [INFO] [unknown:719] ["[region 1549] 2106 became follower at term 0"]
[2019/05/01 12:40:42.500 -07:00] [INFO] [unknown:295] ["[region 1549] 2106 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:40:42.500 -07:00] [INFO] [unknown:719] ["[region 1549] 2106 became follower at term 1"]
[2019/05/01 12:40:42.500 -07:00] [INFO] [unknown:920] ["[region 1549] 2106 [term: 1] received a MsgHeartbeat message with higher term from 1550 [term: 7]"]
[2019/05/01 12:40:42.500 -07:00] [INFO] [unknown:719] ["[region 1549] 2106 became follower at term 7"]
[2019/05/01 12:40:42.793 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 4, 68], lock_version: 408089956865540101, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 4, 68], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:40:42.861 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 4, 68], lock_version: 408089956865540101, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 4, 68], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:40:43.192 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 2104, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=8] [term=6] [peer_id=2104] [region_id=1831]
[2019/05/01 12:40:43.209 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 6, version: 277, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=2104] [region_id=1831]
[2019/05/01 12:40:43.209 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 1831, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 109, 97, 120, 95, 255, 101, 114, 114, 111, 255, 114, 95, 99, 255, 111, 117, 110, 116, 0, 254, 0, 0, 253], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 109, 97, 120, 95, 255, 104, 101, 97, 112, 255, 95, 116, 97, 255, 98, 108, 101, 95, 115, 255, 105, 122, 255, 101, 0, 0, 0, 0, 0, 250, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 277, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1832, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1833, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1834, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 2104, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 2104, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=2104] [region_id=1831]
[2019/05/01 12:40:43.214 -07:00] [INFO] [pd.rs:558] ["try to change peer"] [peer="Peer { id: 2103, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [change_type=AddNode] [region_id=456]
[2019/05/01 12:40:43.242 -07:00] [INFO] [peer.rs:1953] ["propose conf change peer"] [change_peer=2103] [change_type=AddNode] [peer_id=1313] [region_id=456]
[2019/05/01 12:40:43.267 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 1834, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=9] [term=6] [peer_id=2104] [region_id=1831]
[2019/05/01 12:40:43.267 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 7, version: 277, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=2104] [region_id=1831]
[2019/05/01 12:40:43.267 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 1831, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 109, 97, 120, 95, 255, 101, 114, 114, 111, 255, 114, 95, 99, 255, 111, 117, 110, 116, 0, 254, 0, 0, 253], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 109, 97, 120, 95, 255, 104, 101, 97, 112, 255, 95, 116, 97, 255, 98, 108, 101, 95, 115, 255, 105, 122, 255, 101, 0, 0, 0, 0, 0, 250, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 7, version: 277, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1832, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1833, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1834, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 2104, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1834, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=2104] [region_id=1831]
[2019/05/01 12:40:43.289 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 2103, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=13] [term=8] [peer_id=1313] [region_id=456]
[2019/05/01 12:40:43.289 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 9, version: 57, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=1313] [region_id=456]
[2019/05/01 12:40:43.289 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 456, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 100, 97, 116, 101, 255, 116, 105, 109, 101, 255, 95, 102, 111, 255, 114, 109, 97, 116, 0, 254, 0, 0, 253], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 100, 101, 98, 117, 255, 103, 0, 0, 0, 252, 0, 0, 0, 252], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 57, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 457, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 459, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1313, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 2103, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 2103, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1313] [region_id=456]
[2019/05/01 12:40:43.305 -07:00] [INFO] [peer.rs:1318] ["notify pd with change peer region"] [region="Region { id: 456, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 100, 97, 116, 101, 255, 116, 105, 109, 101, 255, 95, 102, 111, 255, 114, 109, 97, 116, 0, 254, 0, 0, 253], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 100, 101, 98, 117, 255, 103, 0, 0, 0, 252, 0, 0, 0, 252], region_epoch: Some(RegionEpoch { conf_ver: 10, version: 57, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 457, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 459, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1313, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 2103, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1313] [region_id=456]
[2019/05/01 12:40:43.308 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 4, 72], lock_version: 408089956983504906, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 4, 72], lock_ttl: 3002, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:40:43.312 -07:00] [INFO] [pd.rs:558] ["try to change peer"] [peer="Peer { id: 459, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [change_type=RemoveNode] [region_id=456]
[2019/05/01 12:40:43.312 -07:00] [INFO] [peer.rs:1953] ["propose conf change peer"] [change_peer=459] [change_type=RemoveNode] [peer_id=1313] [region_id=456]
[2019/05/01 12:40:43.325 -07:00] [INFO] [pd.rs:558] ["try to change peer"] [peer="Peer { id: 459, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [change_type=RemoveNode] [region_id=456]
[2019/05/01 12:40:43.342 -07:00] [INFO] [peer.rs:1927] ["there is a pending conf change, try later"] [peer_id=1313] [region_id=456]
[2019/05/01 12:40:43.342 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 459, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=14] [term=8] [peer_id=1313] [region_id=456]
[2019/05/01 12:40:43.342 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 10, version: 57, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=1313] [region_id=456]
[2019/05/01 12:40:43.342 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 456, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 100, 97, 116, 101, 255, 116, 105, 109, 101, 255, 95, 102, 111, 255, 114, 109, 97, 116, 0, 254, 0, 0, 253], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 100, 101, 98, 117, 255, 103, 0, 0, 0, 252, 0, 0, 0, 252], region_epoch: Some(RegionEpoch { conf_ver: 10, version: 57, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 457, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 459, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1313, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 2103, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 459, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1313] [region_id=456]
[2019/05/01 12:40:43.365 -07:00] [INFO] [peer.rs:1318] ["notify pd with change peer region"] [region="Region { id: 456, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 100, 97, 116, 101, 255, 116, 105, 109, 101, 255, 95, 102, 111, 255, 114, 109, 97, 116, 0, 254, 0, 0, 253], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 100, 101, 98, 117, 255, 103, 0, 0, 0, 252, 0, 0, 0, 252], region_epoch: Some(RegionEpoch { conf_ver: 11, version: 57, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 457, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1313, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 2103, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1313] [region_id=456]
[2019/05/01 12:40:43.369 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 4, 72], lock_version: 408089956983504906, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 4, 72], lock_ttl: 3002, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:40:43.442 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 4, 72], lock_version: 408089956983504906, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 4, 72], lock_ttl: 3002, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:40:43.448 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddLearnerNode, peer: Some(Peer { id: 2148, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=10] [term=6] [peer_id=1654] [region_id=1517]
[2019/05/01 12:40:43.448 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 8, version: 217, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddLearner] [peer_id=1654] [region_id=1517]
[2019/05/01 12:40:43.448 -07:00] [INFO] [apply.rs:1476] ["add learner successfully"] [region="Region { id: 1517, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 115, 255, 116, 114, 105, 255, 99, 116, 95, 109, 111, 255, 100, 101, 255, 0, 0, 0, 0, 0, 0, 249, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 115, 255, 117, 112, 112, 255, 111, 114, 116, 95, 120, 255, 97, 0, 255, 0, 0, 0, 0, 0, 0, 248, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 8, version: 217, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1518, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1520, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1654, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 2148, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1654] [region_id=1517]
[2019/05/01 12:40:43.583 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 4, 70], lock_version: 408089957101469700, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 4, 70], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:40:43.790 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 4, 70], lock_version: 408089957153898498, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 4, 70], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:40:43.798 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 4, 69], lock_version: 408089957088362501, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 4, 72], lock_ttl: 3078, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:40:44.504 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_1549_7_8_(default|lock|write).sst] [snap_key=1549_7_8]
[2019/05/01 12:40:44.514 -07:00] [INFO] [unknown:1792] ["[region 1549] 2106 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 8, term: 7]"]
[2019/05/01 12:40:44.514 -07:00] [INFO] [unknown:1816] ["[region 1549] 2106 restored progress of 1550 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:40:44.514 -07:00] [INFO] [unknown:1816] ["[region 1549] 2106 restored progress of 1551 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:40:44.514 -07:00] [INFO] [unknown:1816] ["[region 1549] 2106 restored progress of 1552 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:40:44.514 -07:00] [INFO] [unknown:1816] ["[region 1549] 2106 restored progress of 2106 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:40:44.514 -07:00] [INFO] [unknown:474] ["[region 1549] 2106 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 8, term: 7]"]
[2019/05/01 12:40:44.514 -07:00] [INFO] [unknown:1736] ["[region 1549] 2106 [commit: 8] restored snapshot [index: 8, term: 7]"]
[2019/05/01 12:40:44.514 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=2106] [region_id=1549]
[2019/05/01 12:40:44.514 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 8, truncated_state: Some(RaftTruncatedState { index: 8, term: 7, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 1549, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 117, 255, 110, 100, 111, 255, 95, 108, 111, 103, 95, 255, 116, 114, 255, 117, 110, 99, 97, 116, 101, 255, 0, 255, 0, 0, 0, 0, 0, 0, 0, 247, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 117, 255, 110, 100, 111, 255, 95, 108, 111, 103, 115, 255, 0, 0, 255, 0, 0, 0, 0, 0, 0, 247, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 217, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1550, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1551, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1552, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 2106, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=2106] [region_id=1549]
[2019/05/01 12:40:44.538 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 1549, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 117, 255, 110, 100, 111, 255, 95, 108, 111, 103, 95, 255, 116, 114, 255, 117, 110, 99, 97, 116, 101, 255, 0, 255, 0, 0, 0, 0, 0, 0, 0, 247, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 117, 255, 110, 100, 111, 255, 95, 108, 111, 103, 115, 255, 0, 0, 255, 0, 0, 0, 0, 0, 0, 247, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 217, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1550, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1551, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1552, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 2106, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=2106] [region_id=1549]
[2019/05/01 12:40:44.538 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 1549] 2106"]
[2019/05/01 12:40:44.538 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=1549]
[2019/05/01 12:40:44.554 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=16.354294ms] [region_id=1549]
[2019/05/01 12:40:44.629 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 4, 76], lock_version: 408089957376720907, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 4, 76], lock_ttl: 3000, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:40:44.736 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 4, 76], lock_version: 408089957402935307, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 4, 77], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:40:45.004 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 4, 75], lock_version: 408089957455364107, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 4, 75], lock_ttl: 3063, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:40:45.090 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 4, 76], lock_version: 408089957468471300, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 4, 77], lock_ttl: 3002, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:40:45.149 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 4, 76], lock_version: 408089957468471300, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 4, 77], lock_ttl: 3002, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:40:45.221 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 4, 77], lock_version: 408089957534007313, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 4, 77], lock_ttl: 3002, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:40:45.310 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 4, 79], lock_version: 408089957547114505, key: [116, 128, 0, 0, 0, 0, 0, 0, 108, 95, 114, 128, 0, 0, 0, 0, 0, 4, 79], lock_ttl: 3002, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:40:45.549 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 2106, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=9] [term=7] [peer_id=2106] [region_id=1549]
[2019/05/01 12:40:45.549 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 6, version: 217, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=2106] [region_id=1549]
[2019/05/01 12:40:45.549 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 1549, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 117, 255, 110, 100, 111, 255, 95, 108, 111, 103, 95, 255, 116, 114, 255, 117, 110, 99, 97, 116, 101, 255, 0, 255, 0, 0, 0, 0, 0, 0, 0, 247, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 117, 255, 110, 100, 111, 255, 95, 108, 111, 103, 115, 255, 0, 0, 255, 0, 0, 0, 0, 0, 0, 247, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 217, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1550, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1551, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1552, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 2106, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 2106, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=2106] [region_id=1549]
[2019/05/01 12:40:45.609 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 1552, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=10] [term=7] [peer_id=2106] [region_id=1549]
[2019/05/01 12:40:45.609 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 7, version: 217, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=2106] [region_id=1549]
[2019/05/01 12:40:45.609 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 1549, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 117, 255, 110, 100, 111, 255, 95, 108, 111, 103, 95, 255, 116, 114, 255, 117, 110, 99, 97, 116, 101, 255, 0, 255, 0, 0, 0, 0, 0, 0, 0, 247, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 117, 255, 110, 100, 111, 255, 95, 108, 111, 103, 115, 255, 0, 0, 255, 0, 0, 0, 0, 0, 0, 247, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 7, version: 217, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1550, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1551, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1552, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 2106, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1552, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=2106] [region_id=1549]
[2019/05/01 12:40:46.102 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=2150] [region_id=1771]
[2019/05/01 12:40:46.102 -07:00] [INFO] [unknown:719] ["[region 1771] 2150 became follower at term 0"]
[2019/05/01 12:40:46.102 -07:00] [INFO] [unknown:295] ["[region 1771] 2150 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:40:46.102 -07:00] [INFO] [unknown:719] ["[region 1771] 2150 became follower at term 1"]
[2019/05/01 12:40:46.102 -07:00] [INFO] [unknown:920] ["[region 1771] 2150 [term: 1] received a MsgHeartbeat message with higher term from 1774 [term: 7]"]
[2019/05/01 12:40:46.102 -07:00] [INFO] [unknown:719] ["[region 1771] 2150 became follower at term 7"]
[2019/05/01 12:40:46.166 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=2149] [region_id=357]
[2019/05/01 12:40:46.166 -07:00] [INFO] [unknown:719] ["[region 357] 2149 became follower at term 0"]
[2019/05/01 12:40:46.166 -07:00] [INFO] [unknown:295] ["[region 357] 2149 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:40:46.166 -07:00] [INFO] [unknown:719] ["[region 357] 2149 became follower at term 1"]
[2019/05/01 12:40:46.166 -07:00] [INFO] [unknown:920] ["[region 357] 2149 [term: 1] received a MsgHeartbeat message with higher term from 359 [term: 8]"]
[2019/05/01 12:40:46.166 -07:00] [INFO] [unknown:719] ["[region 357] 2149 became follower at term 8"]
[2019/05/01 12:40:46.332 -07:00] [INFO] [unknown:1625] ["[region 1985] 2053 [term 6] received MsgTimeoutNow from 1987 and starts an election to get leadership."]
[2019/05/01 12:40:46.332 -07:00] [INFO] [unknown:739] ["[region 1985] 2053 became candidate at term 7"]
[2019/05/01 12:40:46.332 -07:00] [INFO] [unknown:854] ["[region 1985] 2053 received MsgRequestVoteResponse from 2053 at term 7"]
[2019/05/01 12:40:46.332 -07:00] [INFO] [unknown:828] ["[region 1985] 2053 [logterm: 6, index: 9] sent MsgRequestVote request to 1988 at term 7"]
[2019/05/01 12:40:46.332 -07:00] [INFO] [unknown:828] ["[region 1985] 2053 [logterm: 6, index: 9] sent MsgRequestVote request to 1987 at term 7"]
[2019/05/01 12:40:46.364 -07:00] [INFO] [unknown:854] ["[region 1985] 2053 received MsgRequestVoteResponse from 1988 at term 7"]
[2019/05/01 12:40:46.364 -07:00] [INFO] [unknown:1550] ["[region 1985] 2053 [quorum:2] has received 2 MsgRequestVoteResponse votes and 0 vote rejections"]
[2019/05/01 12:40:46.364 -07:00] [INFO] [unknown:789] ["[region 1985] 2053 became leader at term 7"]
[2019/05/01 12:40:46.383 -07:00] [INFO] [unknown:1625] ["[region 1831] 2104 [term 6] received MsgTimeoutNow from 1833 and starts an election to get leadership."]
[2019/05/01 12:40:46.383 -07:00] [INFO] [unknown:739] ["[region 1831] 2104 became candidate at term 7"]
[2019/05/01 12:40:46.383 -07:00] [INFO] [unknown:854] ["[region 1831] 2104 received MsgRequestVoteResponse from 2104 at term 7"]
[2019/05/01 12:40:46.383 -07:00] [INFO] [unknown:828] ["[region 1831] 2104 [logterm: 6, index: 9] sent MsgRequestVote request to 1832 at term 7"]
[2019/05/01 12:40:46.383 -07:00] [INFO] [unknown:828] ["[region 1831] 2104 [logterm: 6, index: 9] sent MsgRequestVote request to 1833 at term 7"]
[2019/05/01 12:40:46.424 -07:00] [INFO] [unknown:854] ["[region 1831] 2104 received MsgRequestVoteResponse from 1833 at term 7"]
[2019/05/01 12:40:46.424 -07:00] [INFO] [unknown:1550] ["[region 1831] 2104 [quorum:2] has received 2 MsgRequestVoteResponse votes and 0 vote rejections"]
[2019/05/01 12:40:46.424 -07:00] [INFO] [unknown:789] ["[region 1831] 2104 became leader at term 7"]
[2019/05/01 12:40:48.106 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_1771_7_8_(default|lock|write).sst] [snap_key=1771_7_8]
[2019/05/01 12:40:49.259 -07:00] [INFO] [unknown:1792] ["[region 1771] 2150 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 8, term: 7]"]
[2019/05/01 12:40:49.259 -07:00] [INFO] [unknown:1816] ["[region 1771] 2150 restored progress of 1772 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:40:49.259 -07:00] [INFO] [unknown:1816] ["[region 1771] 2150 restored progress of 1773 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:40:49.259 -07:00] [INFO] [unknown:1816] ["[region 1771] 2150 restored progress of 1774 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:40:49.259 -07:00] [INFO] [unknown:1816] ["[region 1771] 2150 restored progress of 2150 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:40:49.259 -07:00] [INFO] [unknown:474] ["[region 1771] 2150 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 8, term: 7]"]
[2019/05/01 12:40:49.259 -07:00] [INFO] [unknown:1736] ["[region 1771] 2150 [commit: 8] restored snapshot [index: 8, term: 7]"]
[2019/05/01 12:40:49.259 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=2150] [region_id=1771]
[2019/05/01 12:40:49.259 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 8, truncated_state: Some(RaftTruncatedState { index: 8, term: 7, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 1771, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 108, 111, 119, 95, 255, 112, 114, 105, 111, 255, 114, 105, 116, 255, 121, 95, 117, 112, 100, 255, 97, 116, 255, 101, 115, 0, 0, 0, 0, 251, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 108, 111, 119, 101, 255, 114, 95, 99, 97, 255, 115, 101, 95, 255, 102, 105, 108, 101, 95, 255, 115, 121, 255, 115, 116, 101, 109, 0, 0, 253, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 267, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1772, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1773, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1774, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 2150, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=2150] [region_id=1771]
[2019/05/01 12:40:49.277 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 1771] 2150"]
[2019/05/01 12:40:49.277 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 1771, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 108, 111, 119, 95, 255, 112, 114, 105, 111, 255, 114, 105, 116, 255, 121, 95, 117, 112, 100, 255, 97, 116, 255, 101, 115, 0, 0, 0, 0, 251, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 108, 111, 119, 101, 255, 114, 95, 99, 97, 255, 115, 101, 95, 255, 102, 105, 108, 101, 95, 255, 115, 121, 255, 115, 116, 101, 109, 0, 0, 253, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 267, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1772, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1773, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1774, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 2150, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=2150] [region_id=1771]
[2019/05/01 12:40:49.277 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=1771]
[2019/05/01 12:40:49.279 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_357_8_9_(default|lock|write).sst] [snap_key=357_8_9]
[2019/05/01 12:40:49.294 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 2148, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=11] [term=6] [peer_id=1654] [region_id=1517]
[2019/05/01 12:40:49.294 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 9, version: 217, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=1654] [region_id=1517]
[2019/05/01 12:40:49.294 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 1517, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 115, 255, 116, 114, 105, 255, 99, 116, 95, 109, 111, 255, 100, 101, 255, 0, 0, 0, 0, 0, 0, 249, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 115, 255, 117, 112, 112, 255, 111, 114, 116, 95, 120, 255, 97, 0, 255, 0, 0, 0, 0, 0, 0, 248, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 217, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1518, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1520, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1654, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 2148, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 2148, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1654] [region_id=1517]
[2019/05/01 12:40:49.298 -07:00] [INFO] [unknown:1792] ["[region 357] 2149 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 9, term: 8]"]
[2019/05/01 12:40:49.298 -07:00] [INFO] [unknown:1816] ["[region 357] 2149 restored progress of 358 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:40:49.298 -07:00] [INFO] [unknown:1816] ["[region 357] 2149 restored progress of 359 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:40:49.298 -07:00] [INFO] [unknown:1816] ["[region 357] 2149 restored progress of 360 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:40:49.298 -07:00] [INFO] [unknown:1816] ["[region 357] 2149 restored progress of 2149 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:40:49.298 -07:00] [INFO] [unknown:474] ["[region 357] 2149 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 9, term: 8]"]
[2019/05/01 12:40:49.298 -07:00] [INFO] [unknown:1736] ["[region 357] 2149 [commit: 9] restored snapshot [index: 9, term: 8]"]
[2019/05/01 12:40:49.298 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=2149] [region_id=357]
[2019/05/01 12:40:49.298 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 9, truncated_state: Some(RaftTruncatedState { index: 9, term: 8, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 357, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 99, 104, 97, 114, 255, 97, 99, 116, 101, 255, 114, 95, 115, 255, 101, 116, 95, 99, 108, 255, 105, 101, 255, 110, 116, 0, 0, 0, 0, 251, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 99, 104, 97, 114, 255, 97, 99, 116, 101, 255, 114, 95, 115, 255, 101, 116, 95, 99, 111, 255, 110, 110, 255, 101, 99, 116, 105, 111, 110, 255, 0, 255, 0, 0, 0, 0, 0, 0, 0, 247, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 37, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 358, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 359, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 360, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 2149, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=2149] [region_id=357]
[2019/05/01 12:40:49.350 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=73.067777ms] [region_id=1771]
[2019/05/01 12:40:49.367 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=357]
[2019/05/01 12:40:49.367 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 357, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 99, 104, 97, 114, 255, 97, 99, 116, 101, 255, 114, 95, 115, 255, 101, 116, 95, 99, 108, 255, 105, 101, 255, 110, 116, 0, 0, 0, 0, 251, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 99, 104, 97, 114, 255, 97, 99, 116, 101, 255, 114, 95, 115, 255, 101, 116, 95, 99, 111, 255, 110, 110, 255, 101, 99, 116, 105, 111, 110, 255, 0, 255, 0, 0, 0, 0, 0, 0, 0, 247, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 37, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 358, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 359, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 360, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 2149, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=2149] [region_id=357]
[2019/05/01 12:40:49.367 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 357] 2149"]
[2019/05/01 12:40:49.400 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 1518, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=12] [term=6] [peer_id=1654] [region_id=1517]
[2019/05/01 12:40:49.400 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 10, version: 217, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=1654] [region_id=1517]
[2019/05/01 12:40:49.400 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 1517, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 115, 255, 116, 114, 105, 255, 99, 116, 95, 109, 111, 255, 100, 101, 255, 0, 0, 0, 0, 0, 0, 249, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 115, 255, 117, 112, 112, 255, 111, 114, 116, 95, 120, 255, 97, 0, 255, 0, 0, 0, 0, 0, 0, 248, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 10, version: 217, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1518, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1520, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1654, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 2148, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1518, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1654] [region_id=1517]
[2019/05/01 12:40:49.400 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=32.665379ms] [region_id=357]
[2019/05/01 12:40:50.122 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 2150, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=9] [term=7] [peer_id=2150] [region_id=1771]
[2019/05/01 12:40:50.122 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 6, version: 267, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=2150] [region_id=1771]
[2019/05/01 12:40:50.122 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 1771, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 108, 111, 119, 95, 255, 112, 114, 105, 111, 255, 114, 105, 116, 255, 121, 95, 117, 112, 100, 255, 97, 116, 255, 101, 115, 0, 0, 0, 0, 251, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 108, 111, 119, 101, 255, 114, 95, 99, 97, 255, 115, 101, 95, 255, 102, 105, 108, 101, 95, 255, 115, 121, 255, 115, 116, 101, 109, 0, 0, 253, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 267, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1772, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1773, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1774, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 2150, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 2150, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=2150] [region_id=1771]
[2019/05/01 12:40:50.163 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 1772, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=10] [term=7] [peer_id=2150] [region_id=1771]
[2019/05/01 12:40:50.163 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 7, version: 267, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=2150] [region_id=1771]
[2019/05/01 12:40:50.163 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 1771, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 108, 111, 119, 95, 255, 112, 114, 105, 111, 255, 114, 105, 116, 255, 121, 95, 117, 112, 100, 255, 97, 116, 255, 101, 115, 0, 0, 0, 0, 251, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 108, 111, 119, 101, 255, 114, 95, 99, 97, 255, 115, 101, 95, 255, 102, 105, 108, 101, 95, 255, 115, 121, 255, 115, 116, 101, 109, 0, 0, 253, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 7, version: 267, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1772, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1773, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1774, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 2150, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1772, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=2150] [region_id=1771]
[2019/05/01 12:40:50.221 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 2149, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=10] [term=8] [peer_id=2149] [region_id=357]
[2019/05/01 12:40:50.221 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 6, version: 37, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=2149] [region_id=357]
[2019/05/01 12:40:50.221 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 357, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 99, 104, 97, 114, 255, 97, 99, 116, 101, 255, 114, 95, 115, 255, 101, 116, 95, 99, 108, 255, 105, 101, 255, 110, 116, 0, 0, 0, 0, 251, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 99, 104, 97, 114, 255, 97, 99, 116, 101, 255, 114, 95, 115, 255, 101, 116, 95, 99, 111, 255, 110, 110, 255, 101, 99, 116, 105, 111, 110, 255, 0, 255, 0, 0, 0, 0, 0, 0, 0, 247, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 37, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 358, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 359, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 360, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 2149, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 2149, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=2149] [region_id=357]
[2019/05/01 12:40:50.289 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 358, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=11] [term=8] [peer_id=2149] [region_id=357]
[2019/05/01 12:40:50.291 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 7, version: 37, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=2149] [region_id=357]
[2019/05/01 12:40:50.291 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 357, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 99, 104, 97, 114, 255, 97, 99, 116, 101, 255, 114, 95, 115, 255, 101, 116, 95, 99, 108, 255, 105, 101, 255, 110, 116, 0, 0, 0, 0, 251, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 99, 104, 97, 114, 255, 97, 99, 116, 101, 255, 114, 95, 115, 255, 101, 116, 95, 99, 111, 255, 110, 110, 255, 101, 99, 116, 105, 111, 110, 255, 0, 255, 0, 0, 0, 0, 0, 0, 0, 247, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 7, version: 37, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 358, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 359, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 360, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 2149, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 358, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=2149] [region_id=357]
[2019/05/01 12:40:50.291 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=2152] [region_id=505]
[2019/05/01 12:40:50.291 -07:00] [INFO] [unknown:719] ["[region 505] 2152 became follower at term 0"]
[2019/05/01 12:40:50.291 -07:00] [INFO] [unknown:295] ["[region 505] 2152 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:40:50.291 -07:00] [INFO] [unknown:719] ["[region 505] 2152 became follower at term 1"]
[2019/05/01 12:40:50.291 -07:00] [INFO] [unknown:920] ["[region 505] 2152 [term: 1] received a MsgHeartbeat message with higher term from 506 [term: 6]"]
[2019/05/01 12:40:50.291 -07:00] [INFO] [unknown:719] ["[region 505] 2152 became follower at term 6"]
[2019/05/01 12:40:50.367 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddLearnerNode, peer: Some(Peer { id: 2154, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=11] [term=7] [peer_id=2150] [region_id=1771]
[2019/05/01 12:40:50.367 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 8, version: 267, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddLearner] [peer_id=2150] [region_id=1771]
[2019/05/01 12:40:50.367 -07:00] [INFO] [apply.rs:1476] ["add learner successfully"] [region="Region { id: 1771, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 108, 111, 119, 95, 255, 112, 114, 105, 111, 255, 114, 105, 116, 255, 121, 95, 117, 112, 100, 255, 97, 116, 255, 101, 115, 0, 0, 0, 0, 251, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 108, 111, 119, 101, 255, 114, 95, 99, 97, 255, 115, 101, 95, 255, 102, 105, 108, 101, 95, 255, 115, 121, 255, 115, 116, 101, 109, 0, 0, 253, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 8, version: 267, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1773, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1774, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 2150, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 2154, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=2150] [region_id=1771]
[2019/05/01 12:40:52.293 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_505_6_10_(default|lock|write).sst] [snap_key=505_6_10]
[2019/05/01 12:40:52.306 -07:00] [INFO] [unknown:1792] ["[region 505] 2152 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 10, term: 6]"]
[2019/05/01 12:40:52.306 -07:00] [INFO] [unknown:1816] ["[region 505] 2152 restored progress of 506 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:40:52.306 -07:00] [INFO] [unknown:1816] ["[region 505] 2152 restored progress of 507 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:40:52.306 -07:00] [INFO] [unknown:1816] ["[region 505] 2152 restored progress of 1099 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:40:52.306 -07:00] [INFO] [unknown:1816] ["[region 505] 2152 restored progress of 2152 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:40:52.306 -07:00] [INFO] [unknown:474] ["[region 505] 2152 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 10, term: 6]"]
[2019/05/01 12:40:52.306 -07:00] [INFO] [unknown:1736] ["[region 505] 2152 [commit: 10] restored snapshot [index: 10, term: 6]"]
[2019/05/01 12:40:52.306 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=2152] [region_id=505]
[2019/05/01 12:40:52.306 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 10, truncated_state: Some(RaftTruncatedState { index: 10, term: 6, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 505, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 100, 105, 115, 99, 255, 111, 110, 110, 101, 255, 99, 116, 95, 255, 111, 110, 95, 101, 120, 255, 112, 105, 255, 114, 101, 100, 95, 112, 97, 255, 115, 255, 115, 119, 111, 114, 100, 0, 0, 253, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 100, 105, 118, 95, 255, 112, 114, 101, 99, 255, 105, 115, 105, 255, 111, 110, 95, 105, 110, 255, 99, 114, 255, 101, 109, 101, 110, 116, 0, 254, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 67, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 506, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 507, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1099, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 2152, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=2152] [region_id=505]
[2019/05/01 12:40:52.323 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 505, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 100, 105, 115, 99, 255, 111, 110, 110, 101, 255, 99, 116, 95, 255, 111, 110, 95, 101, 120, 255, 112, 105, 255, 114, 101, 100, 95, 112, 97, 255, 115, 255, 115, 119, 111, 114, 100, 0, 0, 253, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 100, 105, 118, 95, 255, 112, 114, 101, 99, 255, 105, 115, 105, 255, 111, 110, 95, 105, 110, 255, 99, 114, 255, 101, 109, 101, 110, 116, 0, 254, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 67, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 506, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 507, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1099, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 2152, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=2152] [region_id=505]
[2019/05/01 12:40:52.323 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 505] 2152"]
[2019/05/01 12:40:52.323 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=505]
[2019/05/01 12:40:52.339 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=16.063657ms] [region_id=505]
[2019/05/01 12:40:53.319 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 2152, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=11] [term=6] [peer_id=2152] [region_id=505]
[2019/05/01 12:40:53.319 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 9, version: 67, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=2152] [region_id=505]
[2019/05/01 12:40:53.319 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 505, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 100, 105, 115, 99, 255, 111, 110, 110, 101, 255, 99, 116, 95, 255, 111, 110, 95, 101, 120, 255, 112, 105, 255, 114, 101, 100, 95, 112, 97, 255, 115, 255, 115, 119, 111, 114, 100, 0, 0, 253, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 100, 105, 118, 95, 255, 112, 114, 101, 99, 255, 105, 115, 105, 255, 111, 110, 95, 105, 110, 255, 99, 114, 255, 101, 109, 101, 110, 116, 0, 254, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 67, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 506, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 507, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1099, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 2152, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 2152, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=2152] [region_id=505]
[2019/05/01 12:40:53.440 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 507, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=12] [term=6] [peer_id=2152] [region_id=505]
[2019/05/01 12:40:53.441 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 10, version: 67, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=2152] [region_id=505]
[2019/05/01 12:40:53.441 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 505, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 100, 105, 115, 99, 255, 111, 110, 110, 101, 255, 99, 116, 95, 255, 111, 110, 95, 101, 120, 255, 112, 105, 255, 114, 101, 100, 95, 112, 97, 255, 115, 255, 115, 119, 111, 114, 100, 0, 0, 253, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 100, 105, 118, 95, 255, 112, 114, 101, 99, 255, 105, 115, 105, 255, 111, 110, 95, 105, 110, 255, 99, 114, 255, 101, 109, 101, 110, 116, 0, 254, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 10, version: 67, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 506, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 507, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1099, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 2152, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 507, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=2152] [region_id=505]
[2019/05/01 12:40:54.225 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=2195] [region_id=1566]
[2019/05/01 12:40:54.226 -07:00] [INFO] [unknown:719] ["[region 1566] 2195 became follower at term 0"]
[2019/05/01 12:40:54.226 -07:00] [INFO] [unknown:295] ["[region 1566] 2195 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:40:54.226 -07:00] [INFO] [unknown:719] ["[region 1566] 2195 became follower at term 1"]
[2019/05/01 12:40:54.226 -07:00] [INFO] [unknown:920] ["[region 1566] 2195 [term: 1] received a MsgHeartbeat message with higher term from 1569 [term: 6]"]
[2019/05/01 12:40:54.226 -07:00] [INFO] [unknown:719] ["[region 1566] 2195 became follower at term 6"]
[2019/05/01 12:40:54.266 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=2197] [region_id=1154]
[2019/05/01 12:40:54.266 -07:00] [INFO] [unknown:719] ["[region 1154] 2197 became follower at term 0"]
[2019/05/01 12:40:54.266 -07:00] [INFO] [unknown:295] ["[region 1154] 2197 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:40:54.266 -07:00] [INFO] [unknown:719] ["[region 1154] 2197 became follower at term 1"]
[2019/05/01 12:40:54.266 -07:00] [INFO] [unknown:920] ["[region 1154] 2197 [term: 1] received a MsgHeartbeat message with higher term from 1196 [term: 8]"]
[2019/05/01 12:40:54.266 -07:00] [INFO] [unknown:719] ["[region 1154] 2197 became follower at term 8"]
[2019/05/01 12:40:54.282 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=2196] [region_id=1590]
[2019/05/01 12:40:54.283 -07:00] [INFO] [unknown:719] ["[region 1590] 2196 became follower at term 0"]
[2019/05/01 12:40:54.283 -07:00] [INFO] [unknown:295] ["[region 1590] 2196 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:40:54.283 -07:00] [INFO] [unknown:719] ["[region 1590] 2196 became follower at term 1"]
[2019/05/01 12:40:54.283 -07:00] [INFO] [unknown:920] ["[region 1590] 2196 [term: 1] received a MsgHeartbeat message with higher term from 1593 [term: 6]"]
[2019/05/01 12:40:54.283 -07:00] [INFO] [unknown:719] ["[region 1590] 2196 became follower at term 6"]
[2019/05/01 12:40:54.625 -07:00] [INFO] [unknown:1625] ["[region 1871] 2003 [term 6] received MsgTimeoutNow from 1873 and starts an election to get leadership."]
[2019/05/01 12:40:54.625 -07:00] [INFO] [unknown:739] ["[region 1871] 2003 became candidate at term 7"]
[2019/05/01 12:40:54.625 -07:00] [INFO] [unknown:854] ["[region 1871] 2003 received MsgRequestVoteResponse from 2003 at term 7"]
[2019/05/01 12:40:54.625 -07:00] [INFO] [unknown:828] ["[region 1871] 2003 [logterm: 6, index: 9] sent MsgRequestVote request to 1873 at term 7"]
[2019/05/01 12:40:54.625 -07:00] [INFO] [unknown:828] ["[region 1871] 2003 [logterm: 6, index: 9] sent MsgRequestVote request to 1872 at term 7"]
[2019/05/01 12:40:54.656 -07:00] [INFO] [unknown:854] ["[region 1871] 2003 received MsgRequestVoteResponse from 1873 at term 7"]
[2019/05/01 12:40:54.656 -07:00] [INFO] [unknown:1550] ["[region 1871] 2003 [quorum:2] has received 2 MsgRequestVoteResponse votes and 0 vote rejections"]
[2019/05/01 12:40:54.656 -07:00] [INFO] [unknown:1625] ["[region 357] 2149 [term 8] received MsgTimeoutNow from 359 and starts an election to get leadership."]
[2019/05/01 12:40:54.656 -07:00] [INFO] [unknown:789] ["[region 1871] 2003 became leader at term 7"]
[2019/05/01 12:40:54.656 -07:00] [INFO] [unknown:739] ["[region 357] 2149 became candidate at term 9"]
[2019/05/01 12:40:54.656 -07:00] [INFO] [unknown:854] ["[region 357] 2149 received MsgRequestVoteResponse from 2149 at term 9"]
[2019/05/01 12:40:54.656 -07:00] [INFO] [unknown:828] ["[region 357] 2149 [logterm: 8, index: 11] sent MsgRequestVote request to 360 at term 9"]
[2019/05/01 12:40:54.656 -07:00] [INFO] [unknown:828] ["[region 357] 2149 [logterm: 8, index: 11] sent MsgRequestVote request to 359 at term 9"]
[2019/05/01 12:40:54.714 -07:00] [INFO] [unknown:854] ["[region 357] 2149 received MsgRequestVoteResponse from 359 at term 9"]
[2019/05/01 12:40:54.714 -07:00] [INFO] [unknown:1550] ["[region 357] 2149 [quorum:2] has received 2 MsgRequestVoteResponse votes and 0 vote rejections"]
[2019/05/01 12:40:54.714 -07:00] [INFO] [unknown:789] ["[region 357] 2149 became leader at term 9"]
[2019/05/01 12:40:55.132 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 2154, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=12] [term=7] [peer_id=2150] [region_id=1771]
[2019/05/01 12:40:55.132 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 9, version: 267, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=2150] [region_id=1771]
[2019/05/01 12:40:55.132 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 1771, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 108, 111, 119, 95, 255, 112, 114, 105, 111, 255, 114, 105, 116, 255, 121, 95, 117, 112, 100, 255, 97, 116, 255, 101, 115, 0, 0, 0, 0, 251, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 108, 111, 119, 101, 255, 114, 95, 99, 97, 255, 115, 101, 95, 255, 102, 105, 108, 101, 95, 255, 115, 121, 255, 115, 116, 101, 109, 0, 0, 253, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 267, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1773, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1774, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 2150, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 2154, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 2154, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=2150] [region_id=1771]
[2019/05/01 12:40:55.176 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 1773, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=13] [term=7] [peer_id=2150] [region_id=1771]
[2019/05/01 12:40:55.176 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 10, version: 267, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=2150] [region_id=1771]
[2019/05/01 12:40:55.176 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 1771, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 108, 111, 119, 95, 255, 112, 114, 105, 111, 255, 114, 105, 116, 255, 121, 95, 117, 112, 100, 255, 97, 116, 255, 101, 115, 0, 0, 0, 0, 251, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 108, 111, 119, 101, 255, 114, 95, 99, 97, 255, 115, 101, 95, 255, 102, 105, 108, 101, 95, 255, 115, 121, 255, 115, 116, 101, 109, 0, 0, 253, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 10, version: 267, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1773, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1774, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 2150, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 2154, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1773, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=2150] [region_id=1771]
[2019/05/01 12:40:56.230 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_1566_6_7_(default|lock|write).sst] [snap_key=1566_6_7]
[2019/05/01 12:40:56.240 -07:00] [INFO] [unknown:1792] ["[region 1566] 2195 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 7, term: 6]"]
[2019/05/01 12:40:56.240 -07:00] [INFO] [unknown:1816] ["[region 1566] 2195 restored progress of 1567 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:40:56.240 -07:00] [INFO] [unknown:1816] ["[region 1566] 2195 restored progress of 1568 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:40:56.240 -07:00] [INFO] [unknown:1816] ["[region 1566] 2195 restored progress of 1569 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:40:56.240 -07:00] [INFO] [unknown:1816] ["[region 1566] 2195 restored progress of 2195 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:40:56.240 -07:00] [INFO] [unknown:474] ["[region 1566] 2195 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 7, term: 6]"]
[2019/05/01 12:40:56.240 -07:00] [INFO] [unknown:1736] ["[region 1566] 2195 [commit: 7] restored snapshot [index: 7, term: 6]"]
[2019/05/01 12:40:56.240 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=2195] [region_id=1566]
[2019/05/01 12:40:56.240 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 7, truncated_state: Some(RaftTruncatedState { index: 7, term: 6, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 1566, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 117, 255, 110, 100, 111, 255, 95, 116, 97, 98, 108, 255, 101, 115, 255, 112, 97, 99, 101, 115, 0, 254, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 117, 255, 115, 101, 95, 255, 110, 97, 116, 105, 118, 255, 101, 95, 255, 97, 105, 111, 0, 0, 0, 252, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 227, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1567, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1568, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1569, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 2195, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=2195] [region_id=1566]
[2019/05/01 12:40:56.257 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 1566, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 117, 255, 110, 100, 111, 255, 95, 116, 97, 98, 108, 255, 101, 115, 255, 112, 97, 99, 101, 115, 0, 254, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 117, 255, 115, 101, 95, 255, 110, 97, 116, 105, 118, 255, 101, 95, 255, 97, 105, 111, 0, 0, 0, 252, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 227, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1567, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1568, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1569, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 2195, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=2195] [region_id=1566]
[2019/05/01 12:40:56.257 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 1566] 2195"]
[2019/05/01 12:40:56.257 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=1566]
[2019/05/01 12:40:56.270 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_1154_8_12_(default|lock|write).sst] [snap_key=1154_8_12]
[2019/05/01 12:40:56.274 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=16.014033ms] [region_id=1566]
[2019/05/01 12:40:56.282 -07:00] [INFO] [unknown:1792] ["[region 1154] 2197 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 12, term: 8]"]
[2019/05/01 12:40:56.282 -07:00] [INFO] [unknown:1816] ["[region 1154] 2197 restored progress of 1156 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:40:56.282 -07:00] [INFO] [unknown:1816] ["[region 1154] 2197 restored progress of 1157 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:40:56.282 -07:00] [INFO] [unknown:1816] ["[region 1154] 2197 restored progress of 1196 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:40:56.282 -07:00] [INFO] [unknown:1816] ["[region 1154] 2197 restored progress of 2197 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:40:56.282 -07:00] [INFO] [unknown:474] ["[region 1154] 2197 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 12, term: 8]"]
[2019/05/01 12:40:56.282 -07:00] [INFO] [unknown:1736] ["[region 1154] 2197 [commit: 12] restored snapshot [index: 12, term: 8]"]
[2019/05/01 12:40:56.282 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=2197] [region_id=1154]
[2019/05/01 12:40:56.282 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 12, truncated_state: Some(RaftTruncatedState { index: 12, term: 8, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 1154, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 102, 255, 105, 108, 108, 255, 95, 102, 97, 99, 116, 255, 111, 114, 255, 0, 0, 0, 0, 0, 0, 249, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 102, 255, 108, 117, 115, 255, 104, 95, 108, 111, 103, 255, 95, 97, 255, 116, 95, 116, 105, 109, 101, 255, 111, 255, 117, 116, 0, 0, 0, 0, 0, 250, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 147, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1156, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1157, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1196, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 2197, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=2197] [region_id=1154]
[2019/05/01 12:40:56.288 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_1590_6_7_(default|lock|write).sst] [snap_key=1590_6_7]
[2019/05/01 12:40:56.301 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 1154] 2197"]
[2019/05/01 12:40:56.301 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=1154]
[2019/05/01 12:40:56.301 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 1154, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 102, 255, 105, 108, 108, 255, 95, 102, 97, 99, 116, 255, 111, 114, 255, 0, 0, 0, 0, 0, 0, 249, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 102, 255, 108, 117, 115, 255, 104, 95, 108, 111, 103, 255, 95, 97, 255, 116, 95, 116, 105, 109, 101, 255, 111, 255, 117, 116, 0, 0, 0, 0, 0, 250, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 147, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1156, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1157, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1196, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 2197, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=2197] [region_id=1154]
[2019/05/01 12:40:56.301 -07:00] [INFO] [unknown:1792] ["[region 1590] 2196 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 7, term: 6]"]
[2019/05/01 12:40:56.301 -07:00] [INFO] [unknown:1816] ["[region 1590] 2196 restored progress of 1591 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:40:56.301 -07:00] [INFO] [unknown:1816] ["[region 1590] 2196 restored progress of 1592 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:40:56.301 -07:00] [INFO] [unknown:1816] ["[region 1590] 2196 restored progress of 1593 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:40:56.301 -07:00] [INFO] [unknown:1816] ["[region 1590] 2196 restored progress of 2196 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:40:56.301 -07:00] [INFO] [unknown:474] ["[region 1590] 2196 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 7, term: 6]"]
[2019/05/01 12:40:56.301 -07:00] [INFO] [unknown:1736] ["[region 1590] 2196 [commit: 7] restored snapshot [index: 7, term: 6]"]
[2019/05/01 12:40:56.301 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=2196] [region_id=1590]
[2019/05/01 12:40:56.301 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 7, truncated_state: Some(RaftTruncatedState { index: 7, term: 6, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 1590, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 116, 101, 255, 114, 110, 97, 108, 255, 95, 116, 109, 255, 112, 95, 100, 105, 115, 255, 107, 95, 255, 115, 116, 111, 114, 97, 103, 255, 101, 255, 95, 101, 110, 103, 105, 110, 101, 255, 255, 0, 0, 0, 0, 0, 0, 0, 0, 255, 247, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 106, 111, 105, 110, 255, 95, 98, 117, 102, 255, 102, 101, 114, 255, 95, 115, 105, 122, 101, 255, 0, 0, 255, 0, 0, 0, 0, 0, 0, 247, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 227, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1591, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1592, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1593, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 2196, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=2196] [region_id=1590]
[2019/05/01 12:40:56.316 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 1590, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 116, 101, 255, 114, 110, 97, 108, 255, 95, 116, 109, 255, 112, 95, 100, 105, 115, 255, 107, 95, 255, 115, 116, 111, 114, 97, 103, 255, 101, 255, 95, 101, 110, 103, 105, 110, 101, 255, 255, 0, 0, 0, 0, 0, 0, 0, 0, 255, 247, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 106, 111, 105, 110, 255, 95, 98, 117, 102, 255, 102, 101, 114, 255, 95, 115, 105, 122, 101, 255, 0, 0, 255, 0, 0, 0, 0, 0, 0, 247, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 227, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1591, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1592, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1593, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 2196, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=2196] [region_id=1590]
[2019/05/01 12:40:56.316 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 1590] 2196"]
[2019/05/01 12:40:56.316 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=14.900553ms] [region_id=1154]
[2019/05/01 12:40:56.316 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=1590]
[2019/05/01 12:40:56.332 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=16.190525ms] [region_id=1590]
[2019/05/01 12:40:57.248 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 2195, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=8] [term=6] [peer_id=2195] [region_id=1566]
[2019/05/01 12:40:57.248 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 6, version: 227, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=2195] [region_id=1566]
[2019/05/01 12:40:57.248 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 1566, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 117, 255, 110, 100, 111, 255, 95, 116, 97, 98, 108, 255, 101, 115, 255, 112, 97, 99, 101, 115, 0, 254, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 117, 255, 115, 101, 95, 255, 110, 97, 116, 105, 118, 255, 101, 95, 255, 97, 105, 111, 0, 0, 0, 252, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 227, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1567, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1568, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1569, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 2195, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 2195, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=2195] [region_id=1566]
[2019/05/01 12:40:57.309 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 1568, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=9] [term=6] [peer_id=2195] [region_id=1566]
[2019/05/01 12:40:57.309 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 7, version: 227, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=2195] [region_id=1566]
[2019/05/01 12:40:57.309 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 1566, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 117, 255, 110, 100, 111, 255, 95, 116, 97, 98, 108, 255, 101, 115, 255, 112, 97, 99, 101, 115, 0, 254, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 117, 255, 115, 101, 95, 255, 110, 97, 116, 105, 118, 255, 101, 95, 255, 97, 105, 111, 0, 0, 0, 252, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 7, version: 227, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1567, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1568, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1569, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 2195, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1568, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=2195] [region_id=1566]
[2019/05/01 12:40:57.326 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 2197, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=13] [term=8] [peer_id=2197] [region_id=1154]
[2019/05/01 12:40:57.326 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 9, version: 147, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=2197] [region_id=1154]
[2019/05/01 12:40:57.326 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 1154, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 102, 255, 105, 108, 108, 255, 95, 102, 97, 99, 116, 255, 111, 114, 255, 0, 0, 0, 0, 0, 0, 249, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 102, 255, 108, 117, 115, 255, 104, 95, 108, 111, 103, 255, 95, 97, 255, 116, 95, 116, 105, 109, 101, 255, 111, 255, 117, 116, 0, 0, 0, 0, 0, 250, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 147, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1156, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1157, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1196, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 2197, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 2197, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=2197] [region_id=1154]
[2019/05/01 12:40:57.371 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 2196, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=8] [term=6] [peer_id=2196] [region_id=1590]
[2019/05/01 12:40:57.372 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 6, version: 227, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=2196] [region_id=1590]
[2019/05/01 12:40:57.372 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 1590, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 116, 101, 255, 114, 110, 97, 108, 255, 95, 116, 109, 255, 112, 95, 100, 105, 115, 255, 107, 95, 255, 115, 116, 111, 114, 97, 103, 255, 101, 255, 95, 101, 110, 103, 105, 110, 101, 255, 255, 0, 0, 0, 0, 0, 0, 0, 0, 255, 247, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 106, 111, 105, 110, 255, 95, 98, 117, 102, 255, 102, 101, 114, 255, 95, 115, 105, 122, 101, 255, 0, 0, 255, 0, 0, 0, 0, 0, 0, 247, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 227, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1591, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1592, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1593, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 2196, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 2196, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=2196] [region_id=1590]
[2019/05/01 12:40:57.376 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 1156, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=14] [term=8] [peer_id=2197] [region_id=1154]
[2019/05/01 12:40:57.376 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 10, version: 147, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=2197] [region_id=1154]
[2019/05/01 12:40:57.376 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 1154, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 102, 255, 105, 108, 108, 255, 95, 102, 97, 99, 116, 255, 111, 114, 255, 0, 0, 0, 0, 0, 0, 249, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 102, 255, 108, 117, 115, 255, 104, 95, 108, 111, 103, 255, 95, 97, 255, 116, 95, 116, 105, 109, 101, 255, 111, 255, 117, 116, 0, 0, 0, 0, 0, 250, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 10, version: 147, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1156, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1157, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1196, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 2197, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1156, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=2197] [region_id=1154]
[2019/05/01 12:40:57.470 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 1592, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=9] [term=6] [peer_id=2196] [region_id=1590]
[2019/05/01 12:40:57.470 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 7, version: 227, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=2196] [region_id=1590]
[2019/05/01 12:40:57.470 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 1590, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 116, 101, 255, 114, 110, 97, 108, 255, 95, 116, 109, 255, 112, 95, 100, 105, 115, 255, 107, 95, 255, 115, 116, 111, 114, 97, 103, 255, 101, 255, 95, 101, 110, 103, 105, 110, 101, 255, 255, 0, 0, 0, 0, 0, 0, 0, 0, 255, 247, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 106, 111, 105, 110, 255, 95, 98, 117, 102, 255, 102, 101, 114, 255, 95, 115, 105, 122, 101, 255, 0, 0, 255, 0, 0, 0, 0, 0, 0, 247, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 7, version: 227, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1591, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1592, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1593, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 2196, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1592, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=2196] [region_id=1590]
[2019/05/01 12:40:58.276 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=2200] [region_id=2111]
[2019/05/01 12:40:58.276 -07:00] [INFO] [unknown:719] ["[region 2111] 2200 became follower at term 0"]
[2019/05/01 12:40:58.276 -07:00] [INFO] [unknown:295] ["[region 2111] 2200 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:40:58.276 -07:00] [INFO] [unknown:719] ["[region 2111] 2200 became follower at term 1"]
[2019/05/01 12:40:58.276 -07:00] [INFO] [unknown:920] ["[region 2111] 2200 [term: 1] received a MsgHeartbeat message with higher term from 2113 [term: 6]"]
[2019/05/01 12:40:58.276 -07:00] [INFO] [unknown:719] ["[region 2111] 2200 became follower at term 6"]
[2019/05/01 12:40:59.272 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=2201] [region_id=1683]
[2019/05/01 12:40:59.272 -07:00] [INFO] [unknown:719] ["[region 1683] 2201 became follower at term 0"]
[2019/05/01 12:40:59.272 -07:00] [INFO] [unknown:295] ["[region 1683] 2201 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:40:59.272 -07:00] [INFO] [unknown:719] ["[region 1683] 2201 became follower at term 1"]
[2019/05/01 12:40:59.272 -07:00] [INFO] [unknown:920] ["[region 1683] 2201 [term: 1] received a MsgHeartbeat message with higher term from 1684 [term: 7]"]
[2019/05/01 12:40:59.272 -07:00] [INFO] [unknown:719] ["[region 1683] 2201 became follower at term 7"]
[2019/05/01 12:40:59.380 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddLearnerNode, peer: Some(Peer { id: 2202, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=10] [term=6] [peer_id=1355] [region_id=517]
[2019/05/01 12:40:59.381 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 8, version: 67, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddLearner] [peer_id=1355] [region_id=517]
[2019/05/01 12:40:59.381 -07:00] [INFO] [apply.rs:1476] ["add learner successfully"] [region="Region { id: 517, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 101, 110, 102, 111, 255, 114, 99, 101, 95, 255, 103, 116, 105, 255, 100, 95, 99, 111, 110, 255, 115, 105, 255, 115, 116, 101, 110, 99, 121, 255, 0, 255, 0, 0, 0, 0, 0, 0, 0, 247, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 101, 113, 95, 114, 255, 97, 110, 103, 101, 255, 95, 105, 110, 255, 100, 101, 120, 95, 100, 255, 105, 118, 255, 101, 95, 108, 105, 109, 105, 255, 116, 255, 0, 0, 0, 0, 0, 0, 0, 248, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 8, version: 67, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 518, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 520, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1355, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 2202, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1355] [region_id=517]
[2019/05/01 12:41:00.280 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_2111_6_7_(default|lock|write).sst] [snap_key=2111_6_7]
[2019/05/01 12:41:00.288 -07:00] [INFO] [unknown:1792] ["[region 2111] 2200 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 7, term: 6]"]
[2019/05/01 12:41:00.288 -07:00] [INFO] [unknown:1816] ["[region 2111] 2200 restored progress of 2112 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:41:00.288 -07:00] [INFO] [unknown:1816] ["[region 2111] 2200 restored progress of 2113 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:41:00.288 -07:00] [INFO] [unknown:1816] ["[region 2111] 2200 restored progress of 2114 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:41:00.288 -07:00] [INFO] [unknown:1816] ["[region 2111] 2200 restored progress of 2200 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:41:00.288 -07:00] [INFO] [unknown:474] ["[region 2111] 2200 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 7, term: 6]"]
[2019/05/01 12:41:00.288 -07:00] [INFO] [unknown:1736] ["[region 2111] 2200 [commit: 7] restored snapshot [index: 7, term: 6]"]
[2019/05/01 12:41:00.288 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=2200] [region_id=2111]
[2019/05/01 12:41:00.288 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 7, truncated_state: Some(RaftTruncatedState { index: 7, term: 6, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 2111, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 111, 112, 101, 110, 255, 95, 102, 105, 108, 255, 101, 115, 95, 255, 108, 105, 109, 105, 116, 255, 0, 0, 255, 0, 0, 0, 0, 0, 0, 247, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 111, 112, 116, 105, 255, 109, 105, 122, 101, 255, 114, 95, 112, 255, 114, 117, 110, 101, 95, 255, 108, 101, 255, 118, 101, 108, 0, 0, 0, 252, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 337, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 2112, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 2113, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 2114, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 2200, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=2200] [region_id=2111]
[2019/05/01 12:41:00.312 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 2111] 2200"]
[2019/05/01 12:41:00.312 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 2111, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 111, 112, 101, 110, 255, 95, 102, 105, 108, 255, 101, 115, 95, 255, 108, 105, 109, 105, 116, 255, 0, 0, 255, 0, 0, 0, 0, 0, 0, 247, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 111, 112, 116, 105, 255, 109, 105, 122, 101, 255, 114, 95, 112, 255, 114, 117, 110, 101, 95, 255, 108, 101, 255, 118, 101, 108, 0, 0, 0, 252, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 337, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 2112, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 2113, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 2114, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 2200, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=2200] [region_id=2111]
[2019/05/01 12:41:00.312 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=2111]
[2019/05/01 12:41:00.331 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=18.587562ms] [region_id=2111]
[2019/05/01 12:41:01.275 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_1683_7_8_(default|lock|write).sst] [snap_key=1683_7_8]
[2019/05/01 12:41:01.283 -07:00] [INFO] [unknown:1792] ["[region 1683] 2201 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 8, term: 7]"]
[2019/05/01 12:41:01.283 -07:00] [INFO] [unknown:1816] ["[region 1683] 2201 restored progress of 1684 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:41:01.283 -07:00] [INFO] [unknown:1816] ["[region 1683] 2201 restored progress of 1685 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:41:01.283 -07:00] [INFO] [unknown:1816] ["[region 1683] 2201 restored progress of 1686 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:41:01.283 -07:00] [INFO] [unknown:1816] ["[region 1683] 2201 restored progress of 2201 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:41:01.283 -07:00] [INFO] [unknown:474] ["[region 1683] 2201 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 8, term: 7]"]
[2019/05/01 12:41:01.283 -07:00] [INFO] [unknown:1736] ["[region 1683] 2201 [commit: 8] restored snapshot [index: 8, term: 7]"]
[2019/05/01 12:41:01.283 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=2201] [region_id=1683]
[2019/05/01 12:41:01.283 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 8, truncated_state: Some(RaftTruncatedState { index: 8, term: 7, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 1683, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 108, 111, 103, 95, 255, 98, 105, 110, 95, 255, 117, 115, 101, 255, 95, 118, 49, 95, 114, 255, 111, 119, 255, 95, 101, 118, 101, 110, 116, 255, 115, 255, 0, 0, 0, 0, 0, 0, 0, 248, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 108, 111, 103, 95, 255, 101, 114, 114, 111, 255, 114, 0, 0, 255, 0, 0, 0, 0, 0, 248, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 247, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1684, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1685, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1686, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 2201, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=2201] [region_id=1683]
[2019/05/01 12:41:01.303 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 1683] 2201"]
[2019/05/01 12:41:01.303 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 1683, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 108, 111, 103, 95, 255, 98, 105, 110, 95, 255, 117, 115, 101, 255, 95, 118, 49, 95, 114, 255, 111, 119, 255, 95, 101, 118, 101, 110, 116, 255, 115, 255, 0, 0, 0, 0, 0, 0, 0, 248, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 108, 111, 103, 95, 255, 101, 114, 114, 111, 255, 114, 0, 0, 255, 0, 0, 0, 0, 0, 248, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 247, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1684, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1685, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1686, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 2201, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=2201] [region_id=1683]
[2019/05/01 12:41:01.303 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=1683]
[2019/05/01 12:41:01.311 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 2200, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=8] [term=6] [peer_id=2200] [region_id=2111]
[2019/05/01 12:41:01.311 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 6, version: 337, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=2200] [region_id=2111]
[2019/05/01 12:41:01.311 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 2111, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 111, 112, 101, 110, 255, 95, 102, 105, 108, 255, 101, 115, 95, 255, 108, 105, 109, 105, 116, 255, 0, 0, 255, 0, 0, 0, 0, 0, 0, 247, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 111, 112, 116, 105, 255, 109, 105, 122, 101, 255, 114, 95, 112, 255, 114, 117, 110, 101, 95, 255, 108, 101, 255, 118, 101, 108, 0, 0, 0, 252, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 337, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 2112, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 2113, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 2114, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 2200, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 2200, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=2200] [region_id=2111]
[2019/05/01 12:41:01.335 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=31.290522ms] [region_id=1683]
[2019/05/01 12:41:01.344 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 2114, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=9] [term=6] [peer_id=2200] [region_id=2111]
[2019/05/01 12:41:01.344 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 7, version: 337, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=2200] [region_id=2111]
[2019/05/01 12:41:01.344 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 2111, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 111, 112, 101, 110, 255, 95, 102, 105, 108, 255, 101, 115, 95, 255, 108, 105, 109, 105, 116, 255, 0, 0, 255, 0, 0, 0, 0, 0, 0, 247, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 111, 112, 116, 105, 255, 109, 105, 122, 101, 255, 114, 95, 112, 255, 114, 117, 110, 101, 95, 255, 108, 101, 255, 118, 101, 108, 0, 0, 0, 252, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 7, version: 337, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 2112, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 2113, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 2114, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 2200, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 2114, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=2200] [region_id=2111]
[2019/05/01 12:41:01.382 -07:00] [INFO] [pd.rs:558] ["try to change peer"] [peer="Peer { id: 2203, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [change_type=AddLearnerNode] [region_id=1831]
[2019/05/01 12:41:01.382 -07:00] [INFO] [peer.rs:1953] ["propose conf change peer"] [change_peer=2203] [change_type=AddLearnerNode] [peer_id=2104] [region_id=1831]
[2019/05/01 12:41:01.413 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddLearnerNode, peer: Some(Peer { id: 2203, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=11] [term=7] [peer_id=2104] [region_id=1831]
[2019/05/01 12:41:01.413 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 8, version: 277, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddLearner] [peer_id=2104] [region_id=1831]
[2019/05/01 12:41:01.413 -07:00] [INFO] [apply.rs:1476] ["add learner successfully"] [region="Region { id: 1831, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 109, 97, 120, 95, 255, 101, 114, 114, 111, 255, 114, 95, 99, 255, 111, 117, 110, 116, 0, 254, 0, 0, 253], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 109, 97, 120, 95, 255, 104, 101, 97, 112, 255, 95, 116, 97, 255, 98, 108, 101, 95, 115, 255, 105, 122, 255, 101, 0, 0, 0, 0, 0, 250, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 8, version: 277, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1832, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1833, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 2104, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 2203, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=2104] [region_id=1831]
[2019/05/01 12:41:01.426 -07:00] [INFO] [peer.rs:1318] ["notify pd with change peer region"] [region="Region { id: 1831, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 109, 97, 120, 95, 255, 101, 114, 114, 111, 255, 114, 95, 99, 255, 111, 117, 110, 116, 0, 254, 0, 0, 253], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 109, 97, 120, 95, 255, 104, 101, 97, 112, 255, 95, 116, 97, 255, 98, 108, 101, 95, 115, 255, 105, 122, 255, 101, 0, 0, 0, 0, 0, 250, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 277, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1832, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1833, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 2104, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 2203, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=2104] [region_id=1831]
[2019/05/01 12:41:02.181 -07:00] [INFO] [peer_storage.rs:759] ["requesting snapshot"] [peer_id=2104] [region_id=1831]
[2019/05/01 12:41:02.181 -07:00] [INFO] [snap.rs:757] ["scan snapshot of one cf"] [size=0] [key_count=0] [cf=default] [snapshot=/opt/tidb/data/kv/snap/gen_1831_7_11_(default|lock|write).sst] [region_id=1831]
[2019/05/01 12:41:02.181 -07:00] [INFO] [snap.rs:757] ["scan snapshot of one cf"] [size=0] [key_count=0] [cf=lock] [snapshot=/opt/tidb/data/kv/snap/gen_1831_7_11_(default|lock|write).sst] [region_id=1831]
[2019/05/01 12:41:02.181 -07:00] [INFO] [snap.rs:757] ["scan snapshot of one cf"] [size=138] [key_count=2] [cf=write] [snapshot=/opt/tidb/data/kv/snap/gen_1831_7_11_(default|lock|write).sst] [region_id=1831]
[2019/05/01 12:41:02.190 -07:00] [INFO] [snap.rs:875] ["scan snapshot"] [takes=9.087823ms] [size=1375] [key_count=2] [snapshot=/opt/tidb/data/kv/snap/gen_1831_7_11_(default|lock|write).sst] [region_id=1831]
[2019/05/01 12:41:02.437 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 2201, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=9] [term=7] [peer_id=2201] [region_id=1683]
[2019/05/01 12:41:02.437 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 6, version: 247, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=2201] [region_id=1683]
[2019/05/01 12:41:02.437 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 1683, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 108, 111, 103, 95, 255, 98, 105, 110, 95, 255, 117, 115, 101, 255, 95, 118, 49, 95, 114, 255, 111, 119, 255, 95, 101, 118, 101, 110, 116, 255, 115, 255, 0, 0, 0, 0, 0, 0, 0, 248, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 108, 111, 103, 95, 255, 101, 114, 114, 111, 255, 114, 0, 0, 255, 0, 0, 0, 0, 0, 248, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 247, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1684, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1685, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1686, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 2201, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 2201, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=2201] [region_id=1683]
[2019/05/01 12:41:02.575 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 1686, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=10] [term=7] [peer_id=2201] [region_id=1683]
[2019/05/01 12:41:02.575 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 7, version: 247, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=2201] [region_id=1683]
[2019/05/01 12:41:02.575 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 1683, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 108, 111, 103, 95, 255, 98, 105, 110, 95, 255, 117, 115, 101, 255, 95, 118, 49, 95, 114, 255, 111, 119, 255, 95, 101, 118, 101, 110, 116, 255, 115, 255, 0, 0, 0, 0, 0, 0, 0, 248, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 108, 111, 103, 95, 255, 101, 114, 114, 111, 255, 114, 0, 0, 255, 0, 0, 0, 0, 0, 248, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 7, version: 247, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1684, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1685, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1686, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 2201, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1686, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=2201] [region_id=1683]
[2019/05/01 12:41:03.337 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 2202, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=11] [term=6] [peer_id=1355] [region_id=517]
[2019/05/01 12:41:03.337 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 9, version: 67, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=1355] [region_id=517]
[2019/05/01 12:41:03.337 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 517, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 101, 110, 102, 111, 255, 114, 99, 101, 95, 255, 103, 116, 105, 255, 100, 95, 99, 111, 110, 255, 115, 105, 255, 115, 116, 101, 110, 99, 121, 255, 0, 255, 0, 0, 0, 0, 0, 0, 0, 247, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 101, 113, 95, 114, 255, 97, 110, 103, 101, 255, 95, 105, 110, 255, 100, 101, 120, 95, 100, 255, 105, 118, 255, 101, 95, 108, 105, 109, 105, 255, 116, 255, 0, 0, 0, 0, 0, 0, 0, 248, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 67, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 518, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 520, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1355, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 2202, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 2202, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1355] [region_id=517]
