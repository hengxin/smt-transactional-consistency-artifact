[2019/05/01 12:35:18.991 -07:00] [INFO] [mod.rs:25] ["Welcome to TiKV."]
[2019/05/01 12:35:18.991 -07:00] [INFO] [mod.rs:27] []
[2019/05/01 12:35:18.991 -07:00] [INFO] [mod.rs:27] ["Release Version:   3.0.0-beta.1"]
[2019/05/01 12:35:18.991 -07:00] [INFO] [mod.rs:27] ["Git Commit Hash:   56a9a37a7c3357f9ced12ce6534f128b750c43dc"]
[2019/05/01 12:35:18.991 -07:00] [INFO] [mod.rs:27] ["Git Commit Branch: master"]
[2019/05/01 12:35:18.991 -07:00] [INFO] [mod.rs:27] ["UTC Build Time:    2019-04-01 01:29:25"]
[2019/05/01 12:35:18.991 -07:00] [INFO] [mod.rs:27] ["Rust Version:      rustc 1.35.0-nightly (a9da8fc9c 2019-03-04)"]
[2019/05/01 12:35:18.991 -07:00] [INFO] [mod.rs:29] []
[2019/05/01 12:35:18.991 -07:00] [INFO] [tikv-server.rs:494] ["using config"] [config="{\"log-level\":\"info\",\"log-file\":\"/opt/tidb/kv.log\",\"log-rotation-timespan\":\"1d\",\"panic-when-unexpected-key-or-data\":false,\"readpool\":{\"storage\":{\"high-concurrency\":4,\"normal-concurrency\":4,\"low-concurrency\":4,\"max-tasks-per-worker-high\":2000,\"max-tasks-per-worker-normal\":2000,\"max-tasks-per-worker-low\":2000,\"stack-size\":\"10MB\"},\"coprocessor\":{\"high-concurrency\":38,\"normal-concurrency\":38,\"low-concurrency\":38,\"max-tasks-per-worker-high\":2000,\"max-tasks-per-worker-normal\":2000,\"max-tasks-per-worker-low\":2000,\"stack-size\":\"10MB\"}},\"server\":{\"addr\":\"0.0.0.0:20160\",\"advertise-addr\":\"n3:20160\",\"status-addr\":\"0.0.0.0:20180\",\"status-thread-pool-size\":1,\"grpc-compression-type\":\"none\",\"grpc-concurrency\":4,\"grpc-concurrent-stream\":1024,\"grpc-raft-conn-num\":1,\"grpc-stream-initial-window-size\":\"2MB\",\"grpc-keepalive-time\":\"10s\",\"grpc-keepalive-timeout\":\"3s\",\"concurrent-send-snap-limit\":32,\"concurrent-recv-snap-limit\":32,\"end-point-recursion-limit\":1000,\"end-point-stream-channel-size\":8,\"end-point-batch-row-limit\":64,\"end-point-stream-batch-row-limit\":128,\"end-point-request-max-handle-duration\":\"1m\",\"snap-max-write-bytes-per-sec\":\"100MB\",\"snap-max-total-size\":\"0KB\",\"stats-concurrency\":1,\"heavy-load-threshold\":300,\"heavy-load-wait-duration\":\"1ms\",\"labels\":{}},\"storage\":{\"data-dir\":\"/opt/tidb/data/kv\",\"gc-ratio-threshold\":1.1,\"max-key-size\":4096,\"scheduler-notify-capacity\":10240,\"scheduler-concurrency\":2048000,\"scheduler-worker-pool-size\":8,\"scheduler-pending-write-threshold\":\"100MB\"},\"pd\":{\"endpoints\":[\"n1:2379\",\"n2:2379\",\"n3:2379\",\"n4:2379\",\"n5:2379\"]},\"metric\":{\"interval\":\"15s\",\"address\":\"\",\"job\":\"tikv\"},\"raftstore\":{\"sync-log\":true,\"prevote\":true,\"raftdb-path\":\"/opt/tidb/data/kv/raft\",\"capacity\":\"0KB\",\"raft-base-tick-interval\":\"1s\",\"raft-heartbeat-ticks\":2,\"raft-election-timeout-ticks\":10,\"raft-min-election-timeout-ticks\":10,\"raft-max-election-timeout-ticks\":20,\"raft-max-size-per-msg\":\"1MB\",\"raft-max-inflight-msgs\":256,\"raft-entry-max-size\":\"8MB\",\"raft-log-gc-tick-interval\":\"10s\",\"raft-log-gc-threshold\":50,\"raft-log-gc-count-limit\":73728,\"raft-log-gc-size-limit\":\"72MB\",\"raft-entry-cache-life-time\":\"30s\",\"raft-reject-transfer-leader-duration\":\"3s\",\"split-region-check-tick-interval\":\"10s\",\"region-split-check-diff\":\"6MB\",\"region-compact-check-interval\":\"5m\",\"clean-stale-peer-delay\":\"11m\",\"region-compact-check-step\":100,\"region-compact-min-tombstones\":10000,\"region-compact-tombstones-percent\":30,\"pd-heartbeat-tick-interval\":\"5s\",\"pd-store-heartbeat-tick-interval\":\"10s\",\"snap-mgr-gc-tick-interval\":\"1m\",\"snap-gc-timeout\":\"4h\",\"lock-cf-compact-interval\":\"10m\",\"lock-cf-compact-bytes-threshold\":\"256MB\",\"notify-capacity\":40960,\"messages-per-tick\":4096,\"max-peer-down-duration\":\"5m\",\"max-leader-missing-duration\":\"2h\",\"abnormal-leader-missing-duration\":\"10m\",\"peer-stale-state-check-interval\":\"5m\",\"leader-transfer-max-log-lag\":10,\"snap-apply-batch-size\":\"10MB\",\"consistency-check-interval\":\"0s\",\"report-region-flow-interval\":\"1m\",\"raft-store-max-leader-lease\":\"9s\",\"right-derive-when-split\":true,\"allow-remove-leader\":false,\"merge-max-log-gap\":10,\"merge-check-tick-interval\":\"10s\",\"use-delete-range\":false,\"cleanup-import-sst-interval\":\"10m\",\"local-read-batch-size\":1024,\"apply-max-batch-size\":1024,\"apply-pool-size\":2,\"store-max-batch-size\":1024,\"store-pool-size\":2,\"future-poll-size\":1},\"coprocessor\":{\"split-region-on-table\":true,\"batch-split-limit\":10,\"region-max-size\":\"144MB\",\"region-split-size\":\"96MB\",\"region-max-keys\":5,\"region-split-keys\":2},\"rocksdb\":{\"wal-recovery-mode\":2,\"wal-dir\":\"\",\"wal-ttl-seconds\":0,\"wal-size-limit\":\"0KB\",\"max-total-wal-size\":\"4GB\",\"max-background-jobs\":6,\"max-manifest-file-size\":\"128MB\",\"create-if-missing\":true,\"max-open-files\":40960,\"enable-statistics\":true,\"stats-dump-period\":\"10m\",\"compaction-readahead-size\":\"0KB\",\"info-log-max-size\":\"1GB\",\"info-log-roll-time\":\"0s\",\"info-log-keep-log-file-num\":10,\"info-log-dir\":\"\",\"rate-bytes-per-sec\":\"0KB\",\"rate-limiter-mode\":2,\"auto-tuned\":false,\"bytes-per-sync\":\"1MB\",\"wal-bytes-per-sync\":\"512KB\",\"max-sub-compactions\":1,\"writable-file-max-buffer-size\":\"1MB\",\"use-direct-io-for-flush-and-compaction\":false,\"enable-pipelined-write\":true,\"defaultcf\":{\"block-size\":\"64KB\",\"block-cache-size\":\"32995066MB\",\"disable-block-cache\":false,\"cache-index-and-filter-blocks\":true,\"pin-l0-filter-and-index-blocks\":true,\"use-bloom-filter\":true,\"optimize-filters-for-hits\":true,\"whole-key-filtering\":true,\"bloom-filter-bits-per-key\":10,\"block-based-bloom-filter\":false,\"read-amp-bytes-per-bit\":0,\"compression-per-level\":[\"no\",\"no\",\"lz4\",\"lz4\",\"lz4\",\"zstd\",\"zstd\"],\"write-buffer-size\":\"128MB\",\"max-write-buffer-number\":5,\"min-write-buffer-number-to-merge\":1,\"max-bytes-for-level-base\":\"512MB\",\"target-file-size-base\":\"8MB\",\"level0-file-num-compaction-trigger\":4,\"level0-slowdown-writes-trigger\":20,\"level0-stop-writes-trigger\":36,\"max-compaction-bytes\":\"2GB\",\"compaction-pri\":3,\"dynamic-level-bytes\":true,\"num-levels\":7,\"max-bytes-for-level-multiplier\":10,\"compaction-style\":0,\"disable-auto-compactions\":false,\"soft-pending-compaction-bytes-limit\":\"64GB\",\"hard-pending-compaction-bytes-limit\":\"256GB\",\"titan\":{\"min-blob-size\":1024,\"blob-file-compression\":\"lz4\",\"blob-cache-size\":\"0KB\",\"min-gc-batch-size\":\"16MB\",\"max-gc-batch-size\":\"64MB\",\"discardable-ratio\":0.5,\"sample-ratio\":0.1,\"merge-small-file-threshold\":\"8MB\"}},\"writecf\":{\"block-size\":\"64KB\",\"block-cache-size\":\"19797039MB\",\"disable-block-cache\":false,\"cache-index-and-filter-blocks\":true,\"pin-l0-filter-and-index-blocks\":true,\"use-bloom-filter\":true,\"optimize-filters-for-hits\":false,\"whole-key-filtering\":false,\"bloom-filter-bits-per-key\":10,\"block-based-bloom-filter\":false,\"read-amp-bytes-per-bit\":0,\"compression-per-level\":[\"no\",\"no\",\"lz4\",\"lz4\",\"lz4\",\"zstd\",\"zstd\"],\"write-buffer-size\":\"128MB\",\"max-write-buffer-number\":5,\"min-write-buffer-number-to-merge\":1,\"max-bytes-for-level-base\":\"512MB\",\"target-file-size-base\":\"8MB\",\"level0-file-num-compaction-trigger\":4,\"level0-slowdown-writes-trigger\":20,\"level0-stop-writes-trigger\":36,\"max-compaction-bytes\":\"2GB\",\"compaction-pri\":3,\"dynamic-level-bytes\":true,\"num-levels\":7,\"max-bytes-for-level-multiplier\":10,\"compaction-style\":0,\"disable-auto-compactions\":false,\"soft-pending-compaction-bytes-limit\":\"64GB\",\"hard-pending-compaction-bytes-limit\":\"256GB\",\"titan\":{\"min-blob-size\":4294967296,\"blob-file-compression\":\"lz4\",\"blob-cache-size\":\"0KB\",\"min-gc-batch-size\":\"16MB\",\"max-gc-batch-size\":\"64MB\",\"discardable-ratio\":0.5,\"sample-ratio\":0.1,\"merge-small-file-threshold\":\"8MB\"}},\"lockcf\":{\"block-size\":\"16KB\",\"block-cache-size\":\"1GB\",\"disable-block-cache\":false,\"cache-index-and-filter-blocks\":true,\"pin-l0-filter-and-index-blocks\":true,\"use-bloom-filter\":true,\"optimize-filters-for-hits\":false,\"whole-key-filtering\":true,\"bloom-filter-bits-per-key\":10,\"block-based-bloom-filter\":false,\"read-amp-bytes-per-bit\":0,\"compression-per-level\":[\"no\",\"no\",\"no\",\"no\",\"no\",\"no\",\"no\"],\"write-buffer-size\":\"128MB\",\"max-write-buffer-number\":5,\"min-write-buffer-number-to-merge\":1,\"max-bytes-for-level-base\":\"128MB\",\"target-file-size-base\":\"8MB\",\"level0-file-num-compaction-trigger\":1,\"level0-slowdown-writes-trigger\":20,\"level0-stop-writes-trigger\":36,\"max-compaction-bytes\":\"2GB\",\"compaction-pri\":0,\"dynamic-level-bytes\":true,\"num-levels\":7,\"max-bytes-for-level-multiplier\":10,\"compaction-style\":0,\"disable-auto-compactions\":false,\"soft-pending-compaction-bytes-limit\":\"64GB\",\"hard-pending-compaction-bytes-limit\":\"256GB\",\"titan\":{\"min-blob-size\":4294967296,\"blob-file-compression\":\"lz4\",\"blob-cache-size\":\"0KB\",\"min-gc-batch-size\":\"16MB\",\"max-gc-batch-size\":\"64MB\",\"discardable-ratio\":0.5,\"sample-ratio\":0.1,\"merge-small-file-threshold\":\"8MB\"}},\"raftcf\":{\"block-size\":\"16KB\",\"block-cache-size\":\"128MB\",\"disable-block-cache\":false,\"cache-index-and-filter-blocks\":true,\"pin-l0-filter-and-index-blocks\":true,\"use-bloom-filter\":true,\"optimize-filters-for-hits\":true,\"whole-key-filtering\":true,\"bloom-filter-bits-per-key\":10,\"block-based-bloom-filter\":false,\"read-amp-bytes-per-bit\":0,\"compression-per-level\":[\"no\",\"no\",\"no\",\"no\",\"no\",\"no\",\"no\"],\"write-buffer-size\":\"128MB\",\"max-write-buffer-number\":5,\"min-write-buffer-number-to-merge\":1,\"max-bytes-for-level-base\":\"128MB\",\"target-file-size-base\":\"8MB\",\"level0-file-num-compaction-trigger\":1,\"level0-slowdown-writes-trigger\":20,\"level0-stop-writes-trigger\":36,\"max-compaction-bytes\":\"2GB\",\"compaction-pri\":0,\"dynamic-level-bytes\":true,\"num-levels\":7,\"max-bytes-for-level-multiplier\":10,\"compaction-style\":0,\"disable-auto-compactions\":false,\"soft-pending-compaction-bytes-limit\":\"64GB\",\"hard-pending-compaction-bytes-limit\":\"256GB\",\"titan\":{\"min-blob-size\":4294967296,\"blob-file-compression\":\"lz4\",\"blob-cache-size\":\"0KB\",\"min-gc-batch-size\":\"16MB\",\"max-gc-batch-size\":\"64MB\",\"discardable-ratio\":0.5,\"sample-ratio\":0.1,\"merge-small-file-threshold\":\"8MB\"}},\"titan\":{\"enabled\":false,\"dirname\":\"\",\"disable-gc\":false,\"max-background-gc\":1}},\"raftdb\":{\"wal-recovery-mode\":2,\"wal-dir\":\"\",\"wal-ttl-seconds\":0,\"wal-size-limit\":\"0KB\",\"max-total-wal-size\":\"4GB\",\"max-background-jobs\":2,\"max-manifest-file-size\":\"20MB\",\"create-if-missing\":true,\"max-open-files\":40960,\"enable-statistics\":true,\"stats-dump-period\":\"10m\",\"compaction-readahead-size\":\"0KB\",\"info-log-max-size\":\"1GB\",\"info-log-roll-time\":\"0s\",\"info-log-keep-log-file-num\":10,\"info-log-dir\":\"\",\"max-sub-compactions\":1,\"writable-file-max-buffer-size\":\"1MB\",\"use-direct-io-for-flush-and-compaction\":false,\"enable-pipelined-write\":true,\"allow-concurrent-memtable-write\":false,\"bytes-per-sync\":\"1MB\",\"wal-bytes-per-sync\":\"512KB\",\"defaultcf\":{\"block-size\":\"64KB\",\"block-cache-size\":\"2GB\",\"disable-block-cache\":false,\"cache-index-and-filter-blocks\":true,\"pin-l0-filter-and-index-blocks\":true,\"use-bloom-filter\":false,\"optimize-filters-for-hits\":true,\"whole-key-filtering\":true,\"bloom-filter-bits-per-key\":10,\"block-based-bloom-filter\":false,\"read-amp-bytes-per-bit\":0,\"compression-per-level\":[\"no\",\"no\",\"lz4\",\"lz4\",\"lz4\",\"zstd\",\"zstd\"],\"write-buffer-size\":\"128MB\",\"max-write-buffer-number\":5,\"min-write-buffer-number-to-merge\":1,\"max-bytes-for-level-base\":\"512MB\",\"target-file-size-base\":\"8MB\",\"level0-file-num-compaction-trigger\":4,\"level0-slowdown-writes-trigger\":20,\"level0-stop-writes-trigger\":36,\"max-compaction-bytes\":\"2GB\",\"compaction-pri\":0,\"dynamic-level-bytes\":true,\"num-levels\":7,\"max-bytes-for-level-multiplier\":10,\"compaction-style\":0,\"disable-auto-compactions\":false,\"soft-pending-compaction-bytes-limit\":\"64GB\",\"hard-pending-compaction-bytes-limit\":\"256GB\",\"titan\":{\"min-blob-size\":1024,\"blob-file-compression\":\"lz4\",\"blob-cache-size\":\"0KB\",\"min-gc-batch-size\":\"16MB\",\"max-gc-batch-size\":\"64MB\",\"discardable-ratio\":0.5,\"sample-ratio\":0.1,\"merge-small-file-threshold\":\"8MB\"}}},\"security\":{\"ca-path\":\"\",\"cert-path\":\"\",\"key-path\":\"\",\"cipher-file\":\"\"},\"import\":{\"import-dir\":\"/tmp/tikv/import\",\"num-threads\":8,\"num-import-jobs\":8,\"num-import-sst-jobs\":2,\"max-prepare-duration\":\"5m\",\"region-split-size\":\"512MB\",\"stream-channel-window\":128,\"max-open-engines\":8}}"]
[2019/05/01 12:35:18.991 -07:00] [WARN] [tikv-server.rs:79] [check-kernel] [err="kernel parameters net.core.somaxconn got 128, expect 32768"]
[2019/05/01 12:35:18.991 -07:00] [WARN] [tikv-server.rs:79] [check-kernel] [err="kernel parameters net.ipv4.tcp_syncookies got 1, expect 0"]
[2019/05/01 12:35:18.991 -07:00] [WARN] [tikv-server.rs:79] [check-kernel] [err="kernel parameters vm.swappiness got 60, expect 0"]
[2019/05/01 12:35:18.992 -07:00] [INFO] [config.rs:887] ["check data dir"] [mount_fs="FsInfo { tp: \"ext4\", opts: \"rw,relatime,errors=remount-ro,data=ordered\", mnt_dir: \"/\", fsname: \"/dev/md0\" }"] [data_path=/opt/tidb/data/kv]
[2019/05/01 12:35:18.992 -07:00] [INFO] [config.rs:887] ["check data dir"] [mount_fs="FsInfo { tp: \"ext4\", opts: \"rw,relatime,errors=remount-ro,data=ordered\", mnt_dir: \"/\", fsname: \"/dev/md0\" }"] [data_path=/opt/tidb/data/kv/raft]
[2019/05/01 12:35:18.992 -07:00] [WARN] [mod.rs:533] ["environment variable `TZ` is missing, using `/etc/localtime`"]
[2019/05/01 12:35:18.992 -07:00] [INFO] [util.rs:408] ["connecting to PD endpoint"] [endpoints=n1:2379]
[2019/05/01 12:35:19.235 -07:00] [INFO] [unknown:841] ["New connected subchannel at 0x7f04cfc0f150 for subchannel 0x7f04cf840000"]
[2019/05/01 12:35:19.236 -07:00] [INFO] [util.rs:408] ["connecting to PD endpoint"] [endpoints=n2:2379]
[2019/05/01 12:35:19.237 -07:00] [INFO] [unknown:841] ["New connected subchannel at 0x7f04cf8145a0 for subchannel 0x7f04cf840200"]
[2019/05/01 12:35:19.238 -07:00] [INFO] [util.rs:408] ["connecting to PD endpoint"] [endpoints=n3:2379]
[2019/05/01 12:35:19.238 -07:00] [INFO] [unknown:841] ["New connected subchannel at 0x7f04cfc0f120 for subchannel 0x7f04cf840400"]
[2019/05/01 12:35:19.239 -07:00] [INFO] [util.rs:408] ["connecting to PD endpoint"] [endpoints=n4:2379]
[2019/05/01 12:35:19.239 -07:00] [INFO] [unknown:841] ["New connected subchannel at 0x7f04cf8148a0 for subchannel 0x7f04cf840600"]
[2019/05/01 12:35:19.240 -07:00] [INFO] [util.rs:408] ["connecting to PD endpoint"] [endpoints=n5:2379]
[2019/05/01 12:35:19.241 -07:00] [INFO] [unknown:841] ["New connected subchannel at 0x7f04cf814a20 for subchannel 0x7f04cf840800"]
[2019/05/01 12:35:19.241 -07:00] [INFO] [util.rs:408] ["connecting to PD endpoint"] [endpoints=http://n3:2379]
[2019/05/01 12:35:19.242 -07:00] [INFO] [unknown:841] ["New connected subchannel at 0x7f04cfc0f0c0 for subchannel 0x7f04cf840a00"]
[2019/05/01 12:35:19.242 -07:00] [INFO] [util.rs:408] ["connecting to PD endpoint"] [endpoints=http://n1:2379]
[2019/05/01 12:35:19.243 -07:00] [INFO] [unknown:841] ["New connected subchannel at 0x7f04cfc0f060 for subchannel 0x7f04cf840c00"]
[2019/05/01 12:35:19.244 -07:00] [INFO] [util.rs:467] ["connected to PD leader"] [endpoints=http://n1:2379]
[2019/05/01 12:35:19.244 -07:00] [INFO] [util.rs:396] ["all PD endpoints are consistent"] [endpoints="[\"n1:2379\", \"n2:2379\", \"n3:2379\", \"n4:2379\", \"n5:2379\"]"]
[2019/05/01 12:35:19.244 -07:00] [INFO] [tikv-server.rs:516] ["connect to PD cluster"] [cluster_id=6686144459742056010]
[2019/05/01 12:35:19.244 -07:00] [INFO] [mod.rs:346] ["starting working thread"] [worker=addr-resolver]
[2019/05/01 12:35:19.808 -07:00] [INFO] [mod.rs:346] ["starting working thread"] [worker=storage-scheduler]
[2019/05/01 12:35:19.808 -07:00] [INFO] [mod.rs:346] ["starting working thread"] [worker=gc-worker]
[2019/05/01 12:35:19.808 -07:00] [INFO] [mod.rs:628] ["Storage started."]
[2019/05/01 12:35:19.820 -07:00] [INFO] [server.rs:113] ["listening on addr"] [addr=0.0.0.0:20160]
[2019/05/01 12:35:19.821 -07:00] [INFO] [mod.rs:346] ["starting working thread"] [worker=region-collector-worker]
[2019/05/01 12:35:19.821 -07:00] [INFO] [node.rs:203] ["alloc store id"] [store_id=6]
[2019/05/01 12:35:19.861 -07:00] [INFO] [node.rs:218] ["alloc first region id"] [store_id=6] [cluster_id=6686144459742056010] [region_id=12]
[2019/05/01 12:35:19.871 -07:00] [INFO] [node.rs:225] ["alloc first peer id for first region"] [region_id=12] [peer_id=13]
[2019/05/01 12:35:19.945 -07:00] [INFO] [node.rs:136] ["try bootstrap cluster"] [region="Region { id: 12, start_key: [], end_key: [], region_epoch: Some(RegionEpoch { conf_ver: 1, version: 1, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 4 } }), peers: [Peer { id: 13, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 4 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 14 } }"] [store_id=6]
[2019/05/01 12:35:19.970 -07:00] [ERROR] [util.rs:338] ["request failed"] [err="Grpc(RpcFailure(RpcStatus { status: Unknown, details: Some(\"cluster 6686144459742056010 already bootstrapped\") }))"]
[2019/05/01 12:35:19.973 -07:00] [INFO] [node.rs:274] ["cluster is already bootstrapped"] [cluster_id=6686144459742056010]
[2019/05/01 12:35:20.095 -07:00] [INFO] [node.rs:326] ["start raft store thread"] [store_id=6]
[2019/05/01 12:35:20.095 -07:00] [INFO] [store.rs:772] ["start store"] [takes=47.593µs] [merge_count=0] [applying_count=0] [tombstone_count=0] [region_count=0] [store_id=6]
[2019/05/01 12:35:20.095 -07:00] [INFO] [store.rs:824] ["cleans up garbage data"] [takes=18.034µs] [garbage_range_count=1] [store_id=6]
[2019/05/01 12:35:20.096 -07:00] [INFO] [mod.rs:346] ["starting working thread"] [worker=local-reader]
[2019/05/01 12:35:20.096 -07:00] [INFO] [mod.rs:346] ["starting working thread"] [worker=split-check]
[2019/05/01 12:35:20.096 -07:00] [INFO] [mod.rs:346] ["starting working thread"] [worker=snapshot-worker]
[2019/05/01 12:35:20.096 -07:00] [INFO] [mod.rs:346] ["starting working thread"] [worker=raft-gc-worker]
[2019/05/01 12:35:20.096 -07:00] [INFO] [mod.rs:346] ["starting working thread"] [worker=compact-worker]
[2019/05/01 12:35:20.097 -07:00] [INFO] [future.rs:142] ["starting working thread"] [worker=pd-worker]
[2019/05/01 12:35:20.097 -07:00] [INFO] [mod.rs:346] ["starting working thread"] [worker=consistency-check]
[2019/05/01 12:35:20.097 -07:00] [INFO] [mod.rs:346] ["starting working thread"] [worker=cleanup-sst]
[2019/05/01 12:35:20.098 -07:00] [INFO] [gc_worker.rs:732] ["gc-manager is started"]
[2019/05/01 12:35:20.098 -07:00] [INFO] [mod.rs:346] ["starting working thread"] [worker=snap-handler]
[2019/05/01 12:35:20.098 -07:00] [INFO] [gc_worker.rs:760] ["gc-manager is initializing"]
[2019/05/01 12:35:20.175 -07:00] [INFO] [server.rs:213] ["TiKV is ready to serve"]
[2019/05/01 12:35:20.176 -07:00] [INFO] [status_server.rs:40] ["Status server started"]
[2019/05/01 12:35:30.097 -07:00] [INFO] [util.rs:84] ["heartbeat receiver is refreshed"]
[2019/05/01 12:35:31.877 -07:00] [INFO] [kv.rs:652] ["batch_raft RPC is called, new gRPC stream established"]
[2019/05/01 12:35:31.877 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=50] [region_id=20]
[2019/05/01 12:35:31.877 -07:00] [INFO] [unknown:719] ["[region 20] 50 became follower at term 0"]
[2019/05/01 12:35:31.877 -07:00] [INFO] [unknown:295] ["[region 20] 50 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:35:31.877 -07:00] [INFO] [unknown:719] ["[region 20] 50 became follower at term 1"]
[2019/05/01 12:35:31.877 -07:00] [INFO] [unknown:920] ["[region 20] 50 [term: 1] received a MsgHeartbeat message with higher term from 21 [term: 6]"]
[2019/05/01 12:35:31.877 -07:00] [INFO] [unknown:719] ["[region 20] 50 became follower at term 6"]
[2019/05/01 12:35:31.878 -07:00] [INFO] [transport.rs:277] ["resolve store address ok"] [addr=n1:20160] [store_id=1]
[2019/05/01 12:35:31.878 -07:00] [INFO] [raft_client.rs:59] ["server: new connection with tikv endpoint"] [addr=n1:20160]
[2019/05/01 12:35:31.880 -07:00] [INFO] [unknown:841] ["New connected subchannel at 0x7f041f8172a0 for subchannel 0x7f04cf840e00"]
[2019/05/01 12:35:32.876 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=51] [region_id=22]
[2019/05/01 12:35:32.876 -07:00] [INFO] [unknown:719] ["[region 22] 51 became follower at term 0"]
[2019/05/01 12:35:32.876 -07:00] [INFO] [unknown:295] ["[region 22] 51 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:35:32.876 -07:00] [INFO] [unknown:719] ["[region 22] 51 became follower at term 1"]
[2019/05/01 12:35:32.876 -07:00] [INFO] [unknown:920] ["[region 22] 51 [term: 1] received a MsgHeartbeat message with higher term from 23 [term: 6]"]
[2019/05/01 12:35:32.876 -07:00] [INFO] [unknown:719] ["[region 22] 51 became follower at term 6"]
[2019/05/01 12:35:33.879 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_20_6_7_(default|lock|write).sst] [snap_key=20_6_7]
[2019/05/01 12:35:33.904 -07:00] [INFO] [unknown:1792] ["[region 20] 50 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 7, term: 6]"]
[2019/05/01 12:35:33.904 -07:00] [INFO] [unknown:1816] ["[region 20] 50 restored progress of 21 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:35:33.904 -07:00] [INFO] [unknown:1816] ["[region 20] 50 restored progress of 50 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:35:33.904 -07:00] [INFO] [unknown:474] ["[region 20] 50 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 7, term: 6]"]
[2019/05/01 12:35:33.904 -07:00] [INFO] [unknown:1736] ["[region 20] 50 [commit: 7] restored snapshot [index: 7, term: 6]"]
[2019/05/01 12:35:33.904 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=50] [region_id=20]
[2019/05/01 12:35:33.904 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 7, truncated_state: Some(RaftTruncatedState { index: 7, term: 6, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 20, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 9, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 16, 0, 0, 0, 0, 0, 0, 0, 248], region_epoch: Some(RegionEpoch { conf_ver: 2, version: 4, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 21, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 50, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=50] [region_id=20]
[2019/05/01 12:35:33.931 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 20, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 9, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 16, 0, 0, 0, 0, 0, 0, 0, 248], region_epoch: Some(RegionEpoch { conf_ver: 2, version: 4, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 21, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 50, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=50] [region_id=20]
[2019/05/01 12:35:33.931 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 20] 50"]
[2019/05/01 12:35:33.931 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=20]
[2019/05/01 12:35:33.931 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=35.81µs] [region_id=20]
[2019/05/01 12:35:34.880 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_22_6_7_(default|lock|write).sst] [snap_key=22_6_7]
[2019/05/01 12:35:34.886 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 50, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=8] [term=6] [peer_id=50] [region_id=20]
[2019/05/01 12:35:34.886 -07:00] [INFO] [unknown:1792] ["[region 22] 51 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 7, term: 6]"]
[2019/05/01 12:35:34.886 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 2, version: 4, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=50] [region_id=20]
[2019/05/01 12:35:34.886 -07:00] [INFO] [unknown:1816] ["[region 22] 51 restored progress of 23 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:35:34.886 -07:00] [INFO] [unknown:1816] ["[region 22] 51 restored progress of 51 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:35:34.886 -07:00] [INFO] [unknown:474] ["[region 22] 51 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 7, term: 6]"]
[2019/05/01 12:35:34.886 -07:00] [INFO] [unknown:1736] ["[region 22] 51 [commit: 7] restored snapshot [index: 7, term: 6]"]
[2019/05/01 12:35:34.886 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=51] [region_id=22]
[2019/05/01 12:35:34.886 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 7, truncated_state: Some(RaftTruncatedState { index: 7, term: 6, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 22, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 16, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 24, 0, 0, 0, 0, 0, 0, 0, 248], region_epoch: Some(RegionEpoch { conf_ver: 2, version: 5, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 23, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 51, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=51] [region_id=22]
[2019/05/01 12:35:34.886 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 20, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 9, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 16, 0, 0, 0, 0, 0, 0, 0, 248], region_epoch: Some(RegionEpoch { conf_ver: 2, version: 4, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 21, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 50, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 50, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=50] [region_id=20]
[2019/05/01 12:35:34.927 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 22] 51"]
[2019/05/01 12:35:34.927 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 22, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 16, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 24, 0, 0, 0, 0, 0, 0, 0, 248], region_epoch: Some(RegionEpoch { conf_ver: 2, version: 5, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 23, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 51, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=51] [region_id=22]
[2019/05/01 12:35:34.927 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=22]
[2019/05/01 12:35:34.927 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=30.582µs] [region_id=22]
[2019/05/01 12:35:35.889 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 51, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=8] [term=6] [peer_id=51] [region_id=22]
[2019/05/01 12:35:35.889 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 2, version: 5, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=51] [region_id=22]
[2019/05/01 12:35:35.889 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 22, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 16, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 24, 0, 0, 0, 0, 0, 0, 0, 248], region_epoch: Some(RegionEpoch { conf_ver: 2, version: 5, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 23, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 51, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 51, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=51] [region_id=22]
[2019/05/01 12:35:35.920 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=160] [region_id=88]
[2019/05/01 12:35:35.929 -07:00] [INFO] [unknown:719] ["[region 88] 160 became follower at term 0"]
[2019/05/01 12:35:35.929 -07:00] [INFO] [unknown:295] ["[region 88] 160 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:35:35.929 -07:00] [INFO] [unknown:719] ["[region 88] 160 became follower at term 1"]
[2019/05/01 12:35:35.929 -07:00] [INFO] [unknown:920] ["[region 88] 160 [term: 1] received a MsgHeartbeat message with higher term from 89 [term: 6]"]
[2019/05/01 12:35:35.929 -07:00] [INFO] [unknown:719] ["[region 88] 160 became follower at term 6"]
[2019/05/01 12:35:36.888 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=159] [region_id=16]
[2019/05/01 12:35:36.888 -07:00] [INFO] [unknown:719] ["[region 16] 159 became follower at term 0"]
[2019/05/01 12:35:36.888 -07:00] [INFO] [unknown:295] ["[region 16] 159 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:35:36.888 -07:00] [INFO] [unknown:719] ["[region 16] 159 became follower at term 1"]
[2019/05/01 12:35:36.888 -07:00] [INFO] [unknown:920] ["[region 16] 159 [term: 1] received a MsgHeartbeat message with higher term from 17 [term: 6]"]
[2019/05/01 12:35:36.888 -07:00] [INFO] [unknown:719] ["[region 16] 159 became follower at term 6"]
[2019/05/01 12:35:37.924 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_88_6_7_(default|lock|write).sst] [snap_key=88_6_7]
[2019/05/01 12:35:37.932 -07:00] [INFO] [unknown:1792] ["[region 88] 160 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 7, term: 6]"]
[2019/05/01 12:35:37.932 -07:00] [INFO] [unknown:1816] ["[region 88] 160 restored progress of 89 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:35:37.932 -07:00] [INFO] [unknown:1816] ["[region 88] 160 restored progress of 90 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:35:37.932 -07:00] [INFO] [unknown:1816] ["[region 88] 160 restored progress of 160 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:35:37.932 -07:00] [INFO] [unknown:474] ["[region 88] 160 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 7, term: 6]"]
[2019/05/01 12:35:37.932 -07:00] [INFO] [unknown:1736] ["[region 88] 160 [commit: 7] restored snapshot [index: 7, term: 6]"]
[2019/05/01 12:35:37.932 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=160] [region_id=88]
[2019/05/01 12:35:37.932 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 7, truncated_state: Some(RaftTruncatedState { index: 7, term: 6, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 88, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 7, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 7, 95, 114, 128, 0, 0, 0, 0, 255, 0, 0, 1, 0, 0, 0, 0, 0, 250], region_epoch: Some(RegionEpoch { conf_ver: 3, version: 5, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 89, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 90, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 160, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=160] [region_id=88]
[2019/05/01 12:35:37.960 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 88] 160"]
[2019/05/01 12:35:37.960 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 88, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 7, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 7, 95, 114, 128, 0, 0, 0, 0, 255, 0, 0, 1, 0, 0, 0, 0, 0, 250], region_epoch: Some(RegionEpoch { conf_ver: 3, version: 5, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 89, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 90, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 160, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=160] [region_id=88]
[2019/05/01 12:35:37.960 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=88]
[2019/05/01 12:35:37.987 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=26.377766ms] [region_id=88]
[2019/05/01 12:35:38.007 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=162] [region_id=126]
[2019/05/01 12:35:38.007 -07:00] [INFO] [unknown:719] ["[region 126] 162 became follower at term 0"]
[2019/05/01 12:35:38.007 -07:00] [INFO] [unknown:295] ["[region 126] 162 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:35:38.007 -07:00] [INFO] [unknown:719] ["[region 126] 162 became follower at term 1"]
[2019/05/01 12:35:38.007 -07:00] [INFO] [unknown:920] ["[region 126] 162 [term: 1] received a MsgHeartbeat message with higher term from 127 [term: 6]"]
[2019/05/01 12:35:38.007 -07:00] [INFO] [unknown:719] ["[region 126] 162 became follower at term 6"]
[2019/05/01 12:35:38.892 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_16_6_494_(default|lock|write).sst] [snap_key=16_6_494]
[2019/05/01 12:35:38.898 -07:00] [INFO] [unknown:1792] ["[region 16] 159 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 494, term: 6]"]
[2019/05/01 12:35:38.898 -07:00] [INFO] [unknown:1816] ["[region 16] 159 restored progress of 17 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:35:38.898 -07:00] [INFO] [unknown:1816] ["[region 16] 159 restored progress of 48 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:35:38.898 -07:00] [INFO] [unknown:1816] ["[region 16] 159 restored progress of 159 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:35:38.898 -07:00] [INFO] [unknown:474] ["[region 16] 159 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 494, term: 6]"]
[2019/05/01 12:35:38.898 -07:00] [INFO] [unknown:1736] ["[region 16] 159 [commit: 494] restored snapshot [index: 494, term: 6]"]
[2019/05/01 12:35:38.898 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=159] [region_id=16]
[2019/05/01 12:35:38.898 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 494, truncated_state: Some(RaftTruncatedState { index: 494, term: 6, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 16, start_key: [109, 68, 66, 58, 52, 0, 0, 0, 255, 0, 251, 0, 0, 0, 0, 0, 0, 255, 0, 72, 0, 0, 0, 0, 0, 0, 249], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 7, 0, 0, 0, 0, 0, 0, 0, 248], region_epoch: Some(RegionEpoch { conf_ver: 4, version: 5, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 17, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 48, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 159, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=159] [region_id=16]
[2019/05/01 12:35:38.918 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 16, start_key: [109, 68, 66, 58, 52, 0, 0, 0, 255, 0, 251, 0, 0, 0, 0, 0, 0, 255, 0, 72, 0, 0, 0, 0, 0, 0, 249], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 7, 0, 0, 0, 0, 0, 0, 0, 248], region_epoch: Some(RegionEpoch { conf_ver: 4, version: 5, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 17, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 48, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 159, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=159] [region_id=16]
[2019/05/01 12:35:38.918 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 16] 159"]
[2019/05/01 12:35:38.918 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=16]
[2019/05/01 12:35:38.937 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 160, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=8] [term=6] [peer_id=160] [region_id=88]
[2019/05/01 12:35:38.937 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 3, version: 5, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=160] [region_id=88]
[2019/05/01 12:35:38.937 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 88, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 7, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 7, 95, 114, 128, 0, 0, 0, 0, 255, 0, 0, 1, 0, 0, 0, 0, 0, 250], region_epoch: Some(RegionEpoch { conf_ver: 3, version: 5, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 89, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 90, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 160, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 160, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=160] [region_id=88]
[2019/05/01 12:35:38.958 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=40.261999ms] [region_id=16]
[2019/05/01 12:35:39.046 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddLearnerNode, peer: Some(Peer { id: 166, store_id: 3, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=9] [term=6] [peer_id=50] [region_id=20]
[2019/05/01 12:35:39.046 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 3, version: 4, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddLearner] [peer_id=50] [region_id=20]
[2019/05/01 12:35:39.046 -07:00] [INFO] [apply.rs:1476] ["add learner successfully"] [region="Region { id: 20, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 9, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 16, 0, 0, 0, 0, 0, 0, 0, 248], region_epoch: Some(RegionEpoch { conf_ver: 3, version: 4, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 21, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 50, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 166, store_id: 3, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=50] [region_id=20]
[2019/05/01 12:35:39.141 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddLearnerNode, peer: Some(Peer { id: 167, store_id: 3, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=9] [term=6] [peer_id=51] [region_id=22]
[2019/05/01 12:35:39.141 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 3, version: 5, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddLearner] [peer_id=51] [region_id=22]
[2019/05/01 12:35:39.141 -07:00] [INFO] [apply.rs:1476] ["add learner successfully"] [region="Region { id: 22, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 16, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 24, 0, 0, 0, 0, 0, 0, 0, 248], region_epoch: Some(RegionEpoch { conf_ver: 3, version: 5, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 23, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 51, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 167, store_id: 3, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=51] [region_id=22]
[2019/05/01 12:35:39.345 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 90, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=9] [term=6] [peer_id=160] [region_id=88]
[2019/05/01 12:35:39.345 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 4, version: 5, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=160] [region_id=88]
[2019/05/01 12:35:39.345 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 88, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 7, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 7, 95, 114, 128, 0, 0, 0, 0, 255, 0, 0, 1, 0, 0, 0, 0, 0, 250], region_epoch: Some(RegionEpoch { conf_ver: 4, version: 5, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 89, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 90, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 160, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 90, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=160] [region_id=88]
[2019/05/01 12:35:39.921 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 159, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=495] [term=6] [peer_id=159] [region_id=16]
[2019/05/01 12:35:39.922 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 4, version: 5, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=159] [region_id=16]
[2019/05/01 12:35:39.922 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 16, start_key: [109, 68, 66, 58, 52, 0, 0, 0, 255, 0, 251, 0, 0, 0, 0, 0, 0, 255, 0, 72, 0, 0, 0, 0, 0, 0, 249], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 7, 0, 0, 0, 0, 0, 0, 0, 248], region_epoch: Some(RegionEpoch { conf_ver: 4, version: 5, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 17, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 48, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 159, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 159, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=159] [region_id=16]
[2019/05/01 12:35:39.924 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=164] [region_id=91]
[2019/05/01 12:35:39.924 -07:00] [INFO] [unknown:719] ["[region 91] 164 became follower at term 0"]
[2019/05/01 12:35:39.924 -07:00] [INFO] [unknown:295] ["[region 91] 164 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:35:39.924 -07:00] [INFO] [unknown:719] ["[region 91] 164 became follower at term 1"]
[2019/05/01 12:35:39.924 -07:00] [INFO] [unknown:920] ["[region 91] 164 [term: 1] received a MsgHeartbeat message with higher term from 92 [term: 6]"]
[2019/05/01 12:35:39.924 -07:00] [INFO] [unknown:719] ["[region 91] 164 became follower at term 6"]
[2019/05/01 12:35:40.011 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_126_6_7_(default|lock|write).sst] [snap_key=126_6_7]
[2019/05/01 12:35:40.016 -07:00] [INFO] [unknown:1792] ["[region 126] 162 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 7, term: 6]"]
[2019/05/01 12:35:40.016 -07:00] [INFO] [unknown:1816] ["[region 126] 162 restored progress of 127 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:35:40.016 -07:00] [INFO] [unknown:1816] ["[region 126] 162 restored progress of 128 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:35:40.016 -07:00] [INFO] [unknown:1816] ["[region 126] 162 restored progress of 162 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:35:40.016 -07:00] [INFO] [unknown:474] ["[region 126] 162 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 7, term: 6]"]
[2019/05/01 12:35:40.016 -07:00] [INFO] [unknown:1736] ["[region 126] 162 [commit: 7] restored snapshot [index: 7, term: 6]"]
[2019/05/01 12:35:40.016 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=162] [region_id=126]
[2019/05/01 12:35:40.016 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 7, truncated_state: Some(RaftTruncatedState { index: 7, term: 6, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 126, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 116, 105, 100, 98, 255, 95, 115, 101, 114, 255, 118, 101, 114, 255, 95, 118, 101, 114, 115, 255, 105, 111, 255, 110, 0, 0, 0, 0, 0, 250, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 3, version: 18, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 127, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 128, store_id: 2, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 162, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=162] [region_id=126]
[2019/05/01 12:35:40.035 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 126, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 116, 105, 100, 98, 255, 95, 115, 101, 114, 255, 118, 101, 114, 255, 95, 118, 101, 114, 115, 255, 105, 111, 255, 110, 0, 0, 0, 0, 0, 250, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 3, version: 18, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 127, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 128, store_id: 2, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 162, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=162] [region_id=126]
[2019/05/01 12:35:40.035 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 126] 162"]
[2019/05/01 12:35:40.035 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=126]
[2019/05/01 12:35:40.052 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=17.358206ms] [region_id=126]
[2019/05/01 12:35:40.884 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=168] [region_id=24]
[2019/05/01 12:35:40.884 -07:00] [INFO] [unknown:719] ["[region 24] 168 became follower at term 0"]
[2019/05/01 12:35:40.884 -07:00] [INFO] [unknown:295] ["[region 24] 168 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:35:40.884 -07:00] [INFO] [unknown:719] ["[region 24] 168 became follower at term 1"]
[2019/05/01 12:35:40.884 -07:00] [INFO] [unknown:920] ["[region 24] 168 [term: 1] received a MsgHeartbeat message with higher term from 25 [term: 6]"]
[2019/05/01 12:35:40.884 -07:00] [INFO] [unknown:719] ["[region 24] 168 became follower at term 6"]
[2019/05/01 12:35:41.018 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 162, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=8] [term=6] [peer_id=162] [region_id=126]
[2019/05/01 12:35:41.018 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 3, version: 18, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=162] [region_id=126]
[2019/05/01 12:35:41.018 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 126, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 116, 105, 100, 98, 255, 95, 115, 101, 114, 255, 118, 101, 114, 255, 95, 118, 101, 114, 115, 255, 105, 111, 255, 110, 0, 0, 0, 0, 0, 250, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 3, version: 18, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 127, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 128, store_id: 2, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 162, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 162, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=162] [region_id=126]
[2019/05/01 12:35:41.359 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 128, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=9] [term=6] [peer_id=162] [region_id=126]
[2019/05/01 12:35:41.359 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 4, version: 18, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=162] [region_id=126]
[2019/05/01 12:35:41.359 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 126, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 116, 105, 100, 98, 255, 95, 115, 101, 114, 255, 118, 101, 114, 255, 95, 118, 101, 114, 115, 255, 105, 111, 255, 110, 0, 0, 0, 0, 0, 250, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 4, version: 18, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 127, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 128, store_id: 2, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 162, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 128, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=162] [region_id=126]
[2019/05/01 12:35:41.700 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=169] [region_id=96]
[2019/05/01 12:35:41.700 -07:00] [INFO] [unknown:719] ["[region 96] 169 became follower at term 0"]
[2019/05/01 12:35:41.700 -07:00] [INFO] [unknown:295] ["[region 96] 169 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:35:41.700 -07:00] [INFO] [unknown:719] ["[region 96] 169 became follower at term 1"]
[2019/05/01 12:35:41.700 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=170] [region_id=99]
[2019/05/01 12:35:41.700 -07:00] [INFO] [unknown:719] ["[region 99] 170 became follower at term 0"]
[2019/05/01 12:35:41.700 -07:00] [INFO] [unknown:295] ["[region 99] 170 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:35:41.700 -07:00] [INFO] [unknown:719] ["[region 99] 170 became follower at term 1"]
[2019/05/01 12:35:41.700 -07:00] [INFO] [unknown:920] ["[region 99] 170 [term: 1] received a MsgHeartbeat message with higher term from 100 [term: 6]"]
[2019/05/01 12:35:41.700 -07:00] [INFO] [unknown:920] ["[region 96] 169 [term: 1] received a MsgHeartbeat message with higher term from 97 [term: 6]"]
[2019/05/01 12:35:41.701 -07:00] [INFO] [unknown:719] ["[region 96] 169 became follower at term 6"]
[2019/05/01 12:35:41.701 -07:00] [INFO] [unknown:719] ["[region 99] 170 became follower at term 6"]
[2019/05/01 12:35:41.928 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_91_6_8_(default|lock|write).sst] [snap_key=91_6_8]
[2019/05/01 12:35:41.938 -07:00] [INFO] [unknown:1792] ["[region 91] 164 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 8, term: 6]"]
[2019/05/01 12:35:41.938 -07:00] [INFO] [unknown:1816] ["[region 91] 164 restored progress of 92 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:35:41.938 -07:00] [INFO] [unknown:1816] ["[region 91] 164 restored progress of 93 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:35:41.938 -07:00] [INFO] [unknown:1816] ["[region 91] 164 restored progress of 164 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:35:41.938 -07:00] [INFO] [unknown:474] ["[region 91] 164 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 8, term: 6]"]
[2019/05/01 12:35:41.938 -07:00] [INFO] [unknown:1736] ["[region 91] 164 [commit: 8] restored snapshot [index: 8, term: 6]"]
[2019/05/01 12:35:41.938 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=164] [region_id=91]
[2019/05/01 12:35:41.938 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 8, truncated_state: Some(RaftTruncatedState { index: 8, term: 6, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 91, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 7, 95, 114, 128, 0, 0, 0, 0, 255, 0, 0, 1, 0, 0, 0, 0, 0, 250], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 7, 95, 114, 128, 0, 0, 0, 0, 255, 0, 234, 97, 0, 0, 0, 0, 0, 250], region_epoch: Some(RegionEpoch { conf_ver: 4, version: 5, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 92, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 93, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 164, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=164] [region_id=91]
[2019/05/01 12:35:41.956 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 91, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 7, 95, 114, 128, 0, 0, 0, 0, 255, 0, 0, 1, 0, 0, 0, 0, 0, 250], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 7, 95, 114, 128, 0, 0, 0, 0, 255, 0, 234, 97, 0, 0, 0, 0, 0, 250], region_epoch: Some(RegionEpoch { conf_ver: 4, version: 5, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 92, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 93, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 164, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=164] [region_id=91]
[2019/05/01 12:35:41.956 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 91] 164"]
[2019/05/01 12:35:41.956 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=91]
[2019/05/01 12:35:41.992 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=35.235199ms] [region_id=91]
[2019/05/01 12:35:42.888 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_24_6_9_(default|lock|write).sst] [snap_key=24_6_9]
[2019/05/01 12:35:42.898 -07:00] [INFO] [unknown:1792] ["[region 24] 168 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 9, term: 6]"]
[2019/05/01 12:35:42.898 -07:00] [INFO] [unknown:1816] ["[region 24] 168 restored progress of 25 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:35:42.898 -07:00] [INFO] [unknown:1816] ["[region 24] 168 restored progress of 52 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:35:42.898 -07:00] [INFO] [unknown:1816] ["[region 24] 168 restored progress of 168 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:35:42.898 -07:00] [INFO] [unknown:474] ["[region 24] 168 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 9, term: 6]"]
[2019/05/01 12:35:42.899 -07:00] [INFO] [unknown:1736] ["[region 24] 168 [commit: 9] restored snapshot [index: 9, term: 6]"]
[2019/05/01 12:35:42.899 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=168] [region_id=24]
[2019/05/01 12:35:42.899 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 9, truncated_state: Some(RaftTruncatedState { index: 9, term: 6, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 24, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 24, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 0, 0, 0, 0, 0, 0, 0, 248], region_epoch: Some(RegionEpoch { conf_ver: 4, version: 6, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 25, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 52, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 168, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=168] [region_id=24]
[2019/05/01 12:35:42.912 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 166, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=10] [term=6] [peer_id=50] [region_id=20]
[2019/05/01 12:35:42.912 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 4, version: 4, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=50] [region_id=20]
[2019/05/01 12:35:42.912 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 20, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 9, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 16, 0, 0, 0, 0, 0, 0, 0, 248], region_epoch: Some(RegionEpoch { conf_ver: 4, version: 4, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 21, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 50, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 166, store_id: 3, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 166, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=50] [region_id=20]
[2019/05/01 12:35:42.922 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 24] 168"]
[2019/05/01 12:35:42.922 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 24, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 24, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 0, 0, 0, 0, 0, 0, 0, 248], region_epoch: Some(RegionEpoch { conf_ver: 4, version: 6, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 25, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 52, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 168, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=168] [region_id=24]
[2019/05/01 12:35:42.922 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=24]
[2019/05/01 12:35:42.922 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=29.147µs] [region_id=24]
[2019/05/01 12:35:42.960 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 164, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=9] [term=6] [peer_id=164] [region_id=91]
[2019/05/01 12:35:42.960 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 4, version: 5, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=164] [region_id=91]
[2019/05/01 12:35:42.960 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 91, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 7, 95, 114, 128, 0, 0, 0, 0, 255, 0, 0, 1, 0, 0, 0, 0, 0, 250], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 7, 95, 114, 128, 0, 0, 0, 0, 255, 0, 234, 97, 0, 0, 0, 0, 0, 250], region_epoch: Some(RegionEpoch { conf_ver: 4, version: 5, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 92, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 93, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 164, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 164, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=164] [region_id=91]
[2019/05/01 12:35:43.702 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=216] [region_id=111]
[2019/05/01 12:35:43.702 -07:00] [INFO] [unknown:719] ["[region 111] 216 became follower at term 0"]
[2019/05/01 12:35:43.702 -07:00] [INFO] [unknown:295] ["[region 111] 216 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:35:43.702 -07:00] [INFO] [unknown:719] ["[region 111] 216 became follower at term 1"]
[2019/05/01 12:35:43.702 -07:00] [INFO] [unknown:920] ["[region 111] 216 [term: 1] received a MsgHeartbeat message with higher term from 112 [term: 6]"]
[2019/05/01 12:35:43.702 -07:00] [INFO] [unknown:719] ["[region 111] 216 became follower at term 6"]
[2019/05/01 12:35:43.704 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_99_6_8_(default|lock|write).sst] [snap_key=99_6_8]
[2019/05/01 12:35:43.704 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_96_6_8_(default|lock|write).sst] [snap_key=96_6_8]
[2019/05/01 12:35:43.718 -07:00] [INFO] [unknown:1792] ["[region 96] 169 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 8, term: 6]"]
[2019/05/01 12:35:43.718 -07:00] [INFO] [unknown:1816] ["[region 96] 169 restored progress of 97 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:35:43.718 -07:00] [INFO] [unknown:1816] ["[region 96] 169 restored progress of 98 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:35:43.718 -07:00] [INFO] [unknown:1816] ["[region 96] 169 restored progress of 169 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:35:43.718 -07:00] [INFO] [unknown:474] ["[region 96] 169 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 8, term: 6]"]
[2019/05/01 12:35:43.718 -07:00] [INFO] [unknown:1736] ["[region 96] 169 [commit: 8] restored snapshot [index: 8, term: 6]"]
[2019/05/01 12:35:43.718 -07:00] [INFO] [unknown:1792] ["[region 99] 170 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 8, term: 6]"]
[2019/05/01 12:35:43.718 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=169] [region_id=96]
[2019/05/01 12:35:43.718 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 8, truncated_state: Some(RaftTruncatedState { index: 8, term: 6, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 96, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 97, 117, 116, 111, 255, 95, 105, 110, 99, 255, 114, 101, 109, 255, 101, 110, 116, 95, 111, 255, 102, 102, 255, 115, 101, 116, 0, 0, 0, 252, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 4, version: 17, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 97, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 98, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 169, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=169] [region_id=96]
[2019/05/01 12:35:43.718 -07:00] [INFO] [unknown:1816] ["[region 99] 170 restored progress of 100 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:35:43.718 -07:00] [INFO] [unknown:1816] ["[region 99] 170 restored progress of 101 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:35:43.718 -07:00] [INFO] [unknown:1816] ["[region 99] 170 restored progress of 170 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:35:43.718 -07:00] [INFO] [unknown:474] ["[region 99] 170 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 8, term: 6]"]
[2019/05/01 12:35:43.718 -07:00] [INFO] [unknown:1736] ["[region 99] 170 [commit: 8] restored snapshot [index: 8, term: 6]"]
[2019/05/01 12:35:43.718 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=170] [region_id=99]
[2019/05/01 12:35:43.718 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 8, truncated_state: Some(RaftTruncatedState { index: 8, term: 6, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 99, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 97, 117, 116, 111, 255, 95, 105, 110, 99, 255, 114, 101, 109, 255, 101, 110, 116, 95, 111, 255, 102, 102, 255, 115, 101, 116, 0, 0, 0, 252, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 97, 117, 116, 111, 255, 99, 111, 109, 109, 255, 105, 116, 0, 255, 0, 0, 0, 0, 0, 249, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 4, version: 17, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 100, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 101, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 170, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=170] [region_id=99]
[2019/05/01 12:35:43.775 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 96] 169"]
[2019/05/01 12:35:43.775 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 96, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 97, 117, 116, 111, 255, 95, 105, 110, 99, 255, 114, 101, 109, 255, 101, 110, 116, 95, 111, 255, 102, 102, 255, 115, 101, 116, 0, 0, 0, 252, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 4, version: 17, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 97, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 98, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 169, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=169] [region_id=96]
[2019/05/01 12:35:43.775 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=96]
[2019/05/01 12:35:43.787 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 99, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 97, 117, 116, 111, 255, 95, 105, 110, 99, 255, 114, 101, 109, 255, 101, 110, 116, 95, 111, 255, 102, 102, 255, 115, 101, 116, 0, 0, 0, 252, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 97, 117, 116, 111, 255, 99, 111, 109, 109, 255, 105, 116, 0, 255, 0, 0, 0, 0, 0, 249, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 4, version: 17, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 100, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 101, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 170, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=170] [region_id=99]
[2019/05/01 12:35:43.787 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 99] 170"]
[2019/05/01 12:35:43.820 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=44.647927ms] [region_id=96]
[2019/05/01 12:35:43.820 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=99]
[2019/05/01 12:35:43.864 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=43.545387ms] [region_id=99]
[2019/05/01 12:35:43.989 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 167, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=10] [term=6] [peer_id=51] [region_id=22]
[2019/05/01 12:35:43.989 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 4, version: 5, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=51] [region_id=22]
[2019/05/01 12:35:43.989 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 22, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 16, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 24, 0, 0, 0, 0, 0, 0, 0, 248], region_epoch: Some(RegionEpoch { conf_ver: 4, version: 5, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 23, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 51, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 167, store_id: 3, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 167, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=51] [region_id=22]
[2019/05/01 12:35:43.989 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 168, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=10] [term=6] [peer_id=168] [region_id=24]
[2019/05/01 12:35:43.989 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 4, version: 6, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=168] [region_id=24]
[2019/05/01 12:35:43.989 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 24, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 24, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 0, 0, 0, 0, 0, 0, 0, 248], region_epoch: Some(RegionEpoch { conf_ver: 4, version: 6, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 25, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 52, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 168, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 168, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=168] [region_id=24]
[2019/05/01 12:35:44.141 -07:00] [INFO] [unknown:1625] ["[region 126] 162 [term 6] received MsgTimeoutNow from 127 and starts an election to get leadership."]
[2019/05/01 12:35:44.141 -07:00] [INFO] [unknown:739] ["[region 126] 162 became candidate at term 7"]
[2019/05/01 12:35:44.141 -07:00] [INFO] [unknown:854] ["[region 126] 162 received MsgRequestVoteResponse from 162 at term 7"]
[2019/05/01 12:35:44.141 -07:00] [INFO] [unknown:828] ["[region 126] 162 [logterm: 6, index: 9] sent MsgRequestVote request to 128 at term 7"]
[2019/05/01 12:35:44.141 -07:00] [INFO] [unknown:828] ["[region 126] 162 [logterm: 6, index: 9] sent MsgRequestVote request to 127 at term 7"]
[2019/05/01 12:35:44.149 -07:00] [INFO] [transport.rs:277] ["resolve store address ok"] [addr=n2:20160] [store_id=2]
[2019/05/01 12:35:44.149 -07:00] [INFO] [raft_client.rs:59] ["server: new connection with tikv endpoint"] [addr=n2:20160]
[2019/05/01 12:35:44.150 -07:00] [INFO] [unknown:841] ["New connected subchannel at 0x7f041f0410f0 for subchannel 0x7f04cf841000"]
[2019/05/01 12:35:44.183 -07:00] [INFO] [unknown:854] ["[region 126] 162 received MsgRequestVoteResponse from 127 at term 7"]
[2019/05/01 12:35:44.183 -07:00] [INFO] [unknown:1550] ["[region 126] 162 [quorum:2] has received 2 MsgRequestVoteResponse votes and 0 vote rejections"]
[2019/05/01 12:35:44.183 -07:00] [INFO] [unknown:789] ["[region 126] 162 became leader at term 7"]
[2019/05/01 12:35:44.183 -07:00] [INFO] [client.rs:329] ["heartbeat sender is refreshed"]
[2019/05/01 12:35:44.183 -07:00] [ERROR] [client.rs:348] ["failed to send heartbeat"] [err="Grpc(RpcFinished(Some(RpcStatus { status: Ok, details: None })))"]
[2019/05/01 12:35:44.183 -07:00] [ERROR] [util.rs:298] ["request failed, retry"] [err="Grpc(RpcFinished(Some(RpcStatus { status: Ok, details: None })))"]
[2019/05/01 12:35:44.183 -07:00] [ERROR] [util.rs:298] ["request failed, retry"] [err="Other(SendError(\"...\"))"]
[2019/05/01 12:35:44.183 -07:00] [ERROR] [util.rs:298] ["request failed, retry"] [err="Other(SendError(\"...\"))"]
[2019/05/01 12:35:44.183 -07:00] [INFO] [util.rs:244] ["updating PD client, block the tokio core"]
[2019/05/01 12:35:44.183 -07:00] [INFO] [util.rs:408] ["connecting to PD endpoint"] [endpoints=http://n3:2379]
[2019/05/01 12:35:44.183 -07:00] [INFO] [unknown:841] ["New connected subchannel at 0x7f04cfc0f240 for subchannel 0x7f04cf841200"]
[2019/05/01 12:35:44.184 -07:00] [INFO] [kv.rs:652] ["batch_raft RPC is called, new gRPC stream established"]
[2019/05/01 12:35:44.184 -07:00] [INFO] [util.rs:408] ["connecting to PD endpoint"] [endpoints=http://n1:2379]
[2019/05/01 12:35:44.185 -07:00] [INFO] [util.rs:467] ["connected to PD leader"] [endpoints=http://n1:2379]
[2019/05/01 12:35:44.185 -07:00] [WARN] [util.rs:187] ["heartbeat sender and receiver are stale, refreshing ..."]
[2019/05/01 12:35:44.185 -07:00] [WARN] [util.rs:206] ["updating PD client done"] [spend=2.519557ms]
[2019/05/01 12:35:44.185 -07:00] [INFO] [client.rs:329] ["heartbeat sender is refreshed"]
[2019/05/01 12:35:44.186 -07:00] [INFO] [util.rs:84] ["heartbeat receiver is refreshed"]
[2019/05/01 12:35:44.297 -07:00] [INFO] [kv.rs:652] ["batch_raft RPC is called, new gRPC stream established"]
[2019/05/01 12:35:44.297 -07:00] [INFO] [unknown:920] ["[region 24] 168 [term: 6] received a MsgRequestVote message with higher term from 52 [term: 7]"]
[2019/05/01 12:35:44.297 -07:00] [INFO] [unknown:719] ["[region 24] 168 became follower at term 7"]
[2019/05/01 12:35:44.297 -07:00] [INFO] [unknown:1083] ["[region 24] 168 [logterm: 6, index: 10, vote: 0] cast MsgRequestVote for 52 [logterm: 6, index: 10] at term 7"]
[2019/05/01 12:35:44.305 -07:00] [INFO] [transport.rs:277] ["resolve store address ok"] [addr=n4:20160] [store_id=7]
[2019/05/01 12:35:44.305 -07:00] [INFO] [raft_client.rs:59] ["server: new connection with tikv endpoint"] [addr=n4:20160]
[2019/05/01 12:35:44.306 -07:00] [INFO] [unknown:841] ["New connected subchannel at 0x7f041ea01210 for subchannel 0x7f04cf841400"]
[2019/05/01 12:35:44.406 -07:00] [INFO] [unknown:1625] ["[region 22] 51 [term 6] received MsgTimeoutNow from 23 and starts an election to get leadership."]
[2019/05/01 12:35:44.406 -07:00] [INFO] [unknown:739] ["[region 22] 51 became candidate at term 7"]
[2019/05/01 12:35:44.406 -07:00] [INFO] [unknown:854] ["[region 22] 51 received MsgRequestVoteResponse from 51 at term 7"]
[2019/05/01 12:35:44.406 -07:00] [INFO] [unknown:828] ["[region 22] 51 [logterm: 6, index: 10] sent MsgRequestVote request to 23 at term 7"]
[2019/05/01 12:35:44.406 -07:00] [INFO] [unknown:828] ["[region 22] 51 [logterm: 6, index: 10] sent MsgRequestVote request to 167 at term 7"]
[2019/05/01 12:35:44.422 -07:00] [INFO] [transport.rs:277] ["resolve store address ok"] [addr=n5:20160] [store_id=3]
[2019/05/01 12:35:44.422 -07:00] [INFO] [raft_client.rs:59] ["server: new connection with tikv endpoint"] [addr=n5:20160]
[2019/05/01 12:35:44.423 -07:00] [INFO] [unknown:841] ["New connected subchannel at 0x7f041e6010f0 for subchannel 0x7f04cf841600"]
[2019/05/01 12:35:44.432 -07:00] [INFO] [unknown:854] ["[region 22] 51 received MsgRequestVoteResponse from 23 at term 7"]
[2019/05/01 12:35:44.432 -07:00] [INFO] [unknown:1550] ["[region 22] 51 [quorum:2] has received 2 MsgRequestVoteResponse votes and 0 vote rejections"]
[2019/05/01 12:35:44.432 -07:00] [INFO] [unknown:789] ["[region 22] 51 became leader at term 7"]
[2019/05/01 12:35:44.433 -07:00] [INFO] [kv.rs:652] ["batch_raft RPC is called, new gRPC stream established"]
[2019/05/01 12:35:44.718 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 169, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=9] [term=6] [peer_id=169] [region_id=96]
[2019/05/01 12:35:44.718 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 4, version: 17, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=169] [region_id=96]
[2019/05/01 12:35:44.718 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 96, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 97, 117, 116, 111, 255, 95, 105, 110, 99, 255, 114, 101, 109, 255, 101, 110, 116, 95, 111, 255, 102, 102, 255, 115, 101, 116, 0, 0, 0, 252, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 4, version: 17, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 97, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 98, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 169, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 169, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=169] [region_id=96]
[2019/05/01 12:35:44.726 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 170, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=9] [term=6] [peer_id=170] [region_id=99]
[2019/05/01 12:35:44.726 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 4, version: 17, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=170] [region_id=99]
[2019/05/01 12:35:44.726 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 99, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 97, 117, 116, 111, 255, 95, 105, 110, 99, 255, 114, 101, 109, 255, 101, 110, 116, 95, 111, 255, 102, 102, 255, 115, 101, 116, 0, 0, 0, 252, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 97, 117, 116, 111, 255, 99, 111, 109, 109, 255, 105, 116, 0, 255, 0, 0, 0, 0, 0, 249, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 4, version: 17, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 100, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 101, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 170, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 170, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=170] [region_id=99]
[2019/05/01 12:35:44.932 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=259] [region_id=120]
[2019/05/01 12:35:44.932 -07:00] [INFO] [unknown:719] ["[region 120] 259 became follower at term 0"]
[2019/05/01 12:35:44.932 -07:00] [INFO] [unknown:295] ["[region 120] 259 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:35:44.932 -07:00] [INFO] [unknown:719] ["[region 120] 259 became follower at term 1"]
[2019/05/01 12:35:44.932 -07:00] [INFO] [unknown:920] ["[region 120] 259 [term: 1] received a MsgHeartbeat message with higher term from 122 [term: 7]"]
[2019/05/01 12:35:44.932 -07:00] [INFO] [unknown:719] ["[region 120] 259 became follower at term 7"]
[2019/05/01 12:35:45.704 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=257] [region_id=114]
[2019/05/01 12:35:45.704 -07:00] [INFO] [unknown:719] ["[region 114] 257 became follower at term 0"]
[2019/05/01 12:35:45.704 -07:00] [INFO] [unknown:295] ["[region 114] 257 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:35:45.704 -07:00] [INFO] [unknown:719] ["[region 114] 257 became follower at term 1"]
[2019/05/01 12:35:45.704 -07:00] [INFO] [unknown:920] ["[region 114] 257 [term: 1] received a MsgHeartbeat message with higher term from 115 [term: 6]"]
[2019/05/01 12:35:45.704 -07:00] [INFO] [unknown:719] ["[region 114] 257 became follower at term 6"]
[2019/05/01 12:35:45.706 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_111_6_8_(default|lock|write).sst] [snap_key=111_6_8]
[2019/05/01 12:35:45.713 -07:00] [INFO] [unknown:1792] ["[region 111] 216 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 8, term: 6]"]
[2019/05/01 12:35:45.713 -07:00] [INFO] [unknown:1816] ["[region 111] 216 restored progress of 112 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:35:45.713 -07:00] [INFO] [unknown:1816] ["[region 111] 216 restored progress of 113 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:35:45.713 -07:00] [INFO] [unknown:1816] ["[region 111] 216 restored progress of 216 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:35:45.713 -07:00] [INFO] [unknown:474] ["[region 111] 216 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 8, term: 6]"]
[2019/05/01 12:35:45.713 -07:00] [INFO] [unknown:1736] ["[region 111] 216 [commit: 8] restored snapshot [index: 8, term: 6]"]
[2019/05/01 12:35:45.713 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=216] [region_id=111]
[2019/05/01 12:35:45.713 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 8, truncated_state: Some(RaftTruncatedState { index: 8, term: 6, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 111, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 97, 99, 107, 255, 95, 108, 111, 103, 255, 0, 0, 0, 255, 0, 0, 0, 0, 0, 247, 0, 0, 253], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 97, 115, 101, 255, 100, 105, 114, 0, 254, 0, 0, 0, 252], region_epoch: Some(RegionEpoch { conf_ver: 4, version: 17, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 112, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 113, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 216, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=216] [region_id=111]
[2019/05/01 12:35:45.729 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 111] 216"]
[2019/05/01 12:35:45.729 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 111, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 97, 99, 107, 255, 95, 108, 111, 103, 255, 0, 0, 0, 255, 0, 0, 0, 0, 0, 247, 0, 0, 253], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 97, 115, 101, 255, 100, 105, 114, 0, 254, 0, 0, 0, 252], region_epoch: Some(RegionEpoch { conf_ver: 4, version: 17, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 112, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 113, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 216, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=216] [region_id=111]
[2019/05/01 12:35:45.729 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=111]
[2019/05/01 12:35:45.746 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=16.463823ms] [region_id=111]
[2019/05/01 12:35:46.364 -07:00] [INFO] [unknown:1625] ["[region 16] 159 [term 6] received MsgTimeoutNow from 17 and starts an election to get leadership."]
[2019/05/01 12:35:46.364 -07:00] [INFO] [unknown:739] ["[region 16] 159 became candidate at term 7"]
[2019/05/01 12:35:46.364 -07:00] [INFO] [unknown:854] ["[region 16] 159 received MsgRequestVoteResponse from 159 at term 7"]
[2019/05/01 12:35:46.364 -07:00] [INFO] [unknown:828] ["[region 16] 159 [logterm: 6, index: 516] sent MsgRequestVote request to 17 at term 7"]
[2019/05/01 12:35:46.364 -07:00] [INFO] [unknown:828] ["[region 16] 159 [logterm: 6, index: 516] sent MsgRequestVote request to 48 at term 7"]
[2019/05/01 12:35:46.404 -07:00] [INFO] [unknown:854] ["[region 16] 159 received MsgRequestVoteResponse from 48 at term 7"]
[2019/05/01 12:35:46.404 -07:00] [INFO] [unknown:1550] ["[region 16] 159 [quorum:2] has received 2 MsgRequestVoteResponse votes and 0 vote rejections"]
[2019/05/01 12:35:46.404 -07:00] [INFO] [unknown:789] ["[region 16] 159 became leader at term 7"]
[2019/05/01 12:35:46.788 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 216, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=9] [term=6] [peer_id=216] [region_id=111]
[2019/05/01 12:35:46.788 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 4, version: 17, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=216] [region_id=111]
[2019/05/01 12:35:46.788 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 111, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 97, 99, 107, 255, 95, 108, 111, 103, 255, 0, 0, 0, 255, 0, 0, 0, 0, 0, 247, 0, 0, 253], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 97, 115, 101, 255, 100, 105, 114, 0, 254, 0, 0, 0, 252], region_epoch: Some(RegionEpoch { conf_ver: 4, version: 17, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 112, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 113, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 216, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 216, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=216] [region_id=111]
[2019/05/01 12:35:46.889 -07:00] [INFO] [keys.rs:155] ["approximate keys over threshold, need to do split check"] [threshold=5] [keys=713] [region_id=16]
[2019/05/01 12:35:46.890 -07:00] [INFO] [peer.rs:294] ["on split"] [split_keys="10 keys range from \"mDB:4\\000\\000\\000\\377\\000\\373\\000\\000\\000\\000\\000\\000\\377\\000H\\000\\000\\000\\000\\000\\000\\371\\372V,k\\350\\327\\377\\357\" to \"mDB:4\\000\\000\\000\\377\\000\\373\\000\\000\\000\\000\\000\\000\\377\\000H\\000\\000\\000\\000\\000\\000\\371\\372V,lH'\\377\\375\""] [peer_id=159] [region_id=16]
[2019/05/01 12:35:46.890 -07:00] [INFO] [pd.rs:285] ["try to batch split region"] [region="Region { id: 16, start_key: [109, 68, 66, 58, 52, 0, 0, 0, 255, 0, 251, 0, 0, 0, 0, 0, 0, 255, 0, 72, 0, 0, 0, 0, 0, 0, 249], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 7, 0, 0, 0, 0, 0, 0, 0, 248], region_epoch: Some(RegionEpoch { conf_ver: 5, version: 5, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 17, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 48, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 159, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [new_region_ids="[SplitID { new_region_id: 274, new_peer_ids: [275, 276, 277], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, SplitID { new_region_id: 278, new_peer_ids: [279, 280, 281], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, SplitID { new_region_id: 282, new_peer_ids: [283, 284, 285], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, SplitID { new_region_id: 286, new_peer_ids: [287, 288, 289], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, SplitID { new_region_id: 290, new_peer_ids: [291, 292, 293], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, SplitID { new_region_id: 294, new_peer_ids: [295, 296, 297], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, SplitID { new_region_id: 298, new_peer_ids: [299, 300, 301], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, SplitID { new_region_id: 302, new_peer_ids: [303, 304, 305], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, SplitID { new_region_id: 306, new_peer_ids: [307, 308, 309], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, SplitID { new_region_id: 310, new_peer_ids: [311, 312, 313], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }]"] [region_id=16]
[2019/05/01 12:35:46.890 -07:00] [WARN] [split_observer.rs:98] ["invalid key, skip"] [err="\"key \\\"mDB:4\\\\000\\\\000\\\\000\\\\377\\\\000\\\\373\\\\000\\\\000\\\\000\\\\000\\\\000\\\\000\\\\377\\\\000H\\\\000\\\\000\\\\000\\\\000\\\\000\\\\000\\\\371\\\" should be in (\\\"mDB:4\\\\000\\\\000\\\\000\\\\377\\\\000\\\\373\\\\000\\\\000\\\\000\\\\000\\\\000\\\\000\\\\377\\\\000H\\\\000\\\\000\\\\000\\\\000\\\\000\\\\000\\\\371\\\", \\\"t\\\\200\\\\000\\\\000\\\\000\\\\000\\\\000\\\\000\\\\377\\\\007\\\\000\\\\000\\\\000\\\\000\\\\000\\\\000\\\\000\\\\370\\\")\""] [index=0] [region_id=16]
[2019/05/01 12:35:46.890 -07:00] [WARN] [split_observer.rs:98] ["invalid key, skip"] [err="\"key \\\"mDB:4\\\\000\\\\000\\\\000\\\\377\\\\000\\\\373\\\\000\\\\000\\\\000\\\\000\\\\000\\\\000\\\\377\\\\000H\\\\000\\\\000\\\\000\\\\000\\\\000\\\\000\\\\371\\\" should be in (\\\"mDB:4\\\\000\\\\000\\\\000\\\\377\\\\000\\\\373\\\\000\\\\000\\\\000\\\\000\\\\000\\\\000\\\\377\\\\000H\\\\000\\\\000\\\\000\\\\000\\\\000\\\\000\\\\371\\\", \\\"t\\\\200\\\\000\\\\000\\\\000\\\\000\\\\000\\\\000\\\\377\\\\007\\\\000\\\\000\\\\000\\\\000\\\\000\\\\000\\\\000\\\\370\\\")\""] [index=1] [region_id=16]
[2019/05/01 12:35:46.890 -07:00] [WARN] [split_observer.rs:98] ["invalid key, skip"] [err="\"key \\\"mDB:4\\\\000\\\\000\\\\000\\\\377\\\\000\\\\373\\\\000\\\\000\\\\000\\\\000\\\\000\\\\000\\\\377\\\\000H\\\\000\\\\000\\\\000\\\\000\\\\000\\\\000\\\\371\\\" should be in (\\\"mDB:4\\\\000\\\\000\\\\000\\\\377\\\\000\\\\373\\\\000\\\\000\\\\000\\\\000\\\\000\\\\000\\\\377\\\\000H\\\\000\\\\000\\\\000\\\\000\\\\000\\\\000\\\\371\\\", \\\"t\\\\200\\\\000\\\\000\\\\000\\\\000\\\\000\\\\000\\\\377\\\\007\\\\000\\\\000\\\\000\\\\000\\\\000\\\\000\\\\000\\\\370\\\")\""] [index=2] [region_id=16]
[2019/05/01 12:35:46.890 -07:00] [WARN] [split_observer.rs:98] ["invalid key, skip"] [err="\"key \\\"mDB:4\\\\000\\\\000\\\\000\\\\377\\\\000\\\\373\\\\000\\\\000\\\\000\\\\000\\\\000\\\\000\\\\377\\\\000H\\\\000\\\\000\\\\000\\\\000\\\\000\\\\000\\\\371\\\" should be in (\\\"mDB:4\\\\000\\\\000\\\\000\\\\377\\\\000\\\\373\\\\000\\\\000\\\\000\\\\000\\\\000\\\\000\\\\377\\\\000H\\\\000\\\\000\\\\000\\\\000\\\\000\\\\000\\\\371\\\", \\\"t\\\\200\\\\000\\\\000\\\\000\\\\000\\\\000\\\\000\\\\377\\\\007\\\\000\\\\000\\\\000\\\\000\\\\000\\\\000\\\\000\\\\370\\\")\""] [index=3] [region_id=16]
[2019/05/01 12:35:46.890 -07:00] [WARN] [split_observer.rs:98] ["invalid key, skip"] [err="\"key \\\"mDB:4\\\\000\\\\000\\\\000\\\\377\\\\000\\\\373\\\\000\\\\000\\\\000\\\\000\\\\000\\\\000\\\\377\\\\000H\\\\000\\\\000\\\\000\\\\000\\\\000\\\\000\\\\371\\\" should be in (\\\"mDB:4\\\\000\\\\000\\\\000\\\\377\\\\000\\\\373\\\\000\\\\000\\\\000\\\\000\\\\000\\\\000\\\\377\\\\000H\\\\000\\\\000\\\\000\\\\000\\\\000\\\\000\\\\371\\\", \\\"t\\\\200\\\\000\\\\000\\\\000\\\\000\\\\000\\\\000\\\\377\\\\007\\\\000\\\\000\\\\000\\\\000\\\\000\\\\000\\\\000\\\\370\\\")\""] [index=4] [region_id=16]
[2019/05/01 12:35:46.890 -07:00] [WARN] [split_observer.rs:98] ["invalid key, skip"] [err="\"key \\\"mDB:4\\\\000\\\\000\\\\000\\\\377\\\\000\\\\373\\\\000\\\\000\\\\000\\\\000\\\\000\\\\000\\\\377\\\\000H\\\\000\\\\000\\\\000\\\\000\\\\000\\\\000\\\\371\\\" should be in (\\\"mDB:4\\\\000\\\\000\\\\000\\\\377\\\\000\\\\373\\\\000\\\\000\\\\000\\\\000\\\\000\\\\000\\\\377\\\\000H\\\\000\\\\000\\\\000\\\\000\\\\000\\\\000\\\\371\\\", \\\"t\\\\200\\\\000\\\\000\\\\000\\\\000\\\\000\\\\000\\\\377\\\\007\\\\000\\\\000\\\\000\\\\000\\\\000\\\\000\\\\000\\\\370\\\")\""] [index=5] [region_id=16]
[2019/05/01 12:35:46.890 -07:00] [WARN] [split_observer.rs:98] ["invalid key, skip"] [err="\"key \\\"mDB:4\\\\000\\\\000\\\\000\\\\377\\\\000\\\\373\\\\000\\\\000\\\\000\\\\000\\\\000\\\\000\\\\377\\\\000H\\\\000\\\\000\\\\000\\\\000\\\\000\\\\000\\\\371\\\" should be in (\\\"mDB:4\\\\000\\\\000\\\\000\\\\377\\\\000\\\\373\\\\000\\\\000\\\\000\\\\000\\\\000\\\\000\\\\377\\\\000H\\\\000\\\\000\\\\000\\\\000\\\\000\\\\000\\\\371\\\", \\\"t\\\\200\\\\000\\\\000\\\\000\\\\000\\\\000\\\\000\\\\377\\\\007\\\\000\\\\000\\\\000\\\\000\\\\000\\\\000\\\\000\\\\370\\\")\""] [index=6] [region_id=16]
[2019/05/01 12:35:46.890 -07:00] [WARN] [split_observer.rs:98] ["invalid key, skip"] [err="\"key \\\"mDB:4\\\\000\\\\000\\\\000\\\\377\\\\000\\\\373\\\\000\\\\000\\\\000\\\\000\\\\000\\\\000\\\\377\\\\000H\\\\000\\\\000\\\\000\\\\000\\\\000\\\\000\\\\371\\\" should be in (\\\"mDB:4\\\\000\\\\000\\\\000\\\\377\\\\000\\\\373\\\\000\\\\000\\\\000\\\\000\\\\000\\\\000\\\\377\\\\000H\\\\000\\\\000\\\\000\\\\000\\\\000\\\\000\\\\371\\\", \\\"t\\\\200\\\\000\\\\000\\\\000\\\\000\\\\000\\\\000\\\\377\\\\007\\\\000\\\\000\\\\000\\\\000\\\\000\\\\000\\\\000\\\\370\\\")\""] [index=7] [region_id=16]
[2019/05/01 12:35:46.890 -07:00] [WARN] [split_observer.rs:98] ["invalid key, skip"] [err="\"key \\\"mDB:4\\\\000\\\\000\\\\000\\\\377\\\\000\\\\373\\\\000\\\\000\\\\000\\\\000\\\\000\\\\000\\\\377\\\\000H\\\\000\\\\000\\\\000\\\\000\\\\000\\\\000\\\\371\\\" should be in (\\\"mDB:4\\\\000\\\\000\\\\000\\\\377\\\\000\\\\373\\\\000\\\\000\\\\000\\\\000\\\\000\\\\000\\\\377\\\\000H\\\\000\\\\000\\\\000\\\\000\\\\000\\\\000\\\\371\\\", \\\"t\\\\200\\\\000\\\\000\\\\000\\\\000\\\\000\\\\000\\\\377\\\\007\\\\000\\\\000\\\\000\\\\000\\\\000\\\\000\\\\000\\\\370\\\")\""] [index=8] [region_id=16]
[2019/05/01 12:35:46.890 -07:00] [WARN] [split_observer.rs:98] ["invalid key, skip"] [err="\"key \\\"mDB:4\\\\000\\\\000\\\\000\\\\377\\\\000\\\\373\\\\000\\\\000\\\\000\\\\000\\\\000\\\\000\\\\377\\\\000H\\\\000\\\\000\\\\000\\\\000\\\\000\\\\000\\\\371\\\" should be in (\\\"mDB:4\\\\000\\\\000\\\\000\\\\377\\\\000\\\\373\\\\000\\\\000\\\\000\\\\000\\\\000\\\\000\\\\377\\\\000H\\\\000\\\\000\\\\000\\\\000\\\\000\\\\000\\\\371\\\", \\\"t\\\\200\\\\000\\\\000\\\\000\\\\000\\\\000\\\\000\\\\377\\\\007\\\\000\\\\000\\\\000\\\\000\\\\000\\\\000\\\\000\\\\370\\\")\""] [index=9] [region_id=16]
[2019/05/01 12:35:46.890 -07:00] [ERROR] [split_observer.rs:161] ["failed to handle split req"] [err="\"no valid key found for split.\""] [region_id=16]
[2019/05/01 12:35:46.890 -07:00] [WARN] [peer.rs:1846] ["skip proposal"] [err="Coprocessor(Other(StringError(\"[src/raftstore/coprocessor/split_observer.rs:166]: no valid key found for split.\")))"] [peer_id=159] [region_id=16]
[2019/05/01 12:35:46.922 -07:00] [INFO] [unknown:1625] ["[region 91] 164 [term 6] received MsgTimeoutNow from 92 and starts an election to get leadership."]
[2019/05/01 12:35:46.922 -07:00] [INFO] [unknown:739] ["[region 91] 164 became candidate at term 7"]
[2019/05/01 12:35:46.922 -07:00] [INFO] [unknown:854] ["[region 91] 164 received MsgRequestVoteResponse from 164 at term 7"]
[2019/05/01 12:35:46.922 -07:00] [INFO] [unknown:828] ["[region 91] 164 [logterm: 6, index: 9] sent MsgRequestVote request to 93 at term 7"]
[2019/05/01 12:35:46.922 -07:00] [INFO] [unknown:828] ["[region 91] 164 [logterm: 6, index: 9] sent MsgRequestVote request to 92 at term 7"]
[2019/05/01 12:35:46.936 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_120_7_9_(default|lock|write).sst] [snap_key=120_7_9]
[2019/05/01 12:35:46.942 -07:00] [INFO] [unknown:920] ["[region 88] 160 [term: 6] received a MsgRequestVote message with higher term from 90 [term: 7]"]
[2019/05/01 12:35:46.942 -07:00] [INFO] [unknown:719] ["[region 88] 160 became follower at term 7"]
[2019/05/01 12:35:46.942 -07:00] [INFO] [unknown:1083] ["[region 88] 160 [logterm: 6, index: 9, vote: 0] cast MsgRequestVote for 90 [logterm: 6, index: 9] at term 7"]
[2019/05/01 12:35:46.955 -07:00] [INFO] [unknown:1792] ["[region 120] 259 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 9, term: 7]"]
[2019/05/01 12:35:46.955 -07:00] [INFO] [unknown:1816] ["[region 120] 259 restored progress of 121 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:35:46.955 -07:00] [INFO] [unknown:1816] ["[region 120] 259 restored progress of 122 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:35:46.955 -07:00] [INFO] [unknown:1816] ["[region 120] 259 restored progress of 259 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:35:46.955 -07:00] [INFO] [unknown:474] ["[region 120] 259 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 9, term: 7]"]
[2019/05/01 12:35:46.955 -07:00] [INFO] [unknown:1736] ["[region 120] 259 [commit: 9] restored snapshot [index: 9, term: 7]"]
[2019/05/01 12:35:46.955 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=259] [region_id=120]
[2019/05/01 12:35:46.955 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 9, truncated_state: Some(RaftTruncatedState { index: 9, term: 7, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 120, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 100, 255, 95, 97, 100, 100, 255, 114, 101, 115, 255, 115, 0, 0, 0, 0, 251, 0, 0, 253], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 95, 99, 255, 97, 99, 104, 255, 101, 95, 115, 105, 122, 255, 101, 0, 255, 0, 0, 0, 0, 0, 0, 248, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 4, version: 17, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 121, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 122, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 259, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=259] [region_id=120]
[2019/05/01 12:35:46.968 -07:00] [INFO] [unknown:854] ["[region 91] 164 received MsgRequestVoteResponse from 93 at term 7"]
[2019/05/01 12:35:46.968 -07:00] [INFO] [unknown:1550] ["[region 91] 164 [quorum:2] has received 2 MsgRequestVoteResponse votes and 0 vote rejections"]
[2019/05/01 12:35:46.968 -07:00] [INFO] [unknown:789] ["[region 91] 164 became leader at term 7"]
[2019/05/01 12:35:47.012 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 120] 259"]
[2019/05/01 12:35:47.022 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 120, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 100, 255, 95, 97, 100, 100, 255, 114, 101, 115, 255, 115, 0, 0, 0, 0, 251, 0, 0, 253], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 95, 99, 255, 97, 99, 104, 255, 101, 95, 115, 105, 122, 255, 101, 0, 255, 0, 0, 0, 0, 0, 0, 248, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 4, version: 17, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 121, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 122, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 259, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=259] [region_id=120]
[2019/05/01 12:35:47.022 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=120]
[2019/05/01 12:35:47.125 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=113.236008ms] [region_id=120]
[2019/05/01 12:35:47.133 -07:00] [INFO] [unknown:1625] ["[region 20] 50 [term 6] received MsgTimeoutNow from 21 and starts an election to get leadership."]
[2019/05/01 12:35:47.133 -07:00] [INFO] [unknown:739] ["[region 20] 50 became candidate at term 7"]
[2019/05/01 12:35:47.133 -07:00] [INFO] [unknown:854] ["[region 20] 50 received MsgRequestVoteResponse from 50 at term 7"]
[2019/05/01 12:35:47.134 -07:00] [INFO] [unknown:828] ["[region 20] 50 [logterm: 6, index: 10] sent MsgRequestVote request to 21 at term 7"]
[2019/05/01 12:35:47.134 -07:00] [INFO] [unknown:828] ["[region 20] 50 [logterm: 6, index: 10] sent MsgRequestVote request to 166 at term 7"]
[2019/05/01 12:35:47.213 -07:00] [INFO] [unknown:854] ["[region 20] 50 received MsgRequestVoteResponse from 166 at term 7"]
[2019/05/01 12:35:47.213 -07:00] [INFO] [unknown:1550] ["[region 20] 50 [quorum:2] has received 2 MsgRequestVoteResponse votes and 0 vote rejections"]
[2019/05/01 12:35:47.213 -07:00] [INFO] [unknown:789] ["[region 20] 50 became leader at term 7"]
[2019/05/01 12:35:47.708 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_114_6_8_(default|lock|write).sst] [snap_key=114_6_8]
[2019/05/01 12:35:47.718 -07:00] [INFO] [unknown:1792] ["[region 114] 257 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 8, term: 6]"]
[2019/05/01 12:35:47.718 -07:00] [INFO] [unknown:1816] ["[region 114] 257 restored progress of 115 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:35:47.718 -07:00] [INFO] [unknown:1816] ["[region 114] 257 restored progress of 116 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:35:47.718 -07:00] [INFO] [unknown:1816] ["[region 114] 257 restored progress of 257 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:35:47.719 -07:00] [INFO] [unknown:474] ["[region 114] 257 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 8, term: 6]"]
[2019/05/01 12:35:47.719 -07:00] [INFO] [unknown:1736] ["[region 114] 257 [commit: 8] restored snapshot [index: 8, term: 6]"]
[2019/05/01 12:35:47.719 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=257] [region_id=114]
[2019/05/01 12:35:47.719 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 8, truncated_state: Some(RaftTruncatedState { index: 8, term: 6, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 114, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 97, 115, 101, 255, 100, 105, 114, 0, 254, 0, 0, 0, 252], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 103, 95, 255, 116, 97, 98, 108, 255, 101, 115, 0, 255, 0, 0, 0, 0, 0, 249, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 4, version: 17, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 115, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 116, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 257, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=257] [region_id=114]
[2019/05/01 12:35:47.734 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 114] 257"]
[2019/05/01 12:35:47.734 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 114, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 97, 115, 101, 255, 100, 105, 114, 0, 254, 0, 0, 0, 252], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 103, 95, 255, 116, 97, 98, 108, 255, 101, 115, 0, 255, 0, 0, 0, 0, 0, 249, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 4, version: 17, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 115, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 116, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 257, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=257] [region_id=114]
[2019/05/01 12:35:47.734 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=114]
[2019/05/01 12:35:47.750 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=15.849611ms] [region_id=114]
[2019/05/01 12:35:47.925 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=273] [region_id=129]
[2019/05/01 12:35:47.925 -07:00] [INFO] [unknown:719] ["[region 129] 273 became follower at term 0"]
[2019/05/01 12:35:47.925 -07:00] [INFO] [unknown:295] ["[region 129] 273 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:35:47.925 -07:00] [INFO] [unknown:719] ["[region 129] 273 became follower at term 1"]
[2019/05/01 12:35:47.925 -07:00] [INFO] [unknown:920] ["[region 129] 273 [term: 1] received a MsgHeartbeat message with higher term from 131 [term: 7]"]
[2019/05/01 12:35:47.925 -07:00] [INFO] [unknown:719] ["[region 129] 273 became follower at term 7"]
[2019/05/01 12:35:47.998 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 259, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=10] [term=7] [peer_id=259] [region_id=120]
[2019/05/01 12:35:47.998 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 4, version: 17, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=259] [region_id=120]
[2019/05/01 12:35:47.998 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 120, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 100, 255, 95, 97, 100, 100, 255, 114, 101, 115, 255, 115, 0, 0, 0, 0, 251, 0, 0, 253], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 95, 99, 255, 97, 99, 104, 255, 101, 95, 115, 105, 122, 255, 101, 0, 255, 0, 0, 0, 0, 0, 0, 248, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 4, version: 17, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 121, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 122, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 259, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 259, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=259] [region_id=120]
[2019/05/01 12:35:48.696 -07:00] [INFO] [unknown:1625] ["[region 99] 170 [term 6] received MsgTimeoutNow from 100 and starts an election to get leadership."]
[2019/05/01 12:35:48.696 -07:00] [INFO] [unknown:739] ["[region 99] 170 became candidate at term 7"]
[2019/05/01 12:35:48.696 -07:00] [INFO] [unknown:854] ["[region 99] 170 received MsgRequestVoteResponse from 170 at term 7"]
[2019/05/01 12:35:48.696 -07:00] [INFO] [unknown:828] ["[region 99] 170 [logterm: 6, index: 9] sent MsgRequestVote request to 101 at term 7"]
[2019/05/01 12:35:48.696 -07:00] [INFO] [unknown:828] ["[region 99] 170 [logterm: 6, index: 9] sent MsgRequestVote request to 100 at term 7"]
[2019/05/01 12:35:48.696 -07:00] [INFO] [unknown:1625] ["[region 96] 169 [term 6] received MsgTimeoutNow from 97 and starts an election to get leadership."]
[2019/05/01 12:35:48.696 -07:00] [INFO] [unknown:739] ["[region 96] 169 became candidate at term 7"]
[2019/05/01 12:35:48.696 -07:00] [INFO] [unknown:854] ["[region 96] 169 received MsgRequestVoteResponse from 169 at term 7"]
[2019/05/01 12:35:48.696 -07:00] [INFO] [unknown:828] ["[region 96] 169 [logterm: 6, index: 9] sent MsgRequestVote request to 98 at term 7"]
[2019/05/01 12:35:48.696 -07:00] [INFO] [unknown:828] ["[region 96] 169 [logterm: 6, index: 9] sent MsgRequestVote request to 97 at term 7"]
[2019/05/01 12:35:48.712 -07:00] [INFO] [unknown:854] ["[region 99] 170 received MsgRequestVoteResponse from 100 at term 7"]
[2019/05/01 12:35:48.712 -07:00] [INFO] [unknown:854] ["[region 96] 169 received MsgRequestVoteResponse from 97 at term 7"]
[2019/05/01 12:35:48.712 -07:00] [INFO] [unknown:1550] ["[region 96] 169 [quorum:2] has received 2 MsgRequestVoteResponse votes and 0 vote rejections"]
[2019/05/01 12:35:48.712 -07:00] [INFO] [unknown:1550] ["[region 99] 170 [quorum:2] has received 2 MsgRequestVoteResponse votes and 0 vote rejections"]
[2019/05/01 12:35:48.712 -07:00] [INFO] [unknown:789] ["[region 99] 170 became leader at term 7"]
[2019/05/01 12:35:48.712 -07:00] [INFO] [unknown:789] ["[region 96] 169 became leader at term 7"]
[2019/05/01 12:35:48.760 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 257, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=9] [term=6] [peer_id=257] [region_id=114]
[2019/05/01 12:35:48.760 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 4, version: 17, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=257] [region_id=114]
[2019/05/01 12:35:48.760 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 114, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 97, 115, 101, 255, 100, 105, 114, 0, 254, 0, 0, 0, 252], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 103, 95, 255, 116, 97, 98, 108, 255, 101, 115, 0, 255, 0, 0, 0, 0, 0, 249, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 4, version: 17, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 115, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 116, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 257, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 257, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=257] [region_id=114]
[2019/05/01 12:35:48.926 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=326] [region_id=144]
[2019/05/01 12:35:48.926 -07:00] [INFO] [unknown:719] ["[region 144] 326 became follower at term 0"]
[2019/05/01 12:35:48.926 -07:00] [INFO] [unknown:295] ["[region 144] 326 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:35:48.926 -07:00] [INFO] [unknown:719] ["[region 144] 326 became follower at term 1"]
[2019/05/01 12:35:48.926 -07:00] [INFO] [unknown:920] ["[region 144] 326 [term: 1] received a MsgHeartbeat message with higher term from 146 [term: 7]"]
[2019/05/01 12:35:48.926 -07:00] [INFO] [unknown:719] ["[region 144] 326 became follower at term 7"]
[2019/05/01 12:35:49.927 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=328] [region_id=150]
[2019/05/01 12:35:49.927 -07:00] [INFO] [unknown:719] ["[region 150] 328 became follower at term 0"]
[2019/05/01 12:35:49.927 -07:00] [INFO] [unknown:295] ["[region 150] 328 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:35:49.927 -07:00] [INFO] [unknown:719] ["[region 150] 328 became follower at term 1"]
[2019/05/01 12:35:49.927 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=325] [region_id=141]
[2019/05/01 12:35:49.927 -07:00] [INFO] [unknown:719] ["[region 141] 325 became follower at term 0"]
[2019/05/01 12:35:49.927 -07:00] [INFO] [unknown:295] ["[region 141] 325 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:35:49.927 -07:00] [INFO] [unknown:719] ["[region 141] 325 became follower at term 1"]
[2019/05/01 12:35:49.927 -07:00] [INFO] [unknown:920] ["[region 150] 328 [term: 1] received a MsgHeartbeat message with higher term from 152 [term: 7]"]
[2019/05/01 12:35:49.927 -07:00] [INFO] [unknown:719] ["[region 150] 328 became follower at term 7"]
[2019/05/01 12:35:49.927 -07:00] [INFO] [unknown:920] ["[region 141] 325 [term: 1] received a MsgHeartbeat message with higher term from 143 [term: 7]"]
[2019/05/01 12:35:49.927 -07:00] [INFO] [unknown:719] ["[region 141] 325 became follower at term 7"]
[2019/05/01 12:35:49.929 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_129_7_9_(default|lock|write).sst] [snap_key=129_7_9]
[2019/05/01 12:35:49.940 -07:00] [INFO] [unknown:1792] ["[region 129] 273 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 9, term: 7]"]
[2019/05/01 12:35:49.940 -07:00] [INFO] [unknown:1816] ["[region 129] 273 restored progress of 130 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:35:49.940 -07:00] [INFO] [unknown:1816] ["[region 129] 273 restored progress of 131 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:35:49.940 -07:00] [INFO] [unknown:1816] ["[region 129] 273 restored progress of 273 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:35:49.940 -07:00] [INFO] [unknown:474] ["[region 129] 273 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 9, term: 7]"]
[2019/05/01 12:35:49.940 -07:00] [INFO] [unknown:1736] ["[region 129] 273 [commit: 9] restored snapshot [index: 9, term: 7]"]
[2019/05/01 12:35:49.940 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=273] [region_id=129]
[2019/05/01 12:35:49.940 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 9, truncated_state: Some(RaftTruncatedState { index: 9, term: 7, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 129, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 116, 105, 100, 98, 255, 95, 115, 101, 114, 255, 118, 101, 114, 255, 95, 118, 101, 114, 115, 255, 105, 111, 255, 110, 0, 0, 0, 0, 0, 250, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 116, 105, 107, 118, 255, 95, 103, 99, 95, 255, 101, 110, 97, 255, 98, 108, 101, 0, 0, 253, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 4, version: 18, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 130, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 131, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 273, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=273] [region_id=129]
[2019/05/01 12:35:49.958 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 129, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 116, 105, 100, 98, 255, 95, 115, 101, 114, 255, 118, 101, 114, 255, 95, 118, 101, 114, 115, 255, 105, 111, 255, 110, 0, 0, 0, 0, 0, 250, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 116, 105, 107, 118, 255, 95, 103, 99, 95, 255, 101, 110, 97, 255, 98, 108, 101, 0, 0, 253, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 4, version: 18, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 130, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 131, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 273, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=273] [region_id=129]
[2019/05/01 12:35:49.958 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 129] 273"]
[2019/05/01 12:35:49.958 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=129]
[2019/05/01 12:35:49.990 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=32.216247ms] [region_id=129]
[2019/05/01 12:35:50.930 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_144_7_9_(default|lock|write).sst] [snap_key=144_7_9]
[2019/05/01 12:35:50.941 -07:00] [INFO] [unknown:1792] ["[region 144] 326 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 9, term: 7]"]
[2019/05/01 12:35:50.941 -07:00] [INFO] [unknown:1816] ["[region 144] 326 restored progress of 145 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:35:50.941 -07:00] [INFO] [unknown:1816] ["[region 144] 326 restored progress of 146 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:35:50.941 -07:00] [INFO] [unknown:1816] ["[region 144] 326 restored progress of 326 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:35:50.941 -07:00] [INFO] [unknown:474] ["[region 144] 326 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 9, term: 7]"]
[2019/05/01 12:35:50.941 -07:00] [INFO] [unknown:1736] ["[region 144] 326 [commit: 9] restored snapshot [index: 9, term: 7]"]
[2019/05/01 12:35:50.941 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=326] [region_id=144]
[2019/05/01 12:35:50.941 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 9, truncated_state: Some(RaftTruncatedState { index: 9, term: 7, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 144, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 114, 128, 0, 0, 0, 0, 255, 0, 0, 1, 0, 0, 0, 0, 0, 250], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 114, 128, 0, 0, 0, 0, 255, 0, 0, 3, 0, 0, 0, 0, 0, 250], region_epoch: Some(RegionEpoch { conf_ver: 4, version: 18, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 145, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 146, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 326, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=326] [region_id=144]
[2019/05/01 12:35:50.946 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 273, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=10] [term=7] [peer_id=273] [region_id=129]
[2019/05/01 12:35:50.946 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 4, version: 18, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=273] [region_id=129]
[2019/05/01 12:35:50.946 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 129, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 116, 105, 100, 98, 255, 95, 115, 101, 114, 255, 118, 101, 114, 255, 95, 118, 101, 114, 115, 255, 105, 111, 255, 110, 0, 0, 0, 0, 0, 250, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 116, 105, 107, 118, 255, 95, 103, 99, 95, 255, 101, 110, 97, 255, 98, 108, 101, 0, 0, 253, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 4, version: 18, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 130, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 131, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 273, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 273, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=273] [region_id=129]
[2019/05/01 12:35:50.954 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 144] 326"]
[2019/05/01 12:35:50.954 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 144, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 114, 128, 0, 0, 0, 0, 255, 0, 0, 1, 0, 0, 0, 0, 0, 250], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 114, 128, 0, 0, 0, 0, 255, 0, 0, 3, 0, 0, 0, 0, 0, 250], region_epoch: Some(RegionEpoch { conf_ver: 4, version: 18, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 145, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 146, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 326, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=326] [region_id=144]
[2019/05/01 12:35:50.954 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=144]
[2019/05/01 12:35:51.017 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=62.425066ms] [region_id=144]
[2019/05/01 12:35:51.931 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_141_7_9_(default|lock|write).sst] [snap_key=141_7_9]
[2019/05/01 12:35:51.931 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_150_7_9_(default|lock|write).sst] [snap_key=150_7_9]
[2019/05/01 12:35:51.936 -07:00] [INFO] [unknown:1792] ["[region 150] 328 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 9, term: 7]"]
[2019/05/01 12:35:51.936 -07:00] [INFO] [unknown:1816] ["[region 150] 328 restored progress of 151 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:35:51.936 -07:00] [INFO] [unknown:1816] ["[region 150] 328 restored progress of 152 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:35:51.936 -07:00] [INFO] [unknown:1816] ["[region 150] 328 restored progress of 328 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:35:51.936 -07:00] [INFO] [unknown:474] ["[region 150] 328 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 9, term: 7]"]
[2019/05/01 12:35:51.936 -07:00] [INFO] [unknown:1736] ["[region 150] 328 [commit: 9] restored snapshot [index: 9, term: 7]"]
[2019/05/01 12:35:51.936 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=328] [region_id=150]
[2019/05/01 12:35:51.936 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 9, truncated_state: Some(RaftTruncatedState { index: 9, term: 7, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 150, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 114, 128, 0, 0, 0, 0, 255, 0, 234, 97, 0, 0, 0, 0, 0, 250], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 114, 128, 0, 0, 0, 0, 255, 1, 212, 193, 0, 0, 0, 0, 0, 250], region_epoch: Some(RegionEpoch { conf_ver: 4, version: 18, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 151, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 152, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 328, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=328] [region_id=150]
[2019/05/01 12:35:51.936 -07:00] [INFO] [unknown:1792] ["[region 141] 325 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 9, term: 7]"]
[2019/05/01 12:35:51.936 -07:00] [INFO] [unknown:1816] ["[region 141] 325 restored progress of 142 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:35:51.936 -07:00] [INFO] [unknown:1816] ["[region 141] 325 restored progress of 143 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:35:51.944 -07:00] [INFO] [unknown:1816] ["[region 141] 325 restored progress of 325 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:35:51.944 -07:00] [INFO] [unknown:474] ["[region 141] 325 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 9, term: 7]"]
[2019/05/01 12:35:51.944 -07:00] [INFO] [unknown:1736] ["[region 141] 325 [commit: 9] restored snapshot [index: 9, term: 7]"]
[2019/05/01 12:35:51.944 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=325] [region_id=141]
[2019/05/01 12:35:51.944 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 9, truncated_state: Some(RaftTruncatedState { index: 9, term: 7, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 141, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 116, 105, 107, 118, 255, 95, 103, 99, 95, 255, 114, 117, 110, 255, 95, 105, 110, 116, 101, 255, 114, 118, 255, 97, 108, 0, 0, 0, 0, 251, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 114, 128, 0, 0, 0, 0, 255, 0, 0, 1, 0, 0, 0, 0, 0, 250], region_epoch: Some(RegionEpoch { conf_ver: 4, version: 18, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 142, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 143, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 325, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=325] [region_id=141]
[2019/05/01 12:35:51.959 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 150] 328"]
[2019/05/01 12:35:51.959 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 150, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 114, 128, 0, 0, 0, 0, 255, 0, 234, 97, 0, 0, 0, 0, 0, 250], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 114, 128, 0, 0, 0, 0, 255, 1, 212, 193, 0, 0, 0, 0, 0, 250], region_epoch: Some(RegionEpoch { conf_ver: 4, version: 18, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 151, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 152, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 328, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=328] [region_id=150]
[2019/05/01 12:35:51.959 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 141, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 116, 105, 107, 118, 255, 95, 103, 99, 95, 255, 114, 117, 110, 255, 95, 105, 110, 116, 101, 255, 114, 118, 255, 97, 108, 0, 0, 0, 0, 251, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 114, 128, 0, 0, 0, 0, 255, 0, 0, 1, 0, 0, 0, 0, 0, 250], region_epoch: Some(RegionEpoch { conf_ver: 4, version: 18, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 142, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 143, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 325, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=325] [region_id=141]
[2019/05/01 12:35:51.959 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 141] 325"]
[2019/05/01 12:35:51.959 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=150]
[2019/05/01 12:35:52.002 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 326, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=10] [term=7] [peer_id=326] [region_id=144]
[2019/05/01 12:35:52.026 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 4, version: 18, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=326] [region_id=144]
[2019/05/01 12:35:52.026 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 144, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 114, 128, 0, 0, 0, 0, 255, 0, 0, 1, 0, 0, 0, 0, 0, 250], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 114, 128, 0, 0, 0, 0, 255, 0, 0, 3, 0, 0, 0, 0, 0, 250], region_epoch: Some(RegionEpoch { conf_ver: 4, version: 18, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 145, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 146, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 326, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 326, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=326] [region_id=144]
[2019/05/01 12:35:52.048 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=88.861266ms] [region_id=150]
[2019/05/01 12:35:52.048 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=141]
[2019/05/01 12:35:52.067 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=18.635458ms] [region_id=141]
[2019/05/01 12:35:52.912 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=333] [region_id=36]
[2019/05/01 12:35:52.912 -07:00] [INFO] [unknown:719] ["[region 36] 333 became follower at term 0"]
[2019/05/01 12:35:52.912 -07:00] [INFO] [unknown:295] ["[region 36] 333 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:35:52.912 -07:00] [INFO] [unknown:719] ["[region 36] 333 became follower at term 1"]
[2019/05/01 12:35:52.912 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=332] [region_id=34]
[2019/05/01 12:35:52.912 -07:00] [INFO] [unknown:719] ["[region 34] 332 became follower at term 0"]
[2019/05/01 12:35:52.912 -07:00] [INFO] [unknown:295] ["[region 34] 332 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:35:52.912 -07:00] [INFO] [unknown:719] ["[region 34] 332 became follower at term 1"]
[2019/05/01 12:35:52.912 -07:00] [INFO] [unknown:920] ["[region 34] 332 [term: 1] received a MsgHeartbeat message with higher term from 35 [term: 6]"]
[2019/05/01 12:35:52.912 -07:00] [INFO] [unknown:920] ["[region 36] 333 [term: 1] received a MsgHeartbeat message with higher term from 37 [term: 6]"]
[2019/05/01 12:35:52.912 -07:00] [INFO] [unknown:719] ["[region 34] 332 became follower at term 6"]
[2019/05/01 12:35:52.912 -07:00] [INFO] [unknown:719] ["[region 36] 333 became follower at term 6"]
[2019/05/01 12:35:52.930 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=329] [region_id=153]
[2019/05/01 12:35:52.930 -07:00] [INFO] [unknown:719] ["[region 153] 329 became follower at term 0"]
[2019/05/01 12:35:52.930 -07:00] [INFO] [unknown:295] ["[region 153] 329 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:35:52.930 -07:00] [INFO] [unknown:719] ["[region 153] 329 became follower at term 1"]
[2019/05/01 12:35:52.930 -07:00] [INFO] [unknown:920] ["[region 153] 329 [term: 1] received a MsgHeartbeat message with higher term from 155 [term: 7]"]
[2019/05/01 12:35:52.930 -07:00] [INFO] [unknown:719] ["[region 153] 329 became follower at term 7"]
[2019/05/01 12:35:52.952 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 325, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=10] [term=7] [peer_id=325] [region_id=141]
[2019/05/01 12:35:52.952 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 4, version: 18, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=325] [region_id=141]
[2019/05/01 12:35:52.952 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 141, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 116, 105, 107, 118, 255, 95, 103, 99, 95, 255, 114, 117, 110, 255, 95, 105, 110, 116, 101, 255, 114, 118, 255, 97, 108, 0, 0, 0, 0, 251, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 114, 128, 0, 0, 0, 0, 255, 0, 0, 1, 0, 0, 0, 0, 0, 250], region_epoch: Some(RegionEpoch { conf_ver: 4, version: 18, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 142, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 143, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 325, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 325, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=325] [region_id=141]
[2019/05/01 12:35:52.952 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 328, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=10] [term=7] [peer_id=328] [region_id=150]
[2019/05/01 12:35:52.952 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 4, version: 18, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=328] [region_id=150]
[2019/05/01 12:35:52.953 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 150, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 114, 128, 0, 0, 0, 0, 255, 0, 234, 97, 0, 0, 0, 0, 0, 250], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 114, 128, 0, 0, 0, 0, 255, 1, 212, 193, 0, 0, 0, 0, 0, 250], region_epoch: Some(RegionEpoch { conf_ver: 4, version: 18, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 151, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 152, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 328, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 328, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=328] [region_id=150]
[2019/05/01 12:35:53.713 -07:00] [INFO] [unknown:1625] ["[region 111] 216 [term 6] received MsgTimeoutNow from 112 and starts an election to get leadership."]
[2019/05/01 12:35:53.713 -07:00] [INFO] [unknown:739] ["[region 111] 216 became candidate at term 7"]
[2019/05/01 12:35:53.713 -07:00] [INFO] [unknown:854] ["[region 111] 216 received MsgRequestVoteResponse from 216 at term 7"]
[2019/05/01 12:35:53.713 -07:00] [INFO] [unknown:828] ["[region 111] 216 [logterm: 6, index: 9] sent MsgRequestVote request to 113 at term 7"]
[2019/05/01 12:35:53.713 -07:00] [INFO] [unknown:828] ["[region 111] 216 [logterm: 6, index: 9] sent MsgRequestVote request to 112 at term 7"]
[2019/05/01 12:35:53.713 -07:00] [INFO] [unknown:1625] ["[region 114] 257 [term 6] received MsgTimeoutNow from 115 and starts an election to get leadership."]
[2019/05/01 12:35:53.713 -07:00] [INFO] [unknown:739] ["[region 114] 257 became candidate at term 7"]
[2019/05/01 12:35:53.713 -07:00] [INFO] [unknown:854] ["[region 114] 257 received MsgRequestVoteResponse from 257 at term 7"]
[2019/05/01 12:35:53.713 -07:00] [INFO] [unknown:828] ["[region 114] 257 [logterm: 6, index: 9] sent MsgRequestVote request to 116 at term 7"]
[2019/05/01 12:35:53.713 -07:00] [INFO] [unknown:828] ["[region 114] 257 [logterm: 6, index: 9] sent MsgRequestVote request to 115 at term 7"]
[2019/05/01 12:35:53.729 -07:00] [INFO] [unknown:854] ["[region 111] 216 received MsgRequestVoteResponse from 113 at term 7"]
[2019/05/01 12:35:53.729 -07:00] [INFO] [unknown:1550] ["[region 111] 216 [quorum:2] has received 2 MsgRequestVoteResponse votes and 0 vote rejections"]
[2019/05/01 12:35:53.729 -07:00] [INFO] [unknown:789] ["[region 111] 216 became leader at term 7"]
[2019/05/01 12:35:53.729 -07:00] [INFO] [unknown:854] ["[region 114] 257 received MsgRequestVoteResponse from 116 at term 7"]
[2019/05/01 12:35:53.729 -07:00] [INFO] [unknown:1550] ["[region 114] 257 [quorum:2] has received 2 MsgRequestVoteResponse votes and 0 vote rejections"]
[2019/05/01 12:35:53.729 -07:00] [INFO] [unknown:789] ["[region 114] 257 became leader at term 7"]
[2019/05/01 12:35:53.923 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=335] [region_id=40]
[2019/05/01 12:35:53.923 -07:00] [INFO] [unknown:719] ["[region 40] 335 became follower at term 0"]
[2019/05/01 12:35:53.923 -07:00] [INFO] [unknown:295] ["[region 40] 335 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:35:53.923 -07:00] [INFO] [unknown:719] ["[region 40] 335 became follower at term 1"]
[2019/05/01 12:35:53.924 -07:00] [INFO] [unknown:920] ["[region 40] 335 [term: 1] received a MsgHeartbeat message with higher term from 41 [term: 6]"]
[2019/05/01 12:35:53.924 -07:00] [INFO] [unknown:719] ["[region 40] 335 became follower at term 6"]
[2019/05/01 12:35:54.926 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_36_6_7_(default|lock|write).sst] [snap_key=36_6_7]
[2019/05/01 12:35:54.926 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_34_6_9_(default|lock|write).sst] [snap_key=34_6_9]
[2019/05/01 12:35:54.931 -07:00] [INFO] [unknown:1792] ["[region 36] 333 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 7, term: 6]"]
[2019/05/01 12:35:54.932 -07:00] [INFO] [unknown:1816] ["[region 36] 333 restored progress of 37 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:35:54.932 -07:00] [INFO] [unknown:1816] ["[region 36] 333 restored progress of 333 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:35:54.932 -07:00] [INFO] [unknown:474] ["[region 36] 333 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 7, term: 6]"]
[2019/05/01 12:35:54.932 -07:00] [INFO] [unknown:1736] ["[region 36] 333 [commit: 7] restored snapshot [index: 7, term: 6]"]
[2019/05/01 12:35:54.932 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=333] [region_id=36]
[2019/05/01 12:35:54.932 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 7, truncated_state: Some(RaftTruncatedState { index: 7, term: 6, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 36, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 61, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 68, 0, 0, 0, 0, 0, 0, 0, 248], region_epoch: Some(RegionEpoch { conf_ver: 2, version: 12, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 37, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 333, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=333] [region_id=36]
[2019/05/01 12:35:54.932 -07:00] [INFO] [unknown:1792] ["[region 34] 332 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 9, term: 6]"]
[2019/05/01 12:35:54.932 -07:00] [INFO] [unknown:1816] ["[region 34] 332 restored progress of 35 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:35:54.932 -07:00] [INFO] [unknown:1816] ["[region 34] 332 restored progress of 332 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:35:54.932 -07:00] [INFO] [unknown:474] ["[region 34] 332 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 9, term: 6]"]
[2019/05/01 12:35:54.932 -07:00] [INFO] [unknown:1736] ["[region 34] 332 [commit: 9] restored snapshot [index: 9, term: 6]"]
[2019/05/01 12:35:54.932 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=332] [region_id=34]
[2019/05/01 12:35:54.932 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 9, truncated_state: Some(RaftTruncatedState { index: 9, term: 6, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 34, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 55, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 61, 0, 0, 0, 0, 0, 0, 0, 248], region_epoch: Some(RegionEpoch { conf_ver: 2, version: 11, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 35, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 332, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=332] [region_id=34]
[2019/05/01 12:35:54.945 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 36] 333"]
[2019/05/01 12:35:54.945 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 36, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 61, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 68, 0, 0, 0, 0, 0, 0, 0, 248], region_epoch: Some(RegionEpoch { conf_ver: 2, version: 12, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 37, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 333, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=333] [region_id=36]
[2019/05/01 12:35:54.945 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=36]
[2019/05/01 12:35:54.945 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 34] 332"]
[2019/05/01 12:35:54.945 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 34, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 55, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 61, 0, 0, 0, 0, 0, 0, 0, 248], region_epoch: Some(RegionEpoch { conf_ver: 2, version: 11, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 35, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 332, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=332] [region_id=34]
[2019/05/01 12:35:54.945 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=27.418µs] [region_id=36]
[2019/05/01 12:35:54.945 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=34]
[2019/05/01 12:35:54.967 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_153_7_9_(default|lock|write).sst] [snap_key=153_7_9]
[2019/05/01 12:35:54.980 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=34.442369ms] [region_id=34]
[2019/05/01 12:35:54.980 -07:00] [INFO] [unknown:1792] ["[region 153] 329 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 9, term: 7]"]
[2019/05/01 12:35:54.980 -07:00] [INFO] [unknown:1816] ["[region 153] 329 restored progress of 154 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:35:54.980 -07:00] [INFO] [unknown:1816] ["[region 153] 329 restored progress of 155 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:35:54.980 -07:00] [INFO] [unknown:1816] ["[region 153] 329 restored progress of 329 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:35:54.980 -07:00] [INFO] [unknown:474] ["[region 153] 329 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 9, term: 7]"]
[2019/05/01 12:35:54.980 -07:00] [INFO] [unknown:1736] ["[region 153] 329 [commit: 9] restored snapshot [index: 9, term: 7]"]
[2019/05/01 12:35:54.980 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=329] [region_id=153]
[2019/05/01 12:35:54.980 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 9, truncated_state: Some(RaftTruncatedState { index: 9, term: 7, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 153, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 114, 128, 0, 0, 0, 0, 255, 1, 212, 193, 0, 0, 0, 0, 0, 250], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 114, 128, 0, 0, 0, 0, 255, 1, 212, 195, 0, 0, 0, 0, 0, 250], region_epoch: Some(RegionEpoch { conf_ver: 4, version: 18, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 154, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 155, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 329, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=329] [region_id=153]
[2019/05/01 12:35:55.018 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 153, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 114, 128, 0, 0, 0, 0, 255, 1, 212, 193, 0, 0, 0, 0, 0, 250], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 114, 128, 0, 0, 0, 0, 255, 1, 212, 195, 0, 0, 0, 0, 0, 250], region_epoch: Some(RegionEpoch { conf_ver: 4, version: 18, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 154, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 155, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 329, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=329] [region_id=153]
[2019/05/01 12:35:55.018 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 153] 329"]
[2019/05/01 12:35:55.018 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=153]
[2019/05/01 12:35:55.062 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=44.143966ms] [region_id=153]
[2019/05/01 12:35:55.925 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 332, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=10] [term=6] [peer_id=332] [region_id=34]
[2019/05/01 12:35:55.925 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 2, version: 11, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=332] [region_id=34]
[2019/05/01 12:35:55.925 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 34, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 55, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 61, 0, 0, 0, 0, 0, 0, 0, 248], region_epoch: Some(RegionEpoch { conf_ver: 2, version: 11, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 35, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 332, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 332, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=332] [region_id=34]
[2019/05/01 12:35:55.925 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 333, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=8] [term=6] [peer_id=333] [region_id=36]
[2019/05/01 12:35:55.925 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 2, version: 12, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=333] [region_id=36]
[2019/05/01 12:35:55.925 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 36, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 61, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 68, 0, 0, 0, 0, 0, 0, 0, 248], region_epoch: Some(RegionEpoch { conf_ver: 2, version: 12, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 37, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 333, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 333, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=333] [region_id=36]
[2019/05/01 12:35:55.928 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_40_6_7_(default|lock|write).sst] [snap_key=40_6_7]
[2019/05/01 12:35:55.933 -07:00] [INFO] [unknown:1792] ["[region 40] 335 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 7, term: 6]"]
[2019/05/01 12:35:55.933 -07:00] [INFO] [unknown:1816] ["[region 40] 335 restored progress of 41 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:35:55.933 -07:00] [INFO] [unknown:1816] ["[region 40] 335 restored progress of 335 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:35:55.933 -07:00] [INFO] [unknown:474] ["[region 40] 335 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 7, term: 6]"]
[2019/05/01 12:35:55.933 -07:00] [INFO] [unknown:1736] ["[region 40] 335 [commit: 7] restored snapshot [index: 7, term: 6]"]
[2019/05/01 12:35:55.933 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=335] [region_id=40]
[2019/05/01 12:35:55.933 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 7, truncated_state: Some(RaftTruncatedState { index: 7, term: 6, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 40, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 73, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 79, 0, 0, 0, 0, 0, 0, 0, 248], region_epoch: Some(RegionEpoch { conf_ver: 2, version: 14, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 41, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 335, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=335] [region_id=40]
[2019/05/01 12:35:55.968 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 40] 335"]
[2019/05/01 12:35:55.968 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 40, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 73, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 79, 0, 0, 0, 0, 0, 0, 0, 248], region_epoch: Some(RegionEpoch { conf_ver: 2, version: 14, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 41, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 335, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=335] [region_id=40]
[2019/05/01 12:35:55.968 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=40]
[2019/05/01 12:35:55.968 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=31.127µs] [region_id=40]
[2019/05/01 12:35:55.977 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 329, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=10] [term=7] [peer_id=329] [region_id=153]
[2019/05/01 12:35:55.977 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 4, version: 18, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=329] [region_id=153]
[2019/05/01 12:35:55.977 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 153, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 114, 128, 0, 0, 0, 0, 255, 1, 212, 193, 0, 0, 0, 0, 0, 250], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 114, 128, 0, 0, 0, 0, 255, 1, 212, 195, 0, 0, 0, 0, 0, 250], region_epoch: Some(RegionEpoch { conf_ver: 4, version: 18, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 154, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 155, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 329, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 329, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=329] [region_id=153]
[2019/05/01 12:35:56.164 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddLearnerNode, peer: Some(Peer { id: 379, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=9] [term=6] [peer_id=333] [region_id=36]
[2019/05/01 12:35:56.164 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 3, version: 12, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddLearner] [peer_id=333] [region_id=36]
[2019/05/01 12:35:56.164 -07:00] [INFO] [apply.rs:1476] ["add learner successfully"] [region="Region { id: 36, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 61, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 68, 0, 0, 0, 0, 0, 0, 0, 248], region_epoch: Some(RegionEpoch { conf_ver: 3, version: 12, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 37, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 333, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 379, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=333] [region_id=36]
[2019/05/01 12:35:56.926 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=378] [region_id=32]
[2019/05/01 12:35:56.926 -07:00] [INFO] [unknown:719] ["[region 32] 378 became follower at term 0"]
[2019/05/01 12:35:56.926 -07:00] [INFO] [unknown:295] ["[region 32] 378 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:35:56.926 -07:00] [INFO] [unknown:719] ["[region 32] 378 became follower at term 1"]
[2019/05/01 12:35:56.926 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=377] [region_id=44]
[2019/05/01 12:35:56.926 -07:00] [INFO] [unknown:719] ["[region 44] 377 became follower at term 0"]
[2019/05/01 12:35:56.926 -07:00] [INFO] [unknown:295] ["[region 44] 377 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:35:56.926 -07:00] [INFO] [unknown:920] ["[region 32] 378 [term: 1] received a MsgHeartbeat message with higher term from 33 [term: 6]"]
[2019/05/01 12:35:56.926 -07:00] [INFO] [unknown:719] ["[region 32] 378 became follower at term 6"]
[2019/05/01 12:35:56.926 -07:00] [INFO] [unknown:719] ["[region 44] 377 became follower at term 1"]
[2019/05/01 12:35:56.926 -07:00] [INFO] [unknown:920] ["[region 44] 377 [term: 1] received a MsgHeartbeat message with higher term from 45 [term: 6]"]
[2019/05/01 12:35:56.926 -07:00] [INFO] [unknown:719] ["[region 44] 377 became follower at term 6"]
[2019/05/01 12:35:56.942 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 335, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=8] [term=6] [peer_id=335] [region_id=40]
[2019/05/01 12:35:56.942 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 2, version: 14, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=335] [region_id=40]
[2019/05/01 12:35:56.942 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 40, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 73, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 79, 0, 0, 0, 0, 0, 0, 0, 248], region_epoch: Some(RegionEpoch { conf_ver: 2, version: 14, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 41, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 335, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 335, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=335] [region_id=40]
[2019/05/01 12:35:57.074 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddLearnerNode, peer: Some(Peer { id: 382, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=9] [term=6] [peer_id=335] [region_id=40]
[2019/05/01 12:35:57.074 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 3, version: 14, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddLearner] [peer_id=335] [region_id=40]
[2019/05/01 12:35:57.074 -07:00] [INFO] [apply.rs:1476] ["add learner successfully"] [region="Region { id: 40, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 73, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 79, 0, 0, 0, 0, 0, 0, 0, 248], region_epoch: Some(RegionEpoch { conf_ver: 3, version: 14, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 41, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 335, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 382, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=335] [region_id=40]
[2019/05/01 12:35:57.213 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=381] [region_id=56]
[2019/05/01 12:35:57.213 -07:00] [INFO] [unknown:719] ["[region 56] 381 became follower at term 0"]
[2019/05/01 12:35:57.213 -07:00] [INFO] [unknown:295] ["[region 56] 381 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:35:57.213 -07:00] [INFO] [unknown:719] ["[region 56] 381 became follower at term 1"]
[2019/05/01 12:35:57.213 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=383] [region_id=214]
[2019/05/01 12:35:57.213 -07:00] [INFO] [unknown:719] ["[region 214] 383 became follower at term 0"]
[2019/05/01 12:35:57.213 -07:00] [INFO] [unknown:295] ["[region 214] 383 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:35:57.213 -07:00] [INFO] [unknown:719] ["[region 214] 383 became follower at term 1"]
[2019/05/01 12:35:57.213 -07:00] [INFO] [unknown:920] ["[region 56] 381 [term: 1] received a MsgHeartbeat message with higher term from 57 [term: 6]"]
[2019/05/01 12:35:57.213 -07:00] [INFO] [unknown:719] ["[region 56] 381 became follower at term 6"]
[2019/05/01 12:35:57.213 -07:00] [INFO] [unknown:920] ["[region 214] 383 [term: 1] received a MsgHeartbeat message with higher term from 215 [term: 6]"]
[2019/05/01 12:35:57.213 -07:00] [INFO] [unknown:719] ["[region 214] 383 became follower at term 6"]
[2019/05/01 12:35:58.930 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_44_6_7_(default|lock|write).sst] [snap_key=44_6_7]
[2019/05/01 12:35:58.930 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_32_6_11_(default|lock|write).sst] [snap_key=32_6_11]
[2019/05/01 12:35:58.947 -07:00] [INFO] [unknown:1792] ["[region 44] 377 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 7, term: 6]"]
[2019/05/01 12:35:58.947 -07:00] [INFO] [unknown:1816] ["[region 44] 377 restored progress of 45 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:35:58.947 -07:00] [INFO] [unknown:1816] ["[region 44] 377 restored progress of 377 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:35:58.947 -07:00] [INFO] [unknown:474] ["[region 44] 377 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 7, term: 6]"]
[2019/05/01 12:35:58.947 -07:00] [INFO] [unknown:1736] ["[region 44] 377 [commit: 7] restored snapshot [index: 7, term: 6]"]
[2019/05/01 12:35:58.947 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=377] [region_id=44]
[2019/05/01 12:35:58.947 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 7, truncated_state: Some(RaftTruncatedState { index: 7, term: 6, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 44, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 83, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 89, 0, 0, 0, 0, 0, 0, 0, 248], region_epoch: Some(RegionEpoch { conf_ver: 2, version: 16, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 45, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 377, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=377] [region_id=44]
[2019/05/01 12:35:58.949 -07:00] [INFO] [unknown:1792] ["[region 32] 378 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 11, term: 6]"]
[2019/05/01 12:35:58.949 -07:00] [INFO] [unknown:1816] ["[region 32] 378 restored progress of 33 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:35:58.949 -07:00] [INFO] [unknown:1816] ["[region 32] 378 restored progress of 331 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:35:58.949 -07:00] [INFO] [unknown:1816] ["[region 32] 378 restored progress of 378 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:35:58.949 -07:00] [INFO] [unknown:474] ["[region 32] 378 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 11, term: 6]"]
[2019/05/01 12:35:58.949 -07:00] [INFO] [unknown:1736] ["[region 32] 378 [commit: 11] restored snapshot [index: 11, term: 6]"]
[2019/05/01 12:35:58.949 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=378] [region_id=32]
[2019/05/01 12:35:58.949 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 11, truncated_state: Some(RaftTruncatedState { index: 11, term: 6, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 32, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 49, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 55, 0, 0, 0, 0, 0, 0, 0, 248], region_epoch: Some(RegionEpoch { conf_ver: 4, version: 10, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 33, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 331, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 378, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=378] [region_id=32]
[2019/05/01 12:35:58.968 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 44] 377"]
[2019/05/01 12:35:58.968 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 44, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 83, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 89, 0, 0, 0, 0, 0, 0, 0, 248], region_epoch: Some(RegionEpoch { conf_ver: 2, version: 16, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 45, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 377, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=377] [region_id=44]
[2019/05/01 12:35:58.968 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=44]
[2019/05/01 12:35:58.968 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=30.474µs] [region_id=44]
[2019/05/01 12:35:58.976 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 32] 378"]
[2019/05/01 12:35:58.976 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 32, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 49, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 55, 0, 0, 0, 0, 0, 0, 0, 248], region_epoch: Some(RegionEpoch { conf_ver: 4, version: 10, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 33, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 331, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 378, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=378] [region_id=32]
[2019/05/01 12:35:58.976 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=32]
[2019/05/01 12:35:59.010 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=33.17664ms] [region_id=32]
[2019/05/01 12:35:59.217 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_56_6_7_(default|lock|write).sst] [snap_key=56_6_7]
[2019/05/01 12:35:59.217 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_214_6_7_(default|lock|write).sst] [snap_key=214_6_7]
[2019/05/01 12:35:59.223 -07:00] [INFO] [unknown:1792] ["[region 214] 383 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 7, term: 6]"]
[2019/05/01 12:35:59.223 -07:00] [INFO] [unknown:1816] ["[region 214] 383 restored progress of 215 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:35:59.223 -07:00] [INFO] [unknown:1816] ["[region 214] 383 restored progress of 383 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:35:59.223 -07:00] [INFO] [unknown:474] ["[region 214] 383 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 7, term: 6]"]
[2019/05/01 12:35:59.223 -07:00] [INFO] [unknown:1736] ["[region 214] 383 [commit: 7] restored snapshot [index: 7, term: 6]"]
[2019/05/01 12:35:59.223 -07:00] [INFO] [unknown:1792] ["[region 56] 381 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 7, term: 6]"]
[2019/05/01 12:35:59.223 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=383] [region_id=214]
[2019/05/01 12:35:59.223 -07:00] [INFO] [unknown:1816] ["[region 56] 381 restored progress of 57 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:35:59.223 -07:00] [INFO] [unknown:1816] ["[region 56] 381 restored progress of 381 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:35:59.223 -07:00] [INFO] [unknown:474] ["[region 56] 381 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 7, term: 6]"]
[2019/05/01 12:35:59.223 -07:00] [INFO] [unknown:1736] ["[region 56] 381 [commit: 7] restored snapshot [index: 7, term: 6]"]
[2019/05/01 12:35:59.223 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=381] [region_id=56]
[2019/05/01 12:35:59.223 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 7, truncated_state: Some(RaftTruncatedState { index: 7, term: 6, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 214, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 105, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 105, 95, 114, 128, 0, 0, 0, 0, 255, 0, 0, 3, 0, 0, 0, 0, 0, 250], region_epoch: Some(RegionEpoch { conf_ver: 2, version: 20, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 215, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 383, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=383] [region_id=214]
[2019/05/01 12:35:59.223 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 7, truncated_state: Some(RaftTruncatedState { index: 7, term: 6, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 56, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 95, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 105, 0, 0, 0, 0, 0, 0, 0, 248], region_epoch: Some(RegionEpoch { conf_ver: 2, version: 18, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 57, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 381, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=381] [region_id=56]
[2019/05/01 12:35:59.247 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 214, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 105, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 105, 95, 114, 128, 0, 0, 0, 0, 255, 0, 0, 3, 0, 0, 0, 0, 0, 250], region_epoch: Some(RegionEpoch { conf_ver: 2, version: 20, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 215, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 383, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=383] [region_id=214]
[2019/05/01 12:35:59.247 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 214] 383"]
[2019/05/01 12:35:59.247 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=214]
[2019/05/01 12:35:59.255 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 56, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 95, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 105, 0, 0, 0, 0, 0, 0, 0, 248], region_epoch: Some(RegionEpoch { conf_ver: 2, version: 18, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 57, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 381, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=381] [region_id=56]
[2019/05/01 12:35:59.255 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 56] 381"]
[2019/05/01 12:35:59.272 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=24.306804ms] [region_id=214]
[2019/05/01 12:35:59.272 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=56]
[2019/05/01 12:35:59.272 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=32.949µs] [region_id=56]
[2019/05/01 12:35:59.967 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 377, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=8] [term=6] [peer_id=377] [region_id=44]
[2019/05/01 12:35:59.973 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 2, version: 16, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=377] [region_id=44]
[2019/05/01 12:35:59.973 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 44, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 83, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 89, 0, 0, 0, 0, 0, 0, 0, 248], region_epoch: Some(RegionEpoch { conf_ver: 2, version: 16, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 45, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 377, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 377, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=377] [region_id=44]
[2019/05/01 12:36:00.031 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 378, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=12] [term=6] [peer_id=378] [region_id=32]
[2019/05/01 12:36:00.031 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 4, version: 10, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=378] [region_id=32]
[2019/05/01 12:36:00.031 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 32, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 49, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 55, 0, 0, 0, 0, 0, 0, 0, 248], region_epoch: Some(RegionEpoch { conf_ver: 4, version: 10, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 33, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 331, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 378, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 378, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=378] [region_id=32]
[2019/05/01 12:36:00.098 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 379, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=10] [term=6] [peer_id=333] [region_id=36]
[2019/05/01 12:36:00.098 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 4, version: 12, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=333] [region_id=36]
[2019/05/01 12:36:00.098 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 36, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 61, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 68, 0, 0, 0, 0, 0, 0, 0, 248], region_epoch: Some(RegionEpoch { conf_ver: 4, version: 12, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 37, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 333, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 379, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 379, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=333] [region_id=36]
[2019/05/01 12:36:00.240 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 381, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=8] [term=6] [peer_id=381] [region_id=56]
[2019/05/01 12:36:00.240 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 2, version: 18, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=381] [region_id=56]
[2019/05/01 12:36:00.240 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 56, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 95, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 105, 0, 0, 0, 0, 0, 0, 0, 248], region_epoch: Some(RegionEpoch { conf_ver: 2, version: 18, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 57, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 381, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 381, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=381] [region_id=56]
[2019/05/01 12:36:00.240 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 383, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=8] [term=6] [peer_id=383] [region_id=214]
[2019/05/01 12:36:00.240 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 2, version: 20, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=383] [region_id=214]
[2019/05/01 12:36:00.240 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 214, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 105, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 105, 95, 114, 128, 0, 0, 0, 0, 255, 0, 0, 3, 0, 0, 0, 0, 0, 250], region_epoch: Some(RegionEpoch { conf_ver: 2, version: 20, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 215, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 383, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 383, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=383] [region_id=214]
[2019/05/01 12:36:00.392 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddLearnerNode, peer: Some(Peer { id: 387, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=9] [term=6] [peer_id=381] [region_id=56]
[2019/05/01 12:36:00.392 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 3, version: 18, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddLearner] [peer_id=381] [region_id=56]
[2019/05/01 12:36:00.392 -07:00] [INFO] [apply.rs:1476] ["add learner successfully"] [region="Region { id: 56, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 95, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 105, 0, 0, 0, 0, 0, 0, 0, 248], region_epoch: Some(RegionEpoch { conf_ver: 3, version: 18, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 57, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 381, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 387, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=381] [region_id=56]
[2019/05/01 12:36:00.497 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddLearnerNode, peer: Some(Peer { id: 388, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=9] [term=6] [peer_id=383] [region_id=214]
[2019/05/01 12:36:00.497 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 3, version: 20, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddLearner] [peer_id=383] [region_id=214]
[2019/05/01 12:36:00.497 -07:00] [INFO] [apply.rs:1476] ["add learner successfully"] [region="Region { id: 214, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 105, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 105, 95, 114, 128, 0, 0, 0, 0, 255, 0, 0, 3, 0, 0, 0, 0, 0, 250], region_epoch: Some(RegionEpoch { conf_ver: 3, version: 20, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 215, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 383, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 388, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=383] [region_id=214]
[2019/05/01 12:36:00.881 -07:00] [INFO] [unknown:1625] ["[region 34] 332 [term 6] received MsgTimeoutNow from 35 and starts an election to get leadership."]
[2019/05/01 12:36:00.881 -07:00] [INFO] [unknown:739] ["[region 34] 332 became candidate at term 7"]
[2019/05/01 12:36:00.881 -07:00] [INFO] [unknown:854] ["[region 34] 332 received MsgRequestVoteResponse from 332 at term 7"]
[2019/05/01 12:36:00.881 -07:00] [INFO] [unknown:828] ["[region 34] 332 [logterm: 6, index: 10] sent MsgRequestVote request to 35 at term 7"]
[2019/05/01 12:36:00.940 -07:00] [INFO] [unknown:854] ["[region 34] 332 received MsgRequestVoteResponse from 35 at term 7"]
[2019/05/01 12:36:00.940 -07:00] [INFO] [unknown:1550] ["[region 34] 332 [quorum:2] has received 2 MsgRequestVoteResponse votes and 0 vote rejections"]
[2019/05/01 12:36:00.940 -07:00] [INFO] [unknown:789] ["[region 34] 332 became leader at term 7"]
[2019/05/01 12:36:00.940 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=385] [region_id=46]
[2019/05/01 12:36:00.940 -07:00] [INFO] [unknown:719] ["[region 46] 385 became follower at term 0"]
[2019/05/01 12:36:00.940 -07:00] [INFO] [unknown:295] ["[region 46] 385 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:36:00.940 -07:00] [INFO] [unknown:719] ["[region 46] 385 became follower at term 1"]
[2019/05/01 12:36:00.940 -07:00] [INFO] [unknown:920] ["[region 46] 385 [term: 1] received a MsgHeartbeat message with higher term from 47 [term: 6]"]
[2019/05/01 12:36:00.940 -07:00] [INFO] [unknown:719] ["[region 46] 385 became follower at term 6"]
[2019/05/01 12:36:00.964 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="region Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:00.964 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="region Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:00.965 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="region Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:00.966 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="region Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:00.966 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="region Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:00.967 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="region Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:00.967 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="region Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:00.968 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="region Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:00.968 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="region Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:00.969 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="region Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:00.969 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="region Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:00.970 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="region Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:00.970 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="region Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:00.971 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="region Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:00.972 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="region Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:00.972 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="region Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:00.973 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="region Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:00.973 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="region Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:00.974 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="region Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:00.974 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="region Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:00.974 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="region Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:00.975 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="region Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:00.975 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="region Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:00.975 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="region Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:00.976 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="region Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:00.976 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="region Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:00.977 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="region Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:00.978 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="region Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:00.979 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="region Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:00.980 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="region Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:00.981 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="region Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:00.981 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="region Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:00.982 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="region Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:00.983 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="region Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:00.983 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="region Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:00.984 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="region Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:00.985 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="region Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:00.985 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="region Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:00.986 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="region Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:00.987 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="region Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:00.987 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="region Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:00.988 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="region Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:00.989 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="region Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:00.989 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="region Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:00.989 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="region Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:00.990 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="region Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:00.991 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="region Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:00.991 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="region Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:00.991 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="region Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:00.992 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="region Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:00.992 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="region Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:00.993 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="region Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:00.993 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="region Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:00.994 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="region Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:00.994 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="region Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:00.995 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="region Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:00.995 -07:00] [INFO] [unknown:920] ["[region 32] 378 [term: 6] received a MsgRequestVote message with higher term from 331 [term: 7]"]
[2019/05/01 12:36:00.995 -07:00] [INFO] [unknown:719] ["[region 32] 378 became follower at term 7"]
[2019/05/01 12:36:00.995 -07:00] [INFO] [unknown:1083] ["[region 32] 378 [logterm: 6, index: 12, vote: 0] cast MsgRequestVote for 331 [logterm: 6, index: 12] at term 7"]
[2019/05/01 12:36:00.995 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="region Error { message: \"stale command\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: None, server_is_busy: None, stale_command: Some(StaleCommand { unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:01.042 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 382, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=10] [term=6] [peer_id=335] [region_id=40]
[2019/05/01 12:36:01.042 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 4, version: 14, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=335] [region_id=40]
[2019/05/01 12:36:01.042 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 40, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 73, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 79, 0, 0, 0, 0, 0, 0, 0, 248], region_epoch: Some(RegionEpoch { conf_ver: 4, version: 14, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 41, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 335, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 382, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 382, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=335] [region_id=40]
[2019/05/01 12:36:02.088 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=386] [region_id=4]
[2019/05/01 12:36:02.088 -07:00] [INFO] [unknown:719] ["[region 4] 386 became follower at term 0"]
[2019/05/01 12:36:02.088 -07:00] [INFO] [unknown:295] ["[region 4] 386 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:36:02.088 -07:00] [INFO] [unknown:719] ["[region 4] 386 became follower at term 1"]
[2019/05/01 12:36:02.088 -07:00] [INFO] [unknown:920] ["[region 4] 386 [term: 1] received a MsgHeartbeat message with higher term from 5 [term: 6]"]
[2019/05/01 12:36:02.088 -07:00] [INFO] [unknown:719] ["[region 4] 386 became follower at term 6"]
[2019/05/01 12:36:02.145 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_4_6_2349_(default|lock|write).sst] [snap_key=4_6_2349]
[2019/05/01 12:36:02.165 -07:00] [INFO] [unknown:1792] ["[region 4] 386 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 2349, term: 6]"]
[2019/05/01 12:36:02.165 -07:00] [INFO] [unknown:1816] ["[region 4] 386 restored progress of 5 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:36:02.165 -07:00] [INFO] [unknown:1816] ["[region 4] 386 restored progress of 386 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:36:02.165 -07:00] [INFO] [unknown:474] ["[region 4] 386 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 2349, term: 6]"]
[2019/05/01 12:36:02.166 -07:00] [INFO] [unknown:1736] ["[region 4] 386 [commit: 2349] restored snapshot [index: 2349, term: 6]"]
[2019/05/01 12:36:02.166 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=386] [region_id=4]
[2019/05/01 12:36:02.166 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 2349, truncated_state: Some(RaftTruncatedState { index: 2349, term: 6, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 4, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 108, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [], region_epoch: Some(RegionEpoch { conf_ver: 2, version: 19, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 5, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 386, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=386] [region_id=4]
[2019/05/01 12:36:02.209 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 4] 386"]
[2019/05/01 12:36:02.210 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 4, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 108, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [], region_epoch: Some(RegionEpoch { conf_ver: 2, version: 19, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 5, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 386, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=386] [region_id=4]
[2019/05/01 12:36:02.210 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=4]
[2019/05/01 12:36:02.256 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=45.795548ms] [region_id=4]
[2019/05/01 12:36:02.913 -07:00] [INFO] [keys.rs:155] ["approximate keys over threshold, need to do split check"] [threshold=5] [keys=6] [region_id=34]
[2019/05/01 12:36:02.913 -07:00] [INFO] [peer.rs:294] ["on split"] [split_keys="key \"t\\200\\000\\000\\000\\000\\000\\000\\3777_i\\200\\000\\000\\000\\000\\377\\000\\000\\001\\003\\200\\000\\000\\000\\377\\000\\000\\000l\\003\\200\\000\\000\\377\\000\\000\\000\\000\\000\\003\\200\\000\\377\\000\\000\\000\\000\\000\\003\\000\\000\\375\\372V,k\\2167\\377\\376\""] [peer_id=332] [region_id=34]
[2019/05/01 12:36:02.914 -07:00] [INFO] [pd.rs:285] ["try to batch split region"] [region="Region { id: 34, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 55, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 61, 0, 0, 0, 0, 0, 0, 0, 248], region_epoch: Some(RegionEpoch { conf_ver: 3, version: 11, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 35, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 332, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [new_region_ids="[SplitID { new_region_id: 390, new_peer_ids: [391, 392], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }]"] [region_id=34]
[2019/05/01 12:36:02.982 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: BatchSplit, change_peer: None, split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: Some(BatchSplitRequest { requests: [SplitRequest { split_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 55, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 3, 128, 0, 0, 0, 255, 0, 0, 0, 108, 3, 128, 0, 0, 255, 0, 0, 0, 0, 0, 3, 128, 0, 255, 0, 0, 0, 0, 0, 3, 0, 0, 253], new_region_id: 390, new_peer_ids: [391, 392], right_derive: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], right_derive: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=12] [term=7] [peer_id=332] [region_id=34]
[2019/05/01 12:36:02.982 -07:00] [INFO] [apply.rs:1582] ["split region"] [keys="[[116, 128, 0, 0, 0, 0, 0, 0, 255, 55, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 3, 128, 0, 0, 0, 255, 0, 0, 0, 108, 3, 128, 0, 0, 255, 0, 0, 0, 0, 0, 3, 128, 0, 255, 0, 0, 0, 0, 0, 3, 0, 0, 253]]"] [region="Region { id: 34, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 55, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 61, 0, 0, 0, 0, 0, 0, 0, 248], region_epoch: Some(RegionEpoch { conf_ver: 3, version: 11, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 35, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 332, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=332] [region_id=34]
[2019/05/01 12:36:02.992 -07:00] [INFO] [peer.rs:1382] ["notify pd with split"] [split_count=2] [peer_id=332] [region_id=34]
[2019/05/01 12:36:02.992 -07:00] [INFO] [peer.rs:1424] ["insert new region"] [region="Region { id: 390, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 55, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 55, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 3, 128, 0, 0, 0, 255, 0, 0, 0, 108, 3, 128, 0, 0, 255, 0, 0, 0, 0, 0, 3, 128, 0, 255, 0, 0, 0, 0, 0, 3, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 3, version: 12, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 391, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 392, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region_id=390]
[2019/05/01 12:36:02.992 -07:00] [INFO] [peer.rs:127] ["create peer"] [peer_id=392] [region_id=390]
[2019/05/01 12:36:02.992 -07:00] [INFO] [unknown:719] ["[region 390] 392 became follower at term 5"]
[2019/05/01 12:36:02.992 -07:00] [INFO] [unknown:295] ["[region 390] 392 newRaft [peers: [391, 392], term: 5, commit: 5, applied: 5, last_index: 5, last_term: 5]"]
[2019/05/01 12:36:02.992 -07:00] [INFO] [unknown:1022] ["[region 390] 392 is starting a new election at term 5"]
[2019/05/01 12:36:02.992 -07:00] [INFO] [unknown:761] ["[region 390] 392 became pre-candidate at term 5"]
[2019/05/01 12:36:02.992 -07:00] [INFO] [unknown:854] ["[region 390] 392 received MsgRequestPreVoteResponse from 392 at term 5"]
[2019/05/01 12:36:02.992 -07:00] [INFO] [unknown:828] ["[region 390] 392 [logterm: 5, index: 5] sent MsgRequestPreVote request to 391 at term 5"]
[2019/05/01 12:36:02.992 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 390] 392"]
[2019/05/01 12:36:02.994 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_46_6_9_(default|lock|write).sst] [snap_key=46_6_9]
[2019/05/01 12:36:03.002 -07:00] [INFO] [unknown:1792] ["[region 46] 385 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 9, term: 6]"]
[2019/05/01 12:36:03.002 -07:00] [INFO] [unknown:1816] ["[region 46] 385 restored progress of 47 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:36:03.002 -07:00] [INFO] [unknown:1816] ["[region 46] 385 restored progress of 380 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:36:03.002 -07:00] [INFO] [unknown:1816] ["[region 46] 385 restored progress of 385 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:36:03.002 -07:00] [INFO] [unknown:474] ["[region 46] 385 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 9, term: 6]"]
[2019/05/01 12:36:03.002 -07:00] [INFO] [unknown:1736] ["[region 46] 385 [commit: 9] restored snapshot [index: 9, term: 6]"]
[2019/05/01 12:36:03.002 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=385] [region_id=46]
[2019/05/01 12:36:03.002 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 9, truncated_state: Some(RaftTruncatedState { index: 9, term: 6, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 46, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 89, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 95, 0, 0, 0, 0, 0, 0, 0, 248], region_epoch: Some(RegionEpoch { conf_ver: 4, version: 17, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 47, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 380, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 385, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=385] [region_id=46]
[2019/05/01 12:36:03.019 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 46, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 89, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 95, 0, 0, 0, 0, 0, 0, 0, 248], region_epoch: Some(RegionEpoch { conf_ver: 4, version: 17, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 47, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 380, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 385, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=385] [region_id=46]
[2019/05/01 12:36:03.019 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=46]
[2019/05/01 12:36:03.019 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 46] 385"]
[2019/05/01 12:36:03.020 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=27.428µs] [region_id=46]
[2019/05/01 12:36:03.020 -07:00] [INFO] [unknown:854] ["[region 390] 392 received MsgRequestPreVoteResponse from 391 at term 5"]
[2019/05/01 12:36:03.020 -07:00] [INFO] [unknown:1550] ["[region 390] 392 [quorum:2] has received 2 MsgRequestPreVoteResponse votes and 0 vote rejections"]
[2019/05/01 12:36:03.020 -07:00] [INFO] [unknown:739] ["[region 390] 392 became candidate at term 6"]
[2019/05/01 12:36:03.020 -07:00] [INFO] [unknown:854] ["[region 390] 392 received MsgRequestVoteResponse from 392 at term 6"]
[2019/05/01 12:36:03.020 -07:00] [INFO] [unknown:828] ["[region 390] 392 [logterm: 5, index: 5] sent MsgRequestVote request to 391 at term 6"]
[2019/05/01 12:36:03.052 -07:00] [INFO] [unknown:854] ["[region 390] 392 received MsgRequestVoteResponse from 391 at term 6"]
[2019/05/01 12:36:03.052 -07:00] [INFO] [unknown:1550] ["[region 390] 392 [quorum:2] has received 2 MsgRequestVoteResponse votes and 0 vote rejections"]
[2019/05/01 12:36:03.052 -07:00] [INFO] [unknown:789] ["[region 390] 392 became leader at term 6"]
[2019/05/01 12:36:03.111 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 386, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=2458] [term=6] [peer_id=386] [region_id=4]
[2019/05/01 12:36:03.111 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 2, version: 19, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=386] [region_id=4]
[2019/05/01 12:36:03.111 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 4, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 108, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [], region_epoch: Some(RegionEpoch { conf_ver: 2, version: 19, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 5, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 386, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 386, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=386] [region_id=4]
[2019/05/01 12:36:03.188 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddLearnerNode, peer: Some(Peer { id: 393, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=2463] [term=6] [peer_id=386] [region_id=4]
[2019/05/01 12:36:03.188 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 3, version: 19, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddLearner] [peer_id=386] [region_id=4]
[2019/05/01 12:36:03.188 -07:00] [INFO] [apply.rs:1476] ["add learner successfully"] [region="Region { id: 4, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 108, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [], region_epoch: Some(RegionEpoch { conf_ver: 3, version: 19, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 5, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 386, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 393, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=386] [region_id=4]
[2019/05/01 12:36:03.212 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=389] [region_id=94]
[2019/05/01 12:36:03.212 -07:00] [INFO] [unknown:719] ["[region 94] 389 became follower at term 0"]
[2019/05/01 12:36:03.212 -07:00] [INFO] [unknown:295] ["[region 94] 389 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:36:03.212 -07:00] [INFO] [unknown:719] ["[region 94] 389 became follower at term 1"]
[2019/05/01 12:36:03.212 -07:00] [INFO] [unknown:920] ["[region 94] 389 [term: 1] received a MsgHeartbeat message with higher term from 95 [term: 6]"]
[2019/05/01 12:36:03.212 -07:00] [INFO] [unknown:719] ["[region 94] 389 became follower at term 6"]
[2019/05/01 12:36:03.254 -07:00] [INFO] [pd.rs:558] ["try to change peer"] [peer="Peer { id: 394, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [change_type=AddLearnerNode] [region_id=390]
[2019/05/01 12:36:03.254 -07:00] [INFO] [peer.rs:1953] ["propose conf change peer"] [change_peer=394] [change_type=AddLearnerNode] [peer_id=392] [region_id=390]
[2019/05/01 12:36:03.278 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddLearnerNode, peer: Some(Peer { id: 394, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=7] [term=6] [peer_id=392] [region_id=390]
[2019/05/01 12:36:03.278 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 3, version: 12, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddLearner] [peer_id=392] [region_id=390]
[2019/05/01 12:36:03.278 -07:00] [INFO] [apply.rs:1476] ["add learner successfully"] [region="Region { id: 390, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 55, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 55, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 3, 128, 0, 0, 0, 255, 0, 0, 0, 108, 3, 128, 0, 0, 255, 0, 0, 0, 0, 0, 3, 128, 0, 255, 0, 0, 0, 0, 0, 3, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 3, version: 12, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 391, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 392, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 394, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=392] [region_id=390]
[2019/05/01 12:36:03.286 -07:00] [INFO] [peer.rs:1318] ["notify pd with change peer region"] [region="Region { id: 390, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 55, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 55, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 3, 128, 0, 0, 0, 255, 0, 0, 0, 108, 3, 128, 0, 0, 255, 0, 0, 0, 0, 0, 3, 128, 0, 255, 0, 0, 0, 0, 0, 3, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 4, version: 12, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 391, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 392, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 394, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=392] [region_id=390]
[2019/05/01 12:36:03.353 -07:00] [INFO] [pd.rs:558] ["try to change peer"] [peer="Peer { id: 395, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [change_type=AddLearnerNode] [region_id=34]
[2019/05/01 12:36:03.353 -07:00] [INFO] [peer.rs:1953] ["propose conf change peer"] [change_peer=395] [change_type=AddLearnerNode] [peer_id=332] [region_id=34]
[2019/05/01 12:36:03.388 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddLearnerNode, peer: Some(Peer { id: 395, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=13] [term=7] [peer_id=332] [region_id=34]
[2019/05/01 12:36:03.388 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 3, version: 12, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddLearner] [peer_id=332] [region_id=34]
[2019/05/01 12:36:03.388 -07:00] [INFO] [apply.rs:1476] ["add learner successfully"] [region="Region { id: 34, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 55, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 3, 128, 0, 0, 0, 255, 0, 0, 0, 108, 3, 128, 0, 0, 255, 0, 0, 0, 0, 0, 3, 128, 0, 255, 0, 0, 0, 0, 0, 3, 0, 0, 253], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 61, 0, 0, 0, 0, 0, 0, 0, 248], region_epoch: Some(RegionEpoch { conf_ver: 3, version: 12, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 35, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 332, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 395, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=332] [region_id=34]
[2019/05/01 12:36:03.396 -07:00] [INFO] [peer.rs:1318] ["notify pd with change peer region"] [region="Region { id: 34, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 55, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 3, 128, 0, 0, 0, 255, 0, 0, 0, 108, 3, 128, 0, 0, 255, 0, 0, 0, 0, 0, 3, 128, 0, 255, 0, 0, 0, 0, 0, 3, 0, 0, 253], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 61, 0, 0, 0, 0, 0, 0, 0, 248], region_epoch: Some(RegionEpoch { conf_ver: 4, version: 12, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 35, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 332, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 395, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=332] [region_id=34]
[2019/05/01 12:36:03.910 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="region Error { message: \"region epoch is not match\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: Some(EpochNotMatch { current_regions: [Region { id: 34, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 55, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 3, 128, 0, 0, 0, 255, 0, 0, 0, 108, 3, 128, 0, 0, 255, 0, 0, 0, 0, 0, 3, 128, 0, 255, 0, 0, 0, 0, 0, 3, 0, 0, 253], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 61, 0, 0, 0, 0, 0, 0, 0, 248], region_epoch: Some(RegionEpoch { conf_ver: 4, version: 12, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 35, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 332, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 395, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Region { id: 390, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 55, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 55, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 3, 128, 0, 0, 0, 255, 0, 0, 0, 108, 3, 128, 0, 0, 255, 0, 0, 0, 0, 0, 3, 128, 0, 255, 0, 0, 0, 0, 0, 3, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 4, version: 12, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 391, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 392, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 394, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), server_is_busy: None, stale_command: None, store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:03.942 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=396] [region_id=38]
[2019/05/01 12:36:03.942 -07:00] [INFO] [unknown:719] ["[region 38] 396 became follower at term 0"]
[2019/05/01 12:36:03.942 -07:00] [INFO] [unknown:295] ["[region 38] 396 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:36:03.942 -07:00] [INFO] [unknown:719] ["[region 38] 396 became follower at term 1"]
[2019/05/01 12:36:03.942 -07:00] [INFO] [unknown:920] ["[region 38] 396 [term: 1] received a MsgHeartbeat message with higher term from 334 [term: 7]"]
[2019/05/01 12:36:03.942 -07:00] [INFO] [unknown:719] ["[region 38] 396 became follower at term 7"]
[2019/05/01 12:36:04.002 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 385, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=10] [term=6] [peer_id=385] [region_id=46]
[2019/05/01 12:36:04.002 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 4, version: 17, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=385] [region_id=46]
[2019/05/01 12:36:04.002 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 46, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 89, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 95, 0, 0, 0, 0, 0, 0, 0, 248], region_epoch: Some(RegionEpoch { conf_ver: 4, version: 17, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 47, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 380, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 385, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 385, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=385] [region_id=46]
[2019/05/01 12:36:04.258 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 388, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=10] [term=6] [peer_id=383] [region_id=214]
[2019/05/01 12:36:04.259 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 4, version: 20, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=383] [region_id=214]
[2019/05/01 12:36:04.259 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 214, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 105, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 105, 95, 114, 128, 0, 0, 0, 0, 255, 0, 0, 3, 0, 0, 0, 0, 0, 250], region_epoch: Some(RegionEpoch { conf_ver: 4, version: 20, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 215, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 383, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 388, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 388, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=383] [region_id=214]
[2019/05/01 12:36:04.259 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 387, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=10] [term=6] [peer_id=381] [region_id=56]
[2019/05/01 12:36:04.259 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 4, version: 18, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=381] [region_id=56]
[2019/05/01 12:36:04.259 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 56, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 95, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 105, 0, 0, 0, 0, 0, 0, 0, 248], region_epoch: Some(RegionEpoch { conf_ver: 4, version: 18, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 57, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 381, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 387, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 387, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=381] [region_id=56]
[2019/05/01 12:36:04.299 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="region Error { message: \"region epoch is not match\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: Some(EpochNotMatch { current_regions: [Region { id: 34, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 55, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 3, 128, 0, 0, 0, 255, 0, 0, 0, 108, 3, 128, 0, 0, 255, 0, 0, 0, 0, 0, 3, 128, 0, 255, 0, 0, 0, 0, 0, 3, 0, 0, 253], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 61, 0, 0, 0, 0, 0, 0, 0, 248], region_epoch: Some(RegionEpoch { conf_ver: 4, version: 12, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 35, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 332, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 395, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Region { id: 390, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 55, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 55, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 3, 128, 0, 0, 0, 255, 0, 0, 0, 108, 3, 128, 0, 0, 255, 0, 0, 0, 0, 0, 3, 128, 0, 255, 0, 0, 0, 0, 0, 3, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 4, version: 12, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 391, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 392, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 394, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), server_is_busy: None, stale_command: None, store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:04.648 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="region Error { message: \"region epoch is not match\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: Some(EpochNotMatch { current_regions: [Region { id: 34, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 55, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 3, 128, 0, 0, 0, 255, 0, 0, 0, 108, 3, 128, 0, 0, 255, 0, 0, 0, 0, 0, 3, 128, 0, 255, 0, 0, 0, 0, 0, 3, 0, 0, 253], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 61, 0, 0, 0, 0, 0, 0, 0, 248], region_epoch: Some(RegionEpoch { conf_ver: 4, version: 12, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 35, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 332, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 395, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Region { id: 390, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 55, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 55, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 3, 128, 0, 0, 0, 255, 0, 0, 0, 108, 3, 128, 0, 0, 255, 0, 0, 0, 0, 0, 3, 128, 0, 255, 0, 0, 0, 0, 0, 3, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 4, version: 12, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 391, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 392, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 394, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), server_is_busy: None, stale_command: None, store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:04.753 -07:00] [INFO] [unknown:920] ["[region 40] 335 [term: 6] received a MsgRequestVote message with higher term from 382 [term: 7]"]
[2019/05/01 12:36:04.753 -07:00] [INFO] [unknown:719] ["[region 40] 335 became follower at term 7"]
[2019/05/01 12:36:04.753 -07:00] [INFO] [unknown:1083] ["[region 40] 335 [logterm: 6, index: 10, vote: 0] cast MsgRequestVote for 382 [logterm: 6, index: 10] at term 7"]
[2019/05/01 12:36:04.820 -07:00] [INFO] [unknown:920] ["[region 46] 385 [term: 6] received a MsgRequestVote message with higher term from 380 [term: 7]"]
[2019/05/01 12:36:04.820 -07:00] [INFO] [unknown:719] ["[region 46] 385 became follower at term 7"]
[2019/05/01 12:36:04.820 -07:00] [INFO] [unknown:1083] ["[region 46] 385 [logterm: 6, index: 10, vote: 0] cast MsgRequestVote for 380 [logterm: 6, index: 10] at term 7"]
[2019/05/01 12:36:04.939 -07:00] [INFO] [peer_storage.rs:759] ["requesting snapshot"] [peer_id=332] [region_id=34]
[2019/05/01 12:36:04.939 -07:00] [INFO] [snap.rs:757] ["scan snapshot of one cf"] [size=0] [key_count=0] [cf=default] [snapshot=/opt/tidb/data/kv/snap/gen_34_7_13_(default|lock|write).sst] [region_id=34]
[2019/05/01 12:36:04.939 -07:00] [INFO] [snap.rs:757] ["scan snapshot of one cf"] [size=0] [key_count=0] [cf=lock] [snapshot=/opt/tidb/data/kv/snap/gen_34_7_13_(default|lock|write).sst] [region_id=34]
[2019/05/01 12:36:04.939 -07:00] [INFO] [snap.rs:757] ["scan snapshot of one cf"] [size=407] [key_count=4] [cf=write] [snapshot=/opt/tidb/data/kv/snap/gen_34_7_13_(default|lock|write).sst] [region_id=34]
[2019/05/01 12:36:04.971 -07:00] [INFO] [snap.rs:875] ["scan snapshot"] [takes=31.223759ms] [size=1497] [key_count=4] [snapshot=/opt/tidb/data/kv/snap/gen_34_7_13_(default|lock|write).sst] [region_id=34]
[2019/05/01 12:36:04.995 -07:00] [INFO] [peer_storage.rs:759] ["requesting snapshot"] [peer_id=392] [region_id=390]
[2019/05/01 12:36:04.995 -07:00] [INFO] [snap.rs:757] ["scan snapshot of one cf"] [size=0] [key_count=0] [cf=default] [snapshot=/opt/tidb/data/kv/snap/gen_390_6_7_(default|lock|write).sst] [region_id=390]
[2019/05/01 12:36:04.995 -07:00] [INFO] [snap.rs:757] ["scan snapshot of one cf"] [size=0] [key_count=0] [cf=lock] [snapshot=/opt/tidb/data/kv/snap/gen_390_6_7_(default|lock|write).sst] [region_id=390]
[2019/05/01 12:36:04.995 -07:00] [INFO] [snap.rs:757] ["scan snapshot of one cf"] [size=166] [key_count=2] [cf=write] [snapshot=/opt/tidb/data/kv/snap/gen_390_6_7_(default|lock|write).sst] [region_id=390]
[2019/05/01 12:36:05.016 -07:00] [INFO] [snap.rs:875] ["scan snapshot"] [takes=21.263264ms] [size=1461] [key_count=2] [snapshot=/opt/tidb/data/kv/snap/gen_390_6_7_(default|lock|write).sst] [region_id=390]
[2019/05/01 12:36:05.196 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="region Error { message: \"region epoch is not match\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: Some(EpochNotMatch { current_regions: [Region { id: 34, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 55, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 3, 128, 0, 0, 0, 255, 0, 0, 0, 108, 3, 128, 0, 0, 255, 0, 0, 0, 0, 0, 3, 128, 0, 255, 0, 0, 0, 0, 0, 3, 0, 0, 253], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 61, 0, 0, 0, 0, 0, 0, 0, 248], region_epoch: Some(RegionEpoch { conf_ver: 4, version: 12, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 35, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 332, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 395, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Region { id: 390, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 55, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 55, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 3, 128, 0, 0, 0, 255, 0, 0, 0, 108, 3, 128, 0, 0, 255, 0, 0, 0, 0, 0, 3, 128, 0, 255, 0, 0, 0, 0, 0, 3, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 4, version: 12, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 391, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 392, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 394, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), server_is_busy: None, stale_command: None, store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:05.216 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_94_6_10_(default|lock|write).sst] [snap_key=94_6_10]
[2019/05/01 12:36:05.219 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 393, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=2568] [term=6] [peer_id=386] [region_id=4]
[2019/05/01 12:36:05.219 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 4, version: 19, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=386] [region_id=4]
[2019/05/01 12:36:05.219 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 4, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 108, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [], region_epoch: Some(RegionEpoch { conf_ver: 4, version: 19, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 5, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 386, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 393, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 393, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=386] [region_id=4]
[2019/05/01 12:36:05.230 -07:00] [INFO] [unknown:1792] ["[region 94] 389 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 10, term: 6]"]
[2019/05/01 12:36:05.230 -07:00] [INFO] [unknown:1816] ["[region 94] 389 restored progress of 95 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:36:05.230 -07:00] [INFO] [unknown:1816] ["[region 94] 389 restored progress of 384 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:36:05.230 -07:00] [INFO] [unknown:1816] ["[region 94] 389 restored progress of 389 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:36:05.230 -07:00] [INFO] [unknown:474] ["[region 94] 389 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 10, term: 6]"]
[2019/05/01 12:36:05.230 -07:00] [INFO] [unknown:1736] ["[region 94] 389 [commit: 10] restored snapshot [index: 10, term: 6]"]
[2019/05/01 12:36:05.230 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=389] [region_id=94]
[2019/05/01 12:36:05.230 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 10, truncated_state: Some(RaftTruncatedState { index: 10, term: 6, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 94, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 105, 95, 114, 128, 0, 0, 0, 0, 255, 0, 0, 3, 0, 0, 0, 0, 0, 250], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 108, 0, 0, 0, 0, 0, 0, 0, 248], region_epoch: Some(RegionEpoch { conf_ver: 4, version: 20, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 95, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 384, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 389, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=389] [region_id=94]
[2019/05/01 12:36:05.301 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=94]
[2019/05/01 12:36:05.301 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 94] 389"]
[2019/05/01 12:36:05.301 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 94, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 105, 95, 114, 128, 0, 0, 0, 0, 255, 0, 0, 3, 0, 0, 0, 0, 0, 250], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 108, 0, 0, 0, 0, 0, 0, 0, 248], region_epoch: Some(RegionEpoch { conf_ver: 4, version: 20, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 95, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 384, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 389, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=389] [region_id=94]
[2019/05/01 12:36:05.348 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=46.7849ms] [region_id=94]
[2019/05/01 12:36:05.448 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="region Error { message: \"region epoch is not match\", not_leader: None, region_not_found: None, key_not_in_region: None, epoch_not_match: Some(EpochNotMatch { current_regions: [Region { id: 34, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 55, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 3, 128, 0, 0, 0, 255, 0, 0, 0, 108, 3, 128, 0, 0, 255, 0, 0, 0, 0, 0, 3, 128, 0, 255, 0, 0, 0, 0, 0, 3, 0, 0, 253], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 61, 0, 0, 0, 0, 0, 0, 0, 248], region_epoch: Some(RegionEpoch { conf_ver: 4, version: 12, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 35, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 332, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 395, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Region { id: 390, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 55, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 55, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 3, 128, 0, 0, 0, 255, 0, 0, 0, 108, 3, 128, 0, 0, 255, 0, 0, 0, 0, 0, 3, 128, 0, 255, 0, 0, 0, 0, 0, 3, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 4, version: 12, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 391, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 392, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 394, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), server_is_busy: None, stale_command: None, store_not_match: None, raft_entry_too_large: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:36:05.951 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_38_7_10_(default|lock|write).sst] [snap_key=38_7_10]
[2019/05/01 12:36:05.976 -07:00] [INFO] [unknown:1792] ["[region 38] 396 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 10, term: 7]"]
[2019/05/01 12:36:05.976 -07:00] [INFO] [unknown:1816] ["[region 38] 396 restored progress of 39 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:36:05.976 -07:00] [INFO] [unknown:1816] ["[region 38] 396 restored progress of 334 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:36:05.976 -07:00] [INFO] [unknown:1816] ["[region 38] 396 restored progress of 396 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:36:05.976 -07:00] [INFO] [unknown:474] ["[region 38] 396 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 10, term: 7]"]
[2019/05/01 12:36:05.976 -07:00] [INFO] [unknown:1736] ["[region 38] 396 [commit: 10] restored snapshot [index: 10, term: 7]"]
[2019/05/01 12:36:05.976 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=396] [region_id=38]
[2019/05/01 12:36:05.976 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 10, truncated_state: Some(RaftTruncatedState { index: 10, term: 7, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 38, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 68, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 73, 0, 0, 0, 0, 0, 0, 0, 248], region_epoch: Some(RegionEpoch { conf_ver: 4, version: 13, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 39, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 334, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 396, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=396] [region_id=38]
[2019/05/01 12:36:06.033 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=38]
[2019/05/01 12:36:06.033 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 38, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 68, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 73, 0, 0, 0, 0, 0, 0, 0, 248], region_epoch: Some(RegionEpoch { conf_ver: 4, version: 13, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 39, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 334, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 396, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=396] [region_id=38]
[2019/05/01 12:36:06.033 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 38] 396"]
[2019/05/01 12:36:06.033 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=27.923µs] [region_id=38]
[2019/05/01 12:36:06.277 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 389, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=11] [term=6] [peer_id=389] [region_id=94]
[2019/05/01 12:36:06.278 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 4, version: 20, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=389] [region_id=94]
[2019/05/01 12:36:06.278 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 94, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 105, 95, 114, 128, 0, 0, 0, 0, 255, 0, 0, 3, 0, 0, 0, 0, 0, 250], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 108, 0, 0, 0, 0, 0, 0, 0, 248], region_epoch: Some(RegionEpoch { conf_ver: 4, version: 20, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 95, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 384, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 389, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 389, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=389] [region_id=94]
[2019/05/01 12:36:06.813 -07:00] [INFO] [unknown:1625] ["[region 44] 377 [term 6] received MsgTimeoutNow from 45 and starts an election to get leadership."]
[2019/05/01 12:36:06.813 -07:00] [INFO] [unknown:739] ["[region 44] 377 became candidate at term 7"]
[2019/05/01 12:36:06.813 -07:00] [INFO] [unknown:854] ["[region 44] 377 received MsgRequestVoteResponse from 377 at term 7"]
[2019/05/01 12:36:06.813 -07:00] [INFO] [unknown:828] ["[region 44] 377 [logterm: 6, index: 8] sent MsgRequestVote request to 45 at term 7"]
[2019/05/01 12:36:06.871 -07:00] [INFO] [unknown:854] ["[region 44] 377 received MsgRequestVoteResponse from 45 at term 7"]
[2019/05/01 12:36:06.871 -07:00] [INFO] [unknown:1550] ["[region 44] 377 [quorum:2] has received 2 MsgRequestVoteResponse votes and 0 vote rejections"]
[2019/05/01 12:36:06.871 -07:00] [INFO] [unknown:789] ["[region 44] 377 became leader at term 7"]
[2019/05/01 12:36:06.937 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=437] [region_id=42]
[2019/05/01 12:36:06.937 -07:00] [INFO] [unknown:719] ["[region 42] 437 became follower at term 0"]
[2019/05/01 12:36:06.937 -07:00] [INFO] [unknown:295] ["[region 42] 437 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:36:06.937 -07:00] [INFO] [unknown:719] ["[region 42] 437 became follower at term 1"]
[2019/05/01 12:36:06.937 -07:00] [INFO] [unknown:920] ["[region 42] 437 [term: 1] received a MsgHeartbeat message with higher term from 336 [term: 7]"]
[2019/05/01 12:36:06.937 -07:00] [INFO] [unknown:719] ["[region 42] 437 became follower at term 7"]
[2019/05/01 12:36:06.951 -07:00] [INFO] [unknown:841] ["New connected subchannel at 0x7f041f817b70 for subchannel 0x7f04cf841800"]
[2019/05/01 12:36:06.958 -07:00] [INFO] [pd.rs:558] ["try to change peer"] [peer="Peer { id: 438, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [change_type=AddLearnerNode] [region_id=44]
[2019/05/01 12:36:06.960 -07:00] [INFO] [peer.rs:1953] ["propose conf change peer"] [change_peer=438] [change_type=AddLearnerNode] [peer_id=377] [region_id=44]
[2019/05/01 12:36:06.973 -07:00] [INFO] [snap.rs:389] ["sent snapshot"] [duration=22.976366ms] [size=1497] [snap_key=34_7_13] [region_id=34]
[2019/05/01 12:36:06.982 -07:00] [INFO] [peer.rs:538] ["report snapshot status"] [status=Finish] [to="Peer { id: 395, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=332] [region_id=34]
[2019/05/01 12:36:07.016 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 396, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=11] [term=7] [peer_id=396] [region_id=38]
[2019/05/01 12:36:07.016 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 4, version: 13, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=396] [region_id=38]
[2019/05/01 12:36:07.016 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 38, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 68, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 73, 0, 0, 0, 0, 0, 0, 0, 248], region_epoch: Some(RegionEpoch { conf_ver: 4, version: 13, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 39, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 334, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 396, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 396, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=396] [region_id=38]
[2019/05/01 12:36:07.017 -07:00] [INFO] [unknown:841] ["New connected subchannel at 0x7f04cf815110 for subchannel 0x7f04cf841a00"]
[2019/05/01 12:36:07.038 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddLearnerNode, peer: Some(Peer { id: 438, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=10] [term=7] [peer_id=377] [region_id=44]
[2019/05/01 12:36:07.038 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 3, version: 16, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddLearner] [peer_id=377] [region_id=44]
[2019/05/01 12:36:07.038 -07:00] [INFO] [apply.rs:1476] ["add learner successfully"] [region="Region { id: 44, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 83, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 89, 0, 0, 0, 0, 0, 0, 0, 248], region_epoch: Some(RegionEpoch { conf_ver: 3, version: 16, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 45, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 377, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 438, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=377] [region_id=44]
[2019/05/01 12:36:07.038 -07:00] [INFO] [snap.rs:389] ["sent snapshot"] [duration=22.129439ms] [size=1461] [snap_key=390_6_7] [region_id=390]
[2019/05/01 12:36:07.038 -07:00] [INFO] [peer.rs:538] ["report snapshot status"] [status=Finish] [to="Peer { id: 394, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=392] [region_id=390]
[2019/05/01 12:36:07.061 -07:00] [INFO] [peer.rs:1318] ["notify pd with change peer region"] [region="Region { id: 44, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 83, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 89, 0, 0, 0, 0, 0, 0, 0, 248], region_epoch: Some(RegionEpoch { conf_ver: 4, version: 16, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 45, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 377, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 438, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=377] [region_id=44]
[2019/05/01 12:36:07.942 -07:00] [INFO] [pd.rs:558] ["try to change peer"] [peer="Peer { id: 395, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [change_type=AddNode] [region_id=34]
[2019/05/01 12:36:07.942 -07:00] [INFO] [peer.rs:1953] ["propose conf change peer"] [change_peer=395] [change_type=AddNode] [peer_id=332] [region_id=34]
[2019/05/01 12:36:08.004 -07:00] [INFO] [peer_storage.rs:759] ["requesting snapshot"] [peer_id=377] [region_id=44]
[2019/05/01 12:36:08.004 -07:00] [INFO] [snap.rs:757] ["scan snapshot of one cf"] [size=0] [key_count=0] [cf=default] [snapshot=/opt/tidb/data/kv/snap/gen_44_7_10_(default|lock|write).sst] [region_id=44]
[2019/05/01 12:36:08.004 -07:00] [INFO] [snap.rs:757] ["scan snapshot of one cf"] [size=0] [key_count=0] [cf=lock] [snapshot=/opt/tidb/data/kv/snap/gen_44_7_10_(default|lock|write).sst] [region_id=44]
[2019/05/01 12:36:08.004 -07:00] [INFO] [snap.rs:757] ["scan snapshot of one cf"] [size=0] [key_count=0] [cf=write] [snapshot=/opt/tidb/data/kv/snap/gen_44_7_10_(default|lock|write).sst] [region_id=44]
[2019/05/01 12:36:08.004 -07:00] [INFO] [snap.rs:875] ["scan snapshot"] [takes=274.831µs] [size=0] [key_count=0] [snapshot=/opt/tidb/data/kv/snap/gen_44_7_10_(default|lock|write).sst] [region_id=44]
[2019/05/01 12:36:08.006 -07:00] [INFO] [pd.rs:558] ["try to change peer"] [peer="Peer { id: 394, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [change_type=AddNode] [region_id=390]
[2019/05/01 12:36:08.006 -07:00] [INFO] [peer.rs:1953] ["propose conf change peer"] [change_peer=394] [change_type=AddNode] [peer_id=392] [region_id=390]
[2019/05/01 12:36:08.030 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 395, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=14] [term=7] [peer_id=332] [region_id=34]
[2019/05/01 12:36:08.030 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 4, version: 12, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=332] [region_id=34]
[2019/05/01 12:36:08.030 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 34, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 55, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 3, 128, 0, 0, 0, 255, 0, 0, 0, 108, 3, 128, 0, 0, 255, 0, 0, 0, 0, 0, 3, 128, 0, 255, 0, 0, 0, 0, 0, 3, 0, 0, 253], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 61, 0, 0, 0, 0, 0, 0, 0, 248], region_epoch: Some(RegionEpoch { conf_ver: 4, version: 12, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 35, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 332, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 395, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 395, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=332] [region_id=34]
[2019/05/01 12:36:08.054 -07:00] [INFO] [peer.rs:1318] ["notify pd with change peer region"] [region="Region { id: 34, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 55, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 3, 128, 0, 0, 0, 255, 0, 0, 0, 108, 3, 128, 0, 0, 255, 0, 0, 0, 0, 0, 3, 128, 0, 255, 0, 0, 0, 0, 0, 3, 0, 0, 253], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 61, 0, 0, 0, 0, 0, 0, 0, 248], region_epoch: Some(RegionEpoch { conf_ver: 5, version: 12, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 35, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 332, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 395, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=332] [region_id=34]
[2019/05/01 12:36:08.085 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 394, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=8] [term=6] [peer_id=392] [region_id=390]
[2019/05/01 12:36:08.085 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 4, version: 12, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=392] [region_id=390]
[2019/05/01 12:36:08.085 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 390, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 55, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 55, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 3, 128, 0, 0, 0, 255, 0, 0, 0, 108, 3, 128, 0, 0, 255, 0, 0, 0, 0, 0, 3, 128, 0, 255, 0, 0, 0, 0, 0, 3, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 4, version: 12, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 391, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 392, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 394, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 394, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=392] [region_id=390]
[2019/05/01 12:36:08.097 -07:00] [INFO] [peer.rs:1318] ["notify pd with change peer region"] [region="Region { id: 390, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 55, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 55, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 3, 128, 0, 0, 0, 255, 0, 0, 0, 108, 3, 128, 0, 0, 255, 0, 0, 0, 0, 0, 3, 128, 0, 255, 0, 0, 0, 0, 0, 3, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 5, version: 12, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 391, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 392, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 394, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=392] [region_id=390]
[2019/05/01 12:36:08.738 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=439] [region_id=373]
[2019/05/01 12:36:08.738 -07:00] [INFO] [unknown:719] ["[region 373] 439 became follower at term 0"]
[2019/05/01 12:36:08.738 -07:00] [INFO] [unknown:295] ["[region 373] 439 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:36:08.738 -07:00] [INFO] [unknown:719] ["[region 373] 439 became follower at term 1"]
[2019/05/01 12:36:08.738 -07:00] [INFO] [unknown:920] ["[region 373] 439 [term: 1] received a MsgHeartbeat message with higher term from 376 [term: 7]"]
[2019/05/01 12:36:08.738 -07:00] [INFO] [unknown:719] ["[region 373] 439 became follower at term 7"]
[2019/05/01 12:36:08.941 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_42_7_10_(default|lock|write).sst] [snap_key=42_7_10]
[2019/05/01 12:36:08.946 -07:00] [INFO] [unknown:1792] ["[region 42] 437 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 10, term: 7]"]
[2019/05/01 12:36:08.946 -07:00] [INFO] [unknown:1816] ["[region 42] 437 restored progress of 43 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:36:08.946 -07:00] [INFO] [unknown:1816] ["[region 42] 437 restored progress of 336 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:36:08.946 -07:00] [INFO] [unknown:1816] ["[region 42] 437 restored progress of 437 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:36:08.946 -07:00] [INFO] [unknown:474] ["[region 42] 437 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 10, term: 7]"]
[2019/05/01 12:36:08.946 -07:00] [INFO] [unknown:1736] ["[region 42] 437 [commit: 10] restored snapshot [index: 10, term: 7]"]
[2019/05/01 12:36:08.946 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=437] [region_id=42]
[2019/05/01 12:36:08.946 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 10, truncated_state: Some(RaftTruncatedState { index: 10, term: 7, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 42, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 79, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 83, 0, 0, 0, 0, 0, 0, 0, 248], region_epoch: Some(RegionEpoch { conf_ver: 4, version: 15, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 43, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 336, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 437, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=437] [region_id=42]
[2019/05/01 12:36:08.962 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 42, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 79, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 83, 0, 0, 0, 0, 0, 0, 0, 248], region_epoch: Some(RegionEpoch { conf_ver: 4, version: 15, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 43, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 336, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 437, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=437] [region_id=42]
[2019/05/01 12:36:08.962 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 42] 437"]
[2019/05/01 12:36:08.962 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=42]
[2019/05/01 12:36:08.962 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=26.722µs] [region_id=42]
[2019/05/01 12:36:09.973 -07:00] [INFO] [unknown:841] ["New connected subchannel at 0x7f041ea01f00 for subchannel 0x7f04cf841c00"]
[2019/05/01 12:36:09.987 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 437, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=11] [term=7] [peer_id=437] [region_id=42]
[2019/05/01 12:36:09.987 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 4, version: 15, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=437] [region_id=42]
[2019/05/01 12:36:09.987 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 42, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 79, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 83, 0, 0, 0, 0, 0, 0, 0, 248], region_epoch: Some(RegionEpoch { conf_ver: 4, version: 15, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 43, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 336, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 437, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 437, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=437] [region_id=42]
[2019/05/01 12:36:09.987 -07:00] [INFO] [snap.rs:389] ["sent snapshot"] [duration=15.022483ms] [size=0] [snap_key=44_7_10] [region_id=44]
[2019/05/01 12:36:09.987 -07:00] [INFO] [peer.rs:538] ["report snapshot status"] [status=Finish] [to="Peer { id: 438, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=377] [region_id=44]
[2019/05/01 12:36:10.753 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_373_7_8_(default|lock|write).sst] [snap_key=373_7_8]
[2019/05/01 12:36:10.773 -07:00] [INFO] [unknown:1792] ["[region 373] 439 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 8, term: 7]"]
[2019/05/01 12:36:10.773 -07:00] [INFO] [unknown:1816] ["[region 373] 439 restored progress of 374 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:36:10.773 -07:00] [INFO] [unknown:1816] ["[region 373] 439 restored progress of 375 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:36:10.773 -07:00] [INFO] [unknown:1816] ["[region 373] 439 restored progress of 376 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:36:10.773 -07:00] [INFO] [unknown:1816] ["[region 373] 439 restored progress of 439 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:36:10.773 -07:00] [INFO] [unknown:474] ["[region 373] 439 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 8, term: 7]"]
[2019/05/01 12:36:10.773 -07:00] [INFO] [unknown:1736] ["[region 373] 439 [commit: 8] restored snapshot [index: 8, term: 7]"]
[2019/05/01 12:36:10.773 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=439] [region_id=373]
[2019/05/01 12:36:10.773 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 8, truncated_state: Some(RaftTruncatedState { index: 8, term: 7, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 373, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 99, 104, 97, 114, 255, 97, 99, 116, 101, 255, 114, 95, 115, 255, 101, 116, 95, 114, 101, 255, 115, 117, 255, 108, 116, 115, 0, 0, 0, 252, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 99, 104, 97, 114, 255, 97, 99, 116, 101, 255, 114, 95, 115, 255, 101, 116, 95, 115, 101, 255, 114, 118, 255, 101, 114, 0, 0, 0, 0, 251, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 37, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 374, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 375, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 376, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 439, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=439] [region_id=373]
[2019/05/01 12:36:10.825 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 373] 439"]
[2019/05/01 12:36:10.825 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=373]
[2019/05/01 12:36:10.825 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 373, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 99, 104, 97, 114, 255, 97, 99, 116, 101, 255, 114, 95, 115, 255, 101, 116, 95, 114, 101, 255, 115, 117, 255, 108, 116, 115, 0, 0, 0, 252, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 99, 104, 97, 114, 255, 97, 99, 116, 101, 255, 114, 95, 115, 255, 101, 116, 95, 115, 101, 255, 114, 118, 255, 101, 114, 0, 0, 0, 0, 251, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 37, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 374, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 375, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 376, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 439, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=439] [region_id=373]
[2019/05/01 12:36:10.848 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddLearnerNode, peer: Some(Peer { id: 441, store_id: 3, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=12] [term=7] [peer_id=437] [region_id=42]
[2019/05/01 12:36:10.848 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 5, version: 15, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddLearner] [peer_id=437] [region_id=42]
[2019/05/01 12:36:10.848 -07:00] [INFO] [apply.rs:1476] ["add learner successfully"] [region="Region { id: 42, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 79, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 83, 0, 0, 0, 0, 0, 0, 0, 248], region_epoch: Some(RegionEpoch { conf_ver: 5, version: 15, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 43, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 336, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 437, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 441, store_id: 3, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=437] [region_id=42]
[2019/05/01 12:36:10.901 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=76.123306ms] [region_id=373]
[2019/05/01 12:36:10.983 -07:00] [INFO] [pd.rs:558] ["try to change peer"] [peer="Peer { id: 438, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [change_type=AddNode] [region_id=44]
[2019/05/01 12:36:10.983 -07:00] [INFO] [peer.rs:1953] ["propose conf change peer"] [change_peer=438] [change_type=AddNode] [peer_id=377] [region_id=44]
[2019/05/01 12:36:11.040 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 438, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=11] [term=7] [peer_id=377] [region_id=44]
[2019/05/01 12:36:11.040 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 4, version: 16, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=377] [region_id=44]
[2019/05/01 12:36:11.040 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 44, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 83, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 89, 0, 0, 0, 0, 0, 0, 0, 248], region_epoch: Some(RegionEpoch { conf_ver: 4, version: 16, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 45, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 377, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 438, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 438, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=377] [region_id=44]
[2019/05/01 12:36:11.052 -07:00] [INFO] [peer.rs:1318] ["notify pd with change peer region"] [region="Region { id: 44, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 83, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 89, 0, 0, 0, 0, 0, 0, 0, 248], region_epoch: Some(RegionEpoch { conf_ver: 5, version: 16, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 45, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 377, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 438, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=377] [region_id=44]
[2019/05/01 12:36:11.193 -07:00] [INFO] [unknown:920] ["[region 56] 381 [term: 6] received a MsgRequestVote message with higher term from 387 [term: 7]"]
[2019/05/01 12:36:11.193 -07:00] [INFO] [unknown:719] ["[region 56] 381 became follower at term 7"]
[2019/05/01 12:36:11.193 -07:00] [INFO] [unknown:1083] ["[region 56] 381 [logterm: 6, index: 10, vote: 0] cast MsgRequestVote for 387 [logterm: 6, index: 10] at term 7"]
[2019/05/01 12:36:11.799 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 439, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=9] [term=7] [peer_id=439] [region_id=373]
[2019/05/01 12:36:11.799 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 6, version: 37, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=439] [region_id=373]
[2019/05/01 12:36:11.799 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 373, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 99, 104, 97, 114, 255, 97, 99, 116, 101, 255, 114, 95, 115, 255, 101, 116, 95, 114, 101, 255, 115, 117, 255, 108, 116, 115, 0, 0, 0, 252, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 99, 104, 97, 114, 255, 97, 99, 116, 101, 255, 114, 95, 115, 255, 101, 116, 95, 115, 101, 255, 114, 118, 255, 101, 114, 0, 0, 0, 0, 251, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 37, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 374, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 375, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 376, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 439, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 439, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=439] [region_id=373]
[2019/05/01 12:36:11.977 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 374, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=10] [term=7] [peer_id=439] [region_id=373]
[2019/05/01 12:36:11.977 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 7, version: 37, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=439] [region_id=373]
[2019/05/01 12:36:11.977 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 373, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 99, 104, 97, 114, 255, 97, 99, 116, 101, 255, 114, 95, 115, 255, 101, 116, 95, 114, 101, 255, 115, 117, 255, 108, 116, 115, 0, 0, 0, 252, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 99, 104, 97, 114, 255, 97, 99, 116, 101, 255, 114, 95, 115, 255, 101, 116, 95, 115, 101, 255, 114, 118, 255, 101, 114, 0, 0, 0, 0, 251, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 7, version: 37, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 374, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 375, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 376, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 439, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 374, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=439] [region_id=373]
[2019/05/01 12:36:11.983 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=440] [region_id=138]
[2019/05/01 12:36:11.983 -07:00] [INFO] [unknown:719] ["[region 138] 440 became follower at term 0"]
[2019/05/01 12:36:11.983 -07:00] [INFO] [unknown:295] ["[region 138] 440 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:36:11.983 -07:00] [INFO] [unknown:719] ["[region 138] 440 became follower at term 1"]
[2019/05/01 12:36:11.983 -07:00] [INFO] [unknown:920] ["[region 138] 440 [term: 1] received a MsgHeartbeat message with higher term from 140 [term: 7]"]
[2019/05/01 12:36:11.983 -07:00] [INFO] [unknown:719] ["[region 138] 440 became follower at term 7"]
[2019/05/01 12:36:12.022 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddLearnerNode, peer: Some(Peer { id: 443, store_id: 3, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=12] [term=7] [peer_id=335] [region_id=40]
[2019/05/01 12:36:12.022 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 5, version: 14, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddLearner] [peer_id=335] [region_id=40]
[2019/05/01 12:36:12.022 -07:00] [INFO] [apply.rs:1476] ["add learner successfully"] [region="Region { id: 40, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 73, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 79, 0, 0, 0, 0, 0, 0, 0, 248], region_epoch: Some(RegionEpoch { conf_ver: 5, version: 14, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 41, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 335, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 382, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 443, store_id: 3, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=335] [region_id=40]
[2019/05/01 12:36:12.914 -07:00] [INFO] [keys.rs:155] ["approximate keys over threshold, need to do split check"] [threshold=5] [keys=5] [region_id=34]
[2019/05/01 12:36:13.988 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 441, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=13] [term=7] [peer_id=437] [region_id=42]
[2019/05/01 12:36:13.989 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 6, version: 15, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=437] [region_id=42]
[2019/05/01 12:36:13.989 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 42, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 79, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 83, 0, 0, 0, 0, 0, 0, 0, 248], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 15, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 43, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 336, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 437, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 441, store_id: 3, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 441, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=437] [region_id=42]
[2019/05/01 12:36:13.990 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_138_7_11_(default|lock|write).sst] [snap_key=138_7_11]
[2019/05/01 12:36:14.005 -07:00] [INFO] [unknown:1792] ["[region 138] 440 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 11, term: 7]"]
[2019/05/01 12:36:14.005 -07:00] [INFO] [unknown:1816] ["[region 138] 440 restored progress of 139 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:36:14.005 -07:00] [INFO] [unknown:1816] ["[region 138] 440 restored progress of 140 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:36:14.005 -07:00] [INFO] [unknown:1816] ["[region 138] 440 restored progress of 316 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:36:14.005 -07:00] [INFO] [unknown:1816] ["[region 138] 440 restored progress of 440 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:36:14.005 -07:00] [INFO] [unknown:474] ["[region 138] 440 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 11, term: 7]"]
[2019/05/01 12:36:14.005 -07:00] [INFO] [unknown:1736] ["[region 138] 440 [commit: 11] restored snapshot [index: 11, term: 7]"]
[2019/05/01 12:36:14.005 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=440] [region_id=138]
[2019/05/01 12:36:14.005 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 11, truncated_state: Some(RaftTruncatedState { index: 11, term: 7, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 138, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 116, 105, 107, 118, 255, 95, 103, 99, 95, 255, 108, 101, 97, 255, 100, 101, 114, 95, 117, 255, 117, 105, 255, 100, 0, 0, 0, 0, 0, 250, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 116, 105, 107, 118, 255, 95, 103, 99, 95, 255, 114, 117, 110, 255, 95, 105, 110, 116, 101, 255, 114, 118, 255, 97, 108, 0, 0, 0, 0, 251, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 18, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 139, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 140, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 316, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 440, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=440] [region_id=138]
[2019/05/01 12:36:14.035 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 138, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 116, 105, 107, 118, 255, 95, 103, 99, 95, 255, 108, 101, 97, 255, 100, 101, 114, 95, 117, 255, 117, 105, 255, 100, 0, 0, 0, 0, 0, 250, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 116, 105, 107, 118, 255, 95, 103, 99, 95, 255, 114, 117, 110, 255, 95, 105, 110, 116, 101, 255, 114, 118, 255, 97, 108, 0, 0, 0, 0, 251, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 18, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 139, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 140, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 316, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 440, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=440] [region_id=138]
[2019/05/01 12:36:14.036 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 138] 440"]
[2019/05/01 12:36:14.036 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=138]
[2019/05/01 12:36:14.054 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=18.180405ms] [region_id=138]
[2019/05/01 12:36:14.096 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 43, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=14] [term=7] [peer_id=437] [region_id=42]
[2019/05/01 12:36:14.096 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 7, version: 15, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=437] [region_id=42]
[2019/05/01 12:36:14.096 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 42, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 79, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 83, 0, 0, 0, 0, 0, 0, 0, 248], region_epoch: Some(RegionEpoch { conf_ver: 7, version: 15, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 43, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 336, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 437, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 441, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 43, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=437] [region_id=42]
[2019/05/01 12:36:15.047 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 440, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=12] [term=7] [peer_id=440] [region_id=138]
[2019/05/01 12:36:15.047 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 6, version: 18, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=440] [region_id=138]
[2019/05/01 12:36:15.047 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 138, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 116, 105, 107, 118, 255, 95, 103, 99, 95, 255, 108, 101, 97, 255, 100, 101, 114, 95, 117, 255, 117, 105, 255, 100, 0, 0, 0, 0, 0, 250, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 116, 105, 107, 118, 255, 95, 103, 99, 95, 255, 114, 117, 110, 255, 95, 105, 110, 116, 101, 255, 114, 118, 255, 97, 108, 0, 0, 0, 0, 251, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 18, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 139, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 140, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 316, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 440, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 440, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=440] [region_id=138]
[2019/05/01 12:36:15.157 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 139, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=13] [term=7] [peer_id=440] [region_id=138]
[2019/05/01 12:36:15.157 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 7, version: 18, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=440] [region_id=138]
[2019/05/01 12:36:15.157 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 138, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 116, 105, 107, 118, 255, 95, 103, 99, 95, 255, 108, 101, 97, 255, 100, 101, 114, 95, 117, 255, 117, 105, 255, 100, 0, 0, 0, 0, 0, 250, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 116, 105, 107, 118, 255, 95, 103, 99, 95, 255, 114, 117, 110, 255, 95, 105, 110, 116, 101, 255, 114, 118, 255, 97, 108, 0, 0, 0, 0, 251, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 7, version: 18, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 139, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 140, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 316, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 440, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 139, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=440] [region_id=138]
[2019/05/01 12:36:15.213 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddLearnerNode, peer: Some(Peer { id: 485, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=11] [term=7] [peer_id=259] [region_id=120]
[2019/05/01 12:36:15.213 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 5, version: 17, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddLearner] [peer_id=259] [region_id=120]
[2019/05/01 12:36:15.213 -07:00] [INFO] [apply.rs:1476] ["add learner successfully"] [region="Region { id: 120, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 100, 255, 95, 97, 100, 100, 255, 114, 101, 115, 255, 115, 0, 0, 0, 0, 251, 0, 0, 253], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 95, 99, 255, 97, 99, 104, 255, 101, 95, 115, 105, 122, 255, 101, 0, 255, 0, 0, 0, 0, 0, 0, 248, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 5, version: 17, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 121, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 122, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 259, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 485, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=259] [region_id=120]
[2019/05/01 12:36:15.462 -07:00] [INFO] [unknown:1625] ["[region 214] 383 [term 6] received MsgTimeoutNow from 215 and starts an election to get leadership."]
[2019/05/01 12:36:15.462 -07:00] [INFO] [unknown:739] ["[region 214] 383 became candidate at term 7"]
[2019/05/01 12:36:15.462 -07:00] [INFO] [unknown:854] ["[region 214] 383 received MsgRequestVoteResponse from 383 at term 7"]
[2019/05/01 12:36:15.462 -07:00] [INFO] [unknown:828] ["[region 214] 383 [logterm: 6, index: 10] sent MsgRequestVote request to 215 at term 7"]
[2019/05/01 12:36:15.462 -07:00] [INFO] [unknown:828] ["[region 214] 383 [logterm: 6, index: 10] sent MsgRequestVote request to 388 at term 7"]
[2019/05/01 12:36:15.483 -07:00] [INFO] [unknown:854] ["[region 214] 383 received MsgRequestVoteResponse from 388 at term 7"]
[2019/05/01 12:36:15.483 -07:00] [INFO] [unknown:1550] ["[region 214] 383 [quorum:2] has received 2 MsgRequestVoteResponse votes and 0 vote rejections"]
[2019/05/01 12:36:15.483 -07:00] [INFO] [unknown:789] ["[region 214] 383 became leader at term 7"]
[2019/05/01 12:36:16.746 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=486] [region_id=225]
[2019/05/01 12:36:16.746 -07:00] [INFO] [unknown:719] ["[region 225] 486 became follower at term 0"]
[2019/05/01 12:36:16.746 -07:00] [INFO] [unknown:295] ["[region 225] 486 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:36:16.746 -07:00] [INFO] [unknown:719] ["[region 225] 486 became follower at term 1"]
[2019/05/01 12:36:16.746 -07:00] [INFO] [unknown:920] ["[region 225] 486 [term: 1] received a MsgHeartbeat message with higher term from 228 [term: 7]"]
[2019/05/01 12:36:16.746 -07:00] [INFO] [unknown:719] ["[region 225] 486 became follower at term 7"]
[2019/05/01 12:36:17.008 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 443, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=13] [term=7] [peer_id=335] [region_id=40]
[2019/05/01 12:36:17.008 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 6, version: 14, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=335] [region_id=40]
[2019/05/01 12:36:17.008 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 40, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 73, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 79, 0, 0, 0, 0, 0, 0, 0, 248], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 14, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 41, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 335, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 382, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 443, store_id: 3, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 443, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=335] [region_id=40]
[2019/05/01 12:36:17.057 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 41, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=14] [term=7] [peer_id=335] [region_id=40]
[2019/05/01 12:36:17.058 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 7, version: 14, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=335] [region_id=40]
[2019/05/01 12:36:17.058 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 40, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 73, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 79, 0, 0, 0, 0, 0, 0, 0, 248], region_epoch: Some(RegionEpoch { conf_ver: 7, version: 14, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 41, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 335, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 382, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 443, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 41, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=335] [region_id=40]
[2019/05/01 12:36:17.747 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=487] [region_id=249]
[2019/05/01 12:36:17.747 -07:00] [INFO] [unknown:719] ["[region 249] 487 became follower at term 0"]
[2019/05/01 12:36:17.748 -07:00] [INFO] [unknown:295] ["[region 249] 487 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:36:17.748 -07:00] [INFO] [unknown:719] ["[region 249] 487 became follower at term 1"]
[2019/05/01 12:36:17.748 -07:00] [INFO] [unknown:920] ["[region 249] 487 [term: 1] received a MsgHeartbeat message with higher term from 252 [term: 7]"]
[2019/05/01 12:36:17.748 -07:00] [INFO] [unknown:719] ["[region 249] 487 became follower at term 7"]
[2019/05/01 12:36:17.881 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddLearnerNode, peer: Some(Peer { id: 488, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=11] [term=7] [peer_id=329] [region_id=153]
[2019/05/01 12:36:17.881 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 5, version: 18, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddLearner] [peer_id=329] [region_id=153]
[2019/05/01 12:36:17.881 -07:00] [INFO] [apply.rs:1476] ["add learner successfully"] [region="Region { id: 153, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 114, 128, 0, 0, 0, 0, 255, 1, 212, 193, 0, 0, 0, 0, 0, 250], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 114, 128, 0, 0, 0, 0, 255, 1, 212, 195, 0, 0, 0, 0, 0, 250], region_epoch: Some(RegionEpoch { conf_ver: 5, version: 18, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 154, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 155, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 329, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 488, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=329] [region_id=153]
[2019/05/01 12:36:18.691 -07:00] [INFO] [unknown:920] ["[region 4] 386 [term: 6] received a MsgRequestVote message with higher term from 393 [term: 7]"]
[2019/05/01 12:36:18.692 -07:00] [INFO] [unknown:719] ["[region 4] 386 became follower at term 7"]
[2019/05/01 12:36:18.692 -07:00] [INFO] [unknown:1083] ["[region 4] 386 [logterm: 6, index: 3355, vote: 0] cast MsgRequestVote for 393 [logterm: 6, index: 3355] at term 7"]
[2019/05/01 12:36:18.700 -07:00] [INFO] [unknown:920] ["[region 94] 389 [term: 6] received a MsgRequestVote message with higher term from 384 [term: 7]"]
[2019/05/01 12:36:18.700 -07:00] [INFO] [unknown:719] ["[region 94] 389 became follower at term 7"]
[2019/05/01 12:36:18.700 -07:00] [INFO] [unknown:1083] ["[region 94] 389 [logterm: 6, index: 11, vote: 0] cast MsgRequestVote for 384 [logterm: 6, index: 11] at term 7"]
[2019/05/01 12:36:18.732 -07:00] [INFO] [unknown:1625] ["[region 36] 333 [term 6] received MsgTimeoutNow from 37 and starts an election to get leadership."]
[2019/05/01 12:36:18.732 -07:00] [INFO] [unknown:739] ["[region 36] 333 became candidate at term 7"]
[2019/05/01 12:36:18.732 -07:00] [INFO] [unknown:854] ["[region 36] 333 received MsgRequestVoteResponse from 333 at term 7"]
[2019/05/01 12:36:18.732 -07:00] [INFO] [unknown:828] ["[region 36] 333 [logterm: 6, index: 10] sent MsgRequestVote request to 37 at term 7"]
[2019/05/01 12:36:18.732 -07:00] [INFO] [unknown:828] ["[region 36] 333 [logterm: 6, index: 10] sent MsgRequestVote request to 379 at term 7"]
[2019/05/01 12:36:18.785 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_225_7_8_(default|lock|write).sst] [snap_key=225_7_8]
[2019/05/01 12:36:18.800 -07:00] [INFO] [unknown:1792] ["[region 225] 486 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 8, term: 7]"]
[2019/05/01 12:36:18.800 -07:00] [INFO] [unknown:1816] ["[region 225] 486 restored progress of 226 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:36:18.800 -07:00] [INFO] [unknown:1816] ["[region 225] 486 restored progress of 227 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:36:18.800 -07:00] [INFO] [unknown:1816] ["[region 225] 486 restored progress of 228 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:36:18.800 -07:00] [INFO] [unknown:1816] ["[region 225] 486 restored progress of 486 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:36:18.800 -07:00] [INFO] [unknown:474] ["[region 225] 486 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 8, term: 7]"]
[2019/05/01 12:36:18.800 -07:00] [INFO] [unknown:1736] ["[region 225] 486 [commit: 8] restored snapshot [index: 8, term: 7]"]
[2019/05/01 12:36:18.800 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=486] [region_id=225]
[2019/05/01 12:36:18.800 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 8, truncated_state: Some(RaftTruncatedState { index: 8, term: 7, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 225, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 95, 101, 255, 114, 114, 111, 255, 114, 95, 97, 99, 116, 255, 105, 111, 255, 110, 0, 0, 0, 0, 0, 250, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 95, 102, 255, 111, 114, 109, 255, 97, 116, 0, 0, 0, 252, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 27, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 226, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 227, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 228, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 486, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=486] [region_id=225]
[2019/05/01 12:36:18.804 -07:00] [INFO] [unknown:854] ["[region 36] 333 received MsgRequestVoteResponse from 379 at term 7"]
[2019/05/01 12:36:18.805 -07:00] [INFO] [unknown:1550] ["[region 36] 333 [quorum:2] has received 2 MsgRequestVoteResponse votes and 0 vote rejections"]
[2019/05/01 12:36:18.805 -07:00] [INFO] [unknown:789] ["[region 36] 333 became leader at term 7"]
[2019/05/01 12:36:18.838 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 225] 486"]
[2019/05/01 12:36:18.838 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 225, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 95, 101, 255, 114, 114, 111, 255, 114, 95, 97, 99, 116, 255, 105, 111, 255, 110, 0, 0, 0, 0, 0, 250, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 95, 102, 255, 111, 114, 109, 255, 97, 116, 0, 0, 0, 252, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 27, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 226, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 227, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 228, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 486, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=486] [region_id=225]
[2019/05/01 12:36:18.838 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=225]
[2019/05/01 12:36:18.862 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=23.535126ms] [region_id=225]
[2019/05/01 12:36:19.759 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_249_7_8_(default|lock|write).sst] [snap_key=249_7_8]
[2019/05/01 12:36:19.766 -07:00] [INFO] [unknown:1792] ["[region 249] 487 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 8, term: 7]"]
[2019/05/01 12:36:19.766 -07:00] [INFO] [unknown:1816] ["[region 249] 487 restored progress of 250 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:36:19.766 -07:00] [INFO] [unknown:1816] ["[region 249] 487 restored progress of 251 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:36:19.766 -07:00] [INFO] [unknown:1816] ["[region 249] 487 restored progress of 252 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:36:19.766 -07:00] [INFO] [unknown:1816] ["[region 249] 487 restored progress of 487 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:36:19.766 -07:00] [INFO] [unknown:474] ["[region 249] 487 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 8, term: 7]"]
[2019/05/01 12:36:19.766 -07:00] [INFO] [unknown:1736] ["[region 249] 487 [commit: 8] restored snapshot [index: 8, term: 7]"]
[2019/05/01 12:36:19.766 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=487] [region_id=249]
[2019/05/01 12:36:19.766 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 8, truncated_state: Some(RaftTruncatedState { index: 8, term: 7, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 249, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 95, 111, 255, 114, 100, 101, 255, 114, 95, 99, 111, 109, 255, 109, 105, 255, 116, 115, 0, 0, 0, 0, 251, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 95, 114, 255, 111, 119, 95, 255, 105, 109, 97, 103, 101, 255, 0, 0, 255, 0, 0, 0, 0, 0, 0, 247, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 27, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 250, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 251, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 252, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 487, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=487] [region_id=249]
[2019/05/01 12:36:19.780 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 249] 487"]
[2019/05/01 12:36:19.780 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=249]
[2019/05/01 12:36:19.780 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 249, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 95, 111, 255, 114, 100, 101, 255, 114, 95, 99, 111, 109, 255, 109, 105, 255, 116, 115, 0, 0, 0, 0, 251, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 95, 114, 255, 111, 119, 95, 255, 105, 109, 97, 103, 101, 255, 0, 0, 255, 0, 0, 0, 0, 0, 0, 247, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 27, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 250, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 251, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 252, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 487, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=487] [region_id=249]
[2019/05/01 12:36:19.805 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 486, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=9] [term=7] [peer_id=486] [region_id=225]
[2019/05/01 12:36:19.805 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 6, version: 27, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=486] [region_id=225]
[2019/05/01 12:36:19.805 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 225, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 95, 101, 255, 114, 114, 111, 255, 114, 95, 97, 99, 116, 255, 105, 111, 255, 110, 0, 0, 0, 0, 0, 250, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 95, 102, 255, 111, 114, 109, 255, 97, 116, 0, 0, 0, 252, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 27, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 226, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 227, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 228, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 486, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 486, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=486] [region_id=225]
[2019/05/01 12:36:19.827 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=46.839684ms] [region_id=249]
[2019/05/01 12:36:19.859 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 226, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=10] [term=7] [peer_id=486] [region_id=225]
[2019/05/01 12:36:19.859 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 7, version: 27, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=486] [region_id=225]
[2019/05/01 12:36:19.859 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 225, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 95, 101, 255, 114, 114, 111, 255, 114, 95, 97, 99, 116, 255, 105, 111, 255, 110, 0, 0, 0, 0, 0, 250, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 95, 102, 255, 111, 114, 109, 255, 97, 116, 0, 0, 0, 252, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 7, version: 27, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 226, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 227, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 228, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 486, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 226, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=486] [region_id=225]
[2019/05/01 12:36:20.070 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 485, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=12] [term=7] [peer_id=259] [region_id=120]
[2019/05/01 12:36:20.072 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 6, version: 17, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=259] [region_id=120]
[2019/05/01 12:36:20.072 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 120, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 100, 255, 95, 97, 100, 100, 255, 114, 101, 115, 255, 115, 0, 0, 0, 0, 251, 0, 0, 253], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 95, 99, 255, 97, 99, 104, 255, 101, 95, 115, 105, 122, 255, 101, 0, 255, 0, 0, 0, 0, 0, 0, 248, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 17, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 121, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 122, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 259, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 485, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 485, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=259] [region_id=120]
[2019/05/01 12:36:20.097 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=4_6_2349] [peer_id=386] [region_id=4]
[2019/05/01 12:36:20.108 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=16_6_494] [peer_id=159] [region_id=16]
[2019/05/01 12:36:20.108 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=20_6_7] [peer_id=50] [region_id=20]
[2019/05/01 12:36:20.108 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=22_6_7] [peer_id=51] [region_id=22]
[2019/05/01 12:36:20.108 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=24_6_9] [peer_id=168] [region_id=24]
[2019/05/01 12:36:20.108 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=32_6_11] [peer_id=378] [region_id=32]
[2019/05/01 12:36:20.108 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=34_6_9] [peer_id=332] [region_id=34]
[2019/05/01 12:36:20.108 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=36_6_7] [peer_id=333] [region_id=36]
[2019/05/01 12:36:20.108 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=38_7_10] [peer_id=396] [region_id=38]
[2019/05/01 12:36:20.108 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=40_6_7] [peer_id=335] [region_id=40]
[2019/05/01 12:36:20.108 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=42_7_10] [peer_id=437] [region_id=42]
[2019/05/01 12:36:20.108 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=44_6_7] [peer_id=377] [region_id=44]
[2019/05/01 12:36:20.108 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=46_6_9] [peer_id=385] [region_id=46]
[2019/05/01 12:36:20.108 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=56_6_7] [peer_id=381] [region_id=56]
[2019/05/01 12:36:20.108 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=88_6_7] [peer_id=160] [region_id=88]
[2019/05/01 12:36:20.108 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=91_6_8] [peer_id=164] [region_id=91]
[2019/05/01 12:36:20.108 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=94_6_10] [peer_id=389] [region_id=94]
[2019/05/01 12:36:20.108 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=96_6_8] [peer_id=169] [region_id=96]
[2019/05/01 12:36:20.108 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=99_6_8] [peer_id=170] [region_id=99]
[2019/05/01 12:36:20.108 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=111_6_8] [peer_id=216] [region_id=111]
[2019/05/01 12:36:20.108 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=114_6_8] [peer_id=257] [region_id=114]
[2019/05/01 12:36:20.108 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=126_6_7] [peer_id=162] [region_id=126]
[2019/05/01 12:36:20.108 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=129_7_9] [peer_id=273] [region_id=129]
[2019/05/01 12:36:20.108 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=138_7_11] [peer_id=440] [region_id=138]
[2019/05/01 12:36:20.108 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=141_7_9] [peer_id=325] [region_id=141]
[2019/05/01 12:36:20.108 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=144_7_9] [peer_id=326] [region_id=144]
[2019/05/01 12:36:20.108 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=150_7_9] [peer_id=328] [region_id=150]
[2019/05/01 12:36:20.108 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=153_7_9] [peer_id=329] [region_id=153]
[2019/05/01 12:36:20.108 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=214_6_7] [peer_id=383] [region_id=214]
[2019/05/01 12:36:20.108 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=225_7_8] [peer_id=486] [region_id=225]
[2019/05/01 12:36:20.108 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=373_7_8] [peer_id=439] [region_id=373]
[2019/05/01 12:36:20.112 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=120_7_9] [peer_id=259] [region_id=120]
[2019/05/01 12:36:20.130 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 121, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=13] [term=7] [peer_id=259] [region_id=120]
[2019/05/01 12:36:20.130 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 7, version: 17, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=259] [region_id=120]
[2019/05/01 12:36:20.130 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 120, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 100, 255, 95, 97, 100, 100, 255, 114, 101, 115, 255, 115, 0, 0, 0, 0, 251, 0, 0, 253], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 95, 99, 255, 97, 99, 104, 255, 101, 95, 115, 105, 122, 255, 101, 0, 255, 0, 0, 0, 0, 0, 0, 248, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 7, version: 17, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 121, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 122, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 259, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 485, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 121, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=259] [region_id=120]
[2019/05/01 12:36:20.164 -07:00] [INFO] [pd.rs:558] ["try to change peer"] [peer="Peer { id: 490, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [change_type=AddLearnerNode] [region_id=22]
[2019/05/01 12:36:20.164 -07:00] [INFO] [peer.rs:1953] ["propose conf change peer"] [change_peer=490] [change_type=AddLearnerNode] [peer_id=51] [region_id=22]
[2019/05/01 12:36:20.193 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddLearnerNode, peer: Some(Peer { id: 490, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=12] [term=7] [peer_id=51] [region_id=22]
[2019/05/01 12:36:20.193 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 5, version: 5, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddLearner] [peer_id=51] [region_id=22]
[2019/05/01 12:36:20.193 -07:00] [INFO] [apply.rs:1476] ["add learner successfully"] [region="Region { id: 22, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 16, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 24, 0, 0, 0, 0, 0, 0, 0, 248], region_epoch: Some(RegionEpoch { conf_ver: 5, version: 5, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 23, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 51, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 167, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 490, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=51] [region_id=22]
[2019/05/01 12:36:20.211 -07:00] [INFO] [peer.rs:1318] ["notify pd with change peer region"] [region="Region { id: 22, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 16, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 24, 0, 0, 0, 0, 0, 0, 0, 248], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 5, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 23, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 51, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 167, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 490, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=51] [region_id=22]
[2019/05/01 12:36:20.773 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 487, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=9] [term=7] [peer_id=487] [region_id=249]
[2019/05/01 12:36:20.773 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 6, version: 27, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=487] [region_id=249]
[2019/05/01 12:36:20.773 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 249, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 95, 111, 255, 114, 100, 101, 255, 114, 95, 99, 111, 109, 255, 109, 105, 255, 116, 115, 0, 0, 0, 0, 251, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 95, 114, 255, 111, 119, 95, 255, 105, 109, 97, 103, 101, 255, 0, 0, 255, 0, 0, 0, 0, 0, 0, 247, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 27, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 250, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 251, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 252, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 487, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 487, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=487] [region_id=249]
[2019/05/01 12:36:20.886 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 250, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=10] [term=7] [peer_id=487] [region_id=249]
[2019/05/01 12:36:20.887 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 7, version: 27, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=487] [region_id=249]
[2019/05/01 12:36:20.887 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 249, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 95, 111, 255, 114, 100, 101, 255, 114, 95, 99, 111, 109, 255, 109, 105, 255, 116, 115, 0, 0, 0, 0, 251, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 95, 114, 255, 111, 119, 95, 255, 105, 109, 97, 103, 101, 255, 0, 0, 255, 0, 0, 0, 0, 0, 0, 247, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 7, version: 27, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 250, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 251, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 252, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 487, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 250, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=487] [region_id=249]
[2019/05/01 12:36:21.759 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=489] [region_id=253]
[2019/05/01 12:36:21.759 -07:00] [INFO] [unknown:719] ["[region 253] 489 became follower at term 0"]
[2019/05/01 12:36:21.759 -07:00] [INFO] [unknown:295] ["[region 253] 489 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:36:21.759 -07:00] [INFO] [unknown:719] ["[region 253] 489 became follower at term 1"]
[2019/05/01 12:36:21.759 -07:00] [INFO] [unknown:920] ["[region 253] 489 [term: 1] received a MsgHeartbeat message with higher term from 256 [term: 7]"]
[2019/05/01 12:36:21.759 -07:00] [INFO] [unknown:719] ["[region 253] 489 became follower at term 7"]
[2019/05/01 12:36:21.992 -07:00] [INFO] [peer_storage.rs:759] ["requesting snapshot"] [peer_id=51] [region_id=22]
[2019/05/01 12:36:21.992 -07:00] [INFO] [snap.rs:757] ["scan snapshot of one cf"] [size=0] [key_count=0] [cf=default] [snapshot=/opt/tidb/data/kv/snap/gen_22_7_12_(default|lock|write).sst] [region_id=22]
[2019/05/01 12:36:21.992 -07:00] [INFO] [snap.rs:757] ["scan snapshot of one cf"] [size=0] [key_count=0] [cf=lock] [snapshot=/opt/tidb/data/kv/snap/gen_22_7_12_(default|lock|write).sst] [region_id=22]
[2019/05/01 12:36:21.992 -07:00] [INFO] [snap.rs:757] ["scan snapshot of one cf"] [size=0] [key_count=0] [cf=write] [snapshot=/opt/tidb/data/kv/snap/gen_22_7_12_(default|lock|write).sst] [region_id=22]
[2019/05/01 12:36:21.993 -07:00] [INFO] [snap.rs:875] ["scan snapshot"] [takes=253.657µs] [size=0] [key_count=0] [snapshot=/opt/tidb/data/kv/snap/gen_22_7_12_(default|lock|write).sst] [region_id=22]
[2019/05/01 12:36:21.993 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=491] [region_id=123]
[2019/05/01 12:36:21.993 -07:00] [INFO] [unknown:719] ["[region 123] 491 became follower at term 0"]
[2019/05/01 12:36:21.993 -07:00] [INFO] [unknown:295] ["[region 123] 491 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:36:21.993 -07:00] [INFO] [unknown:719] ["[region 123] 491 became follower at term 1"]
[2019/05/01 12:36:21.993 -07:00] [INFO] [unknown:920] ["[region 123] 491 [term: 1] received a MsgHeartbeat message with higher term from 125 [term: 7]"]
[2019/05/01 12:36:21.994 -07:00] [INFO] [unknown:719] ["[region 123] 491 became follower at term 7"]
[2019/05/01 12:36:22.061 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 488, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=12] [term=7] [peer_id=329] [region_id=153]
[2019/05/01 12:36:22.061 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 6, version: 18, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=329] [region_id=153]
[2019/05/01 12:36:22.061 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 153, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 114, 128, 0, 0, 0, 0, 255, 1, 212, 193, 0, 0, 0, 0, 0, 250], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 114, 128, 0, 0, 0, 0, 255, 1, 212, 195, 0, 0, 0, 0, 0, 250], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 18, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 154, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 155, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 329, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 488, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 488, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=329] [region_id=153]
[2019/05/01 12:36:22.151 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 154, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=13] [term=7] [peer_id=329] [region_id=153]
[2019/05/01 12:36:22.151 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 7, version: 18, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=329] [region_id=153]
[2019/05/01 12:36:22.151 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 153, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 114, 128, 0, 0, 0, 0, 255, 1, 212, 193, 0, 0, 0, 0, 0, 250], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 114, 128, 0, 0, 0, 0, 255, 1, 212, 195, 0, 0, 0, 0, 0, 250], region_epoch: Some(RegionEpoch { conf_ver: 7, version: 18, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 154, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 155, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 329, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 488, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 154, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=329] [region_id=153]
[2019/05/01 12:36:22.211 -07:00] [INFO] [pd.rs:558] ["try to change peer"] [peer="Peer { id: 492, store_id: 3, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [change_type=AddLearnerNode] [region_id=390]
[2019/05/01 12:36:22.211 -07:00] [INFO] [peer.rs:1953] ["propose conf change peer"] [change_peer=492] [change_type=AddLearnerNode] [peer_id=392] [region_id=390]
[2019/05/01 12:36:22.262 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddLearnerNode, peer: Some(Peer { id: 492, store_id: 3, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=9] [term=6] [peer_id=392] [region_id=390]
[2019/05/01 12:36:22.262 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 5, version: 12, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddLearner] [peer_id=392] [region_id=390]
[2019/05/01 12:36:22.262 -07:00] [INFO] [apply.rs:1476] ["add learner successfully"] [region="Region { id: 390, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 55, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 55, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 3, 128, 0, 0, 0, 255, 0, 0, 0, 108, 3, 128, 0, 0, 255, 0, 0, 0, 0, 0, 3, 128, 0, 255, 0, 0, 0, 0, 0, 3, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 5, version: 12, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 391, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 392, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 394, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 492, store_id: 3, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=392] [region_id=390]
[2019/05/01 12:36:22.286 -07:00] [INFO] [peer.rs:1318] ["notify pd with change peer region"] [region="Region { id: 390, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 55, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 55, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 3, 128, 0, 0, 0, 255, 0, 0, 0, 108, 3, 128, 0, 0, 255, 0, 0, 0, 0, 0, 3, 128, 0, 255, 0, 0, 0, 0, 0, 3, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 12, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 391, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 392, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 394, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 492, store_id: 3, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=392] [region_id=390]
[2019/05/01 12:36:23.074 -07:00] [INFO] [peer_storage.rs:759] ["requesting snapshot"] [peer_id=392] [region_id=390]
[2019/05/01 12:36:23.075 -07:00] [INFO] [snap.rs:757] ["scan snapshot of one cf"] [size=0] [key_count=0] [cf=default] [snapshot=/opt/tidb/data/kv/snap/gen_390_6_9_(default|lock|write).sst] [region_id=390]
[2019/05/01 12:36:23.075 -07:00] [INFO] [snap.rs:757] ["scan snapshot of one cf"] [size=0] [key_count=0] [cf=lock] [snapshot=/opt/tidb/data/kv/snap/gen_390_6_9_(default|lock|write).sst] [region_id=390]
[2019/05/01 12:36:23.075 -07:00] [INFO] [snap.rs:757] ["scan snapshot of one cf"] [size=166] [key_count=2] [cf=write] [snapshot=/opt/tidb/data/kv/snap/gen_390_6_9_(default|lock|write).sst] [region_id=390]
[2019/05/01 12:36:23.096 -07:00] [INFO] [snap.rs:875] ["scan snapshot"] [takes=21.324487ms] [size=1461] [key_count=2] [snapshot=/opt/tidb/data/kv/snap/gen_390_6_9_(default|lock|write).sst] [region_id=390]
[2019/05/01 12:36:23.763 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_253_7_8_(default|lock|write).sst] [snap_key=253_7_8]
[2019/05/01 12:36:23.779 -07:00] [INFO] [unknown:1792] ["[region 253] 489 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 8, term: 7]"]
[2019/05/01 12:36:23.790 -07:00] [INFO] [unknown:1816] ["[region 253] 489 restored progress of 254 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:36:23.790 -07:00] [INFO] [unknown:1816] ["[region 253] 489 restored progress of 255 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:36:23.790 -07:00] [INFO] [unknown:1816] ["[region 253] 489 restored progress of 256 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:36:23.790 -07:00] [INFO] [unknown:1816] ["[region 253] 489 restored progress of 489 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:36:23.790 -07:00] [INFO] [unknown:474] ["[region 253] 489 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 8, term: 7]"]
[2019/05/01 12:36:23.790 -07:00] [INFO] [unknown:1736] ["[region 253] 489 [commit: 8] restored snapshot [index: 8, term: 7]"]
[2019/05/01 12:36:23.790 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=489] [region_id=253]
[2019/05/01 12:36:23.790 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 8, truncated_state: Some(RaftTruncatedState { index: 8, term: 7, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 253, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 95, 114, 255, 111, 119, 95, 255, 105, 109, 97, 103, 101, 255, 0, 0, 255, 0, 0, 0, 0, 0, 0, 247, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 95, 114, 255, 111, 119, 115, 255, 95, 113, 117, 101, 114, 255, 121, 95, 255, 108, 111, 103, 95, 101, 118, 255, 101, 255, 110, 116, 115, 0, 0, 0, 0, 251, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 27, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 254, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 255, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 256, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 489, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=489] [region_id=253]
[2019/05/01 12:36:23.858 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 253] 489"]
[2019/05/01 12:36:23.866 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 253, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 95, 114, 255, 111, 119, 95, 255, 105, 109, 97, 103, 101, 255, 0, 0, 255, 0, 0, 0, 0, 0, 0, 247, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 95, 114, 255, 111, 119, 115, 255, 95, 113, 117, 101, 114, 255, 121, 95, 255, 108, 111, 103, 95, 101, 118, 255, 101, 255, 110, 116, 115, 0, 0, 0, 0, 251, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 27, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 254, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 255, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 256, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 489, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=489] [region_id=253]
[2019/05/01 12:36:23.866 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=253]
[2019/05/01 12:36:23.950 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=91.64038ms] [region_id=253]
[2019/05/01 12:36:23.995 -07:00] [INFO] [unknown:841] ["New connected subchannel at 0x7f041bc27aa0 for subchannel 0x7f04cf841e00"]
[2019/05/01 12:36:24.034 -07:00] [INFO] [snap.rs:389] ["sent snapshot"] [duration=40.048132ms] [size=0] [snap_key=22_7_12] [region_id=22]
[2019/05/01 12:36:24.034 -07:00] [INFO] [peer.rs:538] ["report snapshot status"] [status=Finish] [to="Peer { id: 490, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=51] [region_id=22]
[2019/05/01 12:36:24.117 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_123_7_11_(default|lock|write).sst] [snap_key=123_7_11]
[2019/05/01 12:36:24.127 -07:00] [INFO] [unknown:1792] ["[region 123] 491 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 11, term: 7]"]
[2019/05/01 12:36:24.135 -07:00] [INFO] [unknown:1816] ["[region 123] 491 restored progress of 124 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:36:24.135 -07:00] [INFO] [unknown:1816] ["[region 123] 491 restored progress of 125 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:36:24.135 -07:00] [INFO] [unknown:1816] ["[region 123] 491 restored progress of 260 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:36:24.135 -07:00] [INFO] [unknown:1816] ["[region 123] 491 restored progress of 491 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:36:24.135 -07:00] [INFO] [unknown:474] ["[region 123] 491 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 11, term: 7]"]
[2019/05/01 12:36:24.135 -07:00] [INFO] [unknown:1736] ["[region 123] 491 [commit: 11] restored snapshot [index: 11, term: 7]"]
[2019/05/01 12:36:24.135 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=491] [region_id=123]
[2019/05/01 12:36:24.135 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 11, truncated_state: Some(RaftTruncatedState { index: 11, term: 7, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 123, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 95, 99, 255, 97, 99, 104, 255, 101, 95, 115, 105, 122, 255, 101, 0, 255, 0, 0, 0, 0, 0, 0, 248, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 95, 99, 255, 104, 101, 99, 255, 107, 115, 117, 109, 0, 254, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 17, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 124, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 125, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 260, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 491, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=491] [region_id=123]
[2019/05/01 12:36:24.162 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 123] 491"]
[2019/05/01 12:36:24.163 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=123]
[2019/05/01 12:36:24.163 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 123, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 95, 99, 255, 97, 99, 104, 255, 101, 95, 115, 105, 122, 255, 101, 0, 255, 0, 0, 0, 0, 0, 0, 248, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 95, 99, 255, 104, 101, 99, 255, 107, 115, 117, 109, 0, 254, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 17, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 124, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 125, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 260, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 491, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=491] [region_id=123]
[2019/05/01 12:36:24.203 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: BatchSplit, change_peer: None, split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: Some(BatchSplitRequest { requests: [SplitRequest { split_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 108, 95, 114, 128, 0, 0, 0, 0, 255, 0, 0, 0, 0, 0, 0, 0, 0, 250], new_region_id: 533, new_peer_ids: [534, 535, 536], right_derive: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, SplitRequest { split_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 108, 95, 114, 128, 0, 0, 0, 0, 255, 0, 0, 1, 0, 0, 0, 0, 0, 250], new_region_id: 557, new_peer_ids: [558, 559, 560], right_derive: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], right_derive: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=3639] [term=7] [peer_id=386] [region_id=4]
[2019/05/01 12:36:24.203 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=40.469568ms] [region_id=123]
[2019/05/01 12:36:24.203 -07:00] [INFO] [apply.rs:1582] ["split region"] [keys="[[116, 128, 0, 0, 0, 0, 0, 0, 255, 108, 95, 114, 128, 0, 0, 0, 0, 255, 0, 0, 0, 0, 0, 0, 0, 0, 250], [116, 128, 0, 0, 0, 0, 0, 0, 255, 108, 95, 114, 128, 0, 0, 0, 0, 255, 0, 0, 1, 0, 0, 0, 0, 0, 250]]"] [region="Region { id: 4, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 108, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [], region_epoch: Some(RegionEpoch { conf_ver: 5, version: 19, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 5, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 386, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 393, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=386] [region_id=4]
[2019/05/01 12:36:24.213 -07:00] [INFO] [peer.rs:1424] ["insert new region"] [region="Region { id: 533, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 108, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 108, 95, 114, 128, 0, 0, 0, 0, 255, 0, 0, 0, 0, 0, 0, 0, 0, 250], region_epoch: Some(RegionEpoch { conf_ver: 5, version: 21, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 534, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 535, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 536, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region_id=533]
[2019/05/01 12:36:24.213 -07:00] [INFO] [peer.rs:127] ["create peer"] [peer_id=535] [region_id=533]
[2019/05/01 12:36:24.213 -07:00] [INFO] [unknown:719] ["[region 533] 535 became follower at term 5"]
[2019/05/01 12:36:24.213 -07:00] [INFO] [unknown:295] ["[region 533] 535 newRaft [peers: [534, 535, 536], term: 5, commit: 5, applied: 5, last_index: 5, last_term: 5]"]
[2019/05/01 12:36:24.213 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 533] 535"]
[2019/05/01 12:36:24.213 -07:00] [INFO] [peer.rs:1424] ["insert new region"] [region="Region { id: 557, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 108, 95, 114, 128, 0, 0, 0, 0, 255, 0, 0, 0, 0, 0, 0, 0, 0, 250], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 108, 95, 114, 128, 0, 0, 0, 0, 255, 0, 0, 1, 0, 0, 0, 0, 0, 250], region_epoch: Some(RegionEpoch { conf_ver: 5, version: 21, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 558, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 559, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 560, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region_id=557]
[2019/05/01 12:36:24.213 -07:00] [INFO] [peer.rs:127] ["create peer"] [peer_id=559] [region_id=557]
[2019/05/01 12:36:24.213 -07:00] [INFO] [unknown:719] ["[region 557] 559 became follower at term 5"]
[2019/05/01 12:36:24.213 -07:00] [INFO] [unknown:1083] ["[region 533] 535 [logterm: 5, index: 5, vote: 0] cast MsgRequestPreVote for 536 [logterm: 5, index: 5] at term 5"]
[2019/05/01 12:36:24.213 -07:00] [INFO] [unknown:295] ["[region 557] 559 newRaft [peers: [558, 559, 560], term: 5, commit: 5, applied: 5, last_index: 5, last_term: 5]"]
[2019/05/01 12:36:24.213 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 557] 559"]
[2019/05/01 12:36:24.213 -07:00] [INFO] [unknown:1083] ["[region 557] 559 [logterm: 5, index: 5, vote: 0] cast MsgRequestPreVote for 560 [logterm: 5, index: 5] at term 5"]
[2019/05/01 12:36:24.256 -07:00] [INFO] [unknown:920] ["[region 533] 535 [term: 5] received a MsgRequestVote message with higher term from 536 [term: 6]"]
[2019/05/01 12:36:24.256 -07:00] [INFO] [unknown:719] ["[region 533] 535 became follower at term 6"]
[2019/05/01 12:36:24.256 -07:00] [INFO] [unknown:1083] ["[region 533] 535 [logterm: 5, index: 5, vote: 0] cast MsgRequestVote for 536 [logterm: 5, index: 5] at term 6"]
[2019/05/01 12:36:24.270 -07:00] [INFO] [unknown:920] ["[region 557] 559 [term: 5] received a MsgRequestVote message with higher term from 560 [term: 6]"]
[2019/05/01 12:36:24.270 -07:00] [INFO] [unknown:719] ["[region 557] 559 became follower at term 6"]
[2019/05/01 12:36:24.270 -07:00] [INFO] [unknown:1083] ["[region 557] 559 [logterm: 5, index: 5, vote: 0] cast MsgRequestVote for 560 [logterm: 5, index: 5] at term 6"]
[2019/05/01 12:36:24.804 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 489, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=9] [term=7] [peer_id=489] [region_id=253]
[2019/05/01 12:36:24.804 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 6, version: 27, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=489] [region_id=253]
[2019/05/01 12:36:24.804 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 253, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 95, 114, 255, 111, 119, 95, 255, 105, 109, 97, 103, 101, 255, 0, 0, 255, 0, 0, 0, 0, 0, 0, 247, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 95, 114, 255, 111, 119, 115, 255, 95, 113, 117, 101, 114, 255, 121, 95, 255, 108, 111, 103, 95, 101, 118, 255, 101, 255, 110, 116, 115, 0, 0, 0, 0, 251, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 27, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 254, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 255, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 256, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 489, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 489, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=489] [region_id=253]
[2019/05/01 12:36:24.853 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 254, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=10] [term=7] [peer_id=489] [region_id=253]
[2019/05/01 12:36:24.853 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 7, version: 27, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=489] [region_id=253]
[2019/05/01 12:36:24.853 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 253, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 95, 114, 255, 111, 119, 95, 255, 105, 109, 97, 103, 101, 255, 0, 0, 255, 0, 0, 0, 0, 0, 0, 247, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 95, 114, 255, 111, 119, 115, 255, 95, 113, 117, 101, 114, 255, 121, 95, 255, 108, 111, 103, 95, 101, 118, 255, 101, 255, 110, 116, 115, 0, 0, 0, 0, 251, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 7, version: 27, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 254, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 255, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 256, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 489, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 254, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=489] [region_id=253]
[2019/05/01 12:36:24.947 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddLearnerNode, peer: Some(Peer { id: 573, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=11] [term=7] [peer_id=325] [region_id=141]
[2019/05/01 12:36:24.947 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 5, version: 18, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddLearner] [peer_id=325] [region_id=141]
[2019/05/01 12:36:24.947 -07:00] [INFO] [apply.rs:1476] ["add learner successfully"] [region="Region { id: 141, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 116, 105, 107, 118, 255, 95, 103, 99, 95, 255, 114, 117, 110, 255, 95, 105, 110, 116, 101, 255, 114, 118, 255, 97, 108, 0, 0, 0, 0, 251, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 114, 128, 0, 0, 0, 0, 255, 0, 0, 1, 0, 0, 0, 0, 0, 250], region_epoch: Some(RegionEpoch { conf_ver: 5, version: 18, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 142, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 143, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 325, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 573, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=325] [region_id=141]
[2019/05/01 12:36:24.995 -07:00] [INFO] [pd.rs:558] ["try to change peer"] [peer="Peer { id: 490, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [change_type=AddNode] [region_id=22]
[2019/05/01 12:36:24.995 -07:00] [INFO] [peer.rs:1953] ["propose conf change peer"] [change_peer=490] [change_type=AddNode] [peer_id=51] [region_id=22]
[2019/05/01 12:36:25.044 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 490, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=13] [term=7] [peer_id=51] [region_id=22]
[2019/05/01 12:36:25.044 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 6, version: 5, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=51] [region_id=22]
[2019/05/01 12:36:25.044 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 22, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 16, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 24, 0, 0, 0, 0, 0, 0, 0, 248], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 5, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 23, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 51, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 167, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 490, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 490, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=51] [region_id=22]
[2019/05/01 12:36:25.068 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 491, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=12] [term=7] [peer_id=491] [region_id=123]
[2019/05/01 12:36:25.068 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 6, version: 17, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=491] [region_id=123]
[2019/05/01 12:36:25.068 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 123, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 95, 99, 255, 97, 99, 104, 255, 101, 95, 115, 105, 122, 255, 101, 0, 255, 0, 0, 0, 0, 0, 0, 248, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 95, 99, 255, 104, 101, 99, 255, 107, 115, 117, 109, 0, 254, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 17, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 124, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 125, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 260, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 491, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 491, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=491] [region_id=123]
[2019/05/01 12:36:25.068 -07:00] [INFO] [peer.rs:1318] ["notify pd with change peer region"] [region="Region { id: 22, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 16, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 24, 0, 0, 0, 0, 0, 0, 0, 248], region_epoch: Some(RegionEpoch { conf_ver: 7, version: 5, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 23, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 51, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 167, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 490, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=51] [region_id=22]
[2019/05/01 12:36:25.075 -07:00] [INFO] [unknown:841] ["New connected subchannel at 0x7f0458a1b0f0 for subchannel 0x7f04cf87c000"]
[2019/05/01 12:36:25.078 -07:00] [INFO] [pd.rs:558] ["try to change peer"] [peer="Peer { id: 23, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [change_type=RemoveNode] [region_id=22]
[2019/05/01 12:36:25.078 -07:00] [INFO] [pd.rs:558] ["try to change peer"] [peer="Peer { id: 23, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [change_type=RemoveNode] [region_id=22]
[2019/05/01 12:36:25.078 -07:00] [INFO] [peer.rs:1953] ["propose conf change peer"] [change_peer=23] [change_type=RemoveNode] [peer_id=51] [region_id=22]
[2019/05/01 12:36:25.089 -07:00] [INFO] [snap.rs:389] ["sent snapshot"] [duration=13.944053ms] [size=1461] [snap_key=390_6_9] [region_id=390]
[2019/05/01 12:36:25.096 -07:00] [INFO] [peer.rs:1927] ["there is a pending conf change, try later"] [peer_id=51] [region_id=22]
[2019/05/01 12:36:25.096 -07:00] [INFO] [peer.rs:538] ["report snapshot status"] [status=Finish] [to="Peer { id: 492, store_id: 3, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=392] [region_id=390]
[2019/05/01 12:36:25.135 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 23, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=14] [term=7] [peer_id=51] [region_id=22]
[2019/05/01 12:36:25.135 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 7, version: 5, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=51] [region_id=22]
[2019/05/01 12:36:25.135 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 22, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 16, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 24, 0, 0, 0, 0, 0, 0, 0, 248], region_epoch: Some(RegionEpoch { conf_ver: 7, version: 5, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 23, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 51, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 167, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 490, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 23, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=51] [region_id=22]
[2019/05/01 12:36:25.144 -07:00] [INFO] [peer.rs:1318] ["notify pd with change peer region"] [region="Region { id: 22, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 16, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 24, 0, 0, 0, 0, 0, 0, 0, 248], region_epoch: Some(RegionEpoch { conf_ver: 8, version: 5, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 51, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 167, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 490, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=51] [region_id=22]
[2019/05/01 12:36:25.144 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 124, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=13] [term=7] [peer_id=491] [region_id=123]
[2019/05/01 12:36:25.144 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 7, version: 17, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=491] [region_id=123]
[2019/05/01 12:36:25.144 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 123, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 95, 99, 255, 97, 99, 104, 255, 101, 95, 115, 105, 122, 255, 101, 0, 255, 0, 0, 0, 0, 0, 0, 248, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 95, 99, 255, 104, 101, 99, 255, 107, 115, 117, 109, 0, 254, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 7, version: 17, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 124, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 125, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 260, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 491, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 124, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=491] [region_id=123]
[2019/05/01 12:36:26.122 -07:00] [INFO] [pd.rs:558] ["try to change peer"] [peer="Peer { id: 492, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [change_type=AddNode] [region_id=390]
[2019/05/01 12:36:26.122 -07:00] [INFO] [peer.rs:1953] ["propose conf change peer"] [change_peer=492] [change_type=AddNode] [peer_id=392] [region_id=390]
[2019/05/01 12:36:26.159 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 492, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=10] [term=6] [peer_id=392] [region_id=390]
[2019/05/01 12:36:26.159 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 6, version: 12, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=392] [region_id=390]
[2019/05/01 12:36:26.159 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 390, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 55, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 55, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 3, 128, 0, 0, 0, 255, 0, 0, 0, 108, 3, 128, 0, 0, 255, 0, 0, 0, 0, 0, 3, 128, 0, 255, 0, 0, 0, 0, 0, 3, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 12, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 391, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 392, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 394, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 492, store_id: 3, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 492, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=392] [region_id=390]
[2019/05/01 12:36:26.167 -07:00] [INFO] [peer.rs:1318] ["notify pd with change peer region"] [region="Region { id: 390, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 55, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 55, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 3, 128, 0, 0, 0, 255, 0, 0, 0, 108, 3, 128, 0, 0, 255, 0, 0, 0, 0, 0, 3, 128, 0, 255, 0, 0, 0, 0, 0, 3, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 7, version: 12, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 391, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 392, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 394, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 492, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=392] [region_id=390]
[2019/05/01 12:36:26.174 -07:00] [INFO] [pd.rs:558] ["try to change peer"] [peer="Peer { id: 391, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [change_type=RemoveNode] [region_id=390]
[2019/05/01 12:36:26.174 -07:00] [INFO] [peer.rs:1953] ["propose conf change peer"] [change_peer=391] [change_type=RemoveNode] [peer_id=392] [region_id=390]
[2019/05/01 12:36:26.195 -07:00] [INFO] [pd.rs:558] ["try to change peer"] [peer="Peer { id: 391, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [change_type=RemoveNode] [region_id=390]
[2019/05/01 12:36:26.215 -07:00] [INFO] [peer.rs:1927] ["there is a pending conf change, try later"] [peer_id=392] [region_id=390]
[2019/05/01 12:36:26.215 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 391, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=11] [term=6] [peer_id=392] [region_id=390]
[2019/05/01 12:36:26.215 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 7, version: 12, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=392] [region_id=390]
[2019/05/01 12:36:26.215 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 390, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 55, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 55, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 3, 128, 0, 0, 0, 255, 0, 0, 0, 108, 3, 128, 0, 0, 255, 0, 0, 0, 0, 0, 3, 128, 0, 255, 0, 0, 0, 0, 0, 3, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 7, version: 12, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 391, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 392, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 394, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 492, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 391, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=392] [region_id=390]
[2019/05/01 12:36:26.241 -07:00] [INFO] [peer.rs:1318] ["notify pd with change peer region"] [region="Region { id: 390, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 55, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 55, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 3, 128, 0, 0, 0, 255, 0, 0, 0, 108, 3, 128, 0, 0, 255, 0, 0, 0, 0, 0, 3, 128, 0, 255, 0, 0, 0, 0, 0, 3, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 8, version: 12, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 392, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 394, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 492, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=392] [region_id=390]
[2019/05/01 12:36:27.037 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=575] [region_id=147]
[2019/05/01 12:36:27.037 -07:00] [INFO] [unknown:719] ["[region 147] 575 became follower at term 0"]
[2019/05/01 12:36:27.037 -07:00] [INFO] [unknown:295] ["[region 147] 575 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:36:27.037 -07:00] [INFO] [unknown:719] ["[region 147] 575 became follower at term 1"]
[2019/05/01 12:36:27.037 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=574] [region_id=132]
[2019/05/01 12:36:27.037 -07:00] [INFO] [unknown:719] ["[region 132] 574 became follower at term 0"]
[2019/05/01 12:36:27.037 -07:00] [INFO] [unknown:295] ["[region 132] 574 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:36:27.037 -07:00] [INFO] [unknown:719] ["[region 132] 574 became follower at term 1"]
[2019/05/01 12:36:27.037 -07:00] [INFO] [unknown:920] ["[region 147] 575 [term: 1] received a MsgHeartbeat message with higher term from 149 [term: 7]"]
[2019/05/01 12:36:27.037 -07:00] [INFO] [unknown:719] ["[region 147] 575 became follower at term 7"]
[2019/05/01 12:36:27.037 -07:00] [INFO] [unknown:920] ["[region 132] 574 [term: 1] received a MsgHeartbeat message with higher term from 134 [term: 7]"]
[2019/05/01 12:36:27.037 -07:00] [INFO] [unknown:719] ["[region 132] 574 became follower at term 7"]
[2019/05/01 12:36:29.102 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_132_7_11_(default|lock|write).sst] [snap_key=132_7_11]
[2019/05/01 12:36:29.102 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_147_7_11_(default|lock|write).sst] [snap_key=147_7_11]
[2019/05/01 12:36:29.122 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 573, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=12] [term=7] [peer_id=325] [region_id=141]
[2019/05/01 12:36:29.122 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 6, version: 18, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=325] [region_id=141]
[2019/05/01 12:36:29.122 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 141, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 116, 105, 107, 118, 255, 95, 103, 99, 95, 255, 114, 117, 110, 255, 95, 105, 110, 116, 101, 255, 114, 118, 255, 97, 108, 0, 0, 0, 0, 251, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 114, 128, 0, 0, 0, 0, 255, 0, 0, 1, 0, 0, 0, 0, 0, 250], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 18, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 142, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 143, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 325, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 573, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 573, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=325] [region_id=141]
[2019/05/01 12:36:29.122 -07:00] [INFO] [unknown:1792] ["[region 132] 574 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 11, term: 7]"]
[2019/05/01 12:36:29.122 -07:00] [INFO] [unknown:1816] ["[region 132] 574 restored progress of 133 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:36:29.122 -07:00] [INFO] [unknown:1816] ["[region 132] 574 restored progress of 134 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:36:29.122 -07:00] [INFO] [unknown:1816] ["[region 132] 574 restored progress of 314 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:36:29.122 -07:00] [INFO] [unknown:1816] ["[region 132] 574 restored progress of 574 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:36:29.122 -07:00] [INFO] [unknown:474] ["[region 132] 574 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 11, term: 7]"]
[2019/05/01 12:36:29.122 -07:00] [INFO] [unknown:1736] ["[region 132] 574 [commit: 11] restored snapshot [index: 11, term: 7]"]
[2019/05/01 12:36:29.122 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=574] [region_id=132]
[2019/05/01 12:36:29.122 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 11, truncated_state: Some(RaftTruncatedState { index: 11, term: 7, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 132, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 116, 105, 107, 118, 255, 95, 103, 99, 95, 255, 101, 110, 97, 255, 98, 108, 101, 0, 0, 253, 0, 0, 253], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 116, 105, 107, 118, 255, 95, 103, 99, 95, 255, 108, 101, 97, 255, 100, 101, 114, 95, 100, 255, 101, 115, 255, 99, 0, 0, 0, 0, 0, 250, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 18, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 133, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 134, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 314, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 574, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=574] [region_id=132]
[2019/05/01 12:36:29.122 -07:00] [INFO] [unknown:1792] ["[region 147] 575 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 11, term: 7]"]
[2019/05/01 12:36:29.122 -07:00] [INFO] [unknown:1816] ["[region 147] 575 restored progress of 148 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:36:29.122 -07:00] [INFO] [unknown:1816] ["[region 147] 575 restored progress of 149 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:36:29.122 -07:00] [INFO] [unknown:1816] ["[region 147] 575 restored progress of 327 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:36:29.122 -07:00] [INFO] [unknown:1816] ["[region 147] 575 restored progress of 575 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:36:29.122 -07:00] [INFO] [unknown:474] ["[region 147] 575 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 11, term: 7]"]
[2019/05/01 12:36:29.122 -07:00] [INFO] [unknown:1736] ["[region 147] 575 [commit: 11] restored snapshot [index: 11, term: 7]"]
[2019/05/01 12:36:29.122 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=575] [region_id=147]
[2019/05/01 12:36:29.122 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 11, truncated_state: Some(RaftTruncatedState { index: 11, term: 7, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 147, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 114, 128, 0, 0, 0, 0, 255, 0, 0, 3, 0, 0, 0, 0, 0, 250], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 114, 128, 0, 0, 0, 0, 255, 0, 234, 97, 0, 0, 0, 0, 0, 250], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 18, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 148, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 149, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 327, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 575, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=575] [region_id=147]
[2019/05/01 12:36:29.174 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=132]
[2019/05/01 12:36:29.174 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 132, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 116, 105, 107, 118, 255, 95, 103, 99, 95, 255, 101, 110, 97, 255, 98, 108, 101, 0, 0, 253, 0, 0, 253], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 116, 105, 107, 118, 255, 95, 103, 99, 95, 255, 108, 101, 97, 255, 100, 101, 114, 95, 100, 255, 101, 115, 255, 99, 0, 0, 0, 0, 0, 250, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 18, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 133, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 134, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 314, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 574, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=574] [region_id=132]
[2019/05/01 12:36:29.175 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 132] 574"]
[2019/05/01 12:36:29.175 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 147] 575"]
[2019/05/01 12:36:29.175 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 147, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 114, 128, 0, 0, 0, 0, 255, 0, 0, 3, 0, 0, 0, 0, 0, 250], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 114, 128, 0, 0, 0, 0, 255, 0, 234, 97, 0, 0, 0, 0, 0, 250], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 18, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 148, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 149, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 327, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 575, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=575] [region_id=147]
[2019/05/01 12:36:29.208 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=33.200099ms] [region_id=132]
[2019/05/01 12:36:29.208 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=147]
[2019/05/01 12:36:29.220 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 142, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=13] [term=7] [peer_id=325] [region_id=141]
[2019/05/01 12:36:29.230 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 7, version: 18, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=325] [region_id=141]
[2019/05/01 12:36:29.230 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 141, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 116, 105, 107, 118, 255, 95, 103, 99, 95, 255, 114, 117, 110, 255, 95, 105, 110, 116, 101, 255, 114, 118, 255, 97, 108, 0, 0, 0, 0, 251, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 114, 128, 0, 0, 0, 0, 255, 0, 0, 1, 0, 0, 0, 0, 0, 250], region_epoch: Some(RegionEpoch { conf_ver: 7, version: 18, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 142, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 143, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 325, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 573, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 142, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=325] [region_id=141]
[2019/05/01 12:36:29.361 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=152.371699ms] [region_id=147]
[2019/05/01 12:36:30.120 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 574, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=12] [term=7] [peer_id=574] [region_id=132]
[2019/05/01 12:36:30.120 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 6, version: 18, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=574] [region_id=132]
[2019/05/01 12:36:30.120 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 132, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 116, 105, 107, 118, 255, 95, 103, 99, 95, 255, 101, 110, 97, 255, 98, 108, 101, 0, 0, 253, 0, 0, 253], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 116, 105, 107, 118, 255, 95, 103, 99, 95, 255, 108, 101, 97, 255, 100, 101, 114, 95, 100, 255, 101, 115, 255, 99, 0, 0, 0, 0, 0, 250, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 18, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 133, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 134, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 314, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 574, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 574, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=574] [region_id=132]
[2019/05/01 12:36:30.148 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 575, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=12] [term=7] [peer_id=575] [region_id=147]
[2019/05/01 12:36:30.148 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 6, version: 18, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=575] [region_id=147]
[2019/05/01 12:36:30.148 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 147, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 114, 128, 0, 0, 0, 0, 255, 0, 0, 3, 0, 0, 0, 0, 0, 250], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 114, 128, 0, 0, 0, 0, 255, 0, 234, 97, 0, 0, 0, 0, 0, 250], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 18, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 148, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 149, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 327, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 575, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 575, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=575] [region_id=147]
[2019/05/01 12:36:30.250 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 133, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=13] [term=7] [peer_id=574] [region_id=132]
[2019/05/01 12:36:30.250 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 7, version: 18, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=574] [region_id=132]
[2019/05/01 12:36:30.250 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 132, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 116, 105, 107, 118, 255, 95, 103, 99, 95, 255, 101, 110, 97, 255, 98, 108, 101, 0, 0, 253, 0, 0, 253], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 116, 105, 107, 118, 255, 95, 103, 99, 95, 255, 108, 101, 97, 255, 100, 101, 114, 95, 100, 255, 101, 115, 255, 99, 0, 0, 0, 0, 0, 250, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 7, version: 18, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 133, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 134, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 314, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 574, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 133, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=574] [region_id=132]
[2019/05/01 12:36:30.277 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 148, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=13] [term=7] [peer_id=575] [region_id=147]
[2019/05/01 12:36:30.277 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 7, version: 18, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=575] [region_id=147]
[2019/05/01 12:36:30.277 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 147, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 114, 128, 0, 0, 0, 0, 255, 0, 0, 3, 0, 0, 0, 0, 0, 250], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 114, 128, 0, 0, 0, 0, 255, 0, 234, 97, 0, 0, 0, 0, 0, 250], region_epoch: Some(RegionEpoch { conf_ver: 7, version: 18, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 148, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 149, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 327, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 575, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 148, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=575] [region_id=147]
[2019/05/01 12:36:30.426 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddLearnerNode, peer: Some(Peer { id: 579, store_id: 3, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=12] [term=7] [peer_id=381] [region_id=56]
[2019/05/01 12:36:30.427 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 5, version: 18, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddLearner] [peer_id=381] [region_id=56]
[2019/05/01 12:36:30.427 -07:00] [INFO] [apply.rs:1476] ["add learner successfully"] [region="Region { id: 56, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 95, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 105, 0, 0, 0, 0, 0, 0, 0, 248], region_epoch: Some(RegionEpoch { conf_ver: 5, version: 18, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 57, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 381, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 387, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 579, store_id: 3, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=381] [region_id=56]
[2019/05/01 12:36:31.058 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddLearnerNode, peer: Some(Peer { id: 580, store_id: 3, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=16] [term=7] [peer_id=378] [region_id=32]
[2019/05/01 12:36:31.058 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 5, version: 10, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddLearner] [peer_id=378] [region_id=32]
[2019/05/01 12:36:31.058 -07:00] [INFO] [apply.rs:1476] ["add learner successfully"] [region="Region { id: 32, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 49, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 55, 0, 0, 0, 0, 0, 0, 0, 248], region_epoch: Some(RegionEpoch { conf_ver: 5, version: 10, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 33, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 331, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 378, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 580, store_id: 3, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=378] [region_id=32]
[2019/05/01 12:36:31.770 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=578] [region_id=337]
[2019/05/01 12:36:31.770 -07:00] [INFO] [unknown:719] ["[region 337] 578 became follower at term 0"]
[2019/05/01 12:36:31.770 -07:00] [INFO] [unknown:295] ["[region 337] 578 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:36:31.770 -07:00] [INFO] [unknown:719] ["[region 337] 578 became follower at term 1"]
[2019/05/01 12:36:31.770 -07:00] [INFO] [unknown:920] ["[region 337] 578 [term: 1] received a MsgHeartbeat message with higher term from 340 [term: 7]"]
[2019/05/01 12:36:31.770 -07:00] [INFO] [unknown:719] ["[region 337] 578 became follower at term 7"]
[2019/05/01 12:36:32.947 -07:00] [INFO] [pd.rs:558] ["try to change peer"] [peer="Peer { id: 581, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [change_type=AddLearnerNode] [region_id=114]
[2019/05/01 12:36:32.947 -07:00] [INFO] [peer.rs:1953] ["propose conf change peer"] [change_peer=581] [change_type=AddLearnerNode] [peer_id=257] [region_id=114]
[2019/05/01 12:36:32.985 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddLearnerNode, peer: Some(Peer { id: 581, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=11] [term=7] [peer_id=257] [region_id=114]
[2019/05/01 12:36:32.985 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 5, version: 17, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddLearner] [peer_id=257] [region_id=114]
[2019/05/01 12:36:32.985 -07:00] [INFO] [apply.rs:1476] ["add learner successfully"] [region="Region { id: 114, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 97, 115, 101, 255, 100, 105, 114, 0, 254, 0, 0, 0, 252], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 103, 95, 255, 116, 97, 98, 108, 255, 101, 115, 0, 255, 0, 0, 0, 0, 0, 249, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 5, version: 17, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 115, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 116, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 257, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 581, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=257] [region_id=114]
[2019/05/01 12:36:33.031 -07:00] [INFO] [peer.rs:1318] ["notify pd with change peer region"] [region="Region { id: 114, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 97, 115, 101, 255, 100, 105, 114, 0, 254, 0, 0, 0, 252], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 103, 95, 255, 116, 97, 98, 108, 255, 101, 115, 0, 255, 0, 0, 0, 0, 0, 249, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 17, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 115, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 116, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 257, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 581, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=257] [region_id=114]
[2019/05/01 12:36:33.772 -07:00] [INFO] [peer_storage.rs:759] ["requesting snapshot"] [peer_id=257] [region_id=114]
[2019/05/01 12:36:33.773 -07:00] [INFO] [snap.rs:757] ["scan snapshot of one cf"] [size=0] [key_count=0] [cf=default] [snapshot=/opt/tidb/data/kv/snap/gen_114_7_11_(default|lock|write).sst] [region_id=114]
[2019/05/01 12:36:33.773 -07:00] [INFO] [snap.rs:757] ["scan snapshot of one cf"] [size=0] [key_count=0] [cf=lock] [snapshot=/opt/tidb/data/kv/snap/gen_114_7_11_(default|lock|write).sst] [region_id=114]
[2019/05/01 12:36:33.773 -07:00] [INFO] [snap.rs:757] ["scan snapshot of one cf"] [size=120] [key_count=2] [cf=write] [snapshot=/opt/tidb/data/kv/snap/gen_114_7_11_(default|lock|write).sst] [region_id=114]
[2019/05/01 12:36:33.773 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_337_7_8_(default|lock|write).sst] [snap_key=337_7_8]
[2019/05/01 12:36:33.794 -07:00] [INFO] [unknown:1792] ["[region 337] 578 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 8, term: 7]"]
[2019/05/01 12:36:33.794 -07:00] [INFO] [unknown:1816] ["[region 337] 578 restored progress of 338 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:36:33.794 -07:00] [INFO] [unknown:1816] ["[region 337] 578 restored progress of 339 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:36:33.794 -07:00] [INFO] [unknown:1816] ["[region 337] 578 restored progress of 340 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:36:33.794 -07:00] [INFO] [unknown:1816] ["[region 337] 578 restored progress of 578 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:36:33.794 -07:00] [INFO] [unknown:474] ["[region 337] 578 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 8, term: 7]"]
[2019/05/01 12:36:33.794 -07:00] [INFO] [unknown:1736] ["[region 337] 578 [commit: 8] restored snapshot [index: 8, term: 7]"]
[2019/05/01 12:36:33.794 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=578] [region_id=337]
[2019/05/01 12:36:33.794 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 8, truncated_state: Some(RaftTruncatedState { index: 8, term: 7, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 337, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 95, 114, 255, 111, 119, 115, 255, 95, 113, 117, 101, 114, 255, 121, 95, 255, 108, 111, 103, 95, 101, 118, 255, 101, 255, 110, 116, 115, 0, 0, 0, 0, 251, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 95, 115, 255, 116, 109, 116, 255, 95, 99, 97, 99, 104, 255, 101, 95, 255, 115, 105, 122, 101, 0, 0, 253, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 37, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 338, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 339, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 340, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 578, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=578] [region_id=337]
[2019/05/01 12:36:33.794 -07:00] [INFO] [snap.rs:875] ["scan snapshot"] [takes=21.691157ms] [size=1339] [key_count=2] [snapshot=/opt/tidb/data/kv/snap/gen_114_7_11_(default|lock|write).sst] [region_id=114]
[2019/05/01 12:36:33.866 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 337] 578"]
[2019/05/01 12:36:33.870 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 337, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 95, 114, 255, 111, 119, 115, 255, 95, 113, 117, 101, 114, 255, 121, 95, 255, 108, 111, 103, 95, 101, 118, 255, 101, 255, 110, 116, 115, 0, 0, 0, 0, 251, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 95, 115, 255, 116, 109, 116, 255, 95, 99, 97, 99, 104, 255, 101, 95, 255, 115, 105, 122, 101, 0, 0, 253, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 37, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 338, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 339, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 340, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 578, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=578] [region_id=337]
[2019/05/01 12:36:33.871 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=337]
[2019/05/01 12:36:33.936 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=69.562704ms] [region_id=337]
[2019/05/01 12:36:34.233 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: BatchSplit, change_peer: None, split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: Some(BatchSplitRequest { requests: [SplitRequest { split_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 108, 95, 114, 128, 0, 0, 0, 0, 255, 0, 0, 2, 0, 0, 0, 0, 0, 250], new_region_id: 650, new_peer_ids: [651, 652, 653], right_derive: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], right_derive: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=4128] [term=7] [peer_id=386] [region_id=4]
[2019/05/01 12:36:34.233 -07:00] [INFO] [apply.rs:1582] ["split region"] [keys="[[116, 128, 0, 0, 0, 0, 0, 0, 255, 108, 95, 114, 128, 0, 0, 0, 0, 255, 0, 0, 2, 0, 0, 0, 0, 0, 250]]"] [region="Region { id: 4, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 108, 95, 114, 128, 0, 0, 0, 0, 255, 0, 0, 1, 0, 0, 0, 0, 0, 250], end_key: [], region_epoch: Some(RegionEpoch { conf_ver: 5, version: 21, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 5, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 386, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 393, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=386] [region_id=4]
[2019/05/01 12:36:34.237 -07:00] [INFO] [peer.rs:1424] ["insert new region"] [region="Region { id: 650, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 108, 95, 114, 128, 0, 0, 0, 0, 255, 0, 0, 1, 0, 0, 0, 0, 0, 250], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 108, 95, 114, 128, 0, 0, 0, 0, 255, 0, 0, 2, 0, 0, 0, 0, 0, 250], region_epoch: Some(RegionEpoch { conf_ver: 5, version: 22, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 651, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 652, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 653, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region_id=650]
[2019/05/01 12:36:34.237 -07:00] [INFO] [peer.rs:127] ["create peer"] [peer_id=652] [region_id=650]
[2019/05/01 12:36:34.238 -07:00] [INFO] [unknown:719] ["[region 650] 652 became follower at term 5"]
[2019/05/01 12:36:34.238 -07:00] [INFO] [unknown:295] ["[region 650] 652 newRaft [peers: [651, 652, 653], term: 5, commit: 5, applied: 5, last_index: 5, last_term: 5]"]
[2019/05/01 12:36:34.238 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 650] 652"]
[2019/05/01 12:36:34.238 -07:00] [INFO] [unknown:1083] ["[region 650] 652 [logterm: 5, index: 5, vote: 0] cast MsgRequestPreVote for 653 [logterm: 5, index: 5] at term 5"]
[2019/05/01 12:36:34.296 -07:00] [INFO] [unknown:920] ["[region 650] 652 [term: 5] received a MsgRequestVote message with higher term from 653 [term: 6]"]
[2019/05/01 12:36:34.296 -07:00] [INFO] [unknown:719] ["[region 650] 652 became follower at term 6"]
[2019/05/01 12:36:34.296 -07:00] [INFO] [unknown:1083] ["[region 650] 652 [logterm: 5, index: 5, vote: 0] cast MsgRequestVote for 653 [logterm: 5, index: 5] at term 6"]
[2019/05/01 12:36:34.789 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 578, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=9] [term=7] [peer_id=578] [region_id=337]
[2019/05/01 12:36:34.789 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 6, version: 37, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=578] [region_id=337]
[2019/05/01 12:36:34.789 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 337, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 95, 114, 255, 111, 119, 115, 255, 95, 113, 117, 101, 114, 255, 121, 95, 255, 108, 111, 103, 95, 101, 118, 255, 101, 255, 110, 116, 115, 0, 0, 0, 0, 251, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 95, 115, 255, 116, 109, 116, 255, 95, 99, 97, 99, 104, 255, 101, 95, 255, 115, 105, 122, 101, 0, 0, 253, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 37, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 338, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 339, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 340, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 578, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 578, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=578] [region_id=337]
[2019/05/01 12:36:34.872 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 338, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=10] [term=7] [peer_id=578] [region_id=337]
[2019/05/01 12:36:34.872 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 7, version: 37, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=578] [region_id=337]
[2019/05/01 12:36:34.872 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 337, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 95, 114, 255, 111, 119, 115, 255, 95, 113, 117, 101, 114, 255, 121, 95, 255, 108, 111, 103, 95, 101, 118, 255, 101, 255, 110, 116, 115, 0, 0, 0, 0, 251, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 95, 115, 255, 116, 109, 116, 255, 95, 99, 97, 99, 104, 255, 101, 95, 255, 115, 105, 122, 101, 0, 0, 253, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 7, version: 37, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 338, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 339, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 340, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 578, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 338, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=578] [region_id=337]
[2019/05/01 12:36:35.365 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 579, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=13] [term=7] [peer_id=381] [region_id=56]
[2019/05/01 12:36:35.365 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 6, version: 18, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=381] [region_id=56]
[2019/05/01 12:36:35.365 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 56, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 95, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 105, 0, 0, 0, 0, 0, 0, 0, 248], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 18, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 57, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 381, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 387, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 579, store_id: 3, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 579, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=381] [region_id=56]
[2019/05/01 12:36:35.425 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 57, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=14] [term=7] [peer_id=381] [region_id=56]
[2019/05/01 12:36:35.425 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 7, version: 18, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=381] [region_id=56]
[2019/05/01 12:36:35.425 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 56, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 95, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 105, 0, 0, 0, 0, 0, 0, 0, 248], region_epoch: Some(RegionEpoch { conf_ver: 7, version: 18, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 57, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 381, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 387, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 579, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 57, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=381] [region_id=56]
[2019/05/01 12:36:35.775 -07:00] [INFO] [unknown:841] ["New connected subchannel at 0x7f041f041b70 for subchannel 0x7f04cf87c200"]
[2019/05/01 12:36:35.786 -07:00] [INFO] [snap.rs:389] ["sent snapshot"] [duration=12.628347ms] [size=1339] [snap_key=114_7_11] [region_id=114]
[2019/05/01 12:36:35.787 -07:00] [INFO] [peer.rs:538] ["report snapshot status"] [status=Finish] [to="Peer { id: 581, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=257] [region_id=114]
[2019/05/01 12:36:36.026 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 580, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=25] [term=7] [peer_id=378] [region_id=32]
[2019/05/01 12:36:36.026 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 6, version: 10, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=378] [region_id=32]
[2019/05/01 12:36:36.026 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 32, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 49, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 55, 0, 0, 0, 0, 0, 0, 0, 248], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 10, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 33, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 331, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 378, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 580, store_id: 3, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 580, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=378] [region_id=32]
[2019/05/01 12:36:36.101 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 33, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=26] [term=7] [peer_id=378] [region_id=32]
[2019/05/01 12:36:36.101 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 7, version: 10, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=378] [region_id=32]
[2019/05/01 12:36:36.101 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 32, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 49, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 55, 0, 0, 0, 0, 0, 0, 0, 248], region_epoch: Some(RegionEpoch { conf_ver: 7, version: 10, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 33, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 331, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 378, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 580, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 33, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=378] [region_id=32]
[2019/05/01 12:36:36.744 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=663] [region_id=421]
[2019/05/01 12:36:36.744 -07:00] [INFO] [unknown:719] ["[region 421] 663 became follower at term 0"]
[2019/05/01 12:36:36.745 -07:00] [INFO] [unknown:295] ["[region 421] 663 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:36:36.745 -07:00] [INFO] [unknown:719] ["[region 421] 663 became follower at term 1"]
[2019/05/01 12:36:36.745 -07:00] [INFO] [unknown:920] ["[region 421] 663 [term: 1] received a MsgHeartbeat message with higher term from 423 [term: 7]"]
[2019/05/01 12:36:36.745 -07:00] [INFO] [unknown:719] ["[region 421] 663 became follower at term 7"]
[2019/05/01 12:36:36.775 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=664] [region_id=245]
[2019/05/01 12:36:36.775 -07:00] [INFO] [unknown:719] ["[region 245] 664 became follower at term 0"]
[2019/05/01 12:36:36.775 -07:00] [INFO] [unknown:295] ["[region 245] 664 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:36:36.775 -07:00] [INFO] [unknown:719] ["[region 245] 664 became follower at term 1"]
[2019/05/01 12:36:36.775 -07:00] [INFO] [unknown:920] ["[region 245] 664 [term: 1] received a MsgHeartbeat message with higher term from 248 [term: 7]"]
[2019/05/01 12:36:36.775 -07:00] [INFO] [unknown:719] ["[region 245] 664 became follower at term 7"]
[2019/05/01 12:36:36.775 -07:00] [INFO] [pd.rs:558] ["try to change peer"] [peer="Peer { id: 581, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [change_type=AddNode] [region_id=114]
[2019/05/01 12:36:36.775 -07:00] [INFO] [peer.rs:1953] ["propose conf change peer"] [change_peer=581] [change_type=AddNode] [peer_id=257] [region_id=114]
[2019/05/01 12:36:36.804 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 581, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=12] [term=7] [peer_id=257] [region_id=114]
[2019/05/01 12:36:36.804 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 6, version: 17, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=257] [region_id=114]
[2019/05/01 12:36:36.804 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 114, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 97, 115, 101, 255, 100, 105, 114, 0, 254, 0, 0, 0, 252], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 103, 95, 255, 116, 97, 98, 108, 255, 101, 115, 0, 255, 0, 0, 0, 0, 0, 249, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 17, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 115, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 116, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 257, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 581, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 581, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=257] [region_id=114]
[2019/05/01 12:36:36.812 -07:00] [INFO] [peer.rs:1318] ["notify pd with change peer region"] [region="Region { id: 114, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 97, 115, 101, 255, 100, 105, 114, 0, 254, 0, 0, 0, 252], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 103, 95, 255, 116, 97, 98, 108, 255, 101, 115, 0, 255, 0, 0, 0, 0, 0, 249, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 7, version: 17, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 115, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 116, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 257, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 581, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=257] [region_id=114]
[2019/05/01 12:36:36.831 -07:00] [INFO] [pd.rs:558] ["try to change peer"] [peer="Peer { id: 115, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [change_type=RemoveNode] [region_id=114]
[2019/05/01 12:36:36.831 -07:00] [INFO] [pd.rs:558] ["try to change peer"] [peer="Peer { id: 115, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [change_type=RemoveNode] [region_id=114]
[2019/05/01 12:36:36.831 -07:00] [INFO] [peer.rs:1953] ["propose conf change peer"] [change_peer=115] [change_type=RemoveNode] [peer_id=257] [region_id=114]
[2019/05/01 12:36:36.862 -07:00] [INFO] [peer.rs:1927] ["there is a pending conf change, try later"] [peer_id=257] [region_id=114]
[2019/05/01 12:36:36.878 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 115, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=13] [term=7] [peer_id=257] [region_id=114]
[2019/05/01 12:36:36.878 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 7, version: 17, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=257] [region_id=114]
[2019/05/01 12:36:36.878 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 114, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 97, 115, 101, 255, 100, 105, 114, 0, 254, 0, 0, 0, 252], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 103, 95, 255, 116, 97, 98, 108, 255, 101, 115, 0, 255, 0, 0, 0, 0, 0, 249, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 7, version: 17, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 115, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 116, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 257, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 581, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 115, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=257] [region_id=114]
[2019/05/01 12:36:36.889 -07:00] [INFO] [peer.rs:1318] ["notify pd with change peer region"] [region="Region { id: 114, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 97, 115, 101, 255, 100, 105, 114, 0, 254, 0, 0, 0, 252], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 103, 95, 255, 116, 97, 98, 108, 255, 101, 115, 0, 255, 0, 0, 0, 0, 0, 249, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 8, version: 17, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 116, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 257, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 581, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=257] [region_id=114]
[2019/05/01 12:36:36.964 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddLearnerNode, peer: Some(Peer { id: 665, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=11] [term=7] [peer_id=326] [region_id=144]
[2019/05/01 12:36:36.964 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 5, version: 18, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddLearner] [peer_id=326] [region_id=144]
[2019/05/01 12:36:36.964 -07:00] [INFO] [apply.rs:1476] ["add learner successfully"] [region="Region { id: 144, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 114, 128, 0, 0, 0, 0, 255, 0, 0, 1, 0, 0, 0, 0, 0, 250], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 114, 128, 0, 0, 0, 0, 255, 0, 0, 3, 0, 0, 0, 0, 0, 250], region_epoch: Some(RegionEpoch { conf_ver: 5, version: 18, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 145, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 146, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 326, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 665, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=326] [region_id=144]
[2019/05/01 12:36:38.748 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_421_7_8_(default|lock|write).sst] [snap_key=421_7_8]
[2019/05/01 12:36:38.757 -07:00] [INFO] [unknown:1792] ["[region 421] 663 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 8, term: 7]"]
[2019/05/01 12:36:38.757 -07:00] [INFO] [unknown:1816] ["[region 421] 663 restored progress of 422 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:36:38.757 -07:00] [INFO] [unknown:1816] ["[region 421] 663 restored progress of 423 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:36:38.757 -07:00] [INFO] [unknown:1816] ["[region 421] 663 restored progress of 424 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:36:38.757 -07:00] [INFO] [unknown:1816] ["[region 421] 663 restored progress of 663 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:36:38.757 -07:00] [INFO] [unknown:474] ["[region 421] 663 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 8, term: 7]"]
[2019/05/01 12:36:38.757 -07:00] [INFO] [unknown:1736] ["[region 421] 663 [commit: 8] restored snapshot [index: 8, term: 7]"]
[2019/05/01 12:36:38.757 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=663] [region_id=421]
[2019/05/01 12:36:38.757 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 8, truncated_state: Some(RaftTruncatedState { index: 8, term: 7, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 421, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 99, 111, 108, 108, 255, 97, 116, 105, 111, 255, 110, 95, 115, 255, 101, 114, 118, 101, 114, 255, 0, 0, 255, 0, 0, 0, 0, 0, 0, 247, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 99, 111, 109, 112, 255, 108, 101, 116, 105, 255, 111, 110, 95, 255, 116, 121, 112, 101, 0, 254, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 47, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 422, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 423, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 424, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 663, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=663] [region_id=421]
[2019/05/01 12:36:38.775 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 421, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 99, 111, 108, 108, 255, 97, 116, 105, 111, 255, 110, 95, 115, 255, 101, 114, 118, 101, 114, 255, 0, 0, 255, 0, 0, 0, 0, 0, 0, 247, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 99, 111, 109, 112, 255, 108, 101, 116, 105, 255, 111, 110, 95, 255, 116, 121, 112, 101, 0, 254, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 47, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 422, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 423, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 424, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 663, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=663] [region_id=421]
[2019/05/01 12:36:38.775 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=421]
[2019/05/01 12:36:38.775 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 421] 663"]
[2019/05/01 12:36:38.778 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_245_7_8_(default|lock|write).sst] [snap_key=245_7_8]
[2019/05/01 12:36:38.796 -07:00] [INFO] [unknown:1792] ["[region 245] 664 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 8, term: 7]"]
[2019/05/01 12:36:38.796 -07:00] [INFO] [unknown:1816] ["[region 245] 664 restored progress of 246 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:36:38.796 -07:00] [INFO] [unknown:1816] ["[region 245] 664 restored progress of 247 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:36:38.796 -07:00] [INFO] [unknown:1816] ["[region 245] 664 restored progress of 248 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:36:38.796 -07:00] [INFO] [unknown:1816] ["[region 245] 664 restored progress of 664 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:36:38.796 -07:00] [INFO] [unknown:474] ["[region 245] 664 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 8, term: 7]"]
[2019/05/01 12:36:38.796 -07:00] [INFO] [unknown:1736] ["[region 245] 664 [commit: 8] restored snapshot [index: 8, term: 7]"]
[2019/05/01 12:36:38.796 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=664] [region_id=245]
[2019/05/01 12:36:38.796 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 8, truncated_state: Some(RaftTruncatedState { index: 8, term: 7, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 245, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 95, 109, 255, 97, 120, 95, 255, 102, 108, 117, 115, 104, 255, 95, 113, 255, 117, 101, 117, 101, 95, 116, 255, 105, 255, 109, 101, 0, 0, 0, 0, 0, 250, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 95, 111, 255, 114, 100, 101, 255, 114, 95, 99, 111, 109, 255, 109, 105, 255, 116, 115, 0, 0, 0, 0, 251, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 27, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 246, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 247, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 248, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 664, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=664] [region_id=245]
[2019/05/01 12:36:38.820 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 245] 664"]
[2019/05/01 12:36:38.820 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 245, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 95, 109, 255, 97, 120, 95, 255, 102, 108, 117, 115, 104, 255, 95, 113, 255, 117, 101, 117, 101, 95, 116, 255, 105, 255, 109, 101, 0, 0, 0, 0, 0, 250, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 95, 111, 255, 114, 100, 101, 255, 114, 95, 99, 111, 109, 255, 109, 105, 255, 116, 115, 0, 0, 0, 0, 251, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 27, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 246, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 247, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 248, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 664, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=664] [region_id=245]
[2019/05/01 12:36:38.820 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=45.600671ms] [region_id=421]
[2019/05/01 12:36:38.820 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=245]
[2019/05/01 12:36:38.839 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=17.992777ms] [region_id=245]
[2019/05/01 12:36:39.781 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 663, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=9] [term=7] [peer_id=663] [region_id=421]
[2019/05/01 12:36:39.781 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 6, version: 47, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=663] [region_id=421]
[2019/05/01 12:36:39.781 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 421, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 99, 111, 108, 108, 255, 97, 116, 105, 111, 255, 110, 95, 115, 255, 101, 114, 118, 101, 114, 255, 0, 0, 255, 0, 0, 0, 0, 0, 0, 247, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 99, 111, 109, 112, 255, 108, 101, 116, 105, 255, 111, 110, 95, 255, 116, 121, 112, 101, 0, 254, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 47, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 422, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 423, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 424, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 663, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 663, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=663] [region_id=421]
[2019/05/01 12:36:39.873 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 664, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=9] [term=7] [peer_id=664] [region_id=245]
[2019/05/01 12:36:39.873 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 6, version: 27, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=664] [region_id=245]
[2019/05/01 12:36:39.873 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 245, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 95, 109, 255, 97, 120, 95, 255, 102, 108, 117, 115, 104, 255, 95, 113, 255, 117, 101, 117, 101, 95, 116, 255, 105, 255, 109, 101, 0, 0, 0, 0, 0, 250, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 95, 111, 255, 114, 100, 101, 255, 114, 95, 99, 111, 109, 255, 109, 105, 255, 116, 115, 0, 0, 0, 0, 251, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 27, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 246, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 247, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 248, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 664, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 664, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=664] [region_id=245]
[2019/05/01 12:36:39.929 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 422, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=10] [term=7] [peer_id=663] [region_id=421]
[2019/05/01 12:36:39.929 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 7, version: 47, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=663] [region_id=421]
[2019/05/01 12:36:39.929 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 421, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 99, 111, 108, 108, 255, 97, 116, 105, 111, 255, 110, 95, 115, 255, 101, 114, 118, 101, 114, 255, 0, 0, 255, 0, 0, 0, 0, 0, 0, 247, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 99, 111, 109, 112, 255, 108, 101, 116, 105, 255, 111, 110, 95, 255, 116, 121, 112, 101, 0, 254, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 7, version: 47, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 422, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 423, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 424, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 663, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 422, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=663] [region_id=421]
[2019/05/01 12:36:39.965 -07:00] [INFO] [pd.rs:558] ["try to change peer"] [peer="Peer { id: 666, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [change_type=AddLearnerNode] [region_id=126]
[2019/05/01 12:36:39.965 -07:00] [INFO] [peer.rs:1953] ["propose conf change peer"] [change_peer=666] [change_type=AddLearnerNode] [peer_id=162] [region_id=126]
[2019/05/01 12:36:39.993 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddLearnerNode, peer: Some(Peer { id: 666, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=11] [term=7] [peer_id=162] [region_id=126]
[2019/05/01 12:36:39.993 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 5, version: 18, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddLearner] [peer_id=162] [region_id=126]
[2019/05/01 12:36:39.993 -07:00] [INFO] [apply.rs:1476] ["add learner successfully"] [region="Region { id: 126, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 116, 105, 100, 98, 255, 95, 115, 101, 114, 255, 118, 101, 114, 255, 95, 118, 101, 114, 115, 255, 105, 111, 255, 110, 0, 0, 0, 0, 0, 250, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 5, version: 18, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 127, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 128, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 162, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 666, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=162] [region_id=126]
[2019/05/01 12:36:40.019 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 246, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=10] [term=7] [peer_id=664] [region_id=245]
[2019/05/01 12:36:40.019 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 7, version: 27, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=664] [region_id=245]
[2019/05/01 12:36:40.019 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 245, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 95, 109, 255, 97, 120, 95, 255, 102, 108, 117, 115, 104, 255, 95, 113, 255, 117, 101, 117, 101, 95, 116, 255, 105, 255, 109, 101, 0, 0, 0, 0, 0, 250, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 95, 111, 255, 114, 100, 101, 255, 114, 95, 99, 111, 109, 255, 109, 105, 255, 116, 115, 0, 0, 0, 0, 251, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 7, version: 27, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 246, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 247, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 248, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 664, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 246, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=664] [region_id=245]
[2019/05/01 12:36:40.019 -07:00] [INFO] [peer.rs:1318] ["notify pd with change peer region"] [region="Region { id: 126, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 116, 105, 100, 98, 255, 95, 115, 101, 114, 255, 118, 101, 114, 255, 95, 118, 101, 114, 115, 255, 105, 111, 255, 110, 0, 0, 0, 0, 0, 250, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 18, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 127, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 128, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 162, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 666, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=162] [region_id=126]
[2019/05/01 12:36:40.086 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddLearnerNode, peer: Some(Peer { id: 667, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=11] [term=7] [peer_id=273] [region_id=129]
[2019/05/01 12:36:40.086 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 5, version: 18, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddLearner] [peer_id=273] [region_id=129]
[2019/05/01 12:36:40.086 -07:00] [INFO] [apply.rs:1476] ["add learner successfully"] [region="Region { id: 129, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 116, 105, 100, 98, 255, 95, 115, 101, 114, 255, 118, 101, 114, 255, 95, 118, 101, 114, 115, 255, 105, 111, 255, 110, 0, 0, 0, 0, 0, 250, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 116, 105, 107, 118, 255, 95, 103, 99, 95, 255, 101, 110, 97, 255, 98, 108, 101, 0, 0, 253, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 5, version: 18, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 130, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 131, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 273, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 667, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=273] [region_id=129]
[2019/05/01 12:36:40.155 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 665, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=12] [term=7] [peer_id=326] [region_id=144]
[2019/05/01 12:36:40.155 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 6, version: 18, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=326] [region_id=144]
[2019/05/01 12:36:40.155 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 144, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 114, 128, 0, 0, 0, 0, 255, 0, 0, 1, 0, 0, 0, 0, 0, 250], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 114, 128, 0, 0, 0, 0, 255, 0, 0, 3, 0, 0, 0, 0, 0, 250], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 18, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 145, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 146, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 326, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 665, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 665, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=326] [region_id=144]
[2019/05/01 12:36:40.192 -07:00] [INFO] [peer_storage.rs:759] ["requesting snapshot"] [peer_id=162] [region_id=126]
[2019/05/01 12:36:40.193 -07:00] [INFO] [snap.rs:757] ["scan snapshot of one cf"] [size=0] [key_count=0] [cf=default] [snapshot=/opt/tidb/data/kv/snap/gen_126_7_11_(default|lock|write).sst] [region_id=126]
[2019/05/01 12:36:40.193 -07:00] [INFO] [snap.rs:757] ["scan snapshot of one cf"] [size=0] [key_count=0] [cf=lock] [snapshot=/opt/tidb/data/kv/snap/gen_126_7_11_(default|lock|write).sst] [region_id=126]
[2019/05/01 12:36:40.193 -07:00] [INFO] [snap.rs:757] ["scan snapshot of one cf"] [size=148] [key_count=2] [cf=write] [snapshot=/opt/tidb/data/kv/snap/gen_126_7_11_(default|lock|write).sst] [region_id=126]
[2019/05/01 12:36:40.201 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 145, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=13] [term=7] [peer_id=326] [region_id=144]
[2019/05/01 12:36:40.202 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 7, version: 18, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=326] [region_id=144]
[2019/05/01 12:36:40.202 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 144, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 114, 128, 0, 0, 0, 0, 255, 0, 0, 1, 0, 0, 0, 0, 0, 250], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 114, 128, 0, 0, 0, 0, 255, 0, 0, 3, 0, 0, 0, 0, 0, 250], region_epoch: Some(RegionEpoch { conf_ver: 7, version: 18, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 145, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 146, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 326, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 665, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 145, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=326] [region_id=144]
[2019/05/01 12:36:40.204 -07:00] [INFO] [snap.rs:875] ["scan snapshot"] [takes=11.667741ms] [size=1442] [key_count=2] [snapshot=/opt/tidb/data/kv/snap/gen_126_7_11_(default|lock|write).sst] [region_id=126]
[2019/05/01 12:36:40.781 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=669] [region_id=497]
[2019/05/01 12:36:40.781 -07:00] [INFO] [unknown:719] ["[region 497] 669 became follower at term 0"]
[2019/05/01 12:36:40.782 -07:00] [INFO] [unknown:295] ["[region 497] 669 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:36:40.782 -07:00] [INFO] [unknown:719] ["[region 497] 669 became follower at term 1"]
[2019/05/01 12:36:40.782 -07:00] [INFO] [unknown:920] ["[region 497] 669 [term: 1] received a MsgHeartbeat message with higher term from 500 [term: 7]"]
[2019/05/01 12:36:40.782 -07:00] [INFO] [unknown:719] ["[region 497] 669 became follower at term 7"]
[2019/05/01 12:36:41.804 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=668] [region_id=598]
[2019/05/01 12:36:41.804 -07:00] [INFO] [unknown:719] ["[region 598] 668 became follower at term 0"]
[2019/05/01 12:36:41.804 -07:00] [INFO] [unknown:295] ["[region 598] 668 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:36:41.804 -07:00] [INFO] [unknown:719] ["[region 598] 668 became follower at term 1"]
[2019/05/01 12:36:41.804 -07:00] [INFO] [unknown:920] ["[region 598] 668 [term: 1] received a MsgHeartbeat message with higher term from 600 [term: 7]"]
[2019/05/01 12:36:41.804 -07:00] [INFO] [unknown:719] ["[region 598] 668 became follower at term 7"]
[2019/05/01 12:36:42.137 -07:00] [INFO] [unknown:841] ["New connected subchannel at 0x7f041ea01f60 for subchannel 0x7f04cf87c400"]
[2019/05/01 12:36:42.144 -07:00] [INFO] [snap.rs:389] ["sent snapshot"] [duration=7.60672ms] [size=1442] [snap_key=126_7_11] [region_id=126]
[2019/05/01 12:36:42.144 -07:00] [INFO] [peer.rs:538] ["report snapshot status"] [status=Finish] [to="Peer { id: 666, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=162] [region_id=126]
[2019/05/01 12:36:42.785 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_497_7_8_(default|lock|write).sst] [snap_key=497_7_8]
[2019/05/01 12:36:42.796 -07:00] [INFO] [unknown:1792] ["[region 497] 669 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 8, term: 7]"]
[2019/05/01 12:36:42.796 -07:00] [INFO] [unknown:1816] ["[region 497] 669 restored progress of 498 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:36:42.796 -07:00] [INFO] [unknown:1816] ["[region 497] 669 restored progress of 499 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:36:42.796 -07:00] [INFO] [unknown:1816] ["[region 497] 669 restored progress of 500 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:36:42.796 -07:00] [INFO] [unknown:1816] ["[region 497] 669 restored progress of 669 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:36:42.796 -07:00] [INFO] [unknown:474] ["[region 497] 669 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 8, term: 7]"]
[2019/05/01 12:36:42.796 -07:00] [INFO] [unknown:1736] ["[region 497] 669 [commit: 8] restored snapshot [index: 8, term: 7]"]
[2019/05/01 12:36:42.796 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=669] [region_id=497]
[2019/05/01 12:36:42.796 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 8, truncated_state: Some(RaftTruncatedState { index: 8, term: 7, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 497, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 100, 101, 108, 97, 255, 121, 101, 100, 95, 255, 105, 110, 115, 255, 101, 114, 116, 95, 116, 255, 105, 109, 255, 101, 111, 117, 116, 0, 0, 253, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 100, 101, 108, 97, 255, 121, 101, 100, 95, 255, 113, 117, 101, 255, 117, 101, 95, 115, 105, 255, 122, 101, 255, 0, 0, 0, 0, 0, 0, 249, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 67, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 498, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 499, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 500, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 669, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=669] [region_id=497]
[2019/05/01 12:36:42.820 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 497] 669"]
[2019/05/01 12:36:42.820 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 497, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 100, 101, 108, 97, 255, 121, 101, 100, 95, 255, 105, 110, 115, 255, 101, 114, 116, 95, 116, 255, 105, 109, 255, 101, 111, 117, 116, 0, 0, 253, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 100, 101, 108, 97, 255, 121, 101, 100, 95, 255, 113, 117, 101, 255, 117, 101, 95, 115, 105, 255, 122, 101, 255, 0, 0, 0, 0, 0, 0, 249, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 67, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 498, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 499, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 500, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 669, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=669] [region_id=497]
[2019/05/01 12:36:42.820 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=497]
[2019/05/01 12:36:42.845 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=24.481885ms] [region_id=497]
[2019/05/01 12:36:43.158 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 667, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=12] [term=7] [peer_id=273] [region_id=129]
[2019/05/01 12:36:43.158 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 6, version: 18, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=273] [region_id=129]
[2019/05/01 12:36:43.158 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 129, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 116, 105, 100, 98, 255, 95, 115, 101, 114, 255, 118, 101, 114, 255, 95, 118, 101, 114, 115, 255, 105, 111, 255, 110, 0, 0, 0, 0, 0, 250, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 116, 105, 107, 118, 255, 95, 103, 99, 95, 255, 101, 110, 97, 255, 98, 108, 101, 0, 0, 253, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 18, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 130, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 131, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 273, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 667, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 667, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=273] [region_id=129]
[2019/05/01 12:36:43.162 -07:00] [INFO] [pd.rs:558] ["try to change peer"] [peer="Peer { id: 666, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [change_type=AddNode] [region_id=126]
[2019/05/01 12:36:43.162 -07:00] [INFO] [peer.rs:1953] ["propose conf change peer"] [change_peer=666] [change_type=AddNode] [peer_id=162] [region_id=126]
[2019/05/01 12:36:43.192 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 666, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=12] [term=7] [peer_id=162] [region_id=126]
[2019/05/01 12:36:43.192 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 6, version: 18, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=162] [region_id=126]
[2019/05/01 12:36:43.192 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 126, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 116, 105, 100, 98, 255, 95, 115, 101, 114, 255, 118, 101, 114, 255, 95, 118, 101, 114, 115, 255, 105, 111, 255, 110, 0, 0, 0, 0, 0, 250, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 18, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 127, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 128, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 162, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 666, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 666, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=162] [region_id=126]
[2019/05/01 12:36:43.226 -07:00] [INFO] [peer.rs:1318] ["notify pd with change peer region"] [region="Region { id: 126, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 116, 105, 100, 98, 255, 95, 115, 101, 114, 255, 118, 101, 114, 255, 95, 118, 101, 114, 115, 255, 105, 111, 255, 110, 0, 0, 0, 0, 0, 250, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 7, version: 18, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 127, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 128, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 162, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 666, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=162] [region_id=126]
[2019/05/01 12:36:43.226 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 130, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=13] [term=7] [peer_id=273] [region_id=129]
[2019/05/01 12:36:43.226 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 7, version: 18, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=273] [region_id=129]
[2019/05/01 12:36:43.226 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 129, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 116, 105, 100, 98, 255, 95, 115, 101, 114, 255, 118, 101, 114, 255, 95, 118, 101, 114, 115, 255, 105, 111, 255, 110, 0, 0, 0, 0, 0, 250, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 116, 105, 107, 118, 255, 95, 103, 99, 95, 255, 101, 110, 97, 255, 98, 108, 101, 0, 0, 253, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 7, version: 18, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 130, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 131, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 273, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 667, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 130, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=273] [region_id=129]
[2019/05/01 12:36:43.235 -07:00] [INFO] [pd.rs:558] ["try to change peer"] [peer="Peer { id: 127, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [change_type=RemoveNode] [region_id=126]
[2019/05/01 12:36:43.235 -07:00] [INFO] [peer.rs:1953] ["propose conf change peer"] [change_peer=127] [change_type=RemoveNode] [peer_id=162] [region_id=126]
[2019/05/01 12:36:43.278 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 127, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=13] [term=7] [peer_id=162] [region_id=126]
[2019/05/01 12:36:43.278 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 7, version: 18, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=162] [region_id=126]
[2019/05/01 12:36:43.278 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 126, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 116, 105, 100, 98, 255, 95, 115, 101, 114, 255, 118, 101, 114, 255, 95, 118, 101, 114, 115, 255, 105, 111, 255, 110, 0, 0, 0, 0, 0, 250, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 7, version: 18, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 127, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 128, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 162, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 666, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 127, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=162] [region_id=126]
[2019/05/01 12:36:43.280 -07:00] [INFO] [pd.rs:558] ["try to change peer"] [peer="Peer { id: 127, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [change_type=RemoveNode] [region_id=126]
[2019/05/01 12:36:43.280 -07:00] [INFO] [peer.rs:1927] ["there is a pending conf change, try later"] [peer_id=162] [region_id=126]
[2019/05/01 12:36:43.283 -07:00] [INFO] [peer.rs:1318] ["notify pd with change peer region"] [region="Region { id: 126, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 116, 105, 100, 98, 255, 95, 115, 101, 114, 255, 118, 101, 114, 255, 95, 118, 101, 114, 115, 255, 105, 111, 255, 110, 0, 0, 0, 0, 0, 250, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 8, version: 18, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 128, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 162, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 666, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=162] [region_id=126]
[2019/05/01 12:36:43.885 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 669, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=9] [term=7] [peer_id=669] [region_id=497]
[2019/05/01 12:36:43.885 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 6, version: 67, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=669] [region_id=497]
[2019/05/01 12:36:43.885 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 497, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 100, 101, 108, 97, 255, 121, 101, 100, 95, 255, 105, 110, 115, 255, 101, 114, 116, 95, 116, 255, 105, 109, 255, 101, 111, 117, 116, 0, 0, 253, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 100, 101, 108, 97, 255, 121, 101, 100, 95, 255, 113, 117, 101, 255, 117, 101, 95, 115, 105, 255, 122, 101, 255, 0, 0, 0, 0, 0, 0, 249, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 67, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 498, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 499, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 500, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 669, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 669, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=669] [region_id=497]
[2019/05/01 12:36:43.886 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_598_7_8_(default|lock|write).sst] [snap_key=598_7_8]
[2019/05/01 12:36:43.966 -07:00] [INFO] [unknown:1792] ["[region 598] 668 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 8, term: 7]"]
[2019/05/01 12:36:43.966 -07:00] [INFO] [unknown:1816] ["[region 598] 668 restored progress of 599 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:36:43.966 -07:00] [INFO] [unknown:1816] ["[region 598] 668 restored progress of 600 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:36:43.966 -07:00] [INFO] [unknown:1816] ["[region 598] 668 restored progress of 601 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:36:43.966 -07:00] [INFO] [unknown:1816] ["[region 598] 668 restored progress of 668 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:36:43.966 -07:00] [INFO] [unknown:474] ["[region 598] 668 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 8, term: 7]"]
[2019/05/01 12:36:43.966 -07:00] [INFO] [unknown:1736] ["[region 598] 668 [commit: 8] restored snapshot [index: 8, term: 7]"]
[2019/05/01 12:36:43.966 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=668] [region_id=598]
[2019/05/01 12:36:43.966 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 8, truncated_state: Some(RaftTruncatedState { index: 8, term: 7, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 598, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 102, 111, 114, 101, 255, 105, 103, 110, 95, 255, 107, 101, 121, 255, 95, 99, 104, 101, 99, 255, 107, 115, 255, 0, 0, 0, 0, 0, 0, 249, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 102, 116, 95, 98, 255, 111, 111, 108, 101, 255, 97, 110, 95, 255, 115, 121, 110, 116, 97, 255, 120, 0, 255, 0, 0, 0, 0, 0, 0, 248, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 77, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 599, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 600, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 601, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 668, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=668] [region_id=598]
[2019/05/01 12:36:43.996 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 598, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 102, 111, 114, 101, 255, 105, 103, 110, 95, 255, 107, 101, 121, 255, 95, 99, 104, 101, 99, 255, 107, 115, 255, 0, 0, 0, 0, 0, 0, 249, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 102, 116, 95, 98, 255, 111, 111, 108, 101, 255, 97, 110, 95, 255, 115, 121, 110, 116, 97, 255, 120, 0, 255, 0, 0, 0, 0, 0, 0, 248, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 77, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 599, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 600, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 601, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 668, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=668] [region_id=598]
[2019/05/01 12:36:43.996 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 598] 668"]
[2019/05/01 12:36:43.996 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=598]
[2019/05/01 12:36:44.066 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=69.386384ms] [region_id=598]
[2019/05/01 12:36:44.131 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 499, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=10] [term=7] [peer_id=669] [region_id=497]
[2019/05/01 12:36:44.131 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 7, version: 67, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=669] [region_id=497]
[2019/05/01 12:36:44.131 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 497, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 100, 101, 108, 97, 255, 121, 101, 100, 95, 255, 105, 110, 115, 255, 101, 114, 116, 95, 116, 255, 105, 109, 255, 101, 111, 117, 116, 0, 0, 253, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 100, 101, 108, 97, 255, 121, 101, 100, 95, 255, 113, 117, 101, 255, 117, 101, 95, 115, 105, 255, 122, 101, 255, 0, 0, 0, 0, 0, 0, 249, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 7, version: 67, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 498, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 499, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 500, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 669, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 499, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=669] [region_id=497]
[2019/05/01 12:36:44.253 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: BatchSplit, change_peer: None, split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: Some(BatchSplitRequest { requests: [SplitRequest { split_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 108, 95, 114, 128, 0, 0, 0, 0, 255, 0, 0, 3, 0, 0, 0, 0, 0, 250], new_region_id: 745, new_peer_ids: [746, 747, 748], right_derive: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], right_derive: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=4816] [term=7] [peer_id=386] [region_id=4]
[2019/05/01 12:36:44.253 -07:00] [INFO] [apply.rs:1582] ["split region"] [keys="[[116, 128, 0, 0, 0, 0, 0, 0, 255, 108, 95, 114, 128, 0, 0, 0, 0, 255, 0, 0, 3, 0, 0, 0, 0, 0, 250]]"] [region="Region { id: 4, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 108, 95, 114, 128, 0, 0, 0, 0, 255, 0, 0, 2, 0, 0, 0, 0, 0, 250], end_key: [], region_epoch: Some(RegionEpoch { conf_ver: 5, version: 22, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 5, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 386, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 393, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=386] [region_id=4]
[2019/05/01 12:36:44.260 -07:00] [INFO] [peer.rs:1424] ["insert new region"] [region="Region { id: 745, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 108, 95, 114, 128, 0, 0, 0, 0, 255, 0, 0, 2, 0, 0, 0, 0, 0, 250], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 108, 95, 114, 128, 0, 0, 0, 0, 255, 0, 0, 3, 0, 0, 0, 0, 0, 250], region_epoch: Some(RegionEpoch { conf_ver: 5, version: 23, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 746, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 747, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 748, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region_id=745]
[2019/05/01 12:36:44.260 -07:00] [INFO] [peer.rs:127] ["create peer"] [peer_id=747] [region_id=745]
[2019/05/01 12:36:44.261 -07:00] [INFO] [unknown:719] ["[region 745] 747 became follower at term 5"]
[2019/05/01 12:36:44.261 -07:00] [INFO] [unknown:295] ["[region 745] 747 newRaft [peers: [746, 747, 748], term: 5, commit: 5, applied: 5, last_index: 5, last_term: 5]"]
[2019/05/01 12:36:44.261 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 745] 747"]
[2019/05/01 12:36:44.261 -07:00] [INFO] [unknown:1083] ["[region 745] 747 [logterm: 5, index: 5, vote: 0] cast MsgRequestPreVote for 748 [logterm: 5, index: 5] at term 5"]
[2019/05/01 12:36:44.276 -07:00] [INFO] [unknown:920] ["[region 745] 747 [term: 5] received a MsgRequestVote message with higher term from 748 [term: 6]"]
[2019/05/01 12:36:44.276 -07:00] [INFO] [unknown:719] ["[region 745] 747 became follower at term 6"]
[2019/05/01 12:36:44.276 -07:00] [INFO] [unknown:1083] ["[region 745] 747 [logterm: 5, index: 5, vote: 0] cast MsgRequestVote for 748 [logterm: 5, index: 5] at term 6"]
[2019/05/01 12:36:44.849 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 668, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=9] [term=7] [peer_id=668] [region_id=598]
[2019/05/01 12:36:44.849 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 6, version: 77, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=668] [region_id=598]
[2019/05/01 12:36:44.849 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 598, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 102, 111, 114, 101, 255, 105, 103, 110, 95, 255, 107, 101, 121, 255, 95, 99, 104, 101, 99, 255, 107, 115, 255, 0, 0, 0, 0, 0, 0, 249, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 102, 116, 95, 98, 255, 111, 111, 108, 101, 255, 97, 110, 95, 255, 115, 121, 110, 116, 97, 255, 120, 0, 255, 0, 0, 0, 0, 0, 0, 248, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 77, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 599, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 600, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 601, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 668, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 668, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=668] [region_id=598]
[2019/05/01 12:36:44.916 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 599, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=10] [term=7] [peer_id=668] [region_id=598]
[2019/05/01 12:36:44.916 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 7, version: 77, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=668] [region_id=598]
[2019/05/01 12:36:44.916 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 598, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 102, 111, 114, 101, 255, 105, 103, 110, 95, 255, 107, 101, 121, 255, 95, 99, 104, 101, 99, 255, 107, 115, 255, 0, 0, 0, 0, 0, 0, 249, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 102, 116, 95, 98, 255, 111, 111, 108, 101, 255, 97, 110, 95, 255, 115, 121, 110, 116, 97, 255, 120, 0, 255, 0, 0, 0, 0, 0, 0, 248, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 7, version: 77, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 599, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 600, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 601, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 668, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 599, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=668] [region_id=598]
[2019/05/01 12:36:45.835 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=712] [region_id=586]
[2019/05/01 12:36:45.835 -07:00] [INFO] [unknown:719] ["[region 586] 712 became follower at term 0"]
[2019/05/01 12:36:45.835 -07:00] [INFO] [unknown:295] ["[region 586] 712 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:36:45.835 -07:00] [INFO] [unknown:719] ["[region 586] 712 became follower at term 1"]
[2019/05/01 12:36:45.835 -07:00] [INFO] [unknown:920] ["[region 586] 712 [term: 1] received a MsgHeartbeat message with higher term from 587 [term: 6]"]
[2019/05/01 12:36:45.835 -07:00] [INFO] [unknown:719] ["[region 586] 712 became follower at term 6"]
[2019/05/01 12:36:46.044 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=777] [region_id=28]
[2019/05/01 12:36:46.044 -07:00] [INFO] [unknown:719] ["[region 28] 777 became follower at term 0"]
[2019/05/01 12:36:46.044 -07:00] [INFO] [unknown:295] ["[region 28] 777 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:36:46.044 -07:00] [INFO] [unknown:719] ["[region 28] 777 became follower at term 1"]
[2019/05/01 12:36:46.044 -07:00] [INFO] [unknown:920] ["[region 28] 777 [term: 1] received a MsgHeartbeat message with higher term from 163 [term: 7]"]
[2019/05/01 12:36:46.044 -07:00] [INFO] [unknown:719] ["[region 28] 777 became follower at term 7"]
[2019/05/01 12:36:46.203 -07:00] [INFO] [unknown:1625] ["[region 245] 664 [term 7] received MsgTimeoutNow from 248 and starts an election to get leadership."]
[2019/05/01 12:36:46.203 -07:00] [INFO] [unknown:739] ["[region 245] 664 became candidate at term 8"]
[2019/05/01 12:36:46.203 -07:00] [INFO] [unknown:854] ["[region 245] 664 received MsgRequestVoteResponse from 664 at term 8"]
[2019/05/01 12:36:46.203 -07:00] [INFO] [unknown:828] ["[region 245] 664 [logterm: 7, index: 10] sent MsgRequestVote request to 247 at term 8"]
[2019/05/01 12:36:46.203 -07:00] [INFO] [unknown:828] ["[region 245] 664 [logterm: 7, index: 10] sent MsgRequestVote request to 248 at term 8"]
[2019/05/01 12:36:46.305 -07:00] [INFO] [unknown:854] ["[region 245] 664 received MsgRequestVoteResponse from 247 at term 8"]
[2019/05/01 12:36:46.305 -07:00] [INFO] [unknown:1550] ["[region 245] 664 [quorum:2] has received 2 MsgRequestVoteResponse votes and 0 vote rejections"]
[2019/05/01 12:36:46.305 -07:00] [INFO] [unknown:789] ["[region 245] 664 became leader at term 8"]
[2019/05/01 12:36:47.749 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=778] [region_id=448]
[2019/05/01 12:36:47.749 -07:00] [INFO] [unknown:719] ["[region 448] 778 became follower at term 0"]
[2019/05/01 12:36:47.749 -07:00] [INFO] [unknown:295] ["[region 448] 778 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:36:47.749 -07:00] [INFO] [unknown:719] ["[region 448] 778 became follower at term 1"]
[2019/05/01 12:36:47.749 -07:00] [INFO] [unknown:920] ["[region 448] 778 [term: 1] received a MsgHeartbeat message with higher term from 451 [term: 7]"]
[2019/05/01 12:36:47.749 -07:00] [INFO] [unknown:719] ["[region 448] 778 became follower at term 7"]
[2019/05/01 12:36:47.802 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=779] [region_id=602]
[2019/05/01 12:36:47.802 -07:00] [INFO] [unknown:719] ["[region 602] 779 became follower at term 0"]
[2019/05/01 12:36:47.802 -07:00] [INFO] [unknown:295] ["[region 602] 779 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:36:47.802 -07:00] [INFO] [unknown:719] ["[region 602] 779 became follower at term 1"]
[2019/05/01 12:36:47.802 -07:00] [INFO] [unknown:920] ["[region 602] 779 [term: 1] received a MsgHeartbeat message with higher term from 605 [term: 7]"]
[2019/05/01 12:36:47.802 -07:00] [INFO] [unknown:719] ["[region 602] 779 became follower at term 7"]
[2019/05/01 12:36:47.838 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_586_6_7_(default|lock|write).sst] [snap_key=586_6_7]
[2019/05/01 12:36:47.860 -07:00] [INFO] [unknown:1792] ["[region 586] 712 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 7, term: 6]"]
[2019/05/01 12:36:47.860 -07:00] [INFO] [unknown:1816] ["[region 586] 712 restored progress of 587 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:36:47.860 -07:00] [INFO] [unknown:1816] ["[region 586] 712 restored progress of 588 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:36:47.860 -07:00] [INFO] [unknown:1816] ["[region 586] 712 restored progress of 589 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:36:47.860 -07:00] [INFO] [unknown:1816] ["[region 586] 712 restored progress of 712 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:36:47.860 -07:00] [INFO] [unknown:474] ["[region 586] 712 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 7, term: 6]"]
[2019/05/01 12:36:47.860 -07:00] [INFO] [unknown:1736] ["[region 586] 712 [commit: 7] restored snapshot [index: 7, term: 6]"]
[2019/05/01 12:36:47.860 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=712] [region_id=586]
[2019/05/01 12:36:47.860 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 7, truncated_state: Some(RaftTruncatedState { index: 7, term: 6, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 586, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 101, 120, 112, 108, 255, 105, 99, 105, 116, 255, 95, 100, 101, 255, 102, 97, 117, 108, 116, 255, 115, 95, 255, 102, 111, 114, 95, 116, 105, 255, 109, 255, 101, 115, 116, 97, 109, 112, 0, 254, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 102, 108, 117, 115, 255, 104, 0, 0, 0, 252, 0, 0, 0, 252], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 77, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 587, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 588, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 589, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 712, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=712] [region_id=586]
[2019/05/01 12:36:47.911 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=586]
[2019/05/01 12:36:47.911 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 586, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 101, 120, 112, 108, 255, 105, 99, 105, 116, 255, 95, 100, 101, 255, 102, 97, 117, 108, 116, 255, 115, 95, 255, 102, 111, 114, 95, 116, 105, 255, 109, 255, 101, 115, 116, 97, 109, 112, 0, 254, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 102, 108, 117, 115, 255, 104, 0, 0, 0, 252, 0, 0, 0, 252], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 77, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 587, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 588, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 589, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 712, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=712] [region_id=586]
[2019/05/01 12:36:47.911 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 586] 712"]
[2019/05/01 12:36:47.949 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=37.475682ms] [region_id=586]
[2019/05/01 12:36:48.047 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_28_7_24_(default|lock|write).sst] [snap_key=28_7_24]
[2019/05/01 12:36:48.068 -07:00] [INFO] [unknown:1792] ["[region 28] 777 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 24, term: 7]"]
[2019/05/01 12:36:48.068 -07:00] [INFO] [unknown:1816] ["[region 28] 777 restored progress of 29 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:36:48.068 -07:00] [INFO] [unknown:1816] ["[region 28] 777 restored progress of 54 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:36:48.068 -07:00] [INFO] [unknown:1816] ["[region 28] 777 restored progress of 163 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:36:48.068 -07:00] [INFO] [unknown:1816] ["[region 28] 777 restored progress of 777 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:36:48.068 -07:00] [INFO] [unknown:474] ["[region 28] 777 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 24, term: 7]"]
[2019/05/01 12:36:48.068 -07:00] [INFO] [unknown:1736] ["[region 28] 777 [commit: 24] restored snapshot [index: 24, term: 7]"]
[2019/05/01 12:36:48.068 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=777] [region_id=28]
[2019/05/01 12:36:48.068 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 24, truncated_state: Some(RaftTruncatedState { index: 24, term: 7, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 28, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 114, 128, 0, 0, 0, 0, 255, 1, 212, 199, 0, 0, 0, 0, 0, 250], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 44, 0, 0, 0, 0, 0, 0, 0, 248], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 20, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 29, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 54, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 163, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 777, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=777] [region_id=28]
[2019/05/01 12:36:48.114 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 28] 777"]
[2019/05/01 12:36:48.114 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 28, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 114, 128, 0, 0, 0, 0, 255, 1, 212, 199, 0, 0, 0, 0, 0, 250], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 44, 0, 0, 0, 0, 0, 0, 0, 248], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 20, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 29, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 54, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 163, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 777, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=777] [region_id=28]
[2019/05/01 12:36:48.114 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=28]
[2019/05/01 12:36:48.205 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=90.529204ms] [region_id=28]
[2019/05/01 12:36:48.770 -07:00] [INFO] [unknown:1625] ["[region 598] 668 [term 7] received MsgTimeoutNow from 600 and starts an election to get leadership."]
[2019/05/01 12:36:48.770 -07:00] [INFO] [unknown:739] ["[region 598] 668 became candidate at term 8"]
[2019/05/01 12:36:48.770 -07:00] [INFO] [unknown:854] ["[region 598] 668 received MsgRequestVoteResponse from 668 at term 8"]
[2019/05/01 12:36:48.770 -07:00] [INFO] [unknown:828] ["[region 598] 668 [logterm: 7, index: 10] sent MsgRequestVote request to 601 at term 8"]
[2019/05/01 12:36:48.770 -07:00] [INFO] [unknown:828] ["[region 598] 668 [logterm: 7, index: 10] sent MsgRequestVote request to 600 at term 8"]
[2019/05/01 12:36:48.784 -07:00] [INFO] [unknown:854] ["[region 598] 668 received MsgRequestVoteResponse from 601 at term 8"]
[2019/05/01 12:36:48.784 -07:00] [INFO] [unknown:1550] ["[region 598] 668 [quorum:2] has received 2 MsgRequestVoteResponse votes and 0 vote rejections"]
[2019/05/01 12:36:48.784 -07:00] [INFO] [unknown:789] ["[region 598] 668 became leader at term 8"]
[2019/05/01 12:36:48.865 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 712, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=8] [term=6] [peer_id=712] [region_id=586]
[2019/05/01 12:36:48.865 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 6, version: 77, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=712] [region_id=586]
[2019/05/01 12:36:48.865 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 586, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 101, 120, 112, 108, 255, 105, 99, 105, 116, 255, 95, 100, 101, 255, 102, 97, 117, 108, 116, 255, 115, 95, 255, 102, 111, 114, 95, 116, 105, 255, 109, 255, 101, 115, 116, 97, 109, 112, 0, 254, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 102, 108, 117, 115, 255, 104, 0, 0, 0, 252, 0, 0, 0, 252], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 77, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 587, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 588, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 589, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 712, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 712, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=712] [region_id=586]
[2019/05/01 12:36:48.935 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 588, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=9] [term=6] [peer_id=712] [region_id=586]
[2019/05/01 12:36:48.935 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 7, version: 77, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=712] [region_id=586]
[2019/05/01 12:36:48.935 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 586, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 101, 120, 112, 108, 255, 105, 99, 105, 116, 255, 95, 100, 101, 255, 102, 97, 117, 108, 116, 255, 115, 95, 255, 102, 111, 114, 95, 116, 105, 255, 109, 255, 101, 115, 116, 97, 109, 112, 0, 254, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 102, 108, 117, 115, 255, 104, 0, 0, 0, 252, 0, 0, 0, 252], region_epoch: Some(RegionEpoch { conf_ver: 7, version: 77, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 587, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 588, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 589, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 712, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 588, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=712] [region_id=586]
[2019/05/01 12:36:49.099 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 777, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=25] [term=7] [peer_id=777] [region_id=28]
[2019/05/01 12:36:49.099 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 6, version: 20, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=777] [region_id=28]
[2019/05/01 12:36:49.099 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 28, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 114, 128, 0, 0, 0, 0, 255, 1, 212, 199, 0, 0, 0, 0, 0, 250], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 44, 0, 0, 0, 0, 0, 0, 0, 248], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 20, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 29, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 54, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 163, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 777, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 777, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=777] [region_id=28]
[2019/05/01 12:36:49.187 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 54, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=26] [term=7] [peer_id=777] [region_id=28]
[2019/05/01 12:36:49.187 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 7, version: 20, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=777] [region_id=28]
[2019/05/01 12:36:49.187 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 28, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 114, 128, 0, 0, 0, 0, 255, 1, 212, 199, 0, 0, 0, 0, 0, 250], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 44, 0, 0, 0, 0, 0, 0, 0, 248], region_epoch: Some(RegionEpoch { conf_ver: 7, version: 20, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 29, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 54, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 163, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 777, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 54, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=777] [region_id=28]
[2019/05/01 12:36:49.752 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_448_7_8_(default|lock|write).sst] [snap_key=448_7_8]
[2019/05/01 12:36:49.758 -07:00] [INFO] [unknown:1792] ["[region 448] 778 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 8, term: 7]"]
[2019/05/01 12:36:49.758 -07:00] [INFO] [unknown:1816] ["[region 448] 778 restored progress of 449 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:36:49.758 -07:00] [INFO] [unknown:1816] ["[region 448] 778 restored progress of 450 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:36:49.758 -07:00] [INFO] [unknown:1816] ["[region 448] 778 restored progress of 451 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:36:49.758 -07:00] [INFO] [unknown:1816] ["[region 448] 778 restored progress of 778 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:36:49.758 -07:00] [INFO] [unknown:474] ["[region 448] 778 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 8, term: 7]"]
[2019/05/01 12:36:49.758 -07:00] [INFO] [unknown:1736] ["[region 448] 778 [commit: 8] restored snapshot [index: 8, term: 7]"]
[2019/05/01 12:36:49.758 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=778] [region_id=448]
[2019/05/01 12:36:49.758 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 8, truncated_state: Some(RaftTruncatedState { index: 8, term: 7, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 448, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 100, 97, 116, 97, 255, 100, 105, 114, 0, 254, 0, 0, 0, 252], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 100, 97, 116, 101, 255, 95, 102, 111, 114, 255, 109, 97, 116, 255, 0, 0, 0, 0, 0, 250, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 57, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 449, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 450, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 451, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 778, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=778] [region_id=448]
[2019/05/01 12:36:49.778 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 448, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 100, 97, 116, 97, 255, 100, 105, 114, 0, 254, 0, 0, 0, 252], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 100, 97, 116, 101, 255, 95, 102, 111, 114, 255, 109, 97, 116, 255, 0, 0, 0, 0, 0, 250, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 57, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 449, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 450, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 451, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 778, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=778] [region_id=448]
[2019/05/01 12:36:49.778 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 448] 778"]
[2019/05/01 12:36:49.778 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=448]
[2019/05/01 12:36:49.795 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=16.189004ms] [region_id=448]
[2019/05/01 12:36:49.805 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_602_7_8_(default|lock|write).sst] [snap_key=602_7_8]
[2019/05/01 12:36:49.823 -07:00] [INFO] [unknown:1792] ["[region 602] 779 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 8, term: 7]"]
[2019/05/01 12:36:49.823 -07:00] [INFO] [unknown:1816] ["[region 602] 779 restored progress of 603 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:36:49.823 -07:00] [INFO] [unknown:1816] ["[region 602] 779 restored progress of 604 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:36:49.823 -07:00] [INFO] [unknown:1816] ["[region 602] 779 restored progress of 605 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:36:49.823 -07:00] [INFO] [unknown:1816] ["[region 602] 779 restored progress of 779 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:36:49.823 -07:00] [INFO] [unknown:474] ["[region 602] 779 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 8, term: 7]"]
[2019/05/01 12:36:49.823 -07:00] [INFO] [unknown:1736] ["[region 602] 779 [commit: 8] restored snapshot [index: 8, term: 7]"]
[2019/05/01 12:36:49.823 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=779] [region_id=602]
[2019/05/01 12:36:49.823 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 8, truncated_state: Some(RaftTruncatedState { index: 8, term: 7, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 602, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 102, 116, 95, 98, 255, 111, 111, 108, 101, 255, 97, 110, 95, 255, 115, 121, 110, 116, 97, 255, 120, 0, 255, 0, 0, 0, 0, 0, 0, 248, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 102, 116, 95, 109, 255, 97, 120, 95, 119, 255, 111, 114, 100, 255, 95, 108, 101, 110, 0, 254, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 77, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 603, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 604, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 605, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 779, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=779] [region_id=602]
[2019/05/01 12:36:49.849 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 602, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 102, 116, 95, 98, 255, 111, 111, 108, 101, 255, 97, 110, 95, 255, 115, 121, 110, 116, 97, 255, 120, 0, 255, 0, 0, 0, 0, 0, 0, 248, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 102, 116, 95, 109, 255, 97, 120, 95, 119, 255, 111, 114, 100, 255, 95, 108, 101, 110, 0, 254, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 77, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 603, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 604, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 605, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 779, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=779] [region_id=602]
[2019/05/01 12:36:49.849 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=602]
[2019/05/01 12:36:49.849 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 602] 779"]
[2019/05/01 12:36:49.882 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=32.936495ms] [region_id=602]
[2019/05/01 12:36:50.840 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 778, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=9] [term=7] [peer_id=778] [region_id=448]
[2019/05/01 12:36:50.840 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 6, version: 57, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=778] [region_id=448]
[2019/05/01 12:36:50.840 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 448, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 100, 97, 116, 97, 255, 100, 105, 114, 0, 254, 0, 0, 0, 252], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 100, 97, 116, 101, 255, 95, 102, 111, 114, 255, 109, 97, 116, 255, 0, 0, 0, 0, 0, 250, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 57, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 449, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 450, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 451, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 778, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 778, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=778] [region_id=448]
[2019/05/01 12:36:50.869 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 779, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=9] [term=7] [peer_id=779] [region_id=602]
[2019/05/01 12:36:50.869 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 6, version: 77, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=779] [region_id=602]
[2019/05/01 12:36:50.869 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 602, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 102, 116, 95, 98, 255, 111, 111, 108, 101, 255, 97, 110, 95, 255, 115, 121, 110, 116, 97, 255, 120, 0, 255, 0, 0, 0, 0, 0, 0, 248, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 102, 116, 95, 109, 255, 97, 120, 95, 119, 255, 111, 114, 100, 255, 95, 108, 101, 110, 0, 254, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 77, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 603, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 604, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 605, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 779, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 779, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=779] [region_id=602]
[2019/05/01 12:36:50.926 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 603, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=10] [term=7] [peer_id=779] [region_id=602]
[2019/05/01 12:36:50.926 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 7, version: 77, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=779] [region_id=602]
[2019/05/01 12:36:50.926 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 602, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 102, 116, 95, 98, 255, 111, 111, 108, 101, 255, 97, 110, 95, 255, 115, 121, 110, 116, 97, 255, 120, 0, 255, 0, 0, 0, 0, 0, 0, 248, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 102, 116, 95, 109, 255, 97, 120, 95, 119, 255, 111, 114, 100, 255, 95, 108, 101, 110, 0, 254, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 7, version: 77, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 603, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 604, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 605, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 779, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 603, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=779] [region_id=602]
[2019/05/01 12:36:50.926 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 450, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=10] [term=7] [peer_id=778] [region_id=448]
[2019/05/01 12:36:50.926 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 7, version: 57, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=778] [region_id=448]
[2019/05/01 12:36:50.926 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 448, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 100, 97, 116, 97, 255, 100, 105, 114, 0, 254, 0, 0, 0, 252], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 100, 97, 116, 101, 255, 95, 102, 111, 114, 255, 109, 97, 116, 255, 0, 0, 0, 0, 0, 250, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 7, version: 57, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 449, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 450, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 451, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 778, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 450, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=778] [region_id=448]
[2019/05/01 12:36:50.954 -07:00] [INFO] [pd.rs:558] ["try to change peer"] [peer="Peer { id: 783, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [change_type=AddLearnerNode] [region_id=20]
[2019/05/01 12:36:50.954 -07:00] [INFO] [peer.rs:1953] ["propose conf change peer"] [change_peer=783] [change_type=AddLearnerNode] [peer_id=50] [region_id=20]
[2019/05/01 12:36:50.993 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddLearnerNode, peer: Some(Peer { id: 783, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=12] [term=7] [peer_id=50] [region_id=20]
[2019/05/01 12:36:50.993 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 5, version: 4, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddLearner] [peer_id=50] [region_id=20]
[2019/05/01 12:36:50.993 -07:00] [INFO] [apply.rs:1476] ["add learner successfully"] [region="Region { id: 20, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 9, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 16, 0, 0, 0, 0, 0, 0, 0, 248], region_epoch: Some(RegionEpoch { conf_ver: 5, version: 4, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 21, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 50, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 166, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 783, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=50] [region_id=20]
[2019/05/01 12:36:51.014 -07:00] [INFO] [peer.rs:1318] ["notify pd with change peer region"] [region="Region { id: 20, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 9, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 16, 0, 0, 0, 0, 0, 0, 0, 248], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 4, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 21, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 50, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 166, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 783, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=50] [region_id=20]
[2019/05/01 12:36:51.056 -07:00] [INFO] [peer_storage.rs:759] ["requesting snapshot"] [peer_id=50] [region_id=20]
[2019/05/01 12:36:51.057 -07:00] [INFO] [snap.rs:757] ["scan snapshot of one cf"] [size=0] [key_count=0] [cf=default] [snapshot=/opt/tidb/data/kv/snap/gen_20_7_12_(default|lock|write).sst] [region_id=20]
[2019/05/01 12:36:51.057 -07:00] [INFO] [snap.rs:757] ["scan snapshot of one cf"] [size=0] [key_count=0] [cf=lock] [snapshot=/opt/tidb/data/kv/snap/gen_20_7_12_(default|lock|write).sst] [region_id=20]
[2019/05/01 12:36:51.057 -07:00] [INFO] [snap.rs:757] ["scan snapshot of one cf"] [size=0] [key_count=0] [cf=write] [snapshot=/opt/tidb/data/kv/snap/gen_20_7_12_(default|lock|write).sst] [region_id=20]
[2019/05/01 12:36:51.057 -07:00] [INFO] [snap.rs:875] ["scan snapshot"] [takes=194.538µs] [size=0] [key_count=0] [snapshot=/opt/tidb/data/kv/snap/gen_20_7_12_(default|lock|write).sst] [region_id=20]
[2019/05/01 12:36:51.793 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=782] [region_id=108]
[2019/05/01 12:36:51.793 -07:00] [INFO] [unknown:719] ["[region 108] 782 became follower at term 0"]
[2019/05/01 12:36:51.793 -07:00] [INFO] [unknown:295] ["[region 108] 782 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:36:51.793 -07:00] [INFO] [unknown:719] ["[region 108] 782 became follower at term 1"]
[2019/05/01 12:36:51.793 -07:00] [INFO] [unknown:920] ["[region 108] 782 [term: 1] received a MsgHeartbeat message with higher term from 213 [term: 7]"]
[2019/05/01 12:36:51.793 -07:00] [INFO] [unknown:719] ["[region 108] 782 became follower at term 7"]
[2019/05/01 12:36:53.059 -07:00] [INFO] [unknown:841] ["New connected subchannel at 0x7f041bc283a0 for subchannel 0x7f04cf87c600"]
[2019/05/01 12:36:53.072 -07:00] [INFO] [snap.rs:389] ["sent snapshot"] [duration=13.581102ms] [size=0] [snap_key=20_7_12] [region_id=20]
[2019/05/01 12:36:53.072 -07:00] [INFO] [peer.rs:538] ["report snapshot status"] [status=Finish] [to="Peer { id: 783, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=50] [region_id=20]
[2019/05/01 12:36:53.796 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_108_7_11_(default|lock|write).sst] [snap_key=108_7_11]
[2019/05/01 12:36:53.821 -07:00] [INFO] [unknown:1792] ["[region 108] 782 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 11, term: 7]"]
[2019/05/01 12:36:53.838 -07:00] [INFO] [unknown:1816] ["[region 108] 782 restored progress of 109 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:36:53.838 -07:00] [INFO] [unknown:1816] ["[region 108] 782 restored progress of 110 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:36:53.838 -07:00] [INFO] [unknown:1816] ["[region 108] 782 restored progress of 213 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:36:53.838 -07:00] [INFO] [unknown:1816] ["[region 108] 782 restored progress of 782 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:36:53.838 -07:00] [INFO] [unknown:474] ["[region 108] 782 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 11, term: 7]"]
[2019/05/01 12:36:53.838 -07:00] [INFO] [unknown:1736] ["[region 108] 782 [commit: 11] restored snapshot [index: 11, term: 7]"]
[2019/05/01 12:36:53.838 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=782] [region_id=108]
[2019/05/01 12:36:53.838 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 11, truncated_state: Some(RaftTruncatedState { index: 11, term: 7, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 108, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 97, 118, 111, 105, 255, 100, 95, 116, 101, 255, 109, 112, 111, 255, 114, 97, 108, 95, 117, 255, 112, 103, 255, 114, 97, 100, 101, 0, 0, 253, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 97, 99, 107, 255, 95, 108, 111, 103, 255, 0, 0, 0, 255, 0, 0, 0, 0, 0, 247, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 17, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 109, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 110, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 213, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 782, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=782] [region_id=108]
[2019/05/01 12:36:53.906 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 108] 782"]
[2019/05/01 12:36:53.906 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 108, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 97, 118, 111, 105, 255, 100, 95, 116, 101, 255, 109, 112, 111, 255, 114, 97, 108, 95, 117, 255, 112, 103, 255, 114, 97, 100, 101, 0, 0, 253, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 97, 99, 107, 255, 95, 108, 111, 103, 255, 0, 0, 0, 255, 0, 0, 0, 0, 0, 247, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 17, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 109, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 110, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 213, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 782, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=782] [region_id=108]
[2019/05/01 12:36:53.906 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=108]
[2019/05/01 12:36:53.939 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=32.324657ms] [region_id=108]
[2019/05/01 12:36:53.950 -07:00] [INFO] [unknown:1625] ["[region 586] 712 [term 6] received MsgTimeoutNow from 587 and starts an election to get leadership."]
[2019/05/01 12:36:53.950 -07:00] [INFO] [unknown:739] ["[region 586] 712 became candidate at term 7"]
[2019/05/01 12:36:53.950 -07:00] [INFO] [unknown:854] ["[region 586] 712 received MsgRequestVoteResponse from 712 at term 7"]
[2019/05/01 12:36:53.950 -07:00] [INFO] [unknown:828] ["[region 586] 712 [logterm: 6, index: 9] sent MsgRequestVote request to 587 at term 7"]
[2019/05/01 12:36:53.950 -07:00] [INFO] [unknown:828] ["[region 586] 712 [logterm: 6, index: 9] sent MsgRequestVote request to 589 at term 7"]
[2019/05/01 12:36:54.029 -07:00] [INFO] [unknown:854] ["[region 586] 712 received MsgRequestVoteResponse from 589 at term 7"]
[2019/05/01 12:36:54.029 -07:00] [INFO] [unknown:1550] ["[region 586] 712 [quorum:2] has received 2 MsgRequestVoteResponse votes and 0 vote rejections"]
[2019/05/01 12:36:54.029 -07:00] [INFO] [unknown:789] ["[region 586] 712 became leader at term 7"]
[2019/05/01 12:36:54.065 -07:00] [INFO] [unknown:1625] ["[region 373] 439 [term 7] received MsgTimeoutNow from 376 and starts an election to get leadership."]
[2019/05/01 12:36:54.065 -07:00] [INFO] [unknown:739] ["[region 373] 439 became candidate at term 8"]
[2019/05/01 12:36:54.065 -07:00] [INFO] [unknown:854] ["[region 373] 439 received MsgRequestVoteResponse from 439 at term 8"]
[2019/05/01 12:36:54.065 -07:00] [INFO] [unknown:828] ["[region 373] 439 [logterm: 7, index: 10] sent MsgRequestVote request to 375 at term 8"]
[2019/05/01 12:36:54.065 -07:00] [INFO] [unknown:828] ["[region 373] 439 [logterm: 7, index: 10] sent MsgRequestVote request to 376 at term 8"]
[2019/05/01 12:36:54.066 -07:00] [INFO] [pd.rs:558] ["try to change peer"] [peer="Peer { id: 783, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [change_type=AddNode] [region_id=20]
[2019/05/01 12:36:54.081 -07:00] [INFO] [peer.rs:1953] ["propose conf change peer"] [change_peer=783] [change_type=AddNode] [peer_id=50] [region_id=20]
[2019/05/01 12:36:54.152 -07:00] [INFO] [unknown:854] ["[region 373] 439 received MsgRequestVoteResponse from 375 at term 8"]
[2019/05/01 12:36:54.152 -07:00] [INFO] [unknown:1550] ["[region 373] 439 [quorum:2] has received 2 MsgRequestVoteResponse votes and 0 vote rejections"]
[2019/05/01 12:36:54.152 -07:00] [INFO] [unknown:789] ["[region 373] 439 became leader at term 8"]
[2019/05/01 12:36:54.157 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 783, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=13] [term=7] [peer_id=50] [region_id=20]
[2019/05/01 12:36:54.157 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 6, version: 4, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=50] [region_id=20]
[2019/05/01 12:36:54.157 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 20, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 9, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 16, 0, 0, 0, 0, 0, 0, 0, 248], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 4, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 21, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 50, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 166, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 783, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 783, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=50] [region_id=20]
[2019/05/01 12:36:54.181 -07:00] [INFO] [peer.rs:1318] ["notify pd with change peer region"] [region="Region { id: 20, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 9, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 16, 0, 0, 0, 0, 0, 0, 0, 248], region_epoch: Some(RegionEpoch { conf_ver: 7, version: 4, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 21, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 50, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 166, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 783, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=50] [region_id=20]
[2019/05/01 12:36:54.185 -07:00] [INFO] [pd.rs:558] ["try to change peer"] [peer="Peer { id: 21, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [change_type=RemoveNode] [region_id=20]
[2019/05/01 12:36:54.185 -07:00] [INFO] [pd.rs:558] ["try to change peer"] [peer="Peer { id: 21, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [change_type=RemoveNode] [region_id=20]
[2019/05/01 12:36:54.185 -07:00] [INFO] [peer.rs:1953] ["propose conf change peer"] [change_peer=21] [change_type=RemoveNode] [peer_id=50] [region_id=20]
[2019/05/01 12:36:54.207 -07:00] [INFO] [peer.rs:1927] ["there is a pending conf change, try later"] [peer_id=50] [region_id=20]
[2019/05/01 12:36:54.232 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddLearnerNode, peer: Some(Peer { id: 824, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=27] [term=7] [peer_id=777] [region_id=28]
[2019/05/01 12:36:54.232 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 8, version: 20, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddLearner] [peer_id=777] [region_id=28]
[2019/05/01 12:36:54.232 -07:00] [INFO] [apply.rs:1476] ["add learner successfully"] [region="Region { id: 28, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 114, 128, 0, 0, 0, 0, 255, 1, 212, 199, 0, 0, 0, 0, 0, 250], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 44, 0, 0, 0, 0, 0, 0, 0, 248], region_epoch: Some(RegionEpoch { conf_ver: 8, version: 20, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 29, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 163, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 777, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 824, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=777] [region_id=28]
[2019/05/01 12:36:54.248 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 21, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=14] [term=7] [peer_id=50] [region_id=20]
[2019/05/01 12:36:54.248 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 7, version: 4, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=50] [region_id=20]
[2019/05/01 12:36:54.248 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 20, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 9, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 16, 0, 0, 0, 0, 0, 0, 0, 248], region_epoch: Some(RegionEpoch { conf_ver: 7, version: 4, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 21, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 50, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 166, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 783, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 21, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=50] [region_id=20]
[2019/05/01 12:36:54.268 -07:00] [INFO] [peer.rs:1318] ["notify pd with change peer region"] [region="Region { id: 20, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 9, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 16, 0, 0, 0, 0, 0, 0, 0, 248], region_epoch: Some(RegionEpoch { conf_ver: 8, version: 4, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 50, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 166, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 783, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=50] [region_id=20]
[2019/05/01 12:36:54.269 -07:00] [INFO] [store.rs:294] ["raft message is stale, ignore it"] [msg_type=MsgAppendResponse] [current_region_epoch="RegionEpoch { conf_ver: 8, version: 4, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region_id=20]
[2019/05/01 12:36:54.318 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: BatchSplit, change_peer: None, split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: Some(BatchSplitRequest { requests: [SplitRequest { split_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 108, 95, 114, 128, 0, 0, 0, 0, 255, 0, 0, 4, 0, 0, 0, 0, 0, 250], new_region_id: 850, new_peer_ids: [851, 852, 853], right_derive: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], right_derive: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=5366] [term=7] [peer_id=386] [region_id=4]
[2019/05/01 12:36:54.318 -07:00] [INFO] [apply.rs:1582] ["split region"] [keys="[[116, 128, 0, 0, 0, 0, 0, 0, 255, 108, 95, 114, 128, 0, 0, 0, 0, 255, 0, 0, 4, 0, 0, 0, 0, 0, 250]]"] [region="Region { id: 4, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 108, 95, 114, 128, 0, 0, 0, 0, 255, 0, 0, 3, 0, 0, 0, 0, 0, 250], end_key: [], region_epoch: Some(RegionEpoch { conf_ver: 5, version: 23, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 5, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 386, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 393, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=386] [region_id=4]
[2019/05/01 12:36:54.339 -07:00] [INFO] [peer.rs:1424] ["insert new region"] [region="Region { id: 850, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 108, 95, 114, 128, 0, 0, 0, 0, 255, 0, 0, 3, 0, 0, 0, 0, 0, 250], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 108, 95, 114, 128, 0, 0, 0, 0, 255, 0, 0, 4, 0, 0, 0, 0, 0, 250], region_epoch: Some(RegionEpoch { conf_ver: 5, version: 24, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 851, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 852, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 853, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region_id=850]
[2019/05/01 12:36:54.339 -07:00] [INFO] [peer.rs:127] ["create peer"] [peer_id=852] [region_id=850]
[2019/05/01 12:36:54.339 -07:00] [INFO] [unknown:719] ["[region 850] 852 became follower at term 5"]
[2019/05/01 12:36:54.339 -07:00] [INFO] [unknown:295] ["[region 850] 852 newRaft [peers: [851, 852, 853], term: 5, commit: 5, applied: 5, last_index: 5, last_term: 5]"]
[2019/05/01 12:36:54.339 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 850] 852"]
[2019/05/01 12:36:54.339 -07:00] [INFO] [unknown:1083] ["[region 850] 852 [logterm: 5, index: 5, vote: 0] cast MsgRequestPreVote for 853 [logterm: 5, index: 5] at term 5"]
[2019/05/01 12:36:54.382 -07:00] [INFO] [unknown:920] ["[region 850] 852 [term: 5] received a MsgRequestVote message with higher term from 853 [term: 6]"]
[2019/05/01 12:36:54.382 -07:00] [INFO] [unknown:719] ["[region 850] 852 became follower at term 6"]
[2019/05/01 12:36:54.382 -07:00] [INFO] [unknown:1083] ["[region 850] 852 [logterm: 5, index: 5, vote: 0] cast MsgRequestVote for 853 [logterm: 5, index: 5] at term 6"]
[2019/05/01 12:36:54.816 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 782, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=12] [term=7] [peer_id=782] [region_id=108]
[2019/05/01 12:36:54.816 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 6, version: 17, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=782] [region_id=108]
[2019/05/01 12:36:54.816 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 108, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 97, 118, 111, 105, 255, 100, 95, 116, 101, 255, 109, 112, 111, 255, 114, 97, 108, 95, 117, 255, 112, 103, 255, 114, 97, 100, 101, 0, 0, 253, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 97, 99, 107, 255, 95, 108, 111, 103, 255, 0, 0, 0, 255, 0, 0, 0, 0, 0, 247, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 17, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 109, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 110, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 213, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 782, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 782, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=782] [region_id=108]
[2019/05/01 12:36:54.875 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 109, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=13] [term=7] [peer_id=782] [region_id=108]
[2019/05/01 12:36:54.875 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 7, version: 17, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=782] [region_id=108]
[2019/05/01 12:36:54.875 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 108, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 97, 118, 111, 105, 255, 100, 95, 116, 101, 255, 109, 112, 111, 255, 114, 97, 108, 95, 117, 255, 112, 103, 255, 114, 97, 100, 101, 0, 0, 253, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 97, 99, 107, 255, 95, 108, 111, 103, 255, 0, 0, 0, 255, 0, 0, 0, 0, 0, 247, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 7, version: 17, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 109, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 110, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 213, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 782, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 109, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=782] [region_id=108]
[2019/05/01 12:36:55.745 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=895] [region_id=800]
[2019/05/01 12:36:55.745 -07:00] [INFO] [unknown:719] ["[region 800] 895 became follower at term 0"]
[2019/05/01 12:36:55.745 -07:00] [INFO] [unknown:295] ["[region 800] 895 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:36:55.745 -07:00] [INFO] [unknown:719] ["[region 800] 895 became follower at term 1"]
[2019/05/01 12:36:55.745 -07:00] [INFO] [unknown:920] ["[region 800] 895 [term: 1] received a MsgHeartbeat message with higher term from 801 [term: 6]"]
[2019/05/01 12:36:55.745 -07:00] [INFO] [unknown:719] ["[region 800] 895 became follower at term 6"]
[2019/05/01 12:36:56.009 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=894] [region_id=241]
[2019/05/01 12:36:56.009 -07:00] [INFO] [unknown:719] ["[region 241] 894 became follower at term 0"]
[2019/05/01 12:36:56.009 -07:00] [INFO] [unknown:295] ["[region 241] 894 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:36:56.009 -07:00] [INFO] [unknown:719] ["[region 241] 894 became follower at term 1"]
[2019/05/01 12:36:56.009 -07:00] [INFO] [unknown:920] ["[region 241] 894 [term: 1] received a MsgHeartbeat message with higher term from 242 [term: 6]"]
[2019/05/01 12:36:56.009 -07:00] [INFO] [unknown:719] ["[region 241] 894 became follower at term 6"]
[2019/05/01 12:36:57.748 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_800_6_7_(default|lock|write).sst] [snap_key=800_6_7]
[2019/05/01 12:36:57.757 -07:00] [INFO] [unknown:1792] ["[region 800] 895 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 7, term: 6]"]
[2019/05/01 12:36:57.757 -07:00] [INFO] [unknown:1816] ["[region 800] 895 restored progress of 801 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:36:57.757 -07:00] [INFO] [unknown:1816] ["[region 800] 895 restored progress of 802 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:36:57.757 -07:00] [INFO] [unknown:1816] ["[region 800] 895 restored progress of 803 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:36:57.757 -07:00] [INFO] [unknown:1816] ["[region 800] 895 restored progress of 895 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:36:57.757 -07:00] [INFO] [unknown:474] ["[region 800] 895 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 7, term: 6]"]
[2019/05/01 12:36:57.757 -07:00] [INFO] [unknown:1736] ["[region 800] 895 [commit: 7] restored snapshot [index: 7, term: 6]"]
[2019/05/01 12:36:57.757 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=895] [region_id=800]
[2019/05/01 12:36:57.757 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 7, truncated_state: Some(RaftTruncatedState { index: 7, term: 6, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 800, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 104, 97, 118, 101, 255, 95, 115, 115, 108, 255, 0, 0, 0, 255, 0, 0, 0, 0, 0, 247, 0, 0, 253], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 104, 97, 118, 101, 255, 95, 115, 121, 109, 255, 108, 105, 110, 255, 107, 0, 0, 0, 0, 251, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 97, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 801, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 802, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 803, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 895, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=895] [region_id=800]
[2019/05/01 12:36:57.768 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 800] 895"]
[2019/05/01 12:36:57.768 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 800, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 104, 97, 118, 101, 255, 95, 115, 115, 108, 255, 0, 0, 0, 255, 0, 0, 0, 0, 0, 247, 0, 0, 253], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 104, 97, 118, 101, 255, 95, 115, 121, 109, 255, 108, 105, 110, 255, 107, 0, 0, 0, 0, 251, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 97, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 801, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 802, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 803, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 895, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=895] [region_id=800]
[2019/05/01 12:36:57.768 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=800]
[2019/05/01 12:36:57.796 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=27.681737ms] [region_id=800]
[2019/05/01 12:36:58.013 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_241_6_7_(default|lock|write).sst] [snap_key=241_6_7]
[2019/05/01 12:36:58.021 -07:00] [INFO] [unknown:1792] ["[region 241] 894 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 7, term: 6]"]
[2019/05/01 12:36:58.021 -07:00] [INFO] [unknown:1816] ["[region 241] 894 restored progress of 242 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:36:58.021 -07:00] [INFO] [unknown:1816] ["[region 241] 894 restored progress of 243 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:36:58.021 -07:00] [INFO] [unknown:1816] ["[region 241] 894 restored progress of 244 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:36:58.021 -07:00] [INFO] [unknown:1816] ["[region 241] 894 restored progress of 894 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:36:58.021 -07:00] [INFO] [unknown:474] ["[region 241] 894 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 7, term: 6]"]
[2019/05/01 12:36:58.021 -07:00] [INFO] [unknown:1736] ["[region 241] 894 [commit: 7] restored snapshot [index: 7, term: 6]"]
[2019/05/01 12:36:58.021 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=894] [region_id=241]
[2019/05/01 12:36:58.021 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 7, truncated_state: Some(RaftTruncatedState { index: 7, term: 6, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 241, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 95, 103, 255, 116, 105, 100, 255, 95, 115, 105, 109, 112, 255, 108, 101, 255, 95, 114, 101, 99, 111, 118, 255, 101, 255, 114, 121, 0, 0, 0, 0, 0, 250, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 95, 109, 255, 97, 120, 95, 255, 102, 108, 117, 115, 104, 255, 95, 113, 255, 117, 101, 117, 101, 95, 116, 255, 105, 255, 109, 101, 0, 0, 0, 0, 0, 250, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 27, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 242, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 243, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 244, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 894, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=894] [region_id=241]
[2019/05/01 12:36:58.041 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 241, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 95, 103, 255, 116, 105, 100, 255, 95, 115, 105, 109, 112, 255, 108, 101, 255, 95, 114, 101, 99, 111, 118, 255, 101, 255, 114, 121, 0, 0, 0, 0, 0, 250, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 95, 109, 255, 97, 120, 95, 255, 102, 108, 117, 115, 104, 255, 95, 113, 255, 117, 101, 117, 101, 95, 116, 255, 105, 255, 109, 101, 0, 0, 0, 0, 0, 250, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 27, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 242, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 243, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 244, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 894, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=894] [region_id=241]
[2019/05/01 12:36:58.041 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=241]
[2019/05/01 12:36:58.041 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 241] 894"]
[2019/05/01 12:36:58.068 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=26.156917ms] [region_id=241]
[2019/05/01 12:36:58.770 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 895, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=8] [term=6] [peer_id=895] [region_id=800]
[2019/05/01 12:36:58.770 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 6, version: 97, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=895] [region_id=800]
[2019/05/01 12:36:58.770 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 800, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 104, 97, 118, 101, 255, 95, 115, 115, 108, 255, 0, 0, 0, 255, 0, 0, 0, 0, 0, 247, 0, 0, 253], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 104, 97, 118, 101, 255, 95, 115, 121, 109, 255, 108, 105, 110, 255, 107, 0, 0, 0, 0, 251, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 97, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 801, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 802, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 803, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 895, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 895, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=895] [region_id=800]
[2019/05/01 12:36:58.885 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 802, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=9] [term=6] [peer_id=895] [region_id=800]
[2019/05/01 12:36:58.885 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 7, version: 97, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=895] [region_id=800]
[2019/05/01 12:36:58.885 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 800, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 104, 97, 118, 101, 255, 95, 115, 115, 108, 255, 0, 0, 0, 255, 0, 0, 0, 0, 0, 247, 0, 0, 253], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 104, 97, 118, 101, 255, 95, 115, 121, 109, 255, 108, 105, 110, 255, 107, 0, 0, 0, 0, 251, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 7, version: 97, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 801, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 802, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 803, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 895, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 802, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=895] [region_id=800]
[2019/05/01 12:36:58.968 -07:00] [INFO] [pd.rs:558] ["try to change peer"] [peer="Peer { id: 897, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [change_type=AddLearnerNode] [region_id=598]
[2019/05/01 12:36:58.968 -07:00] [INFO] [peer.rs:1953] ["propose conf change peer"] [change_peer=897] [change_type=AddLearnerNode] [peer_id=668] [region_id=598]
[2019/05/01 12:36:59.037 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddLearnerNode, peer: Some(Peer { id: 897, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=12] [term=8] [peer_id=668] [region_id=598]
[2019/05/01 12:36:59.037 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 8, version: 77, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddLearner] [peer_id=668] [region_id=598]
[2019/05/01 12:36:59.037 -07:00] [INFO] [apply.rs:1476] ["add learner successfully"] [region="Region { id: 598, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 102, 111, 114, 101, 255, 105, 103, 110, 95, 255, 107, 101, 121, 255, 95, 99, 104, 101, 99, 255, 107, 115, 255, 0, 0, 0, 0, 0, 0, 249, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 102, 116, 95, 98, 255, 111, 111, 108, 101, 255, 97, 110, 95, 255, 115, 121, 110, 116, 97, 255, 120, 0, 255, 0, 0, 0, 0, 0, 0, 248, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 8, version: 77, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 600, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 601, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 668, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 897, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=668] [region_id=598]
[2019/05/01 12:36:59.045 -07:00] [INFO] [peer.rs:1318] ["notify pd with change peer region"] [region="Region { id: 598, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 102, 111, 114, 101, 255, 105, 103, 110, 95, 255, 107, 101, 121, 255, 95, 99, 104, 101, 99, 255, 107, 115, 255, 0, 0, 0, 0, 0, 0, 249, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 102, 116, 95, 98, 255, 111, 111, 108, 101, 255, 97, 110, 95, 255, 115, 121, 110, 116, 97, 255, 120, 0, 255, 0, 0, 0, 0, 0, 0, 248, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 77, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 600, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 601, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 668, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 897, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=668] [region_id=598]
[2019/05/01 12:36:59.070 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 894, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=8] [term=6] [peer_id=894] [region_id=241]
[2019/05/01 12:36:59.070 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 6, version: 27, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=894] [region_id=241]
[2019/05/01 12:36:59.070 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 241, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 95, 103, 255, 116, 105, 100, 255, 95, 115, 105, 109, 112, 255, 108, 101, 255, 95, 114, 101, 99, 111, 118, 255, 101, 255, 114, 121, 0, 0, 0, 0, 0, 250, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 95, 109, 255, 97, 120, 95, 255, 102, 108, 117, 115, 104, 255, 95, 113, 255, 117, 101, 117, 101, 95, 116, 255, 105, 255, 109, 101, 0, 0, 0, 0, 0, 250, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 27, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 242, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 243, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 244, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 894, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 894, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=894] [region_id=241]
[2019/05/01 12:36:59.110 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 824, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=28] [term=7] [peer_id=777] [region_id=28]
[2019/05/01 12:36:59.110 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 9, version: 20, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=777] [region_id=28]
[2019/05/01 12:36:59.110 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 28, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 114, 128, 0, 0, 0, 0, 255, 1, 212, 199, 0, 0, 0, 0, 0, 250], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 44, 0, 0, 0, 0, 0, 0, 0, 248], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 20, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 29, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 163, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 777, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 824, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 824, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=777] [region_id=28]
[2019/05/01 12:36:59.175 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 243, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=9] [term=6] [peer_id=894] [region_id=241]
[2019/05/01 12:36:59.175 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 7, version: 27, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=894] [region_id=241]
[2019/05/01 12:36:59.175 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 241, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 95, 103, 255, 116, 105, 100, 255, 95, 115, 105, 109, 112, 255, 108, 101, 255, 95, 114, 101, 99, 111, 118, 255, 101, 255, 114, 121, 0, 0, 0, 0, 0, 250, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 95, 109, 255, 97, 120, 95, 255, 102, 108, 117, 115, 104, 255, 95, 113, 255, 117, 101, 117, 101, 95, 116, 255, 105, 255, 109, 101, 0, 0, 0, 0, 0, 250, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 7, version: 27, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 242, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 243, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 244, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 894, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 243, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=894] [region_id=241]
[2019/05/01 12:36:59.207 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 29, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=29] [term=7] [peer_id=777] [region_id=28]
[2019/05/01 12:36:59.207 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 10, version: 20, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=777] [region_id=28]
[2019/05/01 12:36:59.207 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 28, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 114, 128, 0, 0, 0, 0, 255, 1, 212, 199, 0, 0, 0, 0, 0, 250], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 44, 0, 0, 0, 0, 0, 0, 0, 248], region_epoch: Some(RegionEpoch { conf_ver: 10, version: 20, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 29, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 163, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 777, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 824, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 29, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=777] [region_id=28]
[2019/05/01 12:36:59.256 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddLearnerNode, peer: Some(Peer { id: 899, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=11] [term=7] [peer_id=486] [region_id=225]
[2019/05/01 12:36:59.256 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 8, version: 27, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddLearner] [peer_id=486] [region_id=225]
[2019/05/01 12:36:59.256 -07:00] [INFO] [apply.rs:1476] ["add learner successfully"] [region="Region { id: 225, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 95, 101, 255, 114, 114, 111, 255, 114, 95, 97, 99, 116, 255, 105, 111, 255, 110, 0, 0, 0, 0, 0, 250, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 95, 102, 255, 111, 114, 109, 255, 97, 116, 0, 0, 0, 252, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 8, version: 27, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 227, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 228, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 486, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 899, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=486] [region_id=225]
[2019/05/01 12:36:59.894 -07:00] [INFO] [peer_storage.rs:759] ["requesting snapshot"] [peer_id=668] [region_id=598]
[2019/05/01 12:36:59.895 -07:00] [INFO] [snap.rs:757] ["scan snapshot of one cf"] [size=0] [key_count=0] [cf=default] [snapshot=/opt/tidb/data/kv/snap/gen_598_8_12_(default|lock|write).sst] [region_id=598]
[2019/05/01 12:36:59.895 -07:00] [INFO] [snap.rs:757] ["scan snapshot of one cf"] [size=0] [key_count=0] [cf=lock] [snapshot=/opt/tidb/data/kv/snap/gen_598_8_12_(default|lock|write).sst] [region_id=598]
[2019/05/01 12:36:59.895 -07:00] [INFO] [snap.rs:757] ["scan snapshot of one cf"] [size=156] [key_count=2] [cf=write] [snapshot=/opt/tidb/data/kv/snap/gen_598_8_12_(default|lock|write).sst] [region_id=598]
[2019/05/01 12:36:59.900 -07:00] [INFO] [snap.rs:875] ["scan snapshot"] [takes=4.939698ms] [size=1414] [key_count=2] [snapshot=/opt/tidb/data/kv/snap/gen_598_8_12_(default|lock|write).sst] [region_id=598]
[2019/05/01 12:37:00.786 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=896] [region_id=413]
[2019/05/01 12:37:00.786 -07:00] [INFO] [unknown:719] ["[region 413] 896 became follower at term 0"]
[2019/05/01 12:37:00.786 -07:00] [INFO] [unknown:295] ["[region 413] 896 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:37:00.786 -07:00] [INFO] [unknown:719] ["[region 413] 896 became follower at term 1"]
[2019/05/01 12:37:00.786 -07:00] [INFO] [unknown:920] ["[region 413] 896 [term: 1] received a MsgHeartbeat message with higher term from 415 [term: 7]"]
[2019/05/01 12:37:00.786 -07:00] [INFO] [unknown:719] ["[region 413] 896 became follower at term 7"]
[2019/05/01 12:37:00.815 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=898] [region_id=417]
[2019/05/01 12:37:00.815 -07:00] [INFO] [unknown:719] ["[region 417] 898 became follower at term 0"]
[2019/05/01 12:37:00.815 -07:00] [INFO] [unknown:295] ["[region 417] 898 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:37:00.815 -07:00] [INFO] [unknown:719] ["[region 417] 898 became follower at term 1"]
[2019/05/01 12:37:00.815 -07:00] [INFO] [unknown:920] ["[region 417] 898 [term: 1] received a MsgHeartbeat message with higher term from 420 [term: 7]"]
[2019/05/01 12:37:00.815 -07:00] [INFO] [unknown:719] ["[region 417] 898 became follower at term 7"]
[2019/05/01 12:37:01.897 -07:00] [INFO] [unknown:841] ["New connected subchannel at 0x7f041f817030 for subchannel 0x7f04cf87c800"]
[2019/05/01 12:37:01.905 -07:00] [INFO] [snap.rs:389] ["sent snapshot"] [duration=9.48795ms] [size=1414] [snap_key=598_8_12] [region_id=598]
[2019/05/01 12:37:01.906 -07:00] [INFO] [peer.rs:538] ["report snapshot status"] [status=Finish] [to="Peer { id: 897, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=668] [region_id=598]
[2019/05/01 12:37:02.789 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_413_7_8_(default|lock|write).sst] [snap_key=413_7_8]
[2019/05/01 12:37:02.798 -07:00] [INFO] [unknown:1792] ["[region 413] 896 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 8, term: 7]"]
[2019/05/01 12:37:02.798 -07:00] [INFO] [unknown:1816] ["[region 413] 896 restored progress of 414 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:37:02.798 -07:00] [INFO] [unknown:1816] ["[region 413] 896 restored progress of 415 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:37:02.798 -07:00] [INFO] [unknown:1816] ["[region 413] 896 restored progress of 416 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:37:02.798 -07:00] [INFO] [unknown:1816] ["[region 413] 896 restored progress of 896 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:37:02.798 -07:00] [INFO] [unknown:474] ["[region 413] 896 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 8, term: 7]"]
[2019/05/01 12:37:02.798 -07:00] [INFO] [unknown:1736] ["[region 413] 896 [commit: 8] restored snapshot [index: 8, term: 7]"]
[2019/05/01 12:37:02.798 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=896] [region_id=413]
[2019/05/01 12:37:02.798 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 8, truncated_state: Some(RaftTruncatedState { index: 8, term: 7, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 413, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 99, 111, 108, 108, 255, 97, 116, 105, 111, 255, 110, 95, 99, 255, 111, 110, 110, 101, 99, 255, 116, 105, 255, 111, 110, 0, 0, 0, 0, 251, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 99, 111, 108, 108, 255, 97, 116, 105, 111, 255, 110, 95, 100, 255, 97, 116, 97, 98, 97, 255, 115, 101, 255, 0, 0, 0, 0, 0, 0, 249, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 47, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 414, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 415, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 416, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 896, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=896] [region_id=413]
[2019/05/01 12:37:02.819 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_417_7_11_(default|lock|write).sst] [snap_key=417_7_11]
[2019/05/01 12:37:02.822 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 413, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 99, 111, 108, 108, 255, 97, 116, 105, 111, 255, 110, 95, 99, 255, 111, 110, 110, 101, 99, 255, 116, 105, 255, 111, 110, 0, 0, 0, 0, 251, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 99, 111, 108, 108, 255, 97, 116, 105, 111, 255, 110, 95, 100, 255, 97, 116, 97, 98, 97, 255, 115, 101, 255, 0, 0, 0, 0, 0, 0, 249, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 47, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 414, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 415, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 416, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 896, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=896] [region_id=413]
[2019/05/01 12:37:02.823 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=413]
[2019/05/01 12:37:02.823 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 413] 896"]
[2019/05/01 12:37:02.823 -07:00] [INFO] [unknown:1792] ["[region 417] 898 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 11, term: 7]"]
[2019/05/01 12:37:02.823 -07:00] [INFO] [unknown:1816] ["[region 417] 898 restored progress of 419 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:37:02.823 -07:00] [INFO] [unknown:1816] ["[region 417] 898 restored progress of 420 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:37:02.823 -07:00] [INFO] [unknown:1816] ["[region 417] 898 restored progress of 484 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:37:02.823 -07:00] [INFO] [unknown:1816] ["[region 417] 898 restored progress of 898 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:37:02.823 -07:00] [INFO] [unknown:474] ["[region 417] 898 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 11, term: 7]"]
[2019/05/01 12:37:02.823 -07:00] [INFO] [unknown:1736] ["[region 417] 898 [commit: 11] restored snapshot [index: 11, term: 7]"]
[2019/05/01 12:37:02.823 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=898] [region_id=417]
[2019/05/01 12:37:02.823 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 11, truncated_state: Some(RaftTruncatedState { index: 11, term: 7, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 417, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 99, 111, 108, 108, 255, 97, 116, 105, 111, 255, 110, 95, 100, 255, 97, 116, 97, 98, 97, 255, 115, 101, 255, 0, 0, 0, 0, 0, 0, 249, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 99, 111, 108, 108, 255, 97, 116, 105, 111, 255, 110, 95, 115, 255, 101, 114, 118, 101, 114, 255, 0, 0, 255, 0, 0, 0, 0, 0, 0, 247, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 47, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 419, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 420, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 484, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 898, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=898] [region_id=417]
[2019/05/01 12:37:02.842 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 417, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 99, 111, 108, 108, 255, 97, 116, 105, 111, 255, 110, 95, 100, 255, 97, 116, 97, 98, 97, 255, 115, 101, 255, 0, 0, 0, 0, 0, 0, 249, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 99, 111, 108, 108, 255, 97, 116, 105, 111, 255, 110, 95, 115, 255, 101, 114, 118, 101, 114, 255, 0, 0, 255, 0, 0, 0, 0, 0, 0, 247, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 47, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 419, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 420, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 484, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 898, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=898] [region_id=417]
[2019/05/01 12:37:02.842 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 417] 898"]
[2019/05/01 12:37:02.858 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=35.341223ms] [region_id=413]
[2019/05/01 12:37:02.858 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=417]
[2019/05/01 12:37:02.884 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=25.475468ms] [region_id=417]
[2019/05/01 12:37:02.897 -07:00] [INFO] [pd.rs:558] ["try to change peer"] [peer="Peer { id: 897, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [change_type=AddNode] [region_id=598]
[2019/05/01 12:37:02.897 -07:00] [INFO] [peer.rs:1953] ["propose conf change peer"] [change_peer=897] [change_type=AddNode] [peer_id=668] [region_id=598]
[2019/05/01 12:37:02.944 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 897, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=13] [term=8] [peer_id=668] [region_id=598]
[2019/05/01 12:37:02.944 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 9, version: 77, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=668] [region_id=598]
[2019/05/01 12:37:02.944 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 598, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 102, 111, 114, 101, 255, 105, 103, 110, 95, 255, 107, 101, 121, 255, 95, 99, 104, 101, 99, 255, 107, 115, 255, 0, 0, 0, 0, 0, 0, 249, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 102, 116, 95, 98, 255, 111, 111, 108, 101, 255, 97, 110, 95, 255, 115, 121, 110, 116, 97, 255, 120, 0, 255, 0, 0, 0, 0, 0, 0, 248, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 77, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 600, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 601, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 668, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 897, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 897, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=668] [region_id=598]
[2019/05/01 12:37:02.954 -07:00] [INFO] [peer.rs:1318] ["notify pd with change peer region"] [region="Region { id: 598, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 102, 111, 114, 101, 255, 105, 103, 110, 95, 255, 107, 101, 121, 255, 95, 99, 104, 101, 99, 255, 107, 115, 255, 0, 0, 0, 0, 0, 0, 249, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 102, 116, 95, 98, 255, 111, 111, 108, 101, 255, 97, 110, 95, 255, 115, 121, 110, 116, 97, 255, 120, 0, 255, 0, 0, 0, 0, 0, 0, 248, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 10, version: 77, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 600, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 601, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 668, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 897, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=668] [region_id=598]
[2019/05/01 12:37:02.963 -07:00] [INFO] [pd.rs:558] ["try to change peer"] [peer="Peer { id: 600, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [change_type=RemoveNode] [region_id=598]
[2019/05/01 12:37:02.963 -07:00] [INFO] [peer.rs:1953] ["propose conf change peer"] [change_peer=600] [change_type=RemoveNode] [peer_id=668] [region_id=598]
[2019/05/01 12:37:02.973 -07:00] [INFO] [pd.rs:558] ["try to change peer"] [peer="Peer { id: 600, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [change_type=RemoveNode] [region_id=598]
[2019/05/01 12:37:03.005 -07:00] [INFO] [peer.rs:1927] ["there is a pending conf change, try later"] [peer_id=668] [region_id=598]
[2019/05/01 12:37:03.005 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 600, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=14] [term=8] [peer_id=668] [region_id=598]
[2019/05/01 12:37:03.005 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 10, version: 77, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=668] [region_id=598]
[2019/05/01 12:37:03.005 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 598, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 102, 111, 114, 101, 255, 105, 103, 110, 95, 255, 107, 101, 121, 255, 95, 99, 104, 101, 99, 255, 107, 115, 255, 0, 0, 0, 0, 0, 0, 249, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 102, 116, 95, 98, 255, 111, 111, 108, 101, 255, 97, 110, 95, 255, 115, 121, 110, 116, 97, 255, 120, 0, 255, 0, 0, 0, 0, 0, 0, 248, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 10, version: 77, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 600, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 601, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 668, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 897, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 600, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=668] [region_id=598]
[2019/05/01 12:37:03.030 -07:00] [INFO] [peer.rs:1318] ["notify pd with change peer region"] [region="Region { id: 598, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 102, 111, 114, 101, 255, 105, 103, 110, 95, 255, 107, 101, 121, 255, 95, 99, 104, 101, 99, 255, 107, 115, 255, 0, 0, 0, 0, 0, 0, 249, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 102, 116, 95, 98, 255, 111, 111, 108, 101, 255, 97, 110, 95, 255, 115, 121, 110, 116, 97, 255, 120, 0, 255, 0, 0, 0, 0, 0, 0, 248, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 11, version: 77, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 601, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 668, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 897, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=668] [region_id=598]
[2019/05/01 12:37:03.900 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 896, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=9] [term=7] [peer_id=896] [region_id=413]
[2019/05/01 12:37:03.925 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 6, version: 47, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=896] [region_id=413]
[2019/05/01 12:37:03.925 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 413, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 99, 111, 108, 108, 255, 97, 116, 105, 111, 255, 110, 95, 99, 255, 111, 110, 110, 101, 99, 255, 116, 105, 255, 111, 110, 0, 0, 0, 0, 251, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 99, 111, 108, 108, 255, 97, 116, 105, 111, 255, 110, 95, 100, 255, 97, 116, 97, 98, 97, 255, 115, 101, 255, 0, 0, 0, 0, 0, 0, 249, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 47, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 414, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 415, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 416, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 896, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 896, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=896] [region_id=413]
[2019/05/01 12:37:03.956 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 898, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=12] [term=7] [peer_id=898] [region_id=417]
[2019/05/01 12:37:03.956 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 9, version: 47, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=898] [region_id=417]
[2019/05/01 12:37:03.956 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 417, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 99, 111, 108, 108, 255, 97, 116, 105, 111, 255, 110, 95, 100, 255, 97, 116, 97, 98, 97, 255, 115, 101, 255, 0, 0, 0, 0, 0, 0, 249, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 99, 111, 108, 108, 255, 97, 116, 105, 111, 255, 110, 95, 115, 255, 101, 114, 118, 101, 114, 255, 0, 0, 255, 0, 0, 0, 0, 0, 0, 247, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 47, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 419, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 420, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 484, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 898, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 898, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=898] [region_id=417]
[2019/05/01 12:37:03.974 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 899, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=12] [term=7] [peer_id=486] [region_id=225]
[2019/05/01 12:37:03.976 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 9, version: 27, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=486] [region_id=225]
[2019/05/01 12:37:03.976 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 225, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 95, 101, 255, 114, 114, 111, 255, 114, 95, 97, 99, 116, 255, 105, 111, 255, 110, 0, 0, 0, 0, 0, 250, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 95, 102, 255, 111, 114, 109, 255, 97, 116, 0, 0, 0, 252, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 27, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 227, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 228, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 486, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 899, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 899, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=486] [region_id=225]
[2019/05/01 12:37:03.989 -07:00] [INFO] [unknown:1625] ["[region 800] 895 [term 6] received MsgTimeoutNow from 801 and starts an election to get leadership."]
[2019/05/01 12:37:04.006 -07:00] [INFO] [unknown:739] ["[region 800] 895 became candidate at term 7"]
[2019/05/01 12:37:04.006 -07:00] [INFO] [unknown:854] ["[region 800] 895 received MsgRequestVoteResponse from 895 at term 7"]
[2019/05/01 12:37:04.006 -07:00] [INFO] [unknown:828] ["[region 800] 895 [logterm: 6, index: 9] sent MsgRequestVote request to 801 at term 7"]
[2019/05/01 12:37:04.006 -07:00] [INFO] [unknown:828] ["[region 800] 895 [logterm: 6, index: 9] sent MsgRequestVote request to 803 at term 7"]
[2019/05/01 12:37:04.006 -07:00] [INFO] [unknown:1625] ["[region 241] 894 [term 6] received MsgTimeoutNow from 242 and starts an election to get leadership."]
[2019/05/01 12:37:04.006 -07:00] [INFO] [unknown:739] ["[region 241] 894 became candidate at term 7"]
[2019/05/01 12:37:04.006 -07:00] [INFO] [unknown:854] ["[region 241] 894 received MsgRequestVoteResponse from 894 at term 7"]
[2019/05/01 12:37:04.006 -07:00] [INFO] [unknown:828] ["[region 241] 894 [logterm: 6, index: 9] sent MsgRequestVote request to 244 at term 7"]
[2019/05/01 12:37:04.006 -07:00] [INFO] [unknown:828] ["[region 241] 894 [logterm: 6, index: 9] sent MsgRequestVote request to 242 at term 7"]
[2019/05/01 12:37:04.053 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=900] [region_id=409]
[2019/05/01 12:37:04.053 -07:00] [INFO] [unknown:719] ["[region 409] 900 became follower at term 0"]
[2019/05/01 12:37:04.053 -07:00] [INFO] [unknown:295] ["[region 409] 900 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:37:04.053 -07:00] [INFO] [unknown:719] ["[region 409] 900 became follower at term 1"]
[2019/05/01 12:37:04.063 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 414, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=10] [term=7] [peer_id=896] [region_id=413]
[2019/05/01 12:37:04.063 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 7, version: 47, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=896] [region_id=413]
[2019/05/01 12:37:04.063 -07:00] [INFO] [unknown:920] ["[region 409] 900 [term: 1] received a MsgHeartbeat message with higher term from 410 [term: 6]"]
[2019/05/01 12:37:04.063 -07:00] [INFO] [unknown:719] ["[region 409] 900 became follower at term 6"]
[2019/05/01 12:37:04.063 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 413, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 99, 111, 108, 108, 255, 97, 116, 105, 111, 255, 110, 95, 99, 255, 111, 110, 110, 101, 99, 255, 116, 105, 255, 111, 110, 0, 0, 0, 0, 251, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 99, 111, 108, 108, 255, 97, 116, 105, 111, 255, 110, 95, 100, 255, 97, 116, 97, 98, 97, 255, 115, 101, 255, 0, 0, 0, 0, 0, 0, 249, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 7, version: 47, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 414, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 415, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 416, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 896, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 414, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=896] [region_id=413]
[2019/05/01 12:37:04.100 -07:00] [INFO] [unknown:854] ["[region 241] 894 received MsgRequestVoteResponse from 244 at term 7"]
[2019/05/01 12:37:04.100 -07:00] [INFO] [unknown:1550] ["[region 241] 894 [quorum:2] has received 2 MsgRequestVoteResponse votes and 0 vote rejections"]
[2019/05/01 12:37:04.100 -07:00] [INFO] [unknown:789] ["[region 241] 894 became leader at term 7"]
[2019/05/01 12:37:04.100 -07:00] [INFO] [unknown:854] ["[region 800] 895 received MsgRequestVoteResponse from 803 at term 7"]
[2019/05/01 12:37:04.100 -07:00] [INFO] [unknown:1550] ["[region 800] 895 [quorum:2] has received 2 MsgRequestVoteResponse votes and 0 vote rejections"]
[2019/05/01 12:37:04.100 -07:00] [INFO] [unknown:789] ["[region 800] 895 became leader at term 7"]
[2019/05/01 12:37:04.146 -07:00] [INFO] [unknown:1625] ["[region 253] 489 [term 7] received MsgTimeoutNow from 256 and starts an election to get leadership."]
[2019/05/01 12:37:04.146 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 419, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=13] [term=7] [peer_id=898] [region_id=417]
[2019/05/01 12:37:04.146 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 10, version: 47, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=898] [region_id=417]
[2019/05/01 12:37:04.146 -07:00] [INFO] [unknown:739] ["[region 253] 489 became candidate at term 8"]
[2019/05/01 12:37:04.146 -07:00] [INFO] [unknown:854] ["[region 253] 489 received MsgRequestVoteResponse from 489 at term 8"]
[2019/05/01 12:37:04.146 -07:00] [INFO] [unknown:828] ["[region 253] 489 [logterm: 7, index: 10] sent MsgRequestVote request to 256 at term 8"]
[2019/05/01 12:37:04.146 -07:00] [INFO] [unknown:828] ["[region 253] 489 [logterm: 7, index: 10] sent MsgRequestVote request to 255 at term 8"]
[2019/05/01 12:37:04.146 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 417, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 99, 111, 108, 108, 255, 97, 116, 105, 111, 255, 110, 95, 100, 255, 97, 116, 97, 98, 97, 255, 115, 101, 255, 0, 0, 0, 0, 0, 0, 249, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 99, 111, 108, 108, 255, 97, 116, 105, 111, 255, 110, 95, 115, 255, 101, 114, 118, 101, 114, 255, 0, 0, 255, 0, 0, 0, 0, 0, 0, 247, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 10, version: 47, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 419, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 420, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 484, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 898, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 419, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=898] [region_id=417]
[2019/05/01 12:37:04.165 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 227, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=13] [term=7] [peer_id=486] [region_id=225]
[2019/05/01 12:37:04.165 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 10, version: 27, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=486] [region_id=225]
[2019/05/01 12:37:04.165 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 225, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 95, 101, 255, 114, 114, 111, 255, 114, 95, 97, 99, 116, 255, 105, 111, 255, 110, 0, 0, 0, 0, 0, 250, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 95, 102, 255, 111, 114, 109, 255, 97, 116, 0, 0, 0, 252, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 10, version: 27, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 227, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 228, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 486, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 899, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 227, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=486] [region_id=225]
[2019/05/01 12:37:04.210 -07:00] [INFO] [unknown:854] ["[region 253] 489 received MsgRequestVoteResponse from 255 at term 8"]
[2019/05/01 12:37:04.210 -07:00] [INFO] [unknown:1550] ["[region 253] 489 [quorum:2] has received 2 MsgRequestVoteResponse votes and 0 vote rejections"]
[2019/05/01 12:37:04.210 -07:00] [INFO] [unknown:789] ["[region 253] 489 became leader at term 8"]
[2019/05/01 12:37:06.039 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_409_6_7_(default|lock|write).sst] [snap_key=409_6_7]
[2019/05/01 12:37:06.049 -07:00] [INFO] [unknown:1792] ["[region 409] 900 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 7, term: 6]"]
[2019/05/01 12:37:06.050 -07:00] [INFO] [unknown:1816] ["[region 409] 900 restored progress of 410 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:37:06.050 -07:00] [INFO] [unknown:1816] ["[region 409] 900 restored progress of 411 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:37:06.050 -07:00] [INFO] [unknown:1816] ["[region 409] 900 restored progress of 412 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:37:06.050 -07:00] [INFO] [unknown:1816] ["[region 409] 900 restored progress of 900 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:37:06.050 -07:00] [INFO] [unknown:474] ["[region 409] 900 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 7, term: 6]"]
[2019/05/01 12:37:06.050 -07:00] [INFO] [unknown:1736] ["[region 409] 900 [commit: 7] restored snapshot [index: 7, term: 6]"]
[2019/05/01 12:37:06.050 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=900] [region_id=409]
[2019/05/01 12:37:06.050 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 7, truncated_state: Some(RaftTruncatedState { index: 7, term: 6, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 409, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 99, 104, 101, 99, 255, 107, 95, 112, 114, 255, 111, 120, 121, 255, 95, 117, 115, 101, 114, 255, 115, 0, 255, 0, 0, 0, 0, 0, 0, 248, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 99, 111, 108, 108, 255, 97, 116, 105, 111, 255, 110, 95, 99, 255, 111, 110, 110, 101, 99, 255, 116, 105, 255, 111, 110, 0, 0, 0, 0, 251, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 47, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 410, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 411, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 412, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 900, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=900] [region_id=409]
[2019/05/01 12:37:06.095 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 409, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 99, 104, 101, 99, 255, 107, 95, 112, 114, 255, 111, 120, 121, 255, 95, 117, 115, 101, 114, 255, 115, 0, 255, 0, 0, 0, 0, 0, 0, 248, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 99, 111, 108, 108, 255, 97, 116, 105, 111, 255, 110, 95, 99, 255, 111, 110, 110, 101, 99, 255, 116, 105, 255, 111, 110, 0, 0, 0, 0, 251, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 47, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 410, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 411, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 412, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 900, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=900] [region_id=409]
[2019/05/01 12:37:06.095 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 409] 900"]
[2019/05/01 12:37:06.095 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=409]
[2019/05/01 12:37:06.141 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=45.317159ms] [region_id=409]
[2019/05/01 12:37:07.130 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 900, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=8] [term=6] [peer_id=900] [region_id=409]
[2019/05/01 12:37:07.130 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 6, version: 47, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=900] [region_id=409]
[2019/05/01 12:37:07.130 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 409, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 99, 104, 101, 99, 255, 107, 95, 112, 114, 255, 111, 120, 121, 255, 95, 117, 115, 101, 114, 255, 115, 0, 255, 0, 0, 0, 0, 0, 0, 248, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 99, 111, 108, 108, 255, 97, 116, 105, 111, 255, 110, 95, 99, 255, 111, 110, 110, 101, 99, 255, 116, 105, 255, 111, 110, 0, 0, 0, 0, 251, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 47, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 410, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 411, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 412, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 900, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 900, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=900] [region_id=409]
[2019/05/01 12:37:07.227 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 412, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=9] [term=6] [peer_id=900] [region_id=409]
[2019/05/01 12:37:07.227 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 7, version: 47, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=900] [region_id=409]
[2019/05/01 12:37:07.227 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 409, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 99, 104, 101, 99, 255, 107, 95, 112, 114, 255, 111, 120, 121, 255, 95, 117, 115, 101, 114, 255, 115, 0, 255, 0, 0, 0, 0, 0, 0, 248, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 99, 111, 108, 108, 255, 97, 116, 105, 111, 255, 110, 95, 99, 255, 111, 110, 110, 101, 99, 255, 116, 105, 255, 111, 110, 0, 0, 0, 0, 251, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 7, version: 47, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 410, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 411, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 412, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 900, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 412, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=900] [region_id=409]
[2019/05/01 12:37:07.768 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=1004] [region_id=676]
[2019/05/01 12:37:07.768 -07:00] [INFO] [unknown:719] ["[region 676] 1004 became follower at term 0"]
[2019/05/01 12:37:07.768 -07:00] [INFO] [unknown:295] ["[region 676] 1004 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:37:07.768 -07:00] [INFO] [unknown:719] ["[region 676] 1004 became follower at term 1"]
[2019/05/01 12:37:07.768 -07:00] [INFO] [unknown:920] ["[region 676] 1004 [term: 1] received a MsgHeartbeat message with higher term from 677 [term: 6]"]
[2019/05/01 12:37:07.768 -07:00] [INFO] [unknown:719] ["[region 676] 1004 became follower at term 6"]
[2019/05/01 12:37:09.032 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddLearnerNode, peer: Some(Peer { id: 1006, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=11] [term=7] [peer_id=669] [region_id=497]
[2019/05/01 12:37:09.032 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 8, version: 67, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddLearner] [peer_id=669] [region_id=497]
[2019/05/01 12:37:09.032 -07:00] [INFO] [apply.rs:1476] ["add learner successfully"] [region="Region { id: 497, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 100, 101, 108, 97, 255, 121, 101, 100, 95, 255, 105, 110, 115, 255, 101, 114, 116, 95, 116, 255, 105, 109, 255, 101, 111, 117, 116, 0, 0, 253, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 100, 101, 108, 97, 255, 121, 101, 100, 95, 255, 113, 117, 101, 255, 117, 101, 95, 115, 105, 255, 122, 101, 255, 0, 0, 0, 0, 0, 0, 249, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 8, version: 67, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 498, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 500, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 669, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1006, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=669] [region_id=497]
[2019/05/01 12:37:09.108 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddLearnerNode, peer: Some(Peer { id: 1007, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=11] [term=7] [peer_id=778] [region_id=448]
[2019/05/01 12:37:09.108 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 8, version: 57, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddLearner] [peer_id=778] [region_id=448]
[2019/05/01 12:37:09.108 -07:00] [INFO] [apply.rs:1476] ["add learner successfully"] [region="Region { id: 448, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 100, 97, 116, 97, 255, 100, 105, 114, 0, 254, 0, 0, 0, 252], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 100, 97, 116, 101, 255, 95, 102, 111, 114, 255, 109, 97, 116, 255, 0, 0, 0, 0, 0, 250, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 8, version: 57, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 449, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 451, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 778, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1007, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=778] [region_id=448]
[2019/05/01 12:37:09.145 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=1005] [region_id=117]
[2019/05/01 12:37:09.151 -07:00] [INFO] [unknown:719] ["[region 117] 1005 became follower at term 0"]
[2019/05/01 12:37:09.151 -07:00] [INFO] [unknown:295] ["[region 117] 1005 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:37:09.151 -07:00] [INFO] [unknown:719] ["[region 117] 1005 became follower at term 1"]
[2019/05/01 12:37:09.151 -07:00] [INFO] [unknown:920] ["[region 117] 1005 [term: 1] received a MsgHeartbeat message with higher term from 119 [term: 7]"]
[2019/05/01 12:37:09.151 -07:00] [INFO] [unknown:719] ["[region 117] 1005 became follower at term 7"]
[2019/05/01 12:37:09.772 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_676_6_7_(default|lock|write).sst] [snap_key=676_6_7]
[2019/05/01 12:37:09.780 -07:00] [INFO] [unknown:1792] ["[region 676] 1004 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 7, term: 6]"]
[2019/05/01 12:37:09.780 -07:00] [INFO] [unknown:1816] ["[region 676] 1004 restored progress of 677 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:37:09.780 -07:00] [INFO] [unknown:1816] ["[region 676] 1004 restored progress of 678 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:37:09.780 -07:00] [INFO] [unknown:1816] ["[region 676] 1004 restored progress of 679 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:37:09.780 -07:00] [INFO] [unknown:1816] ["[region 676] 1004 restored progress of 1004 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:37:09.780 -07:00] [INFO] [unknown:474] ["[region 676] 1004 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 7, term: 6]"]
[2019/05/01 12:37:09.780 -07:00] [INFO] [unknown:1736] ["[region 676] 1004 [commit: 7] restored snapshot [index: 7, term: 6]"]
[2019/05/01 12:37:09.780 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=1004] [region_id=676]
[2019/05/01 12:37:09.780 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 7, truncated_state: Some(RaftTruncatedState { index: 7, term: 6, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 676, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 103, 101, 110, 101, 255, 114, 97, 108, 95, 255, 108, 111, 103, 255, 95, 102, 105, 108, 101, 255, 0, 0, 255, 0, 0, 0, 0, 0, 0, 247, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 103, 114, 111, 117, 255, 112, 95, 99, 111, 255, 110, 99, 97, 255, 116, 95, 109, 97, 120, 255, 95, 108, 255, 101, 110, 0, 0, 0, 0, 251, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 87, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 677, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 678, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 679, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1004, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1004] [region_id=676]
[2019/05/01 12:37:09.805 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 676, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 103, 101, 110, 101, 255, 114, 97, 108, 95, 255, 108, 111, 103, 255, 95, 102, 105, 108, 101, 255, 0, 0, 255, 0, 0, 0, 0, 0, 0, 247, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 103, 114, 111, 117, 255, 112, 95, 99, 111, 255, 110, 99, 97, 255, 116, 95, 109, 97, 120, 255, 95, 108, 255, 101, 110, 0, 0, 0, 0, 251, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 87, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 677, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 678, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 679, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1004, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1004] [region_id=676]
[2019/05/01 12:37:09.805 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 676] 1004"]
[2019/05/01 12:37:09.805 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=676]
[2019/05/01 12:37:09.825 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=19.283989ms] [region_id=676]
[2019/05/01 12:37:10.809 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 1004, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=8] [term=6] [peer_id=1004] [region_id=676]
[2019/05/01 12:37:10.809 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 6, version: 87, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=1004] [region_id=676]
[2019/05/01 12:37:10.809 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 676, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 103, 101, 110, 101, 255, 114, 97, 108, 95, 255, 108, 111, 103, 255, 95, 102, 105, 108, 101, 255, 0, 0, 255, 0, 0, 0, 0, 0, 0, 247, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 103, 114, 111, 117, 255, 112, 95, 99, 111, 255, 110, 99, 97, 255, 116, 95, 109, 97, 120, 255, 95, 108, 255, 101, 110, 0, 0, 0, 0, 251, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 87, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 677, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 678, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 679, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1004, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1004, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1004] [region_id=676]
[2019/05/01 12:37:10.866 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 679, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=9] [term=6] [peer_id=1004] [region_id=676]
[2019/05/01 12:37:10.866 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 7, version: 87, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=1004] [region_id=676]
[2019/05/01 12:37:10.866 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 676, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 103, 101, 110, 101, 255, 114, 97, 108, 95, 255, 108, 111, 103, 255, 95, 102, 105, 108, 101, 255, 0, 0, 255, 0, 0, 0, 0, 0, 0, 247, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 103, 114, 111, 117, 255, 112, 95, 99, 111, 255, 110, 99, 97, 255, 116, 95, 109, 97, 120, 255, 95, 108, 255, 101, 110, 0, 0, 0, 0, 251, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 7, version: 87, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 677, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 678, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 679, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1004, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 679, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1004] [region_id=676]
[2019/05/01 12:37:11.149 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_117_7_11_(default|lock|write).sst] [snap_key=117_7_11]
[2019/05/01 12:37:11.153 -07:00] [INFO] [unknown:1792] ["[region 117] 1005 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 11, term: 7]"]
[2019/05/01 12:37:11.153 -07:00] [INFO] [unknown:1816] ["[region 117] 1005 restored progress of 118 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:37:11.153 -07:00] [INFO] [unknown:1816] ["[region 117] 1005 restored progress of 119 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:37:11.153 -07:00] [INFO] [unknown:1816] ["[region 117] 1005 restored progress of 258 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:37:11.153 -07:00] [INFO] [unknown:1816] ["[region 117] 1005 restored progress of 1005 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:37:11.153 -07:00] [INFO] [unknown:474] ["[region 117] 1005 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 11, term: 7]"]
[2019/05/01 12:37:11.153 -07:00] [INFO] [unknown:1736] ["[region 117] 1005 [commit: 11] restored snapshot [index: 11, term: 7]"]
[2019/05/01 12:37:11.153 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=1005] [region_id=117]
[2019/05/01 12:37:11.153 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 11, truncated_state: Some(RaftTruncatedState { index: 11, term: 7, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 117, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 103, 95, 255, 116, 97, 98, 108, 255, 101, 115, 0, 255, 0, 0, 0, 0, 0, 249, 0, 0, 253], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 100, 255, 95, 97, 100, 100, 255, 114, 101, 115, 255, 115, 0, 0, 0, 0, 251, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 17, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 118, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 119, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 258, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1005, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1005] [region_id=117]
[2019/05/01 12:37:11.188 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 117, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 103, 95, 255, 116, 97, 98, 108, 255, 101, 115, 0, 255, 0, 0, 0, 0, 0, 249, 0, 0, 253], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 100, 255, 95, 97, 100, 100, 255, 114, 101, 115, 255, 115, 0, 0, 0, 0, 251, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 17, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 118, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 119, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 258, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1005, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1005] [region_id=117]
[2019/05/01 12:37:11.188 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 117] 1005"]
[2019/05/01 12:37:11.188 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=117]
[2019/05/01 12:37:11.204 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=16.332098ms] [region_id=117]
[2019/05/01 12:37:11.884 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=1008] [region_id=341]
[2019/05/01 12:37:11.884 -07:00] [INFO] [unknown:719] ["[region 341] 1008 became follower at term 0"]
[2019/05/01 12:37:11.884 -07:00] [INFO] [unknown:295] ["[region 341] 1008 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:37:11.884 -07:00] [INFO] [unknown:719] ["[region 341] 1008 became follower at term 1"]
[2019/05/01 12:37:11.884 -07:00] [INFO] [unknown:920] ["[region 341] 1008 [term: 1] received a MsgHeartbeat message with higher term from 343 [term: 7]"]
[2019/05/01 12:37:11.884 -07:00] [INFO] [unknown:719] ["[region 341] 1008 became follower at term 7"]
[2019/05/01 12:37:12.169 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 1005, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=12] [term=7] [peer_id=1005] [region_id=117]
[2019/05/01 12:37:12.170 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 6, version: 17, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=1005] [region_id=117]
[2019/05/01 12:37:12.170 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 117, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 103, 95, 255, 116, 97, 98, 108, 255, 101, 115, 0, 255, 0, 0, 0, 0, 0, 249, 0, 0, 253], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 100, 255, 95, 97, 100, 100, 255, 114, 101, 115, 255, 115, 0, 0, 0, 0, 251, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 17, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 118, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 119, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 258, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1005, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1005, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1005] [region_id=117]
[2019/05/01 12:37:12.244 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 118, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=13] [term=7] [peer_id=1005] [region_id=117]
[2019/05/01 12:37:12.244 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 7, version: 17, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=1005] [region_id=117]
[2019/05/01 12:37:12.244 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 117, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 103, 95, 255, 116, 97, 98, 108, 255, 101, 115, 0, 255, 0, 0, 0, 0, 0, 249, 0, 0, 253], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 100, 255, 95, 97, 100, 100, 255, 114, 101, 115, 255, 115, 0, 0, 0, 0, 251, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 7, version: 17, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 118, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 119, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 258, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1005, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 118, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1005] [region_id=117]
[2019/05/01 12:37:12.801 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 1007, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=12] [term=7] [peer_id=778] [region_id=448]
[2019/05/01 12:37:12.801 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 9, version: 57, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=778] [region_id=448]
[2019/05/01 12:37:12.801 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 448, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 100, 97, 116, 97, 255, 100, 105, 114, 0, 254, 0, 0, 0, 252], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 100, 97, 116, 101, 255, 95, 102, 111, 114, 255, 109, 97, 116, 255, 0, 0, 0, 0, 0, 250, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 57, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 449, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 451, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 778, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1007, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1007, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=778] [region_id=448]
[2019/05/01 12:37:12.880 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 449, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=13] [term=7] [peer_id=778] [region_id=448]
[2019/05/01 12:37:12.880 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 10, version: 57, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=778] [region_id=448]
[2019/05/01 12:37:12.880 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 448, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 100, 97, 116, 97, 255, 100, 105, 114, 0, 254, 0, 0, 0, 252], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 100, 97, 116, 101, 255, 95, 102, 111, 114, 255, 109, 97, 116, 255, 0, 0, 0, 0, 0, 250, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 10, version: 57, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 449, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 451, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 778, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1007, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 449, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=778] [region_id=448]
[2019/05/01 12:37:13.740 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=1009] [region_id=820]
[2019/05/01 12:37:13.740 -07:00] [INFO] [unknown:719] ["[region 820] 1009 became follower at term 0"]
[2019/05/01 12:37:13.740 -07:00] [INFO] [unknown:295] ["[region 820] 1009 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:37:13.740 -07:00] [INFO] [unknown:719] ["[region 820] 1009 became follower at term 1"]
[2019/05/01 12:37:13.740 -07:00] [INFO] [unknown:920] ["[region 820] 1009 [term: 1] received a MsgHeartbeat message with higher term from 823 [term: 7]"]
[2019/05/01 12:37:13.740 -07:00] [INFO] [unknown:719] ["[region 820] 1009 became follower at term 7"]
[2019/05/01 12:37:13.857 -07:00] [INFO] [unknown:1625] ["[region 676] 1004 [term 6] received MsgTimeoutNow from 677 and starts an election to get leadership."]
[2019/05/01 12:37:13.857 -07:00] [INFO] [unknown:739] ["[region 676] 1004 became candidate at term 7"]
[2019/05/01 12:37:13.857 -07:00] [INFO] [unknown:854] ["[region 676] 1004 received MsgRequestVoteResponse from 1004 at term 7"]
[2019/05/01 12:37:13.857 -07:00] [INFO] [unknown:828] ["[region 676] 1004 [logterm: 6, index: 9] sent MsgRequestVote request to 677 at term 7"]
[2019/05/01 12:37:13.857 -07:00] [INFO] [unknown:828] ["[region 676] 1004 [logterm: 6, index: 9] sent MsgRequestVote request to 678 at term 7"]
[2019/05/01 12:37:13.912 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=1010] [region_id=493]
[2019/05/01 12:37:13.912 -07:00] [INFO] [unknown:719] ["[region 493] 1010 became follower at term 0"]
[2019/05/01 12:37:13.912 -07:00] [INFO] [unknown:295] ["[region 493] 1010 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:37:13.912 -07:00] [INFO] [unknown:719] ["[region 493] 1010 became follower at term 1"]
[2019/05/01 12:37:13.913 -07:00] [INFO] [unknown:920] ["[region 493] 1010 [term: 1] received a MsgHeartbeat message with higher term from 495 [term: 7]"]
[2019/05/01 12:37:13.913 -07:00] [INFO] [unknown:719] ["[region 493] 1010 became follower at term 7"]
[2019/05/01 12:37:13.971 -07:00] [INFO] [unknown:854] ["[region 676] 1004 received MsgRequestVoteResponse from 678 at term 7"]
[2019/05/01 12:37:13.971 -07:00] [INFO] [unknown:1550] ["[region 676] 1004 [quorum:2] has received 2 MsgRequestVoteResponse votes and 0 vote rejections"]
[2019/05/01 12:37:13.971 -07:00] [INFO] [unknown:789] ["[region 676] 1004 became leader at term 7"]
[2019/05/01 12:37:13.972 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_341_7_8_(default|lock|write).sst] [snap_key=341_7_8]
[2019/05/01 12:37:13.996 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 1006, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=12] [term=7] [peer_id=669] [region_id=497]
[2019/05/01 12:37:13.996 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 9, version: 67, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=669] [region_id=497]
[2019/05/01 12:37:13.996 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 497, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 100, 101, 108, 97, 255, 121, 101, 100, 95, 255, 105, 110, 115, 255, 101, 114, 116, 95, 116, 255, 105, 109, 255, 101, 111, 117, 116, 0, 0, 253, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 100, 101, 108, 97, 255, 121, 101, 100, 95, 255, 113, 117, 101, 255, 117, 101, 95, 115, 105, 255, 122, 101, 255, 0, 0, 0, 0, 0, 0, 249, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 67, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 498, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 500, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 669, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1006, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1006, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=669] [region_id=497]
[2019/05/01 12:37:13.996 -07:00] [INFO] [unknown:1792] ["[region 341] 1008 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 8, term: 7]"]
[2019/05/01 12:37:13.996 -07:00] [INFO] [unknown:1816] ["[region 341] 1008 restored progress of 342 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:37:13.996 -07:00] [INFO] [unknown:1816] ["[region 341] 1008 restored progress of 343 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:37:13.996 -07:00] [INFO] [unknown:1816] ["[region 341] 1008 restored progress of 344 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:37:13.996 -07:00] [INFO] [unknown:1816] ["[region 341] 1008 restored progress of 1008 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:37:13.996 -07:00] [INFO] [unknown:474] ["[region 341] 1008 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 8, term: 7]"]
[2019/05/01 12:37:13.996 -07:00] [INFO] [unknown:1736] ["[region 341] 1008 [commit: 8] restored snapshot [index: 8, term: 7]"]
[2019/05/01 12:37:13.996 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=1008] [region_id=341]
[2019/05/01 12:37:13.996 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 8, truncated_state: Some(RaftTruncatedState { index: 8, term: 7, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 341, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 95, 115, 255, 116, 109, 116, 255, 95, 99, 97, 99, 104, 255, 101, 95, 255, 115, 105, 122, 101, 0, 0, 253, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 103, 105, 255, 110, 103, 95, 255, 105, 109, 112, 111, 115, 255, 115, 105, 255, 98, 108, 101, 95, 109, 111, 255, 100, 255, 101, 0, 0, 0, 0, 0, 0, 249, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 37, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 342, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 343, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 344, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1008, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1008] [region_id=341]
[2019/05/01 12:37:14.073 -07:00] [INFO] [unknown:1625] ["[region 409] 900 [term 6] received MsgTimeoutNow from 410 and starts an election to get leadership."]
[2019/05/01 12:37:14.073 -07:00] [INFO] [unknown:739] ["[region 409] 900 became candidate at term 7"]
[2019/05/01 12:37:14.073 -07:00] [INFO] [unknown:854] ["[region 409] 900 received MsgRequestVoteResponse from 900 at term 7"]
[2019/05/01 12:37:14.073 -07:00] [INFO] [unknown:828] ["[region 409] 900 [logterm: 6, index: 9] sent MsgRequestVote request to 410 at term 7"]
[2019/05/01 12:37:14.073 -07:00] [INFO] [unknown:828] ["[region 409] 900 [logterm: 6, index: 9] sent MsgRequestVote request to 411 at term 7"]
[2019/05/01 12:37:14.096 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 341] 1008"]
[2019/05/01 12:37:14.106 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 341, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 95, 115, 255, 116, 109, 116, 255, 95, 99, 97, 99, 104, 255, 101, 95, 255, 115, 105, 122, 101, 0, 0, 253, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 103, 105, 255, 110, 103, 95, 255, 105, 109, 112, 111, 115, 255, 115, 105, 255, 98, 108, 101, 95, 109, 111, 255, 100, 255, 101, 0, 0, 0, 0, 0, 0, 249, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 37, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 342, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 343, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 344, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1008, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1008] [region_id=341]
[2019/05/01 12:37:14.106 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=341]
[2019/05/01 12:37:14.139 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=42.816277ms] [region_id=341]
[2019/05/01 12:37:14.169 -07:00] [INFO] [unknown:854] ["[region 409] 900 received MsgRequestVoteResponse from 411 at term 7"]
[2019/05/01 12:37:14.169 -07:00] [INFO] [unknown:1550] ["[region 409] 900 [quorum:2] has received 2 MsgRequestVoteResponse votes and 0 vote rejections"]
[2019/05/01 12:37:14.169 -07:00] [INFO] [unknown:789] ["[region 409] 900 became leader at term 7"]
[2019/05/01 12:37:14.221 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 498, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=13] [term=7] [peer_id=669] [region_id=497]
[2019/05/01 12:37:14.221 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 10, version: 67, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=669] [region_id=497]
[2019/05/01 12:37:14.221 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 497, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 100, 101, 108, 97, 255, 121, 101, 100, 95, 255, 105, 110, 115, 255, 101, 114, 116, 95, 116, 255, 105, 109, 255, 101, 111, 117, 116, 0, 0, 253, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 100, 101, 108, 97, 255, 121, 101, 100, 95, 255, 113, 117, 101, 255, 117, 101, 95, 115, 105, 255, 122, 101, 255, 0, 0, 0, 0, 0, 0, 249, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 10, version: 67, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 498, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 500, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 669, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1006, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 498, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=669] [region_id=497]
[2019/05/01 12:37:14.956 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 1008, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=9] [term=7] [peer_id=1008] [region_id=341]
[2019/05/01 12:37:14.956 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 6, version: 37, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=1008] [region_id=341]
[2019/05/01 12:37:14.956 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 341, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 95, 115, 255, 116, 109, 116, 255, 95, 99, 97, 99, 104, 255, 101, 95, 255, 115, 105, 122, 101, 0, 0, 253, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 103, 105, 255, 110, 103, 95, 255, 105, 109, 112, 111, 115, 255, 115, 105, 255, 98, 108, 101, 95, 109, 111, 255, 100, 255, 101, 0, 0, 0, 0, 0, 0, 249, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 37, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 342, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 343, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 344, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1008, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1008, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1008] [region_id=341]
[2019/05/01 12:37:15.007 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 342, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=10] [term=7] [peer_id=1008] [region_id=341]
[2019/05/01 12:37:15.007 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 7, version: 37, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=1008] [region_id=341]
[2019/05/01 12:37:15.007 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 341, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 95, 115, 255, 116, 109, 116, 255, 95, 99, 97, 99, 104, 255, 101, 95, 255, 115, 105, 122, 101, 0, 0, 253, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 103, 105, 255, 110, 103, 95, 255, 105, 109, 112, 111, 115, 255, 115, 105, 255, 98, 108, 101, 95, 109, 111, 255, 100, 255, 101, 0, 0, 0, 0, 0, 0, 249, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 7, version: 37, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 342, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 343, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 344, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1008, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 342, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1008] [region_id=341]
[2019/05/01 12:37:15.752 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_820_7_8_(default|lock|write).sst] [snap_key=820_7_8]
[2019/05/01 12:37:15.767 -07:00] [INFO] [unknown:1792] ["[region 820] 1009 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 8, term: 7]"]
[2019/05/01 12:37:15.767 -07:00] [INFO] [unknown:1816] ["[region 820] 1009 restored progress of 821 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:37:15.767 -07:00] [INFO] [unknown:1816] ["[region 820] 1009 restored progress of 822 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:37:15.767 -07:00] [INFO] [unknown:1816] ["[region 820] 1009 restored progress of 823 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:37:15.767 -07:00] [INFO] [unknown:1816] ["[region 820] 1009 restored progress of 1009 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:37:15.767 -07:00] [INFO] [unknown:474] ["[region 820] 1009 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 8, term: 7]"]
[2019/05/01 12:37:15.767 -07:00] [INFO] [unknown:1736] ["[region 820] 1009 [commit: 8] restored snapshot [index: 8, term: 7]"]
[2019/05/01 12:37:15.767 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=1009] [region_id=820]
[2019/05/01 12:37:15.767 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 8, truncated_state: Some(RaftTruncatedState { index: 8, term: 7, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 820, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 105, 116, 255, 95, 99, 111, 110, 255, 110, 101, 99, 255, 116, 0, 0, 0, 0, 251, 0, 0, 253], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 105, 116, 255, 95, 115, 108, 97, 255, 118, 101, 0, 255, 0, 0, 0, 0, 0, 249, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 97, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 821, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 822, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 823, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1009, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1009] [region_id=820]
[2019/05/01 12:37:15.778 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=1051] [region_id=921]
[2019/05/01 12:37:15.778 -07:00] [INFO] [unknown:719] ["[region 921] 1051 became follower at term 0"]
[2019/05/01 12:37:15.778 -07:00] [INFO] [unknown:295] ["[region 921] 1051 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:37:15.778 -07:00] [INFO] [unknown:719] ["[region 921] 1051 became follower at term 1"]
[2019/05/01 12:37:15.779 -07:00] [INFO] [unknown:920] ["[region 921] 1051 [term: 1] received a MsgHeartbeat message with higher term from 942 [term: 7]"]
[2019/05/01 12:37:15.779 -07:00] [INFO] [unknown:719] ["[region 921] 1051 became follower at term 7"]
[2019/05/01 12:37:15.798 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 820, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 105, 116, 255, 95, 99, 111, 110, 255, 110, 101, 99, 255, 116, 0, 0, 0, 0, 251, 0, 0, 253], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 105, 116, 255, 95, 115, 108, 97, 255, 118, 101, 0, 255, 0, 0, 0, 0, 0, 249, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 97, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 821, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 822, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 823, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1009, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1009] [region_id=820]
[2019/05/01 12:37:15.798 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 820] 1009"]
[2019/05/01 12:37:15.798 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=820]
[2019/05/01 12:37:15.820 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=21.424421ms] [region_id=820]
[2019/05/01 12:37:15.916 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_493_7_8_(default|lock|write).sst] [snap_key=493_7_8]
[2019/05/01 12:37:15.921 -07:00] [INFO] [unknown:1792] ["[region 493] 1010 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 8, term: 7]"]
[2019/05/01 12:37:15.921 -07:00] [INFO] [unknown:1816] ["[region 493] 1010 restored progress of 494 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:37:15.921 -07:00] [INFO] [unknown:1816] ["[region 493] 1010 restored progress of 495 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:37:15.921 -07:00] [INFO] [unknown:1816] ["[region 493] 1010 restored progress of 496 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:37:15.921 -07:00] [INFO] [unknown:1816] ["[region 493] 1010 restored progress of 1010 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:37:15.921 -07:00] [INFO] [unknown:474] ["[region 493] 1010 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 8, term: 7]"]
[2019/05/01 12:37:15.921 -07:00] [INFO] [unknown:1736] ["[region 493] 1010 [commit: 8] restored snapshot [index: 8, term: 7]"]
[2019/05/01 12:37:15.921 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=1010] [region_id=493]
[2019/05/01 12:37:15.921 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 8, truncated_state: Some(RaftTruncatedState { index: 8, term: 7, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 493, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 100, 101, 108, 97, 255, 121, 101, 100, 95, 255, 105, 110, 115, 255, 101, 114, 116, 95, 108, 255, 105, 109, 255, 105, 116, 0, 0, 0, 0, 251, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 100, 101, 108, 97, 255, 121, 101, 100, 95, 255, 105, 110, 115, 255, 101, 114, 116, 95, 116, 255, 105, 109, 255, 101, 111, 117, 116, 0, 0, 253, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 67, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 494, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 495, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 496, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1010, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1010] [region_id=493]
[2019/05/01 12:37:15.932 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 493] 1010"]
[2019/05/01 12:37:15.932 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 493, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 100, 101, 108, 97, 255, 121, 101, 100, 95, 255, 105, 110, 115, 255, 101, 114, 116, 95, 108, 255, 105, 109, 255, 105, 116, 0, 0, 0, 0, 251, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 100, 101, 108, 97, 255, 121, 101, 100, 95, 255, 105, 110, 115, 255, 101, 114, 116, 95, 116, 255, 105, 109, 255, 101, 111, 117, 116, 0, 0, 253, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 67, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 494, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 495, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 496, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1010, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1010] [region_id=493]
[2019/05/01 12:37:15.932 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=493]
[2019/05/01 12:37:15.972 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=39.382552ms] [region_id=493]
[2019/05/01 12:37:16.774 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 1009, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=9] [term=7] [peer_id=1009] [region_id=820]
[2019/05/01 12:37:16.774 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 6, version: 97, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=1009] [region_id=820]
[2019/05/01 12:37:16.774 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 820, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 105, 116, 255, 95, 99, 111, 110, 255, 110, 101, 99, 255, 116, 0, 0, 0, 0, 251, 0, 0, 253], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 105, 116, 255, 95, 115, 108, 97, 255, 118, 101, 0, 255, 0, 0, 0, 0, 0, 249, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 97, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 821, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 822, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 823, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1009, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1009, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1009] [region_id=820]
[2019/05/01 12:37:16.838 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 821, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=10] [term=7] [peer_id=1009] [region_id=820]
[2019/05/01 12:37:16.838 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 7, version: 97, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=1009] [region_id=820]
[2019/05/01 12:37:16.838 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 820, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 105, 116, 255, 95, 99, 111, 110, 255, 110, 101, 99, 255, 116, 0, 0, 0, 0, 251, 0, 0, 253], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 105, 116, 255, 95, 115, 108, 97, 255, 118, 101, 0, 255, 0, 0, 0, 0, 0, 249, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 7, version: 97, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 821, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 822, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 823, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1009, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 821, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1009] [region_id=820]
[2019/05/01 12:37:16.981 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 1010, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=9] [term=7] [peer_id=1010] [region_id=493]
[2019/05/01 12:37:16.981 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 6, version: 67, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=1010] [region_id=493]
[2019/05/01 12:37:16.981 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 493, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 100, 101, 108, 97, 255, 121, 101, 100, 95, 255, 105, 110, 115, 255, 101, 114, 116, 95, 108, 255, 105, 109, 255, 105, 116, 0, 0, 0, 0, 251, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 100, 101, 108, 97, 255, 121, 101, 100, 95, 255, 105, 110, 115, 255, 101, 114, 116, 95, 116, 255, 105, 109, 255, 101, 111, 117, 116, 0, 0, 253, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 67, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 494, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 495, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 496, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1010, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1010, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1010] [region_id=493]
[2019/05/01 12:37:17.030 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 494, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=10] [term=7] [peer_id=1010] [region_id=493]
[2019/05/01 12:37:17.030 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 7, version: 67, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=1010] [region_id=493]
[2019/05/01 12:37:17.030 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 493, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 100, 101, 108, 97, 255, 121, 101, 100, 95, 255, 105, 110, 115, 255, 101, 114, 116, 95, 108, 255, 105, 109, 255, 105, 116, 0, 0, 0, 0, 251, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 100, 101, 108, 97, 255, 121, 101, 100, 95, 255, 105, 110, 115, 255, 101, 114, 116, 95, 116, 255, 105, 109, 255, 101, 111, 117, 116, 0, 0, 253, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 7, version: 67, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 494, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 495, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 496, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1010, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 494, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1010] [region_id=493]
[2019/05/01 12:37:17.744 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=1054] [region_id=1031]
[2019/05/01 12:37:17.744 -07:00] [INFO] [unknown:719] ["[region 1031] 1054 became follower at term 0"]
[2019/05/01 12:37:17.744 -07:00] [INFO] [unknown:295] ["[region 1031] 1054 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:37:17.744 -07:00] [INFO] [unknown:719] ["[region 1031] 1054 became follower at term 1"]
[2019/05/01 12:37:17.744 -07:00] [INFO] [unknown:920] ["[region 1031] 1054 [term: 1] received a MsgHeartbeat message with higher term from 1032 [term: 6]"]
[2019/05/01 12:37:17.744 -07:00] [INFO] [unknown:719] ["[region 1031] 1054 became follower at term 6"]
[2019/05/01 12:37:17.779 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_921_7_11_(default|lock|write).sst] [snap_key=921_7_11]
[2019/05/01 12:37:17.791 -07:00] [INFO] [unknown:1792] ["[region 921] 1051 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 11, term: 7]"]
[2019/05/01 12:37:17.791 -07:00] [INFO] [unknown:1816] ["[region 921] 1051 restored progress of 922 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:37:17.791 -07:00] [INFO] [unknown:1816] ["[region 921] 1051 restored progress of 923 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:37:17.791 -07:00] [INFO] [unknown:1816] ["[region 921] 1051 restored progress of 942 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:37:17.791 -07:00] [INFO] [unknown:1816] ["[region 921] 1051 restored progress of 1051 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:37:17.791 -07:00] [INFO] [unknown:474] ["[region 921] 1051 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 11, term: 7]"]
[2019/05/01 12:37:17.791 -07:00] [INFO] [unknown:1736] ["[region 921] 1051 [commit: 11] restored snapshot [index: 11, term: 7]"]
[2019/05/01 12:37:17.791 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=1051] [region_id=921]
[2019/05/01 12:37:17.791 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 11, truncated_state: Some(RaftTruncatedState { index: 11, term: 7, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 921, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 97, 255, 100, 100, 105, 255, 116, 105, 111, 110, 97, 255, 108, 95, 255, 109, 101, 109, 95, 112, 111, 255, 111, 255, 108, 95, 115, 105, 122, 101, 0, 254, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 97, 255, 112, 105, 95, 255, 98, 107, 95, 99, 111, 255, 109, 109, 255, 105, 116, 95, 105, 110, 116, 255, 101, 255, 114, 118, 97, 108, 0, 0, 0, 252, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 107, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 922, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 923, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 942, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1051, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1051] [region_id=921]
[2019/05/01 12:37:17.815 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 921] 1051"]
[2019/05/01 12:37:17.815 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 921, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 97, 255, 100, 100, 105, 255, 116, 105, 111, 110, 97, 255, 108, 95, 255, 109, 101, 109, 95, 112, 111, 255, 111, 255, 108, 95, 115, 105, 122, 101, 0, 254, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 97, 255, 112, 105, 95, 255, 98, 107, 95, 99, 111, 255, 109, 109, 255, 105, 116, 95, 105, 110, 116, 255, 101, 255, 114, 118, 97, 108, 0, 0, 0, 252, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 107, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 922, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 923, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 942, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1051, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1051] [region_id=921]
[2019/05/01 12:37:17.815 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=921]
[2019/05/01 12:37:17.852 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=36.8445ms] [region_id=921]
[2019/05/01 12:37:18.807 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 1051, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=12] [term=7] [peer_id=1051] [region_id=921]
[2019/05/01 12:37:18.807 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 9, version: 107, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=1051] [region_id=921]
[2019/05/01 12:37:18.807 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 921, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 97, 255, 100, 100, 105, 255, 116, 105, 111, 110, 97, 255, 108, 95, 255, 109, 101, 109, 95, 112, 111, 255, 111, 255, 108, 95, 115, 105, 122, 101, 0, 254, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 97, 255, 112, 105, 95, 255, 98, 107, 95, 99, 111, 255, 109, 109, 255, 105, 116, 95, 105, 110, 116, 255, 101, 255, 114, 118, 97, 108, 0, 0, 0, 252, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 107, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 922, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 923, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 942, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1051, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1051, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1051] [region_id=921]
[2019/05/01 12:37:18.887 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 923, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=13] [term=7] [peer_id=1051] [region_id=921]
[2019/05/01 12:37:18.887 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 10, version: 107, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=1051] [region_id=921]
[2019/05/01 12:37:18.887 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 921, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 97, 255, 100, 100, 105, 255, 116, 105, 111, 110, 97, 255, 108, 95, 255, 109, 101, 109, 95, 112, 111, 255, 111, 255, 108, 95, 115, 105, 122, 101, 0, 254, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 97, 255, 112, 105, 95, 255, 98, 107, 95, 99, 111, 255, 109, 109, 255, 105, 116, 95, 105, 110, 116, 255, 101, 255, 114, 118, 97, 108, 0, 0, 0, 252, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 10, version: 107, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 922, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 923, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 942, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1051, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 923, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1051] [region_id=921]
[2019/05/01 12:37:19.746 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=1096] [region_id=1019]
[2019/05/01 12:37:19.751 -07:00] [INFO] [unknown:719] ["[region 1019] 1096 became follower at term 0"]
[2019/05/01 12:37:19.751 -07:00] [INFO] [unknown:295] ["[region 1019] 1096 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:37:19.751 -07:00] [INFO] [unknown:719] ["[region 1019] 1096 became follower at term 1"]
[2019/05/01 12:37:19.751 -07:00] [INFO] [unknown:920] ["[region 1019] 1096 [term: 1] received a MsgHeartbeat message with higher term from 1020 [term: 6]"]
[2019/05/01 12:37:19.751 -07:00] [INFO] [unknown:719] ["[region 1019] 1096 became follower at term 6"]
[2019/05/01 12:37:19.752 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_1031_6_7_(default|lock|write).sst] [snap_key=1031_6_7]
[2019/05/01 12:37:19.762 -07:00] [INFO] [unknown:1792] ["[region 1031] 1054 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 7, term: 6]"]
[2019/05/01 12:37:19.762 -07:00] [INFO] [unknown:1816] ["[region 1031] 1054 restored progress of 1032 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:37:19.762 -07:00] [INFO] [unknown:1816] ["[region 1031] 1054 restored progress of 1033 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:37:19.762 -07:00] [INFO] [unknown:1816] ["[region 1031] 1054 restored progress of 1034 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:37:19.762 -07:00] [INFO] [unknown:1816] ["[region 1031] 1054 restored progress of 1054 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:37:19.762 -07:00] [INFO] [unknown:474] ["[region 1031] 1054 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 7, term: 6]"]
[2019/05/01 12:37:19.762 -07:00] [INFO] [unknown:1736] ["[region 1031] 1054 [commit: 7] restored snapshot [index: 7, term: 6]"]
[2019/05/01 12:37:19.762 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=1054] [region_id=1031]
[2019/05/01 12:37:19.762 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 7, truncated_state: Some(RaftTruncatedState { index: 7, term: 6, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 1031, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 98, 255, 117, 102, 102, 255, 101, 114, 95, 112, 111, 255, 111, 108, 255, 95, 100, 117, 109, 112, 95, 255, 112, 255, 99, 116, 0, 0, 0, 0, 0, 250, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 98, 255, 117, 102, 102, 255, 101, 114, 95, 112, 111, 255, 111, 108, 255, 95, 102, 105, 108, 101, 110, 255, 97, 255, 109, 101, 0, 0, 0, 0, 0, 250, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 117, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1032, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1033, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1034, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1054, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1054] [region_id=1031]
[2019/05/01 12:37:19.789 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 1031, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 98, 255, 117, 102, 102, 255, 101, 114, 95, 112, 111, 255, 111, 108, 255, 95, 100, 117, 109, 112, 95, 255, 112, 255, 99, 116, 0, 0, 0, 0, 0, 250, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 98, 255, 117, 102, 102, 255, 101, 114, 95, 112, 111, 255, 111, 108, 255, 95, 102, 105, 108, 101, 110, 255, 97, 255, 109, 101, 0, 0, 0, 0, 0, 250, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 117, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1032, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1033, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1034, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1054, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1054] [region_id=1031]
[2019/05/01 12:37:19.790 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 1031] 1054"]
[2019/05/01 12:37:19.790 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=1031]
[2019/05/01 12:37:19.823 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=33.541101ms] [region_id=1031]
[2019/05/01 12:37:20.099 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=28_7_24] [peer_id=777] [region_id=28]
[2019/05/01 12:37:20.099 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=123_7_11] [peer_id=491] [region_id=123]
[2019/05/01 12:37:20.099 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=108_7_11] [peer_id=782] [region_id=108]
[2019/05/01 12:37:20.099 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=132_7_11] [peer_id=574] [region_id=132]
[2019/05/01 12:37:20.099 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=147_7_11] [peer_id=575] [region_id=147]
[2019/05/01 12:37:20.099 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=117_7_11] [peer_id=1005] [region_id=117]
[2019/05/01 12:37:20.099 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=241_6_7] [peer_id=894] [region_id=241]
[2019/05/01 12:37:20.099 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=245_7_8] [peer_id=664] [region_id=245]
[2019/05/01 12:37:20.099 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=249_7_8] [peer_id=487] [region_id=249]
[2019/05/01 12:37:20.100 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=253_7_8] [peer_id=489] [region_id=253]
[2019/05/01 12:37:20.100 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=337_7_8] [peer_id=578] [region_id=337]
[2019/05/01 12:37:20.100 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=341_7_8] [peer_id=1008] [region_id=341]
[2019/05/01 12:37:20.100 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=409_6_7] [peer_id=900] [region_id=409]
[2019/05/01 12:37:20.100 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=413_7_8] [peer_id=896] [region_id=413]
[2019/05/01 12:37:20.100 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=417_7_11] [peer_id=898] [region_id=417]
[2019/05/01 12:37:20.100 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=421_7_8] [peer_id=663] [region_id=421]
[2019/05/01 12:37:20.100 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=448_7_8] [peer_id=778] [region_id=448]
[2019/05/01 12:37:20.100 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=493_7_8] [peer_id=1010] [region_id=493]
[2019/05/01 12:37:20.100 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=497_7_8] [peer_id=669] [region_id=497]
[2019/05/01 12:37:20.100 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=586_6_7] [peer_id=712] [region_id=586]
[2019/05/01 12:37:20.101 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=598_7_8] [peer_id=668] [region_id=598]
[2019/05/01 12:37:20.101 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=602_7_8] [peer_id=779] [region_id=602]
[2019/05/01 12:37:20.101 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=676_6_7] [peer_id=1004] [region_id=676]
[2019/05/01 12:37:20.101 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=800_6_7] [peer_id=895] [region_id=800]
[2019/05/01 12:37:20.101 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=820_7_8] [peer_id=1009] [region_id=820]
[2019/05/01 12:37:20.101 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=921_7_11] [peer_id=1051] [region_id=921]
[2019/05/01 12:37:20.522 -07:00] [INFO] [unknown:1625] ["[region 497] 669 [term 7] received MsgTimeoutNow from 500 and starts an election to get leadership."]
[2019/05/01 12:37:20.522 -07:00] [INFO] [unknown:739] ["[region 497] 669 became candidate at term 8"]
[2019/05/01 12:37:20.522 -07:00] [INFO] [unknown:854] ["[region 497] 669 received MsgRequestVoteResponse from 669 at term 8"]
[2019/05/01 12:37:20.522 -07:00] [INFO] [unknown:828] ["[region 497] 669 [logterm: 7, index: 13] sent MsgRequestVote request to 500 at term 8"]
[2019/05/01 12:37:20.522 -07:00] [INFO] [unknown:828] ["[region 497] 669 [logterm: 7, index: 13] sent MsgRequestVote request to 1006 at term 8"]
[2019/05/01 12:37:20.552 -07:00] [INFO] [unknown:1625] ["[region 249] 487 [term 7] received MsgTimeoutNow from 252 and starts an election to get leadership."]
[2019/05/01 12:37:20.552 -07:00] [INFO] [unknown:739] ["[region 249] 487 became candidate at term 8"]
[2019/05/01 12:37:20.552 -07:00] [INFO] [unknown:854] ["[region 249] 487 received MsgRequestVoteResponse from 487 at term 8"]
[2019/05/01 12:37:20.552 -07:00] [INFO] [unknown:828] ["[region 249] 487 [logterm: 7, index: 10] sent MsgRequestVote request to 252 at term 8"]
[2019/05/01 12:37:20.552 -07:00] [INFO] [unknown:828] ["[region 249] 487 [logterm: 7, index: 10] sent MsgRequestVote request to 251 at term 8"]
[2019/05/01 12:37:20.573 -07:00] [INFO] [unknown:854] ["[region 497] 669 received MsgRequestVoteResponse from 500 at term 8"]
[2019/05/01 12:37:20.573 -07:00] [INFO] [unknown:1550] ["[region 497] 669 [quorum:2] has received 2 MsgRequestVoteResponse votes and 0 vote rejections"]
[2019/05/01 12:37:20.573 -07:00] [INFO] [unknown:789] ["[region 497] 669 became leader at term 8"]
[2019/05/01 12:37:20.598 -07:00] [INFO] [unknown:1625] ["[region 602] 779 [term 7] received MsgTimeoutNow from 605 and starts an election to get leadership."]
[2019/05/01 12:37:20.598 -07:00] [INFO] [unknown:739] ["[region 602] 779 became candidate at term 8"]
[2019/05/01 12:37:20.598 -07:00] [INFO] [unknown:854] ["[region 602] 779 received MsgRequestVoteResponse from 779 at term 8"]
[2019/05/01 12:37:20.598 -07:00] [INFO] [unknown:828] ["[region 602] 779 [logterm: 7, index: 10] sent MsgRequestVote request to 605 at term 8"]
[2019/05/01 12:37:20.598 -07:00] [INFO] [unknown:828] ["[region 602] 779 [logterm: 7, index: 10] sent MsgRequestVote request to 604 at term 8"]
[2019/05/01 12:37:20.610 -07:00] [INFO] [unknown:854] ["[region 249] 487 received MsgRequestVoteResponse from 251 at term 8"]
[2019/05/01 12:37:20.610 -07:00] [INFO] [unknown:1550] ["[region 249] 487 [quorum:2] has received 2 MsgRequestVoteResponse votes and 0 vote rejections"]
[2019/05/01 12:37:20.610 -07:00] [INFO] [unknown:789] ["[region 249] 487 became leader at term 8"]
[2019/05/01 12:37:20.647 -07:00] [INFO] [unknown:1625] ["[region 337] 578 [term 7] received MsgTimeoutNow from 340 and starts an election to get leadership."]
[2019/05/01 12:37:20.647 -07:00] [INFO] [unknown:739] ["[region 337] 578 became candidate at term 8"]
[2019/05/01 12:37:20.647 -07:00] [INFO] [unknown:854] ["[region 337] 578 received MsgRequestVoteResponse from 578 at term 8"]
[2019/05/01 12:37:20.647 -07:00] [INFO] [unknown:828] ["[region 337] 578 [logterm: 7, index: 10] sent MsgRequestVote request to 340 at term 8"]
[2019/05/01 12:37:20.647 -07:00] [INFO] [unknown:828] ["[region 337] 578 [logterm: 7, index: 10] sent MsgRequestVote request to 339 at term 8"]
[2019/05/01 12:37:20.696 -07:00] [INFO] [unknown:854] ["[region 602] 779 received MsgRequestVoteResponse from 604 at term 8"]
[2019/05/01 12:37:20.696 -07:00] [INFO] [unknown:1550] ["[region 602] 779 [quorum:2] has received 2 MsgRequestVoteResponse votes and 0 vote rejections"]
[2019/05/01 12:37:20.696 -07:00] [INFO] [unknown:789] ["[region 602] 779 became leader at term 8"]
[2019/05/01 12:37:20.734 -07:00] [INFO] [unknown:854] ["[region 337] 578 received MsgRequestVoteResponse from 339 at term 8"]
[2019/05/01 12:37:20.734 -07:00] [INFO] [unknown:1550] ["[region 337] 578 [quorum:2] has received 2 MsgRequestVoteResponse votes and 0 vote rejections"]
[2019/05/01 12:37:20.734 -07:00] [INFO] [unknown:789] ["[region 337] 578 became leader at term 8"]
[2019/05/01 12:37:20.886 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 1054, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=8] [term=6] [peer_id=1054] [region_id=1031]
[2019/05/01 12:37:20.886 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 6, version: 117, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=1054] [region_id=1031]
[2019/05/01 12:37:20.886 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 1031, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 98, 255, 117, 102, 102, 255, 101, 114, 95, 112, 111, 255, 111, 108, 255, 95, 100, 117, 109, 112, 95, 255, 112, 255, 99, 116, 0, 0, 0, 0, 0, 250, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 98, 255, 117, 102, 102, 255, 101, 114, 95, 112, 111, 255, 111, 108, 255, 95, 102, 105, 108, 101, 110, 255, 97, 255, 109, 101, 0, 0, 0, 0, 0, 250, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 117, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1032, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1033, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1034, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1054, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1054, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1054] [region_id=1031]
[2019/05/01 12:37:21.042 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 1033, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=9] [term=6] [peer_id=1054] [region_id=1031]
[2019/05/01 12:37:21.054 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 7, version: 117, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=1054] [region_id=1031]
[2019/05/01 12:37:21.054 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 1031, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 98, 255, 117, 102, 102, 255, 101, 114, 95, 112, 111, 255, 111, 108, 255, 95, 100, 117, 109, 112, 95, 255, 112, 255, 99, 116, 0, 0, 0, 0, 0, 250, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 98, 255, 117, 102, 102, 255, 101, 114, 95, 112, 111, 255, 111, 108, 255, 95, 102, 105, 108, 101, 110, 255, 97, 255, 109, 101, 0, 0, 0, 0, 0, 250, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 7, version: 117, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1032, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1033, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1034, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1054, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1033, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1054] [region_id=1031]
[2019/05/01 12:37:21.750 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_1019_6_7_(default|lock|write).sst] [snap_key=1019_6_7]
[2019/05/01 12:37:21.770 -07:00] [INFO] [unknown:1792] ["[region 1019] 1096 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 7, term: 6]"]
[2019/05/01 12:37:21.770 -07:00] [INFO] [unknown:1816] ["[region 1019] 1096 restored progress of 1020 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:37:21.770 -07:00] [INFO] [unknown:1816] ["[region 1019] 1096 restored progress of 1021 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:37:21.770 -07:00] [INFO] [unknown:1816] ["[region 1019] 1096 restored progress of 1022 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:37:21.770 -07:00] [INFO] [unknown:1816] ["[region 1019] 1096 restored progress of 1096 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:37:21.770 -07:00] [INFO] [unknown:474] ["[region 1019] 1096 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 7, term: 6]"]
[2019/05/01 12:37:21.770 -07:00] [INFO] [unknown:1736] ["[region 1019] 1096 [commit: 7] restored snapshot [index: 7, term: 6]"]
[2019/05/01 12:37:21.770 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=1096] [region_id=1019]
[2019/05/01 12:37:21.770 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 7, truncated_state: Some(RaftTruncatedState { index: 7, term: 6, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 1019, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 97, 255, 117, 116, 111, 255, 105, 110, 99, 95, 108, 255, 111, 99, 255, 107, 95, 109, 111, 100, 101, 255, 0, 255, 0, 0, 0, 0, 0, 0, 0, 247, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 98, 255, 117, 102, 102, 255, 101, 114, 95, 112, 111, 255, 111, 108, 255, 95, 100, 117, 109, 112, 95, 255, 97, 255, 116, 95, 115, 104, 117, 116, 100, 255, 255, 111, 119, 110, 0, 0, 0, 0, 0, 255, 250, 0, 0, 0, 0, 0, 0, 0, 248], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 117, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1020, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1021, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1022, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1096, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1096] [region_id=1019]
[2019/05/01 12:37:21.812 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 1019] 1096"]
[2019/05/01 12:37:21.812 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 1019, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 97, 255, 117, 116, 111, 255, 105, 110, 99, 95, 108, 255, 111, 99, 255, 107, 95, 109, 111, 100, 101, 255, 0, 255, 0, 0, 0, 0, 0, 0, 0, 247, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 98, 255, 117, 102, 102, 255, 101, 114, 95, 112, 111, 255, 111, 108, 255, 95, 100, 117, 109, 112, 95, 255, 97, 255, 116, 95, 115, 104, 117, 116, 100, 255, 255, 111, 119, 110, 0, 0, 0, 0, 0, 255, 250, 0, 0, 0, 0, 0, 0, 0, 248], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 117, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1020, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1021, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1022, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1096, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1096] [region_id=1019]
[2019/05/01 12:37:21.812 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=1019]
[2019/05/01 12:37:21.858 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=45.812084ms] [region_id=1019]
[2019/05/01 12:37:22.865 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 1096, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=8] [term=6] [peer_id=1096] [region_id=1019]
[2019/05/01 12:37:22.865 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 6, version: 117, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=1096] [region_id=1019]
[2019/05/01 12:37:22.865 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 1019, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 97, 255, 117, 116, 111, 255, 105, 110, 99, 95, 108, 255, 111, 99, 255, 107, 95, 109, 111, 100, 101, 255, 0, 255, 0, 0, 0, 0, 0, 0, 0, 247, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 98, 255, 117, 102, 102, 255, 101, 114, 95, 112, 111, 255, 111, 108, 255, 95, 100, 117, 109, 112, 95, 255, 97, 255, 116, 95, 115, 104, 117, 116, 100, 255, 255, 111, 119, 110, 0, 0, 0, 0, 0, 255, 250, 0, 0, 0, 0, 0, 0, 0, 248], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 117, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1020, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1021, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1022, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1096, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1096, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1096] [region_id=1019]
[2019/05/01 12:37:22.959 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 1022, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=9] [term=6] [peer_id=1096] [region_id=1019]
[2019/05/01 12:37:22.959 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 7, version: 117, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=1096] [region_id=1019]
[2019/05/01 12:37:22.959 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 1019, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 97, 255, 117, 116, 111, 255, 105, 110, 99, 95, 108, 255, 111, 99, 255, 107, 95, 109, 111, 100, 101, 255, 0, 255, 0, 0, 0, 0, 0, 0, 0, 247, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 98, 255, 117, 102, 102, 255, 101, 114, 95, 112, 111, 255, 111, 108, 255, 95, 100, 117, 109, 112, 95, 255, 97, 255, 116, 95, 115, 104, 117, 116, 100, 255, 255, 111, 119, 110, 0, 0, 0, 0, 0, 255, 250, 0, 0, 0, 0, 0, 0, 0, 248], region_epoch: Some(RegionEpoch { conf_ver: 7, version: 117, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1020, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1021, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1022, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1096, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1022, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1096] [region_id=1019]
[2019/05/01 12:37:23.736 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=1100] [region_id=1043]
[2019/05/01 12:37:23.736 -07:00] [INFO] [unknown:719] ["[region 1043] 1100 became follower at term 0"]
[2019/05/01 12:37:23.736 -07:00] [INFO] [unknown:295] ["[region 1043] 1100 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:37:23.736 -07:00] [INFO] [unknown:719] ["[region 1043] 1100 became follower at term 1"]
[2019/05/01 12:37:23.736 -07:00] [INFO] [unknown:920] ["[region 1043] 1100 [term: 1] received a MsgHeartbeat message with higher term from 1045 [term: 7]"]
[2019/05/01 12:37:23.736 -07:00] [INFO] [unknown:719] ["[region 1043] 1100 became follower at term 7"]
[2019/05/01 12:37:24.137 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=1099] [region_id=505]
[2019/05/01 12:37:24.137 -07:00] [INFO] [unknown:719] ["[region 505] 1099 became follower at term 0"]
[2019/05/01 12:37:24.137 -07:00] [INFO] [unknown:295] ["[region 505] 1099 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:37:24.137 -07:00] [INFO] [unknown:719] ["[region 505] 1099 became follower at term 1"]
[2019/05/01 12:37:24.137 -07:00] [INFO] [unknown:920] ["[region 505] 1099 [term: 1] received a MsgHeartbeat message with higher term from 506 [term: 6]"]
[2019/05/01 12:37:24.138 -07:00] [INFO] [unknown:719] ["[region 505] 1099 became follower at term 6"]
[2019/05/01 12:37:24.935 -07:00] [INFO] [pd.rs:558] ["try to change peer"] [peer="Peer { id: 1101, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [change_type=AddLearnerNode] [region_id=96]
[2019/05/01 12:37:24.935 -07:00] [INFO] [peer.rs:1953] ["propose conf change peer"] [change_peer=1101] [change_type=AddLearnerNode] [peer_id=169] [region_id=96]
[2019/05/01 12:37:24.969 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddLearnerNode, peer: Some(Peer { id: 1101, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=11] [term=7] [peer_id=169] [region_id=96]
[2019/05/01 12:37:24.969 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 5, version: 17, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddLearner] [peer_id=169] [region_id=96]
[2019/05/01 12:37:24.969 -07:00] [INFO] [apply.rs:1476] ["add learner successfully"] [region="Region { id: 96, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 97, 117, 116, 111, 255, 95, 105, 110, 99, 255, 114, 101, 109, 255, 101, 110, 116, 95, 111, 255, 102, 102, 255, 115, 101, 116, 0, 0, 0, 252, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 5, version: 17, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 97, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 98, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 169, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1101, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=169] [region_id=96]
[2019/05/01 12:37:24.979 -07:00] [INFO] [peer.rs:1318] ["notify pd with change peer region"] [region="Region { id: 96, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 97, 117, 116, 111, 255, 95, 105, 110, 99, 255, 114, 101, 109, 255, 101, 110, 116, 95, 111, 255, 102, 102, 255, 115, 101, 116, 0, 0, 0, 252, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 17, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 97, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 98, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 169, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1101, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=169] [region_id=96]
[2019/05/01 12:37:25.740 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_1043_7_8_(default|lock|write).sst] [snap_key=1043_7_8]
[2019/05/01 12:37:25.765 -07:00] [INFO] [unknown:1792] ["[region 1043] 1100 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 8, term: 7]"]
[2019/05/01 12:37:25.765 -07:00] [INFO] [unknown:1816] ["[region 1043] 1100 restored progress of 1044 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:37:25.765 -07:00] [INFO] [unknown:1816] ["[region 1043] 1100 restored progress of 1045 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:37:25.765 -07:00] [INFO] [unknown:1816] ["[region 1043] 1100 restored progress of 1046 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:37:25.765 -07:00] [INFO] [unknown:1816] ["[region 1043] 1100 restored progress of 1100 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:37:25.765 -07:00] [INFO] [unknown:474] ["[region 1043] 1100 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 8, term: 7]"]
[2019/05/01 12:37:25.765 -07:00] [INFO] [unknown:1736] ["[region 1043] 1100 [commit: 8] restored snapshot [index: 8, term: 7]"]
[2019/05/01 12:37:25.765 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=1100] [region_id=1043]
[2019/05/01 12:37:25.765 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 8, truncated_state: Some(RaftTruncatedState { index: 8, term: 7, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 1043, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 98, 255, 117, 102, 102, 255, 101, 114, 95, 112, 111, 255, 111, 108, 255, 95, 108, 111, 97, 100, 95, 255, 97, 255, 98, 111, 114, 116, 0, 0, 0, 252, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 98, 255, 117, 102, 102, 255, 101, 114, 95, 112, 111, 255, 111, 108, 255, 95, 108, 111, 97, 100, 95, 255, 97, 255, 116, 95, 115, 116, 97, 114, 116, 255, 255, 117, 112, 0, 0, 0, 0, 0, 0, 255, 249, 0, 0, 0, 0, 0, 0, 0, 248], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 117, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1044, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1045, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1046, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1100, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1100] [region_id=1043]
[2019/05/01 12:37:25.815 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 1043] 1100"]
[2019/05/01 12:37:25.815 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 1043, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 98, 255, 117, 102, 102, 255, 101, 114, 95, 112, 111, 255, 111, 108, 255, 95, 108, 111, 97, 100, 95, 255, 97, 255, 98, 111, 114, 116, 0, 0, 0, 252, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 98, 255, 117, 102, 102, 255, 101, 114, 95, 112, 111, 255, 111, 108, 255, 95, 108, 111, 97, 100, 95, 255, 97, 255, 116, 95, 115, 116, 97, 114, 116, 255, 255, 117, 112, 0, 0, 0, 0, 0, 0, 255, 249, 0, 0, 0, 0, 0, 0, 0, 248], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 117, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1044, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1045, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1046, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1100, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1100] [region_id=1043]
[2019/05/01 12:37:25.815 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=1043]
[2019/05/01 12:37:25.869 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=54.136375ms] [region_id=1043]
[2019/05/01 12:37:26.141 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_505_6_7_(default|lock|write).sst] [snap_key=505_6_7]
[2019/05/01 12:37:26.159 -07:00] [INFO] [unknown:1792] ["[region 505] 1099 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 7, term: 6]"]
[2019/05/01 12:37:26.159 -07:00] [INFO] [unknown:1816] ["[region 505] 1099 restored progress of 506 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:37:26.159 -07:00] [INFO] [unknown:1816] ["[region 505] 1099 restored progress of 507 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:37:26.159 -07:00] [INFO] [unknown:1816] ["[region 505] 1099 restored progress of 508 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:37:26.159 -07:00] [INFO] [unknown:1816] ["[region 505] 1099 restored progress of 1099 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:37:26.159 -07:00] [INFO] [unknown:474] ["[region 505] 1099 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 7, term: 6]"]
[2019/05/01 12:37:26.159 -07:00] [INFO] [unknown:1736] ["[region 505] 1099 [commit: 7] restored snapshot [index: 7, term: 6]"]
[2019/05/01 12:37:26.159 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=1099] [region_id=505]
[2019/05/01 12:37:26.159 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 7, truncated_state: Some(RaftTruncatedState { index: 7, term: 6, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 505, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 100, 105, 115, 99, 255, 111, 110, 110, 101, 255, 99, 116, 95, 255, 111, 110, 95, 101, 120, 255, 112, 105, 255, 114, 101, 100, 95, 112, 97, 255, 115, 255, 115, 119, 111, 114, 100, 0, 0, 253, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 100, 105, 118, 95, 255, 112, 114, 101, 99, 255, 105, 115, 105, 255, 111, 110, 95, 105, 110, 255, 99, 114, 255, 101, 109, 101, 110, 116, 0, 254, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 67, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 506, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 507, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 508, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1099, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1099] [region_id=505]
[2019/05/01 12:37:26.208 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 505] 1099"]
[2019/05/01 12:37:26.208 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 505, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 100, 105, 115, 99, 255, 111, 110, 110, 101, 255, 99, 116, 95, 255, 111, 110, 95, 101, 120, 255, 112, 105, 255, 114, 101, 100, 95, 112, 97, 255, 115, 255, 115, 119, 111, 114, 100, 0, 0, 253, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 100, 105, 118, 95, 255, 112, 114, 101, 99, 255, 105, 115, 105, 255, 111, 110, 95, 105, 110, 255, 99, 114, 255, 101, 109, 101, 110, 116, 0, 254, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 67, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 506, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 507, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 508, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1099, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1099] [region_id=505]
[2019/05/01 12:37:26.208 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=505]
[2019/05/01 12:37:26.263 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=54.72416ms] [region_id=505]
[2019/05/01 12:37:26.788 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 1100, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=9] [term=7] [peer_id=1100] [region_id=1043]
[2019/05/01 12:37:26.788 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 6, version: 117, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=1100] [region_id=1043]
[2019/05/01 12:37:26.788 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 1043, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 98, 255, 117, 102, 102, 255, 101, 114, 95, 112, 111, 255, 111, 108, 255, 95, 108, 111, 97, 100, 95, 255, 97, 255, 98, 111, 114, 116, 0, 0, 0, 252, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 98, 255, 117, 102, 102, 255, 101, 114, 95, 112, 111, 255, 111, 108, 255, 95, 108, 111, 97, 100, 95, 255, 97, 255, 116, 95, 115, 116, 97, 114, 116, 255, 255, 117, 112, 0, 0, 0, 0, 0, 0, 255, 249, 0, 0, 0, 0, 0, 0, 0, 248], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 117, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1044, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1045, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1046, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1100, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1100, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1100] [region_id=1043]
[2019/05/01 12:37:26.902 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 1046, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=10] [term=7] [peer_id=1100] [region_id=1043]
[2019/05/01 12:37:26.902 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 7, version: 117, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=1100] [region_id=1043]
[2019/05/01 12:37:26.902 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 1043, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 98, 255, 117, 102, 102, 255, 101, 114, 95, 112, 111, 255, 111, 108, 255, 95, 108, 111, 97, 100, 95, 255, 97, 255, 98, 111, 114, 116, 0, 0, 0, 252, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 98, 255, 117, 102, 102, 255, 101, 114, 95, 112, 111, 255, 111, 108, 255, 95, 108, 111, 97, 100, 95, 255, 97, 255, 116, 95, 115, 116, 97, 114, 116, 255, 255, 117, 112, 0, 0, 0, 0, 0, 0, 255, 249, 0, 0, 0, 0, 0, 0, 0, 248], region_epoch: Some(RegionEpoch { conf_ver: 7, version: 117, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1044, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1045, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1046, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1100, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1046, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1100] [region_id=1043]
[2019/05/01 12:37:26.948 -07:00] [INFO] [peer_storage.rs:759] ["requesting snapshot"] [peer_id=169] [region_id=96]
[2019/05/01 12:37:26.949 -07:00] [INFO] [snap.rs:757] ["scan snapshot of one cf"] [size=0] [key_count=0] [cf=default] [snapshot=/opt/tidb/data/kv/snap/gen_96_7_11_(default|lock|write).sst] [region_id=96]
[2019/05/01 12:37:26.949 -07:00] [INFO] [snap.rs:757] ["scan snapshot of one cf"] [size=0] [key_count=0] [cf=lock] [snapshot=/opt/tidb/data/kv/snap/gen_96_7_11_(default|lock|write).sst] [region_id=96]
[2019/05/01 12:37:26.949 -07:00] [INFO] [snap.rs:757] ["scan snapshot of one cf"] [size=192] [key_count=2] [cf=write] [snapshot=/opt/tidb/data/kv/snap/gen_96_7_11_(default|lock|write).sst] [region_id=96]
[2019/05/01 12:37:26.972 -07:00] [INFO] [snap.rs:875] ["scan snapshot"] [takes=23.202882ms] [size=1464] [key_count=2] [snapshot=/opt/tidb/data/kv/snap/gen_96_7_11_(default|lock|write).sst] [region_id=96]
[2019/05/01 12:37:27.212 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 1099, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=8] [term=6] [peer_id=1099] [region_id=505]
[2019/05/01 12:37:27.212 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 6, version: 67, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=1099] [region_id=505]
[2019/05/01 12:37:27.212 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 505, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 100, 105, 115, 99, 255, 111, 110, 110, 101, 255, 99, 116, 95, 255, 111, 110, 95, 101, 120, 255, 112, 105, 255, 114, 101, 100, 95, 112, 97, 255, 115, 255, 115, 119, 111, 114, 100, 0, 0, 253, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 100, 105, 118, 95, 255, 112, 114, 101, 99, 255, 105, 115, 105, 255, 111, 110, 95, 105, 110, 255, 99, 114, 255, 101, 109, 101, 110, 116, 0, 254, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 67, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 506, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 507, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 508, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1099, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1099, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1099] [region_id=505]
[2019/05/01 12:37:27.287 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 508, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=9] [term=6] [peer_id=1099] [region_id=505]
[2019/05/01 12:37:27.287 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 7, version: 67, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=1099] [region_id=505]
[2019/05/01 12:37:27.287 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 505, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 100, 105, 115, 99, 255, 111, 110, 110, 101, 255, 99, 116, 95, 255, 111, 110, 95, 101, 120, 255, 112, 105, 255, 114, 101, 100, 95, 112, 97, 255, 115, 255, 115, 119, 111, 114, 100, 0, 0, 253, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 100, 105, 118, 95, 255, 112, 114, 101, 99, 255, 105, 115, 105, 255, 111, 110, 95, 105, 110, 255, 99, 114, 255, 101, 109, 101, 110, 116, 0, 254, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 7, version: 67, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 506, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 507, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 508, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1099, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 508, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1099] [region_id=505]
[2019/05/01 12:37:27.763 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=1103] [region_id=692]
[2019/05/01 12:37:27.763 -07:00] [INFO] [unknown:719] ["[region 692] 1103 became follower at term 0"]
[2019/05/01 12:37:27.763 -07:00] [INFO] [unknown:295] ["[region 692] 1103 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:37:27.763 -07:00] [INFO] [unknown:719] ["[region 692] 1103 became follower at term 1"]
[2019/05/01 12:37:27.763 -07:00] [INFO] [unknown:920] ["[region 692] 1103 [term: 1] received a MsgHeartbeat message with higher term from 695 [term: 7]"]
[2019/05/01 12:37:27.763 -07:00] [INFO] [unknown:719] ["[region 692] 1103 became follower at term 7"]
[2019/05/01 12:37:27.840 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=1104] [region_id=349]
[2019/05/01 12:37:27.840 -07:00] [INFO] [unknown:719] ["[region 349] 1104 became follower at term 0"]
[2019/05/01 12:37:27.840 -07:00] [INFO] [unknown:295] ["[region 349] 1104 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:37:27.840 -07:00] [INFO] [unknown:719] ["[region 349] 1104 became follower at term 1"]
[2019/05/01 12:37:27.840 -07:00] [INFO] [unknown:920] ["[region 349] 1104 [term: 1] received a MsgHeartbeat message with higher term from 351 [term: 7]"]
[2019/05/01 12:37:27.840 -07:00] [INFO] [unknown:719] ["[region 349] 1104 became follower at term 7"]
[2019/05/01 12:37:28.300 -07:00] [ERROR] [endpoint.rs:470] [error-response] [err="locked LockInfo { primary_lock: [116, 128, 0, 0, 0, 0, 0, 0, 55, 95, 114, 128, 0, 0, 0, 0, 0, 0, 3], lock_version: 408089905865424897, key: [116, 128, 0, 0, 0, 0, 0, 0, 55, 95, 114, 128, 0, 0, 0, 0, 0, 0, 3], lock_ttl: 3001, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"]
[2019/05/01 12:37:28.773 -07:00] [INFO] [unknown:1625] ["[region 1031] 1054 [term 6] received MsgTimeoutNow from 1032 and starts an election to get leadership."]
[2019/05/01 12:37:28.773 -07:00] [INFO] [unknown:739] ["[region 1031] 1054 became candidate at term 7"]
[2019/05/01 12:37:28.773 -07:00] [INFO] [unknown:854] ["[region 1031] 1054 received MsgRequestVoteResponse from 1054 at term 7"]
[2019/05/01 12:37:28.773 -07:00] [INFO] [unknown:828] ["[region 1031] 1054 [logterm: 6, index: 9] sent MsgRequestVote request to 1032 at term 7"]
[2019/05/01 12:37:28.773 -07:00] [INFO] [unknown:828] ["[region 1031] 1054 [logterm: 6, index: 9] sent MsgRequestVote request to 1034 at term 7"]
[2019/05/01 12:37:28.773 -07:00] [INFO] [unknown:1625] ["[region 1019] 1096 [term 6] received MsgTimeoutNow from 1020 and starts an election to get leadership."]
[2019/05/01 12:37:28.773 -07:00] [INFO] [unknown:739] ["[region 1019] 1096 became candidate at term 7"]
[2019/05/01 12:37:28.773 -07:00] [INFO] [unknown:854] ["[region 1019] 1096 received MsgRequestVoteResponse from 1096 at term 7"]
[2019/05/01 12:37:28.773 -07:00] [INFO] [unknown:828] ["[region 1019] 1096 [logterm: 6, index: 9] sent MsgRequestVote request to 1021 at term 7"]
[2019/05/01 12:37:28.773 -07:00] [INFO] [unknown:828] ["[region 1019] 1096 [logterm: 6, index: 9] sent MsgRequestVote request to 1020 at term 7"]
[2019/05/01 12:37:28.828 -07:00] [INFO] [unknown:854] ["[region 1019] 1096 received MsgRequestVoteResponse from 1021 at term 7"]
[2019/05/01 12:37:28.828 -07:00] [INFO] [unknown:1550] ["[region 1019] 1096 [quorum:2] has received 2 MsgRequestVoteResponse votes and 0 vote rejections"]
[2019/05/01 12:37:28.828 -07:00] [INFO] [unknown:789] ["[region 1019] 1096 became leader at term 7"]
[2019/05/01 12:37:28.850 -07:00] [INFO] [unknown:854] ["[region 1031] 1054 received MsgRequestVoteResponse from 1034 at term 7"]
[2019/05/01 12:37:28.850 -07:00] [INFO] [unknown:1550] ["[region 1031] 1054 [quorum:2] has received 2 MsgRequestVoteResponse votes and 0 vote rejections"]
[2019/05/01 12:37:28.850 -07:00] [INFO] [unknown:789] ["[region 1031] 1054 became leader at term 7"]
[2019/05/01 12:37:28.945 -07:00] [INFO] [unknown:841] ["New connected subchannel at 0x7f041bc736b0 for subchannel 0x7f04cf87ca00"]
[2019/05/01 12:37:28.967 -07:00] [INFO] [snap.rs:389] ["sent snapshot"] [duration=22.633773ms] [size=1464] [snap_key=96_7_11] [region_id=96]
[2019/05/01 12:37:28.967 -07:00] [INFO] [peer.rs:538] ["report snapshot status"] [status=Finish] [to="Peer { id: 1101, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=169] [region_id=96]
[2019/05/01 12:37:29.766 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_692_7_8_(default|lock|write).sst] [snap_key=692_7_8]
[2019/05/01 12:37:29.794 -07:00] [INFO] [unknown:1792] ["[region 692] 1103 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 8, term: 7]"]
[2019/05/01 12:37:29.794 -07:00] [INFO] [unknown:1816] ["[region 692] 1103 restored progress of 693 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:37:29.794 -07:00] [INFO] [unknown:1816] ["[region 692] 1103 restored progress of 694 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:37:29.794 -07:00] [INFO] [unknown:1816] ["[region 692] 1103 restored progress of 695 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:37:29.794 -07:00] [INFO] [unknown:1816] ["[region 692] 1103 restored progress of 1103 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:37:29.794 -07:00] [INFO] [unknown:474] ["[region 692] 1103 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 8, term: 7]"]
[2019/05/01 12:37:29.794 -07:00] [INFO] [unknown:1736] ["[region 692] 1103 [commit: 8] restored snapshot [index: 8, term: 7]"]
[2019/05/01 12:37:29.794 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=1103] [region_id=692]
[2019/05/01 12:37:29.794 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 8, truncated_state: Some(RaftTruncatedState { index: 8, term: 7, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 692, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 103, 116, 105, 100, 255, 95, 112, 117, 114, 255, 103, 101, 100, 255, 0, 0, 0, 0, 0, 250, 0, 0, 253], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 104, 97, 118, 101, 255, 95, 99, 111, 109, 255, 112, 114, 101, 255, 115, 115, 0, 0, 0, 252, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 87, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 693, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 694, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 695, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1103, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1103] [region_id=692]
[2019/05/01 12:37:29.829 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 692] 1103"]
[2019/05/01 12:37:29.829 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 692, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 103, 116, 105, 100, 255, 95, 112, 117, 114, 255, 103, 101, 100, 255, 0, 0, 0, 0, 0, 250, 0, 0, 253], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 104, 97, 118, 101, 255, 95, 99, 111, 109, 255, 112, 114, 101, 255, 115, 115, 0, 0, 0, 252, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 87, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 693, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 694, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 695, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1103, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1103] [region_id=692]
[2019/05/01 12:37:29.829 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=692]
[2019/05/01 12:37:29.843 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_349_7_8_(default|lock|write).sst] [snap_key=349_7_8]
[2019/05/01 12:37:29.857 -07:00] [INFO] [unknown:1792] ["[region 349] 1104 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 8, term: 7]"]
[2019/05/01 12:37:29.857 -07:00] [INFO] [unknown:1816] ["[region 349] 1104 restored progress of 350 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:37:29.857 -07:00] [INFO] [unknown:1816] ["[region 349] 1104 restored progress of 351 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:37:29.857 -07:00] [INFO] [unknown:1816] ["[region 349] 1104 restored progress of 352 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:37:29.857 -07:00] [INFO] [unknown:1816] ["[region 349] 1104 restored progress of 1104 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:37:29.857 -07:00] [INFO] [unknown:474] ["[region 349] 1104 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 8, term: 7]"]
[2019/05/01 12:37:29.857 -07:00] [INFO] [unknown:1736] ["[region 349] 1104 [commit: 8] restored snapshot [index: 8, term: 7]"]
[2019/05/01 12:37:29.857 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=1104] [region_id=349]
[2019/05/01 12:37:29.857 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 8, truncated_state: Some(RaftTruncatedState { index: 8, term: 7, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 349, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 108, 111, 99, 255, 107, 95, 101, 110, 255, 99, 114, 121, 255, 112, 116, 105, 111, 110, 255, 95, 109, 255, 111, 100, 101, 0, 0, 0, 252, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 117, 108, 107, 255, 95, 105, 110, 115, 255, 101, 114, 116, 255, 95, 98, 117, 102, 102, 255, 101, 114, 255, 95, 115, 105, 122, 101, 0, 254, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 37, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 350, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 351, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 352, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1104, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1104] [region_id=349]
[2019/05/01 12:37:29.887 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=57.784912ms] [region_id=692]
[2019/05/01 12:37:29.895 -07:00] [INFO] [pd.rs:558] ["try to change peer"] [peer="Peer { id: 1101, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [change_type=AddNode] [region_id=96]
[2019/05/01 12:37:29.896 -07:00] [INFO] [peer.rs:1953] ["propose conf change peer"] [change_peer=1101] [change_type=AddNode] [peer_id=169] [region_id=96]
[2019/05/01 12:37:29.908 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 349, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 108, 111, 99, 255, 107, 95, 101, 110, 255, 99, 114, 121, 255, 112, 116, 105, 111, 110, 255, 95, 109, 255, 111, 100, 101, 0, 0, 0, 252, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 117, 108, 107, 255, 95, 105, 110, 115, 255, 101, 114, 116, 255, 95, 98, 117, 102, 102, 255, 101, 114, 255, 95, 115, 105, 122, 101, 0, 254, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 37, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 350, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 351, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 352, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1104, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1104] [region_id=349]
[2019/05/01 12:37:29.908 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 349] 1104"]
[2019/05/01 12:37:29.908 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=349]
[2019/05/01 12:37:29.953 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=43.924538ms] [region_id=349]
[2019/05/01 12:37:29.978 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 1101, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=12] [term=7] [peer_id=169] [region_id=96]
[2019/05/01 12:37:29.978 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 6, version: 17, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=169] [region_id=96]
[2019/05/01 12:37:29.978 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 96, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 97, 117, 116, 111, 255, 95, 105, 110, 99, 255, 114, 101, 109, 255, 101, 110, 116, 95, 111, 255, 102, 102, 255, 115, 101, 116, 0, 0, 0, 252, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 17, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 97, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 98, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 169, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1101, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1101, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=169] [region_id=96]
[2019/05/01 12:37:30.001 -07:00] [INFO] [peer.rs:1318] ["notify pd with change peer region"] [region="Region { id: 96, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 97, 117, 116, 111, 255, 95, 105, 110, 99, 255, 114, 101, 109, 255, 101, 110, 116, 95, 111, 255, 102, 102, 255, 115, 101, 116, 0, 0, 0, 252, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 7, version: 17, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 97, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 98, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 169, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1101, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=169] [region_id=96]
[2019/05/01 12:37:30.032 -07:00] [INFO] [pd.rs:558] ["try to change peer"] [peer="Peer { id: 98, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [change_type=RemoveNode] [region_id=96]
[2019/05/01 12:37:30.032 -07:00] [INFO] [peer.rs:1953] ["propose conf change peer"] [change_peer=98] [change_type=RemoveNode] [peer_id=169] [region_id=96]
[2019/05/01 12:37:30.050 -07:00] [INFO] [pd.rs:558] ["try to change peer"] [peer="Peer { id: 98, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [change_type=RemoveNode] [region_id=96]
[2019/05/01 12:37:30.084 -07:00] [INFO] [peer.rs:1927] ["there is a pending conf change, try later"] [peer_id=169] [region_id=96]
[2019/05/01 12:37:30.088 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 98, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=13] [term=7] [peer_id=169] [region_id=96]
[2019/05/01 12:37:30.088 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 7, version: 17, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=169] [region_id=96]
[2019/05/01 12:37:30.088 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 96, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 97, 117, 116, 111, 255, 95, 105, 110, 99, 255, 114, 101, 109, 255, 101, 110, 116, 95, 111, 255, 102, 102, 255, 115, 101, 116, 0, 0, 0, 252, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 7, version: 17, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 97, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 98, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 169, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1101, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 98, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=169] [region_id=96]
[2019/05/01 12:37:30.107 -07:00] [INFO] [peer.rs:1318] ["notify pd with change peer region"] [region="Region { id: 96, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 97, 117, 116, 111, 255, 95, 105, 110, 99, 255, 114, 101, 109, 255, 101, 110, 116, 95, 111, 255, 102, 102, 255, 115, 101, 116, 0, 0, 0, 252, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 8, version: 17, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 97, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 169, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1101, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=169] [region_id=96]
[2019/05/01 12:37:30.169 -07:00] [INFO] [unknown:920] ["[region 417] 898 [term: 7] received a MsgRequestVote message with higher term from 484 [term: 8]"]
[2019/05/01 12:37:30.169 -07:00] [INFO] [unknown:719] ["[region 417] 898 became follower at term 8"]
[2019/05/01 12:37:30.169 -07:00] [INFO] [unknown:1083] ["[region 417] 898 [logterm: 7, index: 13, vote: 0] cast MsgRequestVote for 484 [logterm: 7, index: 13] at term 8"]
[2019/05/01 12:37:30.190 -07:00] [INFO] [unknown:920] ["[region 225] 486 [term: 7] received a MsgRequestVote message with higher term from 899 [term: 8]"]
[2019/05/01 12:37:30.190 -07:00] [INFO] [unknown:719] ["[region 225] 486 became follower at term 8"]
[2019/05/01 12:37:30.190 -07:00] [INFO] [unknown:1083] ["[region 225] 486 [logterm: 7, index: 13, vote: 0] cast MsgRequestVote for 899 [logterm: 7, index: 13] at term 8"]
[2019/05/01 12:37:30.258 -07:00] [INFO] [unknown:1625] ["[region 28] 777 [term 7] received MsgTimeoutNow from 163 and starts an election to get leadership."]
[2019/05/01 12:37:30.259 -07:00] [INFO] [unknown:739] ["[region 28] 777 became candidate at term 8"]
[2019/05/01 12:37:30.259 -07:00] [INFO] [unknown:854] ["[region 28] 777 received MsgRequestVoteResponse from 777 at term 8"]
[2019/05/01 12:37:30.259 -07:00] [INFO] [unknown:828] ["[region 28] 777 [logterm: 7, index: 29] sent MsgRequestVote request to 824 at term 8"]
[2019/05/01 12:37:30.259 -07:00] [INFO] [unknown:828] ["[region 28] 777 [logterm: 7, index: 29] sent MsgRequestVote request to 163 at term 8"]
[2019/05/01 12:37:30.366 -07:00] [INFO] [unknown:854] ["[region 28] 777 received MsgRequestVoteResponse from 163 at term 8"]
[2019/05/01 12:37:30.366 -07:00] [INFO] [unknown:1550] ["[region 28] 777 [quorum:2] has received 2 MsgRequestVoteResponse votes and 0 vote rejections"]
[2019/05/01 12:37:30.366 -07:00] [INFO] [unknown:789] ["[region 28] 777 became leader at term 8"]
[2019/05/01 12:37:30.853 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 1103, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=9] [term=7] [peer_id=1103] [region_id=692]
[2019/05/01 12:37:30.853 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 6, version: 87, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=1103] [region_id=692]
[2019/05/01 12:37:30.853 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 692, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 103, 116, 105, 100, 255, 95, 112, 117, 114, 255, 103, 101, 100, 255, 0, 0, 0, 0, 0, 250, 0, 0, 253], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 104, 97, 118, 101, 255, 95, 99, 111, 109, 255, 112, 114, 101, 255, 115, 115, 0, 0, 0, 252, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 87, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 693, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 694, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 695, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1103, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1103, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1103] [region_id=692]
[2019/05/01 12:37:30.978 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 693, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=10] [term=7] [peer_id=1103] [region_id=692]
[2019/05/01 12:37:30.991 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 7, version: 87, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=1103] [region_id=692]
[2019/05/01 12:37:30.991 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 692, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 103, 116, 105, 100, 255, 95, 112, 117, 114, 255, 103, 101, 100, 255, 0, 0, 0, 0, 0, 250, 0, 0, 253], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 104, 97, 118, 101, 255, 95, 99, 111, 109, 255, 112, 114, 101, 255, 115, 115, 0, 0, 0, 252, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 7, version: 87, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 693, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 694, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 695, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1103, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 693, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1103] [region_id=692]
[2019/05/01 12:37:30.991 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 1104, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=9] [term=7] [peer_id=1104] [region_id=349]
[2019/05/01 12:37:30.991 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 6, version: 37, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=1104] [region_id=349]
[2019/05/01 12:37:30.991 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 349, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 108, 111, 99, 255, 107, 95, 101, 110, 255, 99, 114, 121, 255, 112, 116, 105, 111, 110, 255, 95, 109, 255, 111, 100, 101, 0, 0, 0, 252, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 117, 108, 107, 255, 95, 105, 110, 115, 255, 101, 114, 116, 255, 95, 98, 117, 102, 102, 255, 101, 114, 255, 95, 115, 105, 122, 101, 0, 254, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 37, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 350, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 351, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 352, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1104, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1104, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1104] [region_id=349]
[2019/05/01 12:37:31.099 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 350, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=10] [term=7] [peer_id=1104] [region_id=349]
[2019/05/01 12:37:31.099 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 7, version: 37, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=1104] [region_id=349]
[2019/05/01 12:37:31.099 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 349, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 108, 111, 99, 255, 107, 95, 101, 110, 255, 99, 114, 121, 255, 112, 116, 105, 111, 110, 255, 95, 109, 255, 111, 100, 101, 0, 0, 0, 252, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 117, 108, 107, 255, 95, 105, 110, 115, 255, 101, 114, 116, 255, 95, 98, 117, 102, 102, 255, 101, 114, 255, 95, 115, 105, 122, 101, 0, 254, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 7, version: 37, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 350, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 351, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 352, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1104, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 350, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1104] [region_id=349]
[2019/05/01 12:37:31.902 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=1146] [region_id=353]
[2019/05/01 12:37:31.902 -07:00] [INFO] [unknown:719] ["[region 353] 1146 became follower at term 0"]
[2019/05/01 12:37:31.902 -07:00] [INFO] [unknown:295] ["[region 353] 1146 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:37:31.902 -07:00] [INFO] [unknown:719] ["[region 353] 1146 became follower at term 1"]
[2019/05/01 12:37:31.914 -07:00] [INFO] [unknown:920] ["[region 353] 1146 [term: 1] received a MsgHeartbeat message with higher term from 356 [term: 7]"]
[2019/05/01 12:37:31.914 -07:00] [INFO] [unknown:719] ["[region 353] 1146 became follower at term 7"]
[2019/05/01 12:37:33.760 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=1149] [region_id=929]
[2019/05/01 12:37:33.760 -07:00] [INFO] [unknown:719] ["[region 929] 1149 became follower at term 0"]
[2019/05/01 12:37:33.760 -07:00] [INFO] [unknown:295] ["[region 929] 1149 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:37:33.760 -07:00] [INFO] [unknown:719] ["[region 929] 1149 became follower at term 1"]
[2019/05/01 12:37:33.760 -07:00] [INFO] [unknown:920] ["[region 929] 1149 [term: 1] received a MsgHeartbeat message with higher term from 932 [term: 7]"]
[2019/05/01 12:37:33.760 -07:00] [INFO] [unknown:719] ["[region 929] 1149 became follower at term 7"]
[2019/05/01 12:37:33.895 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_353_7_8_(default|lock|write).sst] [snap_key=353_7_8]
[2019/05/01 12:37:33.919 -07:00] [INFO] [unknown:1792] ["[region 353] 1146 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 8, term: 7]"]
[2019/05/01 12:37:33.919 -07:00] [INFO] [unknown:1816] ["[region 353] 1146 restored progress of 354 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:37:33.919 -07:00] [INFO] [unknown:1816] ["[region 353] 1146 restored progress of 355 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:37:33.919 -07:00] [INFO] [unknown:1816] ["[region 353] 1146 restored progress of 356 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:37:33.919 -07:00] [INFO] [unknown:1816] ["[region 353] 1146 restored progress of 1146 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:37:33.919 -07:00] [INFO] [unknown:474] ["[region 353] 1146 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 8, term: 7]"]
[2019/05/01 12:37:33.919 -07:00] [INFO] [unknown:1736] ["[region 353] 1146 [commit: 8] restored snapshot [index: 8, term: 7]"]
[2019/05/01 12:37:33.919 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=1146] [region_id=353]
[2019/05/01 12:37:33.919 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 8, truncated_state: Some(RaftTruncatedState { index: 8, term: 7, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 353, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 117, 108, 107, 255, 95, 105, 110, 115, 255, 101, 114, 116, 255, 95, 98, 117, 102, 102, 255, 101, 114, 255, 95, 115, 105, 122, 101, 0, 254, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 99, 104, 97, 114, 255, 97, 99, 116, 101, 255, 114, 95, 115, 255, 101, 116, 95, 99, 108, 255, 105, 101, 255, 110, 116, 0, 0, 0, 0, 251, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 37, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 354, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 355, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 356, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1146, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1146] [region_id=353]
[2019/05/01 12:37:33.953 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 353, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 117, 108, 107, 255, 95, 105, 110, 115, 255, 101, 114, 116, 255, 95, 98, 117, 102, 102, 255, 101, 114, 255, 95, 115, 105, 122, 101, 0, 254, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 99, 104, 97, 114, 255, 97, 99, 116, 101, 255, 114, 95, 115, 255, 101, 116, 95, 99, 108, 255, 105, 101, 255, 110, 116, 0, 0, 0, 0, 251, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 37, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 354, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 355, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 356, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1146, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1146] [region_id=353]
[2019/05/01 12:37:33.953 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=353]
[2019/05/01 12:37:33.953 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 353] 1146"]
[2019/05/01 12:37:33.998 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=45.433189ms] [region_id=353]
[2019/05/01 12:37:34.959 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 1146, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=9] [term=7] [peer_id=1146] [region_id=353]
[2019/05/01 12:37:34.959 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 6, version: 37, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=1146] [region_id=353]
[2019/05/01 12:37:34.959 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 353, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 117, 108, 107, 255, 95, 105, 110, 115, 255, 101, 114, 116, 255, 95, 98, 117, 102, 102, 255, 101, 114, 255, 95, 115, 105, 122, 101, 0, 254, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 99, 104, 97, 114, 255, 97, 99, 116, 101, 255, 114, 95, 115, 255, 101, 116, 95, 99, 108, 255, 105, 101, 255, 110, 116, 0, 0, 0, 0, 251, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 37, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 354, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 355, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 356, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1146, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1146, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1146] [region_id=353]
[2019/05/01 12:37:35.034 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 355, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=10] [term=7] [peer_id=1146] [region_id=353]
[2019/05/01 12:37:35.034 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 7, version: 37, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=1146] [region_id=353]
[2019/05/01 12:37:35.034 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 353, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 117, 108, 107, 255, 95, 105, 110, 115, 255, 101, 114, 116, 255, 95, 98, 117, 102, 102, 255, 101, 114, 255, 95, 115, 105, 122, 101, 0, 254, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 99, 104, 97, 114, 255, 97, 99, 116, 101, 255, 114, 95, 115, 255, 101, 116, 95, 99, 108, 255, 105, 101, 255, 110, 116, 0, 0, 0, 0, 251, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 7, version: 37, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 354, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 355, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 356, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1146, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 355, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1146] [region_id=353]
[2019/05/01 12:37:35.763 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_929_7_8_(default|lock|write).sst] [snap_key=929_7_8]
[2019/05/01 12:37:35.774 -07:00] [INFO] [unknown:1792] ["[region 929] 1149 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 8, term: 7]"]
[2019/05/01 12:37:35.774 -07:00] [INFO] [unknown:1816] ["[region 929] 1149 restored progress of 930 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:37:35.774 -07:00] [INFO] [unknown:1816] ["[region 929] 1149 restored progress of 931 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:37:35.774 -07:00] [INFO] [unknown:1816] ["[region 929] 1149 restored progress of 932 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:37:35.774 -07:00] [INFO] [unknown:1816] ["[region 929] 1149 restored progress of 1149 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:37:35.774 -07:00] [INFO] [unknown:474] ["[region 929] 1149 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 8, term: 7]"]
[2019/05/01 12:37:35.774 -07:00] [INFO] [unknown:1736] ["[region 929] 1149 [commit: 8] restored snapshot [index: 8, term: 7]"]
[2019/05/01 12:37:35.774 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=1149] [region_id=929]
[2019/05/01 12:37:35.774 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 8, truncated_state: Some(RaftTruncatedState { index: 8, term: 7, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 929, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 97, 255, 112, 105, 95, 255, 100, 105, 115, 97, 98, 255, 108, 101, 255, 95, 114, 111, 119, 108, 111, 255, 99, 255, 107, 0, 0, 0, 0, 0, 0, 249, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 97, 255, 112, 105, 95, 255, 101, 110, 97, 98, 108, 255, 101, 95, 255, 98, 105, 110, 108, 111, 103, 255, 0, 255, 0, 0, 0, 0, 0, 0, 0, 247, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 107, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 930, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 931, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 932, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1149, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1149] [region_id=929]
[2019/05/01 12:37:35.807 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 929, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 97, 255, 112, 105, 95, 255, 100, 105, 115, 97, 98, 255, 108, 101, 255, 95, 114, 111, 119, 108, 111, 255, 99, 255, 107, 0, 0, 0, 0, 0, 0, 249, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 97, 255, 112, 105, 95, 255, 101, 110, 97, 98, 108, 255, 101, 95, 255, 98, 105, 110, 108, 111, 103, 255, 0, 255, 0, 0, 0, 0, 0, 0, 0, 247, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 107, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 930, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 931, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 932, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1149, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1149] [region_id=929]
[2019/05/01 12:37:35.807 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 929] 1149"]
[2019/05/01 12:37:35.807 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=929]
[2019/05/01 12:37:35.819 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=11.258857ms] [region_id=929]
[2019/05/01 12:37:35.965 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=1150] [region_id=1121]
[2019/05/01 12:37:35.965 -07:00] [INFO] [unknown:719] ["[region 1121] 1150 became follower at term 0"]
[2019/05/01 12:37:35.965 -07:00] [INFO] [unknown:295] ["[region 1121] 1150 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:37:35.965 -07:00] [INFO] [unknown:719] ["[region 1121] 1150 became follower at term 1"]
[2019/05/01 12:37:35.965 -07:00] [INFO] [unknown:920] ["[region 1121] 1150 [term: 1] received a MsgHeartbeat message with higher term from 1124 [term: 6]"]
[2019/05/01 12:37:35.965 -07:00] [INFO] [unknown:719] ["[region 1121] 1150 became follower at term 6"]
[2019/05/01 12:37:36.216 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=1151] [region_id=105]
[2019/05/01 12:37:36.216 -07:00] [INFO] [unknown:719] ["[region 105] 1151 became follower at term 0"]
[2019/05/01 12:37:36.216 -07:00] [INFO] [unknown:295] ["[region 105] 1151 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:37:36.216 -07:00] [INFO] [unknown:719] ["[region 105] 1151 became follower at term 1"]
[2019/05/01 12:37:36.216 -07:00] [INFO] [unknown:920] ["[region 105] 1151 [term: 1] received a MsgHeartbeat message with higher term from 107 [term: 8]"]
[2019/05/01 12:37:36.216 -07:00] [INFO] [unknown:719] ["[region 105] 1151 became follower at term 8"]
[2019/05/01 12:37:36.786 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 1149, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=9] [term=7] [peer_id=1149] [region_id=929]
[2019/05/01 12:37:36.786 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 6, version: 107, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=1149] [region_id=929]
[2019/05/01 12:37:36.786 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 929, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 97, 255, 112, 105, 95, 255, 100, 105, 115, 97, 98, 255, 108, 101, 255, 95, 114, 111, 119, 108, 111, 255, 99, 255, 107, 0, 0, 0, 0, 0, 0, 249, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 97, 255, 112, 105, 95, 255, 101, 110, 97, 98, 108, 255, 101, 95, 255, 98, 105, 110, 108, 111, 103, 255, 0, 255, 0, 0, 0, 0, 0, 0, 0, 247, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 107, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 930, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 931, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 932, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1149, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1149, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1149] [region_id=929]
[2019/05/01 12:37:36.847 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 931, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=10] [term=7] [peer_id=1149] [region_id=929]
[2019/05/01 12:37:36.847 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 7, version: 107, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=1149] [region_id=929]
[2019/05/01 12:37:36.847 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 929, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 97, 255, 112, 105, 95, 255, 100, 105, 115, 97, 98, 255, 108, 101, 255, 95, 114, 111, 119, 108, 111, 255, 99, 255, 107, 0, 0, 0, 0, 0, 0, 249, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 97, 255, 112, 105, 95, 255, 101, 110, 97, 98, 108, 255, 101, 95, 255, 98, 105, 110, 108, 111, 103, 255, 0, 255, 0, 0, 0, 0, 0, 0, 0, 247, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 7, version: 107, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 930, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 931, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 932, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1149, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 931, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1149] [region_id=929]
[2019/05/01 12:37:36.849 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=1152] [region_id=425]
[2019/05/01 12:37:36.849 -07:00] [INFO] [unknown:719] ["[region 425] 1152 became follower at term 0"]
[2019/05/01 12:37:36.849 -07:00] [INFO] [unknown:295] ["[region 425] 1152 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:37:36.849 -07:00] [INFO] [unknown:719] ["[region 425] 1152 became follower at term 1"]
[2019/05/01 12:37:36.849 -07:00] [INFO] [unknown:920] ["[region 425] 1152 [term: 1] received a MsgHeartbeat message with higher term from 427 [term: 7]"]
[2019/05/01 12:37:36.849 -07:00] [INFO] [unknown:719] ["[region 425] 1152 became follower at term 7"]
[2019/05/01 12:37:36.916 -07:00] [INFO] [pd.rs:558] ["try to change peer"] [peer="Peer { id: 1153, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [change_type=AddLearnerNode] [region_id=1031]
[2019/05/01 12:37:36.916 -07:00] [INFO] [peer.rs:1953] ["propose conf change peer"] [change_peer=1153] [change_type=AddLearnerNode] [peer_id=1054] [region_id=1031]
[2019/05/01 12:37:36.990 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddLearnerNode, peer: Some(Peer { id: 1153, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=11] [term=7] [peer_id=1054] [region_id=1031]
[2019/05/01 12:37:36.991 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 8, version: 117, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddLearner] [peer_id=1054] [region_id=1031]
[2019/05/01 12:37:36.991 -07:00] [INFO] [apply.rs:1476] ["add learner successfully"] [region="Region { id: 1031, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 98, 255, 117, 102, 102, 255, 101, 114, 95, 112, 111, 255, 111, 108, 255, 95, 100, 117, 109, 112, 95, 255, 112, 255, 99, 116, 0, 0, 0, 0, 0, 250, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 98, 255, 117, 102, 102, 255, 101, 114, 95, 112, 111, 255, 111, 108, 255, 95, 102, 105, 108, 101, 110, 255, 97, 255, 109, 101, 0, 0, 0, 0, 0, 250, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 8, version: 117, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1032, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1034, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1054, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1153, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1054] [region_id=1031]
[2019/05/01 12:37:36.999 -07:00] [INFO] [peer.rs:1318] ["notify pd with change peer region"] [region="Region { id: 1031, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 98, 255, 117, 102, 102, 255, 101, 114, 95, 112, 111, 255, 111, 108, 255, 95, 100, 117, 109, 112, 95, 255, 112, 255, 99, 116, 0, 0, 0, 0, 0, 250, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 98, 255, 117, 102, 102, 255, 101, 114, 95, 112, 111, 255, 111, 108, 255, 95, 102, 105, 108, 101, 110, 255, 97, 255, 109, 101, 0, 0, 0, 0, 0, 250, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 117, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1032, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1034, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1054, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1153, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1054] [region_id=1031]
[2019/05/01 12:37:37.980 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_1121_6_7_(default|lock|write).sst] [snap_key=1121_6_7]
[2019/05/01 12:37:38.007 -07:00] [INFO] [unknown:1792] ["[region 1121] 1150 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 7, term: 6]"]
[2019/05/01 12:37:38.007 -07:00] [INFO] [unknown:1816] ["[region 1121] 1150 restored progress of 1122 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:37:38.007 -07:00] [INFO] [unknown:1816] ["[region 1121] 1150 restored progress of 1123 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:37:38.007 -07:00] [INFO] [unknown:1816] ["[region 1121] 1150 restored progress of 1124 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:37:38.007 -07:00] [INFO] [unknown:1816] ["[region 1121] 1150 restored progress of 1150 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:37:38.007 -07:00] [INFO] [unknown:474] ["[region 1121] 1150 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 7, term: 6]"]
[2019/05/01 12:37:38.007 -07:00] [INFO] [unknown:1736] ["[region 1121] 1150 [commit: 7] restored snapshot [index: 7, term: 6]"]
[2019/05/01 12:37:38.007 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=1150] [region_id=1121]
[2019/05/01 12:37:38.007 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 7, truncated_state: Some(RaftTruncatedState { index: 7, term: 6, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 1121, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 100, 255, 111, 117, 98, 255, 108, 101, 119, 114, 105, 255, 116, 101, 255, 0, 0, 0, 0, 0, 0, 249, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 102, 255, 97, 115, 116, 255, 95, 115, 104, 117, 116, 255, 100, 111, 255, 119, 110, 0, 0, 0, 0, 251, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 137, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1122, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1123, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1124, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1150, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1150] [region_id=1121]
[2019/05/01 12:37:38.049 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 1121] 1150"]
[2019/05/01 12:37:38.049 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 1121, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 100, 255, 111, 117, 98, 255, 108, 101, 119, 114, 105, 255, 116, 101, 255, 0, 0, 0, 0, 0, 0, 249, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 102, 255, 97, 115, 116, 255, 95, 115, 104, 117, 116, 255, 100, 111, 255, 119, 110, 0, 0, 0, 0, 251, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 137, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1122, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1123, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1124, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1150, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1150] [region_id=1121]
[2019/05/01 12:37:38.049 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=1121]
[2019/05/01 12:37:38.090 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=40.271167ms] [region_id=1121]
[2019/05/01 12:37:38.220 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_105_8_12_(default|lock|write).sst] [snap_key=105_8_12]
[2019/05/01 12:37:38.236 -07:00] [INFO] [unknown:1792] ["[region 105] 1151 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 12, term: 8]"]
[2019/05/01 12:37:38.236 -07:00] [INFO] [unknown:1816] ["[region 105] 1151 restored progress of 106 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:37:38.236 -07:00] [INFO] [unknown:1816] ["[region 105] 1151 restored progress of 107 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:37:38.236 -07:00] [INFO] [unknown:1816] ["[region 105] 1151 restored progress of 212 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:37:38.236 -07:00] [INFO] [unknown:1816] ["[region 105] 1151 restored progress of 1151 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:37:38.236 -07:00] [INFO] [unknown:474] ["[region 105] 1151 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 12, term: 8]"]
[2019/05/01 12:37:38.236 -07:00] [INFO] [unknown:1736] ["[region 105] 1151 [commit: 12] restored snapshot [index: 12, term: 8]"]
[2019/05/01 12:37:38.236 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=1151] [region_id=105]
[2019/05/01 12:37:38.236 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 12, truncated_state: Some(RaftTruncatedState { index: 12, term: 8, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 105, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 97, 117, 116, 111, 255, 109, 97, 116, 105, 255, 99, 95, 115, 255, 112, 95, 112, 114, 105, 255, 118, 105, 255, 108, 101, 103, 101, 115, 0, 254, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 97, 118, 111, 105, 255, 100, 95, 116, 101, 255, 109, 112, 111, 255, 114, 97, 108, 95, 117, 255, 112, 103, 255, 114, 97, 100, 101, 0, 0, 253, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 17, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 106, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 107, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 212, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1151, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1151] [region_id=105]
[2019/05/01 12:37:38.261 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 105, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 97, 117, 116, 111, 255, 109, 97, 116, 105, 255, 99, 95, 115, 255, 112, 95, 112, 114, 105, 255, 118, 105, 255, 108, 101, 103, 101, 115, 0, 254, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 97, 118, 111, 105, 255, 100, 95, 116, 101, 255, 109, 112, 111, 255, 114, 97, 108, 95, 117, 255, 112, 103, 255, 114, 97, 100, 101, 0, 0, 253, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 17, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 106, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 107, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 212, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1151, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1151] [region_id=105]
[2019/05/01 12:37:38.261 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 105] 1151"]
[2019/05/01 12:37:38.261 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=105]
[2019/05/01 12:37:38.306 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=45.140753ms] [region_id=105]
[2019/05/01 12:37:38.816 -07:00] [INFO] [peer_storage.rs:759] ["requesting snapshot"] [peer_id=1054] [region_id=1031]
[2019/05/01 12:37:38.816 -07:00] [INFO] [snap.rs:757] ["scan snapshot of one cf"] [size=0] [key_count=0] [cf=default] [snapshot=/opt/tidb/data/kv/snap/gen_1031_7_11_(default|lock|write).sst] [region_id=1031]
[2019/05/01 12:37:38.816 -07:00] [INFO] [snap.rs:757] ["scan snapshot of one cf"] [size=0] [key_count=0] [cf=lock] [snapshot=/opt/tidb/data/kv/snap/gen_1031_7_11_(default|lock|write).sst] [region_id=1031]
[2019/05/01 12:37:38.816 -07:00] [INFO] [snap.rs:757] ["scan snapshot of one cf"] [size=192] [key_count=2] [cf=write] [snapshot=/opt/tidb/data/kv/snap/gen_1031_7_11_(default|lock|write).sst] [region_id=1031]
[2019/05/01 12:37:38.839 -07:00] [INFO] [snap.rs:875] ["scan snapshot"] [takes=22.88456ms] [size=1487] [key_count=2] [snapshot=/opt/tidb/data/kv/snap/gen_1031_7_11_(default|lock|write).sst] [region_id=1031]
[2019/05/01 12:37:38.853 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_425_7_11_(default|lock|write).sst] [snap_key=425_7_11]
[2019/05/01 12:37:38.858 -07:00] [INFO] [unknown:1792] ["[region 425] 1152 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 11, term: 7]"]
[2019/05/01 12:37:38.858 -07:00] [INFO] [unknown:1816] ["[region 425] 1152 restored progress of 427 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:37:38.858 -07:00] [INFO] [unknown:1816] ["[region 425] 1152 restored progress of 428 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:37:38.858 -07:00] [INFO] [unknown:1816] ["[region 425] 1152 restored progress of 662 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:37:38.858 -07:00] [INFO] [unknown:1816] ["[region 425] 1152 restored progress of 1152 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:37:38.858 -07:00] [INFO] [unknown:474] ["[region 425] 1152 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 11, term: 7]"]
[2019/05/01 12:37:38.858 -07:00] [INFO] [unknown:1736] ["[region 425] 1152 [commit: 11] restored snapshot [index: 11, term: 7]"]
[2019/05/01 12:37:38.858 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=1152] [region_id=425]
[2019/05/01 12:37:38.858 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 11, truncated_state: Some(RaftTruncatedState { index: 11, term: 7, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 425, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 99, 111, 109, 112, 255, 108, 101, 116, 105, 255, 111, 110, 95, 255, 116, 121, 112, 101, 0, 254, 0, 0, 253], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 99, 111, 110, 99, 255, 117, 114, 114, 101, 255, 110, 116, 95, 255, 105, 110, 115, 101, 114, 255, 116, 0, 255, 0, 0, 0, 0, 0, 0, 248, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 47, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 427, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 428, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 662, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1152, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1152] [region_id=425]
[2019/05/01 12:37:38.887 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 425] 1152"]
[2019/05/01 12:37:38.887 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 425, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 99, 111, 109, 112, 255, 108, 101, 116, 105, 255, 111, 110, 95, 255, 116, 121, 112, 101, 0, 254, 0, 0, 253], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 99, 111, 110, 99, 255, 117, 114, 114, 101, 255, 110, 116, 95, 255, 105, 110, 115, 101, 114, 255, 116, 0, 255, 0, 0, 0, 0, 0, 0, 248, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 47, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 427, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 428, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 662, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1152, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1152] [region_id=425]
[2019/05/01 12:37:38.887 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=425]
[2019/05/01 12:37:38.932 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=44.751907ms] [region_id=425]
[2019/05/01 12:37:39.036 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 1150, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=8] [term=6] [peer_id=1150] [region_id=1121]
[2019/05/01 12:37:39.036 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 6, version: 137, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=1150] [region_id=1121]
[2019/05/01 12:37:39.036 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 1121, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 100, 255, 111, 117, 98, 255, 108, 101, 119, 114, 105, 255, 116, 101, 255, 0, 0, 0, 0, 0, 0, 249, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 102, 255, 97, 115, 116, 255, 95, 115, 104, 117, 116, 255, 100, 111, 255, 119, 110, 0, 0, 0, 0, 251, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 137, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1122, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1123, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1124, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1150, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1150, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1150] [region_id=1121]
[2019/05/01 12:37:39.112 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 1122, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=9] [term=6] [peer_id=1150] [region_id=1121]
[2019/05/01 12:37:39.112 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 7, version: 137, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=1150] [region_id=1121]
[2019/05/01 12:37:39.112 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 1121, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 100, 255, 111, 117, 98, 255, 108, 101, 119, 114, 105, 255, 116, 101, 255, 0, 0, 0, 0, 0, 0, 249, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 102, 255, 97, 115, 116, 255, 95, 115, 104, 117, 116, 255, 100, 111, 255, 119, 110, 0, 0, 0, 0, 251, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 7, version: 137, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1122, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1123, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1124, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1150, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1122, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1150] [region_id=1121]
[2019/05/01 12:37:39.159 -07:00] [INFO] [pd.rs:558] ["try to change peer"] [peer="Peer { id: 1194, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [change_type=AddLearnerNode] [region_id=249]
[2019/05/01 12:37:39.159 -07:00] [INFO] [peer.rs:1953] ["propose conf change peer"] [change_peer=1194] [change_type=AddLearnerNode] [peer_id=487] [region_id=249]
[2019/05/01 12:37:39.210 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddLearnerNode, peer: Some(Peer { id: 1194, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=12] [term=8] [peer_id=487] [region_id=249]
[2019/05/01 12:37:39.210 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 8, version: 27, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddLearner] [peer_id=487] [region_id=249]
[2019/05/01 12:37:39.210 -07:00] [INFO] [apply.rs:1476] ["add learner successfully"] [region="Region { id: 249, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 95, 111, 255, 114, 100, 101, 255, 114, 95, 99, 111, 109, 255, 109, 105, 255, 116, 115, 0, 0, 0, 0, 251, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 95, 114, 255, 111, 119, 95, 255, 105, 109, 97, 103, 101, 255, 0, 0, 255, 0, 0, 0, 0, 0, 0, 247, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 8, version: 27, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 251, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 252, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 487, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1194, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=487] [region_id=249]
[2019/05/01 12:37:39.238 -07:00] [INFO] [peer.rs:1318] ["notify pd with change peer region"] [region="Region { id: 249, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 95, 111, 255, 114, 100, 101, 255, 114, 95, 99, 111, 109, 255, 109, 105, 255, 116, 115, 0, 0, 0, 0, 251, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 95, 114, 255, 111, 119, 95, 255, 105, 109, 97, 103, 101, 255, 0, 0, 255, 0, 0, 0, 0, 0, 0, 247, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 27, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 251, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 252, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 487, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1194, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=487] [region_id=249]
[2019/05/01 12:37:39.320 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 1151, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=13] [term=8] [peer_id=1151] [region_id=105]
[2019/05/01 12:37:39.320 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 6, version: 17, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=1151] [region_id=105]
[2019/05/01 12:37:39.320 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 105, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 97, 117, 116, 111, 255, 109, 97, 116, 105, 255, 99, 95, 115, 255, 112, 95, 112, 114, 105, 255, 118, 105, 255, 108, 101, 103, 101, 115, 0, 254, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 97, 118, 111, 105, 255, 100, 95, 116, 101, 255, 109, 112, 111, 255, 114, 97, 108, 95, 117, 255, 112, 103, 255, 114, 97, 100, 101, 0, 0, 253, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 17, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 106, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 107, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 212, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1151, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1151, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1151] [region_id=105]
[2019/05/01 12:37:39.435 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 212, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=14] [term=8] [peer_id=1151] [region_id=105]
[2019/05/01 12:37:39.435 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 7, version: 17, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=1151] [region_id=105]
[2019/05/01 12:37:39.435 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 105, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 97, 117, 116, 111, 255, 109, 97, 116, 105, 255, 99, 95, 115, 255, 112, 95, 112, 114, 105, 255, 118, 105, 255, 108, 101, 103, 101, 115, 0, 254, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 97, 118, 111, 105, 255, 100, 95, 116, 101, 255, 109, 112, 111, 255, 114, 97, 108, 95, 117, 255, 112, 103, 255, 114, 97, 100, 101, 0, 0, 253, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 7, version: 17, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 106, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 107, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 212, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1151, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 212, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1151] [region_id=105]
[2019/05/01 12:37:39.890 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 1152, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=12] [term=7] [peer_id=1152] [region_id=425]
[2019/05/01 12:37:39.899 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 9, version: 47, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=1152] [region_id=425]
[2019/05/01 12:37:39.899 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 425, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 99, 111, 109, 112, 255, 108, 101, 116, 105, 255, 111, 110, 95, 255, 116, 121, 112, 101, 0, 254, 0, 0, 253], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 99, 111, 110, 99, 255, 117, 114, 114, 101, 255, 110, 116, 95, 255, 105, 110, 115, 101, 114, 255, 116, 0, 255, 0, 0, 0, 0, 0, 0, 248, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 47, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 427, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 428, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 662, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1152, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1152, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1152] [region_id=425]
[2019/05/01 12:37:39.931 -07:00] [INFO] [peer_storage.rs:759] ["requesting snapshot"] [peer_id=487] [region_id=249]
[2019/05/01 12:37:39.931 -07:00] [INFO] [snap.rs:757] ["scan snapshot of one cf"] [size=0] [key_count=0] [cf=default] [snapshot=/opt/tidb/data/kv/snap/gen_249_8_12_(default|lock|write).sst] [region_id=249]
[2019/05/01 12:37:39.931 -07:00] [INFO] [snap.rs:757] ["scan snapshot of one cf"] [size=0] [key_count=0] [cf=lock] [snapshot=/opt/tidb/data/kv/snap/gen_249_8_12_(default|lock|write).sst] [region_id=249]
[2019/05/01 12:37:39.931 -07:00] [INFO] [snap.rs:757] ["scan snapshot of one cf"] [size=156] [key_count=2] [cf=write] [snapshot=/opt/tidb/data/kv/snap/gen_249_8_12_(default|lock|write).sst] [region_id=249]
[2019/05/01 12:37:39.945 -07:00] [INFO] [snap.rs:875] ["scan snapshot"] [takes=14.204628ms] [size=1414] [key_count=2] [snapshot=/opt/tidb/data/kv/snap/gen_249_8_12_(default|lock|write).sst] [region_id=249]
[2019/05/01 12:37:40.009 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 428, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=13] [term=7] [peer_id=1152] [region_id=425]
[2019/05/01 12:37:40.014 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 10, version: 47, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=1152] [region_id=425]
[2019/05/01 12:37:40.014 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 425, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 99, 111, 109, 112, 255, 108, 101, 116, 105, 255, 111, 110, 95, 255, 116, 121, 112, 101, 0, 254, 0, 0, 253], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 99, 111, 110, 99, 255, 117, 114, 114, 101, 255, 110, 116, 95, 255, 105, 110, 115, 101, 114, 255, 116, 0, 255, 0, 0, 0, 0, 0, 0, 248, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 10, version: 47, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 427, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 428, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 662, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1152, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 428, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1152] [region_id=425]
[2019/05/01 12:37:40.818 -07:00] [INFO] [unknown:841] ["New connected subchannel at 0x7f041c42bd20 for subchannel 0x7f04cf87cc00"]
[2019/05/01 12:37:40.834 -07:00] [INFO] [snap.rs:389] ["sent snapshot"] [duration=16.132748ms] [size=1487] [snap_key=1031_7_11] [region_id=1031]
[2019/05/01 12:37:40.834 -07:00] [INFO] [peer.rs:538] ["report snapshot status"] [status=Finish] [to="Peer { id: 1153, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1054] [region_id=1031]
[2019/05/01 12:37:40.912 -07:00] [INFO] [unknown:1625] ["[region 929] 1149 [term 7] received MsgTimeoutNow from 932 and starts an election to get leadership."]
[2019/05/01 12:37:40.912 -07:00] [INFO] [unknown:739] ["[region 929] 1149 became candidate at term 8"]
[2019/05/01 12:37:40.912 -07:00] [INFO] [unknown:854] ["[region 929] 1149 received MsgRequestVoteResponse from 1149 at term 8"]
[2019/05/01 12:37:40.912 -07:00] [INFO] [unknown:828] ["[region 929] 1149 [logterm: 7, index: 10] sent MsgRequestVote request to 930 at term 8"]
[2019/05/01 12:37:40.912 -07:00] [INFO] [unknown:828] ["[region 929] 1149 [logterm: 7, index: 10] sent MsgRequestVote request to 932 at term 8"]
[2019/05/01 12:37:40.922 -07:00] [INFO] [unknown:1625] ["[region 820] 1009 [term 7] received MsgTimeoutNow from 823 and starts an election to get leadership."]
[2019/05/01 12:37:40.922 -07:00] [INFO] [unknown:739] ["[region 820] 1009 became candidate at term 8"]
[2019/05/01 12:37:40.922 -07:00] [INFO] [unknown:854] ["[region 820] 1009 received MsgRequestVoteResponse from 1009 at term 8"]
[2019/05/01 12:37:40.922 -07:00] [INFO] [unknown:828] ["[region 820] 1009 [logterm: 7, index: 10] sent MsgRequestVote request to 823 at term 8"]
[2019/05/01 12:37:40.922 -07:00] [INFO] [unknown:828] ["[region 820] 1009 [logterm: 7, index: 10] sent MsgRequestVote request to 822 at term 8"]
[2019/05/01 12:37:40.987 -07:00] [INFO] [unknown:854] ["[region 929] 1149 received MsgRequestVoteResponse from 930 at term 8"]
[2019/05/01 12:37:40.987 -07:00] [INFO] [unknown:1550] ["[region 929] 1149 [quorum:2] has received 2 MsgRequestVoteResponse votes and 0 vote rejections"]
[2019/05/01 12:37:40.987 -07:00] [INFO] [unknown:789] ["[region 929] 1149 became leader at term 8"]
[2019/05/01 12:37:41.008 -07:00] [INFO] [unknown:1625] ["[region 353] 1146 [term 7] received MsgTimeoutNow from 356 and starts an election to get leadership."]
[2019/05/01 12:37:41.008 -07:00] [INFO] [unknown:739] ["[region 353] 1146 became candidate at term 8"]
[2019/05/01 12:37:41.008 -07:00] [INFO] [unknown:854] ["[region 353] 1146 received MsgRequestVoteResponse from 1146 at term 8"]
[2019/05/01 12:37:41.008 -07:00] [INFO] [unknown:828] ["[region 353] 1146 [logterm: 7, index: 10] sent MsgRequestVote request to 354 at term 8"]
[2019/05/01 12:37:41.008 -07:00] [INFO] [unknown:828] ["[region 353] 1146 [logterm: 7, index: 10] sent MsgRequestVote request to 356 at term 8"]
[2019/05/01 12:37:41.026 -07:00] [INFO] [unknown:854] ["[region 820] 1009 received MsgRequestVoteResponse from 822 at term 8"]
[2019/05/01 12:37:41.026 -07:00] [INFO] [unknown:1550] ["[region 820] 1009 [quorum:2] has received 2 MsgRequestVoteResponse votes and 0 vote rejections"]
[2019/05/01 12:37:41.026 -07:00] [INFO] [unknown:789] ["[region 820] 1009 became leader at term 8"]
[2019/05/01 12:37:41.101 -07:00] [INFO] [unknown:854] ["[region 353] 1146 received MsgRequestVoteResponse from 356 at term 8"]
[2019/05/01 12:37:41.102 -07:00] [INFO] [unknown:1550] ["[region 353] 1146 [quorum:2] has received 2 MsgRequestVoteResponse votes and 0 vote rejections"]
[2019/05/01 12:37:41.102 -07:00] [INFO] [unknown:789] ["[region 353] 1146 became leader at term 8"]
[2019/05/01 12:37:41.819 -07:00] [INFO] [pd.rs:558] ["try to change peer"] [peer="Peer { id: 1153, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [change_type=AddNode] [region_id=1031]
[2019/05/01 12:37:41.819 -07:00] [INFO] [peer.rs:1953] ["propose conf change peer"] [change_peer=1153] [change_type=AddNode] [peer_id=1054] [region_id=1031]
[2019/05/01 12:37:41.853 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 1153, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=12] [term=7] [peer_id=1054] [region_id=1031]
[2019/05/01 12:37:41.853 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 9, version: 117, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=1054] [region_id=1031]
[2019/05/01 12:37:41.853 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 1031, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 98, 255, 117, 102, 102, 255, 101, 114, 95, 112, 111, 255, 111, 108, 255, 95, 100, 117, 109, 112, 95, 255, 112, 255, 99, 116, 0, 0, 0, 0, 0, 250, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 98, 255, 117, 102, 102, 255, 101, 114, 95, 112, 111, 255, 111, 108, 255, 95, 102, 105, 108, 101, 110, 255, 97, 255, 109, 101, 0, 0, 0, 0, 0, 250, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 117, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1032, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1034, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1054, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1153, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1153, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1054] [region_id=1031]
[2019/05/01 12:37:41.876 -07:00] [INFO] [peer.rs:1318] ["notify pd with change peer region"] [region="Region { id: 1031, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 98, 255, 117, 102, 102, 255, 101, 114, 95, 112, 111, 255, 111, 108, 255, 95, 100, 117, 109, 112, 95, 255, 112, 255, 99, 116, 0, 0, 0, 0, 0, 250, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 98, 255, 117, 102, 102, 255, 101, 114, 95, 112, 111, 255, 111, 108, 255, 95, 102, 105, 108, 101, 110, 255, 97, 255, 109, 101, 0, 0, 0, 0, 0, 250, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 10, version: 117, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1032, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1034, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1054, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1153, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1054] [region_id=1031]
[2019/05/01 12:37:41.904 -07:00] [INFO] [pd.rs:558] ["try to change peer"] [peer="Peer { id: 1034, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [change_type=RemoveNode] [region_id=1031]
[2019/05/01 12:37:41.904 -07:00] [INFO] [pd.rs:558] ["try to change peer"] [peer="Peer { id: 1034, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [change_type=RemoveNode] [region_id=1031]
[2019/05/01 12:37:41.904 -07:00] [INFO] [peer.rs:1953] ["propose conf change peer"] [change_peer=1034] [change_type=RemoveNode] [peer_id=1054] [region_id=1031]
[2019/05/01 12:37:41.933 -07:00] [INFO] [peer.rs:1927] ["there is a pending conf change, try later"] [peer_id=1054] [region_id=1031]
[2019/05/01 12:37:41.943 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=1196] [region_id=1154]
[2019/05/01 12:37:41.943 -07:00] [INFO] [unknown:719] ["[region 1154] 1196 became follower at term 0"]
[2019/05/01 12:37:41.943 -07:00] [INFO] [unknown:295] ["[region 1154] 1196 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:37:41.943 -07:00] [INFO] [unknown:719] ["[region 1154] 1196 became follower at term 1"]
[2019/05/01 12:37:41.943 -07:00] [INFO] [unknown:920] ["[region 1154] 1196 [term: 1] received a MsgHeartbeat message with higher term from 1156 [term: 7]"]
[2019/05/01 12:37:41.943 -07:00] [INFO] [unknown:719] ["[region 1154] 1196 became follower at term 7"]
[2019/05/01 12:37:41.949 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 1034, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=13] [term=7] [peer_id=1054] [region_id=1031]
[2019/05/01 12:37:41.949 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 10, version: 117, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=1054] [region_id=1031]
[2019/05/01 12:37:41.949 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 1031, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 98, 255, 117, 102, 102, 255, 101, 114, 95, 112, 111, 255, 111, 108, 255, 95, 100, 117, 109, 112, 95, 255, 112, 255, 99, 116, 0, 0, 0, 0, 0, 250, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 98, 255, 117, 102, 102, 255, 101, 114, 95, 112, 111, 255, 111, 108, 255, 95, 102, 105, 108, 101, 110, 255, 97, 255, 109, 101, 0, 0, 0, 0, 0, 250, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 10, version: 117, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1032, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1034, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1054, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1153, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1034, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1054] [region_id=1031]
[2019/05/01 12:37:41.965 -07:00] [INFO] [peer.rs:1318] ["notify pd with change peer region"] [region="Region { id: 1031, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 98, 255, 117, 102, 102, 255, 101, 114, 95, 112, 111, 255, 111, 108, 255, 95, 100, 117, 109, 112, 95, 255, 112, 255, 99, 116, 0, 0, 0, 0, 0, 250, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 98, 255, 117, 102, 102, 255, 101, 114, 95, 112, 111, 255, 111, 108, 255, 95, 102, 105, 108, 101, 110, 255, 97, 255, 109, 101, 0, 0, 0, 0, 0, 250, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 11, version: 117, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1032, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1054, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1153, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1054] [region_id=1031]
[2019/05/01 12:37:41.995 -07:00] [INFO] [unknown:841] ["New connected subchannel at 0x7f041e601570 for subchannel 0x7f04cf87ce00"]
[2019/05/01 12:37:42.007 -07:00] [INFO] [pd.rs:558] ["try to change peer"] [peer="Peer { id: 1197, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [change_type=AddLearnerNode] [region_id=409]
[2019/05/01 12:37:42.007 -07:00] [INFO] [peer.rs:1953] ["propose conf change peer"] [change_peer=1197] [change_type=AddLearnerNode] [peer_id=900] [region_id=409]
[2019/05/01 12:37:42.030 -07:00] [INFO] [snap.rs:389] ["sent snapshot"] [duration=36.493028ms] [size=1414] [snap_key=249_8_12] [region_id=249]
[2019/05/01 12:37:42.030 -07:00] [INFO] [peer.rs:538] ["report snapshot status"] [status=Finish] [to="Peer { id: 1194, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=487] [region_id=249]
[2019/05/01 12:37:42.055 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddLearnerNode, peer: Some(Peer { id: 1197, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=11] [term=7] [peer_id=900] [region_id=409]
[2019/05/01 12:37:42.055 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 8, version: 47, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddLearner] [peer_id=900] [region_id=409]
[2019/05/01 12:37:42.055 -07:00] [INFO] [apply.rs:1476] ["add learner successfully"] [region="Region { id: 409, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 99, 104, 101, 99, 255, 107, 95, 112, 114, 255, 111, 120, 121, 255, 95, 117, 115, 101, 114, 255, 115, 0, 255, 0, 0, 0, 0, 0, 0, 248, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 99, 111, 108, 108, 255, 97, 116, 105, 111, 255, 110, 95, 99, 255, 111, 110, 110, 101, 99, 255, 116, 105, 255, 111, 110, 0, 0, 0, 0, 251, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 8, version: 47, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 410, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 411, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 900, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1197, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=900] [region_id=409]
[2019/05/01 12:37:42.071 -07:00] [INFO] [peer.rs:1318] ["notify pd with change peer region"] [region="Region { id: 409, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 99, 104, 101, 99, 255, 107, 95, 112, 114, 255, 111, 120, 121, 255, 95, 117, 115, 101, 114, 255, 115, 0, 255, 0, 0, 0, 0, 0, 0, 248, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 99, 111, 108, 108, 255, 97, 116, 105, 111, 255, 110, 95, 99, 255, 111, 110, 110, 101, 99, 255, 116, 105, 255, 111, 110, 0, 0, 0, 0, 251, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 47, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 410, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 411, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 900, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1197, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=900] [region_id=409]
[2019/05/01 12:37:42.149 -07:00] [INFO] [peer_storage.rs:759] ["requesting snapshot"] [peer_id=900] [region_id=409]
[2019/05/01 12:37:42.149 -07:00] [INFO] [snap.rs:757] ["scan snapshot of one cf"] [size=0] [key_count=0] [cf=default] [snapshot=/opt/tidb/data/kv/snap/gen_409_7_11_(default|lock|write).sst] [region_id=409]
[2019/05/01 12:37:42.149 -07:00] [INFO] [snap.rs:757] ["scan snapshot of one cf"] [size=0] [key_count=0] [cf=lock] [snapshot=/opt/tidb/data/kv/snap/gen_409_7_11_(default|lock|write).sst] [region_id=409]
[2019/05/01 12:37:42.149 -07:00] [INFO] [snap.rs:757] ["scan snapshot of one cf"] [size=156] [key_count=2] [cf=write] [snapshot=/opt/tidb/data/kv/snap/gen_409_7_11_(default|lock|write).sst] [region_id=409]
[2019/05/01 12:37:42.171 -07:00] [INFO] [snap.rs:875] ["scan snapshot"] [takes=21.82785ms] [size=1414] [key_count=2] [snapshot=/opt/tidb/data/kv/snap/gen_409_7_11_(default|lock|write).sst] [region_id=409]
[2019/05/01 12:37:42.935 -07:00] [INFO] [pd.rs:558] ["try to change peer"] [peer="Peer { id: 1194, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [change_type=AddNode] [region_id=249]
[2019/05/01 12:37:42.935 -07:00] [INFO] [peer.rs:1953] ["propose conf change peer"] [change_peer=1194] [change_type=AddNode] [peer_id=487] [region_id=249]
[2019/05/01 12:37:42.969 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 1194, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=13] [term=8] [peer_id=487] [region_id=249]
[2019/05/01 12:37:42.969 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 9, version: 27, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=487] [region_id=249]
[2019/05/01 12:37:42.969 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 249, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 95, 111, 255, 114, 100, 101, 255, 114, 95, 99, 111, 109, 255, 109, 105, 255, 116, 115, 0, 0, 0, 0, 251, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 95, 114, 255, 111, 119, 95, 255, 105, 109, 97, 103, 101, 255, 0, 0, 255, 0, 0, 0, 0, 0, 0, 247, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 27, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 251, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 252, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 487, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1194, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1194, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=487] [region_id=249]
[2019/05/01 12:37:42.977 -07:00] [INFO] [peer.rs:1318] ["notify pd with change peer region"] [region="Region { id: 249, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 95, 111, 255, 114, 100, 101, 255, 114, 95, 99, 111, 109, 255, 109, 105, 255, 116, 115, 0, 0, 0, 0, 251, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 95, 114, 255, 111, 119, 95, 255, 105, 109, 97, 103, 101, 255, 0, 0, 255, 0, 0, 0, 0, 0, 0, 247, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 10, version: 27, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 251, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 252, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 487, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1194, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=487] [region_id=249]
[2019/05/01 12:37:42.991 -07:00] [INFO] [pd.rs:558] ["try to change peer"] [peer="Peer { id: 252, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [change_type=RemoveNode] [region_id=249]
[2019/05/01 12:37:42.991 -07:00] [INFO] [pd.rs:558] ["try to change peer"] [peer="Peer { id: 252, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [change_type=RemoveNode] [region_id=249]
[2019/05/01 12:37:42.991 -07:00] [INFO] [peer.rs:1953] ["propose conf change peer"] [change_peer=252] [change_type=RemoveNode] [peer_id=487] [region_id=249]
[2019/05/01 12:37:43.023 -07:00] [INFO] [peer.rs:1927] ["there is a pending conf change, try later"] [peer_id=487] [region_id=249]
[2019/05/01 12:37:43.039 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 252, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=14] [term=8] [peer_id=487] [region_id=249]
[2019/05/01 12:37:43.039 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 10, version: 27, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=487] [region_id=249]
[2019/05/01 12:37:43.039 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 249, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 95, 111, 255, 114, 100, 101, 255, 114, 95, 99, 111, 109, 255, 109, 105, 255, 116, 115, 0, 0, 0, 0, 251, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 95, 114, 255, 111, 119, 95, 255, 105, 109, 97, 103, 101, 255, 0, 0, 255, 0, 0, 0, 0, 0, 0, 247, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 10, version: 27, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 251, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 252, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 487, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1194, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 252, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=487] [region_id=249]
[2019/05/01 12:37:43.043 -07:00] [INFO] [peer.rs:1318] ["notify pd with change peer region"] [region="Region { id: 249, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 95, 111, 255, 114, 100, 101, 255, 114, 95, 99, 111, 109, 255, 109, 105, 255, 116, 115, 0, 0, 0, 0, 251, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 95, 114, 255, 111, 119, 95, 255, 105, 109, 97, 103, 101, 255, 0, 0, 255, 0, 0, 0, 0, 0, 0, 247, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 11, version: 27, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 251, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 487, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1194, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=487] [region_id=249]
[2019/05/01 12:37:43.355 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddLearnerNode, peer: Some(Peer { id: 1199, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=15] [term=8] [peer_id=1151] [region_id=105]
[2019/05/01 12:37:43.355 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 8, version: 17, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddLearner] [peer_id=1151] [region_id=105]
[2019/05/01 12:37:43.355 -07:00] [INFO] [apply.rs:1476] ["add learner successfully"] [region="Region { id: 105, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 97, 117, 116, 111, 255, 109, 97, 116, 105, 255, 99, 95, 115, 255, 112, 95, 112, 114, 105, 255, 118, 105, 255, 108, 101, 103, 101, 115, 0, 254, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 97, 118, 111, 105, 255, 100, 95, 116, 101, 255, 109, 112, 111, 255, 114, 97, 108, 95, 117, 255, 112, 103, 255, 114, 97, 100, 101, 0, 0, 253, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 8, version: 17, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 106, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 107, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1151, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1199, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1151] [region_id=105]
[2019/05/01 12:37:43.904 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=1198] [region_id=221]
[2019/05/01 12:37:43.904 -07:00] [INFO] [unknown:719] ["[region 221] 1198 became follower at term 0"]
[2019/05/01 12:37:43.904 -07:00] [INFO] [unknown:295] ["[region 221] 1198 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:37:43.904 -07:00] [INFO] [unknown:719] ["[region 221] 1198 became follower at term 1"]
[2019/05/01 12:37:43.904 -07:00] [INFO] [unknown:920] ["[region 221] 1198 [term: 1] received a MsgHeartbeat message with higher term from 224 [term: 7]"]
[2019/05/01 12:37:43.904 -07:00] [INFO] [unknown:719] ["[region 221] 1198 became follower at term 7"]
[2019/05/01 12:37:43.947 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_1154_7_8_(default|lock|write).sst] [snap_key=1154_7_8]
[2019/05/01 12:37:43.968 -07:00] [INFO] [unknown:1792] ["[region 1154] 1196 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 8, term: 7]"]
[2019/05/01 12:37:43.968 -07:00] [INFO] [unknown:1816] ["[region 1154] 1196 restored progress of 1155 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:37:43.968 -07:00] [INFO] [unknown:1816] ["[region 1154] 1196 restored progress of 1156 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:37:43.968 -07:00] [INFO] [unknown:1816] ["[region 1154] 1196 restored progress of 1157 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:37:43.968 -07:00] [INFO] [unknown:1816] ["[region 1154] 1196 restored progress of 1196 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:37:43.968 -07:00] [INFO] [unknown:474] ["[region 1154] 1196 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 8, term: 7]"]
[2019/05/01 12:37:43.968 -07:00] [INFO] [unknown:1736] ["[region 1154] 1196 [commit: 8] restored snapshot [index: 8, term: 7]"]
[2019/05/01 12:37:43.968 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=1196] [region_id=1154]
[2019/05/01 12:37:43.968 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 8, truncated_state: Some(RaftTruncatedState { index: 8, term: 7, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 1154, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 102, 255, 105, 108, 108, 255, 95, 102, 97, 99, 116, 255, 111, 114, 255, 0, 0, 0, 0, 0, 0, 249, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 102, 255, 108, 117, 115, 255, 104, 95, 108, 111, 103, 255, 95, 97, 255, 116, 95, 116, 105, 109, 101, 255, 111, 255, 117, 116, 0, 0, 0, 0, 0, 250, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 147, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1155, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1156, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1157, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1196, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1196] [region_id=1154]
[2019/05/01 12:37:43.989 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 1154, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 102, 255, 105, 108, 108, 255, 95, 102, 97, 99, 116, 255, 111, 114, 255, 0, 0, 0, 0, 0, 0, 249, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 102, 255, 108, 117, 115, 255, 104, 95, 108, 111, 103, 255, 95, 97, 255, 116, 95, 116, 105, 109, 101, 255, 111, 255, 117, 116, 0, 0, 0, 0, 0, 250, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 147, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1155, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1156, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1157, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1196, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1196] [region_id=1154]
[2019/05/01 12:37:43.989 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 1154] 1196"]
[2019/05/01 12:37:43.989 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=1154]
[2019/05/01 12:37:44.018 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=28.562886ms] [region_id=1154]
[2019/05/01 12:37:44.151 -07:00] [INFO] [unknown:841] ["New connected subchannel at 0x7f0411208f70 for subchannel 0x7f04cf8b8000"]
[2019/05/01 12:37:44.159 -07:00] [INFO] [snap.rs:389] ["sent snapshot"] [duration=8.821068ms] [size=1414] [snap_key=409_7_11] [region_id=409]
[2019/05/01 12:37:44.159 -07:00] [INFO] [peer.rs:538] ["report snapshot status"] [status=Finish] [to="Peer { id: 1197, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=900] [region_id=409]
[2019/05/01 12:37:44.985 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 1196, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=9] [term=7] [peer_id=1196] [region_id=1154]
[2019/05/01 12:37:44.985 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 6, version: 147, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=1196] [region_id=1154]
[2019/05/01 12:37:44.985 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 1154, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 102, 255, 105, 108, 108, 255, 95, 102, 97, 99, 116, 255, 111, 114, 255, 0, 0, 0, 0, 0, 0, 249, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 102, 255, 108, 117, 115, 255, 104, 95, 108, 111, 103, 255, 95, 97, 255, 116, 95, 116, 105, 109, 101, 255, 111, 255, 117, 116, 0, 0, 0, 0, 0, 250, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 147, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1155, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1156, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1157, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1196, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1196, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1196] [region_id=1154]
[2019/05/01 12:37:45.040 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 1155, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=10] [term=7] [peer_id=1196] [region_id=1154]
[2019/05/01 12:37:45.040 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 7, version: 147, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=1196] [region_id=1154]
[2019/05/01 12:37:45.040 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 1154, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 102, 255, 105, 108, 108, 255, 95, 102, 97, 99, 116, 255, 111, 114, 255, 0, 0, 0, 0, 0, 0, 249, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 102, 255, 108, 117, 115, 255, 104, 95, 108, 111, 103, 255, 95, 97, 255, 116, 95, 116, 105, 109, 101, 255, 111, 255, 117, 116, 0, 0, 0, 0, 0, 250, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 7, version: 147, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1155, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1156, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1157, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1196, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1155, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1196] [region_id=1154]
[2019/05/01 12:37:45.152 -07:00] [INFO] [pd.rs:558] ["try to change peer"] [peer="Peer { id: 1197, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [change_type=AddNode] [region_id=409]
[2019/05/01 12:37:45.156 -07:00] [INFO] [peer.rs:1953] ["propose conf change peer"] [change_peer=1197] [change_type=AddNode] [peer_id=900] [region_id=409]
[2019/05/01 12:37:45.180 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 1197, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=12] [term=7] [peer_id=900] [region_id=409]
[2019/05/01 12:37:45.180 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 9, version: 47, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=900] [region_id=409]
[2019/05/01 12:37:45.180 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 409, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 99, 104, 101, 99, 255, 107, 95, 112, 114, 255, 111, 120, 121, 255, 95, 117, 115, 101, 114, 255, 115, 0, 255, 0, 0, 0, 0, 0, 0, 248, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 99, 111, 108, 108, 255, 97, 116, 105, 111, 255, 110, 95, 99, 255, 111, 110, 110, 101, 99, 255, 116, 105, 255, 111, 110, 0, 0, 0, 0, 251, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 47, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 410, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 411, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 900, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1197, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1197, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=900] [region_id=409]
[2019/05/01 12:37:45.205 -07:00] [INFO] [peer.rs:1318] ["notify pd with change peer region"] [region="Region { id: 409, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 99, 104, 101, 99, 255, 107, 95, 112, 114, 255, 111, 120, 121, 255, 95, 117, 115, 101, 114, 255, 115, 0, 255, 0, 0, 0, 0, 0, 0, 248, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 99, 111, 108, 108, 255, 97, 116, 105, 111, 255, 110, 95, 99, 255, 111, 110, 110, 101, 99, 255, 116, 105, 255, 111, 110, 0, 0, 0, 0, 251, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 10, version: 47, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 410, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 411, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 900, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1197, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=900] [region_id=409]
[2019/05/01 12:37:45.239 -07:00] [INFO] [pd.rs:558] ["try to change peer"] [peer="Peer { id: 410, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [change_type=RemoveNode] [region_id=409]
[2019/05/01 12:37:45.239 -07:00] [INFO] [pd.rs:558] ["try to change peer"] [peer="Peer { id: 410, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [change_type=RemoveNode] [region_id=409]
[2019/05/01 12:37:45.239 -07:00] [INFO] [peer.rs:1953] ["propose conf change peer"] [change_peer=410] [change_type=RemoveNode] [peer_id=900] [region_id=409]
[2019/05/01 12:37:45.239 -07:00] [INFO] [peer.rs:1927] ["there is a pending conf change, try later"] [peer_id=900] [region_id=409]
[2019/05/01 12:37:45.269 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 410, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=13] [term=7] [peer_id=900] [region_id=409]
[2019/05/01 12:37:45.269 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 10, version: 47, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=900] [region_id=409]
[2019/05/01 12:37:45.269 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 409, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 99, 104, 101, 99, 255, 107, 95, 112, 114, 255, 111, 120, 121, 255, 95, 117, 115, 101, 114, 255, 115, 0, 255, 0, 0, 0, 0, 0, 0, 248, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 99, 111, 108, 108, 255, 97, 116, 105, 111, 255, 110, 95, 99, 255, 111, 110, 110, 101, 99, 255, 116, 105, 255, 111, 110, 0, 0, 0, 0, 251, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 10, version: 47, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 410, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 411, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 900, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1197, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 410, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=900] [region_id=409]
[2019/05/01 12:37:45.273 -07:00] [INFO] [peer.rs:1318] ["notify pd with change peer region"] [region="Region { id: 409, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 99, 104, 101, 99, 255, 107, 95, 112, 114, 255, 111, 120, 121, 255, 95, 117, 115, 101, 114, 255, 115, 0, 255, 0, 0, 0, 0, 0, 0, 248, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 99, 111, 108, 108, 255, 97, 116, 105, 111, 255, 110, 95, 99, 255, 111, 110, 110, 101, 99, 255, 116, 105, 255, 111, 110, 0, 0, 0, 0, 251, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 11, version: 47, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 411, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 900, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1197, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=900] [region_id=409]
[2019/05/01 12:37:45.869 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=1212] [region_id=464]
[2019/05/01 12:37:45.869 -07:00] [INFO] [unknown:719] ["[region 464] 1212 became follower at term 0"]
[2019/05/01 12:37:45.869 -07:00] [INFO] [unknown:295] ["[region 464] 1212 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:37:45.869 -07:00] [INFO] [unknown:719] ["[region 464] 1212 became follower at term 1"]
[2019/05/01 12:37:45.869 -07:00] [INFO] [unknown:920] ["[region 464] 1212 [term: 1] received a MsgHeartbeat message with higher term from 467 [term: 7]"]
[2019/05/01 12:37:45.869 -07:00] [INFO] [unknown:719] ["[region 464] 1212 became follower at term 7"]
[2019/05/01 12:37:45.908 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_221_7_8_(default|lock|write).sst] [snap_key=221_7_8]
[2019/05/01 12:37:45.924 -07:00] [INFO] [unknown:1792] ["[region 221] 1198 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 8, term: 7]"]
[2019/05/01 12:37:45.924 -07:00] [INFO] [unknown:1816] ["[region 221] 1198 restored progress of 222 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:37:45.924 -07:00] [INFO] [unknown:1816] ["[region 221] 1198 restored progress of 223 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:37:45.924 -07:00] [INFO] [unknown:1816] ["[region 221] 1198 restored progress of 224 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:37:45.924 -07:00] [INFO] [unknown:1816] ["[region 221] 1198 restored progress of 1198 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:37:45.924 -07:00] [INFO] [unknown:474] ["[region 221] 1198 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 8, term: 7]"]
[2019/05/01 12:37:45.924 -07:00] [INFO] [unknown:1736] ["[region 221] 1198 [commit: 8] restored snapshot [index: 8, term: 7]"]
[2019/05/01 12:37:45.924 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=1198] [region_id=221]
[2019/05/01 12:37:45.924 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 8, truncated_state: Some(RaftTruncatedState { index: 8, term: 7, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 221, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 95, 100, 255, 105, 114, 101, 255, 99, 116, 95, 110, 111, 255, 110, 95, 255, 116, 114, 97, 110, 115, 97, 255, 99, 255, 116, 105, 111, 110, 97, 108, 95, 255, 255, 117, 112, 100, 97, 116, 101, 115, 0, 255, 254, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 95, 101, 255, 114, 114, 111, 255, 114, 95, 97, 99, 116, 255, 105, 111, 255, 110, 0, 0, 0, 0, 0, 250, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 27, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 222, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 223, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 224, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1198, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1198] [region_id=221]
[2019/05/01 12:37:45.982 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 221, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 95, 100, 255, 105, 114, 101, 255, 99, 116, 95, 110, 111, 255, 110, 95, 255, 116, 114, 97, 110, 115, 97, 255, 99, 255, 116, 105, 111, 110, 97, 108, 95, 255, 255, 117, 112, 100, 97, 116, 101, 115, 0, 255, 254, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 95, 101, 255, 114, 114, 111, 255, 114, 95, 97, 99, 116, 255, 105, 111, 255, 110, 0, 0, 0, 0, 0, 250, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 27, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 222, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 223, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 224, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1198, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1198] [region_id=221]
[2019/05/01 12:37:45.982 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 221] 1198"]
[2019/05/01 12:37:45.982 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=221]
[2019/05/01 12:37:46.049 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=67.119632ms] [region_id=221]
[2019/05/01 12:37:46.999 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 1198, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=9] [term=7] [peer_id=1198] [region_id=221]
[2019/05/01 12:37:47.000 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 6, version: 27, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=1198] [region_id=221]
[2019/05/01 12:37:47.000 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 221, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 95, 100, 255, 105, 114, 101, 255, 99, 116, 95, 110, 111, 255, 110, 95, 255, 116, 114, 97, 110, 115, 97, 255, 99, 255, 116, 105, 111, 110, 97, 108, 95, 255, 255, 117, 112, 100, 97, 116, 101, 115, 0, 255, 254, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 95, 101, 255, 114, 114, 111, 255, 114, 95, 97, 99, 116, 255, 105, 111, 255, 110, 0, 0, 0, 0, 0, 250, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 27, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 222, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 223, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 224, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1198, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1198, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1198] [region_id=221]
[2019/05/01 12:37:47.066 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 222, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=10] [term=7] [peer_id=1198] [region_id=221]
[2019/05/01 12:37:47.066 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 7, version: 27, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=1198] [region_id=221]
[2019/05/01 12:37:47.066 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 221, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 95, 100, 255, 105, 114, 101, 255, 99, 116, 95, 110, 111, 255, 110, 95, 255, 116, 114, 97, 110, 115, 97, 255, 99, 255, 116, 105, 111, 110, 97, 108, 95, 255, 255, 117, 112, 100, 97, 116, 101, 115, 0, 255, 254, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 95, 101, 255, 114, 114, 111, 255, 114, 95, 97, 99, 116, 255, 105, 111, 255, 110, 0, 0, 0, 0, 0, 250, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 7, version: 27, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 222, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 223, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 224, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1198, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 222, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1198] [region_id=221]
[2019/05/01 12:37:47.305 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 1199, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=16] [term=8] [peer_id=1151] [region_id=105]
[2019/05/01 12:37:47.305 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 9, version: 17, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=1151] [region_id=105]
[2019/05/01 12:37:47.305 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 105, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 97, 117, 116, 111, 255, 109, 97, 116, 105, 255, 99, 95, 115, 255, 112, 95, 112, 114, 105, 255, 118, 105, 255, 108, 101, 103, 101, 115, 0, 254, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 97, 118, 111, 105, 255, 100, 95, 116, 101, 255, 109, 112, 111, 255, 114, 97, 108, 95, 117, 255, 112, 103, 255, 114, 97, 100, 101, 0, 0, 253, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 17, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 106, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 107, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1151, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1199, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1199, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1151] [region_id=105]
[2019/05/01 12:37:47.393 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 106, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=17] [term=8] [peer_id=1151] [region_id=105]
[2019/05/01 12:37:47.393 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 10, version: 17, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=1151] [region_id=105]
[2019/05/01 12:37:47.393 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 105, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 97, 117, 116, 111, 255, 109, 97, 116, 105, 255, 99, 95, 115, 255, 112, 95, 112, 114, 105, 255, 118, 105, 255, 108, 101, 103, 101, 115, 0, 254, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 97, 118, 111, 105, 255, 100, 95, 116, 101, 255, 109, 112, 111, 255, 114, 97, 108, 95, 117, 255, 112, 103, 255, 114, 97, 100, 101, 0, 0, 253, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 10, version: 17, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 106, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 107, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1151, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1199, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 106, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1151] [region_id=105]
[2019/05/01 12:37:47.873 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_464_7_8_(default|lock|write).sst] [snap_key=464_7_8]
[2019/05/01 12:37:47.884 -07:00] [INFO] [unknown:1792] ["[region 464] 1212 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 8, term: 7]"]
[2019/05/01 12:37:47.884 -07:00] [INFO] [unknown:1816] ["[region 464] 1212 restored progress of 465 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:37:47.884 -07:00] [INFO] [unknown:1816] ["[region 464] 1212 restored progress of 466 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:37:47.884 -07:00] [INFO] [unknown:1816] ["[region 464] 1212 restored progress of 467 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:37:47.884 -07:00] [INFO] [unknown:1816] ["[region 464] 1212 restored progress of 1212 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:37:47.884 -07:00] [INFO] [unknown:474] ["[region 464] 1212 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 8, term: 7]"]
[2019/05/01 12:37:47.884 -07:00] [INFO] [unknown:1736] ["[region 464] 1212 [commit: 8] restored snapshot [index: 8, term: 7]"]
[2019/05/01 12:37:47.884 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=1212] [region_id=464]
[2019/05/01 12:37:47.884 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 8, truncated_state: Some(RaftTruncatedState { index: 8, term: 7, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 464, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 100, 101, 102, 97, 255, 117, 108, 116, 95, 255, 112, 97, 115, 255, 115, 119, 111, 114, 100, 255, 95, 108, 255, 105, 102, 101, 116, 105, 109, 255, 101, 255, 0, 0, 0, 0, 0, 0, 0, 248, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 100, 101, 102, 97, 255, 117, 108, 116, 95, 255, 115, 116, 111, 255, 114, 97, 103, 101, 95, 255, 101, 110, 255, 103, 105, 110, 101, 0, 0, 253, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 57, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 465, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 466, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 467, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1212, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1212] [region_id=464]
[2019/05/01 12:37:47.930 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 464] 1212"]
[2019/05/01 12:37:47.930 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=464]
[2019/05/01 12:37:47.930 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 464, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 100, 101, 102, 97, 255, 117, 108, 116, 95, 255, 112, 97, 115, 255, 115, 119, 111, 114, 100, 255, 95, 108, 255, 105, 102, 101, 116, 105, 109, 255, 101, 255, 0, 0, 0, 0, 0, 0, 0, 248, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 100, 101, 102, 97, 255, 117, 108, 116, 95, 255, 115, 116, 111, 255, 114, 97, 103, 101, 95, 255, 101, 110, 255, 103, 105, 110, 101, 0, 0, 253, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 57, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 465, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 466, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 467, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1212, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1212] [region_id=464]
[2019/05/01 12:37:47.968 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=1214] [region_id=1162]
[2019/05/01 12:37:47.968 -07:00] [INFO] [unknown:719] ["[region 1162] 1214 became follower at term 0"]
[2019/05/01 12:37:47.968 -07:00] [INFO] [unknown:295] ["[region 1162] 1214 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:37:47.968 -07:00] [INFO] [unknown:719] ["[region 1162] 1214 became follower at term 1"]
[2019/05/01 12:37:47.968 -07:00] [INFO] [unknown:920] ["[region 1162] 1214 [term: 1] received a MsgHeartbeat message with higher term from 1165 [term: 6]"]
[2019/05/01 12:37:47.969 -07:00] [INFO] [unknown:719] ["[region 1162] 1214 became follower at term 6"]
[2019/05/01 12:37:47.979 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=47.823672ms] [region_id=464]
[2019/05/01 12:37:48.915 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 1212, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=9] [term=7] [peer_id=1212] [region_id=464]
[2019/05/01 12:37:48.915 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 6, version: 57, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=1212] [region_id=464]
[2019/05/01 12:37:48.915 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 464, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 100, 101, 102, 97, 255, 117, 108, 116, 95, 255, 112, 97, 115, 255, 115, 119, 111, 114, 100, 255, 95, 108, 255, 105, 102, 101, 116, 105, 109, 255, 101, 255, 0, 0, 0, 0, 0, 0, 0, 248, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 100, 101, 102, 97, 255, 117, 108, 116, 95, 255, 115, 116, 111, 255, 114, 97, 103, 101, 95, 255, 101, 110, 255, 103, 105, 110, 101, 0, 0, 253, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 57, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 465, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 466, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 467, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1212, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1212, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1212] [region_id=464]
[2019/05/01 12:37:48.964 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 465, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=10] [term=7] [peer_id=1212] [region_id=464]
[2019/05/01 12:37:48.965 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 7, version: 57, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=1212] [region_id=464]
[2019/05/01 12:37:48.965 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 464, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 100, 101, 102, 97, 255, 117, 108, 116, 95, 255, 112, 97, 115, 255, 115, 119, 111, 114, 100, 255, 95, 108, 255, 105, 102, 101, 116, 105, 109, 255, 101, 255, 0, 0, 0, 0, 0, 0, 0, 248, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 100, 101, 102, 97, 255, 117, 108, 116, 95, 255, 115, 116, 111, 255, 114, 97, 103, 101, 95, 255, 101, 110, 255, 103, 105, 110, 101, 0, 0, 253, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 7, version: 57, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 465, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 466, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 467, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1212, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 465, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1212] [region_id=464]
[2019/05/01 12:37:49.240 -07:00] [INFO] [unknown:1625] ["[region 448] 778 [term 7] received MsgTimeoutNow from 451 and starts an election to get leadership."]
[2019/05/01 12:37:49.240 -07:00] [INFO] [unknown:739] ["[region 448] 778 became candidate at term 8"]
[2019/05/01 12:37:49.240 -07:00] [INFO] [unknown:854] ["[region 448] 778 received MsgRequestVoteResponse from 778 at term 8"]
[2019/05/01 12:37:49.240 -07:00] [INFO] [unknown:828] ["[region 448] 778 [logterm: 7, index: 13] sent MsgRequestVote request to 1007 at term 8"]
[2019/05/01 12:37:49.240 -07:00] [INFO] [unknown:828] ["[region 448] 778 [logterm: 7, index: 13] sent MsgRequestVote request to 451 at term 8"]
[2019/05/01 12:37:49.262 -07:00] [INFO] [unknown:854] ["[region 448] 778 received MsgRequestVoteResponse from 451 at term 8"]
[2019/05/01 12:37:49.262 -07:00] [INFO] [unknown:1550] ["[region 448] 778 [quorum:2] has received 2 MsgRequestVoteResponse votes and 0 vote rejections"]
[2019/05/01 12:37:49.262 -07:00] [INFO] [unknown:789] ["[region 448] 778 became leader at term 8"]
[2019/05/01 12:37:49.819 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=1256] [region_id=684]
[2019/05/01 12:37:49.819 -07:00] [INFO] [unknown:719] ["[region 684] 1256 became follower at term 0"]
[2019/05/01 12:37:49.819 -07:00] [INFO] [unknown:295] ["[region 684] 1256 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:37:49.819 -07:00] [INFO] [unknown:719] ["[region 684] 1256 became follower at term 1"]
[2019/05/01 12:37:49.820 -07:00] [INFO] [unknown:920] ["[region 684] 1256 [term: 1] received a MsgHeartbeat message with higher term from 943 [term: 7]"]
[2019/05/01 12:37:49.820 -07:00] [INFO] [unknown:719] ["[region 684] 1256 became follower at term 7"]
[2019/05/01 12:37:49.972 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_1162_6_7_(default|lock|write).sst] [snap_key=1162_6_7]
[2019/05/01 12:37:49.980 -07:00] [INFO] [unknown:1792] ["[region 1162] 1214 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 7, term: 6]"]
[2019/05/01 12:37:49.980 -07:00] [INFO] [unknown:1816] ["[region 1162] 1214 restored progress of 1163 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:37:49.980 -07:00] [INFO] [unknown:1816] ["[region 1162] 1214 restored progress of 1164 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:37:49.980 -07:00] [INFO] [unknown:1816] ["[region 1162] 1214 restored progress of 1165 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:37:49.980 -07:00] [INFO] [unknown:1816] ["[region 1162] 1214 restored progress of 1214 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:37:49.980 -07:00] [INFO] [unknown:474] ["[region 1162] 1214 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 7, term: 6]"]
[2019/05/01 12:37:49.980 -07:00] [INFO] [unknown:1736] ["[region 1162] 1214 [commit: 7] restored snapshot [index: 7, term: 6]"]
[2019/05/01 12:37:49.980 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=1214] [region_id=1162]
[2019/05/01 12:37:49.981 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 7, truncated_state: Some(RaftTruncatedState { index: 7, term: 6, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 1162, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 102, 255, 108, 117, 115, 255, 104, 95, 108, 111, 103, 255, 95, 97, 255, 116, 95, 116, 114, 120, 95, 255, 99, 255, 111, 109, 109, 105, 116, 0, 0, 253, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 102, 255, 108, 117, 115, 255, 104, 95, 110, 101, 105, 255, 103, 104, 255, 98, 111, 114, 115, 0, 0, 253, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 147, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1163, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1164, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1165, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1214, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1214] [region_id=1162]
[2019/05/01 12:37:50.014 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 1162] 1214"]
[2019/05/01 12:37:50.014 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 1162, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 102, 255, 108, 117, 115, 255, 104, 95, 108, 111, 103, 255, 95, 97, 255, 116, 95, 116, 114, 120, 95, 255, 99, 255, 111, 109, 109, 105, 116, 0, 0, 253, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 102, 255, 108, 117, 115, 255, 104, 95, 110, 101, 105, 255, 103, 104, 255, 98, 111, 114, 115, 0, 0, 253, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 147, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1163, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1164, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1165, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1214, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1214] [region_id=1162]
[2019/05/01 12:37:50.014 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=1162]
[2019/05/01 12:37:50.032 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=18.184128ms] [region_id=1162]
[2019/05/01 12:37:51.001 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 1214, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=8] [term=6] [peer_id=1214] [region_id=1162]
[2019/05/01 12:37:51.001 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 6, version: 147, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=1214] [region_id=1162]
[2019/05/01 12:37:51.001 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 1162, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 102, 255, 108, 117, 115, 255, 104, 95, 108, 111, 103, 255, 95, 97, 255, 116, 95, 116, 114, 120, 95, 255, 99, 255, 111, 109, 109, 105, 116, 0, 0, 253, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 102, 255, 108, 117, 115, 255, 104, 95, 110, 101, 105, 255, 103, 104, 255, 98, 111, 114, 115, 0, 0, 253, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 147, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1163, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1164, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1165, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1214, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1214, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1214] [region_id=1162]
[2019/05/01 12:37:51.112 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 1164, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=9] [term=6] [peer_id=1214] [region_id=1162]
[2019/05/01 12:37:51.112 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 7, version: 147, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=1214] [region_id=1162]
[2019/05/01 12:37:51.112 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 1162, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 102, 255, 108, 117, 115, 255, 104, 95, 108, 111, 103, 255, 95, 97, 255, 116, 95, 116, 114, 120, 95, 255, 99, 255, 111, 109, 109, 105, 116, 0, 0, 253, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 102, 255, 108, 117, 115, 255, 104, 95, 110, 101, 105, 255, 103, 104, 255, 98, 111, 114, 115, 0, 0, 253, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 7, version: 147, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1163, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1164, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1165, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1214, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1164, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1214] [region_id=1162]
[2019/05/01 12:37:51.729 -07:00] [INFO] [unknown:1625] ["[region 221] 1198 [term 7] received MsgTimeoutNow from 224 and starts an election to get leadership."]
[2019/05/01 12:37:51.729 -07:00] [INFO] [unknown:739] ["[region 221] 1198 became candidate at term 8"]
[2019/05/01 12:37:51.729 -07:00] [INFO] [unknown:854] ["[region 221] 1198 received MsgRequestVoteResponse from 1198 at term 8"]
[2019/05/01 12:37:51.729 -07:00] [INFO] [unknown:828] ["[region 221] 1198 [logterm: 7, index: 10] sent MsgRequestVote request to 224 at term 8"]
[2019/05/01 12:37:51.729 -07:00] [INFO] [unknown:828] ["[region 221] 1198 [logterm: 7, index: 10] sent MsgRequestVote request to 223 at term 8"]
[2019/05/01 12:37:51.773 -07:00] [INFO] [unknown:854] ["[region 221] 1198 received MsgRequestVoteResponse from 223 at term 8"]
[2019/05/01 12:37:51.773 -07:00] [INFO] [unknown:1550] ["[region 221] 1198 [quorum:2] has received 2 MsgRequestVoteResponse votes and 0 vote rejections"]
[2019/05/01 12:37:51.773 -07:00] [INFO] [unknown:789] ["[region 221] 1198 became leader at term 8"]
[2019/05/01 12:37:51.823 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_684_7_11_(default|lock|write).sst] [snap_key=684_7_11]
[2019/05/01 12:37:51.839 -07:00] [INFO] [unknown:1792] ["[region 684] 1256 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 11, term: 7]"]
[2019/05/01 12:37:51.839 -07:00] [INFO] [unknown:1816] ["[region 684] 1256 restored progress of 685 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:37:51.839 -07:00] [INFO] [unknown:1816] ["[region 684] 1256 restored progress of 686 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:37:51.839 -07:00] [INFO] [unknown:1816] ["[region 684] 1256 restored progress of 943 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:37:51.839 -07:00] [INFO] [unknown:1816] ["[region 684] 1256 restored progress of 1256 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:37:51.839 -07:00] [INFO] [unknown:474] ["[region 684] 1256 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 11, term: 7]"]
[2019/05/01 12:37:51.839 -07:00] [INFO] [unknown:1736] ["[region 684] 1256 [commit: 11] restored snapshot [index: 11, term: 7]"]
[2019/05/01 12:37:51.839 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=1256] [region_id=684]
[2019/05/01 12:37:51.839 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 11, truncated_state: Some(RaftTruncatedState { index: 11, term: 7, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 684, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 103, 116, 105, 100, 255, 95, 101, 120, 101, 255, 99, 117, 116, 255, 101, 100, 95, 99, 111, 255, 109, 112, 255, 114, 101, 115, 115, 105, 111, 255, 110, 255, 95, 112, 101, 114, 105, 111, 100, 255, 255, 0, 0, 0, 0, 0, 0, 0, 0, 255, 247, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 103, 116, 105, 100, 255, 95, 109, 111, 100, 255, 101, 0, 0, 255, 0, 0, 0, 0, 0, 248, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 87, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 685, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 686, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 943, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1256, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1256] [region_id=684]
[2019/05/01 12:37:51.900 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 684] 1256"]
[2019/05/01 12:37:51.900 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 684, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 103, 116, 105, 100, 255, 95, 101, 120, 101, 255, 99, 117, 116, 255, 101, 100, 95, 99, 111, 255, 109, 112, 255, 114, 101, 115, 115, 105, 111, 255, 110, 255, 95, 112, 101, 114, 105, 111, 100, 255, 255, 0, 0, 0, 0, 0, 0, 0, 0, 255, 247, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 103, 116, 105, 100, 255, 95, 109, 111, 100, 255, 101, 0, 0, 255, 0, 0, 0, 0, 0, 248, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 87, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 685, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 686, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 943, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1256, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1256] [region_id=684]
[2019/05/01 12:37:51.900 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=684]
[2019/05/01 12:37:51.940 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=39.889947ms] [region_id=684]
[2019/05/01 12:37:52.037 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=1258] [region_id=1059]
[2019/05/01 12:37:52.037 -07:00] [INFO] [unknown:719] ["[region 1059] 1258 became follower at term 0"]
[2019/05/01 12:37:52.037 -07:00] [INFO] [unknown:295] ["[region 1059] 1258 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:37:52.037 -07:00] [INFO] [unknown:719] ["[region 1059] 1258 became follower at term 1"]
[2019/05/01 12:37:52.037 -07:00] [INFO] [unknown:920] ["[region 1059] 1258 [term: 1] received a MsgHeartbeat message with higher term from 1062 [term: 6]"]
[2019/05/01 12:37:52.037 -07:00] [INFO] [unknown:719] ["[region 1059] 1258 became follower at term 6"]
[2019/05/01 12:37:52.230 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=1259] [region_id=472]
[2019/05/01 12:37:52.230 -07:00] [INFO] [unknown:719] ["[region 472] 1259 became follower at term 0"]
[2019/05/01 12:37:52.230 -07:00] [INFO] [unknown:295] ["[region 472] 1259 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:37:52.230 -07:00] [INFO] [unknown:719] ["[region 472] 1259 became follower at term 1"]
[2019/05/01 12:37:52.230 -07:00] [INFO] [unknown:920] ["[region 472] 1259 [term: 1] received a MsgHeartbeat message with higher term from 473 [term: 6]"]
[2019/05/01 12:37:52.230 -07:00] [INFO] [unknown:719] ["[region 472] 1259 became follower at term 6"]
[2019/05/01 12:37:52.876 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 1256, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=12] [term=7] [peer_id=1256] [region_id=684]
[2019/05/01 12:37:52.876 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 9, version: 87, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=1256] [region_id=684]
[2019/05/01 12:37:52.876 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 684, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 103, 116, 105, 100, 255, 95, 101, 120, 101, 255, 99, 117, 116, 255, 101, 100, 95, 99, 111, 255, 109, 112, 255, 114, 101, 115, 115, 105, 111, 255, 110, 255, 95, 112, 101, 114, 105, 111, 100, 255, 255, 0, 0, 0, 0, 0, 0, 0, 0, 255, 247, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 103, 116, 105, 100, 255, 95, 109, 111, 100, 255, 101, 0, 0, 255, 0, 0, 0, 0, 0, 248, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 87, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 685, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 686, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 943, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1256, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1256, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1256] [region_id=684]
[2019/05/01 12:37:53.011 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 686, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=13] [term=7] [peer_id=1256] [region_id=684]
[2019/05/01 12:37:53.018 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 10, version: 87, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=1256] [region_id=684]
[2019/05/01 12:37:53.018 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 684, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 103, 116, 105, 100, 255, 95, 101, 120, 101, 255, 99, 117, 116, 255, 101, 100, 95, 99, 111, 255, 109, 112, 255, 114, 101, 115, 115, 105, 111, 255, 110, 255, 95, 112, 101, 114, 105, 111, 100, 255, 255, 0, 0, 0, 0, 0, 0, 0, 0, 255, 247, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 103, 116, 105, 100, 255, 95, 109, 111, 100, 255, 101, 0, 0, 255, 0, 0, 0, 0, 0, 248, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 10, version: 87, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 685, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 686, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 943, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1256, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 686, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1256] [region_id=684]
[2019/05/01 12:37:53.736 -07:00] [INFO] [unknown:1625] ["[region 464] 1212 [term 7] received MsgTimeoutNow from 467 and starts an election to get leadership."]
[2019/05/01 12:37:53.736 -07:00] [INFO] [unknown:739] ["[region 464] 1212 became candidate at term 8"]
[2019/05/01 12:37:53.736 -07:00] [INFO] [unknown:854] ["[region 464] 1212 received MsgRequestVoteResponse from 1212 at term 8"]
[2019/05/01 12:37:53.736 -07:00] [INFO] [unknown:828] ["[region 464] 1212 [logterm: 7, index: 10] sent MsgRequestVote request to 467 at term 8"]
[2019/05/01 12:37:53.736 -07:00] [INFO] [unknown:828] ["[region 464] 1212 [logterm: 7, index: 10] sent MsgRequestVote request to 466 at term 8"]
[2019/05/01 12:37:53.756 -07:00] [INFO] [unknown:854] ["[region 464] 1212 received MsgRequestVoteResponse from 467 at term 8"]
[2019/05/01 12:37:53.756 -07:00] [INFO] [unknown:1550] ["[region 464] 1212 [quorum:2] has received 2 MsgRequestVoteResponse votes and 0 vote rejections"]
[2019/05/01 12:37:53.756 -07:00] [INFO] [unknown:789] ["[region 464] 1212 became leader at term 8"]
[2019/05/01 12:37:54.041 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_1059_6_7_(default|lock|write).sst] [snap_key=1059_6_7]
[2019/05/01 12:37:54.053 -07:00] [INFO] [unknown:1792] ["[region 1059] 1258 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 7, term: 6]"]
[2019/05/01 12:37:54.053 -07:00] [INFO] [unknown:1816] ["[region 1059] 1258 restored progress of 1060 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:37:54.053 -07:00] [INFO] [unknown:1816] ["[region 1059] 1258 restored progress of 1061 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:37:54.053 -07:00] [INFO] [unknown:1816] ["[region 1059] 1258 restored progress of 1062 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:37:54.053 -07:00] [INFO] [unknown:1816] ["[region 1059] 1258 restored progress of 1258 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:37:54.053 -07:00] [INFO] [unknown:474] ["[region 1059] 1258 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 7, term: 6]"]
[2019/05/01 12:37:54.053 -07:00] [INFO] [unknown:1736] ["[region 1059] 1258 [commit: 7] restored snapshot [index: 7, term: 6]"]
[2019/05/01 12:37:54.053 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=1258] [region_id=1059]
[2019/05/01 12:37:54.053 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 7, truncated_state: Some(RaftTruncatedState { index: 7, term: 6, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 1059, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 98, 255, 117, 102, 102, 255, 101, 114, 95, 112, 111, 255, 111, 108, 255, 95, 115, 105, 122, 101, 0, 254, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 99, 255, 104, 97, 110, 255, 103, 101, 95, 98, 117, 255, 102, 102, 255, 101, 114, 95, 109, 97, 120, 255, 95, 255, 115, 105, 122, 101, 0, 0, 0, 252, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 127, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1060, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1061, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1062, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1258, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1258] [region_id=1059]
[2019/05/01 12:37:54.074 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 1059, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 98, 255, 117, 102, 102, 255, 101, 114, 95, 112, 111, 255, 111, 108, 255, 95, 115, 105, 122, 101, 0, 254, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 99, 255, 104, 97, 110, 255, 103, 101, 95, 98, 117, 255, 102, 102, 255, 101, 114, 95, 109, 97, 120, 255, 95, 255, 115, 105, 122, 101, 0, 0, 0, 252, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 127, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1060, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1061, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1062, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1258, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1258] [region_id=1059]
[2019/05/01 12:37:54.074 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 1059] 1258"]
[2019/05/01 12:37:54.074 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=1059]
[2019/05/01 12:37:54.122 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=47.354846ms] [region_id=1059]
[2019/05/01 12:37:54.251 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_472_6_10_(default|lock|write).sst] [snap_key=472_6_10]
[2019/05/01 12:37:54.263 -07:00] [INFO] [unknown:1792] ["[region 472] 1259 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 10, term: 6]"]
[2019/05/01 12:37:54.263 -07:00] [INFO] [unknown:1816] ["[region 472] 1259 restored progress of 473 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:37:54.263 -07:00] [INFO] [unknown:1816] ["[region 472] 1259 restored progress of 474 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:37:54.263 -07:00] [INFO] [unknown:1816] ["[region 472] 1259 restored progress of 1195 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:37:54.263 -07:00] [INFO] [unknown:1816] ["[region 472] 1259 restored progress of 1259 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:37:54.263 -07:00] [INFO] [unknown:474] ["[region 472] 1259 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 10, term: 6]"]
[2019/05/01 12:37:54.263 -07:00] [INFO] [unknown:1736] ["[region 472] 1259 [commit: 10] restored snapshot [index: 10, term: 6]"]
[2019/05/01 12:37:54.263 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=1259] [region_id=472]
[2019/05/01 12:37:54.263 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 10, truncated_state: Some(RaftTruncatedState { index: 10, term: 6, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 472, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 100, 101, 102, 97, 255, 117, 108, 116, 95, 255, 116, 109, 112, 255, 95, 115, 116, 111, 114, 255, 97, 103, 255, 101, 95, 101, 110, 103, 105, 255, 110, 255, 101, 0, 0, 0, 0, 0, 0, 249, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 100, 101, 102, 97, 255, 117, 108, 116, 95, 255, 119, 101, 101, 255, 107, 95, 102, 111, 114, 255, 109, 97, 255, 116, 0, 0, 0, 0, 0, 250, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 57, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 473, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 474, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1195, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1259, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1259] [region_id=472]
[2019/05/01 12:37:54.296 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 472] 1259"]
[2019/05/01 12:37:54.296 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 472, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 100, 101, 102, 97, 255, 117, 108, 116, 95, 255, 116, 109, 112, 255, 95, 115, 116, 111, 114, 255, 97, 103, 255, 101, 95, 101, 110, 103, 105, 255, 110, 255, 101, 0, 0, 0, 0, 0, 0, 249, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 100, 101, 102, 97, 255, 117, 108, 116, 95, 255, 119, 101, 101, 255, 107, 95, 102, 111, 114, 255, 109, 97, 255, 116, 0, 0, 0, 0, 0, 250, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 57, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 473, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 474, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1195, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1259, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1259] [region_id=472]
[2019/05/01 12:37:54.296 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=472]
[2019/05/01 12:37:54.319 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=23.485723ms] [region_id=472]
[2019/05/01 12:37:54.959 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=1261] [region_id=808]
[2019/05/01 12:37:54.959 -07:00] [INFO] [unknown:719] ["[region 808] 1261 became follower at term 0"]
[2019/05/01 12:37:54.959 -07:00] [INFO] [unknown:295] ["[region 808] 1261 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:37:54.959 -07:00] [INFO] [unknown:719] ["[region 808] 1261 became follower at term 1"]
[2019/05/01 12:37:54.959 -07:00] [INFO] [unknown:920] ["[region 808] 1261 [term: 1] received a MsgHeartbeat message with higher term from 1053 [term: 7]"]
[2019/05/01 12:37:54.959 -07:00] [INFO] [unknown:719] ["[region 808] 1261 became follower at term 7"]
[2019/05/01 12:37:55.081 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 1258, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=8] [term=6] [peer_id=1258] [region_id=1059]
[2019/05/01 12:37:55.081 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 6, version: 127, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=1258] [region_id=1059]
[2019/05/01 12:37:55.081 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 1059, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 98, 255, 117, 102, 102, 255, 101, 114, 95, 112, 111, 255, 111, 108, 255, 95, 115, 105, 122, 101, 0, 254, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 99, 255, 104, 97, 110, 255, 103, 101, 95, 98, 117, 255, 102, 102, 255, 101, 114, 95, 109, 97, 120, 255, 95, 255, 115, 105, 122, 101, 0, 0, 0, 252, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 127, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1060, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1061, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1062, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1258, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1258, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1258] [region_id=1059]
[2019/05/01 12:37:55.112 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 1061, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=9] [term=6] [peer_id=1258] [region_id=1059]
[2019/05/01 12:37:55.112 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 7, version: 127, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=1258] [region_id=1059]
[2019/05/01 12:37:55.113 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 1059, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 98, 255, 117, 102, 102, 255, 101, 114, 95, 112, 111, 255, 111, 108, 255, 95, 115, 105, 122, 101, 0, 254, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 99, 255, 104, 97, 110, 255, 103, 101, 95, 98, 117, 255, 102, 102, 255, 101, 114, 95, 109, 97, 120, 255, 95, 255, 115, 105, 122, 101, 0, 0, 0, 252, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 7, version: 127, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1060, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1061, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1062, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1258, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1061, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1258] [region_id=1059]
[2019/05/01 12:37:55.269 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 1259, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=11] [term=6] [peer_id=1259] [region_id=472]
[2019/05/01 12:37:55.269 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 9, version: 57, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=1259] [region_id=472]
[2019/05/01 12:37:55.269 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 472, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 100, 101, 102, 97, 255, 117, 108, 116, 95, 255, 116, 109, 112, 255, 95, 115, 116, 111, 114, 255, 97, 103, 255, 101, 95, 101, 110, 103, 105, 255, 110, 255, 101, 0, 0, 0, 0, 0, 0, 249, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 100, 101, 102, 97, 255, 117, 108, 116, 95, 255, 119, 101, 101, 255, 107, 95, 102, 111, 114, 255, 109, 97, 255, 116, 0, 0, 0, 0, 0, 250, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 57, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 473, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 474, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1195, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1259, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1259, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1259] [region_id=472]
[2019/05/01 12:37:55.352 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 474, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=12] [term=6] [peer_id=1259] [region_id=472]
[2019/05/01 12:37:55.352 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 10, version: 57, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=1259] [region_id=472]
[2019/05/01 12:37:55.352 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 472, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 100, 101, 102, 97, 255, 117, 108, 116, 95, 255, 116, 109, 112, 255, 95, 115, 116, 111, 114, 255, 97, 103, 255, 101, 95, 101, 110, 103, 105, 255, 110, 255, 101, 0, 0, 0, 0, 0, 0, 249, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 100, 101, 102, 97, 255, 117, 108, 116, 95, 255, 119, 101, 101, 255, 107, 95, 102, 111, 114, 255, 109, 97, 255, 116, 0, 0, 0, 0, 0, 250, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 10, version: 57, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 473, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 474, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1195, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1259, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 474, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1259] [region_id=472]
[2019/05/01 12:37:56.963 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_808_7_11_(default|lock|write).sst] [snap_key=808_7_11]
[2019/05/01 12:37:56.980 -07:00] [INFO] [unknown:1792] ["[region 808] 1261 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 11, term: 7]"]
[2019/05/01 12:37:56.980 -07:00] [INFO] [unknown:1816] ["[region 808] 1261 restored progress of 809 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:37:56.980 -07:00] [INFO] [unknown:1816] ["[region 808] 1261 restored progress of 811 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:37:56.980 -07:00] [INFO] [unknown:1816] ["[region 808] 1261 restored progress of 1053 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:37:56.980 -07:00] [INFO] [unknown:1816] ["[region 808] 1261 restored progress of 1261 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:37:56.980 -07:00] [INFO] [unknown:474] ["[region 808] 1261 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 11, term: 7]"]
[2019/05/01 12:37:56.980 -07:00] [INFO] [unknown:1736] ["[region 808] 1261 [commit: 11] restored snapshot [index: 11, term: 7]"]
[2019/05/01 12:37:56.980 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=1261] [region_id=808]
[2019/05/01 12:37:56.980 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 11, truncated_state: Some(RaftTruncatedState { index: 11, term: 7, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 808, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 104, 111, 115, 116, 255, 95, 99, 97, 99, 255, 104, 101, 95, 255, 115, 105, 122, 101, 0, 254, 0, 0, 253], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 104, 111, 115, 116, 255, 110, 97, 109, 101, 255, 0, 0, 0, 255, 0, 0, 0, 0, 0, 247, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 97, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 809, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 811, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1053, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1261, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1261] [region_id=808]
[2019/05/01 12:37:57.001 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 808] 1261"]
[2019/05/01 12:37:57.001 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 808, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 104, 111, 115, 116, 255, 95, 99, 97, 99, 255, 104, 101, 95, 255, 115, 105, 122, 101, 0, 254, 0, 0, 253], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 104, 111, 115, 116, 255, 110, 97, 109, 101, 255, 0, 0, 0, 255, 0, 0, 0, 0, 0, 247, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 97, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 809, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 811, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1053, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1261, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1261] [region_id=808]
[2019/05/01 12:37:57.001 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=808]
[2019/05/01 12:37:57.015 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=1262] [region_id=1178]
[2019/05/01 12:37:57.015 -07:00] [INFO] [unknown:719] ["[region 1178] 1262 became follower at term 0"]
[2019/05/01 12:37:57.015 -07:00] [INFO] [unknown:295] ["[region 1178] 1262 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:37:57.015 -07:00] [INFO] [unknown:719] ["[region 1178] 1262 became follower at term 1"]
[2019/05/01 12:37:57.015 -07:00] [INFO] [unknown:920] ["[region 1178] 1262 [term: 1] received a MsgHeartbeat message with higher term from 1213 [term: 7]"]
[2019/05/01 12:37:57.015 -07:00] [INFO] [unknown:719] ["[region 1178] 1262 became follower at term 7"]
[2019/05/01 12:37:57.022 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=20.201343ms] [region_id=808]
[2019/05/01 12:37:57.962 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=1264] [region_id=361]
[2019/05/01 12:37:57.971 -07:00] [INFO] [unknown:719] ["[region 361] 1264 became follower at term 0"]
[2019/05/01 12:37:57.971 -07:00] [INFO] [unknown:295] ["[region 361] 1264 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:37:57.971 -07:00] [INFO] [unknown:719] ["[region 361] 1264 became follower at term 1"]
[2019/05/01 12:37:57.971 -07:00] [INFO] [unknown:920] ["[region 361] 1264 [term: 1] received a MsgHeartbeat message with higher term from 781 [term: 8]"]
[2019/05/01 12:37:57.971 -07:00] [INFO] [unknown:719] ["[region 361] 1264 became follower at term 8"]
[2019/05/01 12:37:58.030 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 1261, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=12] [term=7] [peer_id=1261] [region_id=808]
[2019/05/01 12:37:58.030 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 9, version: 97, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=1261] [region_id=808]
[2019/05/01 12:37:58.030 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 808, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 104, 111, 115, 116, 255, 95, 99, 97, 99, 255, 104, 101, 95, 255, 115, 105, 122, 101, 0, 254, 0, 0, 253], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 104, 111, 115, 116, 255, 110, 97, 109, 101, 255, 0, 0, 0, 255, 0, 0, 0, 0, 0, 247, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 97, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 809, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 811, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1053, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1261, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1261, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1261] [region_id=808]
[2019/05/01 12:37:58.176 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 811, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=13] [term=7] [peer_id=1261] [region_id=808]
[2019/05/01 12:37:58.176 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 10, version: 97, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=1261] [region_id=808]
[2019/05/01 12:37:58.176 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 808, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 104, 111, 115, 116, 255, 95, 99, 97, 99, 255, 104, 101, 95, 255, 115, 105, 122, 101, 0, 254, 0, 0, 253], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 104, 111, 115, 116, 255, 110, 97, 109, 101, 255, 0, 0, 0, 255, 0, 0, 0, 0, 0, 247, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 10, version: 97, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 809, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 811, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1053, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1261, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 811, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1261] [region_id=808]
[2019/05/01 12:37:59.033 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_1178_7_11_(default|lock|write).sst] [snap_key=1178_7_11]
[2019/05/01 12:37:59.043 -07:00] [INFO] [unknown:1792] ["[region 1178] 1262 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 11, term: 7]"]
[2019/05/01 12:37:59.043 -07:00] [INFO] [unknown:1816] ["[region 1178] 1262 restored progress of 1180 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:37:59.043 -07:00] [INFO] [unknown:1816] ["[region 1178] 1262 restored progress of 1181 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:37:59.043 -07:00] [INFO] [unknown:1816] ["[region 1178] 1262 restored progress of 1213 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:37:59.043 -07:00] [INFO] [unknown:1816] ["[region 1178] 1262 restored progress of 1262 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:37:59.043 -07:00] [INFO] [unknown:474] ["[region 1178] 1262 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 11, term: 7]"]
[2019/05/01 12:37:59.043 -07:00] [INFO] [unknown:1736] ["[region 1178] 1262 [commit: 11] restored snapshot [index: 11, term: 7]"]
[2019/05/01 12:37:59.043 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=1262] [region_id=1178]
[2019/05/01 12:37:59.044 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 11, truncated_state: Some(RaftTruncatedState { index: 11, term: 7, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 1178, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 102, 255, 111, 114, 99, 255, 101, 95, 108, 111, 97, 255, 100, 95, 255, 99, 111, 114, 114, 117, 112, 255, 116, 255, 101, 100, 0, 0, 0, 0, 0, 250, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 102, 255, 111, 114, 99, 255, 101, 95, 114, 101, 99, 255, 111, 118, 255, 101, 114, 121, 0, 0, 0, 252, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 147, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1180, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1181, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1213, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1262, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1262] [region_id=1178]
[2019/05/01 12:37:59.071 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 1178, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 102, 255, 111, 114, 99, 255, 101, 95, 108, 111, 97, 255, 100, 95, 255, 99, 111, 114, 114, 117, 112, 255, 116, 255, 101, 100, 0, 0, 0, 0, 0, 250, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 102, 255, 111, 114, 99, 255, 101, 95, 114, 101, 99, 255, 111, 118, 255, 101, 114, 121, 0, 0, 0, 252, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 147, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1180, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1181, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1213, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1262, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1262] [region_id=1178]
[2019/05/01 12:37:59.071 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 1178] 1262"]
[2019/05/01 12:37:59.071 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=1178]
[2019/05/01 12:37:59.097 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=26.228887ms] [region_id=1178]
[2019/05/01 12:37:59.979 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_361_8_12_(default|lock|write).sst] [snap_key=361_8_12]
[2019/05/01 12:37:59.985 -07:00] [INFO] [unknown:1792] ["[region 361] 1264 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 12, term: 8]"]
[2019/05/01 12:37:59.985 -07:00] [INFO] [unknown:1816] ["[region 361] 1264 restored progress of 363 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:37:59.985 -07:00] [INFO] [unknown:1816] ["[region 361] 1264 restored progress of 364 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:37:59.985 -07:00] [INFO] [unknown:1816] ["[region 361] 1264 restored progress of 781 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:37:59.985 -07:00] [INFO] [unknown:1816] ["[region 361] 1264 restored progress of 1264 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:37:59.985 -07:00] [INFO] [unknown:474] ["[region 361] 1264 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 12, term: 8]"]
[2019/05/01 12:37:59.985 -07:00] [INFO] [unknown:1736] ["[region 361] 1264 [commit: 12] restored snapshot [index: 12, term: 8]"]
[2019/05/01 12:37:59.985 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=1264] [region_id=361]
[2019/05/01 12:37:59.985 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 12, truncated_state: Some(RaftTruncatedState { index: 12, term: 8, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 361, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 99, 104, 97, 114, 255, 97, 99, 116, 101, 255, 114, 95, 115, 255, 101, 116, 95, 99, 111, 255, 110, 110, 255, 101, 99, 116, 105, 111, 110, 255, 0, 255, 0, 0, 0, 0, 0, 0, 0, 247, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 99, 104, 97, 114, 255, 97, 99, 116, 101, 255, 114, 95, 115, 255, 101, 116, 95, 100, 97, 255, 116, 97, 255, 98, 97, 115, 101, 0, 0, 253, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 37, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 363, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 364, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 781, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1264, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1264] [region_id=361]
[2019/05/01 12:37:59.995 -07:00] [INFO] [unknown:1625] ["[region 1162] 1214 [term 6] received MsgTimeoutNow from 1165 and starts an election to get leadership."]
[2019/05/01 12:37:59.997 -07:00] [INFO] [unknown:739] ["[region 1162] 1214 became candidate at term 7"]
[2019/05/01 12:37:59.997 -07:00] [INFO] [unknown:854] ["[region 1162] 1214 received MsgRequestVoteResponse from 1214 at term 7"]
[2019/05/01 12:37:59.997 -07:00] [INFO] [unknown:828] ["[region 1162] 1214 [logterm: 6, index: 9] sent MsgRequestVote request to 1163 at term 7"]
[2019/05/01 12:37:59.997 -07:00] [INFO] [unknown:828] ["[region 1162] 1214 [logterm: 6, index: 9] sent MsgRequestVote request to 1165 at term 7"]
[2019/05/01 12:38:00.018 -07:00] [INFO] [unknown:1625] ["[region 1121] 1150 [term 6] received MsgTimeoutNow from 1124 and starts an election to get leadership."]
[2019/05/01 12:38:00.018 -07:00] [INFO] [unknown:739] ["[region 1121] 1150 became candidate at term 7"]
[2019/05/01 12:38:00.018 -07:00] [INFO] [unknown:854] ["[region 1121] 1150 received MsgRequestVoteResponse from 1150 at term 7"]
[2019/05/01 12:38:00.018 -07:00] [INFO] [unknown:828] ["[region 1121] 1150 [logterm: 6, index: 9] sent MsgRequestVote request to 1124 at term 7"]
[2019/05/01 12:38:00.018 -07:00] [INFO] [unknown:828] ["[region 1121] 1150 [logterm: 6, index: 9] sent MsgRequestVote request to 1123 at term 7"]
[2019/05/01 12:38:00.026 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 361, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 99, 104, 97, 114, 255, 97, 99, 116, 101, 255, 114, 95, 115, 255, 101, 116, 95, 99, 111, 255, 110, 110, 255, 101, 99, 116, 105, 111, 110, 255, 0, 255, 0, 0, 0, 0, 0, 0, 0, 247, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 99, 104, 97, 114, 255, 97, 99, 116, 101, 255, 114, 95, 115, 255, 101, 116, 95, 100, 97, 255, 116, 97, 255, 98, 97, 115, 101, 0, 0, 253, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 37, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 363, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 364, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 781, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1264, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1264] [region_id=361]
[2019/05/01 12:38:00.026 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=361]
[2019/05/01 12:38:00.026 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 361] 1264"]
[2019/05/01 12:38:00.042 -07:00] [INFO] [unknown:854] ["[region 1162] 1214 received MsgRequestVoteResponse from 1165 at term 7"]
[2019/05/01 12:38:00.042 -07:00] [INFO] [unknown:1550] ["[region 1162] 1214 [quorum:2] has received 2 MsgRequestVoteResponse votes and 0 vote rejections"]
[2019/05/01 12:38:00.042 -07:00] [INFO] [unknown:789] ["[region 1162] 1214 became leader at term 7"]
[2019/05/01 12:38:00.043 -07:00] [INFO] [unknown:1625] ["[region 692] 1103 [term 7] received MsgTimeoutNow from 695 and starts an election to get leadership."]
[2019/05/01 12:38:00.043 -07:00] [INFO] [unknown:739] ["[region 692] 1103 became candidate at term 8"]
[2019/05/01 12:38:00.043 -07:00] [INFO] [unknown:854] ["[region 692] 1103 received MsgRequestVoteResponse from 1103 at term 8"]
[2019/05/01 12:38:00.043 -07:00] [INFO] [unknown:828] ["[region 692] 1103 [logterm: 7, index: 10] sent MsgRequestVote request to 695 at term 8"]
[2019/05/01 12:38:00.043 -07:00] [INFO] [unknown:828] ["[region 692] 1103 [logterm: 7, index: 10] sent MsgRequestVote request to 694 at term 8"]
[2019/05/01 12:38:00.051 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=24.921573ms] [region_id=361]
[2019/05/01 12:38:00.059 -07:00] [INFO] [unknown:854] ["[region 1121] 1150 received MsgRequestVoteResponse from 1123 at term 7"]
[2019/05/01 12:38:00.059 -07:00] [INFO] [unknown:1550] ["[region 1121] 1150 [quorum:2] has received 2 MsgRequestVoteResponse votes and 0 vote rejections"]
[2019/05/01 12:38:00.059 -07:00] [INFO] [unknown:789] ["[region 1121] 1150 became leader at term 7"]
[2019/05/01 12:38:00.075 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 1262, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=12] [term=7] [peer_id=1262] [region_id=1178]
[2019/05/01 12:38:00.075 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 9, version: 147, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=1262] [region_id=1178]
[2019/05/01 12:38:00.075 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 1178, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 102, 255, 111, 114, 99, 255, 101, 95, 108, 111, 97, 255, 100, 95, 255, 99, 111, 114, 114, 117, 112, 255, 116, 255, 101, 100, 0, 0, 0, 0, 0, 250, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 102, 255, 111, 114, 99, 255, 101, 95, 114, 101, 99, 255, 111, 118, 255, 101, 114, 121, 0, 0, 0, 252, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 147, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1180, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1181, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1213, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1262, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1262, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1262] [region_id=1178]
[2019/05/01 12:38:00.090 -07:00] [INFO] [unknown:854] ["[region 692] 1103 received MsgRequestVoteResponse from 694 at term 8"]
[2019/05/01 12:38:00.090 -07:00] [INFO] [unknown:1550] ["[region 692] 1103 [quorum:2] has received 2 MsgRequestVoteResponse votes and 0 vote rejections"]
[2019/05/01 12:38:00.090 -07:00] [INFO] [unknown:789] ["[region 692] 1103 became leader at term 8"]
[2019/05/01 12:38:00.221 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 1181, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=13] [term=7] [peer_id=1262] [region_id=1178]
[2019/05/01 12:38:00.221 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 10, version: 147, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=1262] [region_id=1178]
[2019/05/01 12:38:00.221 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 1178, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 102, 255, 111, 114, 99, 255, 101, 95, 108, 111, 97, 255, 100, 95, 255, 99, 111, 114, 114, 117, 112, 255, 116, 255, 101, 100, 0, 0, 0, 0, 0, 250, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 102, 255, 111, 114, 99, 255, 101, 95, 114, 101, 99, 255, 111, 118, 255, 101, 114, 121, 0, 0, 0, 252, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 10, version: 147, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1180, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1181, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1213, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1262, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1181, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1262] [region_id=1178]
[2019/05/01 12:38:00.993 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 1264, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=13] [term=8] [peer_id=1264] [region_id=361]
[2019/05/01 12:38:00.993 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 9, version: 37, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=1264] [region_id=361]
[2019/05/01 12:38:00.993 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 361, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 99, 104, 97, 114, 255, 97, 99, 116, 101, 255, 114, 95, 115, 255, 101, 116, 95, 99, 111, 255, 110, 110, 255, 101, 99, 116, 105, 111, 110, 255, 0, 255, 0, 0, 0, 0, 0, 0, 0, 247, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 99, 104, 97, 114, 255, 97, 99, 116, 101, 255, 114, 95, 115, 255, 101, 116, 95, 100, 97, 255, 116, 97, 255, 98, 97, 115, 101, 0, 0, 253, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 37, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 363, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 364, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 781, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1264, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1264, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1264] [region_id=361]
[2019/05/01 12:38:01.036 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 364, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=14] [term=8] [peer_id=1264] [region_id=361]
[2019/05/01 12:38:01.036 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 10, version: 37, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=1264] [region_id=361]
[2019/05/01 12:38:01.036 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 361, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 99, 104, 97, 114, 255, 97, 99, 116, 101, 255, 114, 95, 115, 255, 101, 116, 95, 99, 111, 255, 110, 110, 255, 101, 99, 116, 105, 111, 110, 255, 0, 255, 0, 0, 0, 0, 0, 0, 0, 247, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 99, 104, 97, 114, 255, 97, 99, 116, 101, 255, 114, 95, 115, 255, 101, 116, 95, 100, 97, 255, 116, 97, 255, 98, 97, 115, 101, 0, 0, 253, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 10, version: 37, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 363, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 364, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 781, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1264, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 364, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1264] [region_id=361]
[2019/05/01 12:38:03.776 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=1310] [region_id=909]
[2019/05/01 12:38:03.777 -07:00] [INFO] [unknown:719] ["[region 909] 1310 became follower at term 0"]
[2019/05/01 12:38:03.777 -07:00] [INFO] [unknown:295] ["[region 909] 1310 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:38:03.777 -07:00] [INFO] [unknown:719] ["[region 909] 1310 became follower at term 1"]
[2019/05/01 12:38:03.777 -07:00] [INFO] [unknown:920] ["[region 909] 1310 [term: 1] received a MsgHeartbeat message with higher term from 911 [term: 7]"]
[2019/05/01 12:38:03.777 -07:00] [INFO] [unknown:719] ["[region 909] 1310 became follower at term 7"]
[2019/05/01 12:38:04.037 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=1309] [region_id=1113]
[2019/05/01 12:38:04.037 -07:00] [INFO] [unknown:719] ["[region 1113] 1309 became follower at term 0"]
[2019/05/01 12:38:04.037 -07:00] [INFO] [unknown:295] ["[region 1113] 1309 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:38:04.037 -07:00] [INFO] [unknown:719] ["[region 1113] 1309 became follower at term 1"]
[2019/05/01 12:38:04.037 -07:00] [INFO] [unknown:920] ["[region 1113] 1309 [term: 1] received a MsgHeartbeat message with higher term from 1116 [term: 6]"]
[2019/05/01 12:38:04.037 -07:00] [INFO] [unknown:719] ["[region 1113] 1309 became follower at term 6"]
[2019/05/01 12:38:05.248 -07:00] [INFO] [pd.rs:558] ["try to change peer"] [peer="Peer { id: 1311, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [change_type=AddLearnerNode] [region_id=245]
[2019/05/01 12:38:05.248 -07:00] [INFO] [peer.rs:1953] ["propose conf change peer"] [change_peer=1311] [change_type=AddLearnerNode] [peer_id=664] [region_id=245]
[2019/05/01 12:38:05.291 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddLearnerNode, peer: Some(Peer { id: 1311, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=12] [term=8] [peer_id=664] [region_id=245]
[2019/05/01 12:38:05.291 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 8, version: 27, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddLearner] [peer_id=664] [region_id=245]
[2019/05/01 12:38:05.291 -07:00] [INFO] [apply.rs:1476] ["add learner successfully"] [region="Region { id: 245, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 95, 109, 255, 97, 120, 95, 255, 102, 108, 117, 115, 104, 255, 95, 113, 255, 117, 101, 117, 101, 95, 116, 255, 105, 255, 109, 101, 0, 0, 0, 0, 0, 250, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 95, 111, 255, 114, 100, 101, 255, 114, 95, 99, 111, 109, 255, 109, 105, 255, 116, 115, 0, 0, 0, 0, 251, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 8, version: 27, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 247, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 248, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 664, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1311, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=664] [region_id=245]
[2019/05/01 12:38:05.304 -07:00] [INFO] [peer.rs:1318] ["notify pd with change peer region"] [region="Region { id: 245, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 95, 109, 255, 97, 120, 95, 255, 102, 108, 117, 115, 104, 255, 95, 113, 255, 117, 101, 117, 101, 95, 116, 255, 105, 255, 109, 101, 0, 0, 0, 0, 0, 250, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 95, 111, 255, 114, 100, 101, 255, 114, 95, 99, 111, 109, 255, 109, 105, 255, 116, 115, 0, 0, 0, 0, 251, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 27, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 247, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 248, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 664, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1311, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=664] [region_id=245]
[2019/05/01 12:38:05.780 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_909_7_8_(default|lock|write).sst] [snap_key=909_7_8]
[2019/05/01 12:38:05.797 -07:00] [INFO] [unknown:1792] ["[region 909] 1310 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 8, term: 7]"]
[2019/05/01 12:38:05.798 -07:00] [INFO] [unknown:1816] ["[region 909] 1310 restored progress of 910 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:38:05.798 -07:00] [INFO] [unknown:1816] ["[region 909] 1310 restored progress of 911 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:38:05.798 -07:00] [INFO] [unknown:1816] ["[region 909] 1310 restored progress of 912 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:38:05.798 -07:00] [INFO] [unknown:1816] ["[region 909] 1310 restored progress of 1310 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:38:05.798 -07:00] [INFO] [unknown:474] ["[region 909] 1310 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 8, term: 7]"]
[2019/05/01 12:38:05.798 -07:00] [INFO] [unknown:1736] ["[region 909] 1310 [commit: 8] restored snapshot [index: 8, term: 7]"]
[2019/05/01 12:38:05.798 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=1310] [region_id=909]
[2019/05/01 12:38:05.798 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 8, truncated_state: Some(RaftTruncatedState { index: 8, term: 7, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 909, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 97, 255, 100, 97, 112, 255, 116, 105, 118, 101, 95, 255, 102, 108, 255, 117, 115, 104, 105, 110, 103, 255, 95, 255, 108, 119, 109, 0, 0, 0, 0, 251, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 97, 255, 100, 97, 112, 255, 116, 105, 118, 101, 95, 255, 104, 97, 255, 115, 104, 95, 105, 110, 100, 255, 101, 255, 120, 0, 0, 0, 0, 0, 0, 249, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 107, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 910, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 911, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 912, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1310, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1310] [region_id=909]
[2019/05/01 12:38:05.832 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 909, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 97, 255, 100, 97, 112, 255, 116, 105, 118, 101, 95, 255, 102, 108, 255, 117, 115, 104, 105, 110, 103, 255, 95, 255, 108, 119, 109, 0, 0, 0, 0, 251, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 97, 255, 100, 97, 112, 255, 116, 105, 118, 101, 95, 255, 104, 97, 255, 115, 104, 95, 105, 110, 100, 255, 101, 255, 120, 0, 0, 0, 0, 0, 0, 249, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 107, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 910, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 911, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 912, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1310, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1310] [region_id=909]
[2019/05/01 12:38:05.832 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 909] 1310"]
[2019/05/01 12:38:05.832 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=909]
[2019/05/01 12:38:05.876 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=44.092291ms] [region_id=909]
[2019/05/01 12:38:05.998 -07:00] [INFO] [peer_storage.rs:759] ["requesting snapshot"] [peer_id=664] [region_id=245]
[2019/05/01 12:38:06.006 -07:00] [INFO] [snap.rs:757] ["scan snapshot of one cf"] [size=0] [key_count=0] [cf=default] [snapshot=/opt/tidb/data/kv/snap/gen_245_8_12_(default|lock|write).sst] [region_id=245]
[2019/05/01 12:38:06.007 -07:00] [INFO] [snap.rs:757] ["scan snapshot of one cf"] [size=0] [key_count=0] [cf=lock] [snapshot=/opt/tidb/data/kv/snap/gen_245_8_12_(default|lock|write).sst] [region_id=245]
[2019/05/01 12:38:06.007 -07:00] [INFO] [snap.rs:757] ["scan snapshot of one cf"] [size=192] [key_count=2] [cf=write] [snapshot=/opt/tidb/data/kv/snap/gen_245_8_12_(default|lock|write).sst] [region_id=245]
[2019/05/01 12:38:06.036 -07:00] [INFO] [snap.rs:875] ["scan snapshot"] [takes=37.335756ms] [size=1487] [key_count=2] [snapshot=/opt/tidb/data/kv/snap/gen_245_8_12_(default|lock|write).sst] [region_id=245]
[2019/05/01 12:38:06.040 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_1113_6_7_(default|lock|write).sst] [snap_key=1113_6_7]
[2019/05/01 12:38:06.047 -07:00] [INFO] [unknown:1792] ["[region 1113] 1309 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 7, term: 6]"]
[2019/05/01 12:38:06.047 -07:00] [INFO] [unknown:1816] ["[region 1113] 1309 restored progress of 1114 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:38:06.047 -07:00] [INFO] [unknown:1816] ["[region 1113] 1309 restored progress of 1115 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:38:06.047 -07:00] [INFO] [unknown:1816] ["[region 1113] 1309 restored progress of 1116 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:38:06.047 -07:00] [INFO] [unknown:1816] ["[region 1113] 1309 restored progress of 1309 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:38:06.047 -07:00] [INFO] [unknown:474] ["[region 1113] 1309 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 7, term: 6]"]
[2019/05/01 12:38:06.047 -07:00] [INFO] [unknown:1736] ["[region 1113] 1309 [commit: 7] restored snapshot [index: 7, term: 6]"]
[2019/05/01 12:38:06.047 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=1309] [region_id=1113]
[2019/05/01 12:38:06.047 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 7, truncated_state: Some(RaftTruncatedState { index: 7, term: 6, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 1113, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 100, 255, 97, 116, 97, 255, 95, 102, 105, 108, 101, 255, 95, 112, 255, 97, 116, 104, 0, 0, 0, 252, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 100, 255, 105, 115, 97, 255, 98, 108, 101, 95, 115, 255, 111, 114, 255, 116, 95, 102, 105, 108, 101, 255, 95, 255, 99, 97, 99, 104, 101, 0, 0, 253, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 137, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1114, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1115, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1116, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1309, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1309] [region_id=1113]
[2019/05/01 12:38:06.063 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=1113]
[2019/05/01 12:38:06.063 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 1113, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 100, 255, 97, 116, 97, 255, 95, 102, 105, 108, 101, 255, 95, 112, 255, 97, 116, 104, 0, 0, 0, 252, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 100, 255, 105, 115, 97, 255, 98, 108, 101, 95, 115, 255, 111, 114, 255, 116, 95, 102, 105, 108, 101, 255, 95, 255, 99, 97, 99, 104, 101, 0, 0, 253, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 137, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1114, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1115, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1116, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1309, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1309] [region_id=1113]
[2019/05/01 12:38:06.063 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 1113] 1309"]
[2019/05/01 12:38:06.080 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=16.415091ms] [region_id=1113]
[2019/05/01 12:38:06.799 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 1310, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=9] [term=7] [peer_id=1310] [region_id=909]
[2019/05/01 12:38:06.799 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 6, version: 107, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=1310] [region_id=909]
[2019/05/01 12:38:06.799 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 909, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 97, 255, 100, 97, 112, 255, 116, 105, 118, 101, 95, 255, 102, 108, 255, 117, 115, 104, 105, 110, 103, 255, 95, 255, 108, 119, 109, 0, 0, 0, 0, 251, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 97, 255, 100, 97, 112, 255, 116, 105, 118, 101, 95, 255, 104, 97, 255, 115, 104, 95, 105, 110, 100, 255, 101, 255, 120, 0, 0, 0, 0, 0, 0, 249, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 107, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 910, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 911, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 912, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1310, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1310, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1310] [region_id=909]
[2019/05/01 12:38:06.876 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 910, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=10] [term=7] [peer_id=1310] [region_id=909]
[2019/05/01 12:38:06.876 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 7, version: 107, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=1310] [region_id=909]
[2019/05/01 12:38:06.876 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 909, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 97, 255, 100, 97, 112, 255, 116, 105, 118, 101, 95, 255, 102, 108, 255, 117, 115, 104, 105, 110, 103, 255, 95, 255, 108, 119, 109, 0, 0, 0, 0, 251, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 97, 255, 100, 97, 112, 255, 116, 105, 118, 101, 95, 255, 104, 97, 255, 115, 104, 95, 105, 110, 100, 255, 101, 255, 120, 0, 0, 0, 0, 0, 0, 249, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 7, version: 107, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 910, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 911, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 912, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1310, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 910, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1310] [region_id=909]
[2019/05/01 12:38:07.086 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 1309, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=8] [term=6] [peer_id=1309] [region_id=1113]
[2019/05/01 12:38:07.086 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 6, version: 137, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=1309] [region_id=1113]
[2019/05/01 12:38:07.086 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 1113, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 100, 255, 97, 116, 97, 255, 95, 102, 105, 108, 101, 255, 95, 112, 255, 97, 116, 104, 0, 0, 0, 252, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 100, 255, 105, 115, 97, 255, 98, 108, 101, 95, 115, 255, 111, 114, 255, 116, 95, 102, 105, 108, 101, 255, 95, 255, 99, 97, 99, 104, 101, 0, 0, 253, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 137, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1114, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1115, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1116, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1309, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1309, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1309] [region_id=1113]
[2019/05/01 12:38:07.128 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 1114, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=9] [term=6] [peer_id=1309] [region_id=1113]
[2019/05/01 12:38:07.128 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 7, version: 137, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=1309] [region_id=1113]
[2019/05/01 12:38:07.128 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 1113, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 100, 255, 97, 116, 97, 255, 95, 102, 105, 108, 101, 255, 95, 112, 255, 97, 116, 104, 0, 0, 0, 252, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 100, 255, 105, 115, 97, 255, 98, 108, 101, 95, 115, 255, 111, 114, 255, 116, 95, 102, 105, 108, 101, 255, 95, 255, 99, 97, 99, 104, 101, 0, 0, 253, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 7, version: 137, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1114, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1115, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1116, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1309, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1114, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1309] [region_id=1113]
[2019/05/01 12:38:07.968 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=1314] [region_id=1277]
[2019/05/01 12:38:07.968 -07:00] [INFO] [unknown:719] ["[region 1277] 1314 became follower at term 0"]
[2019/05/01 12:38:07.968 -07:00] [INFO] [unknown:295] ["[region 1277] 1314 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:38:07.968 -07:00] [INFO] [unknown:719] ["[region 1277] 1314 became follower at term 1"]
[2019/05/01 12:38:07.968 -07:00] [INFO] [unknown:920] ["[region 1277] 1314 [term: 1] received a MsgHeartbeat message with higher term from 1280 [term: 6]"]
[2019/05/01 12:38:07.968 -07:00] [INFO] [unknown:719] ["[region 1277] 1314 became follower at term 6"]
[2019/05/01 12:38:08.001 -07:00] [INFO] [unknown:841] ["New connected subchannel at 0x7f0412601d50 for subchannel 0x7f04cf8b8200"]
[2019/05/01 12:38:08.007 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=1312] [region_id=233]
[2019/05/01 12:38:08.007 -07:00] [INFO] [unknown:719] ["[region 233] 1312 became follower at term 0"]
[2019/05/01 12:38:08.007 -07:00] [INFO] [unknown:295] ["[region 233] 1312 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:38:08.007 -07:00] [INFO] [unknown:719] ["[region 233] 1312 became follower at term 1"]
[2019/05/01 12:38:08.008 -07:00] [INFO] [unknown:920] ["[region 233] 1312 [term: 1] received a MsgHeartbeat message with higher term from 780 [term: 8]"]
[2019/05/01 12:38:08.008 -07:00] [INFO] [unknown:719] ["[region 233] 1312 became follower at term 8"]
[2019/05/01 12:38:08.024 -07:00] [INFO] [snap.rs:389] ["sent snapshot"] [duration=24.223265ms] [size=1487] [snap_key=245_8_12] [region_id=245]
[2019/05/01 12:38:08.038 -07:00] [INFO] [peer.rs:538] ["report snapshot status"] [status=Finish] [to="Peer { id: 1311, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=664] [region_id=245]
[2019/05/01 12:38:09.001 -07:00] [INFO] [pd.rs:558] ["try to change peer"] [peer="Peer { id: 1311, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [change_type=AddNode] [region_id=245]
[2019/05/01 12:38:09.001 -07:00] [INFO] [peer.rs:1953] ["propose conf change peer"] [change_peer=1311] [change_type=AddNode] [peer_id=664] [region_id=245]
[2019/05/01 12:38:09.047 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 1311, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=13] [term=8] [peer_id=664] [region_id=245]
[2019/05/01 12:38:09.048 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 9, version: 27, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=664] [region_id=245]
[2019/05/01 12:38:09.048 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 245, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 95, 109, 255, 97, 120, 95, 255, 102, 108, 117, 115, 104, 255, 95, 113, 255, 117, 101, 117, 101, 95, 116, 255, 105, 255, 109, 101, 0, 0, 0, 0, 0, 250, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 95, 111, 255, 114, 100, 101, 255, 114, 95, 99, 111, 109, 255, 109, 105, 255, 116, 115, 0, 0, 0, 0, 251, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 27, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 247, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 248, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 664, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1311, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1311, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=664] [region_id=245]
[2019/05/01 12:38:09.069 -07:00] [INFO] [peer.rs:1318] ["notify pd with change peer region"] [region="Region { id: 245, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 95, 109, 255, 97, 120, 95, 255, 102, 108, 117, 115, 104, 255, 95, 113, 255, 117, 101, 117, 101, 95, 116, 255, 105, 255, 109, 101, 0, 0, 0, 0, 0, 250, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 95, 111, 255, 114, 100, 101, 255, 114, 95, 99, 111, 109, 255, 109, 105, 255, 116, 115, 0, 0, 0, 0, 251, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 10, version: 27, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 247, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 248, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 664, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1311, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=664] [region_id=245]
[2019/05/01 12:38:09.101 -07:00] [INFO] [pd.rs:558] ["try to change peer"] [peer="Peer { id: 247, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [change_type=RemoveNode] [region_id=245]
[2019/05/01 12:38:09.101 -07:00] [INFO] [peer.rs:1953] ["propose conf change peer"] [change_peer=247] [change_type=RemoveNode] [peer_id=664] [region_id=245]
[2019/05/01 12:38:09.121 -07:00] [INFO] [pd.rs:558] ["try to change peer"] [peer="Peer { id: 247, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [change_type=RemoveNode] [region_id=245]
[2019/05/01 12:38:09.158 -07:00] [INFO] [peer.rs:1927] ["there is a pending conf change, try later"] [peer_id=664] [region_id=245]
[2019/05/01 12:38:09.162 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 247, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=14] [term=8] [peer_id=664] [region_id=245]
[2019/05/01 12:38:09.162 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 10, version: 27, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=664] [region_id=245]
[2019/05/01 12:38:09.162 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 245, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 95, 109, 255, 97, 120, 95, 255, 102, 108, 117, 115, 104, 255, 95, 113, 255, 117, 101, 117, 101, 95, 116, 255, 105, 255, 109, 101, 0, 0, 0, 0, 0, 250, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 95, 111, 255, 114, 100, 101, 255, 114, 95, 99, 111, 109, 255, 109, 105, 255, 116, 115, 0, 0, 0, 0, 251, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 10, version: 27, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 247, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 248, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 664, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1311, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 247, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=664] [region_id=245]
[2019/05/01 12:38:09.186 -07:00] [INFO] [peer.rs:1318] ["notify pd with change peer region"] [region="Region { id: 245, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 95, 109, 255, 97, 120, 95, 255, 102, 108, 117, 115, 104, 255, 95, 113, 255, 117, 101, 117, 101, 95, 116, 255, 105, 255, 109, 101, 0, 0, 0, 0, 0, 250, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 95, 111, 255, 114, 100, 101, 255, 114, 95, 99, 111, 109, 255, 109, 105, 255, 116, 115, 0, 0, 0, 0, 251, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 11, version: 27, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 248, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 664, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1311, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=664] [region_id=245]
[2019/05/01 12:38:09.977 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_1277_6_7_(default|lock|write).sst] [snap_key=1277_6_7]
[2019/05/01 12:38:09.996 -07:00] [INFO] [unknown:1792] ["[region 1277] 1314 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 7, term: 6]"]
[2019/05/01 12:38:09.996 -07:00] [INFO] [unknown:1816] ["[region 1277] 1314 restored progress of 1278 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:38:09.996 -07:00] [INFO] [unknown:1816] ["[region 1277] 1314 restored progress of 1279 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:38:09.996 -07:00] [INFO] [unknown:1816] ["[region 1277] 1314 restored progress of 1280 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:38:09.996 -07:00] [INFO] [unknown:1816] ["[region 1277] 1314 restored progress of 1314 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:38:09.996 -07:00] [INFO] [unknown:474] ["[region 1277] 1314 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 7, term: 6]"]
[2019/05/01 12:38:09.996 -07:00] [INFO] [unknown:1736] ["[region 1277] 1314 [commit: 7] restored snapshot [index: 7, term: 6]"]
[2019/05/01 12:38:09.996 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=1314] [region_id=1277]
[2019/05/01 12:38:09.996 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 7, truncated_state: Some(RaftTruncatedState { index: 7, term: 6, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 1277, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 108, 255, 111, 99, 107, 255, 95, 119, 97, 105, 116, 255, 95, 116, 255, 105, 109, 101, 111, 117, 116, 255, 0, 255, 0, 0, 0, 0, 0, 0, 0, 247, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 108, 255, 111, 99, 107, 255, 115, 95, 117, 110, 115, 255, 97, 102, 255, 101, 95, 102, 111, 114, 95, 255, 98, 255, 105, 110, 108, 111, 103, 0, 0, 253, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 167, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1278, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1279, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1280, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1314, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1314] [region_id=1277]
[2019/05/01 12:38:10.027 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 1277] 1314"]
[2019/05/01 12:38:10.027 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 1277, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 108, 255, 111, 99, 107, 255, 95, 119, 97, 105, 116, 255, 95, 116, 255, 105, 109, 101, 111, 117, 116, 255, 0, 255, 0, 0, 0, 0, 0, 0, 0, 247, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 108, 255, 111, 99, 107, 255, 115, 95, 117, 110, 115, 255, 97, 102, 255, 101, 95, 102, 111, 114, 95, 255, 98, 255, 105, 110, 108, 111, 103, 0, 0, 253, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 167, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1278, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1279, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1280, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1314, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1314] [region_id=1277]
[2019/05/01 12:38:10.027 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=1277]
[2019/05/01 12:38:10.028 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_233_8_12_(default|lock|write).sst] [snap_key=233_8_12]
[2019/05/01 12:38:10.051 -07:00] [INFO] [unknown:1792] ["[region 233] 1312 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 12, term: 8]"]
[2019/05/01 12:38:10.051 -07:00] [INFO] [unknown:1816] ["[region 233] 1312 restored progress of 235 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:38:10.051 -07:00] [INFO] [unknown:1816] ["[region 233] 1312 restored progress of 236 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:38:10.051 -07:00] [INFO] [unknown:1816] ["[region 233] 1312 restored progress of 780 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:38:10.051 -07:00] [INFO] [unknown:1816] ["[region 233] 1312 restored progress of 1312 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:38:10.051 -07:00] [INFO] [unknown:474] ["[region 233] 1312 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 12, term: 8]"]
[2019/05/01 12:38:10.051 -07:00] [INFO] [unknown:1736] ["[region 233] 1312 [commit: 12] restored snapshot [index: 12, term: 8]"]
[2019/05/01 12:38:10.051 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=1312] [region_id=233]
[2019/05/01 12:38:10.051 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 12, truncated_state: Some(RaftTruncatedState { index: 12, term: 8, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 233, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 95, 103, 255, 114, 111, 117, 255, 112, 95, 99, 111, 109, 255, 109, 105, 255, 116, 95, 115, 121, 110, 99, 255, 95, 255, 100, 101, 108, 97, 121, 0, 0, 253, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 95, 103, 255, 114, 111, 117, 255, 112, 95, 99, 111, 109, 255, 109, 105, 255, 116, 95, 115, 121, 110, 99, 255, 95, 255, 110, 111, 95, 100, 101, 108, 97, 255, 255, 121, 95, 99, 111, 117, 110, 116, 0, 255, 254, 0, 0, 0, 0, 0, 0, 0, 248], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 27, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 235, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 236, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 780, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1312, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1312] [region_id=233]
[2019/05/01 12:38:10.080 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 233] 1312"]
[2019/05/01 12:38:10.080 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 233, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 95, 103, 255, 114, 111, 117, 255, 112, 95, 99, 111, 109, 255, 109, 105, 255, 116, 95, 115, 121, 110, 99, 255, 95, 255, 100, 101, 108, 97, 121, 0, 0, 253, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 95, 103, 255, 114, 111, 117, 255, 112, 95, 99, 111, 109, 255, 109, 105, 255, 116, 95, 115, 121, 110, 99, 255, 95, 255, 110, 111, 95, 100, 101, 108, 97, 255, 255, 121, 95, 99, 111, 117, 110, 116, 0, 255, 254, 0, 0, 0, 0, 0, 0, 0, 248], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 27, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 235, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 236, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 780, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1312, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1312] [region_id=233]
[2019/05/01 12:38:10.080 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=53.386457ms] [region_id=1277]
[2019/05/01 12:38:10.080 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=233]
[2019/05/01 12:38:10.105 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=24.14121ms] [region_id=233]
[2019/05/01 12:38:11.001 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 1314, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=8] [term=6] [peer_id=1314] [region_id=1277]
[2019/05/01 12:38:11.001 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 6, version: 167, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=1314] [region_id=1277]
[2019/05/01 12:38:11.001 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 1277, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 108, 255, 111, 99, 107, 255, 95, 119, 97, 105, 116, 255, 95, 116, 255, 105, 109, 101, 111, 117, 116, 255, 0, 255, 0, 0, 0, 0, 0, 0, 0, 247, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 108, 255, 111, 99, 107, 255, 115, 95, 117, 110, 115, 255, 97, 102, 255, 101, 95, 102, 111, 114, 95, 255, 98, 255, 105, 110, 108, 111, 103, 0, 0, 253, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 167, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1278, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1279, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1280, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1314, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1314, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1314] [region_id=1277]
[2019/05/01 12:38:11.050 -07:00] [INFO] [pd.rs:558] ["try to change peer"] [peer="Peer { id: 1356, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [change_type=AddLearnerNode] [region_id=373]
[2019/05/01 12:38:11.054 -07:00] [INFO] [peer.rs:1953] ["propose conf change peer"] [change_peer=1356] [change_type=AddLearnerNode] [peer_id=439] [region_id=373]
[2019/05/01 12:38:11.114 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 1312, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=13] [term=8] [peer_id=1312] [region_id=233]
[2019/05/01 12:38:11.114 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 9, version: 27, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=1312] [region_id=233]
[2019/05/01 12:38:11.114 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 233, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 95, 103, 255, 114, 111, 117, 255, 112, 95, 99, 111, 109, 255, 109, 105, 255, 116, 95, 115, 121, 110, 99, 255, 95, 255, 100, 101, 108, 97, 121, 0, 0, 253, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 95, 103, 255, 114, 111, 117, 255, 112, 95, 99, 111, 109, 255, 109, 105, 255, 116, 95, 115, 121, 110, 99, 255, 95, 255, 110, 111, 95, 100, 101, 108, 97, 255, 255, 121, 95, 99, 111, 117, 110, 116, 0, 255, 254, 0, 0, 0, 0, 0, 0, 0, 248], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 27, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 235, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 236, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 780, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1312, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1312, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1312] [region_id=233]
[2019/05/01 12:38:11.148 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddLearnerNode, peer: Some(Peer { id: 1356, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=12] [term=8] [peer_id=439] [region_id=373]
[2019/05/01 12:38:11.148 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 8, version: 37, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddLearner] [peer_id=439] [region_id=373]
[2019/05/01 12:38:11.148 -07:00] [INFO] [apply.rs:1476] ["add learner successfully"] [region="Region { id: 373, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 99, 104, 97, 114, 255, 97, 99, 116, 101, 255, 114, 95, 115, 255, 101, 116, 95, 114, 101, 255, 115, 117, 255, 108, 116, 115, 0, 0, 0, 252, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 99, 104, 97, 114, 255, 97, 99, 116, 101, 255, 114, 95, 115, 255, 101, 116, 95, 115, 101, 255, 114, 118, 255, 101, 114, 0, 0, 0, 0, 251, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 8, version: 37, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 375, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 376, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 439, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1356, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=439] [region_id=373]
[2019/05/01 12:38:11.164 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 1279, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=9] [term=6] [peer_id=1314] [region_id=1277]
[2019/05/01 12:38:11.164 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 7, version: 167, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=1314] [region_id=1277]
[2019/05/01 12:38:11.164 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 1277, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 108, 255, 111, 99, 107, 255, 95, 119, 97, 105, 116, 255, 95, 116, 255, 105, 109, 101, 111, 117, 116, 255, 0, 255, 0, 0, 0, 0, 0, 0, 0, 247, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 108, 255, 111, 99, 107, 255, 115, 95, 117, 110, 115, 255, 97, 102, 255, 101, 95, 102, 111, 114, 95, 255, 98, 255, 105, 110, 108, 111, 103, 0, 0, 253, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 7, version: 167, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1278, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1279, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1280, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1314, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1279, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1314] [region_id=1277]
[2019/05/01 12:38:11.164 -07:00] [INFO] [peer.rs:1318] ["notify pd with change peer region"] [region="Region { id: 373, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 99, 104, 97, 114, 255, 97, 99, 116, 101, 255, 114, 95, 115, 255, 101, 116, 95, 114, 101, 255, 115, 117, 255, 108, 116, 115, 0, 0, 0, 252, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 99, 104, 97, 114, 255, 97, 99, 116, 101, 255, 114, 95, 115, 255, 101, 116, 95, 115, 101, 255, 114, 118, 255, 101, 114, 0, 0, 0, 0, 251, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 37, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 375, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 376, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 439, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1356, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=439] [region_id=373]
[2019/05/01 12:38:11.203 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 235, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=14] [term=8] [peer_id=1312] [region_id=233]
[2019/05/01 12:38:11.203 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 10, version: 27, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=1312] [region_id=233]
[2019/05/01 12:38:11.203 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 233, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 95, 103, 255, 114, 111, 117, 255, 112, 95, 99, 111, 109, 255, 109, 105, 255, 116, 95, 115, 121, 110, 99, 255, 95, 255, 100, 101, 108, 97, 121, 0, 0, 253, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 95, 103, 255, 114, 111, 117, 255, 112, 95, 99, 111, 109, 255, 109, 105, 255, 116, 95, 115, 121, 110, 99, 255, 95, 255, 110, 111, 95, 100, 101, 108, 97, 255, 255, 121, 95, 99, 111, 117, 110, 116, 0, 255, 254, 0, 0, 0, 0, 0, 0, 0, 248], region_epoch: Some(RegionEpoch { conf_ver: 10, version: 27, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 235, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 236, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 780, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1312, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 235, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1312] [region_id=233]
[2019/05/01 12:38:11.943 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=1358] [region_id=1035]
[2019/05/01 12:38:11.943 -07:00] [INFO] [unknown:719] ["[region 1035] 1358 became follower at term 0"]
[2019/05/01 12:38:11.943 -07:00] [INFO] [unknown:295] ["[region 1035] 1358 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:38:11.943 -07:00] [INFO] [unknown:719] ["[region 1035] 1358 became follower at term 1"]
[2019/05/01 12:38:11.943 -07:00] [INFO] [unknown:920] ["[region 1035] 1358 [term: 1] received a MsgHeartbeat message with higher term from 1036 [term: 6]"]
[2019/05/01 12:38:11.943 -07:00] [INFO] [unknown:719] ["[region 1035] 1358 became follower at term 6"]
[2019/05/01 12:38:12.002 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=1357] [region_id=1327]
[2019/05/01 12:38:12.002 -07:00] [INFO] [unknown:719] ["[region 1327] 1357 became follower at term 0"]
[2019/05/01 12:38:12.002 -07:00] [INFO] [unknown:295] ["[region 1327] 1357 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:38:12.002 -07:00] [INFO] [unknown:719] ["[region 1327] 1357 became follower at term 1"]
[2019/05/01 12:38:12.002 -07:00] [INFO] [unknown:920] ["[region 1327] 1357 [term: 1] received a MsgHeartbeat message with higher term from 1328 [term: 7]"]
[2019/05/01 12:38:12.002 -07:00] [INFO] [unknown:719] ["[region 1327] 1357 became follower at term 7"]
[2019/05/01 12:38:12.005 -07:00] [INFO] [peer_storage.rs:759] ["requesting snapshot"] [peer_id=439] [region_id=373]
[2019/05/01 12:38:12.005 -07:00] [INFO] [snap.rs:757] ["scan snapshot of one cf"] [size=0] [key_count=0] [cf=default] [snapshot=/opt/tidb/data/kv/snap/gen_373_8_12_(default|lock|write).sst] [region_id=373]
[2019/05/01 12:38:12.005 -07:00] [INFO] [snap.rs:757] ["scan snapshot of one cf"] [size=0] [key_count=0] [cf=lock] [snapshot=/opt/tidb/data/kv/snap/gen_373_8_12_(default|lock|write).sst] [region_id=373]
[2019/05/01 12:38:12.005 -07:00] [INFO] [snap.rs:757] ["scan snapshot of one cf"] [size=156] [key_count=2] [cf=write] [snapshot=/opt/tidb/data/kv/snap/gen_373_8_12_(default|lock|write).sst] [region_id=373]
[2019/05/01 12:38:12.021 -07:00] [INFO] [snap.rs:875] ["scan snapshot"] [takes=15.687901ms] [size=1414] [key_count=2] [snapshot=/opt/tidb/data/kv/snap/gen_373_8_12_(default|lock|write).sst] [region_id=373]
[2019/05/01 12:38:12.980 -07:00] [INFO] [unknown:1625] ["[region 1113] 1309 [term 6] received MsgTimeoutNow from 1116 and starts an election to get leadership."]
[2019/05/01 12:38:12.980 -07:00] [INFO] [unknown:739] ["[region 1113] 1309 became candidate at term 7"]
[2019/05/01 12:38:12.980 -07:00] [INFO] [unknown:854] ["[region 1113] 1309 received MsgRequestVoteResponse from 1309 at term 7"]
[2019/05/01 12:38:12.980 -07:00] [INFO] [unknown:828] ["[region 1113] 1309 [logterm: 6, index: 9] sent MsgRequestVote request to 1116 at term 7"]
[2019/05/01 12:38:12.980 -07:00] [INFO] [unknown:828] ["[region 1113] 1309 [logterm: 6, index: 9] sent MsgRequestVote request to 1115 at term 7"]
[2019/05/01 12:38:13.000 -07:00] [INFO] [unknown:854] ["[region 1113] 1309 received MsgRequestVoteResponse from 1116 at term 7"]
[2019/05/01 12:38:13.000 -07:00] [INFO] [unknown:1550] ["[region 1113] 1309 [quorum:2] has received 2 MsgRequestVoteResponse votes and 0 vote rejections"]
[2019/05/01 12:38:13.000 -07:00] [INFO] [unknown:789] ["[region 1113] 1309 became leader at term 7"]
[2019/05/01 12:38:13.946 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_1035_6_10_(default|lock|write).sst] [snap_key=1035_6_10]
[2019/05/01 12:38:13.960 -07:00] [INFO] [unknown:1792] ["[region 1035] 1358 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 10, term: 6]"]
[2019/05/01 12:38:13.960 -07:00] [INFO] [unknown:1816] ["[region 1035] 1358 restored progress of 1036 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:38:13.960 -07:00] [INFO] [unknown:1816] ["[region 1035] 1358 restored progress of 1038 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:38:13.960 -07:00] [INFO] [unknown:1816] ["[region 1035] 1358 restored progress of 1148 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:38:13.960 -07:00] [INFO] [unknown:1816] ["[region 1035] 1358 restored progress of 1358 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:38:13.960 -07:00] [INFO] [unknown:474] ["[region 1035] 1358 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 10, term: 6]"]
[2019/05/01 12:38:13.960 -07:00] [INFO] [unknown:1736] ["[region 1035] 1358 [commit: 10] restored snapshot [index: 10, term: 6]"]
[2019/05/01 12:38:13.960 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=1358] [region_id=1035]
[2019/05/01 12:38:13.960 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 10, truncated_state: Some(RaftTruncatedState { index: 10, term: 6, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 1035, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 98, 255, 117, 102, 102, 255, 101, 114, 95, 112, 111, 255, 111, 108, 255, 95, 102, 105, 108, 101, 110, 255, 97, 255, 109, 101, 0, 0, 0, 0, 0, 250, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 98, 255, 117, 102, 102, 255, 101, 114, 95, 112, 111, 255, 111, 108, 255, 95, 105, 110, 115, 116, 97, 255, 110, 255, 99, 101, 115, 0, 0, 0, 0, 251, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 117, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1036, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1038, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1148, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1358, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1358] [region_id=1035]
[2019/05/01 12:38:13.978 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 1035] 1358"]
[2019/05/01 12:38:13.978 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 1035, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 98, 255, 117, 102, 102, 255, 101, 114, 95, 112, 111, 255, 111, 108, 255, 95, 102, 105, 108, 101, 110, 255, 97, 255, 109, 101, 0, 0, 0, 0, 0, 250, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 98, 255, 117, 102, 102, 255, 101, 114, 95, 112, 111, 255, 111, 108, 255, 95, 105, 110, 115, 116, 97, 255, 110, 255, 99, 101, 115, 0, 0, 0, 0, 251, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 117, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1036, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1038, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1148, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1358, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1358] [region_id=1035]
[2019/05/01 12:38:13.978 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=1035]
[2019/05/01 12:38:14.000 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=21.693716ms] [region_id=1035]
[2019/05/01 12:38:14.014 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_1327_7_8_(default|lock|write).sst] [snap_key=1327_7_8]
[2019/05/01 12:38:14.015 -07:00] [INFO] [unknown:841] ["New connected subchannel at 0x7f041bc72750 for subchannel 0x7f04cf8b8400"]
[2019/05/01 12:38:14.037 -07:00] [INFO] [unknown:1792] ["[region 1327] 1357 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 8, term: 7]"]
[2019/05/01 12:38:14.037 -07:00] [INFO] [unknown:1816] ["[region 1327] 1357 restored progress of 1328 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:38:14.037 -07:00] [INFO] [unknown:1816] ["[region 1327] 1357 restored progress of 1329 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:38:14.037 -07:00] [INFO] [unknown:1816] ["[region 1327] 1357 restored progress of 1330 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:38:14.037 -07:00] [INFO] [unknown:1816] ["[region 1327] 1357 restored progress of 1357 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:38:14.037 -07:00] [INFO] [unknown:474] ["[region 1327] 1357 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 8, term: 7]"]
[2019/05/01 12:38:14.037 -07:00] [INFO] [unknown:1736] ["[region 1327] 1357 [commit: 8] restored snapshot [index: 8, term: 7]"]
[2019/05/01 12:38:14.037 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=1357] [region_id=1327]
[2019/05/01 12:38:14.037 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 8, truncated_state: Some(RaftTruncatedState { index: 8, term: 7, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 1327, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 109, 255, 97, 120, 95, 255, 100, 105, 114, 116, 121, 255, 95, 112, 255, 97, 103, 101, 115, 95, 112, 255, 99, 255, 116, 0, 0, 0, 0, 0, 0, 249, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 109, 255, 97, 120, 95, 255, 100, 105, 114, 116, 121, 255, 95, 112, 255, 97, 103, 101, 115, 95, 112, 255, 99, 255, 116, 95, 108, 119, 109, 0, 0, 253, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 177, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1328, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1329, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1330, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1357, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1357] [region_id=1327]
[2019/05/01 12:38:14.037 -07:00] [INFO] [snap.rs:389] ["sent snapshot"] [duration=30.584904ms] [size=1414] [snap_key=373_8_12] [region_id=373]
[2019/05/01 12:38:14.045 -07:00] [INFO] [peer.rs:538] ["report snapshot status"] [status=Finish] [to="Peer { id: 1356, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=439] [region_id=373]
[2019/05/01 12:38:14.053 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 1327] 1357"]
[2019/05/01 12:38:14.053 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 1327, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 109, 255, 97, 120, 95, 255, 100, 105, 114, 116, 121, 255, 95, 112, 255, 97, 103, 101, 115, 95, 112, 255, 99, 255, 116, 0, 0, 0, 0, 0, 0, 249, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 109, 255, 97, 120, 95, 255, 100, 105, 114, 116, 121, 255, 95, 112, 255, 97, 103, 101, 115, 95, 112, 255, 99, 255, 116, 95, 108, 119, 109, 0, 0, 253, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 177, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1328, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1329, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1330, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1357, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1357] [region_id=1327]
[2019/05/01 12:38:14.053 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=1327]
[2019/05/01 12:38:14.077 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=22.993316ms] [region_id=1327]
[2019/05/01 12:38:14.981 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 1358, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=11] [term=6] [peer_id=1358] [region_id=1035]
[2019/05/01 12:38:14.981 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 9, version: 117, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=1358] [region_id=1035]
[2019/05/01 12:38:14.981 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 1035, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 98, 255, 117, 102, 102, 255, 101, 114, 95, 112, 111, 255, 111, 108, 255, 95, 102, 105, 108, 101, 110, 255, 97, 255, 109, 101, 0, 0, 0, 0, 0, 250, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 98, 255, 117, 102, 102, 255, 101, 114, 95, 112, 111, 255, 111, 108, 255, 95, 105, 110, 115, 116, 97, 255, 110, 255, 99, 101, 115, 0, 0, 0, 0, 251, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 117, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1036, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1038, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1148, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1358, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1358, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1358] [region_id=1035]
[2019/05/01 12:38:15.022 -07:00] [INFO] [pd.rs:558] ["try to change peer"] [peer="Peer { id: 1356, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [change_type=AddNode] [region_id=373]
[2019/05/01 12:38:15.030 -07:00] [INFO] [peer.rs:1953] ["propose conf change peer"] [change_peer=1356] [change_type=AddNode] [peer_id=439] [region_id=373]
[2019/05/01 12:38:15.076 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 1038, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=12] [term=6] [peer_id=1358] [region_id=1035]
[2019/05/01 12:38:15.076 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 10, version: 117, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=1358] [region_id=1035]
[2019/05/01 12:38:15.076 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 1035, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 98, 255, 117, 102, 102, 255, 101, 114, 95, 112, 111, 255, 111, 108, 255, 95, 102, 105, 108, 101, 110, 255, 97, 255, 109, 101, 0, 0, 0, 0, 0, 250, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 98, 255, 117, 102, 102, 255, 101, 114, 95, 112, 111, 255, 111, 108, 255, 95, 105, 110, 115, 116, 97, 255, 110, 255, 99, 101, 115, 0, 0, 0, 0, 251, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 10, version: 117, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1036, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1038, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1148, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1358, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1038, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1358] [region_id=1035]
[2019/05/01 12:38:15.112 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 1356, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=13] [term=8] [peer_id=439] [region_id=373]
[2019/05/01 12:38:15.112 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 9, version: 37, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=439] [region_id=373]
[2019/05/01 12:38:15.112 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 373, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 99, 104, 97, 114, 255, 97, 99, 116, 101, 255, 114, 95, 115, 255, 101, 116, 95, 114, 101, 255, 115, 117, 255, 108, 116, 115, 0, 0, 0, 252, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 99, 104, 97, 114, 255, 97, 99, 116, 101, 255, 114, 95, 115, 255, 101, 116, 95, 115, 101, 255, 114, 118, 255, 101, 114, 0, 0, 0, 0, 251, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 37, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 375, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 376, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 439, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1356, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1356, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=439] [region_id=373]
[2019/05/01 12:38:15.112 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 1357, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=9] [term=7] [peer_id=1357] [region_id=1327]
[2019/05/01 12:38:15.112 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 6, version: 177, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=1357] [region_id=1327]
[2019/05/01 12:38:15.112 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 1327, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 109, 255, 97, 120, 95, 255, 100, 105, 114, 116, 121, 255, 95, 112, 255, 97, 103, 101, 115, 95, 112, 255, 99, 255, 116, 0, 0, 0, 0, 0, 0, 249, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 109, 255, 97, 120, 95, 255, 100, 105, 114, 116, 121, 255, 95, 112, 255, 97, 103, 101, 115, 95, 112, 255, 99, 255, 116, 95, 108, 119, 109, 0, 0, 253, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 177, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1328, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1329, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1330, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1357, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1357, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1357] [region_id=1327]
[2019/05/01 12:38:15.136 -07:00] [INFO] [peer.rs:1318] ["notify pd with change peer region"] [region="Region { id: 373, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 99, 104, 97, 114, 255, 97, 99, 116, 101, 255, 114, 95, 115, 255, 101, 116, 95, 114, 101, 255, 115, 117, 255, 108, 116, 115, 0, 0, 0, 252, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 99, 104, 97, 114, 255, 97, 99, 116, 101, 255, 114, 95, 115, 255, 101, 116, 95, 115, 101, 255, 114, 118, 255, 101, 114, 0, 0, 0, 0, 251, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 10, version: 37, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 375, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 376, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 439, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1356, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=439] [region_id=373]
[2019/05/01 12:38:15.167 -07:00] [INFO] [pd.rs:558] ["try to change peer"] [peer="Peer { id: 376, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [change_type=RemoveNode] [region_id=373]
[2019/05/01 12:38:15.167 -07:00] [INFO] [peer.rs:1953] ["propose conf change peer"] [change_peer=376] [change_type=RemoveNode] [peer_id=439] [region_id=373]
[2019/05/01 12:38:15.201 -07:00] [INFO] [pd.rs:558] ["try to change peer"] [peer="Peer { id: 376, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [change_type=RemoveNode] [region_id=373]
[2019/05/01 12:38:15.217 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 1330, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=10] [term=7] [peer_id=1357] [region_id=1327]
[2019/05/01 12:38:15.217 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 7, version: 177, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=1357] [region_id=1327]
[2019/05/01 12:38:15.217 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 1327, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 109, 255, 97, 120, 95, 255, 100, 105, 114, 116, 121, 255, 95, 112, 255, 97, 103, 101, 115, 95, 112, 255, 99, 255, 116, 0, 0, 0, 0, 0, 0, 249, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 109, 255, 97, 120, 95, 255, 100, 105, 114, 116, 121, 255, 95, 112, 255, 97, 103, 101, 115, 95, 112, 255, 99, 255, 116, 95, 108, 119, 109, 0, 0, 253, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 7, version: 177, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1328, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1329, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1330, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1357, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1330, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1357] [region_id=1327]
[2019/05/01 12:38:15.230 -07:00] [INFO] [peer.rs:1927] ["there is a pending conf change, try later"] [peer_id=439] [region_id=373]
[2019/05/01 12:38:15.246 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 376, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=14] [term=8] [peer_id=439] [region_id=373]
[2019/05/01 12:38:15.246 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 10, version: 37, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=439] [region_id=373]
[2019/05/01 12:38:15.246 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 373, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 99, 104, 97, 114, 255, 97, 99, 116, 101, 255, 114, 95, 115, 255, 101, 116, 95, 114, 101, 255, 115, 117, 255, 108, 116, 115, 0, 0, 0, 252, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 99, 104, 97, 114, 255, 97, 99, 116, 101, 255, 114, 95, 115, 255, 101, 116, 95, 115, 101, 255, 114, 118, 255, 101, 114, 0, 0, 0, 0, 251, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 10, version: 37, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 375, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 376, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 439, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1356, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 376, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=439] [region_id=373]
[2019/05/01 12:38:15.282 -07:00] [INFO] [peer.rs:1318] ["notify pd with change peer region"] [region="Region { id: 373, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 99, 104, 97, 114, 255, 97, 99, 116, 101, 255, 114, 95, 115, 255, 101, 116, 95, 114, 101, 255, 115, 117, 255, 108, 116, 115, 0, 0, 0, 252, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 99, 104, 97, 114, 255, 97, 99, 116, 101, 255, 114, 95, 115, 255, 101, 116, 95, 115, 101, 255, 114, 118, 255, 101, 114, 0, 0, 0, 0, 251, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 11, version: 37, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 375, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 439, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1356, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=439] [region_id=373]
[2019/05/01 12:38:15.974 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=1360] [region_id=804]
[2019/05/01 12:38:15.974 -07:00] [INFO] [unknown:719] ["[region 804] 1360 became follower at term 0"]
[2019/05/01 12:38:15.974 -07:00] [INFO] [unknown:295] ["[region 804] 1360 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:38:15.974 -07:00] [INFO] [unknown:719] ["[region 804] 1360 became follower at term 1"]
[2019/05/01 12:38:15.974 -07:00] [INFO] [unknown:920] ["[region 804] 1360 [term: 1] received a MsgHeartbeat message with higher term from 805 [term: 6]"]
[2019/05/01 12:38:15.974 -07:00] [INFO] [unknown:719] ["[region 804] 1360 became follower at term 6"]
[2019/05/01 12:38:16.076 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=1361] [region_id=229]
[2019/05/01 12:38:16.076 -07:00] [INFO] [unknown:719] ["[region 229] 1361 became follower at term 0"]
[2019/05/01 12:38:16.076 -07:00] [INFO] [unknown:295] ["[region 229] 1361 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:38:16.076 -07:00] [INFO] [unknown:719] ["[region 229] 1361 became follower at term 1"]
[2019/05/01 12:38:16.077 -07:00] [INFO] [unknown:920] ["[region 229] 1361 [term: 1] received a MsgHeartbeat message with higher term from 941 [term: 8]"]
[2019/05/01 12:38:16.077 -07:00] [INFO] [unknown:719] ["[region 229] 1361 became follower at term 8"]
[2019/05/01 12:38:17.080 -07:00] [INFO] [pd.rs:558] ["try to change peer"] [peer="Peer { id: 1363, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [change_type=AddLearnerNode] [region_id=586]
[2019/05/01 12:38:17.081 -07:00] [INFO] [peer.rs:1953] ["propose conf change peer"] [change_peer=1363] [change_type=AddLearnerNode] [peer_id=712] [region_id=586]
[2019/05/01 12:38:17.126 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddLearnerNode, peer: Some(Peer { id: 1363, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=11] [term=7] [peer_id=712] [region_id=586]
[2019/05/01 12:38:17.126 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 8, version: 77, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddLearner] [peer_id=712] [region_id=586]
[2019/05/01 12:38:17.126 -07:00] [INFO] [apply.rs:1476] ["add learner successfully"] [region="Region { id: 586, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 101, 120, 112, 108, 255, 105, 99, 105, 116, 255, 95, 100, 101, 255, 102, 97, 117, 108, 116, 255, 115, 95, 255, 102, 111, 114, 95, 116, 105, 255, 109, 255, 101, 115, 116, 97, 109, 112, 0, 254, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 102, 108, 117, 115, 255, 104, 0, 0, 0, 252, 0, 0, 0, 252], region_epoch: Some(RegionEpoch { conf_ver: 8, version: 77, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 587, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 589, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 712, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1363, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=712] [region_id=586]
[2019/05/01 12:38:17.144 -07:00] [INFO] [peer.rs:1318] ["notify pd with change peer region"] [region="Region { id: 586, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 101, 120, 112, 108, 255, 105, 99, 105, 116, 255, 95, 100, 101, 255, 102, 97, 117, 108, 116, 255, 115, 95, 255, 102, 111, 114, 95, 116, 105, 255, 109, 255, 101, 115, 116, 97, 109, 112, 0, 254, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 102, 108, 117, 115, 255, 104, 0, 0, 0, 252, 0, 0, 0, 252], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 77, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 587, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 589, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 712, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1363, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=712] [region_id=586]
[2019/05/01 12:38:18.047 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_804_6_7_(default|lock|write).sst] [snap_key=804_6_7]
[2019/05/01 12:38:18.062 -07:00] [INFO] [unknown:1792] ["[region 804] 1360 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 7, term: 6]"]
[2019/05/01 12:38:18.062 -07:00] [INFO] [unknown:1816] ["[region 804] 1360 restored progress of 805 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:38:18.062 -07:00] [INFO] [unknown:1816] ["[region 804] 1360 restored progress of 806 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:38:18.062 -07:00] [INFO] [unknown:1816] ["[region 804] 1360 restored progress of 807 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:38:18.062 -07:00] [INFO] [unknown:1816] ["[region 804] 1360 restored progress of 1360 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:38:18.062 -07:00] [INFO] [unknown:474] ["[region 804] 1360 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 7, term: 6]"]
[2019/05/01 12:38:18.062 -07:00] [INFO] [unknown:1736] ["[region 804] 1360 [commit: 7] restored snapshot [index: 7, term: 6]"]
[2019/05/01 12:38:18.062 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=1360] [region_id=804]
[2019/05/01 12:38:18.062 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 7, truncated_state: Some(RaftTruncatedState { index: 7, term: 6, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 804, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 104, 97, 118, 101, 255, 95, 115, 121, 109, 255, 108, 105, 110, 255, 107, 0, 0, 0, 0, 251, 0, 0, 253], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 104, 111, 115, 116, 255, 95, 99, 97, 99, 255, 104, 101, 95, 255, 115, 105, 122, 101, 0, 254, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 97, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 805, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 806, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 807, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1360, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1360] [region_id=804]
[2019/05/01 12:38:18.111 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 804] 1360"]
[2019/05/01 12:38:18.111 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=804]
[2019/05/01 12:38:18.111 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 804, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 104, 97, 118, 101, 255, 95, 115, 121, 109, 255, 108, 105, 110, 255, 107, 0, 0, 0, 0, 251, 0, 0, 253], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 104, 111, 115, 116, 255, 95, 99, 97, 99, 255, 104, 101, 95, 255, 115, 105, 122, 101, 0, 254, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 97, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 805, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 806, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 807, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1360, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1360] [region_id=804]
[2019/05/01 12:38:18.111 -07:00] [INFO] [peer_storage.rs:759] ["requesting snapshot"] [peer_id=712] [region_id=586]
[2019/05/01 12:38:18.112 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_229_8_12_(default|lock|write).sst] [snap_key=229_8_12]
[2019/05/01 12:38:18.134 -07:00] [INFO] [unknown:1792] ["[region 229] 1361 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 12, term: 8]"]
[2019/05/01 12:38:18.134 -07:00] [INFO] [unknown:1816] ["[region 229] 1361 restored progress of 230 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:38:18.134 -07:00] [INFO] [unknown:1816] ["[region 229] 1361 restored progress of 232 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:38:18.134 -07:00] [INFO] [unknown:1816] ["[region 229] 1361 restored progress of 941 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:38:18.134 -07:00] [INFO] [unknown:1816] ["[region 229] 1361 restored progress of 1361 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:38:18.134 -07:00] [INFO] [unknown:474] ["[region 229] 1361 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 12, term: 8]"]
[2019/05/01 12:38:18.134 -07:00] [INFO] [unknown:1736] ["[region 229] 1361 [commit: 12] restored snapshot [index: 12, term: 8]"]
[2019/05/01 12:38:18.134 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=1361] [region_id=229]
[2019/05/01 12:38:18.134 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 12, truncated_state: Some(RaftTruncatedState { index: 12, term: 8, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 229, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 95, 102, 255, 111, 114, 109, 255, 97, 116, 0, 0, 0, 252, 0, 0, 253], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 95, 103, 255, 114, 111, 117, 255, 112, 95, 99, 111, 109, 255, 109, 105, 255, 116, 95, 115, 121, 110, 99, 255, 95, 255, 100, 101, 108, 97, 121, 0, 0, 253, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 27, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 230, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 232, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 941, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1361, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1361] [region_id=229]
[2019/05/01 12:38:18.164 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 229] 1361"]
[2019/05/01 12:38:18.164 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 229, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 95, 102, 255, 111, 114, 109, 255, 97, 116, 0, 0, 0, 252, 0, 0, 253], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 95, 103, 255, 114, 111, 117, 255, 112, 95, 99, 111, 109, 255, 109, 105, 255, 116, 95, 115, 121, 110, 99, 255, 95, 255, 100, 101, 108, 97, 121, 0, 0, 253, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 27, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 230, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 232, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 941, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1361, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1361] [region_id=229]
[2019/05/01 12:38:18.180 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=68.817635ms] [region_id=804]
[2019/05/01 12:38:18.180 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=229]
[2019/05/01 12:38:18.180 -07:00] [INFO] [snap.rs:757] ["scan snapshot of one cf"] [size=0] [key_count=0] [cf=default] [snapshot=/opt/tidb/data/kv/snap/gen_586_7_11_(default|lock|write).sst] [region_id=586]
[2019/05/01 12:38:18.180 -07:00] [INFO] [snap.rs:757] ["scan snapshot of one cf"] [size=0] [key_count=0] [cf=lock] [snapshot=/opt/tidb/data/kv/snap/gen_586_7_11_(default|lock|write).sst] [region_id=586]
[2019/05/01 12:38:18.180 -07:00] [INFO] [snap.rs:757] ["scan snapshot of one cf"] [size=192] [key_count=2] [cf=write] [snapshot=/opt/tidb/data/kv/snap/gen_586_7_11_(default|lock|write).sst] [region_id=586]
[2019/05/01 12:38:18.201 -07:00] [INFO] [snap.rs:875] ["scan snapshot"] [takes=20.443778ms] [size=1487] [key_count=2] [snapshot=/opt/tidb/data/kv/snap/gen_586_7_11_(default|lock|write).sst] [region_id=586]
[2019/05/01 12:38:18.210 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=29.810739ms] [region_id=229]
[2019/05/01 12:38:19.025 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 1360, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=8] [term=6] [peer_id=1360] [region_id=804]
[2019/05/01 12:38:19.025 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 6, version: 97, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=1360] [region_id=804]
[2019/05/01 12:38:19.025 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 804, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 104, 97, 118, 101, 255, 95, 115, 121, 109, 255, 108, 105, 110, 255, 107, 0, 0, 0, 0, 251, 0, 0, 253], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 104, 111, 115, 116, 255, 95, 99, 97, 99, 255, 104, 101, 95, 255, 115, 105, 122, 101, 0, 254, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 97, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 805, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 806, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 807, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1360, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1360, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1360] [region_id=804]
[2019/05/01 12:38:19.106 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 807, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=9] [term=6] [peer_id=1360] [region_id=804]
[2019/05/01 12:38:19.106 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 7, version: 97, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=1360] [region_id=804]
[2019/05/01 12:38:19.106 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 804, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 104, 97, 118, 101, 255, 95, 115, 121, 109, 255, 108, 105, 110, 255, 107, 0, 0, 0, 0, 251, 0, 0, 253], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 104, 111, 115, 116, 255, 95, 99, 97, 99, 255, 104, 101, 95, 255, 115, 105, 122, 101, 0, 254, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 7, version: 97, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 805, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 806, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 807, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1360, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 807, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1360] [region_id=804]
[2019/05/01 12:38:19.163 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 1361, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=13] [term=8] [peer_id=1361] [region_id=229]
[2019/05/01 12:38:19.163 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 9, version: 27, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=1361] [region_id=229]
[2019/05/01 12:38:19.163 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 229, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 95, 102, 255, 111, 114, 109, 255, 97, 116, 0, 0, 0, 252, 0, 0, 253], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 95, 103, 255, 114, 111, 117, 255, 112, 95, 99, 111, 109, 255, 109, 105, 255, 116, 95, 115, 121, 110, 99, 255, 95, 255, 100, 101, 108, 97, 121, 0, 0, 253, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 27, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 230, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 232, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 941, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1361, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1361, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1361] [region_id=229]
[2019/05/01 12:38:19.246 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 232, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=14] [term=8] [peer_id=1361] [region_id=229]
[2019/05/01 12:38:19.254 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 10, version: 27, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=1361] [region_id=229]
[2019/05/01 12:38:19.254 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 229, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 95, 102, 255, 111, 114, 109, 255, 97, 116, 0, 0, 0, 252, 0, 0, 253], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 95, 103, 255, 114, 111, 117, 255, 112, 95, 99, 111, 109, 255, 109, 105, 255, 116, 95, 115, 121, 110, 99, 255, 95, 255, 100, 101, 108, 97, 121, 0, 0, 253, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 10, version: 27, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 230, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 232, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 941, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1361, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 232, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1361] [region_id=229]
[2019/05/01 12:38:20.101 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=105_8_12] [peer_id=1151] [region_id=105]
[2019/05/01 12:38:20.101 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=221_7_8] [peer_id=1198] [region_id=221]
[2019/05/01 12:38:20.101 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=229_8_12] [peer_id=1361] [region_id=229]
[2019/05/01 12:38:20.101 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=233_8_12] [peer_id=1312] [region_id=233]
[2019/05/01 12:38:20.101 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=349_7_8] [peer_id=1104] [region_id=349]
[2019/05/01 12:38:20.101 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=353_7_8] [peer_id=1146] [region_id=353]
[2019/05/01 12:38:20.101 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=361_8_12] [peer_id=1264] [region_id=361]
[2019/05/01 12:38:20.101 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=425_7_11] [peer_id=1152] [region_id=425]
[2019/05/01 12:38:20.101 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=464_7_8] [peer_id=1212] [region_id=464]
[2019/05/01 12:38:20.101 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=472_6_10] [peer_id=1259] [region_id=472]
[2019/05/01 12:38:20.102 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=505_6_7] [peer_id=1099] [region_id=505]
[2019/05/01 12:38:20.102 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=684_7_11] [peer_id=1256] [region_id=684]
[2019/05/01 12:38:20.102 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=692_7_8] [peer_id=1103] [region_id=692]
[2019/05/01 12:38:20.102 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=804_6_7] [peer_id=1360] [region_id=804]
[2019/05/01 12:38:20.102 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=808_7_11] [peer_id=1261] [region_id=808]
[2019/05/01 12:38:20.102 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=909_7_8] [peer_id=1310] [region_id=909]
[2019/05/01 12:38:20.102 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=929_7_8] [peer_id=1149] [region_id=929]
[2019/05/01 12:38:20.102 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=1019_6_7] [peer_id=1096] [region_id=1019]
[2019/05/01 12:38:20.102 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=1031_6_7] [peer_id=1054] [region_id=1031]
[2019/05/01 12:38:20.103 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=1035_6_10] [peer_id=1358] [region_id=1035]
[2019/05/01 12:38:20.103 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=1043_7_8] [peer_id=1100] [region_id=1043]
[2019/05/01 12:38:20.103 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=1059_6_7] [peer_id=1258] [region_id=1059]
[2019/05/01 12:38:20.103 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=1113_6_7] [peer_id=1309] [region_id=1113]
[2019/05/01 12:38:20.103 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=1121_6_7] [peer_id=1150] [region_id=1121]
[2019/05/01 12:38:20.103 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=1154_7_8] [peer_id=1196] [region_id=1154]
[2019/05/01 12:38:20.103 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=1162_6_7] [peer_id=1214] [region_id=1162]
[2019/05/01 12:38:20.103 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=1178_7_11] [peer_id=1262] [region_id=1178]
[2019/05/01 12:38:20.103 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=1277_6_7] [peer_id=1314] [region_id=1277]
[2019/05/01 12:38:20.103 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=1327_7_8] [peer_id=1357] [region_id=1327]
[2019/05/01 12:38:20.114 -07:00] [INFO] [unknown:841] ["New connected subchannel at 0x7f0412601b40 for subchannel 0x7f04cf8b8600"]
[2019/05/01 12:38:20.126 -07:00] [INFO] [snap.rs:389] ["sent snapshot"] [duration=12.78298ms] [size=1487] [snap_key=586_7_11] [region_id=586]
[2019/05/01 12:38:20.126 -07:00] [INFO] [peer.rs:538] ["report snapshot status"] [status=Finish] [to="Peer { id: 1363, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=712] [region_id=586]
[2019/05/01 12:38:20.916 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=1404] [region_id=433]
[2019/05/01 12:38:20.916 -07:00] [INFO] [unknown:719] ["[region 433] 1404 became follower at term 0"]
[2019/05/01 12:38:20.917 -07:00] [INFO] [unknown:295] ["[region 433] 1404 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:38:20.917 -07:00] [INFO] [unknown:719] ["[region 433] 1404 became follower at term 1"]
[2019/05/01 12:38:20.917 -07:00] [INFO] [unknown:920] ["[region 433] 1404 [term: 1] received a MsgHeartbeat message with higher term from 436 [term: 7]"]
[2019/05/01 12:38:20.917 -07:00] [INFO] [unknown:719] ["[region 433] 1404 became follower at term 7"]
[2019/05/01 12:38:21.114 -07:00] [INFO] [pd.rs:558] ["try to change peer"] [peer="Peer { id: 1363, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [change_type=AddNode] [region_id=586]
[2019/05/01 12:38:21.114 -07:00] [INFO] [peer.rs:1953] ["propose conf change peer"] [change_peer=1363] [change_type=AddNode] [peer_id=712] [region_id=586]
[2019/05/01 12:38:21.129 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 1363, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=12] [term=7] [peer_id=712] [region_id=586]
[2019/05/01 12:38:21.129 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 9, version: 77, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=712] [region_id=586]
[2019/05/01 12:38:21.129 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 586, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 101, 120, 112, 108, 255, 105, 99, 105, 116, 255, 95, 100, 101, 255, 102, 97, 117, 108, 116, 255, 115, 95, 255, 102, 111, 114, 95, 116, 105, 255, 109, 255, 101, 115, 116, 97, 109, 112, 0, 254, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 102, 108, 117, 115, 255, 104, 0, 0, 0, 252, 0, 0, 0, 252], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 77, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 587, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 589, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 712, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1363, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1363, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=712] [region_id=586]
[2019/05/01 12:38:21.145 -07:00] [INFO] [peer.rs:1318] ["notify pd with change peer region"] [region="Region { id: 586, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 101, 120, 112, 108, 255, 105, 99, 105, 116, 255, 95, 100, 101, 255, 102, 97, 117, 108, 116, 255, 115, 95, 255, 102, 111, 114, 95, 116, 105, 255, 109, 255, 101, 115, 116, 97, 109, 112, 0, 254, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 102, 108, 117, 115, 255, 104, 0, 0, 0, 252, 0, 0, 0, 252], region_epoch: Some(RegionEpoch { conf_ver: 10, version: 77, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 587, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 589, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 712, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1363, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=712] [region_id=586]
[2019/05/01 12:38:21.156 -07:00] [INFO] [pd.rs:558] ["try to change peer"] [peer="Peer { id: 587, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [change_type=RemoveNode] [region_id=586]
[2019/05/01 12:38:21.156 -07:00] [INFO] [pd.rs:558] ["try to change peer"] [peer="Peer { id: 587, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [change_type=RemoveNode] [region_id=586]
[2019/05/01 12:38:21.156 -07:00] [INFO] [peer.rs:1953] ["propose conf change peer"] [change_peer=587] [change_type=RemoveNode] [peer_id=712] [region_id=586]
[2019/05/01 12:38:21.163 -07:00] [INFO] [peer.rs:1927] ["there is a pending conf change, try later"] [peer_id=712] [region_id=586]
[2019/05/01 12:38:21.171 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 587, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=13] [term=7] [peer_id=712] [region_id=586]
[2019/05/01 12:38:21.171 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 10, version: 77, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=712] [region_id=586]
[2019/05/01 12:38:21.171 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 586, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 101, 120, 112, 108, 255, 105, 99, 105, 116, 255, 95, 100, 101, 255, 102, 97, 117, 108, 116, 255, 115, 95, 255, 102, 111, 114, 95, 116, 105, 255, 109, 255, 101, 115, 116, 97, 109, 112, 0, 254, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 102, 108, 117, 115, 255, 104, 0, 0, 0, 252, 0, 0, 0, 252], region_epoch: Some(RegionEpoch { conf_ver: 10, version: 77, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 587, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 589, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 712, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1363, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 587, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=712] [region_id=586]
[2019/05/01 12:38:21.195 -07:00] [INFO] [peer.rs:1318] ["notify pd with change peer region"] [region="Region { id: 586, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 101, 120, 112, 108, 255, 105, 99, 105, 116, 255, 95, 100, 101, 255, 102, 97, 117, 108, 116, 255, 115, 95, 255, 102, 111, 114, 95, 116, 105, 255, 109, 255, 101, 115, 116, 97, 109, 112, 0, 254, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 102, 108, 117, 115, 255, 104, 0, 0, 0, 252, 0, 0, 0, 252], region_epoch: Some(RegionEpoch { conf_ver: 11, version: 77, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 589, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 712, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1363, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=712] [region_id=586]
[2019/05/01 12:38:21.195 -07:00] [INFO] [store.rs:294] ["raft message is stale, ignore it"] [msg_type=MsgAppendResponse] [current_region_epoch="RegionEpoch { conf_ver: 11, version: 77, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region_id=586]
[2019/05/01 12:38:21.768 -07:00] [INFO] [unknown:1625] ["[region 1277] 1314 [term 6] received MsgTimeoutNow from 1280 and starts an election to get leadership."]
[2019/05/01 12:38:21.768 -07:00] [INFO] [unknown:739] ["[region 1277] 1314 became candidate at term 7"]
[2019/05/01 12:38:21.768 -07:00] [INFO] [unknown:854] ["[region 1277] 1314 received MsgRequestVoteResponse from 1314 at term 7"]
[2019/05/01 12:38:21.768 -07:00] [INFO] [unknown:828] ["[region 1277] 1314 [logterm: 6, index: 9] sent MsgRequestVote request to 1280 at term 7"]
[2019/05/01 12:38:21.768 -07:00] [INFO] [unknown:828] ["[region 1277] 1314 [logterm: 6, index: 9] sent MsgRequestVote request to 1278 at term 7"]
[2019/05/01 12:38:21.818 -07:00] [INFO] [unknown:854] ["[region 1277] 1314 received MsgRequestVoteResponse from 1280 at term 7"]
[2019/05/01 12:38:21.818 -07:00] [INFO] [unknown:1550] ["[region 1277] 1314 [quorum:2] has received 2 MsgRequestVoteResponse votes and 0 vote rejections"]
[2019/05/01 12:38:21.818 -07:00] [INFO] [unknown:789] ["[region 1277] 1314 became leader at term 7"]
[2019/05/01 12:38:21.858 -07:00] [INFO] [unknown:1625] ["[region 1059] 1258 [term 6] received MsgTimeoutNow from 1062 and starts an election to get leadership."]
[2019/05/01 12:38:21.863 -07:00] [INFO] [unknown:739] ["[region 1059] 1258 became candidate at term 7"]
[2019/05/01 12:38:21.863 -07:00] [INFO] [unknown:854] ["[region 1059] 1258 received MsgRequestVoteResponse from 1258 at term 7"]
[2019/05/01 12:38:21.863 -07:00] [INFO] [unknown:828] ["[region 1059] 1258 [logterm: 6, index: 9] sent MsgRequestVote request to 1060 at term 7"]
[2019/05/01 12:38:21.863 -07:00] [INFO] [unknown:828] ["[region 1059] 1258 [logterm: 6, index: 9] sent MsgRequestVote request to 1062 at term 7"]
[2019/05/01 12:38:21.889 -07:00] [INFO] [unknown:854] ["[region 1059] 1258 received MsgRequestVoteResponse from 1062 at term 7"]
[2019/05/01 12:38:21.889 -07:00] [INFO] [unknown:1550] ["[region 1059] 1258 [quorum:2] has received 2 MsgRequestVoteResponse votes and 0 vote rejections"]
[2019/05/01 12:38:21.889 -07:00] [INFO] [unknown:789] ["[region 1059] 1258 became leader at term 7"]
[2019/05/01 12:38:22.157 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=1407] [region_id=1063]
[2019/05/01 12:38:22.158 -07:00] [INFO] [unknown:719] ["[region 1063] 1407 became follower at term 0"]
[2019/05/01 12:38:22.158 -07:00] [INFO] [unknown:295] ["[region 1063] 1407 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:38:22.158 -07:00] [INFO] [unknown:719] ["[region 1063] 1407 became follower at term 1"]
[2019/05/01 12:38:22.158 -07:00] [INFO] [unknown:920] ["[region 1063] 1407 [term: 1] received a MsgHeartbeat message with higher term from 1066 [term: 6]"]
[2019/05/01 12:38:22.158 -07:00] [INFO] [unknown:719] ["[region 1063] 1407 became follower at term 6"]
[2019/05/01 12:38:22.920 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_433_7_8_(default|lock|write).sst] [snap_key=433_7_8]
[2019/05/01 12:38:22.936 -07:00] [INFO] [unknown:1792] ["[region 433] 1404 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 8, term: 7]"]
[2019/05/01 12:38:22.936 -07:00] [INFO] [unknown:1816] ["[region 433] 1404 restored progress of 434 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:38:22.936 -07:00] [INFO] [unknown:1816] ["[region 433] 1404 restored progress of 435 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:38:22.936 -07:00] [INFO] [unknown:1816] ["[region 433] 1404 restored progress of 436 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:38:22.936 -07:00] [INFO] [unknown:1816] ["[region 433] 1404 restored progress of 1404 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:38:22.936 -07:00] [INFO] [unknown:474] ["[region 433] 1404 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 8, term: 7]"]
[2019/05/01 12:38:22.936 -07:00] [INFO] [unknown:1736] ["[region 433] 1404 [commit: 8] restored snapshot [index: 8, term: 7]"]
[2019/05/01 12:38:22.936 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=1404] [region_id=433]
[2019/05/01 12:38:22.936 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 8, truncated_state: Some(RaftTruncatedState { index: 8, term: 7, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 433, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 99, 111, 110, 110, 255, 101, 99, 116, 95, 255, 116, 105, 109, 255, 101, 111, 117, 116, 0, 254, 0, 0, 253], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 99, 111, 114, 101, 255, 95, 102, 105, 108, 255, 101, 0, 0, 255, 0, 0, 0, 0, 0, 248, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 47, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 434, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 435, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 436, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1404, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1404] [region_id=433]
[2019/05/01 12:38:22.979 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 433] 1404"]
[2019/05/01 12:38:22.979 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 433, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 99, 111, 110, 110, 255, 101, 99, 116, 95, 255, 116, 105, 109, 255, 101, 111, 117, 116, 0, 254, 0, 0, 253], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 99, 111, 114, 101, 255, 95, 102, 105, 108, 255, 101, 0, 0, 255, 0, 0, 0, 0, 0, 248, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 47, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 434, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 435, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 436, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1404, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1404] [region_id=433]
[2019/05/01 12:38:22.979 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=433]
[2019/05/01 12:38:23.029 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=49.566817ms] [region_id=433]
[2019/05/01 12:38:24.026 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 1404, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=9] [term=7] [peer_id=1404] [region_id=433]
[2019/05/01 12:38:24.026 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 6, version: 47, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=1404] [region_id=433]
[2019/05/01 12:38:24.026 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 433, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 99, 111, 110, 110, 255, 101, 99, 116, 95, 255, 116, 105, 109, 255, 101, 111, 117, 116, 0, 254, 0, 0, 253], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 99, 111, 114, 101, 255, 95, 102, 105, 108, 255, 101, 0, 0, 255, 0, 0, 0, 0, 0, 248, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 47, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 434, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 435, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 436, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1404, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1404, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1404] [region_id=433]
[2019/05/01 12:38:24.161 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_1063_6_7_(default|lock|write).sst] [snap_key=1063_6_7]
[2019/05/01 12:38:24.174 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 434, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=10] [term=7] [peer_id=1404] [region_id=433]
[2019/05/01 12:38:24.174 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 7, version: 47, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=1404] [region_id=433]
[2019/05/01 12:38:24.174 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 433, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 99, 111, 110, 110, 255, 101, 99, 116, 95, 255, 116, 105, 109, 255, 101, 111, 117, 116, 0, 254, 0, 0, 253], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 99, 111, 114, 101, 255, 95, 102, 105, 108, 255, 101, 0, 0, 255, 0, 0, 0, 0, 0, 248, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 7, version: 47, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 434, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 435, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 436, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1404, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 434, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1404] [region_id=433]
[2019/05/01 12:38:24.188 -07:00] [INFO] [unknown:1792] ["[region 1063] 1407 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 7, term: 6]"]
[2019/05/01 12:38:24.188 -07:00] [INFO] [unknown:1816] ["[region 1063] 1407 restored progress of 1064 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:38:24.188 -07:00] [INFO] [unknown:1816] ["[region 1063] 1407 restored progress of 1065 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:38:24.188 -07:00] [INFO] [unknown:1816] ["[region 1063] 1407 restored progress of 1066 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:38:24.188 -07:00] [INFO] [unknown:1816] ["[region 1063] 1407 restored progress of 1407 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:38:24.188 -07:00] [INFO] [unknown:474] ["[region 1063] 1407 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 7, term: 6]"]
[2019/05/01 12:38:24.188 -07:00] [INFO] [unknown:1736] ["[region 1063] 1407 [commit: 7] restored snapshot [index: 7, term: 6]"]
[2019/05/01 12:38:24.188 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=1407] [region_id=1063]
[2019/05/01 12:38:24.188 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 7, truncated_state: Some(RaftTruncatedState { index: 7, term: 6, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 1063, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 99, 255, 104, 97, 110, 255, 103, 101, 95, 98, 117, 255, 102, 102, 255, 101, 114, 95, 109, 97, 120, 255, 95, 255, 115, 105, 122, 101, 0, 0, 0, 252, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 99, 255, 104, 97, 110, 255, 103, 101, 95, 98, 117, 255, 102, 102, 255, 101, 114, 105, 110, 103, 0, 254, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 127, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1064, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1065, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1066, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1407, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1407] [region_id=1063]
[2019/05/01 12:38:24.240 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 1063, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 99, 255, 104, 97, 110, 255, 103, 101, 95, 98, 117, 255, 102, 102, 255, 101, 114, 95, 109, 97, 120, 255, 95, 255, 115, 105, 122, 101, 0, 0, 0, 252, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 99, 255, 104, 97, 110, 255, 103, 101, 95, 98, 117, 255, 102, 102, 255, 101, 114, 105, 110, 103, 0, 254, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 127, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1064, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1065, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1066, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1407, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1407] [region_id=1063]
[2019/05/01 12:38:24.240 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 1063] 1407"]
[2019/05/01 12:38:24.240 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=1063]
[2019/05/01 12:38:24.264 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=24.132213ms] [region_id=1063]
[2019/05/01 12:38:25.201 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 1407, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=8] [term=6] [peer_id=1407] [region_id=1063]
[2019/05/01 12:38:25.201 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 6, version: 127, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=1407] [region_id=1063]
[2019/05/01 12:38:25.201 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 1063, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 99, 255, 104, 97, 110, 255, 103, 101, 95, 98, 117, 255, 102, 102, 255, 101, 114, 95, 109, 97, 120, 255, 95, 255, 115, 105, 122, 101, 0, 0, 0, 252, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 99, 255, 104, 97, 110, 255, 103, 101, 95, 98, 117, 255, 102, 102, 255, 101, 114, 105, 110, 103, 0, 254, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 127, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1064, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1065, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1066, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1407, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1407, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1407] [region_id=1063]
[2019/05/01 12:38:25.255 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 1065, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=9] [term=6] [peer_id=1407] [region_id=1063]
[2019/05/01 12:38:25.255 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 7, version: 127, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=1407] [region_id=1063]
[2019/05/01 12:38:25.255 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 1063, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 99, 255, 104, 97, 110, 255, 103, 101, 95, 98, 117, 255, 102, 102, 255, 101, 114, 95, 109, 97, 120, 255, 95, 255, 115, 105, 122, 101, 0, 0, 0, 252, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 99, 255, 104, 97, 110, 255, 103, 101, 95, 98, 117, 255, 102, 102, 255, 101, 114, 105, 110, 103, 0, 254, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 7, version: 127, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1064, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1065, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1066, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1407, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1065, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1407] [region_id=1063]
[2019/05/01 12:38:25.968 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=1410] [region_id=796]
[2019/05/01 12:38:25.968 -07:00] [INFO] [unknown:719] ["[region 796] 1410 became follower at term 0"]
[2019/05/01 12:38:25.968 -07:00] [INFO] [unknown:295] ["[region 796] 1410 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:38:25.968 -07:00] [INFO] [unknown:719] ["[region 796] 1410 became follower at term 1"]
[2019/05/01 12:38:25.968 -07:00] [INFO] [unknown:920] ["[region 796] 1410 [term: 1] received a MsgHeartbeat message with higher term from 797 [term: 6]"]
[2019/05/01 12:38:25.968 -07:00] [INFO] [unknown:719] ["[region 796] 1410 became follower at term 6"]
[2019/05/01 12:38:26.122 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=1409] [region_id=1220]
[2019/05/01 12:38:26.122 -07:00] [INFO] [unknown:719] ["[region 1220] 1409 became follower at term 0"]
[2019/05/01 12:38:26.122 -07:00] [INFO] [unknown:295] ["[region 1220] 1409 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:38:26.122 -07:00] [INFO] [unknown:719] ["[region 1220] 1409 became follower at term 1"]
[2019/05/01 12:38:26.122 -07:00] [INFO] [unknown:920] ["[region 1220] 1409 [term: 1] received a MsgHeartbeat message with higher term from 1223 [term: 6]"]
[2019/05/01 12:38:26.122 -07:00] [INFO] [unknown:719] ["[region 1220] 1409 became follower at term 6"]
[2019/05/01 12:38:27.972 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_796_6_7_(default|lock|write).sst] [snap_key=796_6_7]
[2019/05/01 12:38:27.988 -07:00] [INFO] [unknown:1792] ["[region 796] 1410 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 7, term: 6]"]
[2019/05/01 12:38:27.988 -07:00] [INFO] [unknown:1816] ["[region 796] 1410 restored progress of 797 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:38:27.988 -07:00] [INFO] [unknown:1816] ["[region 796] 1410 restored progress of 798 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:38:27.988 -07:00] [INFO] [unknown:1816] ["[region 796] 1410 restored progress of 799 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:38:27.988 -07:00] [INFO] [unknown:1816] ["[region 796] 1410 restored progress of 1410 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:38:27.988 -07:00] [INFO] [unknown:474] ["[region 796] 1410 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 7, term: 6]"]
[2019/05/01 12:38:27.988 -07:00] [INFO] [unknown:1736] ["[region 796] 1410 [commit: 7] restored snapshot [index: 7, term: 6]"]
[2019/05/01 12:38:27.988 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=1410] [region_id=796]
[2019/05/01 12:38:27.988 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 7, truncated_state: Some(RaftTruncatedState { index: 7, term: 6, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 796, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 104, 97, 118, 101, 255, 95, 114, 116, 114, 255, 101, 101, 95, 255, 107, 101, 121, 115, 0, 254, 0, 0, 253], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 104, 97, 118, 101, 255, 95, 115, 115, 108, 255, 0, 0, 0, 255, 0, 0, 0, 0, 0, 247, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 97, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 797, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 798, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 799, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1410, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1410] [region_id=796]
[2019/05/01 12:38:28.022 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=1412] [region_id=1273]
[2019/05/01 12:38:28.022 -07:00] [INFO] [unknown:719] ["[region 1273] 1412 became follower at term 0"]
[2019/05/01 12:38:28.022 -07:00] [INFO] [unknown:295] ["[region 1273] 1412 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:38:28.022 -07:00] [INFO] [unknown:719] ["[region 1273] 1412 became follower at term 1"]
[2019/05/01 12:38:28.022 -07:00] [INFO] [unknown:920] ["[region 1273] 1412 [term: 1] received a MsgHeartbeat message with higher term from 1276 [term: 6]"]
[2019/05/01 12:38:28.022 -07:00] [INFO] [unknown:719] ["[region 1273] 1412 became follower at term 6"]
[2019/05/01 12:38:28.034 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 796, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 104, 97, 118, 101, 255, 95, 114, 116, 114, 255, 101, 101, 95, 255, 107, 101, 121, 115, 0, 254, 0, 0, 253], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 104, 97, 118, 101, 255, 95, 115, 115, 108, 255, 0, 0, 0, 255, 0, 0, 0, 0, 0, 247, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 97, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 797, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 798, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 799, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1410, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1410] [region_id=796]
[2019/05/01 12:38:28.034 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 796] 1410"]
[2019/05/01 12:38:28.034 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=796]
[2019/05/01 12:38:28.082 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=48.315885ms] [region_id=796]
[2019/05/01 12:38:28.193 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_1220_6_7_(default|lock|write).sst] [snap_key=1220_6_7]
[2019/05/01 12:38:28.209 -07:00] [INFO] [unknown:1792] ["[region 1220] 1409 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 7, term: 6]"]
[2019/05/01 12:38:28.209 -07:00] [INFO] [unknown:1816] ["[region 1220] 1409 restored progress of 1221 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:38:28.209 -07:00] [INFO] [unknown:1816] ["[region 1220] 1409 restored progress of 1222 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:38:28.209 -07:00] [INFO] [unknown:1816] ["[region 1220] 1409 restored progress of 1223 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:38:28.209 -07:00] [INFO] [unknown:1816] ["[region 1220] 1409 restored progress of 1409 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:38:28.209 -07:00] [INFO] [unknown:474] ["[region 1220] 1409 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 7, term: 6]"]
[2019/05/01 12:38:28.209 -07:00] [INFO] [unknown:1736] ["[region 1220] 1409 [commit: 7] restored snapshot [index: 7, term: 6]"]
[2019/05/01 12:38:28.209 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=1409] [region_id=1220]
[2019/05/01 12:38:28.209 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 7, truncated_state: Some(RaftTruncatedState { index: 7, term: 6, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 1220, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 102, 255, 116, 95, 101, 255, 110, 97, 98, 108, 101, 255, 95, 115, 255, 116, 111, 112, 119, 111, 114, 255, 100, 255, 0, 0, 0, 0, 0, 0, 0, 248, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 102, 255, 116, 95, 109, 255, 97, 120, 95, 116, 111, 255, 107, 101, 255, 110, 95, 115, 105, 122, 101, 255, 0, 255, 0, 0, 0, 0, 0, 0, 0, 247, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 157, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1221, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1222, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1223, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1409, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1409] [region_id=1220]
[2019/05/01 12:38:28.235 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 1220] 1409"]
[2019/05/01 12:38:28.235 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=1220]
[2019/05/01 12:38:28.235 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 1220, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 102, 255, 116, 95, 101, 255, 110, 97, 98, 108, 101, 255, 95, 115, 255, 116, 111, 112, 119, 111, 114, 255, 100, 255, 0, 0, 0, 0, 0, 0, 0, 248, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 102, 255, 116, 95, 109, 255, 97, 120, 95, 116, 111, 255, 107, 101, 255, 110, 95, 115, 105, 122, 101, 255, 0, 255, 0, 0, 0, 0, 0, 0, 0, 247, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 157, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1221, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1222, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1223, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1409, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1409] [region_id=1220]
[2019/05/01 12:38:28.256 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=20.222339ms] [region_id=1220]
[2019/05/01 12:38:28.999 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 1410, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=8] [term=6] [peer_id=1410] [region_id=796]
[2019/05/01 12:38:28.999 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 6, version: 97, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=1410] [region_id=796]
[2019/05/01 12:38:28.999 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 796, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 104, 97, 118, 101, 255, 95, 114, 116, 114, 255, 101, 101, 95, 255, 107, 101, 121, 115, 0, 254, 0, 0, 253], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 104, 97, 118, 101, 255, 95, 115, 115, 108, 255, 0, 0, 0, 255, 0, 0, 0, 0, 0, 247, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 97, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 797, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 798, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 799, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1410, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1410, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1410] [region_id=796]
[2019/05/01 12:38:29.064 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 798, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=9] [term=6] [peer_id=1410] [region_id=796]
[2019/05/01 12:38:29.064 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 7, version: 97, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=1410] [region_id=796]
[2019/05/01 12:38:29.064 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 796, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 104, 97, 118, 101, 255, 95, 114, 116, 114, 255, 101, 101, 95, 255, 107, 101, 121, 115, 0, 254, 0, 0, 253], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 104, 97, 118, 101, 255, 95, 115, 115, 108, 255, 0, 0, 0, 255, 0, 0, 0, 0, 0, 247, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 7, version: 97, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 797, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 798, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 799, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1410, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 798, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1410] [region_id=796]
[2019/05/01 12:38:29.209 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 1409, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=8] [term=6] [peer_id=1409] [region_id=1220]
[2019/05/01 12:38:29.217 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 6, version: 157, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=1409] [region_id=1220]
[2019/05/01 12:38:29.217 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 1220, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 102, 255, 116, 95, 101, 255, 110, 97, 98, 108, 101, 255, 95, 115, 255, 116, 111, 112, 119, 111, 114, 255, 100, 255, 0, 0, 0, 0, 0, 0, 0, 248, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 102, 255, 116, 95, 109, 255, 97, 120, 95, 116, 111, 255, 107, 101, 255, 110, 95, 115, 105, 122, 101, 255, 0, 255, 0, 0, 0, 0, 0, 0, 0, 247, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 157, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1221, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1222, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1223, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1409, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1409, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1409] [region_id=1220]
[2019/05/01 12:38:29.297 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddLearnerNode, peer: Some(Peer { id: 1454, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=11] [term=7] [peer_id=1008] [region_id=341]
[2019/05/01 12:38:29.297 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 8, version: 37, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddLearner] [peer_id=1008] [region_id=341]
[2019/05/01 12:38:29.298 -07:00] [INFO] [apply.rs:1476] ["add learner successfully"] [region="Region { id: 341, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 95, 115, 255, 116, 109, 116, 255, 95, 99, 97, 99, 104, 255, 101, 95, 255, 115, 105, 122, 101, 0, 0, 253, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 103, 105, 255, 110, 103, 95, 255, 105, 109, 112, 111, 115, 255, 115, 105, 255, 98, 108, 101, 95, 109, 111, 255, 100, 255, 101, 0, 0, 0, 0, 0, 0, 249, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 8, version: 37, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 343, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 344, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1008, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1454, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1008] [region_id=341]
[2019/05/01 12:38:29.322 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 1222, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=9] [term=6] [peer_id=1409] [region_id=1220]
[2019/05/01 12:38:29.322 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 7, version: 157, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=1409] [region_id=1220]
[2019/05/01 12:38:29.322 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 1220, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 102, 255, 116, 95, 101, 255, 110, 97, 98, 108, 101, 255, 95, 115, 255, 116, 111, 112, 119, 111, 114, 255, 100, 255, 0, 0, 0, 0, 0, 0, 0, 248, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 102, 255, 116, 95, 109, 255, 97, 120, 95, 116, 111, 255, 107, 101, 255, 110, 95, 115, 105, 122, 101, 255, 0, 255, 0, 0, 0, 0, 0, 0, 0, 247, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 7, version: 157, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1221, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1222, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1223, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1409, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1222, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1409] [region_id=1220]
[2019/05/01 12:38:29.875 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=1455] [region_id=901]
[2019/05/01 12:38:29.875 -07:00] [INFO] [unknown:719] ["[region 901] 1455 became follower at term 0"]
[2019/05/01 12:38:29.875 -07:00] [INFO] [unknown:295] ["[region 901] 1455 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:38:29.875 -07:00] [INFO] [unknown:719] ["[region 901] 1455 became follower at term 1"]
[2019/05/01 12:38:29.875 -07:00] [INFO] [unknown:920] ["[region 901] 1455 [term: 1] received a MsgHeartbeat message with higher term from 902 [term: 6]"]
[2019/05/01 12:38:29.875 -07:00] [INFO] [unknown:719] ["[region 901] 1455 became follower at term 6"]
[2019/05/01 12:38:30.026 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_1273_6_7_(default|lock|write).sst] [snap_key=1273_6_7]
[2019/05/01 12:38:30.035 -07:00] [INFO] [unknown:1792] ["[region 1273] 1412 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 7, term: 6]"]
[2019/05/01 12:38:30.035 -07:00] [INFO] [unknown:1816] ["[region 1273] 1412 restored progress of 1274 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:38:30.035 -07:00] [INFO] [unknown:1816] ["[region 1273] 1412 restored progress of 1275 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:38:30.035 -07:00] [INFO] [unknown:1816] ["[region 1273] 1412 restored progress of 1276 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:38:30.035 -07:00] [INFO] [unknown:1816] ["[region 1273] 1412 restored progress of 1412 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:38:30.035 -07:00] [INFO] [unknown:474] ["[region 1273] 1412 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 7, term: 6]"]
[2019/05/01 12:38:30.035 -07:00] [INFO] [unknown:1736] ["[region 1273] 1412 [commit: 7] restored snapshot [index: 7, term: 6]"]
[2019/05/01 12:38:30.035 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=1412] [region_id=1273]
[2019/05/01 12:38:30.035 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 7, truncated_state: Some(RaftTruncatedState { index: 7, term: 6, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 1273, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 108, 255, 97, 114, 103, 255, 101, 95, 112, 114, 101, 255, 102, 105, 255, 120, 0, 0, 0, 0, 0, 250, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 108, 255, 111, 99, 107, 255, 95, 119, 97, 105, 116, 255, 95, 116, 255, 105, 109, 101, 111, 117, 116, 255, 0, 255, 0, 0, 0, 0, 0, 0, 0, 247, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 167, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1274, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1275, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1276, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1412, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1412] [region_id=1273]
[2019/05/01 12:38:30.064 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 1273] 1412"]
[2019/05/01 12:38:30.064 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 1273, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 108, 255, 97, 114, 103, 255, 101, 95, 112, 114, 101, 255, 102, 105, 255, 120, 0, 0, 0, 0, 0, 250, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 108, 255, 111, 99, 107, 255, 95, 119, 97, 105, 116, 255, 95, 116, 255, 105, 109, 101, 111, 117, 116, 255, 0, 255, 0, 0, 0, 0, 0, 0, 0, 247, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 167, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1274, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1275, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1276, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1412, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1412] [region_id=1273]
[2019/05/01 12:38:30.064 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=1273]
[2019/05/01 12:38:30.080 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=15.844196ms] [region_id=1273]
[2019/05/01 12:38:31.073 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 1412, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=8] [term=6] [peer_id=1412] [region_id=1273]
[2019/05/01 12:38:31.073 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 6, version: 167, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=1412] [region_id=1273]
[2019/05/01 12:38:31.073 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 1273, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 108, 255, 97, 114, 103, 255, 101, 95, 112, 114, 101, 255, 102, 105, 255, 120, 0, 0, 0, 0, 0, 250, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 108, 255, 111, 99, 107, 255, 95, 119, 97, 105, 116, 255, 95, 116, 255, 105, 109, 101, 111, 117, 116, 255, 0, 255, 0, 0, 0, 0, 0, 0, 0, 247, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 167, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1274, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1275, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1276, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1412, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1412, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1412] [region_id=1273]
[2019/05/01 12:38:31.123 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 1275, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=9] [term=6] [peer_id=1412] [region_id=1273]
[2019/05/01 12:38:31.123 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 7, version: 167, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=1412] [region_id=1273]
[2019/05/01 12:38:31.123 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 1273, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 108, 255, 97, 114, 103, 255, 101, 95, 112, 114, 101, 255, 102, 105, 255, 120, 0, 0, 0, 0, 0, 250, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 108, 255, 111, 99, 107, 255, 95, 119, 97, 105, 116, 255, 95, 116, 255, 105, 109, 101, 111, 117, 116, 255, 0, 255, 0, 0, 0, 0, 0, 0, 0, 247, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 7, version: 167, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1274, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1275, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1276, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1412, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1275, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1412] [region_id=1273]
[2019/05/01 12:38:31.441 -07:00] [INFO] [unknown:1625] ["[region 1063] 1407 [term 6] received MsgTimeoutNow from 1066 and starts an election to get leadership."]
[2019/05/01 12:38:31.441 -07:00] [INFO] [unknown:739] ["[region 1063] 1407 became candidate at term 7"]
[2019/05/01 12:38:31.441 -07:00] [INFO] [unknown:854] ["[region 1063] 1407 received MsgRequestVoteResponse from 1407 at term 7"]
[2019/05/01 12:38:31.441 -07:00] [INFO] [unknown:828] ["[region 1063] 1407 [logterm: 6, index: 9] sent MsgRequestVote request to 1064 at term 7"]
[2019/05/01 12:38:31.441 -07:00] [INFO] [unknown:828] ["[region 1063] 1407 [logterm: 6, index: 9] sent MsgRequestVote request to 1066 at term 7"]
[2019/05/01 12:38:31.449 -07:00] [INFO] [unknown:1625] ["[region 433] 1404 [term 7] received MsgTimeoutNow from 436 and starts an election to get leadership."]
[2019/05/01 12:38:31.449 -07:00] [INFO] [unknown:739] ["[region 433] 1404 became candidate at term 8"]
[2019/05/01 12:38:31.449 -07:00] [INFO] [unknown:854] ["[region 433] 1404 received MsgRequestVoteResponse from 1404 at term 8"]
[2019/05/01 12:38:31.449 -07:00] [INFO] [unknown:828] ["[region 433] 1404 [logterm: 7, index: 10] sent MsgRequestVote request to 436 at term 8"]
[2019/05/01 12:38:31.449 -07:00] [INFO] [unknown:828] ["[region 433] 1404 [logterm: 7, index: 10] sent MsgRequestVote request to 435 at term 8"]
[2019/05/01 12:38:31.496 -07:00] [INFO] [unknown:854] ["[region 1063] 1407 received MsgRequestVoteResponse from 1066 at term 7"]
[2019/05/01 12:38:31.496 -07:00] [INFO] [unknown:1550] ["[region 1063] 1407 [quorum:2] has received 2 MsgRequestVoteResponse votes and 0 vote rejections"]
[2019/05/01 12:38:31.496 -07:00] [INFO] [unknown:789] ["[region 1063] 1407 became leader at term 7"]
[2019/05/01 12:38:31.513 -07:00] [INFO] [unknown:854] ["[region 433] 1404 received MsgRequestVoteResponse from 435 at term 8"]
[2019/05/01 12:38:31.513 -07:00] [INFO] [unknown:1550] ["[region 433] 1404 [quorum:2] has received 2 MsgRequestVoteResponse votes and 0 vote rejections"]
[2019/05/01 12:38:31.513 -07:00] [INFO] [unknown:789] ["[region 433] 1404 became leader at term 8"]
[2019/05/01 12:38:31.878 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_901_6_10_(default|lock|write).sst] [snap_key=901_6_10]
[2019/05/01 12:38:31.886 -07:00] [INFO] [unknown:1792] ["[region 901] 1455 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 10, term: 6]"]
[2019/05/01 12:38:31.886 -07:00] [INFO] [unknown:1816] ["[region 901] 1455 restored progress of 902 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:38:31.886 -07:00] [INFO] [unknown:1816] ["[region 901] 1455 restored progress of 904 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:38:31.886 -07:00] [INFO] [unknown:1816] ["[region 901] 1455 restored progress of 1145 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:38:31.886 -07:00] [INFO] [unknown:1816] ["[region 901] 1455 restored progress of 1455 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:38:31.886 -07:00] [INFO] [unknown:474] ["[region 901] 1455 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 10, term: 6]"]
[2019/05/01 12:38:31.886 -07:00] [INFO] [unknown:1736] ["[region 901] 1455 [commit: 10] restored snapshot [index: 10, term: 6]"]
[2019/05/01 12:38:31.886 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=1455] [region_id=901]
[2019/05/01 12:38:31.886 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 10, truncated_state: Some(RaftTruncatedState { index: 10, term: 6, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 901, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 105, 116, 255, 95, 115, 108, 97, 255, 118, 101, 0, 255, 0, 0, 0, 0, 0, 249, 0, 0, 253], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 97, 255, 100, 97, 112, 255, 116, 105, 118, 101, 95, 255, 102, 108, 255, 117, 115, 104, 105, 110, 103, 255, 0, 255, 0, 0, 0, 0, 0, 0, 0, 247, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 107, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 902, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 904, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1145, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1455, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1455] [region_id=901]
[2019/05/01 12:38:31.922 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 901, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 105, 116, 255, 95, 115, 108, 97, 255, 118, 101, 0, 255, 0, 0, 0, 0, 0, 249, 0, 0, 253], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 97, 255, 100, 97, 112, 255, 116, 105, 118, 101, 95, 255, 102, 108, 255, 117, 115, 104, 105, 110, 103, 255, 0, 255, 0, 0, 0, 0, 0, 0, 0, 247, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 107, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 902, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 904, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1145, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1455, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1455] [region_id=901]
[2019/05/01 12:38:31.922 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 901] 1455"]
[2019/05/01 12:38:31.922 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=901]
[2019/05/01 12:38:31.946 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=24.014041ms] [region_id=901]
[2019/05/01 12:38:32.325 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=1456] [region_id=525]
[2019/05/01 12:38:32.325 -07:00] [INFO] [unknown:719] ["[region 525] 1456 became follower at term 0"]
[2019/05/01 12:38:32.325 -07:00] [INFO] [unknown:295] ["[region 525] 1456 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:38:32.325 -07:00] [INFO] [unknown:719] ["[region 525] 1456 became follower at term 1"]
[2019/05/01 12:38:32.325 -07:00] [INFO] [unknown:920] ["[region 525] 1456 [term: 1] received a MsgHeartbeat message with higher term from 526 [term: 6]"]
[2019/05/01 12:38:32.325 -07:00] [INFO] [unknown:719] ["[region 525] 1456 became follower at term 6"]
[2019/05/01 12:38:32.922 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 1455, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=11] [term=6] [peer_id=1455] [region_id=901]
[2019/05/01 12:38:32.922 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 9, version: 107, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=1455] [region_id=901]
[2019/05/01 12:38:32.922 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 901, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 105, 116, 255, 95, 115, 108, 97, 255, 118, 101, 0, 255, 0, 0, 0, 0, 0, 249, 0, 0, 253], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 97, 255, 100, 97, 112, 255, 116, 105, 118, 101, 95, 255, 102, 108, 255, 117, 115, 104, 105, 110, 103, 255, 0, 255, 0, 0, 0, 0, 0, 0, 0, 247, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 107, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 902, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 904, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1145, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1455, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1455, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1455] [region_id=901]
[2019/05/01 12:38:32.977 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 904, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=12] [term=6] [peer_id=1455] [region_id=901]
[2019/05/01 12:38:32.977 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 10, version: 107, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=1455] [region_id=901]
[2019/05/01 12:38:32.977 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 901, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 105, 116, 255, 95, 115, 108, 97, 255, 118, 101, 0, 255, 0, 0, 0, 0, 0, 249, 0, 0, 253], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 97, 255, 100, 97, 112, 255, 116, 105, 118, 101, 95, 255, 102, 108, 255, 117, 115, 104, 105, 110, 103, 255, 0, 255, 0, 0, 0, 0, 0, 0, 0, 247, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 10, version: 107, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 902, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 904, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1145, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1455, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 904, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1455] [region_id=901]
[2019/05/01 12:38:33.045 -07:00] [INFO] [pd.rs:558] ["try to change peer"] [peer="Peer { id: 1458, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [change_type=AddLearnerNode] [region_id=1277]
[2019/05/01 12:38:33.045 -07:00] [INFO] [peer.rs:1953] ["propose conf change peer"] [change_peer=1458] [change_type=AddLearnerNode] [peer_id=1314] [region_id=1277]
[2019/05/01 12:38:33.079 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 1454, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=12] [term=7] [peer_id=1008] [region_id=341]
[2019/05/01 12:38:33.080 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 9, version: 37, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=1008] [region_id=341]
[2019/05/01 12:38:33.080 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 341, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 95, 115, 255, 116, 109, 116, 255, 95, 99, 97, 99, 104, 255, 101, 95, 255, 115, 105, 122, 101, 0, 0, 253, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 103, 105, 255, 110, 103, 95, 255, 105, 109, 112, 111, 115, 255, 115, 105, 255, 98, 108, 101, 95, 109, 111, 255, 100, 255, 101, 0, 0, 0, 0, 0, 0, 249, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 37, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 343, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 344, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1008, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1454, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1454, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1008] [region_id=341]
[2019/05/01 12:38:33.095 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddLearnerNode, peer: Some(Peer { id: 1458, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=11] [term=7] [peer_id=1314] [region_id=1277]
[2019/05/01 12:38:33.095 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 8, version: 167, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddLearner] [peer_id=1314] [region_id=1277]
[2019/05/01 12:38:33.095 -07:00] [INFO] [apply.rs:1476] ["add learner successfully"] [region="Region { id: 1277, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 108, 255, 111, 99, 107, 255, 95, 119, 97, 105, 116, 255, 95, 116, 255, 105, 109, 101, 111, 117, 116, 255, 0, 255, 0, 0, 0, 0, 0, 0, 0, 247, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 108, 255, 111, 99, 107, 255, 115, 95, 117, 110, 115, 255, 97, 102, 255, 101, 95, 102, 111, 114, 95, 255, 98, 255, 105, 110, 108, 111, 103, 0, 0, 253, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 8, version: 167, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1278, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1280, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1314, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1458, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1314] [region_id=1277]
[2019/05/01 12:38:33.104 -07:00] [INFO] [peer.rs:1318] ["notify pd with change peer region"] [region="Region { id: 1277, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 108, 255, 111, 99, 107, 255, 95, 119, 97, 105, 116, 255, 95, 116, 255, 105, 109, 101, 111, 117, 116, 255, 0, 255, 0, 0, 0, 0, 0, 0, 0, 247, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 108, 255, 111, 99, 107, 255, 115, 95, 117, 110, 115, 255, 97, 102, 255, 101, 95, 102, 111, 114, 95, 255, 98, 255, 105, 110, 108, 111, 103, 0, 0, 253, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 167, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1278, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1280, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1314, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1458, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1314] [region_id=1277]
[2019/05/01 12:38:33.156 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 344, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=13] [term=7] [peer_id=1008] [region_id=341]
[2019/05/01 12:38:33.157 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 10, version: 37, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=1008] [region_id=341]
[2019/05/01 12:38:33.157 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 341, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 95, 115, 255, 116, 109, 116, 255, 95, 99, 97, 99, 104, 255, 101, 95, 255, 115, 105, 122, 101, 0, 0, 253, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 103, 105, 255, 110, 103, 95, 255, 105, 109, 112, 111, 115, 255, 115, 105, 255, 98, 108, 101, 95, 109, 111, 255, 100, 255, 101, 0, 0, 0, 0, 0, 0, 249, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 10, version: 37, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 343, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 344, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1008, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1454, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 344, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1008] [region_id=341]
[2019/05/01 12:38:33.239 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddLearnerNode, peer: Some(Peer { id: 1459, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=11] [term=7] [peer_id=328] [region_id=150]
[2019/05/01 12:38:33.239 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 5, version: 18, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddLearner] [peer_id=328] [region_id=150]
[2019/05/01 12:38:33.239 -07:00] [INFO] [apply.rs:1476] ["add learner successfully"] [region="Region { id: 150, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 114, 128, 0, 0, 0, 0, 255, 0, 234, 97, 0, 0, 0, 0, 0, 250], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 114, 128, 0, 0, 0, 0, 255, 1, 212, 193, 0, 0, 0, 0, 0, 250], region_epoch: Some(RegionEpoch { conf_ver: 5, version: 18, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 151, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 152, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 328, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1459, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=328] [region_id=150]
[2019/05/01 12:38:34.329 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_525_6_7_(default|lock|write).sst] [snap_key=525_6_7]
[2019/05/01 12:38:34.345 -07:00] [INFO] [unknown:1792] ["[region 525] 1456 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 7, term: 6]"]
[2019/05/01 12:38:34.353 -07:00] [INFO] [unknown:1816] ["[region 525] 1456 restored progress of 526 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:38:34.353 -07:00] [INFO] [unknown:1816] ["[region 525] 1456 restored progress of 527 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:38:34.353 -07:00] [INFO] [unknown:1816] ["[region 525] 1456 restored progress of 528 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:38:34.353 -07:00] [INFO] [unknown:1816] ["[region 525] 1456 restored progress of 1456 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:38:34.353 -07:00] [INFO] [unknown:474] ["[region 525] 1456 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 7, term: 6]"]
[2019/05/01 12:38:34.353 -07:00] [INFO] [unknown:1736] ["[region 525] 1456 [commit: 7] restored snapshot [index: 7, term: 6]"]
[2019/05/01 12:38:34.353 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=1456] [region_id=525]
[2019/05/01 12:38:34.353 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 7, truncated_state: Some(RaftTruncatedState { index: 7, term: 6, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 525, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 101, 118, 101, 110, 255, 116, 95, 115, 99, 255, 104, 101, 100, 255, 117, 108, 101, 114, 0, 254, 0, 0, 253], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 101, 120, 101, 99, 255, 117, 116, 101, 100, 255, 95, 103, 116, 255, 105, 100, 115, 95, 99, 255, 111, 109, 255, 112, 114, 101, 115, 115, 105, 255, 111, 255, 110, 95, 112, 101, 114, 105, 111, 255, 255, 100, 0, 0, 0, 0, 0, 0, 0, 255, 248, 0, 0, 0, 0, 0, 0, 0, 248], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 67, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 526, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 527, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 528, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1456, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1456] [region_id=525]
[2019/05/01 12:38:34.374 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 525] 1456"]
[2019/05/01 12:38:34.374 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 525, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 101, 118, 101, 110, 255, 116, 95, 115, 99, 255, 104, 101, 100, 255, 117, 108, 101, 114, 0, 254, 0, 0, 253], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 101, 120, 101, 99, 255, 117, 116, 101, 100, 255, 95, 103, 116, 255, 105, 100, 115, 95, 99, 255, 111, 109, 255, 112, 114, 101, 115, 115, 105, 255, 111, 255, 110, 95, 112, 101, 114, 105, 111, 255, 255, 100, 0, 0, 0, 0, 0, 0, 0, 255, 248, 0, 0, 0, 0, 0, 0, 0, 248], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 67, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 526, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 527, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 528, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1456, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1456] [region_id=525]
[2019/05/01 12:38:34.374 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=525]
[2019/05/01 12:38:34.390 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=16.142882ms] [region_id=525]
[2019/05/01 12:38:35.029 -07:00] [INFO] [peer_storage.rs:759] ["requesting snapshot"] [peer_id=1314] [region_id=1277]
[2019/05/01 12:38:35.030 -07:00] [INFO] [snap.rs:757] ["scan snapshot of one cf"] [size=0] [key_count=0] [cf=default] [snapshot=/opt/tidb/data/kv/snap/gen_1277_7_11_(default|lock|write).sst] [region_id=1277]
[2019/05/01 12:38:35.030 -07:00] [INFO] [snap.rs:757] ["scan snapshot of one cf"] [size=0] [key_count=0] [cf=lock] [snapshot=/opt/tidb/data/kv/snap/gen_1277_7_11_(default|lock|write).sst] [region_id=1277]
[2019/05/01 12:38:35.030 -07:00] [INFO] [snap.rs:757] ["scan snapshot of one cf"] [size=192] [key_count=2] [cf=write] [snapshot=/opt/tidb/data/kv/snap/gen_1277_7_11_(default|lock|write).sst] [region_id=1277]
[2019/05/01 12:38:35.047 -07:00] [INFO] [snap.rs:875] ["scan snapshot"] [takes=16.969097ms] [size=1467] [key_count=2] [snapshot=/opt/tidb/data/kv/snap/gen_1277_7_11_(default|lock|write).sst] [region_id=1277]
[2019/05/01 12:38:35.353 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 1456, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=8] [term=6] [peer_id=1456] [region_id=525]
[2019/05/01 12:38:35.353 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 6, version: 67, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=1456] [region_id=525]
[2019/05/01 12:38:35.353 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 525, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 101, 118, 101, 110, 255, 116, 95, 115, 99, 255, 104, 101, 100, 255, 117, 108, 101, 114, 0, 254, 0, 0, 253], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 101, 120, 101, 99, 255, 117, 116, 101, 100, 255, 95, 103, 116, 255, 105, 100, 115, 95, 99, 255, 111, 109, 255, 112, 114, 101, 115, 115, 105, 255, 111, 255, 110, 95, 112, 101, 114, 105, 111, 255, 255, 100, 0, 0, 0, 0, 0, 0, 0, 255, 248, 0, 0, 0, 0, 0, 0, 0, 248], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 67, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 526, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 527, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 528, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1456, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1456, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1456] [region_id=525]
[2019/05/01 12:38:35.420 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 528, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=9] [term=6] [peer_id=1456] [region_id=525]
[2019/05/01 12:38:35.420 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 7, version: 67, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=1456] [region_id=525]
[2019/05/01 12:38:35.420 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 525, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 101, 118, 101, 110, 255, 116, 95, 115, 99, 255, 104, 101, 100, 255, 117, 108, 101, 114, 0, 254, 0, 0, 253], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 101, 120, 101, 99, 255, 117, 116, 101, 100, 255, 95, 103, 116, 255, 105, 100, 115, 95, 99, 255, 111, 109, 255, 112, 114, 101, 115, 115, 105, 255, 111, 255, 110, 95, 112, 101, 114, 105, 111, 255, 255, 100, 0, 0, 0, 0, 0, 0, 0, 255, 248, 0, 0, 0, 0, 0, 0, 0, 248], region_epoch: Some(RegionEpoch { conf_ver: 7, version: 67, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 526, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 527, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 528, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1456, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 528, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1456] [region_id=525]
[2019/05/01 12:38:36.338 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=1460] [region_id=529]
[2019/05/01 12:38:36.338 -07:00] [INFO] [unknown:719] ["[region 529] 1460 became follower at term 0"]
[2019/05/01 12:38:36.338 -07:00] [INFO] [unknown:295] ["[region 529] 1460 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:38:36.338 -07:00] [INFO] [unknown:719] ["[region 529] 1460 became follower at term 1"]
[2019/05/01 12:38:36.338 -07:00] [INFO] [unknown:920] ["[region 529] 1460 [term: 1] received a MsgHeartbeat message with higher term from 671 [term: 7]"]
[2019/05/01 12:38:36.338 -07:00] [INFO] [unknown:719] ["[region 529] 1460 became follower at term 7"]
[2019/05/01 12:38:37.039 -07:00] [INFO] [unknown:841] ["New connected subchannel at 0x7f0412601c30 for subchannel 0x7f04cf8b8800"]
[2019/05/01 12:38:37.063 -07:00] [INFO] [snap.rs:389] ["sent snapshot"] [duration=24.65084ms] [size=1467] [snap_key=1277_7_11] [region_id=1277]
[2019/05/01 12:38:37.063 -07:00] [INFO] [peer.rs:538] ["report snapshot status"] [status=Finish] [to="Peer { id: 1458, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1314] [region_id=1277]
[2019/05/01 12:38:37.344 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 1459, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=12] [term=7] [peer_id=328] [region_id=150]
[2019/05/01 12:38:37.344 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 6, version: 18, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=328] [region_id=150]
[2019/05/01 12:38:37.344 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 150, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 114, 128, 0, 0, 0, 0, 255, 0, 234, 97, 0, 0, 0, 0, 0, 250], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 114, 128, 0, 0, 0, 0, 255, 1, 212, 193, 0, 0, 0, 0, 0, 250], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 18, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 151, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 152, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 328, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1459, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1459, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=328] [region_id=150]
[2019/05/01 12:38:37.423 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 151, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=13] [term=7] [peer_id=328] [region_id=150]
[2019/05/01 12:38:37.423 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 7, version: 18, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=328] [region_id=150]
[2019/05/01 12:38:37.423 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 150, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 114, 128, 0, 0, 0, 0, 255, 0, 234, 97, 0, 0, 0, 0, 0, 250], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 114, 128, 0, 0, 0, 0, 255, 1, 212, 193, 0, 0, 0, 0, 0, 250], region_epoch: Some(RegionEpoch { conf_ver: 7, version: 18, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 151, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 152, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 328, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1459, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 151, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=328] [region_id=150]
[2019/05/01 12:38:38.044 -07:00] [INFO] [pd.rs:558] ["try to change peer"] [peer="Peer { id: 1458, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [change_type=AddNode] [region_id=1277]
[2019/05/01 12:38:38.044 -07:00] [INFO] [peer.rs:1953] ["propose conf change peer"] [change_peer=1458] [change_type=AddNode] [peer_id=1314] [region_id=1277]
[2019/05/01 12:38:38.145 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 1458, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=12] [term=7] [peer_id=1314] [region_id=1277]
[2019/05/01 12:38:38.155 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 9, version: 167, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=1314] [region_id=1277]
[2019/05/01 12:38:38.155 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 1277, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 108, 255, 111, 99, 107, 255, 95, 119, 97, 105, 116, 255, 95, 116, 255, 105, 109, 101, 111, 117, 116, 255, 0, 255, 0, 0, 0, 0, 0, 0, 0, 247, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 108, 255, 111, 99, 107, 255, 115, 95, 117, 110, 115, 255, 97, 102, 255, 101, 95, 102, 111, 114, 95, 255, 98, 255, 105, 110, 108, 111, 103, 0, 0, 253, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 167, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1278, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1280, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1314, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1458, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1458, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1314] [region_id=1277]
[2019/05/01 12:38:38.178 -07:00] [INFO] [peer.rs:1318] ["notify pd with change peer region"] [region="Region { id: 1277, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 108, 255, 111, 99, 107, 255, 95, 119, 97, 105, 116, 255, 95, 116, 255, 105, 109, 101, 111, 117, 116, 255, 0, 255, 0, 0, 0, 0, 0, 0, 0, 247, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 108, 255, 111, 99, 107, 255, 115, 95, 117, 110, 115, 255, 97, 102, 255, 101, 95, 102, 111, 114, 95, 255, 98, 255, 105, 110, 108, 111, 103, 0, 0, 253, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 10, version: 167, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1278, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1280, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1314, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1458, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1314] [region_id=1277]
[2019/05/01 12:38:38.179 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=1461] [region_id=1293]
[2019/05/01 12:38:38.179 -07:00] [INFO] [unknown:719] ["[region 1293] 1461 became follower at term 0"]
[2019/05/01 12:38:38.179 -07:00] [INFO] [unknown:295] ["[region 1293] 1461 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:38:38.179 -07:00] [INFO] [unknown:719] ["[region 1293] 1461 became follower at term 1"]
[2019/05/01 12:38:38.179 -07:00] [INFO] [unknown:920] ["[region 1293] 1461 [term: 1] received a MsgHeartbeat message with higher term from 1296 [term: 6]"]
[2019/05/01 12:38:38.179 -07:00] [INFO] [unknown:719] ["[region 1293] 1461 became follower at term 6"]
[2019/05/01 12:38:38.211 -07:00] [INFO] [pd.rs:558] ["try to change peer"] [peer="Peer { id: 1280, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [change_type=RemoveNode] [region_id=1277]
[2019/05/01 12:38:38.211 -07:00] [INFO] [pd.rs:558] ["try to change peer"] [peer="Peer { id: 1280, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [change_type=RemoveNode] [region_id=1277]
[2019/05/01 12:38:38.211 -07:00] [INFO] [peer.rs:1953] ["propose conf change peer"] [change_peer=1280] [change_type=RemoveNode] [peer_id=1314] [region_id=1277]
[2019/05/01 12:38:38.230 -07:00] [INFO] [peer.rs:1927] ["there is a pending conf change, try later"] [peer_id=1314] [region_id=1277]
[2019/05/01 12:38:38.331 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 1280, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=13] [term=7] [peer_id=1314] [region_id=1277]
[2019/05/01 12:38:38.331 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 10, version: 167, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=1314] [region_id=1277]
[2019/05/01 12:38:38.331 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 1277, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 108, 255, 111, 99, 107, 255, 95, 119, 97, 105, 116, 255, 95, 116, 255, 105, 109, 101, 111, 117, 116, 255, 0, 255, 0, 0, 0, 0, 0, 0, 0, 247, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 108, 255, 111, 99, 107, 255, 115, 95, 117, 110, 115, 255, 97, 102, 255, 101, 95, 102, 111, 114, 95, 255, 98, 255, 105, 110, 108, 111, 103, 0, 0, 253, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 10, version: 167, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1278, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1280, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1314, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1458, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1280, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1314] [region_id=1277]
[2019/05/01 12:38:38.342 -07:00] [INFO] [peer.rs:1318] ["notify pd with change peer region"] [region="Region { id: 1277, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 108, 255, 111, 99, 107, 255, 95, 119, 97, 105, 116, 255, 95, 116, 255, 105, 109, 101, 111, 117, 116, 255, 0, 255, 0, 0, 0, 0, 0, 0, 0, 247, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 108, 255, 111, 99, 107, 255, 115, 95, 117, 110, 115, 255, 97, 102, 255, 101, 95, 102, 111, 114, 95, 255, 98, 255, 105, 110, 108, 111, 103, 0, 0, 253, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 11, version: 167, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1278, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1314, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1458, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1314] [region_id=1277]
[2019/05/01 12:38:38.342 -07:00] [INFO] [store.rs:294] ["raft message is stale, ignore it"] [msg_type=MsgAppendResponse] [current_region_epoch="RegionEpoch { conf_ver: 11, version: 167, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region_id=1277]
[2019/05/01 12:38:38.346 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_529_7_11_(default|lock|write).sst] [snap_key=529_7_11]
[2019/05/01 12:38:38.375 -07:00] [INFO] [unknown:1792] ["[region 529] 1460 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 11, term: 7]"]
[2019/05/01 12:38:38.375 -07:00] [INFO] [unknown:1816] ["[region 529] 1460 restored progress of 530 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:38:38.375 -07:00] [INFO] [unknown:1816] ["[region 529] 1460 restored progress of 532 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:38:38.375 -07:00] [INFO] [unknown:1816] ["[region 529] 1460 restored progress of 671 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:38:38.375 -07:00] [INFO] [unknown:1816] ["[region 529] 1460 restored progress of 1460 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:38:38.375 -07:00] [INFO] [unknown:474] ["[region 529] 1460 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 11, term: 7]"]
[2019/05/01 12:38:38.375 -07:00] [INFO] [unknown:1736] ["[region 529] 1460 [commit: 11] restored snapshot [index: 11, term: 7]"]
[2019/05/01 12:38:38.375 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=1460] [region_id=529]
[2019/05/01 12:38:38.375 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 11, truncated_state: Some(RaftTruncatedState { index: 11, term: 7, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 529, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 101, 120, 101, 99, 255, 117, 116, 101, 100, 255, 95, 103, 116, 255, 105, 100, 115, 95, 99, 255, 111, 109, 255, 112, 114, 101, 115, 115, 105, 255, 111, 255, 110, 95, 112, 101, 114, 105, 111, 255, 255, 100, 0, 0, 0, 0, 0, 0, 0, 255, 248, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 101, 120, 112, 105, 255, 114, 101, 95, 108, 255, 111, 103, 115, 255, 95, 100, 97, 121, 115, 255, 0, 0, 255, 0, 0, 0, 0, 0, 0, 247, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 67, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 530, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 532, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 671, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1460, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1460] [region_id=529]
[2019/05/01 12:38:38.427 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 529, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 101, 120, 101, 99, 255, 117, 116, 101, 100, 255, 95, 103, 116, 255, 105, 100, 115, 95, 99, 255, 111, 109, 255, 112, 114, 101, 115, 115, 105, 255, 111, 255, 110, 95, 112, 101, 114, 105, 111, 255, 255, 100, 0, 0, 0, 0, 0, 0, 0, 255, 248, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 101, 120, 112, 105, 255, 114, 101, 95, 108, 255, 111, 103, 115, 255, 95, 100, 97, 121, 115, 255, 0, 0, 255, 0, 0, 0, 0, 0, 0, 247, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 67, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 530, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 532, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 671, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1460, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1460] [region_id=529]
[2019/05/01 12:38:38.432 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 529] 1460"]
[2019/05/01 12:38:38.432 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=529]
[2019/05/01 12:38:38.480 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=52.973383ms] [region_id=529]
[2019/05/01 12:38:38.692 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=1462] [region_id=64]
[2019/05/01 12:38:38.692 -07:00] [INFO] [unknown:719] ["[region 64] 1462 became follower at term 0"]
[2019/05/01 12:38:38.692 -07:00] [INFO] [unknown:295] ["[region 64] 1462 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:38:38.692 -07:00] [INFO] [unknown:719] ["[region 64] 1462 became follower at term 1"]
[2019/05/01 12:38:38.692 -07:00] [INFO] [unknown:920] ["[region 64] 1462 [term: 1] received a MsgHeartbeat message with higher term from 66 [term: 8]"]
[2019/05/01 12:38:38.692 -07:00] [INFO] [unknown:719] ["[region 64] 1462 became follower at term 8"]
[2019/05/01 12:38:39.366 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 1460, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=12] [term=7] [peer_id=1460] [region_id=529]
[2019/05/01 12:38:39.366 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 9, version: 67, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=1460] [region_id=529]
[2019/05/01 12:38:39.366 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 529, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 101, 120, 101, 99, 255, 117, 116, 101, 100, 255, 95, 103, 116, 255, 105, 100, 115, 95, 99, 255, 111, 109, 255, 112, 114, 101, 115, 115, 105, 255, 111, 255, 110, 95, 112, 101, 114, 105, 111, 255, 255, 100, 0, 0, 0, 0, 0, 0, 0, 255, 248, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 101, 120, 112, 105, 255, 114, 101, 95, 108, 255, 111, 103, 115, 255, 95, 100, 97, 121, 115, 255, 0, 0, 255, 0, 0, 0, 0, 0, 0, 247, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 67, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 530, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 532, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 671, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1460, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1460, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1460] [region_id=529]
[2019/05/01 12:38:39.459 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 530, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=13] [term=7] [peer_id=1460] [region_id=529]
[2019/05/01 12:38:39.459 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 10, version: 67, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=1460] [region_id=529]
[2019/05/01 12:38:39.459 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 529, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 101, 120, 101, 99, 255, 117, 116, 101, 100, 255, 95, 103, 116, 255, 105, 100, 115, 95, 99, 255, 111, 109, 255, 112, 114, 101, 115, 115, 105, 255, 111, 255, 110, 95, 112, 101, 114, 105, 111, 255, 255, 100, 0, 0, 0, 0, 0, 0, 0, 255, 248, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 101, 120, 112, 105, 255, 114, 101, 95, 108, 255, 111, 103, 115, 255, 95, 100, 97, 121, 115, 255, 0, 0, 255, 0, 0, 0, 0, 0, 0, 247, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 10, version: 67, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 530, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 532, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 671, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1460, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 530, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1460] [region_id=529]
[2019/05/01 12:38:39.998 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=1504] [region_id=1479]
[2019/05/01 12:38:39.998 -07:00] [INFO] [unknown:719] ["[region 1479] 1504 became follower at term 0"]
[2019/05/01 12:38:39.998 -07:00] [INFO] [unknown:295] ["[region 1479] 1504 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:38:39.998 -07:00] [INFO] [unknown:719] ["[region 1479] 1504 became follower at term 1"]
[2019/05/01 12:38:39.998 -07:00] [INFO] [unknown:920] ["[region 1479] 1504 [term: 1] received a MsgHeartbeat message with higher term from 1482 [term: 6]"]
[2019/05/01 12:38:39.998 -07:00] [INFO] [unknown:719] ["[region 1479] 1504 became follower at term 6"]
[2019/05/01 12:38:40.182 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_1293_6_7_(default|lock|write).sst] [snap_key=1293_6_7]
[2019/05/01 12:38:40.209 -07:00] [INFO] [unknown:1792] ["[region 1293] 1461 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 7, term: 6]"]
[2019/05/01 12:38:40.209 -07:00] [INFO] [unknown:1816] ["[region 1293] 1461 restored progress of 1294 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:38:40.209 -07:00] [INFO] [unknown:1816] ["[region 1293] 1461 restored progress of 1295 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:38:40.209 -07:00] [INFO] [unknown:1816] ["[region 1293] 1461 restored progress of 1296 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:38:40.209 -07:00] [INFO] [unknown:1816] ["[region 1293] 1461 restored progress of 1461 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:38:40.209 -07:00] [INFO] [unknown:474] ["[region 1293] 1461 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 7, term: 6]"]
[2019/05/01 12:38:40.209 -07:00] [INFO] [unknown:1736] ["[region 1293] 1461 [commit: 7] restored snapshot [index: 7, term: 6]"]
[2019/05/01 12:38:40.209 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=1461] [region_id=1293]
[2019/05/01 12:38:40.209 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 7, truncated_state: Some(RaftTruncatedState { index: 7, term: 6, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 1293, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 108, 255, 111, 103, 95, 255, 99, 111, 109, 112, 114, 255, 101, 115, 255, 115, 101, 100, 95, 112, 97, 255, 103, 255, 101, 115, 0, 0, 0, 0, 0, 250, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 108, 255, 111, 103, 95, 255, 102, 105, 108, 101, 95, 255, 115, 105, 255, 122, 101, 0, 0, 0, 0, 251, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 167, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1294, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1295, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1296, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1461, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1461] [region_id=1293]
[2019/05/01 12:38:40.230 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 1293] 1461"]
[2019/05/01 12:38:40.230 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 1293, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 108, 255, 111, 103, 95, 255, 99, 111, 109, 112, 114, 255, 101, 115, 255, 115, 101, 100, 95, 112, 97, 255, 103, 255, 101, 115, 0, 0, 0, 0, 0, 250, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 108, 255, 111, 103, 95, 255, 102, 105, 108, 101, 95, 255, 115, 105, 255, 122, 101, 0, 0, 0, 0, 251, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 167, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1294, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1295, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1296, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1461, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1461] [region_id=1293]
[2019/05/01 12:38:40.230 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=1293]
[2019/05/01 12:38:40.257 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=26.936044ms] [region_id=1293]
[2019/05/01 12:38:40.695 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_64_8_20_(default|lock|write).sst] [snap_key=64_8_20]
[2019/05/01 12:38:40.703 -07:00] [INFO] [unknown:1792] ["[region 64] 1462 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 20, term: 8]"]
[2019/05/01 12:38:40.703 -07:00] [INFO] [unknown:1816] ["[region 64] 1462 restored progress of 65 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:38:40.703 -07:00] [INFO] [unknown:1816] ["[region 64] 1462 restored progress of 66 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:38:40.703 -07:00] [INFO] [unknown:1816] ["[region 64] 1462 restored progress of 157 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:38:40.703 -07:00] [INFO] [unknown:1816] ["[region 64] 1462 restored progress of 1462 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:38:40.703 -07:00] [INFO] [unknown:474] ["[region 64] 1462 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 20, term: 8]"]
[2019/05/01 12:38:40.703 -07:00] [INFO] [unknown:1736] ["[region 64] 1462 [commit: 20] restored snapshot [index: 20, term: 8]"]
[2019/05/01 12:38:40.703 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=1462] [region_id=64]
[2019/05/01 12:38:40.703 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 20, truncated_state: Some(RaftTruncatedState { index: 20, term: 8, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 64, start_key: [109, 66, 111, 111, 116, 115, 116, 114, 255, 97, 255, 112, 75, 101, 121, 0, 0, 255, 0, 0, 251, 0, 0, 0, 0, 0, 255, 0, 0, 115, 0, 0, 0, 0, 0, 250], end_key: [109, 68, 66, 58, 49, 0, 0, 0, 255, 0, 251, 0, 0, 0, 0, 0, 0, 255, 0, 104, 84, 97, 98, 108, 101, 58, 255, 49, 48, 255, 53, 0, 0, 0, 0, 255, 0, 0, 0, 248, 0, 0, 0, 0, 251], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 5, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 65, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 66, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 157, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1462, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1462] [region_id=64]
[2019/05/01 12:38:40.722 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 64, start_key: [109, 66, 111, 111, 116, 115, 116, 114, 255, 97, 255, 112, 75, 101, 121, 0, 0, 255, 0, 0, 251, 0, 0, 0, 0, 0, 255, 0, 0, 115, 0, 0, 0, 0, 0, 250], end_key: [109, 68, 66, 58, 49, 0, 0, 0, 255, 0, 251, 0, 0, 0, 0, 0, 0, 255, 0, 104, 84, 97, 98, 108, 101, 58, 255, 49, 48, 255, 53, 0, 0, 0, 0, 255, 0, 0, 0, 248, 0, 0, 0, 0, 251], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 5, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 65, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 66, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 157, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1462, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1462] [region_id=64]
[2019/05/01 12:38:40.722 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 64] 1462"]
[2019/05/01 12:38:40.722 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=64]
[2019/05/01 12:38:40.756 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=33.704586ms] [region_id=64]
[2019/05/01 12:38:41.203 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 1461, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=8] [term=6] [peer_id=1461] [region_id=1293]
[2019/05/01 12:38:41.203 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 6, version: 167, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=1461] [region_id=1293]
[2019/05/01 12:38:41.203 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 1293, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 108, 255, 111, 103, 95, 255, 99, 111, 109, 112, 114, 255, 101, 115, 255, 115, 101, 100, 95, 112, 97, 255, 103, 255, 101, 115, 0, 0, 0, 0, 0, 250, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 108, 255, 111, 103, 95, 255, 102, 105, 108, 101, 95, 255, 115, 105, 255, 122, 101, 0, 0, 0, 0, 251, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 167, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1294, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1295, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1296, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1461, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1461, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1461] [region_id=1293]
[2019/05/01 12:38:41.268 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 1294, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=9] [term=6] [peer_id=1461] [region_id=1293]
[2019/05/01 12:38:41.268 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 7, version: 167, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=1461] [region_id=1293]
[2019/05/01 12:38:41.269 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 1293, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 108, 255, 111, 103, 95, 255, 99, 111, 109, 112, 114, 255, 101, 115, 255, 115, 101, 100, 95, 112, 97, 255, 103, 255, 101, 115, 0, 0, 0, 0, 0, 250, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 108, 255, 111, 103, 95, 255, 102, 105, 108, 101, 95, 255, 115, 105, 255, 122, 101, 0, 0, 0, 0, 251, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 7, version: 167, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1294, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1295, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1296, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1461, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1294, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1461] [region_id=1293]
[2019/05/01 12:38:41.391 -07:00] [INFO] [unknown:1625] ["[region 1273] 1412 [term 6] received MsgTimeoutNow from 1276 and starts an election to get leadership."]
[2019/05/01 12:38:41.391 -07:00] [INFO] [unknown:739] ["[region 1273] 1412 became candidate at term 7"]
[2019/05/01 12:38:41.391 -07:00] [INFO] [unknown:854] ["[region 1273] 1412 received MsgRequestVoteResponse from 1412 at term 7"]
[2019/05/01 12:38:41.391 -07:00] [INFO] [unknown:828] ["[region 1273] 1412 [logterm: 6, index: 9] sent MsgRequestVote request to 1274 at term 7"]
[2019/05/01 12:38:41.391 -07:00] [INFO] [unknown:828] ["[region 1273] 1412 [logterm: 6, index: 9] sent MsgRequestVote request to 1276 at term 7"]
[2019/05/01 12:38:41.427 -07:00] [INFO] [unknown:854] ["[region 1273] 1412 received MsgRequestVoteResponse from 1276 at term 7"]
[2019/05/01 12:38:41.427 -07:00] [INFO] [unknown:1550] ["[region 1273] 1412 [quorum:2] has received 2 MsgRequestVoteResponse votes and 0 vote rejections"]
[2019/05/01 12:38:41.427 -07:00] [INFO] [unknown:789] ["[region 1273] 1412 became leader at term 7"]
[2019/05/01 12:38:41.467 -07:00] [INFO] [unknown:1625] ["[region 1220] 1409 [term 6] received MsgTimeoutNow from 1223 and starts an election to get leadership."]
[2019/05/01 12:38:41.467 -07:00] [INFO] [unknown:739] ["[region 1220] 1409 became candidate at term 7"]
[2019/05/01 12:38:41.467 -07:00] [INFO] [unknown:854] ["[region 1220] 1409 received MsgRequestVoteResponse from 1409 at term 7"]
[2019/05/01 12:38:41.467 -07:00] [INFO] [unknown:828] ["[region 1220] 1409 [logterm: 6, index: 9] sent MsgRequestVote request to 1221 at term 7"]
[2019/05/01 12:38:41.467 -07:00] [INFO] [unknown:828] ["[region 1220] 1409 [logterm: 6, index: 9] sent MsgRequestVote request to 1223 at term 7"]
[2019/05/01 12:38:41.500 -07:00] [INFO] [unknown:854] ["[region 1220] 1409 received MsgRequestVoteResponse from 1223 at term 7"]
[2019/05/01 12:38:41.500 -07:00] [INFO] [unknown:1550] ["[region 1220] 1409 [quorum:2] has received 2 MsgRequestVoteResponse votes and 0 vote rejections"]
[2019/05/01 12:38:41.500 -07:00] [INFO] [unknown:789] ["[region 1220] 1409 became leader at term 7"]
[2019/05/01 12:38:41.721 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 1462, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=21] [term=8] [peer_id=1462] [region_id=64]
[2019/05/01 12:38:41.721 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 6, version: 5, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=1462] [region_id=64]
[2019/05/01 12:38:41.721 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 64, start_key: [109, 66, 111, 111, 116, 115, 116, 114, 255, 97, 255, 112, 75, 101, 121, 0, 0, 255, 0, 0, 251, 0, 0, 0, 0, 0, 255, 0, 0, 115, 0, 0, 0, 0, 0, 250], end_key: [109, 68, 66, 58, 49, 0, 0, 0, 255, 0, 251, 0, 0, 0, 0, 0, 0, 255, 0, 104, 84, 97, 98, 108, 101, 58, 255, 49, 48, 255, 53, 0, 0, 0, 0, 255, 0, 0, 0, 248, 0, 0, 0, 0, 251], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 5, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 65, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 66, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 157, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1462, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1462, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1462] [region_id=64]
[2019/05/01 12:38:41.810 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 65, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=22] [term=8] [peer_id=1462] [region_id=64]
[2019/05/01 12:38:41.810 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 7, version: 5, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=1462] [region_id=64]
[2019/05/01 12:38:41.810 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 64, start_key: [109, 66, 111, 111, 116, 115, 116, 114, 255, 97, 255, 112, 75, 101, 121, 0, 0, 255, 0, 0, 251, 0, 0, 0, 0, 0, 255, 0, 0, 115, 0, 0, 0, 0, 0, 250], end_key: [109, 68, 66, 58, 49, 0, 0, 0, 255, 0, 251, 0, 0, 0, 0, 0, 0, 255, 0, 104, 84, 97, 98, 108, 101, 58, 255, 49, 48, 255, 53, 0, 0, 0, 0, 255, 0, 0, 0, 248, 0, 0, 0, 0, 251], region_epoch: Some(RegionEpoch { conf_ver: 7, version: 5, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 65, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 66, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 157, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1462, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 65, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1462] [region_id=64]
[2019/05/01 12:38:42.002 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_1479_6_7_(default|lock|write).sst] [snap_key=1479_6_7]
[2019/05/01 12:38:42.008 -07:00] [INFO] [unknown:1792] ["[region 1479] 1504 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 7, term: 6]"]
[2019/05/01 12:38:42.008 -07:00] [INFO] [unknown:1816] ["[region 1479] 1504 restored progress of 1480 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:38:42.008 -07:00] [INFO] [unknown:1816] ["[region 1479] 1504 restored progress of 1481 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:38:42.008 -07:00] [INFO] [unknown:1816] ["[region 1479] 1504 restored progress of 1482 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:38:42.008 -07:00] [INFO] [unknown:1816] ["[region 1479] 1504 restored progress of 1504 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:38:42.008 -07:00] [INFO] [unknown:474] ["[region 1479] 1504 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 7, term: 6]"]
[2019/05/01 12:38:42.008 -07:00] [INFO] [unknown:1736] ["[region 1479] 1504 [commit: 7] restored snapshot [index: 7, term: 6]"]
[2019/05/01 12:38:42.008 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=1504] [region_id=1479]
[2019/05/01 12:38:42.008 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 7, truncated_state: Some(RaftTruncatedState { index: 7, term: 6, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 1479, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 115, 255, 116, 97, 116, 255, 115, 95, 111, 110, 95, 255, 109, 101, 255, 116, 97, 100, 97, 116, 97, 255, 0, 255, 0, 0, 0, 0, 0, 0, 0, 247, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 115, 255, 116, 97, 116, 255, 115, 95, 112, 101, 114, 255, 115, 105, 255, 115, 116, 101, 110, 116, 0, 254, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 207, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1480, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1481, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1482, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1504, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1504] [region_id=1479]
[2019/05/01 12:38:42.033 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 1479] 1504"]
[2019/05/01 12:38:42.033 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=1479]
[2019/05/01 12:38:42.033 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 1479, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 115, 255, 116, 97, 116, 255, 115, 95, 111, 110, 95, 255, 109, 101, 255, 116, 97, 100, 97, 116, 97, 255, 0, 255, 0, 0, 0, 0, 0, 0, 0, 247, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 115, 255, 116, 97, 116, 255, 115, 95, 112, 101, 114, 255, 115, 105, 255, 115, 116, 101, 110, 116, 0, 254, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 207, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1480, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1481, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1482, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1504, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1504] [region_id=1479]
[2019/05/01 12:38:42.057 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=23.399584ms] [region_id=1479]
[2019/05/01 12:38:42.312 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=1506] [region_id=590]
[2019/05/01 12:38:42.312 -07:00] [INFO] [unknown:719] ["[region 590] 1506 became follower at term 0"]
[2019/05/01 12:38:42.312 -07:00] [INFO] [unknown:295] ["[region 590] 1506 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:38:42.312 -07:00] [INFO] [unknown:719] ["[region 590] 1506 became follower at term 1"]
[2019/05/01 12:38:42.312 -07:00] [INFO] [unknown:920] ["[region 590] 1506 [term: 1] received a MsgHeartbeat message with higher term from 591 [term: 6]"]
[2019/05/01 12:38:42.312 -07:00] [INFO] [unknown:719] ["[region 590] 1506 became follower at term 6"]
[2019/05/01 12:38:43.050 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 1504, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=8] [term=6] [peer_id=1504] [region_id=1479]
[2019/05/01 12:38:43.050 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 6, version: 207, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=1504] [region_id=1479]
[2019/05/01 12:38:43.050 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 1479, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 115, 255, 116, 97, 116, 255, 115, 95, 111, 110, 95, 255, 109, 101, 255, 116, 97, 100, 97, 116, 97, 255, 0, 255, 0, 0, 0, 0, 0, 0, 0, 247, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 115, 255, 116, 97, 116, 255, 115, 95, 112, 101, 114, 255, 115, 105, 255, 115, 116, 101, 110, 116, 0, 254, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 207, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1480, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1481, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1482, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1504, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1504, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1504] [region_id=1479]
[2019/05/01 12:38:43.153 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 1480, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=9] [term=6] [peer_id=1504] [region_id=1479]
[2019/05/01 12:38:43.153 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 7, version: 207, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=1504] [region_id=1479]
[2019/05/01 12:38:43.153 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 1479, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 115, 255, 116, 97, 116, 255, 115, 95, 111, 110, 95, 255, 109, 101, 255, 116, 97, 100, 97, 116, 97, 255, 0, 255, 0, 0, 0, 0, 0, 0, 0, 247, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 115, 255, 116, 97, 116, 255, 115, 95, 112, 101, 114, 255, 115, 105, 255, 115, 116, 101, 110, 116, 0, 254, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 7, version: 207, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1480, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1481, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1482, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1504, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1480, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1504] [region_id=1479]
[2019/05/01 12:38:44.225 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=1508] [region_id=1079]
[2019/05/01 12:38:44.225 -07:00] [INFO] [unknown:719] ["[region 1079] 1508 became follower at term 0"]
[2019/05/01 12:38:44.225 -07:00] [INFO] [unknown:295] ["[region 1079] 1508 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:38:44.225 -07:00] [INFO] [unknown:719] ["[region 1079] 1508 became follower at term 1"]
[2019/05/01 12:38:44.225 -07:00] [INFO] [unknown:920] ["[region 1079] 1508 [term: 1] received a MsgHeartbeat message with higher term from 1082 [term: 6]"]
[2019/05/01 12:38:44.225 -07:00] [INFO] [unknown:719] ["[region 1079] 1508 became follower at term 6"]
[2019/05/01 12:38:44.337 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_590_6_7_(default|lock|write).sst] [snap_key=590_6_7]
[2019/05/01 12:38:44.352 -07:00] [INFO] [unknown:1792] ["[region 590] 1506 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 7, term: 6]"]
[2019/05/01 12:38:44.352 -07:00] [INFO] [unknown:1816] ["[region 590] 1506 restored progress of 591 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:38:44.352 -07:00] [INFO] [unknown:1816] ["[region 590] 1506 restored progress of 592 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:38:44.352 -07:00] [INFO] [unknown:1816] ["[region 590] 1506 restored progress of 593 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:38:44.352 -07:00] [INFO] [unknown:1816] ["[region 590] 1506 restored progress of 1506 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:38:44.352 -07:00] [INFO] [unknown:474] ["[region 590] 1506 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 7, term: 6]"]
[2019/05/01 12:38:44.352 -07:00] [INFO] [unknown:1736] ["[region 590] 1506 [commit: 7] restored snapshot [index: 7, term: 6]"]
[2019/05/01 12:38:44.352 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=1506] [region_id=590]
[2019/05/01 12:38:44.352 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 7, truncated_state: Some(RaftTruncatedState { index: 7, term: 6, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 590, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 102, 108, 117, 115, 255, 104, 0, 0, 0, 252, 0, 0, 0, 252], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 102, 108, 117, 115, 255, 104, 95, 116, 105, 255, 109, 101, 0, 255, 0, 0, 0, 0, 0, 249, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 77, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 591, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 592, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 593, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1506, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1506] [region_id=590]
[2019/05/01 12:38:44.413 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 590, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 102, 108, 117, 115, 255, 104, 0, 0, 0, 252, 0, 0, 0, 252], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 102, 108, 117, 115, 255, 104, 95, 116, 105, 255, 109, 101, 0, 255, 0, 0, 0, 0, 0, 249, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 77, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 591, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 592, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 593, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1506, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1506] [region_id=590]
[2019/05/01 12:38:44.413 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 590] 1506"]
[2019/05/01 12:38:44.413 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=590]
[2019/05/01 12:38:44.479 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=66.001216ms] [region_id=590]
[2019/05/01 12:38:45.385 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 1506, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=8] [term=6] [peer_id=1506] [region_id=590]
[2019/05/01 12:38:45.385 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 6, version: 77, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=1506] [region_id=590]
[2019/05/01 12:38:45.385 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 590, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 102, 108, 117, 115, 255, 104, 0, 0, 0, 252, 0, 0, 0, 252], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 102, 108, 117, 115, 255, 104, 95, 116, 105, 255, 109, 101, 0, 255, 0, 0, 0, 0, 0, 249, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 77, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 591, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 592, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 593, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1506, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1506, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1506] [region_id=590]
[2019/05/01 12:38:45.567 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 592, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=9] [term=6] [peer_id=1506] [region_id=590]
[2019/05/01 12:38:45.572 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 7, version: 77, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=1506] [region_id=590]
[2019/05/01 12:38:45.572 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 590, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 102, 108, 117, 115, 255, 104, 0, 0, 0, 252, 0, 0, 0, 252], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 102, 108, 117, 115, 255, 104, 95, 116, 105, 255, 109, 101, 0, 255, 0, 0, 0, 0, 0, 249, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 7, version: 77, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 591, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 592, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 593, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1506, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 592, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1506] [region_id=590]
[2019/05/01 12:38:46.228 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_1079_6_7_(default|lock|write).sst] [snap_key=1079_6_7]
[2019/05/01 12:38:46.250 -07:00] [INFO] [unknown:1792] ["[region 1079] 1508 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 7, term: 6]"]
[2019/05/01 12:38:46.250 -07:00] [INFO] [unknown:1816] ["[region 1079] 1508 restored progress of 1080 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:38:46.250 -07:00] [INFO] [unknown:1816] ["[region 1079] 1508 restored progress of 1081 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:38:46.250 -07:00] [INFO] [unknown:1816] ["[region 1079] 1508 restored progress of 1082 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:38:46.250 -07:00] [INFO] [unknown:1816] ["[region 1079] 1508 restored progress of 1508 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:38:46.250 -07:00] [INFO] [unknown:474] ["[region 1079] 1508 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 7, term: 6]"]
[2019/05/01 12:38:46.250 -07:00] [INFO] [unknown:1736] ["[region 1079] 1508 [commit: 7] restored snapshot [index: 7, term: 6]"]
[2019/05/01 12:38:46.250 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=1508] [region_id=1079]
[2019/05/01 12:38:46.250 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 7, truncated_state: Some(RaftTruncatedState { index: 7, term: 6, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 1079, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 99, 255, 109, 112, 95, 255, 112, 101, 114, 95, 105, 255, 110, 100, 255, 101, 120, 95, 101, 110, 97, 255, 98, 255, 108, 101, 100, 0, 0, 0, 0, 251, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 99, 255, 111, 109, 109, 255, 105, 116, 95, 99, 111, 255, 110, 99, 255, 117, 114, 114, 101, 110, 99, 255, 121, 255, 0, 0, 0, 0, 0, 0, 0, 248, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 127, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1080, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1081, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1082, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1508, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1508] [region_id=1079]
[2019/05/01 12:38:46.298 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 1079, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 99, 255, 109, 112, 95, 255, 112, 101, 114, 95, 105, 255, 110, 100, 255, 101, 120, 95, 101, 110, 97, 255, 98, 255, 108, 101, 100, 0, 0, 0, 0, 251, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 99, 255, 111, 109, 109, 255, 105, 116, 95, 99, 111, 255, 110, 99, 255, 117, 114, 114, 101, 110, 99, 255, 121, 255, 0, 0, 0, 0, 0, 0, 0, 248, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 127, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1080, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1081, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1082, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1508, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1508] [region_id=1079]
[2019/05/01 12:38:46.298 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 1079] 1508"]
[2019/05/01 12:38:46.298 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=1079]
[2019/05/01 12:38:46.344 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=45.959359ms] [region_id=1079]
[2019/05/01 12:38:46.976 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=1510] [region_id=1269]
[2019/05/01 12:38:46.979 -07:00] [INFO] [unknown:719] ["[region 1269] 1510 became follower at term 0"]
[2019/05/01 12:38:46.979 -07:00] [INFO] [unknown:295] ["[region 1269] 1510 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:38:46.979 -07:00] [INFO] [unknown:719] ["[region 1269] 1510 became follower at term 1"]
[2019/05/01 12:38:46.979 -07:00] [INFO] [unknown:920] ["[region 1269] 1510 [term: 1] received a MsgHeartbeat message with higher term from 1271 [term: 7]"]
[2019/05/01 12:38:46.979 -07:00] [INFO] [unknown:719] ["[region 1269] 1510 became follower at term 7"]
[2019/05/01 12:38:47.077 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddLearnerNode, peer: Some(Peer { id: 1511, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=11] [term=7] [peer_id=1104] [region_id=349]
[2019/05/01 12:38:47.077 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 8, version: 37, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddLearner] [peer_id=1104] [region_id=349]
[2019/05/01 12:38:47.077 -07:00] [INFO] [apply.rs:1476] ["add learner successfully"] [region="Region { id: 349, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 108, 111, 99, 255, 107, 95, 101, 110, 255, 99, 114, 121, 255, 112, 116, 105, 111, 110, 255, 95, 109, 255, 111, 100, 101, 0, 0, 0, 252, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 117, 108, 107, 255, 95, 105, 110, 115, 255, 101, 114, 116, 255, 95, 98, 117, 102, 102, 255, 101, 114, 255, 95, 115, 105, 122, 101, 0, 254, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 8, version: 37, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 351, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 352, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1104, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1511, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1104] [region_id=349]
[2019/05/01 12:38:47.247 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 1508, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=8] [term=6] [peer_id=1508] [region_id=1079]
[2019/05/01 12:38:47.247 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 6, version: 127, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=1508] [region_id=1079]
[2019/05/01 12:38:47.247 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 1079, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 99, 255, 109, 112, 95, 255, 112, 101, 114, 95, 105, 255, 110, 100, 255, 101, 120, 95, 101, 110, 97, 255, 98, 255, 108, 101, 100, 0, 0, 0, 0, 251, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 99, 255, 111, 109, 109, 255, 105, 116, 95, 99, 111, 255, 110, 99, 255, 117, 114, 114, 101, 110, 99, 255, 121, 255, 0, 0, 0, 0, 0, 0, 0, 248, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 127, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1080, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1081, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1082, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1508, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1508, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1508] [region_id=1079]
[2019/05/01 12:38:47.315 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 1081, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=9] [term=6] [peer_id=1508] [region_id=1079]
[2019/05/01 12:38:47.315 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 7, version: 127, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=1508] [region_id=1079]
[2019/05/01 12:38:47.315 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 1079, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 99, 255, 109, 112, 95, 255, 112, 101, 114, 95, 105, 255, 110, 100, 255, 101, 120, 95, 101, 110, 97, 255, 98, 255, 108, 101, 100, 0, 0, 0, 0, 251, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 99, 255, 111, 109, 109, 255, 105, 116, 95, 99, 111, 255, 110, 99, 255, 117, 114, 114, 101, 110, 99, 255, 121, 255, 0, 0, 0, 0, 0, 0, 0, 248, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 7, version: 127, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1080, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1081, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1082, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1508, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1081, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1508] [region_id=1079]
[2019/05/01 12:38:47.347 -07:00] [INFO] [pd.rs:558] ["try to change peer"] [peer="Peer { id: 1512, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [change_type=AddLearnerNode] [region_id=1063]
[2019/05/01 12:38:47.347 -07:00] [INFO] [peer.rs:1953] ["propose conf change peer"] [change_peer=1512] [change_type=AddLearnerNode] [peer_id=1407] [region_id=1063]
[2019/05/01 12:38:47.410 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddLearnerNode, peer: Some(Peer { id: 1512, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=11] [term=7] [peer_id=1407] [region_id=1063]
[2019/05/01 12:38:47.410 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 8, version: 127, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddLearner] [peer_id=1407] [region_id=1063]
[2019/05/01 12:38:47.410 -07:00] [INFO] [apply.rs:1476] ["add learner successfully"] [region="Region { id: 1063, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 99, 255, 104, 97, 110, 255, 103, 101, 95, 98, 117, 255, 102, 102, 255, 101, 114, 95, 109, 97, 120, 255, 95, 255, 115, 105, 122, 101, 0, 0, 0, 252, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 99, 255, 104, 97, 110, 255, 103, 101, 95, 98, 117, 255, 102, 102, 255, 101, 114, 105, 110, 103, 0, 254, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 8, version: 127, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1064, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1066, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1407, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1512, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1407] [region_id=1063]
[2019/05/01 12:38:47.417 -07:00] [INFO] [peer.rs:1318] ["notify pd with change peer region"] [region="Region { id: 1063, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 99, 255, 104, 97, 110, 255, 103, 101, 95, 98, 117, 255, 102, 102, 255, 101, 114, 95, 109, 97, 120, 255, 95, 255, 115, 105, 122, 101, 0, 0, 0, 252, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 99, 255, 104, 97, 110, 255, 103, 101, 95, 98, 117, 255, 102, 102, 255, 101, 114, 105, 110, 103, 0, 254, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 127, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1064, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1066, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1407, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1512, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1407] [region_id=1063]
[2019/05/01 12:38:48.180 -07:00] [INFO] [unknown:1625] ["[region 1293] 1461 [term 6] received MsgTimeoutNow from 1296 and starts an election to get leadership."]
[2019/05/01 12:38:48.197 -07:00] [INFO] [unknown:739] ["[region 1293] 1461 became candidate at term 7"]
[2019/05/01 12:38:48.197 -07:00] [INFO] [unknown:854] ["[region 1293] 1461 received MsgRequestVoteResponse from 1461 at term 7"]
[2019/05/01 12:38:48.197 -07:00] [INFO] [unknown:828] ["[region 1293] 1461 [logterm: 6, index: 9] sent MsgRequestVote request to 1296 at term 7"]
[2019/05/01 12:38:48.197 -07:00] [INFO] [unknown:828] ["[region 1293] 1461 [logterm: 6, index: 9] sent MsgRequestVote request to 1295 at term 7"]
[2019/05/01 12:38:48.258 -07:00] [INFO] [unknown:854] ["[region 1293] 1461 received MsgRequestVoteResponse from 1296 at term 7"]
[2019/05/01 12:38:48.258 -07:00] [INFO] [unknown:1550] ["[region 1293] 1461 [quorum:2] has received 2 MsgRequestVoteResponse votes and 0 vote rejections"]
[2019/05/01 12:38:48.258 -07:00] [INFO] [unknown:789] ["[region 1293] 1461 became leader at term 7"]
[2019/05/01 12:38:48.425 -07:00] [INFO] [unknown:1625] ["[region 1479] 1504 [term 6] received MsgTimeoutNow from 1482 and starts an election to get leadership."]
[2019/05/01 12:38:48.425 -07:00] [INFO] [unknown:739] ["[region 1479] 1504 became candidate at term 7"]
[2019/05/01 12:38:48.425 -07:00] [INFO] [unknown:854] ["[region 1479] 1504 received MsgRequestVoteResponse from 1504 at term 7"]
[2019/05/01 12:38:48.425 -07:00] [INFO] [unknown:828] ["[region 1479] 1504 [logterm: 6, index: 9] sent MsgRequestVote request to 1482 at term 7"]
[2019/05/01 12:38:48.425 -07:00] [INFO] [unknown:828] ["[region 1479] 1504 [logterm: 6, index: 9] sent MsgRequestVote request to 1481 at term 7"]
[2019/05/01 12:38:48.475 -07:00] [INFO] [unknown:854] ["[region 1479] 1504 received MsgRequestVoteResponse from 1481 at term 7"]
[2019/05/01 12:38:48.475 -07:00] [INFO] [unknown:1550] ["[region 1479] 1504 [quorum:2] has received 2 MsgRequestVoteResponse votes and 0 vote rejections"]
[2019/05/01 12:38:48.475 -07:00] [INFO] [unknown:789] ["[region 1479] 1504 became leader at term 7"]
[2019/05/01 12:38:48.979 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_1269_7_8_(default|lock|write).sst] [snap_key=1269_7_8]
[2019/05/01 12:38:48.997 -07:00] [INFO] [unknown:1792] ["[region 1269] 1510 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 8, term: 7]"]
[2019/05/01 12:38:48.997 -07:00] [INFO] [unknown:1816] ["[region 1269] 1510 restored progress of 1270 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:38:48.997 -07:00] [INFO] [unknown:1816] ["[region 1269] 1510 restored progress of 1271 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:38:48.997 -07:00] [INFO] [unknown:1816] ["[region 1269] 1510 restored progress of 1272 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:38:48.997 -07:00] [INFO] [unknown:1816] ["[region 1269] 1510 restored progress of 1510 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:38:48.997 -07:00] [INFO] [unknown:474] ["[region 1269] 1510 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 8, term: 7]"]
[2019/05/01 12:38:48.997 -07:00] [INFO] [unknown:1736] ["[region 1269] 1510 [commit: 8] restored snapshot [index: 8, term: 7]"]
[2019/05/01 12:38:48.997 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=1510] [region_id=1269]
[2019/05/01 12:38:48.997 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 8, truncated_state: Some(RaftTruncatedState { index: 8, term: 7, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 1269, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 105, 255, 111, 95, 99, 255, 97, 112, 97, 99, 105, 255, 116, 121, 255, 95, 109, 97, 120, 0, 0, 253, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 108, 255, 97, 114, 103, 255, 101, 95, 112, 114, 101, 255, 102, 105, 255, 120, 0, 0, 0, 0, 0, 250, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 167, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1270, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1271, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1272, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1510, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1510] [region_id=1269]
[2019/05/01 12:38:49.045 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 1269, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 105, 255, 111, 95, 99, 255, 97, 112, 97, 99, 105, 255, 116, 121, 255, 95, 109, 97, 120, 0, 0, 253, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 108, 255, 97, 114, 103, 255, 101, 95, 112, 114, 101, 255, 102, 105, 255, 120, 0, 0, 0, 0, 0, 250, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 167, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1270, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1271, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1272, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1510, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1510] [region_id=1269]
[2019/05/01 12:38:49.045 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 1269] 1510"]
[2019/05/01 12:38:49.045 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=1269]
[2019/05/01 12:38:49.090 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=44.714419ms] [region_id=1269]
[2019/05/01 12:38:49.185 -07:00] [INFO] [peer_storage.rs:759] ["requesting snapshot"] [peer_id=1407] [region_id=1063]
[2019/05/01 12:38:49.186 -07:00] [INFO] [snap.rs:757] ["scan snapshot of one cf"] [size=0] [key_count=0] [cf=default] [snapshot=/opt/tidb/data/kv/snap/gen_1063_7_11_(default|lock|write).sst] [region_id=1063]
[2019/05/01 12:38:49.186 -07:00] [INFO] [snap.rs:757] ["scan snapshot of one cf"] [size=0] [key_count=0] [cf=lock] [snapshot=/opt/tidb/data/kv/snap/gen_1063_7_11_(default|lock|write).sst] [region_id=1063]
[2019/05/01 12:38:49.186 -07:00] [INFO] [snap.rs:757] ["scan snapshot of one cf"] [size=192] [key_count=2] [cf=write] [snapshot=/opt/tidb/data/kv/snap/gen_1063_7_11_(default|lock|write).sst] [region_id=1063]
[2019/05/01 12:38:49.211 -07:00] [INFO] [snap.rs:875] ["scan snapshot"] [takes=25.589489ms] [size=1487] [key_count=2] [snapshot=/opt/tidb/data/kv/snap/gen_1063_7_11_(default|lock|write).sst] [region_id=1063]
[2019/05/01 12:38:50.063 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 1510, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=9] [term=7] [peer_id=1510] [region_id=1269]
[2019/05/01 12:38:50.063 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 6, version: 167, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=1510] [region_id=1269]
[2019/05/01 12:38:50.063 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 1269, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 105, 255, 111, 95, 99, 255, 97, 112, 97, 99, 105, 255, 116, 121, 255, 95, 109, 97, 120, 0, 0, 253, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 108, 255, 97, 114, 103, 255, 101, 95, 112, 114, 101, 255, 102, 105, 255, 120, 0, 0, 0, 0, 0, 250, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 167, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1270, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1271, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1272, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1510, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1510, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1510] [region_id=1269]
[2019/05/01 12:38:50.214 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 1272, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=10] [term=7] [peer_id=1510] [region_id=1269]
[2019/05/01 12:38:50.214 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 7, version: 167, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=1510] [region_id=1269]
[2019/05/01 12:38:50.214 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 1269, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 105, 255, 111, 95, 99, 255, 97, 112, 97, 99, 105, 255, 116, 121, 255, 95, 109, 97, 120, 0, 0, 253, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 108, 255, 97, 114, 103, 255, 101, 95, 112, 114, 101, 255, 102, 105, 255, 120, 0, 0, 0, 0, 0, 250, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 7, version: 167, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1270, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1271, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1272, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1510, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1272, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1510] [region_id=1269]
[2019/05/01 12:38:50.380 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=1553] [region_id=18]
[2019/05/01 12:38:50.385 -07:00] [INFO] [unknown:719] ["[region 18] 1553 became follower at term 0"]
[2019/05/01 12:38:50.385 -07:00] [INFO] [unknown:295] ["[region 18] 1553 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:38:50.385 -07:00] [INFO] [unknown:719] ["[region 18] 1553 became follower at term 1"]
[2019/05/01 12:38:50.385 -07:00] [INFO] [unknown:920] ["[region 18] 1553 [term: 1] received a MsgHeartbeat message with higher term from 49 [term: 7]"]
[2019/05/01 12:38:50.385 -07:00] [INFO] [unknown:719] ["[region 18] 1553 became follower at term 7"]
[2019/05/01 12:38:50.971 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 1511, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=12] [term=7] [peer_id=1104] [region_id=349]
[2019/05/01 12:38:50.971 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 9, version: 37, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=1104] [region_id=349]
[2019/05/01 12:38:50.971 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 349, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 108, 111, 99, 255, 107, 95, 101, 110, 255, 99, 114, 121, 255, 112, 116, 105, 111, 110, 255, 95, 109, 255, 111, 100, 101, 0, 0, 0, 252, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 117, 108, 107, 255, 95, 105, 110, 115, 255, 101, 114, 116, 255, 95, 98, 117, 102, 102, 255, 101, 114, 255, 95, 115, 105, 122, 101, 0, 254, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 37, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 351, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 352, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1104, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1511, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1511, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1104] [region_id=349]
[2019/05/01 12:38:51.005 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 352, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=13] [term=7] [peer_id=1104] [region_id=349]
[2019/05/01 12:38:51.005 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 10, version: 37, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=1104] [region_id=349]
[2019/05/01 12:38:51.005 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 349, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 108, 111, 99, 255, 107, 95, 101, 110, 255, 99, 114, 121, 255, 112, 116, 105, 111, 110, 255, 95, 109, 255, 111, 100, 101, 0, 0, 0, 252, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 117, 108, 107, 255, 95, 105, 110, 115, 255, 101, 114, 116, 255, 95, 98, 117, 102, 102, 255, 101, 114, 255, 95, 115, 105, 122, 101, 0, 254, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 10, version: 37, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 351, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 352, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1104, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1511, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 352, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1104] [region_id=349]
[2019/05/01 12:38:51.194 -07:00] [INFO] [unknown:841] ["New connected subchannel at 0x7f0412601f90 for subchannel 0x7f04cf8b8a00"]
[2019/05/01 12:38:51.206 -07:00] [INFO] [snap.rs:389] ["sent snapshot"] [duration=12.558776ms] [size=1487] [snap_key=1063_7_11] [region_id=1063]
[2019/05/01 12:38:51.206 -07:00] [INFO] [peer.rs:538] ["report snapshot status"] [status=Finish] [to="Peer { id: 1512, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1407] [region_id=1063]
[2019/05/01 12:38:51.469 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=1554] [region_id=321]
[2019/05/01 12:38:51.469 -07:00] [INFO] [unknown:719] ["[region 321] 1554 became follower at term 0"]
[2019/05/01 12:38:51.469 -07:00] [INFO] [unknown:295] ["[region 321] 1554 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:38:51.469 -07:00] [INFO] [unknown:719] ["[region 321] 1554 became follower at term 1"]
[2019/05/01 12:38:51.469 -07:00] [INFO] [unknown:920] ["[region 321] 1554 [term: 1] received a MsgHeartbeat message with higher term from 442 [term: 7]"]
[2019/05/01 12:38:51.469 -07:00] [INFO] [unknown:719] ["[region 321] 1554 became follower at term 7"]
[2019/05/01 12:38:52.188 -07:00] [INFO] [pd.rs:558] ["try to change peer"] [peer="Peer { id: 1512, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [change_type=AddNode] [region_id=1063]
[2019/05/01 12:38:52.188 -07:00] [INFO] [peer.rs:1953] ["propose conf change peer"] [change_peer=1512] [change_type=AddNode] [peer_id=1407] [region_id=1063]
[2019/05/01 12:38:52.203 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 1512, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=12] [term=7] [peer_id=1407] [region_id=1063]
[2019/05/01 12:38:52.203 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 9, version: 127, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=1407] [region_id=1063]
[2019/05/01 12:38:52.203 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 1063, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 99, 255, 104, 97, 110, 255, 103, 101, 95, 98, 117, 255, 102, 102, 255, 101, 114, 95, 109, 97, 120, 255, 95, 255, 115, 105, 122, 101, 0, 0, 0, 252, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 99, 255, 104, 97, 110, 255, 103, 101, 95, 98, 117, 255, 102, 102, 255, 101, 114, 105, 110, 103, 0, 254, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 127, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1064, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1066, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1407, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1512, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1512, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1407] [region_id=1063]
[2019/05/01 12:38:52.219 -07:00] [INFO] [peer.rs:1318] ["notify pd with change peer region"] [region="Region { id: 1063, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 99, 255, 104, 97, 110, 255, 103, 101, 95, 98, 117, 255, 102, 102, 255, 101, 114, 95, 109, 97, 120, 255, 95, 255, 115, 105, 122, 101, 0, 0, 0, 252, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 99, 255, 104, 97, 110, 255, 103, 101, 95, 98, 117, 255, 102, 102, 255, 101, 114, 105, 110, 103, 0, 254, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 10, version: 127, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1064, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1066, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1407, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1512, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1407] [region_id=1063]
[2019/05/01 12:38:52.227 -07:00] [INFO] [pd.rs:558] ["try to change peer"] [peer="Peer { id: 1066, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [change_type=RemoveNode] [region_id=1063]
[2019/05/01 12:38:52.227 -07:00] [INFO] [peer.rs:1953] ["propose conf change peer"] [change_peer=1066] [change_type=RemoveNode] [peer_id=1407] [region_id=1063]
[2019/05/01 12:38:52.245 -07:00] [INFO] [pd.rs:558] ["try to change peer"] [peer="Peer { id: 1066, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [change_type=RemoveNode] [region_id=1063]
[2019/05/01 12:38:52.265 -07:00] [INFO] [peer.rs:1927] ["there is a pending conf change, try later"] [peer_id=1407] [region_id=1063]
[2019/05/01 12:38:52.265 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 1066, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=13] [term=7] [peer_id=1407] [region_id=1063]
[2019/05/01 12:38:52.265 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 10, version: 127, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=1407] [region_id=1063]
[2019/05/01 12:38:52.265 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 1063, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 99, 255, 104, 97, 110, 255, 103, 101, 95, 98, 117, 255, 102, 102, 255, 101, 114, 95, 109, 97, 120, 255, 95, 255, 115, 105, 122, 101, 0, 0, 0, 252, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 99, 255, 104, 97, 110, 255, 103, 101, 95, 98, 117, 255, 102, 102, 255, 101, 114, 105, 110, 103, 0, 254, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 10, version: 127, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1064, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1066, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1407, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1512, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1066, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1407] [region_id=1063]
[2019/05/01 12:38:52.278 -07:00] [INFO] [peer.rs:1318] ["notify pd with change peer region"] [region="Region { id: 1063, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 99, 255, 104, 97, 110, 255, 103, 101, 95, 98, 117, 255, 102, 102, 255, 101, 114, 95, 109, 97, 120, 255, 95, 255, 115, 105, 122, 101, 0, 0, 0, 252, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 99, 255, 104, 97, 110, 255, 103, 101, 95, 98, 117, 255, 102, 102, 255, 101, 114, 105, 110, 103, 0, 254, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 11, version: 127, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1064, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1407, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1512, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1407] [region_id=1063]
[2019/05/01 12:38:52.301 -07:00] [INFO] [pd.rs:558] ["try to change peer"] [peer="Peer { id: 1556, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [change_type=AddLearnerNode] [region_id=99]
[2019/05/01 12:38:52.301 -07:00] [INFO] [peer.rs:1953] ["propose conf change peer"] [change_peer=1556] [change_type=AddLearnerNode] [peer_id=170] [region_id=99]
[2019/05/01 12:38:52.324 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=1555] [region_id=30]
[2019/05/01 12:38:52.324 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddLearnerNode, peer: Some(Peer { id: 1556, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=11] [term=7] [peer_id=170] [region_id=99]
[2019/05/01 12:38:52.324 -07:00] [INFO] [unknown:719] ["[region 30] 1555 became follower at term 0"]
[2019/05/01 12:38:52.324 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 5, version: 17, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddLearner] [peer_id=170] [region_id=99]
[2019/05/01 12:38:52.324 -07:00] [INFO] [unknown:295] ["[region 30] 1555 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:38:52.324 -07:00] [INFO] [unknown:719] ["[region 30] 1555 became follower at term 1"]
[2019/05/01 12:38:52.324 -07:00] [INFO] [apply.rs:1476] ["add learner successfully"] [region="Region { id: 99, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 97, 117, 116, 111, 255, 95, 105, 110, 99, 255, 114, 101, 109, 255, 101, 110, 116, 95, 111, 255, 102, 102, 255, 115, 101, 116, 0, 0, 0, 252, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 97, 117, 116, 111, 255, 99, 111, 109, 109, 255, 105, 116, 0, 255, 0, 0, 0, 0, 0, 249, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 5, version: 17, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 100, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 101, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 170, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1556, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=170] [region_id=99]
[2019/05/01 12:38:52.324 -07:00] [INFO] [unknown:920] ["[region 30] 1555 [term: 1] received a MsgHeartbeat message with higher term from 55 [term: 7]"]
[2019/05/01 12:38:52.324 -07:00] [INFO] [unknown:719] ["[region 30] 1555 became follower at term 7"]
[2019/05/01 12:38:52.333 -07:00] [INFO] [peer.rs:1318] ["notify pd with change peer region"] [region="Region { id: 99, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 97, 117, 116, 111, 255, 95, 105, 110, 99, 255, 114, 101, 109, 255, 101, 110, 116, 95, 111, 255, 102, 102, 255, 115, 101, 116, 0, 0, 0, 252, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 97, 117, 116, 111, 255, 99, 111, 109, 109, 255, 105, 116, 0, 255, 0, 0, 0, 0, 0, 249, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 17, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 100, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 101, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 170, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1556, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=170] [region_id=99]
[2019/05/01 12:38:52.383 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_18_7_19_(default|lock|write).sst] [snap_key=18_7_19]
[2019/05/01 12:38:52.404 -07:00] [INFO] [unknown:1792] ["[region 18] 1553 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 19, term: 7]"]
[2019/05/01 12:38:52.404 -07:00] [INFO] [unknown:1816] ["[region 18] 1553 restored progress of 19 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:38:52.404 -07:00] [INFO] [unknown:1816] ["[region 18] 1553 restored progress of 49 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:38:52.404 -07:00] [INFO] [unknown:1816] ["[region 18] 1553 restored progress of 165 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:38:52.404 -07:00] [INFO] [unknown:1816] ["[region 18] 1553 restored progress of 1553 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:38:52.404 -07:00] [INFO] [unknown:474] ["[region 18] 1553 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 19, term: 7]"]
[2019/05/01 12:38:52.404 -07:00] [INFO] [unknown:1736] ["[region 18] 1553 [commit: 19] restored snapshot [index: 19, term: 7]"]
[2019/05/01 12:38:52.404 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=1553] [region_id=18]
[2019/05/01 12:38:52.404 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 19, truncated_state: Some(RaftTruncatedState { index: 19, term: 7, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 18, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 7, 95, 114, 128, 0, 0, 0, 0, 255, 0, 234, 97, 0, 0, 0, 0, 0, 250], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 9, 0, 0, 0, 0, 0, 0, 0, 248], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 5, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 19, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 49, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 165, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1553, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1553] [region_id=18]
[2019/05/01 12:38:52.417 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 18, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 7, 95, 114, 128, 0, 0, 0, 0, 255, 0, 234, 97, 0, 0, 0, 0, 0, 250], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 9, 0, 0, 0, 0, 0, 0, 0, 248], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 5, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 19, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 49, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 165, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1553, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1553] [region_id=18]
[2019/05/01 12:38:52.417 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 18] 1553"]
[2019/05/01 12:38:52.417 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=18]
[2019/05/01 12:38:52.445 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=27.144662ms] [region_id=18]
[2019/05/01 12:38:53.037 -07:00] [INFO] [unknown:1625] ["[region 1079] 1508 [term 6] received MsgTimeoutNow from 1082 and starts an election to get leadership."]
[2019/05/01 12:38:53.037 -07:00] [INFO] [unknown:739] ["[region 1079] 1508 became candidate at term 7"]
[2019/05/01 12:38:53.037 -07:00] [INFO] [unknown:854] ["[region 1079] 1508 received MsgRequestVoteResponse from 1508 at term 7"]
[2019/05/01 12:38:53.037 -07:00] [INFO] [unknown:828] ["[region 1079] 1508 [logterm: 6, index: 9] sent MsgRequestVote request to 1082 at term 7"]
[2019/05/01 12:38:53.037 -07:00] [INFO] [unknown:828] ["[region 1079] 1508 [logterm: 6, index: 9] sent MsgRequestVote request to 1080 at term 7"]
[2019/05/01 12:38:53.057 -07:00] [INFO] [unknown:854] ["[region 1079] 1508 received MsgRequestVoteResponse from 1080 at term 7"]
[2019/05/01 12:38:53.057 -07:00] [INFO] [unknown:1550] ["[region 1079] 1508 [quorum:2] has received 2 MsgRequestVoteResponse votes and 0 vote rejections"]
[2019/05/01 12:38:53.057 -07:00] [INFO] [unknown:789] ["[region 1079] 1508 became leader at term 7"]
[2019/05/01 12:38:53.146 -07:00] [INFO] [peer_storage.rs:759] ["requesting snapshot"] [peer_id=170] [region_id=99]
[2019/05/01 12:38:53.146 -07:00] [INFO] [snap.rs:757] ["scan snapshot of one cf"] [size=0] [key_count=0] [cf=default] [snapshot=/opt/tidb/data/kv/snap/gen_99_7_11_(default|lock|write).sst] [region_id=99]
[2019/05/01 12:38:53.146 -07:00] [INFO] [snap.rs:757] ["scan snapshot of one cf"] [size=0] [key_count=0] [cf=lock] [snapshot=/opt/tidb/data/kv/snap/gen_99_7_11_(default|lock|write).sst] [region_id=99]
[2019/05/01 12:38:53.146 -07:00] [INFO] [snap.rs:757] ["scan snapshot of one cf"] [size=156] [key_count=2] [cf=write] [snapshot=/opt/tidb/data/kv/snap/gen_99_7_11_(default|lock|write).sst] [region_id=99]
[2019/05/01 12:38:53.162 -07:00] [INFO] [snap.rs:875] ["scan snapshot"] [takes=16.03128ms] [size=1414] [key_count=2] [snapshot=/opt/tidb/data/kv/snap/gen_99_7_11_(default|lock|write).sst] [region_id=99]
[2019/05/01 12:38:53.429 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 1553, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=20] [term=7] [peer_id=1553] [region_id=18]
[2019/05/01 12:38:53.429 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 6, version: 5, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=1553] [region_id=18]
[2019/05/01 12:38:53.429 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 18, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 7, 95, 114, 128, 0, 0, 0, 0, 255, 0, 234, 97, 0, 0, 0, 0, 0, 250], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 9, 0, 0, 0, 0, 0, 0, 0, 248], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 5, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 19, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 49, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 165, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1553, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1553, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1553] [region_id=18]
[2019/05/01 12:38:53.482 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 165, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=21] [term=7] [peer_id=1553] [region_id=18]
[2019/05/01 12:38:53.482 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 7, version: 5, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=1553] [region_id=18]
[2019/05/01 12:38:53.482 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 18, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 7, 95, 114, 128, 0, 0, 0, 0, 255, 0, 234, 97, 0, 0, 0, 0, 0, 250], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 9, 0, 0, 0, 0, 0, 0, 0, 248], region_epoch: Some(RegionEpoch { conf_ver: 7, version: 5, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 19, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 49, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 165, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1553, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 165, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1553] [region_id=18]
[2019/05/01 12:38:53.484 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_321_7_11_(default|lock|write).sst] [snap_key=321_7_11]
[2019/05/01 12:38:53.499 -07:00] [INFO] [unknown:1792] ["[region 321] 1554 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 11, term: 7]"]
[2019/05/01 12:38:53.499 -07:00] [INFO] [unknown:1816] ["[region 321] 1554 restored progress of 323 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:38:53.499 -07:00] [INFO] [unknown:1816] ["[region 321] 1554 restored progress of 324 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:38:53.499 -07:00] [INFO] [unknown:1816] ["[region 321] 1554 restored progress of 442 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:38:53.499 -07:00] [INFO] [unknown:1816] ["[region 321] 1554 restored progress of 1554 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:38:53.499 -07:00] [INFO] [unknown:474] ["[region 321] 1554 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 11, term: 7]"]
[2019/05/01 12:38:53.499 -07:00] [INFO] [unknown:1736] ["[region 321] 1554 [commit: 11] restored snapshot [index: 11, term: 7]"]
[2019/05/01 12:38:53.499 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=1554] [region_id=321]
[2019/05/01 12:38:53.499 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 11, truncated_state: Some(RaftTruncatedState { index: 11, term: 7, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 321, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 114, 128, 0, 0, 0, 0, 255, 1, 212, 197, 0, 0, 0, 0, 0, 250], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 114, 128, 0, 0, 0, 0, 255, 1, 212, 199, 0, 0, 0, 0, 0, 250], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 20, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 323, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 324, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 442, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1554, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1554] [region_id=321]
[2019/05/01 12:38:53.534 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 321] 1554"]
[2019/05/01 12:38:53.535 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 321, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 114, 128, 0, 0, 0, 0, 255, 1, 212, 197, 0, 0, 0, 0, 0, 250], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 114, 128, 0, 0, 0, 0, 255, 1, 212, 199, 0, 0, 0, 0, 0, 250], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 20, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 323, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 324, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 442, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1554, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1554] [region_id=321]
[2019/05/01 12:38:53.535 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=321]
[2019/05/01 12:38:53.598 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=63.500859ms] [region_id=321]
[2019/05/01 12:38:54.326 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_30_7_12_(default|lock|write).sst] [snap_key=30_7_12]
[2019/05/01 12:38:54.338 -07:00] [INFO] [unknown:1792] ["[region 30] 1555 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 12, term: 7]"]
[2019/05/01 12:38:54.338 -07:00] [INFO] [unknown:1816] ["[region 30] 1555 restored progress of 31 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:38:54.338 -07:00] [INFO] [unknown:1816] ["[region 30] 1555 restored progress of 55 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:38:54.338 -07:00] [INFO] [unknown:1816] ["[region 30] 1555 restored progress of 330 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:38:54.338 -07:00] [INFO] [unknown:1816] ["[region 30] 1555 restored progress of 1555 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:38:54.338 -07:00] [INFO] [unknown:474] ["[region 30] 1555 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 12, term: 7]"]
[2019/05/01 12:38:54.338 -07:00] [INFO] [unknown:1736] ["[region 30] 1555 [commit: 12] restored snapshot [index: 12, term: 7]"]
[2019/05/01 12:38:54.338 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=1555] [region_id=30]
[2019/05/01 12:38:54.338 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 12, truncated_state: Some(RaftTruncatedState { index: 12, term: 7, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 30, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 44, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 49, 0, 0, 0, 0, 0, 0, 0, 248], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 9, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 31, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 55, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 330, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1555, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1555] [region_id=30]
[2019/05/01 12:38:54.354 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 30] 1555"]
[2019/05/01 12:38:54.354 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 30, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 44, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 49, 0, 0, 0, 0, 0, 0, 0, 248], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 9, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 31, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 55, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 330, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1555, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1555] [region_id=30]
[2019/05/01 12:38:54.354 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=30]
[2019/05/01 12:38:54.354 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=55.376µs] [region_id=30]
[2019/05/01 12:38:54.524 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 1554, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=12] [term=7] [peer_id=1554] [region_id=321]
[2019/05/01 12:38:54.524 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 9, version: 20, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=1554] [region_id=321]
[2019/05/01 12:38:54.524 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 321, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 114, 128, 0, 0, 0, 0, 255, 1, 212, 197, 0, 0, 0, 0, 0, 250], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 114, 128, 0, 0, 0, 0, 255, 1, 212, 199, 0, 0, 0, 0, 0, 250], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 20, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 323, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 324, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 442, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1554, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1554, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1554] [region_id=321]
[2019/05/01 12:38:54.594 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 324, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=13] [term=7] [peer_id=1554] [region_id=321]
[2019/05/01 12:38:54.594 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 10, version: 20, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=1554] [region_id=321]
[2019/05/01 12:38:54.594 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 321, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 114, 128, 0, 0, 0, 0, 255, 1, 212, 197, 0, 0, 0, 0, 0, 250], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 114, 128, 0, 0, 0, 0, 255, 1, 212, 199, 0, 0, 0, 0, 0, 250], region_epoch: Some(RegionEpoch { conf_ver: 10, version: 20, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 323, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 324, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 442, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1554, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 324, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1554] [region_id=321]
[2019/05/01 12:38:54.623 -07:00] [INFO] [pd.rs:558] ["try to change peer"] [peer="Peer { id: 1558, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [change_type=AddLearnerNode] [region_id=1273]
[2019/05/01 12:38:54.623 -07:00] [INFO] [peer.rs:1953] ["propose conf change peer"] [change_peer=1558] [change_type=AddLearnerNode] [peer_id=1412] [region_id=1273]
[2019/05/01 12:38:54.670 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddLearnerNode, peer: Some(Peer { id: 1558, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=11] [term=7] [peer_id=1412] [region_id=1273]
[2019/05/01 12:38:54.670 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 8, version: 167, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddLearner] [peer_id=1412] [region_id=1273]
[2019/05/01 12:38:54.670 -07:00] [INFO] [apply.rs:1476] ["add learner successfully"] [region="Region { id: 1273, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 108, 255, 97, 114, 103, 255, 101, 95, 112, 114, 101, 255, 102, 105, 255, 120, 0, 0, 0, 0, 0, 250, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 108, 255, 111, 99, 107, 255, 95, 119, 97, 105, 116, 255, 95, 116, 255, 105, 109, 101, 111, 117, 116, 255, 0, 255, 0, 0, 0, 0, 0, 0, 0, 247, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 8, version: 167, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1274, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1276, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1412, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1558, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1412] [region_id=1273]
[2019/05/01 12:38:54.678 -07:00] [INFO] [peer.rs:1318] ["notify pd with change peer region"] [region="Region { id: 1273, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 108, 255, 97, 114, 103, 255, 101, 95, 112, 114, 101, 255, 102, 105, 255, 120, 0, 0, 0, 0, 0, 250, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 108, 255, 111, 99, 107, 255, 95, 119, 97, 105, 116, 255, 95, 116, 255, 105, 109, 101, 111, 117, 116, 255, 0, 255, 0, 0, 0, 0, 0, 0, 0, 247, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 167, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1274, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1276, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1412, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1558, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1412] [region_id=1273]
[2019/05/01 12:38:55.068 -07:00] [INFO] [peer_storage.rs:759] ["requesting snapshot"] [peer_id=1412] [region_id=1273]
[2019/05/01 12:38:55.069 -07:00] [INFO] [snap.rs:757] ["scan snapshot of one cf"] [size=0] [key_count=0] [cf=default] [snapshot=/opt/tidb/data/kv/snap/gen_1273_7_11_(default|lock|write).sst] [region_id=1273]
[2019/05/01 12:38:55.069 -07:00] [INFO] [snap.rs:757] ["scan snapshot of one cf"] [size=0] [key_count=0] [cf=lock] [snapshot=/opt/tidb/data/kv/snap/gen_1273_7_11_(default|lock|write).sst] [region_id=1273]
[2019/05/01 12:38:55.069 -07:00] [INFO] [snap.rs:757] ["scan snapshot of one cf"] [size=156] [key_count=2] [cf=write] [snapshot=/opt/tidb/data/kv/snap/gen_1273_7_11_(default|lock|write).sst] [region_id=1273]
[2019/05/01 12:38:55.083 -07:00] [INFO] [snap.rs:875] ["scan snapshot"] [takes=13.741304ms] [size=1414] [key_count=2] [snapshot=/opt/tidb/data/kv/snap/gen_1273_7_11_(default|lock|write).sst] [region_id=1273]
[2019/05/01 12:38:55.105 -07:00] [INFO] [unknown:841] ["New connected subchannel at 0x7f041bc74100 for subchannel 0x7f04cf8b8c00"]
[2019/05/01 12:38:55.111 -07:00] [INFO] [snap.rs:389] ["sent snapshot"] [duration=6.216774ms] [size=1414] [snap_key=99_7_11] [region_id=99]
[2019/05/01 12:38:55.111 -07:00] [INFO] [peer.rs:538] ["report snapshot status"] [status=Finish] [to="Peer { id: 1556, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=170] [region_id=99]
[2019/05/01 12:38:55.342 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 1555, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=13] [term=7] [peer_id=1555] [region_id=30]
[2019/05/01 12:38:55.342 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 6, version: 9, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=1555] [region_id=30]
[2019/05/01 12:38:55.342 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 30, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 44, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 49, 0, 0, 0, 0, 0, 0, 0, 248], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 9, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 31, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 55, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 330, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1555, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1555, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1555] [region_id=30]
[2019/05/01 12:38:55.395 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 31, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=14] [term=7] [peer_id=1555] [region_id=30]
[2019/05/01 12:38:55.395 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 7, version: 9, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=1555] [region_id=30]
[2019/05/01 12:38:55.395 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 30, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 44, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 49, 0, 0, 0, 0, 0, 0, 0, 248], region_epoch: Some(RegionEpoch { conf_ver: 7, version: 9, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 31, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 55, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 330, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1555, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 31, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1555] [region_id=30]
[2019/05/01 12:38:56.128 -07:00] [INFO] [pd.rs:558] ["try to change peer"] [peer="Peer { id: 1556, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [change_type=AddNode] [region_id=99]
[2019/05/01 12:38:56.128 -07:00] [INFO] [peer.rs:1953] ["propose conf change peer"] [change_peer=1556] [change_type=AddNode] [peer_id=170] [region_id=99]
[2019/05/01 12:38:56.162 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 1556, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=12] [term=7] [peer_id=170] [region_id=99]
[2019/05/01 12:38:56.162 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 6, version: 17, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=170] [region_id=99]
[2019/05/01 12:38:56.162 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 99, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 97, 117, 116, 111, 255, 95, 105, 110, 99, 255, 114, 101, 109, 255, 101, 110, 116, 95, 111, 255, 102, 102, 255, 115, 101, 116, 0, 0, 0, 252, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 97, 117, 116, 111, 255, 99, 111, 109, 109, 255, 105, 116, 0, 255, 0, 0, 0, 0, 0, 249, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 17, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 100, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 101, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 170, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1556, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1556, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=170] [region_id=99]
[2019/05/01 12:38:56.178 -07:00] [INFO] [peer.rs:1318] ["notify pd with change peer region"] [region="Region { id: 99, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 97, 117, 116, 111, 255, 95, 105, 110, 99, 255, 114, 101, 109, 255, 101, 110, 116, 95, 111, 255, 102, 102, 255, 115, 101, 116, 0, 0, 0, 252, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 97, 117, 116, 111, 255, 99, 111, 109, 109, 255, 105, 116, 0, 255, 0, 0, 0, 0, 0, 249, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 7, version: 17, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 100, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 101, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 170, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1556, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=170] [region_id=99]
[2019/05/01 12:38:56.190 -07:00] [INFO] [pd.rs:558] ["try to change peer"] [peer="Peer { id: 100, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [change_type=RemoveNode] [region_id=99]
[2019/05/01 12:38:56.190 -07:00] [INFO] [peer.rs:1953] ["propose conf change peer"] [change_peer=100] [change_type=RemoveNode] [peer_id=170] [region_id=99]
[2019/05/01 12:38:56.205 -07:00] [INFO] [pd.rs:558] ["try to change peer"] [peer="Peer { id: 100, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [change_type=RemoveNode] [region_id=99]
[2019/05/01 12:38:56.225 -07:00] [INFO] [peer.rs:1927] ["there is a pending conf change, try later"] [peer_id=170] [region_id=99]
[2019/05/01 12:38:56.225 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 100, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=13] [term=7] [peer_id=170] [region_id=99]
[2019/05/01 12:38:56.225 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 7, version: 17, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=170] [region_id=99]
[2019/05/01 12:38:56.225 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 99, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 97, 117, 116, 111, 255, 95, 105, 110, 99, 255, 114, 101, 109, 255, 101, 110, 116, 95, 111, 255, 102, 102, 255, 115, 101, 116, 0, 0, 0, 252, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 97, 117, 116, 111, 255, 99, 111, 109, 109, 255, 105, 116, 0, 255, 0, 0, 0, 0, 0, 249, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 7, version: 17, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 100, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 101, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 170, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1556, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 100, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=170] [region_id=99]
[2019/05/01 12:38:56.241 -07:00] [INFO] [peer.rs:1318] ["notify pd with change peer region"] [region="Region { id: 99, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 97, 117, 116, 111, 255, 95, 105, 110, 99, 255, 114, 101, 109, 255, 101, 110, 116, 95, 111, 255, 102, 102, 255, 115, 101, 116, 0, 0, 0, 252, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 97, 117, 116, 111, 255, 99, 111, 109, 109, 255, 105, 116, 0, 255, 0, 0, 0, 0, 0, 249, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 8, version: 17, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 101, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 170, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1556, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=170] [region_id=99]
[2019/05/01 12:38:57.077 -07:00] [INFO] [unknown:841] ["New connected subchannel at 0x7f041bc286d0 for subchannel 0x7f04cf8b8e00"]
[2019/05/01 12:38:57.104 -07:00] [INFO] [snap.rs:389] ["sent snapshot"] [duration=27.471932ms] [size=1414] [snap_key=1273_7_11] [region_id=1273]
[2019/05/01 12:38:57.104 -07:00] [INFO] [peer.rs:538] ["report snapshot status"] [status=Finish] [to="Peer { id: 1558, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1412] [region_id=1273]
[2019/05/01 12:38:57.218 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddLearnerNode, peer: Some(Peer { id: 1561, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=10] [term=6] [peer_id=1456] [region_id=525]
[2019/05/01 12:38:57.223 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 8, version: 67, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddLearner] [peer_id=1456] [region_id=525]
[2019/05/01 12:38:57.223 -07:00] [INFO] [apply.rs:1476] ["add learner successfully"] [region="Region { id: 525, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 101, 118, 101, 110, 255, 116, 95, 115, 99, 255, 104, 101, 100, 255, 117, 108, 101, 114, 0, 254, 0, 0, 253], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 101, 120, 101, 99, 255, 117, 116, 101, 100, 255, 95, 103, 116, 255, 105, 100, 115, 95, 99, 255, 111, 109, 255, 112, 114, 101, 115, 115, 105, 255, 111, 255, 110, 95, 112, 101, 114, 105, 111, 255, 255, 100, 0, 0, 0, 0, 0, 0, 0, 255, 248, 0, 0, 0, 0, 0, 0, 0, 248], region_epoch: Some(RegionEpoch { conf_ver: 8, version: 67, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 526, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 527, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1456, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1561, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1456] [region_id=525]
[2019/05/01 12:38:57.309 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=1559] [region_id=1087]
[2019/05/01 12:38:57.309 -07:00] [INFO] [unknown:719] ["[region 1087] 1559 became follower at term 0"]
[2019/05/01 12:38:57.309 -07:00] [INFO] [unknown:295] ["[region 1087] 1559 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:38:57.309 -07:00] [INFO] [unknown:719] ["[region 1087] 1559 became follower at term 1"]
[2019/05/01 12:38:57.309 -07:00] [INFO] [unknown:920] ["[region 1087] 1559 [term: 1] received a MsgHeartbeat message with higher term from 1102 [term: 7]"]
[2019/05/01 12:38:57.309 -07:00] [INFO] [unknown:719] ["[region 1087] 1559 became follower at term 7"]
[2019/05/01 12:38:58.046 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=1560] [region_id=1541]
[2019/05/01 12:38:58.046 -07:00] [INFO] [unknown:719] ["[region 1541] 1560 became follower at term 0"]
[2019/05/01 12:38:58.046 -07:00] [INFO] [unknown:295] ["[region 1541] 1560 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:38:58.046 -07:00] [INFO] [unknown:719] ["[region 1541] 1560 became follower at term 1"]
[2019/05/01 12:38:58.046 -07:00] [INFO] [unknown:920] ["[region 1541] 1560 [term: 1] received a MsgHeartbeat message with higher term from 1544 [term: 6]"]
[2019/05/01 12:38:58.046 -07:00] [INFO] [unknown:719] ["[region 1541] 1560 became follower at term 6"]
[2019/05/01 12:38:58.109 -07:00] [INFO] [pd.rs:558] ["try to change peer"] [peer="Peer { id: 1558, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [change_type=AddNode] [region_id=1273]
[2019/05/01 12:38:58.109 -07:00] [INFO] [peer.rs:1953] ["propose conf change peer"] [change_peer=1558] [change_type=AddNode] [peer_id=1412] [region_id=1273]
[2019/05/01 12:38:58.307 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 1558, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=12] [term=7] [peer_id=1412] [region_id=1273]
[2019/05/01 12:38:58.307 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 9, version: 167, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=1412] [region_id=1273]
[2019/05/01 12:38:58.307 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 1273, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 108, 255, 97, 114, 103, 255, 101, 95, 112, 114, 101, 255, 102, 105, 255, 120, 0, 0, 0, 0, 0, 250, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 108, 255, 111, 99, 107, 255, 95, 119, 97, 105, 116, 255, 95, 116, 255, 105, 109, 101, 111, 117, 116, 255, 0, 255, 0, 0, 0, 0, 0, 0, 0, 247, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 167, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1274, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1276, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1412, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1558, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1558, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1412] [region_id=1273]
[2019/05/01 12:38:58.328 -07:00] [INFO] [peer.rs:1318] ["notify pd with change peer region"] [region="Region { id: 1273, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 108, 255, 97, 114, 103, 255, 101, 95, 112, 114, 101, 255, 102, 105, 255, 120, 0, 0, 0, 0, 0, 250, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 108, 255, 111, 99, 107, 255, 95, 119, 97, 105, 116, 255, 95, 116, 255, 105, 109, 101, 111, 117, 116, 255, 0, 255, 0, 0, 0, 0, 0, 0, 0, 247, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 10, version: 167, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1274, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1276, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1412, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1558, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1412] [region_id=1273]
[2019/05/01 12:38:58.355 -07:00] [INFO] [pd.rs:558] ["try to change peer"] [peer="Peer { id: 1274, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [change_type=RemoveNode] [region_id=1273]
[2019/05/01 12:38:58.355 -07:00] [INFO] [pd.rs:558] ["try to change peer"] [peer="Peer { id: 1274, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [change_type=RemoveNode] [region_id=1273]
[2019/05/01 12:38:58.355 -07:00] [INFO] [peer.rs:1953] ["propose conf change peer"] [change_peer=1274] [change_type=RemoveNode] [peer_id=1412] [region_id=1273]
[2019/05/01 12:38:58.379 -07:00] [INFO] [peer.rs:1927] ["there is a pending conf change, try later"] [peer_id=1412] [region_id=1273]
[2019/05/01 12:38:58.444 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 1274, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=13] [term=7] [peer_id=1412] [region_id=1273]
[2019/05/01 12:38:58.444 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 10, version: 167, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=1412] [region_id=1273]
[2019/05/01 12:38:58.444 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 1273, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 108, 255, 97, 114, 103, 255, 101, 95, 112, 114, 101, 255, 102, 105, 255, 120, 0, 0, 0, 0, 0, 250, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 108, 255, 111, 99, 107, 255, 95, 119, 97, 105, 116, 255, 95, 116, 255, 105, 109, 101, 111, 117, 116, 255, 0, 255, 0, 0, 0, 0, 0, 0, 0, 247, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 10, version: 167, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1274, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1276, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1412, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1558, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1274, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1412] [region_id=1273]
[2019/05/01 12:38:58.473 -07:00] [INFO] [peer.rs:1318] ["notify pd with change peer region"] [region="Region { id: 1273, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 108, 255, 97, 114, 103, 255, 101, 95, 112, 114, 101, 255, 102, 105, 255, 120, 0, 0, 0, 0, 0, 250, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 108, 255, 111, 99, 107, 255, 95, 119, 97, 105, 116, 255, 95, 116, 255, 105, 109, 101, 111, 117, 116, 255, 0, 255, 0, 0, 0, 0, 0, 0, 0, 247, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 11, version: 167, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1276, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1412, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1558, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1412] [region_id=1273]
[2019/05/01 12:38:59.330 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_1087_7_11_(default|lock|write).sst] [snap_key=1087_7_11]
[2019/05/01 12:38:59.344 -07:00] [INFO] [unknown:1792] ["[region 1087] 1559 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 11, term: 7]"]
[2019/05/01 12:38:59.344 -07:00] [INFO] [unknown:1816] ["[region 1087] 1559 restored progress of 1089 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:38:59.344 -07:00] [INFO] [unknown:1816] ["[region 1087] 1559 restored progress of 1090 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:38:59.344 -07:00] [INFO] [unknown:1816] ["[region 1087] 1559 restored progress of 1102 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:38:59.344 -07:00] [INFO] [unknown:1816] ["[region 1087] 1559 restored progress of 1559 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:38:59.344 -07:00] [INFO] [unknown:474] ["[region 1087] 1559 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 11, term: 7]"]
[2019/05/01 12:38:59.344 -07:00] [INFO] [unknown:1736] ["[region 1087] 1559 [commit: 11] restored snapshot [index: 11, term: 7]"]
[2019/05/01 12:38:59.344 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=1559] [region_id=1087]
[2019/05/01 12:38:59.344 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 11, truncated_state: Some(RaftTruncatedState { index: 11, term: 7, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 1087, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 99, 255, 111, 109, 112, 255, 114, 101, 115, 115, 105, 255, 111, 110, 255, 95, 102, 97, 105, 108, 117, 255, 114, 255, 101, 95, 116, 104, 114, 101, 115, 255, 255, 104, 111, 108, 100, 95, 112, 99, 116, 255, 255, 0, 0, 0, 0, 0, 0, 0, 255, 0, 247, 0, 0, 0, 0, 0, 0, 249], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 99, 255, 111, 109, 112, 255, 114, 101, 115, 115, 105, 255, 111, 110, 255, 95, 108, 101, 118, 101, 108, 255, 0, 255, 0, 0, 0, 0, 0, 0, 0, 247, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 127, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1089, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1090, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1102, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1559, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1559] [region_id=1087]
[2019/05/01 12:38:59.389 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 1087] 1559"]
[2019/05/01 12:38:59.389 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=1087]
[2019/05/01 12:38:59.389 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 1087, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 99, 255, 111, 109, 112, 255, 114, 101, 115, 115, 105, 255, 111, 110, 255, 95, 102, 97, 105, 108, 117, 255, 114, 255, 101, 95, 116, 104, 114, 101, 115, 255, 255, 104, 111, 108, 100, 95, 112, 99, 116, 255, 255, 0, 0, 0, 0, 0, 0, 0, 255, 0, 247, 0, 0, 0, 0, 0, 0, 249], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 99, 255, 111, 109, 112, 255, 114, 101, 115, 115, 105, 255, 111, 110, 255, 95, 108, 101, 118, 101, 108, 255, 0, 255, 0, 0, 0, 0, 0, 0, 0, 247, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 127, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1089, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1090, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1102, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1559, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1559] [region_id=1087]
[2019/05/01 12:38:59.435 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=45.49562ms] [region_id=1087]
[2019/05/01 12:39:00.049 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_1541_6_7_(default|lock|write).sst] [snap_key=1541_6_7]
[2019/05/01 12:39:00.066 -07:00] [INFO] [unknown:1792] ["[region 1541] 1560 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 7, term: 6]"]
[2019/05/01 12:39:00.066 -07:00] [INFO] [unknown:1816] ["[region 1541] 1560 restored progress of 1542 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:39:00.066 -07:00] [INFO] [unknown:1816] ["[region 1541] 1560 restored progress of 1543 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:39:00.066 -07:00] [INFO] [unknown:1816] ["[region 1541] 1560 restored progress of 1544 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:39:00.066 -07:00] [INFO] [unknown:1816] ["[region 1541] 1560 restored progress of 1560 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:39:00.066 -07:00] [INFO] [unknown:474] ["[region 1541] 1560 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 7, term: 6]"]
[2019/05/01 12:39:00.066 -07:00] [INFO] [unknown:1736] ["[region 1541] 1560 [commit: 7] restored snapshot [index: 7, term: 6]"]
[2019/05/01 12:39:00.066 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=1560] [region_id=1541]
[2019/05/01 12:39:00.066 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 7, truncated_state: Some(RaftTruncatedState { index: 7, term: 6, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 1541, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 116, 255, 104, 114, 101, 255, 97, 100, 95, 115, 108, 255, 101, 101, 255, 112, 95, 100, 101, 108, 97, 255, 121, 255, 0, 0, 0, 0, 0, 0, 0, 248, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 117, 255, 110, 100, 111, 255, 95, 100, 105, 114, 101, 255, 99, 116, 255, 111, 114, 121, 0, 0, 0, 252, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 217, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1542, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1543, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1544, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1560, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1560] [region_id=1541]
[2019/05/01 12:39:00.101 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=1602] [region_id=1396]
[2019/05/01 12:39:00.101 -07:00] [INFO] [unknown:719] ["[region 1396] 1602 became follower at term 0"]
[2019/05/01 12:39:00.101 -07:00] [INFO] [unknown:295] ["[region 1396] 1602 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:39:00.101 -07:00] [INFO] [unknown:719] ["[region 1396] 1602 became follower at term 1"]
[2019/05/01 12:39:00.101 -07:00] [INFO] [unknown:920] ["[region 1396] 1602 [term: 1] received a MsgHeartbeat message with higher term from 1399 [term: 6]"]
[2019/05/01 12:39:00.101 -07:00] [INFO] [unknown:719] ["[region 1396] 1602 became follower at term 6"]
[2019/05/01 12:39:00.114 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 1541] 1560"]
[2019/05/01 12:39:00.114 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 1541, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 116, 255, 104, 114, 101, 255, 97, 100, 95, 115, 108, 255, 101, 101, 255, 112, 95, 100, 101, 108, 97, 255, 121, 255, 0, 0, 0, 0, 0, 0, 0, 248, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 117, 255, 110, 100, 111, 255, 95, 100, 105, 114, 101, 255, 99, 116, 255, 111, 114, 121, 0, 0, 0, 252, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 217, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1542, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1543, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1544, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1560, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1560] [region_id=1541]
[2019/05/01 12:39:00.114 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=1541]
[2019/05/01 12:39:00.163 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=49.147105ms] [region_id=1541]
[2019/05/01 12:39:00.335 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 1559, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=12] [term=7] [peer_id=1559] [region_id=1087]
[2019/05/01 12:39:00.335 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 9, version: 127, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=1559] [region_id=1087]
[2019/05/01 12:39:00.335 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 1087, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 99, 255, 111, 109, 112, 255, 114, 101, 115, 115, 105, 255, 111, 110, 255, 95, 102, 97, 105, 108, 117, 255, 114, 255, 101, 95, 116, 104, 114, 101, 115, 255, 255, 104, 111, 108, 100, 95, 112, 99, 116, 255, 255, 0, 0, 0, 0, 0, 0, 0, 255, 0, 247, 0, 0, 0, 0, 0, 0, 249], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 99, 255, 111, 109, 112, 255, 114, 101, 115, 115, 105, 255, 111, 110, 255, 95, 108, 101, 118, 101, 108, 255, 0, 255, 0, 0, 0, 0, 0, 0, 0, 247, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 127, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1089, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1090, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1102, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1559, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1559, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1559] [region_id=1087]
[2019/05/01 12:39:00.391 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 1089, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=13] [term=7] [peer_id=1559] [region_id=1087]
[2019/05/01 12:39:00.391 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 10, version: 127, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=1559] [region_id=1087]
[2019/05/01 12:39:00.391 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 1087, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 99, 255, 111, 109, 112, 255, 114, 101, 115, 115, 105, 255, 111, 110, 255, 95, 102, 97, 105, 108, 117, 255, 114, 255, 101, 95, 116, 104, 114, 101, 115, 255, 255, 104, 111, 108, 100, 95, 112, 99, 116, 255, 255, 0, 0, 0, 0, 0, 0, 0, 255, 0, 247, 0, 0, 0, 0, 0, 0, 249], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 99, 255, 111, 109, 112, 255, 114, 101, 115, 115, 105, 255, 111, 110, 255, 95, 108, 101, 118, 101, 108, 255, 0, 255, 0, 0, 0, 0, 0, 0, 0, 247, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 10, version: 127, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1089, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1090, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1102, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1559, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1089, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1559] [region_id=1087]
[2019/05/01 12:39:01.085 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 1560, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=8] [term=6] [peer_id=1560] [region_id=1541]
[2019/05/01 12:39:01.085 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 6, version: 217, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=1560] [region_id=1541]
[2019/05/01 12:39:01.085 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 1541, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 116, 255, 104, 114, 101, 255, 97, 100, 95, 115, 108, 255, 101, 101, 255, 112, 95, 100, 101, 108, 97, 255, 121, 255, 0, 0, 0, 0, 0, 0, 0, 248, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 117, 255, 110, 100, 111, 255, 95, 100, 105, 114, 101, 255, 99, 116, 255, 111, 114, 121, 0, 0, 0, 252, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 217, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1542, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1543, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1544, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1560, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1560, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1560] [region_id=1541]
[2019/05/01 12:39:01.129 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 1543, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=9] [term=6] [peer_id=1560] [region_id=1541]
[2019/05/01 12:39:01.129 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 7, version: 217, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=1560] [region_id=1541]
[2019/05/01 12:39:01.129 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 1541, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 116, 255, 104, 114, 101, 255, 97, 100, 95, 115, 108, 255, 101, 101, 255, 112, 95, 100, 101, 108, 97, 255, 121, 255, 0, 0, 0, 0, 0, 0, 0, 248, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 117, 255, 110, 100, 111, 255, 95, 100, 105, 114, 101, 255, 99, 116, 255, 111, 114, 121, 0, 0, 0, 252, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 7, version: 217, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1542, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1543, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1544, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1560, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1543, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1560] [region_id=1541]
[2019/05/01 12:39:01.461 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 1561, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=11] [term=6] [peer_id=1456] [region_id=525]
[2019/05/01 12:39:01.461 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 9, version: 67, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=1456] [region_id=525]
[2019/05/01 12:39:01.461 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 525, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 101, 118, 101, 110, 255, 116, 95, 115, 99, 255, 104, 101, 100, 255, 117, 108, 101, 114, 0, 254, 0, 0, 253], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 101, 120, 101, 99, 255, 117, 116, 101, 100, 255, 95, 103, 116, 255, 105, 100, 115, 95, 99, 255, 111, 109, 255, 112, 114, 101, 115, 115, 105, 255, 111, 255, 110, 95, 112, 101, 114, 105, 111, 255, 255, 100, 0, 0, 0, 0, 0, 0, 0, 255, 248, 0, 0, 0, 0, 0, 0, 0, 248], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 67, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 526, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 527, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1456, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1561, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1561, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1456] [region_id=525]
[2019/05/01 12:39:01.527 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 527, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=12] [term=6] [peer_id=1456] [region_id=525]
[2019/05/01 12:39:01.527 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 10, version: 67, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=1456] [region_id=525]
[2019/05/01 12:39:01.527 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 525, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 101, 118, 101, 110, 255, 116, 95, 115, 99, 255, 104, 101, 100, 255, 117, 108, 101, 114, 0, 254, 0, 0, 253], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 101, 120, 101, 99, 255, 117, 116, 101, 100, 255, 95, 103, 116, 255, 105, 100, 115, 95, 99, 255, 111, 109, 255, 112, 114, 101, 115, 115, 105, 255, 111, 255, 110, 95, 112, 101, 114, 105, 111, 255, 255, 100, 0, 0, 0, 0, 0, 0, 0, 255, 248, 0, 0, 0, 0, 0, 0, 0, 248], region_epoch: Some(RegionEpoch { conf_ver: 10, version: 67, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 526, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 527, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1456, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1561, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 527, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1456] [region_id=525]
[2019/05/01 12:39:02.101 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_1396_6_7_(default|lock|write).sst] [snap_key=1396_6_7]
[2019/05/01 12:39:02.123 -07:00] [INFO] [unknown:1792] ["[region 1396] 1602 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 7, term: 6]"]
[2019/05/01 12:39:02.123 -07:00] [INFO] [unknown:1816] ["[region 1396] 1602 restored progress of 1397 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:39:02.123 -07:00] [INFO] [unknown:1816] ["[region 1396] 1602 restored progress of 1398 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:39:02.123 -07:00] [INFO] [unknown:1816] ["[region 1396] 1602 restored progress of 1399 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:39:02.123 -07:00] [INFO] [unknown:1816] ["[region 1396] 1602 restored progress of 1602 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:39:02.123 -07:00] [INFO] [unknown:474] ["[region 1396] 1602 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 7, term: 6]"]
[2019/05/01 12:39:02.123 -07:00] [INFO] [unknown:1736] ["[region 1396] 1602 [commit: 7] restored snapshot [index: 7, term: 6]"]
[2019/05/01 12:39:02.123 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=1602] [region_id=1396]
[2019/05/01 12:39:02.123 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 7, truncated_state: Some(RaftTruncatedState { index: 7, term: 6, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 1396, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 112, 255, 97, 103, 101, 255, 95, 115, 105, 122, 101, 255, 0, 0, 255, 0, 0, 0, 0, 0, 0, 247, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 112, 255, 114, 105, 110, 255, 116, 95, 97, 108, 108, 255, 95, 100, 255, 101, 97, 100, 108, 111, 99, 255, 107, 255, 115, 0, 0, 0, 0, 0, 0, 249, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 187, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1397, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1398, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1399, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1602, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1602] [region_id=1396]
[2019/05/01 12:39:02.128 -07:00] [INFO] [unknown:920] ["[region 147] 575 [term: 7] received a MsgRequestVote message with higher term from 327 [term: 8]"]
[2019/05/01 12:39:02.128 -07:00] [INFO] [unknown:719] ["[region 147] 575 became follower at term 8"]
[2019/05/01 12:39:02.128 -07:00] [INFO] [unknown:1083] ["[region 147] 575 [logterm: 7, index: 13, vote: 0] cast MsgRequestVote for 327 [logterm: 7, index: 13] at term 8"]
[2019/05/01 12:39:02.175 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 1396] 1602"]
[2019/05/01 12:39:02.175 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 1396, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 112, 255, 97, 103, 101, 255, 95, 115, 105, 122, 101, 255, 0, 0, 255, 0, 0, 0, 0, 0, 0, 247, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 112, 255, 114, 105, 110, 255, 116, 95, 97, 108, 108, 255, 95, 100, 255, 101, 97, 100, 108, 111, 99, 255, 107, 255, 115, 0, 0, 0, 0, 0, 0, 249, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 187, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1397, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1398, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1399, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1602, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1602] [region_id=1396]
[2019/05/01 12:39:02.175 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=1396]
[2019/05/01 12:39:02.226 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=50.16024ms] [region_id=1396]
[2019/05/01 12:39:02.289 -07:00] [INFO] [unknown:920] ["[region 150] 328 [term: 7] received a MsgRequestVote message with higher term from 1459 [term: 8]"]
[2019/05/01 12:39:02.290 -07:00] [INFO] [unknown:719] ["[region 150] 328 became follower at term 8"]
[2019/05/01 12:39:02.290 -07:00] [INFO] [unknown:1083] ["[region 150] 328 [logterm: 7, index: 13, vote: 0] cast MsgRequestVote for 1459 [logterm: 7, index: 13] at term 8"]
[2019/05/01 12:39:02.316 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=1605] [region_id=1137]
[2019/05/01 12:39:02.316 -07:00] [INFO] [unknown:719] ["[region 1137] 1605 became follower at term 0"]
[2019/05/01 12:39:02.316 -07:00] [INFO] [unknown:295] ["[region 1137] 1605 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:39:02.316 -07:00] [INFO] [unknown:719] ["[region 1137] 1605 became follower at term 1"]
[2019/05/01 12:39:02.316 -07:00] [INFO] [unknown:920] ["[region 1137] 1605 [term: 1] received a MsgHeartbeat message with higher term from 1139 [term: 7]"]
[2019/05/01 12:39:02.316 -07:00] [INFO] [unknown:719] ["[region 1137] 1605 became follower at term 7"]
[2019/05/01 12:39:03.163 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 1602, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=8] [term=6] [peer_id=1602] [region_id=1396]
[2019/05/01 12:39:03.163 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 6, version: 187, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=1602] [region_id=1396]
[2019/05/01 12:39:03.163 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 1396, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 112, 255, 97, 103, 101, 255, 95, 115, 105, 122, 101, 255, 0, 0, 255, 0, 0, 0, 0, 0, 0, 247, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 112, 255, 114, 105, 110, 255, 116, 95, 97, 108, 108, 255, 95, 100, 255, 101, 97, 100, 108, 111, 99, 255, 107, 255, 115, 0, 0, 0, 0, 0, 0, 249, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 187, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1397, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1398, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1399, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1602, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1602, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1602] [region_id=1396]
[2019/05/01 12:39:03.252 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 1398, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=9] [term=6] [peer_id=1602] [region_id=1396]
[2019/05/01 12:39:03.252 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 7, version: 187, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=1602] [region_id=1396]
[2019/05/01 12:39:03.252 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 1396, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 112, 255, 97, 103, 101, 255, 95, 115, 105, 122, 101, 255, 0, 0, 255, 0, 0, 0, 0, 0, 0, 247, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 112, 255, 114, 105, 110, 255, 116, 95, 97, 108, 108, 255, 95, 100, 255, 101, 97, 100, 108, 111, 99, 255, 107, 255, 115, 0, 0, 0, 0, 0, 0, 249, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 7, version: 187, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1397, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1398, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1399, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1602, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1398, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1602] [region_id=1396]
[2019/05/01 12:39:03.382 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddLearnerNode, peer: Some(Peer { id: 1646, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=11] [term=7] [peer_id=1010] [region_id=493]
[2019/05/01 12:39:03.383 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 8, version: 67, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddLearner] [peer_id=1010] [region_id=493]
[2019/05/01 12:39:03.383 -07:00] [INFO] [apply.rs:1476] ["add learner successfully"] [region="Region { id: 493, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 100, 101, 108, 97, 255, 121, 101, 100, 95, 255, 105, 110, 115, 255, 101, 114, 116, 95, 108, 255, 105, 109, 255, 105, 116, 0, 0, 0, 0, 251, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 100, 101, 108, 97, 255, 121, 101, 100, 95, 255, 105, 110, 115, 255, 101, 114, 116, 95, 116, 255, 105, 109, 255, 101, 111, 117, 116, 0, 0, 253, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 8, version: 67, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 495, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 496, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1010, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1646, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1010] [region_id=493]
[2019/05/01 12:39:04.319 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_1137_7_8_(default|lock|write).sst] [snap_key=1137_7_8]
[2019/05/01 12:39:04.339 -07:00] [INFO] [unknown:1792] ["[region 1137] 1605 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 8, term: 7]"]
[2019/05/01 12:39:04.339 -07:00] [INFO] [unknown:1816] ["[region 1137] 1605 restored progress of 1138 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:39:04.339 -07:00] [INFO] [unknown:1816] ["[region 1137] 1605 restored progress of 1139 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:39:04.339 -07:00] [INFO] [unknown:1816] ["[region 1137] 1605 restored progress of 1140 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:39:04.339 -07:00] [INFO] [unknown:1816] ["[region 1137] 1605 restored progress of 1605 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:39:04.339 -07:00] [INFO] [unknown:474] ["[region 1137] 1605 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 8, term: 7]"]
[2019/05/01 12:39:04.339 -07:00] [INFO] [unknown:1736] ["[region 1137] 1605 [commit: 8] restored snapshot [index: 8, term: 7]"]
[2019/05/01 12:39:04.339 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=1605] [region_id=1137]
[2019/05/01 12:39:04.339 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 8, truncated_state: Some(RaftTruncatedState { index: 8, term: 7, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 1137, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 102, 255, 105, 108, 101, 255, 95, 102, 111, 114, 109, 255, 97, 116, 255, 95, 109, 97, 120, 0, 0, 253, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 102, 255, 105, 108, 101, 255, 95, 112, 101, 114, 95, 255, 116, 97, 255, 98, 108, 101, 0, 0, 0, 252, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 137, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1138, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1139, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1140, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1605, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1605] [region_id=1137]
[2019/05/01 12:39:04.394 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 1137] 1605"]
[2019/05/01 12:39:04.394 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 1137, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 102, 255, 105, 108, 101, 255, 95, 102, 111, 114, 109, 255, 97, 116, 255, 95, 109, 97, 120, 0, 0, 253, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 102, 255, 105, 108, 101, 255, 95, 112, 101, 114, 95, 255, 116, 97, 255, 98, 108, 101, 0, 0, 0, 252, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 137, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1138, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1139, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1140, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1605, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1605] [region_id=1137]
[2019/05/01 12:39:04.394 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=1137]
[2019/05/01 12:39:04.424 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=29.817067ms] [region_id=1137]
[2019/05/01 12:39:05.228 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=1647] [region_id=1445]
[2019/05/01 12:39:05.229 -07:00] [INFO] [unknown:719] ["[region 1445] 1647 became follower at term 0"]
[2019/05/01 12:39:05.229 -07:00] [INFO] [unknown:295] ["[region 1445] 1647 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:39:05.229 -07:00] [INFO] [unknown:719] ["[region 1445] 1647 became follower at term 1"]
[2019/05/01 12:39:05.229 -07:00] [INFO] [unknown:920] ["[region 1445] 1647 [term: 1] received a MsgHeartbeat message with higher term from 1446 [term: 7]"]
[2019/05/01 12:39:05.229 -07:00] [INFO] [unknown:719] ["[region 1445] 1647 became follower at term 7"]
[2019/05/01 12:39:05.403 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 1605, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=9] [term=7] [peer_id=1605] [region_id=1137]
[2019/05/01 12:39:05.413 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 6, version: 137, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=1605] [region_id=1137]
[2019/05/01 12:39:05.413 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 1137, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 102, 255, 105, 108, 101, 255, 95, 102, 111, 114, 109, 255, 97, 116, 255, 95, 109, 97, 120, 0, 0, 253, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 102, 255, 105, 108, 101, 255, 95, 112, 101, 114, 95, 255, 116, 97, 255, 98, 108, 101, 0, 0, 0, 252, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 137, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1138, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1139, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1140, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1605, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1605, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1605] [region_id=1137]
[2019/05/01 12:39:05.507 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 1140, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=10] [term=7] [peer_id=1605] [region_id=1137]
[2019/05/01 12:39:05.507 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 7, version: 137, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=1605] [region_id=1137]
[2019/05/01 12:39:05.507 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 1137, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 102, 255, 105, 108, 101, 255, 95, 102, 111, 114, 109, 255, 97, 116, 255, 95, 109, 97, 120, 0, 0, 253, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 102, 255, 105, 108, 101, 255, 95, 112, 101, 114, 95, 255, 116, 97, 255, 98, 108, 101, 0, 0, 0, 252, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 7, version: 137, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1138, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1139, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1140, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1605, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1140, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1605] [region_id=1137]
[2019/05/01 12:39:06.006 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=1648] [region_id=1642]
[2019/05/01 12:39:06.006 -07:00] [INFO] [unknown:719] ["[region 1642] 1648 became follower at term 0"]
[2019/05/01 12:39:06.006 -07:00] [INFO] [unknown:295] ["[region 1642] 1648 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:39:06.006 -07:00] [INFO] [unknown:719] ["[region 1642] 1648 became follower at term 1"]
[2019/05/01 12:39:06.006 -07:00] [INFO] [unknown:920] ["[region 1642] 1648 [term: 1] received a MsgHeartbeat message with higher term from 1644 [term: 6]"]
[2019/05/01 12:39:06.006 -07:00] [INFO] [unknown:719] ["[region 1642] 1648 became follower at term 6"]
[2019/05/01 12:39:07.232 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 1646, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=12] [term=7] [peer_id=1010] [region_id=493]
[2019/05/01 12:39:07.232 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 9, version: 67, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=1010] [region_id=493]
[2019/05/01 12:39:07.232 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 493, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 100, 101, 108, 97, 255, 121, 101, 100, 95, 255, 105, 110, 115, 255, 101, 114, 116, 95, 108, 255, 105, 109, 255, 105, 116, 0, 0, 0, 0, 251, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 100, 101, 108, 97, 255, 121, 101, 100, 95, 255, 105, 110, 115, 255, 101, 114, 116, 95, 116, 255, 105, 109, 255, 101, 111, 117, 116, 0, 0, 253, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 67, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 495, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 496, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1010, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1646, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1646, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1010] [region_id=493]
[2019/05/01 12:39:07.232 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_1445_7_8_(default|lock|write).sst] [snap_key=1445_7_8]
[2019/05/01 12:39:07.240 -07:00] [INFO] [unknown:1792] ["[region 1445] 1647 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 8, term: 7]"]
[2019/05/01 12:39:07.240 -07:00] [INFO] [unknown:1816] ["[region 1445] 1647 restored progress of 1446 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:39:07.240 -07:00] [INFO] [unknown:1816] ["[region 1445] 1647 restored progress of 1447 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:39:07.240 -07:00] [INFO] [unknown:1816] ["[region 1445] 1647 restored progress of 1448 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:39:07.240 -07:00] [INFO] [unknown:1816] ["[region 1445] 1647 restored progress of 1647 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:39:07.240 -07:00] [INFO] [unknown:474] ["[region 1445] 1647 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 8, term: 7]"]
[2019/05/01 12:39:07.240 -07:00] [INFO] [unknown:1736] ["[region 1445] 1647 [commit: 8] restored snapshot [index: 8, term: 7]"]
[2019/05/01 12:39:07.240 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=1647] [region_id=1445]
[2019/05/01 12:39:07.240 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 8, truncated_state: Some(RaftTruncatedState { index: 8, term: 7, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 1445, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 114, 255, 111, 108, 108, 255, 98, 97, 99, 107, 95, 255, 111, 110, 255, 95, 116, 105, 109, 101, 111, 255, 117, 255, 116, 0, 0, 0, 0, 0, 0, 249, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 114, 255, 111, 108, 108, 255, 98, 97, 99, 107, 95, 255, 115, 101, 255, 103, 109, 101, 110, 116, 115, 255, 0, 255, 0, 0, 0, 0, 0, 0, 0, 247, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 197, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1446, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1447, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1448, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1647, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1647] [region_id=1445]
[2019/05/01 12:39:07.270 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 1445, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 114, 255, 111, 108, 108, 255, 98, 97, 99, 107, 95, 255, 111, 110, 255, 95, 116, 105, 109, 101, 111, 255, 117, 255, 116, 0, 0, 0, 0, 0, 0, 249, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 114, 255, 111, 108, 108, 255, 98, 97, 99, 107, 95, 255, 115, 101, 255, 103, 109, 101, 110, 116, 115, 255, 0, 255, 0, 0, 0, 0, 0, 0, 0, 247, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 197, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1446, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1447, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1448, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1647, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1647] [region_id=1445]
[2019/05/01 12:39:07.270 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 1445] 1647"]
[2019/05/01 12:39:07.270 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=1445]
[2019/05/01 12:39:07.295 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=24.595154ms] [region_id=1445]
[2019/05/01 12:39:07.328 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 496, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=13] [term=7] [peer_id=1010] [region_id=493]
[2019/05/01 12:39:07.328 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 10, version: 67, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=1010] [region_id=493]
[2019/05/01 12:39:07.328 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 493, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 100, 101, 108, 97, 255, 121, 101, 100, 95, 255, 105, 110, 115, 255, 101, 114, 116, 95, 108, 255, 105, 109, 255, 105, 116, 0, 0, 0, 0, 251, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 100, 101, 108, 97, 255, 121, 101, 100, 95, 255, 105, 110, 115, 255, 101, 114, 116, 95, 116, 255, 105, 109, 255, 101, 111, 117, 116, 0, 0, 253, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 10, version: 67, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 495, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 496, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1010, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1646, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 496, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1010] [region_id=493]
[2019/05/01 12:39:08.010 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_1642_6_7_(default|lock|write).sst] [snap_key=1642_6_7]
[2019/05/01 12:39:08.023 -07:00] [INFO] [unknown:1792] ["[region 1642] 1648 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 7, term: 6]"]
[2019/05/01 12:39:08.023 -07:00] [INFO] [unknown:1816] ["[region 1642] 1648 restored progress of 1643 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:39:08.023 -07:00] [INFO] [unknown:1816] ["[region 1642] 1648 restored progress of 1644 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:39:08.023 -07:00] [INFO] [unknown:1816] ["[region 1642] 1648 restored progress of 1645 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:39:08.023 -07:00] [INFO] [unknown:1816] ["[region 1642] 1648 restored progress of 1648 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:39:08.023 -07:00] [INFO] [unknown:474] ["[region 1642] 1648 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 7, term: 6]"]
[2019/05/01 12:39:08.023 -07:00] [INFO] [unknown:1736] ["[region 1642] 1648 [commit: 7] restored snapshot [index: 7, term: 6]"]
[2019/05/01 12:39:08.023 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=1648] [region_id=1642]
[2019/05/01 12:39:08.023 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 7, truncated_state: Some(RaftTruncatedState { index: 7, term: 6, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 1642, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 108, 99, 95, 116, 255, 105, 109, 101, 95, 255, 110, 97, 109, 255, 101, 115, 0, 0, 0, 252, 0, 0, 253], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 108, 105, 99, 101, 255, 110, 115, 101, 0, 254, 0, 0, 0, 252], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 237, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1643, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1644, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1645, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1648, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1648] [region_id=1642]
[2019/05/01 12:39:08.047 -07:00] [INFO] [unknown:1625] ["[region 1541] 1560 [term 6] received MsgTimeoutNow from 1544 and starts an election to get leadership."]
[2019/05/01 12:39:08.047 -07:00] [INFO] [unknown:739] ["[region 1541] 1560 became candidate at term 7"]
[2019/05/01 12:39:08.047 -07:00] [INFO] [unknown:854] ["[region 1541] 1560 received MsgRequestVoteResponse from 1560 at term 7"]
[2019/05/01 12:39:08.047 -07:00] [INFO] [unknown:828] ["[region 1541] 1560 [logterm: 6, index: 9] sent MsgRequestVote request to 1544 at term 7"]
[2019/05/01 12:39:08.047 -07:00] [INFO] [unknown:828] ["[region 1541] 1560 [logterm: 6, index: 9] sent MsgRequestVote request to 1542 at term 7"]
[2019/05/01 12:39:08.060 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 1642] 1648"]
[2019/05/01 12:39:08.060 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 1642, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 108, 99, 95, 116, 255, 105, 109, 101, 95, 255, 110, 97, 109, 255, 101, 115, 0, 0, 0, 252, 0, 0, 253], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 108, 105, 99, 101, 255, 110, 115, 101, 0, 254, 0, 0, 0, 252], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 237, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1643, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1644, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1645, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1648, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1648] [region_id=1642]
[2019/05/01 12:39:08.060 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=1642]
[2019/05/01 12:39:08.080 -07:00] [INFO] [unknown:1625] ["[region 1396] 1602 [term 6] received MsgTimeoutNow from 1399 and starts an election to get leadership."]
[2019/05/01 12:39:08.080 -07:00] [INFO] [unknown:739] ["[region 1396] 1602 became candidate at term 7"]
[2019/05/01 12:39:08.080 -07:00] [INFO] [unknown:854] ["[region 1396] 1602 received MsgRequestVoteResponse from 1602 at term 7"]
[2019/05/01 12:39:08.080 -07:00] [INFO] [unknown:828] ["[region 1396] 1602 [logterm: 6, index: 9] sent MsgRequestVote request to 1399 at term 7"]
[2019/05/01 12:39:08.080 -07:00] [INFO] [unknown:828] ["[region 1396] 1602 [logterm: 6, index: 9] sent MsgRequestVote request to 1397 at term 7"]
[2019/05/01 12:39:08.099 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=39.01412ms] [region_id=1642]
[2019/05/01 12:39:08.120 -07:00] [INFO] [unknown:854] ["[region 1541] 1560 received MsgRequestVoteResponse from 1544 at term 7"]
[2019/05/01 12:39:08.120 -07:00] [INFO] [unknown:1550] ["[region 1541] 1560 [quorum:2] has received 2 MsgRequestVoteResponse votes and 0 vote rejections"]
[2019/05/01 12:39:08.120 -07:00] [INFO] [unknown:789] ["[region 1541] 1560 became leader at term 7"]
[2019/05/01 12:39:08.165 -07:00] [INFO] [unknown:854] ["[region 1396] 1602 received MsgRequestVoteResponse from 1397 at term 7"]
[2019/05/01 12:39:08.165 -07:00] [INFO] [unknown:1550] ["[region 1396] 1602 [quorum:2] has received 2 MsgRequestVoteResponse votes and 0 vote rejections"]
[2019/05/01 12:39:08.165 -07:00] [INFO] [unknown:789] ["[region 1396] 1602 became leader at term 7"]
[2019/05/01 12:39:08.296 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=1650] [region_id=1232]
[2019/05/01 12:39:08.296 -07:00] [INFO] [unknown:719] ["[region 1232] 1650 became follower at term 0"]
[2019/05/01 12:39:08.296 -07:00] [INFO] [unknown:295] ["[region 1232] 1650 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:39:08.296 -07:00] [INFO] [unknown:719] ["[region 1232] 1650 became follower at term 1"]
[2019/05/01 12:39:08.296 -07:00] [INFO] [unknown:920] ["[region 1232] 1650 [term: 1] received a MsgHeartbeat message with higher term from 1235 [term: 6]"]
[2019/05/01 12:39:08.296 -07:00] [INFO] [unknown:719] ["[region 1232] 1650 became follower at term 6"]
[2019/05/01 12:39:08.319 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 1647, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=9] [term=7] [peer_id=1647] [region_id=1445]
[2019/05/01 12:39:08.320 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 6, version: 197, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=1647] [region_id=1445]
[2019/05/01 12:39:08.320 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 1445, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 114, 255, 111, 108, 108, 255, 98, 97, 99, 107, 95, 255, 111, 110, 255, 95, 116, 105, 109, 101, 111, 255, 117, 255, 116, 0, 0, 0, 0, 0, 0, 249, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 114, 255, 111, 108, 108, 255, 98, 97, 99, 107, 95, 255, 115, 101, 255, 103, 109, 101, 110, 116, 115, 255, 0, 255, 0, 0, 0, 0, 0, 0, 0, 247, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 197, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1446, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1447, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1448, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1647, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1647, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1647] [region_id=1445]
[2019/05/01 12:39:08.412 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 1448, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=10] [term=7] [peer_id=1647] [region_id=1445]
[2019/05/01 12:39:08.417 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 7, version: 197, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=1647] [region_id=1445]
[2019/05/01 12:39:08.417 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 1445, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 114, 255, 111, 108, 108, 255, 98, 97, 99, 107, 95, 255, 111, 110, 255, 95, 116, 105, 109, 101, 111, 255, 117, 255, 116, 0, 0, 0, 0, 0, 0, 249, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 114, 255, 111, 108, 108, 255, 98, 97, 99, 107, 95, 255, 115, 101, 255, 103, 109, 101, 110, 116, 115, 255, 0, 255, 0, 0, 0, 0, 0, 0, 0, 247, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 7, version: 197, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1446, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1447, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1448, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1647, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1448, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1647] [region_id=1445]
[2019/05/01 12:39:09.089 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 1648, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=8] [term=6] [peer_id=1648] [region_id=1642]
[2019/05/01 12:39:09.089 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 6, version: 237, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=1648] [region_id=1642]
[2019/05/01 12:39:09.089 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 1642, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 108, 99, 95, 116, 255, 105, 109, 101, 95, 255, 110, 97, 109, 255, 101, 115, 0, 0, 0, 252, 0, 0, 253], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 108, 105, 99, 101, 255, 110, 115, 101, 0, 254, 0, 0, 0, 252], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 237, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1643, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1644, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1645, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1648, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1648, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1648] [region_id=1642]
[2019/05/01 12:39:09.145 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 1643, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=9] [term=6] [peer_id=1648] [region_id=1642]
[2019/05/01 12:39:09.145 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 7, version: 237, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=1648] [region_id=1642]
[2019/05/01 12:39:09.145 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 1642, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 108, 99, 95, 116, 255, 105, 109, 101, 95, 255, 110, 97, 109, 255, 101, 115, 0, 0, 0, 252, 0, 0, 253], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 108, 105, 99, 101, 255, 110, 115, 101, 0, 254, 0, 0, 0, 252], region_epoch: Some(RegionEpoch { conf_ver: 7, version: 237, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1643, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1644, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1645, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1648, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1643, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1648] [region_id=1642]
[2019/05/01 12:39:10.010 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=1652] [region_id=1578]
[2019/05/01 12:39:10.018 -07:00] [INFO] [unknown:719] ["[region 1578] 1652 became follower at term 0"]
[2019/05/01 12:39:10.018 -07:00] [INFO] [unknown:295] ["[region 1578] 1652 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:39:10.018 -07:00] [INFO] [unknown:719] ["[region 1578] 1652 became follower at term 1"]
[2019/05/01 12:39:10.018 -07:00] [INFO] [unknown:920] ["[region 1578] 1652 [term: 1] received a MsgHeartbeat message with higher term from 1581 [term: 6]"]
[2019/05/01 12:39:10.018 -07:00] [INFO] [unknown:719] ["[region 1578] 1652 became follower at term 6"]
[2019/05/01 12:39:10.300 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_1232_6_7_(default|lock|write).sst] [snap_key=1232_6_7]
[2019/05/01 12:39:10.310 -07:00] [INFO] [unknown:1792] ["[region 1232] 1650 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 7, term: 6]"]
[2019/05/01 12:39:10.310 -07:00] [INFO] [unknown:1816] ["[region 1232] 1650 restored progress of 1233 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:39:10.310 -07:00] [INFO] [unknown:1816] ["[region 1232] 1650 restored progress of 1234 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:39:10.310 -07:00] [INFO] [unknown:1816] ["[region 1232] 1650 restored progress of 1235 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:39:10.310 -07:00] [INFO] [unknown:1816] ["[region 1232] 1650 restored progress of 1650 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:39:10.310 -07:00] [INFO] [unknown:474] ["[region 1232] 1650 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 7, term: 6]"]
[2019/05/01 12:39:10.310 -07:00] [INFO] [unknown:1736] ["[region 1232] 1650 [commit: 7] restored snapshot [index: 7, term: 6]"]
[2019/05/01 12:39:10.310 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=1650] [region_id=1232]
[2019/05/01 12:39:10.310 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 7, truncated_state: Some(RaftTruncatedState { index: 7, term: 6, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 1232, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 102, 255, 116, 95, 110, 255, 117, 109, 95, 119, 111, 255, 114, 100, 255, 95, 111, 112, 116, 105, 109, 255, 105, 255, 122, 101, 0, 0, 0, 0, 0, 250, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 102, 255, 116, 95, 114, 255, 101, 115, 117, 108, 116, 255, 95, 99, 255, 97, 99, 104, 101, 95, 108, 255, 105, 255, 109, 105, 116, 0, 0, 0, 0, 251, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 157, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1233, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1234, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1235, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1650, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1650] [region_id=1232]
[2019/05/01 12:39:10.326 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 1232] 1650"]
[2019/05/01 12:39:10.326 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 1232, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 102, 255, 116, 95, 110, 255, 117, 109, 95, 119, 111, 255, 114, 100, 255, 95, 111, 112, 116, 105, 109, 255, 105, 255, 122, 101, 0, 0, 0, 0, 0, 250, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 102, 255, 116, 95, 114, 255, 101, 115, 117, 108, 116, 255, 95, 99, 255, 97, 99, 104, 101, 95, 108, 255, 105, 255, 109, 105, 116, 0, 0, 0, 0, 251, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 157, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1233, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1234, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1235, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1650, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1650] [region_id=1232]
[2019/05/01 12:39:10.326 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=1232]
[2019/05/01 12:39:10.355 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=28.512778ms] [region_id=1232]
[2019/05/01 12:39:11.325 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 1650, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=8] [term=6] [peer_id=1650] [region_id=1232]
[2019/05/01 12:39:11.325 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 6, version: 157, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=1650] [region_id=1232]
[2019/05/01 12:39:11.325 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 1232, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 102, 255, 116, 95, 110, 255, 117, 109, 95, 119, 111, 255, 114, 100, 255, 95, 111, 112, 116, 105, 109, 255, 105, 255, 122, 101, 0, 0, 0, 0, 0, 250, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 102, 255, 116, 95, 114, 255, 101, 115, 117, 108, 116, 255, 95, 99, 255, 97, 99, 104, 101, 95, 108, 255, 105, 255, 109, 105, 116, 0, 0, 0, 0, 251, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 157, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1233, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1234, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1235, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1650, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1650, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1650] [region_id=1232]
[2019/05/01 12:39:11.409 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 1233, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=9] [term=6] [peer_id=1650] [region_id=1232]
[2019/05/01 12:39:11.409 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 7, version: 157, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=1650] [region_id=1232]
[2019/05/01 12:39:11.409 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 1232, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 102, 255, 116, 95, 110, 255, 117, 109, 95, 119, 111, 255, 114, 100, 255, 95, 111, 112, 116, 105, 109, 255, 105, 255, 122, 101, 0, 0, 0, 0, 0, 250, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 102, 255, 116, 95, 114, 255, 101, 115, 117, 108, 116, 255, 95, 99, 255, 97, 99, 104, 101, 95, 108, 255, 105, 255, 109, 105, 116, 0, 0, 0, 0, 251, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 7, version: 157, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1233, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1234, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1235, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1650, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1233, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1650] [region_id=1232]
[2019/05/01 12:39:12.031 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_1578_6_7_(default|lock|write).sst] [snap_key=1578_6_7]
[2019/05/01 12:39:12.049 -07:00] [INFO] [unknown:1792] ["[region 1578] 1652 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 7, term: 6]"]
[2019/05/01 12:39:12.049 -07:00] [INFO] [unknown:1816] ["[region 1578] 1652 restored progress of 1579 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:39:12.049 -07:00] [INFO] [unknown:1816] ["[region 1578] 1652 restored progress of 1580 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:39:12.049 -07:00] [INFO] [unknown:1816] ["[region 1578] 1652 restored progress of 1581 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:39:12.049 -07:00] [INFO] [unknown:1816] ["[region 1578] 1652 restored progress of 1652 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:39:12.049 -07:00] [INFO] [unknown:474] ["[region 1578] 1652 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 7, term: 6]"]
[2019/05/01 12:39:12.049 -07:00] [INFO] [unknown:1736] ["[region 1578] 1652 [commit: 7] restored snapshot [index: 7, term: 6]"]
[2019/05/01 12:39:12.049 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=1652] [region_id=1578]
[2019/05/01 12:39:12.049 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 7, truncated_state: Some(RaftTruncatedState { index: 7, term: 6, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 1578, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 118, 255, 101, 114, 115, 255, 105, 111, 110, 0, 0, 253, 0, 0, 253], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 119, 255, 114, 105, 116, 255, 101, 95, 105, 111, 95, 255, 116, 104, 255, 114, 101, 97, 100, 115, 0, 254, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 227, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1579, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1580, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1581, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1652, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1652] [region_id=1578]
[2019/05/01 12:39:12.125 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 1578] 1652"]
[2019/05/01 12:39:12.125 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 1578, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 118, 255, 101, 114, 115, 255, 105, 111, 110, 0, 0, 253, 0, 0, 253], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 119, 255, 114, 105, 116, 255, 101, 95, 105, 111, 95, 255, 116, 104, 255, 114, 101, 97, 100, 115, 0, 254, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 227, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1579, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1580, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1581, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1652, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1652] [region_id=1578]
[2019/05/01 12:39:12.125 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=1578]
[2019/05/01 12:39:12.163 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=38.172937ms] [region_id=1578]
[2019/05/01 12:39:13.037 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 1652, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=8] [term=6] [peer_id=1652] [region_id=1578]
[2019/05/01 12:39:13.037 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 6, version: 227, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=1652] [region_id=1578]
[2019/05/01 12:39:13.037 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 1578, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 118, 255, 101, 114, 115, 255, 105, 111, 110, 0, 0, 253, 0, 0, 253], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 119, 255, 114, 105, 116, 255, 101, 95, 105, 111, 95, 255, 116, 104, 255, 114, 101, 97, 100, 115, 0, 254, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 227, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1579, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1580, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1581, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1652, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1652, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1652] [region_id=1578]
[2019/05/01 12:39:13.100 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 1579, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=9] [term=6] [peer_id=1652] [region_id=1578]
[2019/05/01 12:39:13.100 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 7, version: 227, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=1652] [region_id=1578]
[2019/05/01 12:39:13.100 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 1578, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 118, 255, 101, 114, 115, 255, 105, 111, 110, 0, 0, 253, 0, 0, 253], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 119, 255, 114, 105, 116, 255, 101, 95, 105, 111, 95, 255, 116, 104, 255, 114, 101, 97, 100, 115, 0, 254, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 7, version: 227, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1579, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1580, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1581, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1652, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1579, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1652] [region_id=1578]
[2019/05/01 12:39:14.090 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=1695] [region_id=582]
[2019/05/01 12:39:14.090 -07:00] [INFO] [unknown:719] ["[region 582] 1695 became follower at term 0"]
[2019/05/01 12:39:14.090 -07:00] [INFO] [unknown:295] ["[region 582] 1695 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:39:14.090 -07:00] [INFO] [unknown:719] ["[region 582] 1695 became follower at term 1"]
[2019/05/01 12:39:14.090 -07:00] [INFO] [unknown:920] ["[region 582] 1695 [term: 1] received a MsgHeartbeat message with higher term from 585 [term: 7]"]
[2019/05/01 12:39:14.090 -07:00] [INFO] [unknown:719] ["[region 582] 1695 became follower at term 7"]
[2019/05/01 12:39:14.310 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=1696] [region_id=1244]
[2019/05/01 12:39:14.310 -07:00] [INFO] [unknown:719] ["[region 1244] 1696 became follower at term 0"]
[2019/05/01 12:39:14.310 -07:00] [INFO] [unknown:295] ["[region 1244] 1696 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:39:14.310 -07:00] [INFO] [unknown:719] ["[region 1244] 1696 became follower at term 1"]
[2019/05/01 12:39:14.310 -07:00] [INFO] [unknown:920] ["[region 1244] 1696 [term: 1] received a MsgHeartbeat message with higher term from 1247 [term: 6]"]
[2019/05/01 12:39:14.310 -07:00] [INFO] [unknown:719] ["[region 1244] 1696 became follower at term 6"]
[2019/05/01 12:39:15.906 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=1698] [region_id=1011]
[2019/05/01 12:39:15.906 -07:00] [INFO] [unknown:719] ["[region 1011] 1698 became follower at term 0"]
[2019/05/01 12:39:15.906 -07:00] [INFO] [unknown:295] ["[region 1011] 1698 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:39:15.906 -07:00] [INFO] [unknown:719] ["[region 1011] 1698 became follower at term 1"]
[2019/05/01 12:39:15.906 -07:00] [INFO] [unknown:920] ["[region 1011] 1698 [term: 1] received a MsgHeartbeat message with higher term from 1012 [term: 6]"]
[2019/05/01 12:39:15.906 -07:00] [INFO] [unknown:719] ["[region 1011] 1698 became follower at term 6"]
[2019/05/01 12:39:16.094 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_582_7_8_(default|lock|write).sst] [snap_key=582_7_8]
[2019/05/01 12:39:16.102 -07:00] [INFO] [unknown:1792] ["[region 582] 1695 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 8, term: 7]"]
[2019/05/01 12:39:16.102 -07:00] [INFO] [unknown:1816] ["[region 582] 1695 restored progress of 583 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:39:16.102 -07:00] [INFO] [unknown:1816] ["[region 582] 1695 restored progress of 584 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:39:16.102 -07:00] [INFO] [unknown:1816] ["[region 582] 1695 restored progress of 585 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:39:16.102 -07:00] [INFO] [unknown:1816] ["[region 582] 1695 restored progress of 1695 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:39:16.102 -07:00] [INFO] [unknown:474] ["[region 582] 1695 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 8, term: 7]"]
[2019/05/01 12:39:16.102 -07:00] [INFO] [unknown:1736] ["[region 582] 1695 [commit: 8] restored snapshot [index: 8, term: 7]"]
[2019/05/01 12:39:16.102 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=1695] [region_id=582]
[2019/05/01 12:39:16.102 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 8, truncated_state: Some(RaftTruncatedState { index: 8, term: 7, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 582, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 101, 120, 112, 105, 255, 114, 101, 95, 108, 255, 111, 103, 115, 255, 95, 100, 97, 121, 115, 255, 0, 0, 255, 0, 0, 0, 0, 0, 0, 247, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 101, 120, 112, 108, 255, 105, 99, 105, 116, 255, 95, 100, 101, 255, 102, 97, 117, 108, 116, 255, 115, 95, 255, 102, 111, 114, 95, 116, 105, 255, 109, 255, 101, 115, 116, 97, 109, 112, 0, 254, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 77, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 583, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 584, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 585, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1695, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1695] [region_id=582]
[2019/05/01 12:39:16.123 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 582] 1695"]
[2019/05/01 12:39:16.123 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 582, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 101, 120, 112, 105, 255, 114, 101, 95, 108, 255, 111, 103, 115, 255, 95, 100, 97, 121, 115, 255, 0, 0, 255, 0, 0, 0, 0, 0, 0, 247, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 101, 120, 112, 108, 255, 105, 99, 105, 116, 255, 95, 100, 101, 255, 102, 97, 117, 108, 116, 255, 115, 95, 255, 102, 111, 114, 95, 116, 105, 255, 109, 255, 101, 115, 116, 97, 109, 112, 0, 254, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 77, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 583, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 584, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 585, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1695, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1695] [region_id=582]
[2019/05/01 12:39:16.123 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=582]
[2019/05/01 12:39:16.144 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=21.174747ms] [region_id=582]
[2019/05/01 12:39:16.314 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_1244_6_7_(default|lock|write).sst] [snap_key=1244_6_7]
[2019/05/01 12:39:16.323 -07:00] [INFO] [unknown:1792] ["[region 1244] 1696 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 7, term: 6]"]
[2019/05/01 12:39:16.324 -07:00] [INFO] [unknown:1816] ["[region 1244] 1696 restored progress of 1245 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:39:16.324 -07:00] [INFO] [unknown:1816] ["[region 1244] 1696 restored progress of 1246 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:39:16.324 -07:00] [INFO] [unknown:1816] ["[region 1244] 1696 restored progress of 1247 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:39:16.324 -07:00] [INFO] [unknown:1816] ["[region 1244] 1696 restored progress of 1696 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:39:16.324 -07:00] [INFO] [unknown:474] ["[region 1244] 1696 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 7, term: 6]"]
[2019/05/01 12:39:16.324 -07:00] [INFO] [unknown:1736] ["[region 1244] 1696 [commit: 7] restored snapshot [index: 7, term: 6]"]
[2019/05/01 12:39:16.324 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=1696] [region_id=1244]
[2019/05/01 12:39:16.324 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 7, truncated_state: Some(RaftTruncatedState { index: 7, term: 6, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 1244, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 102, 255, 116, 95, 115, 255, 111, 114, 116, 95, 112, 255, 108, 108, 255, 95, 100, 101, 103, 114, 101, 255, 101, 255, 0, 0, 0, 0, 0, 0, 0, 248, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 102, 255, 116, 95, 116, 255, 111, 116, 97, 108, 95, 255, 99, 97, 255, 99, 104, 101, 95, 115, 105, 255, 122, 255, 101, 0, 0, 0, 0, 0, 0, 249, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 157, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1245, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1246, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1247, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1696, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1696] [region_id=1244]
[2019/05/01 12:39:16.348 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 1244, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 102, 255, 116, 95, 115, 255, 111, 114, 116, 95, 112, 255, 108, 108, 255, 95, 100, 101, 103, 114, 101, 255, 101, 255, 0, 0, 0, 0, 0, 0, 0, 248, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 102, 255, 116, 95, 116, 255, 111, 116, 97, 108, 95, 255, 99, 97, 255, 99, 104, 101, 95, 115, 105, 255, 122, 255, 101, 0, 0, 0, 0, 0, 0, 249, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 157, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1245, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1246, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1247, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1696, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1696] [region_id=1244]
[2019/05/01 12:39:16.348 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=1244]
[2019/05/01 12:39:16.348 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 1244] 1696"]
[2019/05/01 12:39:16.385 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=37.243299ms] [region_id=1244]
[2019/05/01 12:39:17.155 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 1695, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=9] [term=7] [peer_id=1695] [region_id=582]
[2019/05/01 12:39:17.155 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 6, version: 77, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=1695] [region_id=582]
[2019/05/01 12:39:17.155 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 582, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 101, 120, 112, 105, 255, 114, 101, 95, 108, 255, 111, 103, 115, 255, 95, 100, 97, 121, 115, 255, 0, 0, 255, 0, 0, 0, 0, 0, 0, 247, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 101, 120, 112, 108, 255, 105, 99, 105, 116, 255, 95, 100, 101, 255, 102, 97, 117, 108, 116, 255, 115, 95, 255, 102, 111, 114, 95, 116, 105, 255, 109, 255, 101, 115, 116, 97, 109, 112, 0, 254, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 77, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 583, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 584, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 585, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1695, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1695, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1695] [region_id=582]
[2019/05/01 12:39:17.194 -07:00] [INFO] [unknown:1625] ["[region 421] 663 [term 7] received MsgTimeoutNow from 423 and starts an election to get leadership."]
[2019/05/01 12:39:17.194 -07:00] [INFO] [unknown:739] ["[region 421] 663 became candidate at term 8"]
[2019/05/01 12:39:17.194 -07:00] [INFO] [unknown:854] ["[region 421] 663 received MsgRequestVoteResponse from 663 at term 8"]
[2019/05/01 12:39:17.194 -07:00] [INFO] [unknown:828] ["[region 421] 663 [logterm: 7, index: 10] sent MsgRequestVote request to 424 at term 8"]
[2019/05/01 12:39:17.194 -07:00] [INFO] [unknown:828] ["[region 421] 663 [logterm: 7, index: 10] sent MsgRequestVote request to 423 at term 8"]
[2019/05/01 12:39:17.224 -07:00] [INFO] [unknown:1625] ["[region 138] 440 [term 7] received MsgTimeoutNow from 140 and starts an election to get leadership."]
[2019/05/01 12:39:17.224 -07:00] [INFO] [unknown:739] ["[region 138] 440 became candidate at term 8"]
[2019/05/01 12:39:17.224 -07:00] [INFO] [unknown:854] ["[region 138] 440 received MsgRequestVoteResponse from 440 at term 8"]
[2019/05/01 12:39:17.224 -07:00] [INFO] [unknown:828] ["[region 138] 440 [logterm: 7, index: 13] sent MsgRequestVote request to 316 at term 8"]
[2019/05/01 12:39:17.224 -07:00] [INFO] [unknown:828] ["[region 138] 440 [logterm: 7, index: 13] sent MsgRequestVote request to 140 at term 8"]
[2019/05/01 12:39:17.224 -07:00] [INFO] [unknown:1625] ["[region 1043] 1100 [term 7] received MsgTimeoutNow from 1045 and starts an election to get leadership."]
[2019/05/01 12:39:17.224 -07:00] [INFO] [unknown:739] ["[region 1043] 1100 became candidate at term 8"]
[2019/05/01 12:39:17.224 -07:00] [INFO] [unknown:854] ["[region 1043] 1100 received MsgRequestVoteResponse from 1100 at term 8"]
[2019/05/01 12:39:17.232 -07:00] [INFO] [unknown:828] ["[region 1043] 1100 [logterm: 7, index: 10] sent MsgRequestVote request to 1044 at term 8"]
[2019/05/01 12:39:17.232 -07:00] [INFO] [unknown:828] ["[region 1043] 1100 [logterm: 7, index: 10] sent MsgRequestVote request to 1045 at term 8"]
[2019/05/01 12:39:17.235 -07:00] [INFO] [unknown:854] ["[region 421] 663 received MsgRequestVoteResponse from 423 at term 8"]
[2019/05/01 12:39:17.243 -07:00] [INFO] [unknown:1550] ["[region 421] 663 [quorum:2] has received 2 MsgRequestVoteResponse votes and 0 vote rejections"]
[2019/05/01 12:39:17.243 -07:00] [INFO] [unknown:789] ["[region 421] 663 became leader at term 8"]
[2019/05/01 12:39:17.243 -07:00] [INFO] [unknown:920] ["[region 153] 329 [term: 7] received a MsgRequestVote message with higher term from 488 [term: 8]"]
[2019/05/01 12:39:17.243 -07:00] [INFO] [unknown:719] ["[region 153] 329 became follower at term 8"]
[2019/05/01 12:39:17.243 -07:00] [INFO] [unknown:1083] ["[region 153] 329 [logterm: 7, index: 19, vote: 0] cast MsgRequestVote for 488 [logterm: 7, index: 19] at term 8"]
[2019/05/01 12:39:17.277 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 584, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=10] [term=7] [peer_id=1695] [region_id=582]
[2019/05/01 12:39:17.277 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 7, version: 77, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=1695] [region_id=582]
[2019/05/01 12:39:17.277 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 582, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 101, 120, 112, 105, 255, 114, 101, 95, 108, 255, 111, 103, 115, 255, 95, 100, 97, 121, 115, 255, 0, 0, 255, 0, 0, 0, 0, 0, 0, 247, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 101, 120, 112, 108, 255, 105, 99, 105, 116, 255, 95, 100, 101, 255, 102, 97, 117, 108, 116, 255, 115, 95, 255, 102, 111, 114, 95, 116, 105, 255, 109, 255, 101, 115, 116, 97, 109, 112, 0, 254, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 7, version: 77, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 583, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 584, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 585, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1695, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 584, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1695] [region_id=582]
[2019/05/01 12:39:17.328 -07:00] [INFO] [unknown:854] ["[region 138] 440 received MsgRequestVoteResponse from 140 at term 8"]
[2019/05/01 12:39:17.328 -07:00] [INFO] [unknown:1550] ["[region 138] 440 [quorum:2] has received 2 MsgRequestVoteResponse votes and 0 vote rejections"]
[2019/05/01 12:39:17.328 -07:00] [INFO] [unknown:789] ["[region 138] 440 became leader at term 8"]
[2019/05/01 12:39:17.328 -07:00] [INFO] [unknown:854] ["[region 1043] 1100 received MsgRequestVoteResponse from 1045 at term 8"]
[2019/05/01 12:39:17.328 -07:00] [INFO] [unknown:1550] ["[region 1043] 1100 [quorum:2] has received 2 MsgRequestVoteResponse votes and 0 vote rejections"]
[2019/05/01 12:39:17.328 -07:00] [INFO] [unknown:789] ["[region 1043] 1100 became leader at term 8"]
[2019/05/01 12:39:17.437 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 1696, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=8] [term=6] [peer_id=1696] [region_id=1244]
[2019/05/01 12:39:17.437 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 6, version: 157, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=1696] [region_id=1244]
[2019/05/01 12:39:17.437 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 1244, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 102, 255, 116, 95, 115, 255, 111, 114, 116, 95, 112, 255, 108, 108, 255, 95, 100, 101, 103, 114, 101, 255, 101, 255, 0, 0, 0, 0, 0, 0, 0, 248, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 102, 255, 116, 95, 116, 255, 111, 116, 97, 108, 95, 255, 99, 97, 255, 99, 104, 101, 95, 115, 105, 255, 122, 255, 101, 0, 0, 0, 0, 0, 0, 249, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 157, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1245, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1246, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1247, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1696, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1696, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1696] [region_id=1244]
[2019/05/01 12:39:17.529 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 1246, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=9] [term=6] [peer_id=1696] [region_id=1244]
[2019/05/01 12:39:17.529 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 7, version: 157, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=1696] [region_id=1244]
[2019/05/01 12:39:17.529 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 1244, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 102, 255, 116, 95, 115, 255, 111, 114, 116, 95, 112, 255, 108, 108, 255, 95, 100, 101, 103, 114, 101, 255, 101, 255, 0, 0, 0, 0, 0, 0, 0, 248, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 102, 255, 116, 95, 116, 255, 111, 116, 97, 108, 95, 255, 99, 97, 255, 99, 104, 101, 95, 115, 105, 255, 122, 255, 101, 0, 0, 0, 0, 0, 0, 249, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 7, version: 157, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1245, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1246, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1247, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1696, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1246, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1696] [region_id=1244]
[2019/05/01 12:39:17.567 -07:00] [INFO] [pd.rs:558] ["try to change peer"] [peer="Peer { id: 1701, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [change_type=AddLearnerNode] [region_id=602]
[2019/05/01 12:39:17.567 -07:00] [INFO] [peer.rs:1953] ["propose conf change peer"] [change_peer=1701] [change_type=AddLearnerNode] [peer_id=779] [region_id=602]
[2019/05/01 12:39:17.634 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddLearnerNode, peer: Some(Peer { id: 1701, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=12] [term=8] [peer_id=779] [region_id=602]
[2019/05/01 12:39:17.634 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 8, version: 77, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddLearner] [peer_id=779] [region_id=602]
[2019/05/01 12:39:17.634 -07:00] [INFO] [apply.rs:1476] ["add learner successfully"] [region="Region { id: 602, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 102, 116, 95, 98, 255, 111, 111, 108, 101, 255, 97, 110, 95, 255, 115, 121, 110, 116, 97, 255, 120, 0, 255, 0, 0, 0, 0, 0, 0, 248, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 102, 116, 95, 109, 255, 97, 120, 95, 119, 255, 111, 114, 100, 255, 95, 108, 101, 110, 0, 254, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 8, version: 77, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 604, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 605, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 779, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1701, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=779] [region_id=602]
[2019/05/01 12:39:17.650 -07:00] [INFO] [peer.rs:1318] ["notify pd with change peer region"] [region="Region { id: 602, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 102, 116, 95, 98, 255, 111, 111, 108, 101, 255, 97, 110, 95, 255, 115, 121, 110, 116, 97, 255, 120, 0, 255, 0, 0, 0, 0, 0, 0, 248, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 102, 116, 95, 109, 255, 97, 120, 95, 119, 255, 111, 114, 100, 255, 95, 108, 101, 110, 0, 254, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 77, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 604, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 605, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 779, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1701, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=779] [region_id=602]
[2019/05/01 12:39:17.910 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_1011_6_10_(default|lock|write).sst] [snap_key=1011_6_10]
[2019/05/01 12:39:17.920 -07:00] [INFO] [unknown:1792] ["[region 1011] 1698 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 10, term: 6]"]
[2019/05/01 12:39:17.920 -07:00] [INFO] [unknown:1816] ["[region 1011] 1698 restored progress of 1012 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:39:17.920 -07:00] [INFO] [unknown:1816] ["[region 1011] 1698 restored progress of 1014 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:39:17.920 -07:00] [INFO] [unknown:1816] ["[region 1011] 1698 restored progress of 1507 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:39:17.920 -07:00] [INFO] [unknown:1816] ["[region 1011] 1698 restored progress of 1698 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:39:17.920 -07:00] [INFO] [unknown:474] ["[region 1011] 1698 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 10, term: 6]"]
[2019/05/01 12:39:17.921 -07:00] [INFO] [unknown:1736] ["[region 1011] 1698 [commit: 10] restored snapshot [index: 10, term: 6]"]
[2019/05/01 12:39:17.921 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=1698] [region_id=1011]
[2019/05/01 12:39:17.921 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 10, truncated_state: Some(RaftTruncatedState { index: 10, term: 6, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 1011, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 97, 255, 112, 105, 95, 255, 116, 114, 120, 95, 108, 255, 101, 118, 255, 101, 108, 0, 0, 0, 0, 251, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 97, 255, 117, 116, 111, 255, 101, 120, 116, 101, 110, 255, 100, 95, 255, 105, 110, 99, 114, 101, 109, 255, 101, 255, 110, 116, 0, 0, 0, 0, 0, 250, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 117, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1012, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1014, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1507, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1698, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1698] [region_id=1011]
[2019/05/01 12:39:17.947 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 1011] 1698"]
[2019/05/01 12:39:17.947 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 1011, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 97, 255, 112, 105, 95, 255, 116, 114, 120, 95, 108, 255, 101, 118, 255, 101, 108, 0, 0, 0, 0, 251, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 97, 255, 117, 116, 111, 255, 101, 120, 116, 101, 110, 255, 100, 95, 255, 105, 110, 99, 114, 101, 109, 255, 101, 255, 110, 116, 0, 0, 0, 0, 0, 250, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 117, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1012, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1014, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1507, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1698, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1698] [region_id=1011]
[2019/05/01 12:39:17.947 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=1011]
[2019/05/01 12:39:17.976 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=28.463765ms] [region_id=1011]
[2019/05/01 12:39:18.176 -07:00] [INFO] [peer_storage.rs:759] ["requesting snapshot"] [peer_id=779] [region_id=602]
[2019/05/01 12:39:18.177 -07:00] [INFO] [snap.rs:757] ["scan snapshot of one cf"] [size=0] [key_count=0] [cf=default] [snapshot=/opt/tidb/data/kv/snap/gen_602_8_12_(default|lock|write).sst] [region_id=602]
[2019/05/01 12:39:18.177 -07:00] [INFO] [snap.rs:757] ["scan snapshot of one cf"] [size=0] [key_count=0] [cf=lock] [snapshot=/opt/tidb/data/kv/snap/gen_602_8_12_(default|lock|write).sst] [region_id=602]
[2019/05/01 12:39:18.177 -07:00] [INFO] [snap.rs:757] ["scan snapshot of one cf"] [size=156] [key_count=2] [cf=write] [snapshot=/opt/tidb/data/kv/snap/gen_602_8_12_(default|lock|write).sst] [region_id=602]
[2019/05/01 12:39:18.196 -07:00] [INFO] [snap.rs:875] ["scan snapshot"] [takes=19.528717ms] [size=1414] [key_count=2] [snapshot=/opt/tidb/data/kv/snap/gen_602_8_12_(default|lock|write).sst] [region_id=602]
[2019/05/01 12:39:18.221 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=1700] [region_id=1182]
[2019/05/01 12:39:18.221 -07:00] [INFO] [unknown:719] ["[region 1182] 1700 became follower at term 0"]
[2019/05/01 12:39:18.221 -07:00] [INFO] [unknown:295] ["[region 1182] 1700 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:39:18.221 -07:00] [INFO] [unknown:719] ["[region 1182] 1700 became follower at term 1"]
[2019/05/01 12:39:18.221 -07:00] [INFO] [unknown:920] ["[region 1182] 1700 [term: 1] received a MsgHeartbeat message with higher term from 1184 [term: 7]"]
[2019/05/01 12:39:18.221 -07:00] [INFO] [unknown:719] ["[region 1182] 1700 became follower at term 7"]
[2019/05/01 12:39:18.995 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 1698, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=11] [term=6] [peer_id=1698] [region_id=1011]
[2019/05/01 12:39:18.995 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 9, version: 117, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=1698] [region_id=1011]
[2019/05/01 12:39:18.995 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 1011, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 97, 255, 112, 105, 95, 255, 116, 114, 120, 95, 108, 255, 101, 118, 255, 101, 108, 0, 0, 0, 0, 251, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 97, 255, 117, 116, 111, 255, 101, 120, 116, 101, 110, 255, 100, 95, 255, 105, 110, 99, 114, 101, 109, 255, 101, 255, 110, 116, 0, 0, 0, 0, 0, 250, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 117, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1012, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1014, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1507, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1698, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1698, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1698] [region_id=1011]
[2019/05/01 12:39:19.129 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 1014, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=12] [term=6] [peer_id=1698] [region_id=1011]
[2019/05/01 12:39:19.129 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 10, version: 117, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=1698] [region_id=1011]
[2019/05/01 12:39:19.129 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 1011, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 97, 255, 112, 105, 95, 255, 116, 114, 120, 95, 108, 255, 101, 118, 255, 101, 108, 0, 0, 0, 0, 251, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 97, 255, 117, 116, 111, 255, 101, 120, 116, 101, 110, 255, 100, 95, 255, 105, 110, 99, 114, 101, 109, 255, 101, 255, 110, 116, 0, 0, 0, 0, 0, 250, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 10, version: 117, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1012, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1014, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1507, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1698, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1014, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1698] [region_id=1011]
[2019/05/01 12:39:20.034 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=1706] [region_id=1368]
[2019/05/01 12:39:20.034 -07:00] [INFO] [unknown:719] ["[region 1368] 1706 became follower at term 0"]
[2019/05/01 12:39:20.034 -07:00] [INFO] [unknown:295] ["[region 1368] 1706 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:39:20.034 -07:00] [INFO] [unknown:719] ["[region 1368] 1706 became follower at term 1"]
[2019/05/01 12:39:20.034 -07:00] [INFO] [unknown:920] ["[region 1368] 1706 [term: 1] received a MsgHeartbeat message with higher term from 1371 [term: 6]"]
[2019/05/01 12:39:20.034 -07:00] [INFO] [unknown:719] ["[region 1368] 1706 became follower at term 6"]
[2019/05/01 12:39:20.102 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=18_7_19] [peer_id=1553] [region_id=18]
[2019/05/01 12:39:20.102 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=30_7_12] [peer_id=1555] [region_id=30]
[2019/05/01 12:39:20.102 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=64_8_20] [peer_id=1462] [region_id=64]
[2019/05/01 12:39:20.103 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=321_7_11] [peer_id=1554] [region_id=321]
[2019/05/01 12:39:20.103 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=433_7_8] [peer_id=1404] [region_id=433]
[2019/05/01 12:39:20.103 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=525_6_7] [peer_id=1456] [region_id=525]
[2019/05/01 12:39:20.103 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=529_7_11] [peer_id=1460] [region_id=529]
[2019/05/01 12:39:20.103 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=582_7_8] [peer_id=1695] [region_id=582]
[2019/05/01 12:39:20.103 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=590_6_7] [peer_id=1506] [region_id=590]
[2019/05/01 12:39:20.103 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=796_6_7] [peer_id=1410] [region_id=796]
[2019/05/01 12:39:20.103 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=901_6_10] [peer_id=1455] [region_id=901]
[2019/05/01 12:39:20.103 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=1011_6_10] [peer_id=1698] [region_id=1011]
[2019/05/01 12:39:20.104 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=1063_6_7] [peer_id=1407] [region_id=1063]
[2019/05/01 12:39:20.104 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=1079_6_7] [peer_id=1508] [region_id=1079]
[2019/05/01 12:39:20.104 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=1087_7_11] [peer_id=1559] [region_id=1087]
[2019/05/01 12:39:20.104 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=1137_7_8] [peer_id=1605] [region_id=1137]
[2019/05/01 12:39:20.104 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=1220_6_7] [peer_id=1409] [region_id=1220]
[2019/05/01 12:39:20.104 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=1232_6_7] [peer_id=1650] [region_id=1232]
[2019/05/01 12:39:20.104 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=1244_6_7] [peer_id=1696] [region_id=1244]
[2019/05/01 12:39:20.104 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=1269_7_8] [peer_id=1510] [region_id=1269]
[2019/05/01 12:39:20.104 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=1273_6_7] [peer_id=1412] [region_id=1273]
[2019/05/01 12:39:20.104 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=1293_6_7] [peer_id=1461] [region_id=1293]
[2019/05/01 12:39:20.105 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=1396_6_7] [peer_id=1602] [region_id=1396]
[2019/05/01 12:39:20.105 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=1445_7_8] [peer_id=1647] [region_id=1445]
[2019/05/01 12:39:20.105 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=1479_6_7] [peer_id=1504] [region_id=1479]
[2019/05/01 12:39:20.105 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=1541_6_7] [peer_id=1560] [region_id=1541]
[2019/05/01 12:39:20.105 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=1578_6_7] [peer_id=1652] [region_id=1578]
[2019/05/01 12:39:20.105 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=1642_6_7] [peer_id=1648] [region_id=1642]
[2019/05/01 12:39:20.179 -07:00] [INFO] [unknown:841] ["New connected subchannel at 0x7f04126012d0 for subchannel 0x7f04cf8cc000"]
[2019/05/01 12:39:20.199 -07:00] [INFO] [snap.rs:389] ["sent snapshot"] [duration=21.151931ms] [size=1414] [snap_key=602_8_12] [region_id=602]
[2019/05/01 12:39:20.199 -07:00] [INFO] [peer.rs:538] ["report snapshot status"] [status=Finish] [to="Peer { id: 1701, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=779] [region_id=602]
[2019/05/01 12:39:20.225 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_1182_7_11_(default|lock|write).sst] [snap_key=1182_7_11]
[2019/05/01 12:39:20.244 -07:00] [INFO] [unknown:1792] ["[region 1182] 1700 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 11, term: 7]"]
[2019/05/01 12:39:20.244 -07:00] [INFO] [unknown:1816] ["[region 1182] 1700 restored progress of 1184 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:39:20.244 -07:00] [INFO] [unknown:1816] ["[region 1182] 1700 restored progress of 1185 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:39:20.244 -07:00] [INFO] [unknown:1816] ["[region 1182] 1700 restored progress of 1307 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:39:20.244 -07:00] [INFO] [unknown:1816] ["[region 1182] 1700 restored progress of 1700 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:39:20.244 -07:00] [INFO] [unknown:474] ["[region 1182] 1700 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 11, term: 7]"]
[2019/05/01 12:39:20.244 -07:00] [INFO] [unknown:1736] ["[region 1182] 1700 [commit: 11] restored snapshot [index: 11, term: 7]"]
[2019/05/01 12:39:20.244 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=1700] [region_id=1182]
[2019/05/01 12:39:20.244 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 11, truncated_state: Some(RaftTruncatedState { index: 11, term: 7, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 1182, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 102, 255, 111, 114, 99, 255, 101, 95, 114, 101, 99, 255, 111, 118, 255, 101, 114, 121, 0, 0, 0, 252, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 102, 255, 116, 95, 97, 255, 117, 120, 95, 116, 97, 255, 98, 108, 255, 101, 0, 0, 0, 0, 0, 250, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 147, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1184, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1185, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1307, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1700, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1700] [region_id=1182]
[2019/05/01 12:39:20.288 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 1182] 1700"]
[2019/05/01 12:39:20.288 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 1182, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 102, 255, 111, 114, 99, 255, 101, 95, 114, 101, 99, 255, 111, 118, 255, 101, 114, 121, 0, 0, 0, 252, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 102, 255, 116, 95, 97, 255, 117, 120, 95, 116, 97, 255, 98, 108, 255, 101, 0, 0, 0, 0, 0, 250, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 147, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1184, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1185, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1307, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1700, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1700] [region_id=1182]
[2019/05/01 12:39:20.288 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=1182]
[2019/05/01 12:39:20.333 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=45.068157ms] [region_id=1182]
[2019/05/01 12:39:21.179 -07:00] [INFO] [pd.rs:558] ["try to change peer"] [peer="Peer { id: 1701, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [change_type=AddNode] [region_id=602]
[2019/05/01 12:39:21.179 -07:00] [INFO] [peer.rs:1953] ["propose conf change peer"] [change_peer=1701] [change_type=AddNode] [peer_id=779] [region_id=602]
[2019/05/01 12:39:21.230 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 1701, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=13] [term=8] [peer_id=779] [region_id=602]
[2019/05/01 12:39:21.230 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 9, version: 77, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=779] [region_id=602]
[2019/05/01 12:39:21.230 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 602, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 102, 116, 95, 98, 255, 111, 111, 108, 101, 255, 97, 110, 95, 255, 115, 121, 110, 116, 97, 255, 120, 0, 255, 0, 0, 0, 0, 0, 0, 248, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 102, 116, 95, 109, 255, 97, 120, 95, 119, 255, 111, 114, 100, 255, 95, 108, 101, 110, 0, 254, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 77, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 604, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 605, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 779, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1701, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1701, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=779] [region_id=602]
[2019/05/01 12:39:21.254 -07:00] [INFO] [peer.rs:1318] ["notify pd with change peer region"] [region="Region { id: 602, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 102, 116, 95, 98, 255, 111, 111, 108, 101, 255, 97, 110, 95, 255, 115, 121, 110, 116, 97, 255, 120, 0, 255, 0, 0, 0, 0, 0, 0, 248, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 102, 116, 95, 109, 255, 97, 120, 95, 119, 255, 111, 114, 100, 255, 95, 108, 101, 110, 0, 254, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 10, version: 77, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 604, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 605, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 779, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1701, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=779] [region_id=602]
[2019/05/01 12:39:21.277 -07:00] [INFO] [pd.rs:558] ["try to change peer"] [peer="Peer { id: 605, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [change_type=RemoveNode] [region_id=602]
[2019/05/01 12:39:21.278 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 1700, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=12] [term=7] [peer_id=1700] [region_id=1182]
[2019/05/01 12:39:21.278 -07:00] [INFO] [peer.rs:1953] ["propose conf change peer"] [change_peer=605] [change_type=RemoveNode] [peer_id=779] [region_id=602]
[2019/05/01 12:39:21.278 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 9, version: 147, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=1700] [region_id=1182]
[2019/05/01 12:39:21.278 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 1182, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 102, 255, 111, 114, 99, 255, 101, 95, 114, 101, 99, 255, 111, 118, 255, 101, 114, 121, 0, 0, 0, 252, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 102, 255, 116, 95, 97, 255, 117, 120, 95, 116, 97, 255, 98, 108, 255, 101, 0, 0, 0, 0, 0, 250, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 147, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1184, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1185, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1307, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1700, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1700, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1700] [region_id=1182]
[2019/05/01 12:39:21.366 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 605, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=14] [term=8] [peer_id=779] [region_id=602]
[2019/05/01 12:39:21.366 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 10, version: 77, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=779] [region_id=602]
[2019/05/01 12:39:21.366 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 602, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 102, 116, 95, 98, 255, 111, 111, 108, 101, 255, 97, 110, 95, 255, 115, 121, 110, 116, 97, 255, 120, 0, 255, 0, 0, 0, 0, 0, 0, 248, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 102, 116, 95, 109, 255, 97, 120, 95, 119, 255, 111, 114, 100, 255, 95, 108, 101, 110, 0, 254, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 10, version: 77, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 604, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 605, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 779, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1701, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 605, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=779] [region_id=602]
[2019/05/01 12:39:21.366 -07:00] [INFO] [pd.rs:558] ["try to change peer"] [peer="Peer { id: 605, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [change_type=RemoveNode] [region_id=602]
[2019/05/01 12:39:21.366 -07:00] [INFO] [peer.rs:1927] ["there is a pending conf change, try later"] [peer_id=779] [region_id=602]
[2019/05/01 12:39:21.382 -07:00] [INFO] [peer.rs:1318] ["notify pd with change peer region"] [region="Region { id: 602, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 102, 116, 95, 98, 255, 111, 111, 108, 101, 255, 97, 110, 95, 255, 115, 121, 110, 116, 97, 255, 120, 0, 255, 0, 0, 0, 0, 0, 0, 248, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 102, 116, 95, 109, 255, 97, 120, 95, 119, 255, 111, 114, 100, 255, 95, 108, 101, 110, 0, 254, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 11, version: 77, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 604, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 779, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1701, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=779] [region_id=602]
[2019/05/01 12:39:21.423 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 1185, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=13] [term=7] [peer_id=1700] [region_id=1182]
[2019/05/01 12:39:21.423 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 10, version: 147, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=1700] [region_id=1182]
[2019/05/01 12:39:21.423 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 1182, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 102, 255, 111, 114, 99, 255, 101, 95, 114, 101, 99, 255, 111, 118, 255, 101, 114, 121, 0, 0, 0, 252, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 102, 255, 116, 95, 97, 255, 117, 120, 95, 116, 97, 255, 98, 108, 255, 101, 0, 0, 0, 0, 0, 250, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 10, version: 147, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1184, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1185, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1307, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1700, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1185, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1700] [region_id=1182]
[2019/05/01 12:39:22.038 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_1368_6_7_(default|lock|write).sst] [snap_key=1368_6_7]
[2019/05/01 12:39:22.091 -07:00] [INFO] [unknown:1792] ["[region 1368] 1706 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 7, term: 6]"]
[2019/05/01 12:39:22.091 -07:00] [INFO] [unknown:1816] ["[region 1368] 1706 restored progress of 1369 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:39:22.091 -07:00] [INFO] [unknown:1816] ["[region 1368] 1706 restored progress of 1370 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:39:22.091 -07:00] [INFO] [unknown:1816] ["[region 1368] 1706 restored progress of 1371 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:39:22.091 -07:00] [INFO] [unknown:1816] ["[region 1368] 1706 restored progress of 1706 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:39:22.091 -07:00] [INFO] [unknown:474] ["[region 1368] 1706 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 7, term: 6]"]
[2019/05/01 12:39:22.091 -07:00] [INFO] [unknown:1736] ["[region 1368] 1706 [commit: 7] restored snapshot [index: 7, term: 6]"]
[2019/05/01 12:39:22.091 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=1706] [region_id=1368]
[2019/05/01 12:39:22.091 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 7, truncated_state: Some(RaftTruncatedState { index: 7, term: 6, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 1368, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 109, 255, 111, 110, 105, 255, 116, 111, 114, 95, 114, 255, 101, 115, 255, 101, 116, 0, 0, 0, 0, 251, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 109, 255, 111, 110, 105, 255, 116, 111, 114, 95, 114, 255, 101, 115, 255, 101, 116, 95, 97, 108, 108, 255, 0, 255, 0, 0, 0, 0, 0, 0, 0, 247, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 187, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1369, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1370, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1371, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1706, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1706] [region_id=1368]
[2019/05/01 12:39:22.112 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 1368] 1706"]
[2019/05/01 12:39:22.112 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 1368, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 109, 255, 111, 110, 105, 255, 116, 111, 114, 95, 114, 255, 101, 115, 255, 101, 116, 0, 0, 0, 0, 251, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 109, 255, 111, 110, 105, 255, 116, 111, 114, 95, 114, 255, 101, 115, 255, 101, 116, 95, 97, 108, 108, 255, 0, 255, 0, 0, 0, 0, 0, 0, 0, 247, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 187, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1369, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1370, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1371, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1706, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1706] [region_id=1368]
[2019/05/01 12:39:22.112 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=1368]
[2019/05/01 12:39:22.186 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=73.334421ms] [region_id=1368]
[2019/05/01 12:39:23.080 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 1706, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=8] [term=6] [peer_id=1706] [region_id=1368]
[2019/05/01 12:39:23.080 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 6, version: 187, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=1706] [region_id=1368]
[2019/05/01 12:39:23.080 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 1368, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 109, 255, 111, 110, 105, 255, 116, 111, 114, 95, 114, 255, 101, 115, 255, 101, 116, 0, 0, 0, 0, 251, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 109, 255, 111, 110, 105, 255, 116, 111, 114, 95, 114, 255, 101, 115, 255, 101, 116, 95, 97, 108, 108, 255, 0, 255, 0, 0, 0, 0, 0, 0, 0, 247, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 187, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1369, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1370, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1371, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1706, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1706, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1706] [region_id=1368]
[2019/05/01 12:39:23.144 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 1369, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=9] [term=6] [peer_id=1706] [region_id=1368]
[2019/05/01 12:39:23.144 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 7, version: 187, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=1706] [region_id=1368]
[2019/05/01 12:39:23.144 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 1368, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 109, 255, 111, 110, 105, 255, 116, 111, 114, 95, 114, 255, 101, 115, 255, 101, 116, 0, 0, 0, 0, 251, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 109, 255, 111, 110, 105, 255, 116, 111, 114, 95, 114, 255, 101, 115, 255, 101, 116, 95, 97, 108, 108, 255, 0, 255, 0, 0, 0, 0, 0, 0, 0, 247, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 7, version: 187, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1369, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1370, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1371, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1706, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1369, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1706] [region_id=1368]
[2019/05/01 12:39:23.658 -07:00] [INFO] [unknown:920] ["[region 1182] 1700 [term: 7] received a MsgRequestVote message with higher term from 1307 [term: 8]"]
[2019/05/01 12:39:23.658 -07:00] [INFO] [unknown:719] ["[region 1182] 1700 became follower at term 8"]
[2019/05/01 12:39:23.658 -07:00] [INFO] [unknown:1083] ["[region 1182] 1700 [logterm: 7, index: 13, vote: 0] cast MsgRequestVote for 1307 [logterm: 7, index: 13] at term 8"]
[2019/05/01 12:39:23.682 -07:00] [INFO] [unknown:1625] ["[region 120] 259 [term 7] received MsgTimeoutNow from 122 and starts an election to get leadership."]
[2019/05/01 12:39:23.682 -07:00] [INFO] [unknown:739] ["[region 120] 259 became candidate at term 8"]
[2019/05/01 12:39:23.682 -07:00] [INFO] [unknown:854] ["[region 120] 259 received MsgRequestVoteResponse from 259 at term 8"]
[2019/05/01 12:39:23.682 -07:00] [INFO] [unknown:828] ["[region 120] 259 [logterm: 7, index: 13] sent MsgRequestVote request to 122 at term 8"]
[2019/05/01 12:39:23.682 -07:00] [INFO] [unknown:828] ["[region 120] 259 [logterm: 7, index: 13] sent MsgRequestVote request to 485 at term 8"]
[2019/05/01 12:39:23.747 -07:00] [INFO] [unknown:854] ["[region 120] 259 received MsgRequestVoteResponse from 485 at term 8"]
[2019/05/01 12:39:23.747 -07:00] [INFO] [unknown:1550] ["[region 120] 259 [quorum:2] has received 2 MsgRequestVoteResponse votes and 0 vote rejections"]
[2019/05/01 12:39:23.747 -07:00] [INFO] [unknown:789] ["[region 120] 259 became leader at term 8"]
[2019/05/01 12:39:23.994 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=1750] [region_id=1574]
[2019/05/01 12:39:24.005 -07:00] [INFO] [unknown:719] ["[region 1574] 1750 became follower at term 0"]
[2019/05/01 12:39:24.005 -07:00] [INFO] [unknown:295] ["[region 1574] 1750 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:39:24.005 -07:00] [INFO] [unknown:719] ["[region 1574] 1750 became follower at term 1"]
[2019/05/01 12:39:24.005 -07:00] [INFO] [unknown:920] ["[region 1574] 1750 [term: 1] received a MsgHeartbeat message with higher term from 1577 [term: 6]"]
[2019/05/01 12:39:24.005 -07:00] [INFO] [unknown:719] ["[region 1574] 1750 became follower at term 6"]
[2019/05/01 12:39:25.419 -07:00] [INFO] [pd.rs:558] ["try to change peer"] [peer="Peer { id: 1752, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [change_type=AddLearnerNode] [region_id=464]
[2019/05/01 12:39:25.419 -07:00] [INFO] [peer.rs:1953] ["propose conf change peer"] [change_peer=1752] [change_type=AddLearnerNode] [peer_id=1212] [region_id=464]
[2019/05/01 12:39:25.491 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddLearnerNode, peer: Some(Peer { id: 1752, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=12] [term=8] [peer_id=1212] [region_id=464]
[2019/05/01 12:39:25.491 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 8, version: 57, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddLearner] [peer_id=1212] [region_id=464]
[2019/05/01 12:39:25.491 -07:00] [INFO] [apply.rs:1476] ["add learner successfully"] [region="Region { id: 464, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 100, 101, 102, 97, 255, 117, 108, 116, 95, 255, 112, 97, 115, 255, 115, 119, 111, 114, 100, 255, 95, 108, 255, 105, 102, 101, 116, 105, 109, 255, 101, 255, 0, 0, 0, 0, 0, 0, 0, 248, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 100, 101, 102, 97, 255, 117, 108, 116, 95, 255, 115, 116, 111, 255, 114, 97, 103, 101, 95, 255, 101, 110, 255, 103, 105, 110, 101, 0, 0, 253, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 8, version: 57, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 466, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 467, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1212, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1752, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1212] [region_id=464]
[2019/05/01 12:39:25.515 -07:00] [INFO] [peer.rs:1318] ["notify pd with change peer region"] [region="Region { id: 464, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 100, 101, 102, 97, 255, 117, 108, 116, 95, 255, 112, 97, 115, 255, 115, 119, 111, 114, 100, 255, 95, 108, 255, 105, 102, 101, 116, 105, 109, 255, 101, 255, 0, 0, 0, 0, 0, 0, 0, 248, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 100, 101, 102, 97, 255, 117, 108, 116, 95, 255, 115, 116, 111, 255, 114, 97, 103, 101, 95, 255, 101, 110, 255, 103, 105, 110, 101, 0, 0, 253, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 57, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 466, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 467, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1212, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1752, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1212] [region_id=464]
[2019/05/01 12:39:25.960 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=1751] [region_id=1730]
[2019/05/01 12:39:25.960 -07:00] [INFO] [unknown:719] ["[region 1730] 1751 became follower at term 0"]
[2019/05/01 12:39:25.960 -07:00] [INFO] [unknown:295] ["[region 1730] 1751 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:39:25.960 -07:00] [INFO] [unknown:719] ["[region 1730] 1751 became follower at term 1"]
[2019/05/01 12:39:25.960 -07:00] [INFO] [unknown:920] ["[region 1730] 1751 [term: 1] received a MsgHeartbeat message with higher term from 1732 [term: 6]"]
[2019/05/01 12:39:25.960 -07:00] [INFO] [unknown:719] ["[region 1730] 1751 became follower at term 6"]
[2019/05/01 12:39:25.998 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_1574_6_7_(default|lock|write).sst] [snap_key=1574_6_7]
[2019/05/01 12:39:26.040 -07:00] [INFO] [unknown:1792] ["[region 1574] 1750 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 7, term: 6]"]
[2019/05/01 12:39:26.040 -07:00] [INFO] [unknown:1816] ["[region 1574] 1750 restored progress of 1575 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:39:26.040 -07:00] [INFO] [unknown:1816] ["[region 1574] 1750 restored progress of 1576 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:39:26.040 -07:00] [INFO] [unknown:1816] ["[region 1574] 1750 restored progress of 1577 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:39:26.040 -07:00] [INFO] [unknown:1816] ["[region 1574] 1750 restored progress of 1750 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:39:26.040 -07:00] [INFO] [unknown:474] ["[region 1574] 1750 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 7, term: 6]"]
[2019/05/01 12:39:26.040 -07:00] [INFO] [unknown:1736] ["[region 1574] 1750 [commit: 7] restored snapshot [index: 7, term: 6]"]
[2019/05/01 12:39:26.040 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=1750] [region_id=1574]
[2019/05/01 12:39:26.040 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 7, truncated_state: Some(RaftTruncatedState { index: 7, term: 6, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 1574, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 117, 255, 115, 101, 95, 255, 115, 121, 115, 95, 109, 255, 97, 108, 255, 108, 111, 99, 0, 0, 0, 252, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 118, 255, 101, 114, 115, 255, 105, 111, 110, 0, 0, 253, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 227, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1575, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1576, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1577, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1750, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1750] [region_id=1574]
[2019/05/01 12:39:26.059 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 1574, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 117, 255, 115, 101, 95, 255, 115, 121, 115, 95, 109, 255, 97, 108, 255, 108, 111, 99, 0, 0, 0, 252, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 118, 255, 101, 114, 115, 255, 105, 111, 110, 0, 0, 253, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 227, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1575, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1576, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1577, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1750, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1750] [region_id=1574]
[2019/05/01 12:39:26.059 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 1574] 1750"]
[2019/05/01 12:39:26.059 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=1574]
[2019/05/01 12:39:26.077 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=18.086947ms] [region_id=1574]
[2019/05/01 12:39:26.348 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=1753] [region_id=1170]
[2019/05/01 12:39:26.348 -07:00] [INFO] [unknown:719] ["[region 1170] 1753 became follower at term 0"]
[2019/05/01 12:39:26.348 -07:00] [INFO] [unknown:295] ["[region 1170] 1753 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:39:26.348 -07:00] [INFO] [unknown:719] ["[region 1170] 1753 became follower at term 1"]
[2019/05/01 12:39:26.348 -07:00] [INFO] [unknown:920] ["[region 1170] 1753 [term: 1] received a MsgHeartbeat message with higher term from 1362 [term: 7]"]
[2019/05/01 12:39:26.348 -07:00] [INFO] [unknown:719] ["[region 1170] 1753 became follower at term 7"]
[2019/05/01 12:39:26.987 -07:00] [INFO] [peer_storage.rs:759] ["requesting snapshot"] [peer_id=1212] [region_id=464]
[2019/05/01 12:39:26.990 -07:00] [INFO] [snap.rs:757] ["scan snapshot of one cf"] [size=0] [key_count=0] [cf=default] [snapshot=/opt/tidb/data/kv/snap/gen_464_8_12_(default|lock|write).sst] [region_id=464]
[2019/05/01 12:39:26.990 -07:00] [INFO] [snap.rs:757] ["scan snapshot of one cf"] [size=0] [key_count=0] [cf=lock] [snapshot=/opt/tidb/data/kv/snap/gen_464_8_12_(default|lock|write).sst] [region_id=464]
[2019/05/01 12:39:26.990 -07:00] [INFO] [snap.rs:757] ["scan snapshot of one cf"] [size=192] [key_count=2] [cf=write] [snapshot=/opt/tidb/data/kv/snap/gen_464_8_12_(default|lock|write).sst] [region_id=464]
[2019/05/01 12:39:27.013 -07:00] [INFO] [snap.rs:875] ["scan snapshot"] [takes=23.00435ms] [size=1487] [key_count=2] [snapshot=/opt/tidb/data/kv/snap/gen_464_8_12_(default|lock|write).sst] [region_id=464]
[2019/05/01 12:39:27.025 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 1750, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=8] [term=6] [peer_id=1750] [region_id=1574]
[2019/05/01 12:39:27.025 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 6, version: 227, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=1750] [region_id=1574]
[2019/05/01 12:39:27.025 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 1574, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 117, 255, 115, 101, 95, 255, 115, 121, 115, 95, 109, 255, 97, 108, 255, 108, 111, 99, 0, 0, 0, 252, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 118, 255, 101, 114, 115, 255, 105, 111, 110, 0, 0, 253, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 227, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1575, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1576, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1577, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1750, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1750, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1750] [region_id=1574]
[2019/05/01 12:39:27.081 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 1575, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=9] [term=6] [peer_id=1750] [region_id=1574]
[2019/05/01 12:39:27.081 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 7, version: 227, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=1750] [region_id=1574]
[2019/05/01 12:39:27.081 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 1574, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 117, 255, 115, 101, 95, 255, 115, 121, 115, 95, 109, 255, 97, 108, 255, 108, 111, 99, 0, 0, 0, 252, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 118, 255, 101, 114, 115, 255, 105, 111, 110, 0, 0, 253, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 7, version: 227, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1575, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1576, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1577, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1750, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1575, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1750] [region_id=1574]
[2019/05/01 12:39:27.964 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_1730_6_7_(default|lock|write).sst] [snap_key=1730_6_7]
[2019/05/01 12:39:27.974 -07:00] [INFO] [unknown:1792] ["[region 1730] 1751 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 7, term: 6]"]
[2019/05/01 12:39:27.974 -07:00] [INFO] [unknown:1816] ["[region 1730] 1751 restored progress of 1731 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:39:27.974 -07:00] [INFO] [unknown:1816] ["[region 1730] 1751 restored progress of 1732 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:39:27.974 -07:00] [INFO] [unknown:1816] ["[region 1730] 1751 restored progress of 1733 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:39:27.974 -07:00] [INFO] [unknown:1816] ["[region 1730] 1751 restored progress of 1751 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:39:27.974 -07:00] [INFO] [unknown:474] ["[region 1730] 1751 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 7, term: 6]"]
[2019/05/01 12:39:27.974 -07:00] [INFO] [unknown:1736] ["[region 1730] 1751 [commit: 7] restored snapshot [index: 7, term: 6]"]
[2019/05/01 12:39:27.974 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=1751] [region_id=1730]
[2019/05/01 12:39:27.974 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 7, truncated_state: Some(RaftTruncatedState { index: 7, term: 6, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 1730, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 108, 111, 103, 95, 255, 115, 121, 115, 108, 255, 111, 103, 0, 255, 0, 0, 0, 0, 0, 249, 0, 0, 253], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 108, 111, 103, 95, 255, 115, 121, 115, 108, 255, 111, 103, 95, 255, 102, 97, 99, 105, 108, 255, 105, 116, 255, 121, 0, 0, 0, 0, 0, 250, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 257, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1731, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1732, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1733, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1751, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1751] [region_id=1730]
[2019/05/01 12:39:27.991 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 1730, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 108, 111, 103, 95, 255, 115, 121, 115, 108, 255, 111, 103, 0, 255, 0, 0, 0, 0, 0, 249, 0, 0, 253], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 108, 111, 103, 95, 255, 115, 121, 115, 108, 255, 111, 103, 95, 255, 102, 97, 99, 105, 108, 255, 105, 116, 255, 121, 0, 0, 0, 0, 0, 250, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 257, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1731, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1732, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1733, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1751, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1751] [region_id=1730]
[2019/05/01 12:39:27.991 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 1730] 1751"]
[2019/05/01 12:39:27.991 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=1730]
[2019/05/01 12:39:28.018 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=26.7243ms] [region_id=1730]
[2019/05/01 12:39:28.352 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_1170_7_11_(default|lock|write).sst] [snap_key=1170_7_11]
[2019/05/01 12:39:28.358 -07:00] [INFO] [unknown:1792] ["[region 1170] 1753 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 11, term: 7]"]
[2019/05/01 12:39:28.358 -07:00] [INFO] [unknown:1816] ["[region 1170] 1753 restored progress of 1172 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:39:28.358 -07:00] [INFO] [unknown:1816] ["[region 1170] 1753 restored progress of 1173 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:39:28.358 -07:00] [INFO] [unknown:1816] ["[region 1170] 1753 restored progress of 1362 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:39:28.358 -07:00] [INFO] [unknown:1816] ["[region 1170] 1753 restored progress of 1753 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:39:28.358 -07:00] [INFO] [unknown:474] ["[region 1170] 1753 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 11, term: 7]"]
[2019/05/01 12:39:28.358 -07:00] [INFO] [unknown:1736] ["[region 1170] 1753 [commit: 11] restored snapshot [index: 11, term: 7]"]
[2019/05/01 12:39:28.358 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=1753] [region_id=1170]
[2019/05/01 12:39:28.358 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 11, truncated_state: Some(RaftTruncatedState { index: 11, term: 7, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 1170, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 102, 255, 108, 117, 115, 255, 104, 95, 115, 121, 110, 255, 99, 0, 255, 0, 0, 0, 0, 0, 0, 248, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 102, 255, 108, 117, 115, 255, 104, 105, 110, 103, 95, 255, 97, 118, 255, 103, 95, 108, 111, 111, 112, 255, 115, 255, 0, 0, 0, 0, 0, 0, 0, 248, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 147, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1172, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1173, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1362, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1753, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1753] [region_id=1170]
[2019/05/01 12:39:28.371 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=1170]
[2019/05/01 12:39:28.371 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 1170, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 102, 255, 108, 117, 115, 255, 104, 95, 115, 121, 110, 255, 99, 0, 255, 0, 0, 0, 0, 0, 0, 248, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 102, 255, 108, 117, 115, 255, 104, 105, 110, 103, 95, 255, 97, 118, 255, 103, 95, 108, 111, 111, 112, 255, 115, 255, 0, 0, 0, 0, 0, 0, 0, 248, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 147, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1172, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1173, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1362, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1753, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1753] [region_id=1170]
[2019/05/01 12:39:28.371 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 1170] 1753"]
[2019/05/01 12:39:28.401 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=28.819507ms] [region_id=1170]
[2019/05/01 12:39:28.507 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=1754] [region_id=614]
[2019/05/01 12:39:28.508 -07:00] [INFO] [unknown:719] ["[region 614] 1754 became follower at term 0"]
[2019/05/01 12:39:28.508 -07:00] [INFO] [unknown:295] ["[region 614] 1754 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:39:28.508 -07:00] [INFO] [unknown:719] ["[region 614] 1754 became follower at term 1"]
[2019/05/01 12:39:28.508 -07:00] [INFO] [unknown:920] ["[region 614] 1754 [term: 1] received a MsgHeartbeat message with higher term from 615 [term: 6]"]
[2019/05/01 12:39:28.508 -07:00] [INFO] [unknown:719] ["[region 614] 1754 became follower at term 6"]
[2019/05/01 12:39:29.001 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 1751, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=8] [term=6] [peer_id=1751] [region_id=1730]
[2019/05/01 12:39:29.001 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 6, version: 257, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=1751] [region_id=1730]
[2019/05/01 12:39:29.001 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 1730, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 108, 111, 103, 95, 255, 115, 121, 115, 108, 255, 111, 103, 0, 255, 0, 0, 0, 0, 0, 249, 0, 0, 253], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 108, 111, 103, 95, 255, 115, 121, 115, 108, 255, 111, 103, 95, 255, 102, 97, 99, 105, 108, 255, 105, 116, 255, 121, 0, 0, 0, 0, 0, 250, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 257, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1731, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1732, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1733, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1751, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1751, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1751] [region_id=1730]
[2019/05/01 12:39:29.002 -07:00] [INFO] [unknown:841] ["New connected subchannel at 0x7f0412601510 for subchannel 0x7f04cf8cc200"]
[2019/05/01 12:39:29.027 -07:00] [INFO] [snap.rs:389] ["sent snapshot"] [duration=25.840242ms] [size=1487] [snap_key=464_8_12] [region_id=464]
[2019/05/01 12:39:29.027 -07:00] [INFO] [peer.rs:538] ["report snapshot status"] [status=Finish] [to="Peer { id: 1752, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1212] [region_id=464]
[2019/05/01 12:39:29.079 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 1731, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=9] [term=6] [peer_id=1751] [region_id=1730]
[2019/05/01 12:39:29.079 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 7, version: 257, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=1751] [region_id=1730]
[2019/05/01 12:39:29.079 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 1730, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 108, 111, 103, 95, 255, 115, 121, 115, 108, 255, 111, 103, 0, 255, 0, 0, 0, 0, 0, 249, 0, 0, 253], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 108, 111, 103, 95, 255, 115, 121, 115, 108, 255, 111, 103, 95, 255, 102, 97, 99, 105, 108, 255, 105, 116, 255, 121, 0, 0, 0, 0, 0, 250, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 7, version: 257, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1731, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1732, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1733, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1751, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1731, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1751] [region_id=1730]
[2019/05/01 12:39:29.396 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 1753, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=12] [term=7] [peer_id=1753] [region_id=1170]
[2019/05/01 12:39:29.396 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 9, version: 147, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=1753] [region_id=1170]
[2019/05/01 12:39:29.396 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 1170, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 102, 255, 108, 117, 115, 255, 104, 95, 115, 121, 110, 255, 99, 0, 255, 0, 0, 0, 0, 0, 0, 248, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 102, 255, 108, 117, 115, 255, 104, 105, 110, 103, 95, 255, 97, 118, 255, 103, 95, 108, 111, 111, 112, 255, 115, 255, 0, 0, 0, 0, 0, 0, 0, 248, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 147, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1172, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1173, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1362, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1753, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1753, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1753] [region_id=1170]
[2019/05/01 12:39:29.456 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 1173, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=13] [term=7] [peer_id=1753] [region_id=1170]
[2019/05/01 12:39:29.456 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 10, version: 147, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=1753] [region_id=1170]
[2019/05/01 12:39:29.456 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 1170, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 102, 255, 108, 117, 115, 255, 104, 95, 115, 121, 110, 255, 99, 0, 255, 0, 0, 0, 0, 0, 0, 248, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 102, 255, 108, 117, 115, 255, 104, 105, 110, 103, 95, 255, 97, 118, 255, 103, 95, 108, 111, 111, 112, 255, 115, 255, 0, 0, 0, 0, 0, 0, 0, 248, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 10, version: 147, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1172, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1173, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1362, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1753, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1173, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1753] [region_id=1170]
[2019/05/01 12:39:29.994 -07:00] [INFO] [pd.rs:558] ["try to change peer"] [peer="Peer { id: 1752, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [change_type=AddNode] [region_id=464]
[2019/05/01 12:39:29.994 -07:00] [INFO] [peer.rs:1953] ["propose conf change peer"] [change_peer=1752] [change_type=AddNode] [peer_id=1212] [region_id=464]
[2019/05/01 12:39:30.026 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 1752, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=13] [term=8] [peer_id=1212] [region_id=464]
[2019/05/01 12:39:30.026 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 9, version: 57, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=1212] [region_id=464]
[2019/05/01 12:39:30.026 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 464, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 100, 101, 102, 97, 255, 117, 108, 116, 95, 255, 112, 97, 115, 255, 115, 119, 111, 114, 100, 255, 95, 108, 255, 105, 102, 101, 116, 105, 109, 255, 101, 255, 0, 0, 0, 0, 0, 0, 0, 248, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 100, 101, 102, 97, 255, 117, 108, 116, 95, 255, 115, 116, 111, 255, 114, 97, 103, 101, 95, 255, 101, 110, 255, 103, 105, 110, 101, 0, 0, 253, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 57, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 466, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 467, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1212, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1752, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1752, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1212] [region_id=464]
[2019/05/01 12:39:30.042 -07:00] [INFO] [peer.rs:1318] ["notify pd with change peer region"] [region="Region { id: 464, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 100, 101, 102, 97, 255, 117, 108, 116, 95, 255, 112, 97, 115, 255, 115, 119, 111, 114, 100, 255, 95, 108, 255, 105, 102, 101, 116, 105, 109, 255, 101, 255, 0, 0, 0, 0, 0, 0, 0, 248, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 100, 101, 102, 97, 255, 117, 108, 116, 95, 255, 115, 116, 111, 255, 114, 97, 103, 101, 95, 255, 101, 110, 255, 103, 105, 110, 101, 0, 0, 253, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 10, version: 57, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 466, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 467, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1212, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1752, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1212] [region_id=464]
[2019/05/01 12:39:30.049 -07:00] [INFO] [pd.rs:558] ["try to change peer"] [peer="Peer { id: 466, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [change_type=RemoveNode] [region_id=464]
[2019/05/01 12:39:30.049 -07:00] [INFO] [peer.rs:1953] ["propose conf change peer"] [change_peer=466] [change_type=RemoveNode] [peer_id=1212] [region_id=464]
[2019/05/01 12:39:30.060 -07:00] [INFO] [pd.rs:558] ["try to change peer"] [peer="Peer { id: 466, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [change_type=RemoveNode] [region_id=464]
[2019/05/01 12:39:30.086 -07:00] [INFO] [peer.rs:1927] ["there is a pending conf change, try later"] [peer_id=1212] [region_id=464]
[2019/05/01 12:39:30.086 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 466, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=14] [term=8] [peer_id=1212] [region_id=464]
[2019/05/01 12:39:30.086 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 10, version: 57, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=1212] [region_id=464]
[2019/05/01 12:39:30.086 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 464, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 100, 101, 102, 97, 255, 117, 108, 116, 95, 255, 112, 97, 115, 255, 115, 119, 111, 114, 100, 255, 95, 108, 255, 105, 102, 101, 116, 105, 109, 255, 101, 255, 0, 0, 0, 0, 0, 0, 0, 248, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 100, 101, 102, 97, 255, 117, 108, 116, 95, 255, 115, 116, 111, 255, 114, 97, 103, 101, 95, 255, 101, 110, 255, 103, 105, 110, 101, 0, 0, 253, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 10, version: 57, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 466, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 467, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1212, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1752, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 466, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1212] [region_id=464]
[2019/05/01 12:39:30.101 -07:00] [INFO] [peer.rs:1318] ["notify pd with change peer region"] [region="Region { id: 464, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 100, 101, 102, 97, 255, 117, 108, 116, 95, 255, 112, 97, 115, 255, 115, 119, 111, 114, 100, 255, 95, 108, 255, 105, 102, 101, 116, 105, 109, 255, 101, 255, 0, 0, 0, 0, 0, 0, 0, 248, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 100, 101, 102, 97, 255, 117, 108, 116, 95, 255, 115, 116, 111, 255, 114, 97, 103, 101, 95, 255, 101, 110, 255, 103, 105, 110, 101, 0, 0, 253, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 11, version: 57, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 467, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1212, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1752, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1212] [region_id=464]
[2019/05/01 12:39:30.511 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_614_6_10_(default|lock|write).sst] [snap_key=614_6_10]
[2019/05/01 12:39:30.523 -07:00] [INFO] [unknown:1792] ["[region 614] 1754 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 10, term: 6]"]
[2019/05/01 12:39:30.523 -07:00] [INFO] [unknown:1816] ["[region 614] 1754 restored progress of 615 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:39:30.523 -07:00] [INFO] [unknown:1816] ["[region 614] 1754 restored progress of 616 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:39:30.523 -07:00] [INFO] [unknown:1816] ["[region 614] 1754 restored progress of 1095 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:39:30.523 -07:00] [INFO] [unknown:1816] ["[region 614] 1754 restored progress of 1754 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:39:30.523 -07:00] [INFO] [unknown:474] ["[region 614] 1754 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 10, term: 6]"]
[2019/05/01 12:39:30.523 -07:00] [INFO] [unknown:1736] ["[region 614] 1754 [commit: 10] restored snapshot [index: 10, term: 6]"]
[2019/05/01 12:39:30.523 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=1754] [region_id=614]
[2019/05/01 12:39:30.523 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 10, truncated_state: Some(RaftTruncatedState { index: 10, term: 6, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 614, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 102, 116, 95, 113, 255, 117, 101, 114, 121, 255, 95, 101, 120, 255, 112, 97, 110, 115, 105, 255, 111, 110, 255, 95, 108, 105, 109, 105, 116, 255, 0, 255, 0, 0, 0, 0, 0, 0, 0, 247, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 102, 116, 95, 115, 255, 116, 111, 112, 119, 255, 111, 114, 100, 255, 95, 102, 105, 108, 101, 255, 0, 0, 255, 0, 0, 0, 0, 0, 0, 247, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 77, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 615, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 616, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1095, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1754, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1754] [region_id=614]
[2019/05/01 12:39:30.552 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 614, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 102, 116, 95, 113, 255, 117, 101, 114, 121, 255, 95, 101, 120, 255, 112, 97, 110, 115, 105, 255, 111, 110, 255, 95, 108, 105, 109, 105, 116, 255, 0, 255, 0, 0, 0, 0, 0, 0, 0, 247, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 102, 116, 95, 115, 255, 116, 111, 112, 119, 255, 111, 114, 100, 255, 95, 102, 105, 108, 101, 255, 0, 0, 255, 0, 0, 0, 0, 0, 0, 247, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 77, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 615, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 616, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1095, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1754, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1754] [region_id=614]
[2019/05/01 12:39:30.552 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=614]
[2019/05/01 12:39:30.552 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 614] 1754"]
[2019/05/01 12:39:30.565 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=12.828689ms] [region_id=614]
[2019/05/01 12:39:30.993 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=1755] [region_id=460]
[2019/05/01 12:39:30.993 -07:00] [INFO] [unknown:719] ["[region 460] 1755 became follower at term 0"]
[2019/05/01 12:39:30.993 -07:00] [INFO] [unknown:295] ["[region 460] 1755 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:39:30.993 -07:00] [INFO] [unknown:719] ["[region 460] 1755 became follower at term 1"]
[2019/05/01 12:39:30.993 -07:00] [INFO] [unknown:920] ["[region 460] 1755 [term: 1] received a MsgHeartbeat message with higher term from 1557 [term: 8]"]
[2019/05/01 12:39:30.993 -07:00] [INFO] [unknown:719] ["[region 460] 1755 became follower at term 8"]
[2019/05/01 12:39:31.312 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=1756] [region_id=521]
[2019/05/01 12:39:31.312 -07:00] [INFO] [unknown:719] ["[region 521] 1756 became follower at term 0"]
[2019/05/01 12:39:31.312 -07:00] [INFO] [unknown:295] ["[region 521] 1756 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:39:31.312 -07:00] [INFO] [unknown:719] ["[region 521] 1756 became follower at term 1"]
[2019/05/01 12:39:31.312 -07:00] [INFO] [unknown:920] ["[region 521] 1756 [term: 1] received a MsgHeartbeat message with higher term from 1649 [term: 8]"]
[2019/05/01 12:39:31.312 -07:00] [INFO] [unknown:719] ["[region 521] 1756 became follower at term 8"]
[2019/05/01 12:39:31.549 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 1754, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=11] [term=6] [peer_id=1754] [region_id=614]
[2019/05/01 12:39:31.549 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 9, version: 77, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=1754] [region_id=614]
[2019/05/01 12:39:31.549 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 614, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 102, 116, 95, 113, 255, 117, 101, 114, 121, 255, 95, 101, 120, 255, 112, 97, 110, 115, 105, 255, 111, 110, 255, 95, 108, 105, 109, 105, 116, 255, 0, 255, 0, 0, 0, 0, 0, 0, 0, 247, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 102, 116, 95, 115, 255, 116, 111, 112, 119, 255, 111, 114, 100, 255, 95, 102, 105, 108, 101, 255, 0, 0, 255, 0, 0, 0, 0, 0, 0, 247, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 77, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 615, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 616, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1095, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1754, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1754, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1754] [region_id=614]
[2019/05/01 12:39:31.623 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 616, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=12] [term=6] [peer_id=1754] [region_id=614]
[2019/05/01 12:39:31.623 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 10, version: 77, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=1754] [region_id=614]
[2019/05/01 12:39:31.623 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 614, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 102, 116, 95, 113, 255, 117, 101, 114, 121, 255, 95, 101, 120, 255, 112, 97, 110, 115, 105, 255, 111, 110, 255, 95, 108, 105, 109, 105, 116, 255, 0, 255, 0, 0, 0, 0, 0, 0, 0, 247, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 102, 116, 95, 115, 255, 116, 111, 112, 119, 255, 111, 114, 100, 255, 95, 102, 105, 108, 101, 255, 0, 0, 255, 0, 0, 0, 0, 0, 0, 247, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 10, version: 77, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 615, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 616, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1095, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1754, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 616, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1754] [region_id=614]
[2019/05/01 12:39:32.997 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_460_8_12_(default|lock|write).sst] [snap_key=460_8_12]
[2019/05/01 12:39:33.017 -07:00] [INFO] [unknown:1792] ["[region 460] 1755 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 12, term: 8]"]
[2019/05/01 12:39:33.017 -07:00] [INFO] [unknown:1816] ["[region 460] 1755 restored progress of 462 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:39:33.017 -07:00] [INFO] [unknown:1816] ["[region 460] 1755 restored progress of 463 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:39:33.017 -07:00] [INFO] [unknown:1816] ["[region 460] 1755 restored progress of 1557 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:39:33.017 -07:00] [INFO] [unknown:1816] ["[region 460] 1755 restored progress of 1755 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:39:33.017 -07:00] [INFO] [unknown:474] ["[region 460] 1755 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 12, term: 8]"]
[2019/05/01 12:39:33.017 -07:00] [INFO] [unknown:1736] ["[region 460] 1755 [commit: 12] restored snapshot [index: 12, term: 8]"]
[2019/05/01 12:39:33.017 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=1755] [region_id=460]
[2019/05/01 12:39:33.017 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 12, truncated_state: Some(RaftTruncatedState { index: 12, term: 8, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 460, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 100, 101, 98, 117, 255, 103, 0, 0, 0, 252, 0, 0, 0, 252], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 100, 101, 102, 97, 255, 117, 108, 116, 95, 255, 112, 97, 115, 255, 115, 119, 111, 114, 100, 255, 95, 108, 255, 105, 102, 101, 116, 105, 109, 255, 101, 255, 0, 0, 0, 0, 0, 0, 0, 248, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 57, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 462, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 463, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1557, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1755, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1755] [region_id=460]
[2019/05/01 12:39:33.051 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 460] 1755"]
[2019/05/01 12:39:33.051 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 460, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 100, 101, 98, 117, 255, 103, 0, 0, 0, 252, 0, 0, 0, 252], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 100, 101, 102, 97, 255, 117, 108, 116, 95, 255, 112, 97, 115, 255, 115, 119, 111, 114, 100, 255, 95, 108, 255, 105, 102, 101, 116, 105, 109, 255, 101, 255, 0, 0, 0, 0, 0, 0, 0, 248, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 57, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 462, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 463, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1557, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1755, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1755] [region_id=460]
[2019/05/01 12:39:33.051 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=460]
[2019/05/01 12:39:33.076 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=24.299784ms] [region_id=460]
[2019/05/01 12:39:33.323 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_521_8_12_(default|lock|write).sst] [snap_key=521_8_12]
[2019/05/01 12:39:33.331 -07:00] [INFO] [unknown:1792] ["[region 521] 1756 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 12, term: 8]"]
[2019/05/01 12:39:33.331 -07:00] [INFO] [unknown:1816] ["[region 521] 1756 restored progress of 523 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:39:33.331 -07:00] [INFO] [unknown:1816] ["[region 521] 1756 restored progress of 524 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:39:33.331 -07:00] [INFO] [unknown:1816] ["[region 521] 1756 restored progress of 1649 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:39:33.331 -07:00] [INFO] [unknown:1816] ["[region 521] 1756 restored progress of 1756 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:39:33.331 -07:00] [INFO] [unknown:474] ["[region 521] 1756 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 12, term: 8]"]
[2019/05/01 12:39:33.331 -07:00] [INFO] [unknown:1736] ["[region 521] 1756 [commit: 12] restored snapshot [index: 12, term: 8]"]
[2019/05/01 12:39:33.331 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=1756] [region_id=521]
[2019/05/01 12:39:33.331 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 12, truncated_state: Some(RaftTruncatedState { index: 12, term: 8, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 521, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 101, 113, 95, 114, 255, 97, 110, 103, 101, 255, 95, 105, 110, 255, 100, 101, 120, 95, 100, 255, 105, 118, 255, 101, 95, 108, 105, 109, 105, 255, 116, 255, 0, 0, 0, 0, 0, 0, 0, 248, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 101, 118, 101, 110, 255, 116, 95, 115, 99, 255, 104, 101, 100, 255, 117, 108, 101, 114, 0, 254, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 67, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 523, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 524, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1649, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1756, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1756] [region_id=521]
[2019/05/01 12:39:33.355 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 521] 1756"]
[2019/05/01 12:39:33.355 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 521, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 101, 113, 95, 114, 255, 97, 110, 103, 101, 255, 95, 105, 110, 255, 100, 101, 120, 95, 100, 255, 105, 118, 255, 101, 95, 108, 105, 109, 105, 255, 116, 255, 0, 0, 0, 0, 0, 0, 0, 248, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 101, 118, 101, 110, 255, 116, 95, 115, 99, 255, 104, 101, 100, 255, 117, 108, 101, 114, 0, 254, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 67, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 523, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 524, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1649, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1756, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1756] [region_id=521]
[2019/05/01 12:39:33.355 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=521]
[2019/05/01 12:39:33.380 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=24.255154ms] [region_id=521]
[2019/05/01 12:39:34.038 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 1755, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=13] [term=8] [peer_id=1755] [region_id=460]
[2019/05/01 12:39:34.038 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 9, version: 57, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=1755] [region_id=460]
[2019/05/01 12:39:34.038 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 460, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 100, 101, 98, 117, 255, 103, 0, 0, 0, 252, 0, 0, 0, 252], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 100, 101, 102, 97, 255, 117, 108, 116, 95, 255, 112, 97, 115, 255, 115, 119, 111, 114, 100, 255, 95, 108, 255, 105, 102, 101, 116, 105, 109, 255, 101, 255, 0, 0, 0, 0, 0, 0, 0, 248, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 57, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 462, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 463, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1557, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1755, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1755, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1755] [region_id=460]
[2019/05/01 12:39:34.108 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 462, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=14] [term=8] [peer_id=1755] [region_id=460]
[2019/05/01 12:39:34.108 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 10, version: 57, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=1755] [region_id=460]
[2019/05/01 12:39:34.108 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 460, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 100, 101, 98, 117, 255, 103, 0, 0, 0, 252, 0, 0, 0, 252], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 100, 101, 102, 97, 255, 117, 108, 116, 95, 255, 112, 97, 115, 255, 115, 119, 111, 114, 100, 255, 95, 108, 255, 105, 102, 101, 116, 105, 109, 255, 101, 255, 0, 0, 0, 0, 0, 0, 0, 248, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 10, version: 57, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 462, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 463, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1557, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1755, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 462, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1755] [region_id=460]
[2019/05/01 12:39:34.157 -07:00] [INFO] [pd.rs:558] ["try to change peer"] [peer="Peer { id: 1800, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [change_type=AddLearnerNode] [region_id=800]
[2019/05/01 12:39:34.157 -07:00] [INFO] [peer.rs:1953] ["propose conf change peer"] [change_peer=1800] [change_type=AddLearnerNode] [peer_id=895] [region_id=800]
[2019/05/01 12:39:34.195 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddLearnerNode, peer: Some(Peer { id: 1800, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=11] [term=7] [peer_id=895] [region_id=800]
[2019/05/01 12:39:34.195 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 8, version: 97, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddLearner] [peer_id=895] [region_id=800]
[2019/05/01 12:39:34.195 -07:00] [INFO] [apply.rs:1476] ["add learner successfully"] [region="Region { id: 800, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 104, 97, 118, 101, 255, 95, 115, 115, 108, 255, 0, 0, 0, 255, 0, 0, 0, 0, 0, 247, 0, 0, 253], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 104, 97, 118, 101, 255, 95, 115, 121, 109, 255, 108, 105, 110, 255, 107, 0, 0, 0, 0, 251, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 8, version: 97, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 801, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 803, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 895, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1800, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=895] [region_id=800]
[2019/05/01 12:39:34.211 -07:00] [INFO] [peer.rs:1318] ["notify pd with change peer region"] [region="Region { id: 800, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 104, 97, 118, 101, 255, 95, 115, 115, 108, 255, 0, 0, 0, 255, 0, 0, 0, 0, 0, 247, 0, 0, 253], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 104, 97, 118, 101, 255, 95, 115, 121, 109, 255, 108, 105, 110, 255, 107, 0, 0, 0, 0, 251, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 97, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 801, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 803, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 895, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1800, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=895] [region_id=800]
[2019/05/01 12:39:34.367 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 1756, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=13] [term=8] [peer_id=1756] [region_id=521]
[2019/05/01 12:39:34.367 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 9, version: 67, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=1756] [region_id=521]
[2019/05/01 12:39:34.367 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 521, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 101, 113, 95, 114, 255, 97, 110, 103, 101, 255, 95, 105, 110, 255, 100, 101, 120, 95, 100, 255, 105, 118, 255, 101, 95, 108, 105, 109, 105, 255, 116, 255, 0, 0, 0, 0, 0, 0, 0, 248, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 101, 118, 101, 110, 255, 116, 95, 115, 99, 255, 104, 101, 100, 255, 117, 108, 101, 114, 0, 254, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 67, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 523, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 524, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1649, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1756, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1756, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1756] [region_id=521]
[2019/05/01 12:39:34.423 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 523, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=14] [term=8] [peer_id=1756] [region_id=521]
[2019/05/01 12:39:34.423 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 10, version: 67, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=1756] [region_id=521]
[2019/05/01 12:39:34.423 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 521, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 101, 113, 95, 114, 255, 97, 110, 103, 101, 255, 95, 105, 110, 255, 100, 101, 120, 95, 100, 255, 105, 118, 255, 101, 95, 108, 105, 109, 105, 255, 116, 255, 0, 0, 0, 0, 0, 0, 0, 248, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 101, 118, 101, 110, 255, 116, 95, 115, 99, 255, 104, 101, 100, 255, 117, 108, 101, 114, 0, 254, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 10, version: 67, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 523, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 524, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1649, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1756, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 523, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1756] [region_id=521]
[2019/05/01 12:39:34.549 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddLearnerNode, peer: Some(Peer { id: 1801, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=11] [term=7] [peer_id=896] [region_id=413]
[2019/05/01 12:39:34.549 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 8, version: 47, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddLearner] [peer_id=896] [region_id=413]
[2019/05/01 12:39:34.549 -07:00] [INFO] [apply.rs:1476] ["add learner successfully"] [region="Region { id: 413, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 99, 111, 108, 108, 255, 97, 116, 105, 111, 255, 110, 95, 99, 255, 111, 110, 110, 101, 99, 255, 116, 105, 255, 111, 110, 0, 0, 0, 0, 251, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 99, 111, 108, 108, 255, 97, 116, 105, 111, 255, 110, 95, 100, 255, 97, 116, 97, 98, 97, 255, 115, 101, 255, 0, 0, 0, 0, 0, 0, 249, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 8, version: 47, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 415, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 416, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 896, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1801, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=896] [region_id=413]
[2019/05/01 12:39:35.554 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=1802] [region_id=317]
[2019/05/01 12:39:35.554 -07:00] [INFO] [unknown:719] ["[region 317] 1802 became follower at term 0"]
[2019/05/01 12:39:35.554 -07:00] [INFO] [unknown:295] ["[region 317] 1802 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:39:35.554 -07:00] [INFO] [unknown:719] ["[region 317] 1802 became follower at term 1"]
[2019/05/01 12:39:35.554 -07:00] [INFO] [unknown:920] ["[region 317] 1802 [term: 1] received a MsgHeartbeat message with higher term from 1147 [term: 7]"]
[2019/05/01 12:39:35.554 -07:00] [INFO] [unknown:719] ["[region 317] 1802 became follower at term 7"]
[2019/05/01 12:39:36.022 -07:00] [INFO] [peer_storage.rs:759] ["requesting snapshot"] [peer_id=895] [region_id=800]
[2019/05/01 12:39:36.023 -07:00] [INFO] [snap.rs:757] ["scan snapshot of one cf"] [size=0] [key_count=0] [cf=default] [snapshot=/opt/tidb/data/kv/snap/gen_800_7_11_(default|lock|write).sst] [region_id=800]
[2019/05/01 12:39:36.023 -07:00] [INFO] [snap.rs:757] ["scan snapshot of one cf"] [size=0] [key_count=0] [cf=lock] [snapshot=/opt/tidb/data/kv/snap/gen_800_7_11_(default|lock|write).sst] [region_id=800]
[2019/05/01 12:39:36.023 -07:00] [INFO] [snap.rs:757] ["scan snapshot of one cf"] [size=138] [key_count=2] [cf=write] [snapshot=/opt/tidb/data/kv/snap/gen_800_7_11_(default|lock|write).sst] [region_id=800]
[2019/05/01 12:39:36.038 -07:00] [INFO] [snap.rs:875] ["scan snapshot"] [takes=15.2548ms] [size=1375] [key_count=2] [snapshot=/opt/tidb/data/kv/snap/gen_800_7_11_(default|lock|write).sst] [region_id=800]
[2019/05/01 12:39:37.557 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_317_7_19_(default|lock|write).sst] [snap_key=317_7_19]
[2019/05/01 12:39:37.570 -07:00] [INFO] [unknown:1792] ["[region 317] 1802 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 19, term: 7]"]
[2019/05/01 12:39:37.570 -07:00] [INFO] [unknown:1816] ["[region 317] 1802 restored progress of 318 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:39:37.570 -07:00] [INFO] [unknown:1816] ["[region 317] 1802 restored progress of 320 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:39:37.570 -07:00] [INFO] [unknown:1816] ["[region 317] 1802 restored progress of 1147 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:39:37.570 -07:00] [INFO] [unknown:1816] ["[region 317] 1802 restored progress of 1802 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:39:37.570 -07:00] [INFO] [unknown:474] ["[region 317] 1802 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 19, term: 7]"]
[2019/05/01 12:39:37.570 -07:00] [INFO] [unknown:1736] ["[region 317] 1802 [commit: 19] restored snapshot [index: 19, term: 7]"]
[2019/05/01 12:39:37.570 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=1802] [region_id=317]
[2019/05/01 12:39:37.570 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 19, truncated_state: Some(RaftTruncatedState { index: 19, term: 7, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 317, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 114, 128, 0, 0, 0, 0, 255, 1, 212, 195, 0, 0, 0, 0, 0, 250], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 114, 128, 0, 0, 0, 0, 255, 1, 212, 197, 0, 0, 0, 0, 0, 250], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 20, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 318, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 320, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1147, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1802, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1802] [region_id=317]
[2019/05/01 12:39:37.607 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 317] 1802"]
[2019/05/01 12:39:37.607 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 317, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 114, 128, 0, 0, 0, 0, 255, 1, 212, 195, 0, 0, 0, 0, 0, 250], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 114, 128, 0, 0, 0, 0, 255, 1, 212, 197, 0, 0, 0, 0, 0, 250], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 20, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 318, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 320, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1147, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1802, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1802] [region_id=317]
[2019/05/01 12:39:37.607 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=317]
[2019/05/01 12:39:37.607 -07:00] [INFO] [unknown:1625] ["[region 132] 574 [term 7] received MsgTimeoutNow from 134 and starts an election to get leadership."]
[2019/05/01 12:39:37.607 -07:00] [INFO] [unknown:739] ["[region 132] 574 became candidate at term 8"]
[2019/05/01 12:39:37.607 -07:00] [INFO] [unknown:854] ["[region 132] 574 received MsgRequestVoteResponse from 574 at term 8"]
[2019/05/01 12:39:37.607 -07:00] [INFO] [unknown:828] ["[region 132] 574 [logterm: 7, index: 13] sent MsgRequestVote request to 314 at term 8"]
[2019/05/01 12:39:37.607 -07:00] [INFO] [unknown:828] ["[region 132] 574 [logterm: 7, index: 13] sent MsgRequestVote request to 134 at term 8"]
[2019/05/01 12:39:37.646 -07:00] [INFO] [unknown:854] ["[region 132] 574 received MsgRequestVoteResponse from 134 at term 8"]
[2019/05/01 12:39:37.646 -07:00] [INFO] [unknown:1550] ["[region 132] 574 [quorum:2] has received 2 MsgRequestVoteResponse votes and 0 vote rejections"]
[2019/05/01 12:39:37.646 -07:00] [INFO] [unknown:789] ["[region 132] 574 became leader at term 8"]
[2019/05/01 12:39:37.662 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=54.291085ms] [region_id=317]
[2019/05/01 12:39:37.694 -07:00] [INFO] [unknown:1625] ["[region 349] 1104 [term 7] received MsgTimeoutNow from 351 and starts an election to get leadership."]
[2019/05/01 12:39:37.694 -07:00] [INFO] [unknown:739] ["[region 349] 1104 became candidate at term 8"]
[2019/05/01 12:39:37.694 -07:00] [INFO] [unknown:854] ["[region 349] 1104 received MsgRequestVoteResponse from 1104 at term 8"]
[2019/05/01 12:39:37.694 -07:00] [INFO] [unknown:828] ["[region 349] 1104 [logterm: 7, index: 13] sent MsgRequestVote request to 351 at term 8"]
[2019/05/01 12:39:37.694 -07:00] [INFO] [unknown:828] ["[region 349] 1104 [logterm: 7, index: 13] sent MsgRequestVote request to 1511 at term 8"]
[2019/05/01 12:39:37.710 -07:00] [INFO] [unknown:920] ["[region 123] 491 [term: 7] received a MsgRequestVote message with higher term from 260 [term: 8]"]
[2019/05/01 12:39:37.710 -07:00] [INFO] [unknown:719] ["[region 123] 491 became follower at term 8"]
[2019/05/01 12:39:37.710 -07:00] [INFO] [unknown:1083] ["[region 123] 491 [logterm: 7, index: 13, vote: 0] cast MsgRequestVote for 260 [logterm: 7, index: 13] at term 8"]
[2019/05/01 12:39:37.754 -07:00] [INFO] [unknown:854] ["[region 349] 1104 received MsgRequestVoteResponse from 1511 at term 8"]
[2019/05/01 12:39:37.754 -07:00] [INFO] [unknown:1550] ["[region 349] 1104 [quorum:2] has received 2 MsgRequestVoteResponse votes and 0 vote rejections"]
[2019/05/01 12:39:37.754 -07:00] [INFO] [unknown:789] ["[region 349] 1104 became leader at term 8"]
[2019/05/01 12:39:38.148 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 1801, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=12] [term=7] [peer_id=896] [region_id=413]
[2019/05/01 12:39:38.149 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 9, version: 47, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=896] [region_id=413]
[2019/05/01 12:39:38.149 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 413, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 99, 111, 108, 108, 255, 97, 116, 105, 111, 255, 110, 95, 99, 255, 111, 110, 110, 101, 99, 255, 116, 105, 255, 111, 110, 0, 0, 0, 0, 251, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 99, 111, 108, 108, 255, 97, 116, 105, 111, 255, 110, 95, 100, 255, 97, 116, 97, 98, 97, 255, 115, 101, 255, 0, 0, 0, 0, 0, 0, 249, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 47, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 415, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 416, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 896, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1801, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1801, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=896] [region_id=413]
[2019/05/01 12:39:38.176 -07:00] [INFO] [unknown:841] ["New connected subchannel at 0x7f041bd1df00 for subchannel 0x7f04cf8cc400"]
[2019/05/01 12:39:38.230 -07:00] [INFO] [snap.rs:389] ["sent snapshot"] [duration=54.299004ms] [size=1375] [snap_key=800_7_11] [region_id=800]
[2019/05/01 12:39:38.242 -07:00] [INFO] [peer.rs:538] ["report snapshot status"] [status=Finish] [to="Peer { id: 1800, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=895] [region_id=800]
[2019/05/01 12:39:38.315 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 416, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=13] [term=7] [peer_id=896] [region_id=413]
[2019/05/01 12:39:38.327 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 10, version: 47, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=896] [region_id=413]
[2019/05/01 12:39:38.327 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 413, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 99, 111, 108, 108, 255, 97, 116, 105, 111, 255, 110, 95, 99, 255, 111, 110, 110, 101, 99, 255, 116, 105, 255, 111, 110, 0, 0, 0, 0, 251, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 99, 111, 108, 108, 255, 97, 116, 105, 111, 255, 110, 95, 100, 255, 97, 116, 97, 98, 97, 255, 115, 101, 255, 0, 0, 0, 0, 0, 0, 249, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 10, version: 47, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 415, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 416, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 896, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1801, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 416, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=896] [region_id=413]
[2019/05/01 12:39:38.716 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 1802, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=20] [term=7] [peer_id=1802] [region_id=317]
[2019/05/01 12:39:38.716 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 9, version: 20, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=1802] [region_id=317]
[2019/05/01 12:39:38.716 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 317, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 114, 128, 0, 0, 0, 0, 255, 1, 212, 195, 0, 0, 0, 0, 0, 250], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 114, 128, 0, 0, 0, 0, 255, 1, 212, 197, 0, 0, 0, 0, 0, 250], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 20, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 318, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 320, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1147, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1802, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1802, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1802] [region_id=317]
[2019/05/01 12:39:38.963 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 320, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=21] [term=7] [peer_id=1802] [region_id=317]
[2019/05/01 12:39:38.963 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 10, version: 20, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=1802] [region_id=317]
[2019/05/01 12:39:38.963 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 317, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 114, 128, 0, 0, 0, 0, 255, 1, 212, 195, 0, 0, 0, 0, 0, 250], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 114, 128, 0, 0, 0, 0, 255, 1, 212, 197, 0, 0, 0, 0, 0, 250], region_epoch: Some(RegionEpoch { conf_ver: 10, version: 20, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 318, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 320, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1147, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1802, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 320, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1802] [region_id=317]
[2019/05/01 12:39:39.072 -07:00] [INFO] [pd.rs:558] ["try to change peer"] [peer="Peer { id: 1800, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [change_type=AddNode] [region_id=800]
[2019/05/01 12:39:39.072 -07:00] [INFO] [peer.rs:1953] ["propose conf change peer"] [change_peer=1800] [change_type=AddNode] [peer_id=895] [region_id=800]
[2019/05/01 12:39:39.332 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 1800, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=12] [term=7] [peer_id=895] [region_id=800]
[2019/05/01 12:39:39.332 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 9, version: 97, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=895] [region_id=800]
[2019/05/01 12:39:39.332 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 800, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 104, 97, 118, 101, 255, 95, 115, 115, 108, 255, 0, 0, 0, 255, 0, 0, 0, 0, 0, 247, 0, 0, 253], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 104, 97, 118, 101, 255, 95, 115, 121, 109, 255, 108, 105, 110, 255, 107, 0, 0, 0, 0, 251, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 97, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 801, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 803, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 895, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1800, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1800, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=895] [region_id=800]
[2019/05/01 12:39:39.332 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=1803] [region_id=1433]
[2019/05/01 12:39:39.332 -07:00] [INFO] [unknown:719] ["[region 1433] 1803 became follower at term 0"]
[2019/05/01 12:39:39.332 -07:00] [INFO] [unknown:295] ["[region 1433] 1803 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:39:39.332 -07:00] [INFO] [unknown:719] ["[region 1433] 1803 became follower at term 1"]
[2019/05/01 12:39:39.333 -07:00] [INFO] [unknown:920] ["[region 1433] 1803 [term: 1] received a MsgHeartbeat message with higher term from 1434 [term: 7]"]
[2019/05/01 12:39:39.333 -07:00] [INFO] [unknown:719] ["[region 1433] 1803 became follower at term 7"]
[2019/05/01 12:39:39.385 -07:00] [INFO] [peer.rs:1318] ["notify pd with change peer region"] [region="Region { id: 800, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 104, 97, 118, 101, 255, 95, 115, 115, 108, 255, 0, 0, 0, 255, 0, 0, 0, 0, 0, 247, 0, 0, 253], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 104, 97, 118, 101, 255, 95, 115, 121, 109, 255, 108, 105, 110, 255, 107, 0, 0, 0, 0, 251, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 10, version: 97, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 801, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 803, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 895, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1800, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=895] [region_id=800]
[2019/05/01 12:39:39.424 -07:00] [INFO] [pd.rs:558] ["try to change peer"] [peer="Peer { id: 803, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [change_type=RemoveNode] [region_id=800]
[2019/05/01 12:39:39.424 -07:00] [INFO] [peer.rs:1953] ["propose conf change peer"] [change_peer=803] [change_type=RemoveNode] [peer_id=895] [region_id=800]
[2019/05/01 12:39:39.548 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 803, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=13] [term=7] [peer_id=895] [region_id=800]
[2019/05/01 12:39:39.548 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 10, version: 97, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=895] [region_id=800]
[2019/05/01 12:39:39.548 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 800, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 104, 97, 118, 101, 255, 95, 115, 115, 108, 255, 0, 0, 0, 255, 0, 0, 0, 0, 0, 247, 0, 0, 253], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 104, 97, 118, 101, 255, 95, 115, 121, 109, 255, 108, 105, 110, 255, 107, 0, 0, 0, 0, 251, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 10, version: 97, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 801, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 803, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 895, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1800, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 803, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=895] [region_id=800]
[2019/05/01 12:39:39.548 -07:00] [INFO] [pd.rs:558] ["try to change peer"] [peer="Peer { id: 803, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [change_type=RemoveNode] [region_id=800]
[2019/05/01 12:39:39.549 -07:00] [INFO] [peer.rs:1927] ["there is a pending conf change, try later"] [peer_id=895] [region_id=800]
[2019/05/01 12:39:39.603 -07:00] [INFO] [peer.rs:1318] ["notify pd with change peer region"] [region="Region { id: 800, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 104, 97, 118, 101, 255, 95, 115, 115, 108, 255, 0, 0, 0, 255, 0, 0, 0, 0, 0, 247, 0, 0, 253], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 104, 97, 118, 101, 255, 95, 115, 121, 109, 255, 108, 105, 110, 255, 107, 0, 0, 0, 0, 251, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 11, version: 97, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 801, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 895, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1800, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=895] [region_id=800]
[2019/05/01 12:39:39.975 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=1804] [region_id=1746]
[2019/05/01 12:39:39.975 -07:00] [INFO] [unknown:719] ["[region 1746] 1804 became follower at term 0"]
[2019/05/01 12:39:39.975 -07:00] [INFO] [unknown:295] ["[region 1746] 1804 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:39:39.975 -07:00] [INFO] [unknown:719] ["[region 1746] 1804 became follower at term 1"]
[2019/05/01 12:39:39.975 -07:00] [INFO] [unknown:920] ["[region 1746] 1804 [term: 1] received a MsgHeartbeat message with higher term from 1748 [term: 6]"]
[2019/05/01 12:39:39.975 -07:00] [INFO] [unknown:719] ["[region 1746] 1804 became follower at term 6"]
[2019/05/01 12:39:40.374 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=1806] [region_id=1289]
[2019/05/01 12:39:40.374 -07:00] [INFO] [unknown:719] ["[region 1289] 1806 became follower at term 0"]
[2019/05/01 12:39:40.374 -07:00] [INFO] [unknown:295] ["[region 1289] 1806 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:39:40.374 -07:00] [INFO] [unknown:719] ["[region 1289] 1806 became follower at term 1"]
[2019/05/01 12:39:40.374 -07:00] [INFO] [unknown:920] ["[region 1289] 1806 [term: 1] received a MsgHeartbeat message with higher term from 1292 [term: 6]"]
[2019/05/01 12:39:40.374 -07:00] [INFO] [unknown:719] ["[region 1289] 1806 became follower at term 6"]
[2019/05/01 12:39:41.336 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_1433_7_8_(default|lock|write).sst] [snap_key=1433_7_8]
[2019/05/01 12:39:41.380 -07:00] [INFO] [unknown:1792] ["[region 1433] 1803 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 8, term: 7]"]
[2019/05/01 12:39:41.380 -07:00] [INFO] [unknown:1816] ["[region 1433] 1803 restored progress of 1434 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:39:41.380 -07:00] [INFO] [unknown:1816] ["[region 1433] 1803 restored progress of 1435 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:39:41.380 -07:00] [INFO] [unknown:1816] ["[region 1433] 1803 restored progress of 1436 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:39:41.380 -07:00] [INFO] [unknown:1816] ["[region 1433] 1803 restored progress of 1803 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:39:41.380 -07:00] [INFO] [unknown:474] ["[region 1433] 1803 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 8, term: 7]"]
[2019/05/01 12:39:41.380 -07:00] [INFO] [unknown:1736] ["[region 1433] 1803 [commit: 8] restored snapshot [index: 8, term: 7]"]
[2019/05/01 12:39:41.380 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=1803] [region_id=1433]
[2019/05/01 12:39:41.380 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 8, truncated_state: Some(RaftTruncatedState { index: 8, term: 7, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 1433, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 114, 255, 101, 97, 100, 255, 95, 105, 111, 95, 116, 255, 104, 114, 255, 101, 97, 100, 115, 0, 0, 253, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 114, 255, 101, 97, 100, 255, 95, 111, 110, 108, 121, 255, 0, 0, 255, 0, 0, 0, 0, 0, 0, 247, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 197, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1434, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1435, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1436, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1803, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1803] [region_id=1433]
[2019/05/01 12:39:41.450 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 1433, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 114, 255, 101, 97, 100, 255, 95, 105, 111, 95, 116, 255, 104, 114, 255, 101, 97, 100, 115, 0, 0, 253, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 114, 255, 101, 97, 100, 255, 95, 111, 110, 108, 121, 255, 0, 0, 255, 0, 0, 0, 0, 0, 0, 247, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 197, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1434, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1435, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1436, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1803, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1803] [region_id=1433]
[2019/05/01 12:39:41.450 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 1433] 1803"]
[2019/05/01 12:39:41.450 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=1433]
[2019/05/01 12:39:41.510 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=59.077774ms] [region_id=1433]
[2019/05/01 12:39:42.026 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_1746_6_7_(default|lock|write).sst] [snap_key=1746_6_7]
[2019/05/01 12:39:42.052 -07:00] [INFO] [unknown:1792] ["[region 1746] 1804 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 7, term: 6]"]
[2019/05/01 12:39:42.065 -07:00] [INFO] [unknown:1816] ["[region 1746] 1804 restored progress of 1747 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:39:42.065 -07:00] [INFO] [unknown:1816] ["[region 1746] 1804 restored progress of 1748 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:39:42.065 -07:00] [INFO] [unknown:1816] ["[region 1746] 1804 restored progress of 1749 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:39:42.065 -07:00] [INFO] [unknown:1816] ["[region 1746] 1804 restored progress of 1804 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:39:42.065 -07:00] [INFO] [unknown:474] ["[region 1746] 1804 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 7, term: 6]"]
[2019/05/01 12:39:42.065 -07:00] [INFO] [unknown:1736] ["[region 1746] 1804 [commit: 7] restored snapshot [index: 7, term: 6]"]
[2019/05/01 12:39:42.065 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=1804] [region_id=1746]
[2019/05/01 12:39:42.065 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 7, truncated_state: Some(RaftTruncatedState { index: 7, term: 6, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 1746, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 108, 111, 103, 95, 255, 116, 104, 114, 111, 255, 116, 116, 108, 255, 101, 95, 113, 117, 101, 255, 114, 105, 255, 101, 115, 95, 110, 111, 116, 255, 95, 255, 117, 115, 105, 110, 103, 95, 105, 255, 255, 110, 100, 101, 120, 101, 115, 0, 0, 255, 253, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 108, 111, 103, 95, 255, 116, 105, 109, 101, 255, 115, 116, 97, 255, 109, 112, 115, 0, 0, 253, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 257, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1747, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1748, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1749, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1804, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1804] [region_id=1746]
[2019/05/01 12:39:42.145 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 1746] 1804"]
[2019/05/01 12:39:42.145 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 1746, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 108, 111, 103, 95, 255, 116, 104, 114, 111, 255, 116, 116, 108, 255, 101, 95, 113, 117, 101, 255, 114, 105, 255, 101, 115, 95, 110, 111, 116, 255, 95, 255, 117, 115, 105, 110, 103, 95, 105, 255, 255, 110, 100, 101, 120, 101, 115, 0, 0, 255, 253, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 108, 111, 103, 95, 255, 116, 105, 109, 101, 255, 115, 116, 97, 255, 109, 112, 115, 0, 0, 253, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 257, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1747, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1748, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1749, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1804, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1804] [region_id=1746]
[2019/05/01 12:39:42.145 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=1746]
[2019/05/01 12:39:42.257 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=111.498586ms] [region_id=1746]
[2019/05/01 12:39:42.378 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_1289_6_7_(default|lock|write).sst] [snap_key=1289_6_7]
[2019/05/01 12:39:42.394 -07:00] [INFO] [unknown:1792] ["[region 1289] 1806 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 7, term: 6]"]
[2019/05/01 12:39:42.394 -07:00] [INFO] [unknown:1816] ["[region 1289] 1806 restored progress of 1290 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:39:42.394 -07:00] [INFO] [unknown:1816] ["[region 1289] 1806 restored progress of 1291 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:39:42.394 -07:00] [INFO] [unknown:1816] ["[region 1289] 1806 restored progress of 1292 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:39:42.394 -07:00] [INFO] [unknown:1816] ["[region 1289] 1806 restored progress of 1806 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:39:42.394 -07:00] [INFO] [unknown:474] ["[region 1289] 1806 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 7, term: 6]"]
[2019/05/01 12:39:42.394 -07:00] [INFO] [unknown:1736] ["[region 1289] 1806 [commit: 7] restored snapshot [index: 7, term: 6]"]
[2019/05/01 12:39:42.394 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=1806] [region_id=1289]
[2019/05/01 12:39:42.394 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 7, truncated_state: Some(RaftTruncatedState { index: 7, term: 6, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 1289, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 108, 255, 111, 103, 95, 255, 99, 104, 101, 99, 107, 255, 115, 117, 255, 109, 95, 97, 108, 103, 111, 255, 114, 255, 105, 116, 104, 109, 0, 0, 0, 252, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 108, 255, 111, 103, 95, 255, 99, 111, 109, 112, 114, 255, 101, 115, 255, 115, 101, 100, 95, 112, 97, 255, 103, 255, 101, 115, 0, 0, 0, 0, 0, 250, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 167, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1290, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1291, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1292, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1806, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1806] [region_id=1289]
[2019/05/01 12:39:42.428 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 1803, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=9] [term=7] [peer_id=1803] [region_id=1433]
[2019/05/01 12:39:42.428 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 6, version: 197, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=1803] [region_id=1433]
[2019/05/01 12:39:42.428 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 1433, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 114, 255, 101, 97, 100, 255, 95, 105, 111, 95, 116, 255, 104, 114, 255, 101, 97, 100, 115, 0, 0, 253, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 114, 255, 101, 97, 100, 255, 95, 111, 110, 108, 121, 255, 0, 0, 255, 0, 0, 0, 0, 0, 0, 247, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 197, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1434, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1435, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1436, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1803, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1803, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1803] [region_id=1433]
[2019/05/01 12:39:42.440 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 1289] 1806"]
[2019/05/01 12:39:42.440 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 1289, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 108, 255, 111, 103, 95, 255, 99, 104, 101, 99, 107, 255, 115, 117, 255, 109, 95, 97, 108, 103, 111, 255, 114, 255, 105, 116, 104, 109, 0, 0, 0, 252, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 108, 255, 111, 103, 95, 255, 99, 111, 109, 112, 114, 255, 101, 115, 255, 115, 101, 100, 95, 112, 97, 255, 103, 255, 101, 115, 0, 0, 0, 0, 0, 250, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 167, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1290, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1291, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1292, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1806, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1806] [region_id=1289]
[2019/05/01 12:39:42.440 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=1289]
[2019/05/01 12:39:42.487 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=46.089969ms] [region_id=1289]
[2019/05/01 12:39:42.544 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 1436, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=10] [term=7] [peer_id=1803] [region_id=1433]
[2019/05/01 12:39:42.549 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 7, version: 197, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=1803] [region_id=1433]
[2019/05/01 12:39:42.549 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 1433, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 114, 255, 101, 97, 100, 255, 95, 105, 111, 95, 116, 255, 104, 114, 255, 101, 97, 100, 115, 0, 0, 253, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 114, 255, 101, 97, 100, 255, 95, 111, 110, 108, 121, 255, 0, 0, 255, 0, 0, 0, 0, 0, 0, 247, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 7, version: 197, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1434, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1435, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1436, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1803, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1436, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1803] [region_id=1433]
[2019/05/01 12:39:42.554 -07:00] [INFO] [unknown:1625] ["[region 141] 325 [term 7] received MsgTimeoutNow from 143 and starts an election to get leadership."]
[2019/05/01 12:39:42.554 -07:00] [INFO] [unknown:739] ["[region 141] 325 became candidate at term 8"]
[2019/05/01 12:39:42.554 -07:00] [INFO] [unknown:854] ["[region 141] 325 received MsgRequestVoteResponse from 325 at term 8"]
[2019/05/01 12:39:42.554 -07:00] [INFO] [unknown:828] ["[region 141] 325 [logterm: 7, index: 13] sent MsgRequestVote request to 573 at term 8"]
[2019/05/01 12:39:42.554 -07:00] [INFO] [unknown:828] ["[region 141] 325 [logterm: 7, index: 13] sent MsgRequestVote request to 143 at term 8"]
[2019/05/01 12:39:42.641 -07:00] [INFO] [unknown:854] ["[region 141] 325 received MsgRequestVoteResponse from 143 at term 8"]
[2019/05/01 12:39:42.641 -07:00] [INFO] [unknown:1550] ["[region 141] 325 [quorum:2] has received 2 MsgRequestVoteResponse votes and 0 vote rejections"]
[2019/05/01 12:39:42.641 -07:00] [INFO] [unknown:789] ["[region 141] 325 became leader at term 8"]
[2019/05/01 12:39:43.067 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 1804, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=8] [term=6] [peer_id=1804] [region_id=1746]
[2019/05/01 12:39:43.067 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 6, version: 257, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=1804] [region_id=1746]
[2019/05/01 12:39:43.067 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 1746, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 108, 111, 103, 95, 255, 116, 104, 114, 111, 255, 116, 116, 108, 255, 101, 95, 113, 117, 101, 255, 114, 105, 255, 101, 115, 95, 110, 111, 116, 255, 95, 255, 117, 115, 105, 110, 103, 95, 105, 255, 255, 110, 100, 101, 120, 101, 115, 0, 0, 255, 253, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 108, 111, 103, 95, 255, 116, 105, 109, 101, 255, 115, 116, 97, 255, 109, 112, 115, 0, 0, 253, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 257, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1747, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1748, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1749, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1804, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1804, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1804] [region_id=1746]
[2019/05/01 12:39:43.191 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 1749, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=9] [term=6] [peer_id=1804] [region_id=1746]
[2019/05/01 12:39:43.191 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 7, version: 257, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=1804] [region_id=1746]
[2019/05/01 12:39:43.191 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 1746, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 108, 111, 103, 95, 255, 116, 104, 114, 111, 255, 116, 116, 108, 255, 101, 95, 113, 117, 101, 255, 114, 105, 255, 101, 115, 95, 110, 111, 116, 255, 95, 255, 117, 115, 105, 110, 103, 95, 105, 255, 255, 110, 100, 101, 120, 101, 115, 0, 0, 255, 253, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 108, 111, 103, 95, 255, 116, 105, 109, 101, 255, 115, 116, 97, 255, 109, 112, 115, 0, 0, 253, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 7, version: 257, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1747, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1748, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1749, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1804, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1749, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1804] [region_id=1746]
[2019/05/01 12:39:43.402 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 1806, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=8] [term=6] [peer_id=1806] [region_id=1289]
[2019/05/01 12:39:43.402 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 6, version: 167, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=1806] [region_id=1289]
[2019/05/01 12:39:43.402 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 1289, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 108, 255, 111, 103, 95, 255, 99, 104, 101, 99, 107, 255, 115, 117, 255, 109, 95, 97, 108, 103, 111, 255, 114, 255, 105, 116, 104, 109, 0, 0, 0, 252, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 108, 255, 111, 103, 95, 255, 99, 111, 109, 112, 114, 255, 101, 115, 255, 115, 101, 100, 95, 112, 97, 255, 103, 255, 101, 115, 0, 0, 0, 0, 0, 250, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 167, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1290, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1291, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1292, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1806, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1806, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1806] [region_id=1289]
[2019/05/01 12:39:43.463 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 1290, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=9] [term=6] [peer_id=1806] [region_id=1289]
[2019/05/01 12:39:43.463 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 7, version: 167, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=1806] [region_id=1289]
[2019/05/01 12:39:43.463 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 1289, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 108, 255, 111, 103, 95, 255, 99, 104, 101, 99, 107, 255, 115, 117, 255, 109, 95, 97, 108, 103, 111, 255, 114, 255, 105, 116, 104, 109, 0, 0, 0, 252, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 108, 255, 111, 103, 95, 255, 99, 111, 109, 112, 114, 255, 101, 115, 255, 115, 101, 100, 95, 112, 97, 255, 103, 255, 101, 115, 0, 0, 0, 0, 0, 250, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 7, version: 167, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1290, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1291, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1292, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1806, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1290, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1806] [region_id=1289]
[2019/05/01 12:39:43.561 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=1848] [region_id=135]
[2019/05/01 12:39:43.562 -07:00] [INFO] [unknown:719] ["[region 135] 1848 became follower at term 0"]
[2019/05/01 12:39:43.562 -07:00] [INFO] [unknown:295] ["[region 135] 1848 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:39:43.562 -07:00] [INFO] [unknown:719] ["[region 135] 1848 became follower at term 1"]
[2019/05/01 12:39:43.562 -07:00] [INFO] [unknown:920] ["[region 135] 1848 [term: 1] received a MsgHeartbeat message with higher term from 315 [term: 8]"]
[2019/05/01 12:39:43.562 -07:00] [INFO] [unknown:719] ["[region 135] 1848 became follower at term 8"]
[2019/05/01 12:39:44.026 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=1849] [region_id=1691]
[2019/05/01 12:39:44.026 -07:00] [INFO] [unknown:719] ["[region 1691] 1849 became follower at term 0"]
[2019/05/01 12:39:44.026 -07:00] [INFO] [unknown:295] ["[region 1691] 1849 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:39:44.026 -07:00] [INFO] [unknown:719] ["[region 1691] 1849 became follower at term 1"]
[2019/05/01 12:39:44.026 -07:00] [INFO] [unknown:920] ["[region 1691] 1849 [term: 1] received a MsgHeartbeat message with higher term from 1693 [term: 6]"]
[2019/05/01 12:39:44.027 -07:00] [INFO] [unknown:719] ["[region 1691] 1849 became follower at term 6"]
[2019/05/01 12:39:44.066 -07:00] [INFO] [unknown:1625] ["[region 30] 1555 [term 7] received MsgTimeoutNow from 55 and starts an election to get leadership."]
[2019/05/01 12:39:44.066 -07:00] [INFO] [unknown:739] ["[region 30] 1555 became candidate at term 8"]
[2019/05/01 12:39:44.066 -07:00] [INFO] [unknown:854] ["[region 30] 1555 received MsgRequestVoteResponse from 1555 at term 8"]
[2019/05/01 12:39:44.066 -07:00] [INFO] [unknown:828] ["[region 30] 1555 [logterm: 7, index: 14] sent MsgRequestVote request to 55 at term 8"]
[2019/05/01 12:39:44.066 -07:00] [INFO] [unknown:828] ["[region 30] 1555 [logterm: 7, index: 14] sent MsgRequestVote request to 330 at term 8"]
[2019/05/01 12:39:44.112 -07:00] [INFO] [unknown:854] ["[region 30] 1555 received MsgRequestVoteResponse from 330 at term 8"]
[2019/05/01 12:39:44.112 -07:00] [INFO] [unknown:1550] ["[region 30] 1555 [quorum:2] has received 2 MsgRequestVoteResponse votes and 0 vote rejections"]
[2019/05/01 12:39:44.112 -07:00] [INFO] [unknown:789] ["[region 30] 1555 became leader at term 8"]
[2019/05/01 12:39:44.112 -07:00] [INFO] [unknown:1625] ["[region 144] 326 [term 7] received MsgTimeoutNow from 146 and starts an election to get leadership."]
[2019/05/01 12:39:44.112 -07:00] [INFO] [unknown:739] ["[region 144] 326 became candidate at term 8"]
[2019/05/01 12:39:44.112 -07:00] [INFO] [unknown:854] ["[region 144] 326 received MsgRequestVoteResponse from 326 at term 8"]
[2019/05/01 12:39:44.113 -07:00] [INFO] [unknown:828] ["[region 144] 326 [logterm: 7, index: 13] sent MsgRequestVote request to 665 at term 8"]
[2019/05/01 12:39:44.113 -07:00] [INFO] [unknown:828] ["[region 144] 326 [logterm: 7, index: 13] sent MsgRequestVote request to 146 at term 8"]
[2019/05/01 12:39:44.162 -07:00] [INFO] [unknown:854] ["[region 144] 326 received MsgRequestVoteResponse from 665 at term 8"]
[2019/05/01 12:39:44.162 -07:00] [INFO] [unknown:1550] ["[region 144] 326 [quorum:2] has received 2 MsgRequestVoteResponse votes and 0 vote rejections"]
[2019/05/01 12:39:44.162 -07:00] [INFO] [unknown:789] ["[region 144] 326 became leader at term 8"]
[2019/05/01 12:39:45.565 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_135_8_12_(default|lock|write).sst] [snap_key=135_8_12]
[2019/05/01 12:39:45.577 -07:00] [INFO] [unknown:1792] ["[region 135] 1848 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 12, term: 8]"]
[2019/05/01 12:39:45.577 -07:00] [INFO] [unknown:1816] ["[region 135] 1848 restored progress of 136 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:39:45.577 -07:00] [INFO] [unknown:1816] ["[region 135] 1848 restored progress of 137 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:39:45.577 -07:00] [INFO] [unknown:1816] ["[region 135] 1848 restored progress of 315 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:39:45.577 -07:00] [INFO] [unknown:1816] ["[region 135] 1848 restored progress of 1848 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:39:45.577 -07:00] [INFO] [unknown:474] ["[region 135] 1848 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 12, term: 8]"]
[2019/05/01 12:39:45.577 -07:00] [INFO] [unknown:1736] ["[region 135] 1848 [commit: 12] restored snapshot [index: 12, term: 8]"]
[2019/05/01 12:39:45.577 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=1848] [region_id=135]
[2019/05/01 12:39:45.577 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 12, truncated_state: Some(RaftTruncatedState { index: 12, term: 8, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 135, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 116, 105, 107, 118, 255, 95, 103, 99, 95, 255, 108, 101, 97, 255, 100, 101, 114, 95, 100, 255, 101, 115, 255, 99, 0, 0, 0, 0, 0, 250, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 116, 105, 107, 118, 255, 95, 103, 99, 95, 255, 108, 101, 97, 255, 100, 101, 114, 95, 117, 255, 117, 105, 255, 100, 0, 0, 0, 0, 0, 250, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 18, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 136, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 137, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 315, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1848, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1848] [region_id=135]
[2019/05/01 12:39:45.593 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 135] 1848"]
[2019/05/01 12:39:45.593 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 135, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 116, 105, 107, 118, 255, 95, 103, 99, 95, 255, 108, 101, 97, 255, 100, 101, 114, 95, 100, 255, 101, 115, 255, 99, 0, 0, 0, 0, 0, 250, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 116, 105, 107, 118, 255, 95, 103, 99, 95, 255, 108, 101, 97, 255, 100, 101, 114, 95, 117, 255, 117, 105, 255, 100, 0, 0, 0, 0, 0, 250, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 18, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 136, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 137, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 315, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1848, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1848] [region_id=135]
[2019/05/01 12:39:45.593 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=135]
[2019/05/01 12:39:45.618 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=25.01794ms] [region_id=135]
[2019/05/01 12:39:46.030 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_1691_6_7_(default|lock|write).sst] [snap_key=1691_6_7]
[2019/05/01 12:39:46.040 -07:00] [INFO] [unknown:1792] ["[region 1691] 1849 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 7, term: 6]"]
[2019/05/01 12:39:46.040 -07:00] [INFO] [unknown:1816] ["[region 1691] 1849 restored progress of 1692 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:39:46.040 -07:00] [INFO] [unknown:1816] ["[region 1691] 1849 restored progress of 1693 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:39:46.040 -07:00] [INFO] [unknown:1816] ["[region 1691] 1849 restored progress of 1694 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:39:46.040 -07:00] [INFO] [unknown:1816] ["[region 1691] 1849 restored progress of 1849 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:39:46.040 -07:00] [INFO] [unknown:474] ["[region 1691] 1849 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 7, term: 6]"]
[2019/05/01 12:39:46.040 -07:00] [INFO] [unknown:1736] ["[region 1691] 1849 [commit: 7] restored snapshot [index: 7, term: 6]"]
[2019/05/01 12:39:46.040 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=1849] [region_id=1691]
[2019/05/01 12:39:46.040 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 7, truncated_state: Some(RaftTruncatedState { index: 7, term: 6, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 1691, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 108, 111, 103, 95, 255, 101, 114, 114, 111, 255, 114, 95, 118, 255, 101, 114, 98, 111, 115, 255, 105, 116, 255, 121, 0, 0, 0, 0, 0, 250, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 108, 111, 103, 95, 255, 111, 117, 116, 112, 255, 117, 116, 0, 255, 0, 0, 0, 0, 0, 249, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 247, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1692, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1693, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1694, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1849, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1849] [region_id=1691]
[2019/05/01 12:39:46.057 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 1691, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 108, 111, 103, 95, 255, 101, 114, 114, 111, 255, 114, 95, 118, 255, 101, 114, 98, 111, 115, 255, 105, 116, 255, 121, 0, 0, 0, 0, 0, 250, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 108, 111, 103, 95, 255, 111, 117, 116, 112, 255, 117, 116, 0, 255, 0, 0, 0, 0, 0, 249, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 247, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1692, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1693, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1694, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1849, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1849] [region_id=1691]
[2019/05/01 12:39:46.057 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 1691] 1849"]
[2019/05/01 12:39:46.057 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=1691]
[2019/05/01 12:39:46.094 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=36.807989ms] [region_id=1691]
[2019/05/01 12:39:46.595 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 1848, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=13] [term=8] [peer_id=1848] [region_id=135]
[2019/05/01 12:39:46.595 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 6, version: 18, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=1848] [region_id=135]
[2019/05/01 12:39:46.595 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 135, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 116, 105, 107, 118, 255, 95, 103, 99, 95, 255, 108, 101, 97, 255, 100, 101, 114, 95, 100, 255, 101, 115, 255, 99, 0, 0, 0, 0, 0, 250, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 116, 105, 107, 118, 255, 95, 103, 99, 95, 255, 108, 101, 97, 255, 100, 101, 114, 95, 117, 255, 117, 105, 255, 100, 0, 0, 0, 0, 0, 250, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 18, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 136, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 137, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 315, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1848, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1848, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1848] [region_id=135]
[2019/05/01 12:39:46.655 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 136, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=14] [term=8] [peer_id=1848] [region_id=135]
[2019/05/01 12:39:46.655 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 7, version: 18, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=1848] [region_id=135]
[2019/05/01 12:39:46.655 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 135, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 116, 105, 107, 118, 255, 95, 103, 99, 95, 255, 108, 101, 97, 255, 100, 101, 114, 95, 100, 255, 101, 115, 255, 99, 0, 0, 0, 0, 0, 250, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 40, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 116, 105, 107, 118, 255, 95, 103, 99, 95, 255, 108, 101, 97, 255, 100, 101, 114, 95, 117, 255, 117, 105, 255, 100, 0, 0, 0, 0, 0, 250, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 7, version: 18, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 136, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 137, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 315, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1848, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 136, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1848] [region_id=135]
[2019/05/01 12:39:47.109 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 1849, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=8] [term=6] [peer_id=1849] [region_id=1691]
[2019/05/01 12:39:47.109 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 6, version: 247, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=1849] [region_id=1691]
[2019/05/01 12:39:47.109 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 1691, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 108, 111, 103, 95, 255, 101, 114, 114, 111, 255, 114, 95, 118, 255, 101, 114, 98, 111, 115, 255, 105, 116, 255, 121, 0, 0, 0, 0, 0, 250, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 108, 111, 103, 95, 255, 111, 117, 116, 112, 255, 117, 116, 0, 255, 0, 0, 0, 0, 0, 249, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 247, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1692, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1693, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1694, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1849, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1849, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1849] [region_id=1691]
[2019/05/01 12:39:47.161 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 1692, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=9] [term=6] [peer_id=1849] [region_id=1691]
[2019/05/01 12:39:47.161 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 7, version: 247, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=1849] [region_id=1691]
[2019/05/01 12:39:47.161 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 1691, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 108, 111, 103, 95, 255, 101, 114, 114, 111, 255, 114, 95, 118, 255, 101, 114, 98, 111, 115, 255, 105, 116, 255, 121, 0, 0, 0, 0, 0, 250, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 108, 111, 103, 95, 255, 111, 117, 116, 112, 255, 117, 116, 0, 255, 0, 0, 0, 0, 0, 249, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 7, version: 247, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1692, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1693, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1694, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1849, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1692, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1849] [region_id=1691]
[2019/05/01 12:39:47.972 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=1851] [region_id=696]
[2019/05/01 12:39:47.972 -07:00] [INFO] [unknown:719] ["[region 696] 1851 became follower at term 0"]
[2019/05/01 12:39:47.972 -07:00] [INFO] [unknown:295] ["[region 696] 1851 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:39:47.972 -07:00] [INFO] [unknown:719] ["[region 696] 1851 became follower at term 1"]
[2019/05/01 12:39:47.972 -07:00] [INFO] [unknown:920] ["[region 696] 1851 [term: 1] received a MsgHeartbeat message with higher term from 1305 [term: 8]"]
[2019/05/01 12:39:47.973 -07:00] [INFO] [unknown:719] ["[region 696] 1851 became follower at term 8"]
[2019/05/01 12:39:49.976 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_696_8_12_(default|lock|write).sst] [snap_key=696_8_12]
[2019/05/01 12:39:49.991 -07:00] [INFO] [unknown:1792] ["[region 696] 1851 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 12, term: 8]"]
[2019/05/01 12:39:49.991 -07:00] [INFO] [unknown:1816] ["[region 696] 1851 restored progress of 698 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:39:49.991 -07:00] [INFO] [unknown:1816] ["[region 696] 1851 restored progress of 699 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:39:49.991 -07:00] [INFO] [unknown:1816] ["[region 696] 1851 restored progress of 1305 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:39:49.991 -07:00] [INFO] [unknown:1816] ["[region 696] 1851 restored progress of 1851 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:39:49.991 -07:00] [INFO] [unknown:474] ["[region 696] 1851 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 12, term: 8]"]
[2019/05/01 12:39:49.991 -07:00] [INFO] [unknown:1736] ["[region 696] 1851 [commit: 12] restored snapshot [index: 12, term: 8]"]
[2019/05/01 12:39:49.991 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=1851] [region_id=696]
[2019/05/01 12:39:49.991 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 12, truncated_state: Some(RaftTruncatedState { index: 12, term: 8, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 696, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 104, 97, 118, 101, 255, 95, 99, 111, 109, 255, 112, 114, 101, 255, 115, 115, 0, 0, 0, 252, 0, 0, 253], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 104, 97, 118, 101, 255, 95, 99, 114, 121, 255, 112, 116, 0, 255, 0, 0, 0, 0, 0, 249, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 87, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 698, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 699, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1305, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1851, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1851] [region_id=696]
[2019/05/01 12:39:50.014 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 696, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 104, 97, 118, 101, 255, 95, 99, 111, 109, 255, 112, 114, 101, 255, 115, 115, 0, 0, 0, 252, 0, 0, 253], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 104, 97, 118, 101, 255, 95, 99, 114, 121, 255, 112, 116, 0, 255, 0, 0, 0, 0, 0, 249, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 87, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 698, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 699, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1305, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1851, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1851] [region_id=696]
[2019/05/01 12:39:50.014 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 696] 1851"]
[2019/05/01 12:39:50.014 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=696]
[2019/05/01 12:39:50.046 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=32.240888ms] [region_id=696]
[2019/05/01 12:39:51.054 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 1851, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=13] [term=8] [peer_id=1851] [region_id=696]
[2019/05/01 12:39:51.054 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 9, version: 87, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=1851] [region_id=696]
[2019/05/01 12:39:51.054 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 696, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 104, 97, 118, 101, 255, 95, 99, 111, 109, 255, 112, 114, 101, 255, 115, 115, 0, 0, 0, 252, 0, 0, 253], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 104, 97, 118, 101, 255, 95, 99, 114, 121, 255, 112, 116, 0, 255, 0, 0, 0, 0, 0, 249, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 87, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 698, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 699, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1305, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1851, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1851, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1851] [region_id=696]
[2019/05/01 12:39:51.096 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddLearnerNode, peer: Some(Peer { id: 1855, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=10] [term=6] [peer_id=1652] [region_id=1578]
[2019/05/01 12:39:51.096 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 8, version: 227, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddLearner] [peer_id=1652] [region_id=1578]
[2019/05/01 12:39:51.096 -07:00] [INFO] [apply.rs:1476] ["add learner successfully"] [region="Region { id: 1578, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 118, 255, 101, 114, 115, 255, 105, 111, 110, 0, 0, 253, 0, 0, 253], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 119, 255, 114, 105, 116, 255, 101, 95, 105, 111, 95, 255, 116, 104, 255, 114, 101, 97, 100, 115, 0, 254, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 8, version: 227, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1580, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1581, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1652, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1855, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1652] [region_id=1578]
[2019/05/01 12:39:51.175 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 698, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=14] [term=8] [peer_id=1851] [region_id=696]
[2019/05/01 12:39:51.175 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 10, version: 87, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=1851] [region_id=696]
[2019/05/01 12:39:51.175 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 696, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 104, 97, 118, 101, 255, 95, 99, 111, 109, 255, 112, 114, 101, 255, 115, 115, 0, 0, 0, 252, 0, 0, 253], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 104, 97, 118, 101, 255, 95, 99, 114, 121, 255, 112, 116, 0, 255, 0, 0, 0, 0, 0, 249, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 10, version: 87, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 698, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 699, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1305, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1851, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 698, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1851] [region_id=696]
[2019/05/01 12:39:51.213 -07:00] [INFO] [pd.rs:558] ["try to change peer"] [peer="Peer { id: 1857, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [change_type=AddLearnerNode] [region_id=241]
[2019/05/01 12:39:51.214 -07:00] [INFO] [peer.rs:1953] ["propose conf change peer"] [change_peer=1857] [change_type=AddLearnerNode] [peer_id=894] [region_id=241]
[2019/05/01 12:39:51.272 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddLearnerNode, peer: Some(Peer { id: 1857, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=11] [term=7] [peer_id=894] [region_id=241]
[2019/05/01 12:39:51.272 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 8, version: 27, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddLearner] [peer_id=894] [region_id=241]
[2019/05/01 12:39:51.272 -07:00] [INFO] [apply.rs:1476] ["add learner successfully"] [region="Region { id: 241, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 95, 103, 255, 116, 105, 100, 255, 95, 115, 105, 109, 112, 255, 108, 101, 255, 95, 114, 101, 99, 111, 118, 255, 101, 255, 114, 121, 0, 0, 0, 0, 0, 250, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 95, 109, 255, 97, 120, 95, 255, 102, 108, 117, 115, 104, 255, 95, 113, 255, 117, 101, 117, 101, 95, 116, 255, 105, 255, 109, 101, 0, 0, 0, 0, 0, 250, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 8, version: 27, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 242, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 244, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 894, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1857, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=894] [region_id=241]
[2019/05/01 12:39:51.280 -07:00] [INFO] [peer.rs:1318] ["notify pd with change peer region"] [region="Region { id: 241, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 95, 103, 255, 116, 105, 100, 255, 95, 115, 105, 109, 112, 255, 108, 101, 255, 95, 114, 101, 99, 111, 118, 255, 101, 255, 114, 121, 0, 0, 0, 0, 0, 250, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 95, 109, 255, 97, 120, 95, 255, 102, 108, 117, 115, 104, 255, 95, 113, 255, 117, 101, 117, 101, 95, 116, 255, 105, 255, 109, 101, 0, 0, 0, 0, 0, 250, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 27, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 242, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 244, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 894, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1857, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=894] [region_id=241]
[2019/05/01 12:39:52.069 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=1858] [region_id=1687]
[2019/05/01 12:39:52.069 -07:00] [INFO] [unknown:719] ["[region 1687] 1858 became follower at term 0"]
[2019/05/01 12:39:52.069 -07:00] [INFO] [unknown:295] ["[region 1687] 1858 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:39:52.069 -07:00] [INFO] [unknown:719] ["[region 1687] 1858 became follower at term 1"]
[2019/05/01 12:39:52.069 -07:00] [INFO] [unknown:920] ["[region 1687] 1858 [term: 1] received a MsgHeartbeat message with higher term from 1689 [term: 6]"]
[2019/05/01 12:39:52.069 -07:00] [INFO] [unknown:719] ["[region 1687] 1858 became follower at term 6"]
[2019/05/01 12:39:52.322 -07:00] [INFO] [unknown:1625] ["[region 105] 1151 [term 8] received MsgTimeoutNow from 107 and starts an election to get leadership."]
[2019/05/01 12:39:52.322 -07:00] [INFO] [unknown:739] ["[region 105] 1151 became candidate at term 9"]
[2019/05/01 12:39:52.322 -07:00] [INFO] [unknown:854] ["[region 105] 1151 received MsgRequestVoteResponse from 1151 at term 9"]
[2019/05/01 12:39:52.322 -07:00] [INFO] [unknown:828] ["[region 105] 1151 [logterm: 8, index: 17] sent MsgRequestVote request to 107 at term 9"]
[2019/05/01 12:39:52.322 -07:00] [INFO] [unknown:828] ["[region 105] 1151 [logterm: 8, index: 17] sent MsgRequestVote request to 1199 at term 9"]
[2019/05/01 12:39:52.341 -07:00] [INFO] [unknown:854] ["[region 105] 1151 received MsgRequestVoteResponse from 107 at term 9"]
[2019/05/01 12:39:52.341 -07:00] [INFO] [unknown:1550] ["[region 105] 1151 [quorum:2] has received 2 MsgRequestVoteResponse votes and 0 vote rejections"]
[2019/05/01 12:39:52.341 -07:00] [INFO] [unknown:789] ["[region 105] 1151 became leader at term 9"]
[2019/05/01 12:39:52.391 -07:00] [INFO] [peer_storage.rs:759] ["requesting snapshot"] [peer_id=894] [region_id=241]
[2019/05/01 12:39:52.392 -07:00] [INFO] [snap.rs:757] ["scan snapshot of one cf"] [size=0] [key_count=0] [cf=default] [snapshot=/opt/tidb/data/kv/snap/gen_241_7_11_(default|lock|write).sst] [region_id=241]
[2019/05/01 12:39:52.392 -07:00] [INFO] [snap.rs:757] ["scan snapshot of one cf"] [size=0] [key_count=0] [cf=lock] [snapshot=/opt/tidb/data/kv/snap/gen_241_7_11_(default|lock|write).sst] [region_id=241]
[2019/05/01 12:39:52.392 -07:00] [INFO] [snap.rs:757] ["scan snapshot of one cf"] [size=192] [key_count=2] [cf=write] [snapshot=/opt/tidb/data/kv/snap/gen_241_7_11_(default|lock|write).sst] [region_id=241]
[2019/05/01 12:39:52.400 -07:00] [INFO] [snap.rs:875] ["scan snapshot"] [takes=7.718802ms] [size=1487] [key_count=2] [snapshot=/opt/tidb/data/kv/snap/gen_241_7_11_(default|lock|write).sst] [region_id=241]
[2019/05/01 12:39:52.577 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=1856] [region_id=610]
[2019/05/01 12:39:52.577 -07:00] [INFO] [unknown:719] ["[region 610] 1856 became follower at term 0"]
[2019/05/01 12:39:52.577 -07:00] [INFO] [unknown:295] ["[region 610] 1856 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:39:52.577 -07:00] [INFO] [unknown:719] ["[region 610] 1856 became follower at term 1"]
[2019/05/01 12:39:52.577 -07:00] [INFO] [unknown:920] ["[region 610] 1856 [term: 1] received a MsgHeartbeat message with higher term from 611 [term: 6]"]
[2019/05/01 12:39:52.577 -07:00] [INFO] [unknown:719] ["[region 610] 1856 became follower at term 6"]
[2019/05/01 12:39:54.072 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_1687_6_7_(default|lock|write).sst] [snap_key=1687_6_7]
[2019/05/01 12:39:54.088 -07:00] [INFO] [unknown:1792] ["[region 1687] 1858 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 7, term: 6]"]
[2019/05/01 12:39:54.088 -07:00] [INFO] [unknown:1816] ["[region 1687] 1858 restored progress of 1688 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:39:54.088 -07:00] [INFO] [unknown:1816] ["[region 1687] 1858 restored progress of 1689 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:39:54.088 -07:00] [INFO] [unknown:1816] ["[region 1687] 1858 restored progress of 1690 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:39:54.088 -07:00] [INFO] [unknown:1816] ["[region 1687] 1858 restored progress of 1858 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:39:54.088 -07:00] [INFO] [unknown:474] ["[region 1687] 1858 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 7, term: 6]"]
[2019/05/01 12:39:54.088 -07:00] [INFO] [unknown:1736] ["[region 1687] 1858 [commit: 7] restored snapshot [index: 7, term: 6]"]
[2019/05/01 12:39:54.088 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=1858] [region_id=1687]
[2019/05/01 12:39:54.088 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 7, truncated_state: Some(RaftTruncatedState { index: 7, term: 6, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 1687, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 108, 111, 103, 95, 255, 101, 114, 114, 111, 255, 114, 0, 0, 255, 0, 0, 0, 0, 0, 248, 0, 0, 253], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 108, 111, 103, 95, 255, 101, 114, 114, 111, 255, 114, 95, 118, 255, 101, 114, 98, 111, 115, 255, 105, 116, 255, 121, 0, 0, 0, 0, 0, 250, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 247, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1688, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1689, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1690, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1858, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1858] [region_id=1687]
[2019/05/01 12:39:54.134 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 1687, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 108, 111, 103, 95, 255, 101, 114, 114, 111, 255, 114, 0, 0, 255, 0, 0, 0, 0, 0, 248, 0, 0, 253], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 108, 111, 103, 95, 255, 101, 114, 114, 111, 255, 114, 95, 118, 255, 101, 114, 98, 111, 115, 255, 105, 116, 255, 121, 0, 0, 0, 0, 0, 250, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 247, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1688, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1689, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1690, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1858, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1858] [region_id=1687]
[2019/05/01 12:39:54.134 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 1687] 1858"]
[2019/05/01 12:39:54.134 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=1687]
[2019/05/01 12:39:54.178 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=44.253191ms] [region_id=1687]
[2019/05/01 12:39:54.389 -07:00] [INFO] [unknown:841] ["New connected subchannel at 0x7f04cf8b4c00 for subchannel 0x7f04cf8cc600"]
[2019/05/01 12:39:54.408 -07:00] [INFO] [snap.rs:389] ["sent snapshot"] [duration=19.437882ms] [size=1487] [snap_key=241_7_11] [region_id=241]
[2019/05/01 12:39:54.408 -07:00] [INFO] [peer.rs:538] ["report snapshot status"] [status=Finish] [to="Peer { id: 1857, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=894] [region_id=241]
[2019/05/01 12:39:54.581 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_610_6_7_(default|lock|write).sst] [snap_key=610_6_7]
[2019/05/01 12:39:54.600 -07:00] [INFO] [unknown:1792] ["[region 610] 1856 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 7, term: 6]"]
[2019/05/01 12:39:54.600 -07:00] [INFO] [unknown:1816] ["[region 610] 1856 restored progress of 611 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:39:54.600 -07:00] [INFO] [unknown:1816] ["[region 610] 1856 restored progress of 612 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:39:54.600 -07:00] [INFO] [unknown:1816] ["[region 610] 1856 restored progress of 613 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:39:54.600 -07:00] [INFO] [unknown:1816] ["[region 610] 1856 restored progress of 1856 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:39:54.600 -07:00] [INFO] [unknown:474] ["[region 610] 1856 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 7, term: 6]"]
[2019/05/01 12:39:54.600 -07:00] [INFO] [unknown:1736] ["[region 610] 1856 [commit: 7] restored snapshot [index: 7, term: 6]"]
[2019/05/01 12:39:54.600 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=1856] [region_id=610]
[2019/05/01 12:39:54.600 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 7, truncated_state: Some(RaftTruncatedState { index: 7, term: 6, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 610, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 102, 116, 95, 109, 255, 105, 110, 95, 119, 255, 111, 114, 100, 255, 95, 108, 101, 110, 0, 254, 0, 0, 253], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 102, 116, 95, 113, 255, 117, 101, 114, 121, 255, 95, 101, 120, 255, 112, 97, 110, 115, 105, 255, 111, 110, 255, 95, 108, 105, 109, 105, 116, 255, 0, 255, 0, 0, 0, 0, 0, 0, 0, 247, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 77, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 611, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 612, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 613, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1856, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1856] [region_id=610]
[2019/05/01 12:39:54.644 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 610] 1856"]
[2019/05/01 12:39:54.644 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 610, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 102, 116, 95, 109, 255, 105, 110, 95, 119, 255, 111, 114, 100, 255, 95, 108, 101, 110, 0, 254, 0, 0, 253], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 102, 116, 95, 113, 255, 117, 101, 114, 121, 255, 95, 101, 120, 255, 112, 97, 110, 115, 105, 255, 111, 110, 255, 95, 108, 105, 109, 105, 116, 255, 0, 255, 0, 0, 0, 0, 0, 0, 0, 247, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 77, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 611, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 612, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 613, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1856, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1856] [region_id=610]
[2019/05/01 12:39:54.644 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=610]
[2019/05/01 12:39:54.694 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=48.92825ms] [region_id=610]
[2019/05/01 12:39:54.816 -07:00] [INFO] [unknown:920] ["[region 493] 1010 [term: 7] received a MsgRequestVote message with higher term from 1646 [term: 8]"]
[2019/05/01 12:39:54.816 -07:00] [INFO] [unknown:719] ["[region 493] 1010 became follower at term 8"]
[2019/05/01 12:39:54.816 -07:00] [INFO] [unknown:1083] ["[region 493] 1010 [logterm: 7, index: 13, vote: 0] cast MsgRequestVote for 1646 [logterm: 7, index: 13] at term 8"]
[2019/05/01 12:39:54.863 -07:00] [INFO] [unknown:1625] ["[region 413] 896 [term 7] received MsgTimeoutNow from 415 and starts an election to get leadership."]
[2019/05/01 12:39:54.863 -07:00] [INFO] [unknown:739] ["[region 413] 896 became candidate at term 8"]
[2019/05/01 12:39:54.863 -07:00] [INFO] [unknown:854] ["[region 413] 896 received MsgRequestVoteResponse from 896 at term 8"]
[2019/05/01 12:39:54.863 -07:00] [INFO] [unknown:828] ["[region 413] 896 [logterm: 7, index: 13] sent MsgRequestVote request to 415 at term 8"]
[2019/05/01 12:39:54.863 -07:00] [INFO] [unknown:828] ["[region 413] 896 [logterm: 7, index: 13] sent MsgRequestVote request to 1801 at term 8"]
[2019/05/01 12:39:54.874 -07:00] [INFO] [unknown:920] ["[region 425] 1152 [term: 7] received a MsgRequestVote message with higher term from 662 [term: 8]"]
[2019/05/01 12:39:54.874 -07:00] [INFO] [unknown:719] ["[region 425] 1152 became follower at term 8"]
[2019/05/01 12:39:54.874 -07:00] [INFO] [unknown:1083] ["[region 425] 1152 [logterm: 7, index: 13, vote: 0] cast MsgRequestVote for 662 [logterm: 7, index: 13] at term 8"]
[2019/05/01 12:39:54.896 -07:00] [INFO] [unknown:1625] ["[region 1137] 1605 [term 7] received MsgTimeoutNow from 1139 and starts an election to get leadership."]
[2019/05/01 12:39:54.901 -07:00] [INFO] [unknown:739] ["[region 1137] 1605 became candidate at term 8"]
[2019/05/01 12:39:54.901 -07:00] [INFO] [unknown:854] ["[region 1137] 1605 received MsgRequestVoteResponse from 1605 at term 8"]
[2019/05/01 12:39:54.901 -07:00] [INFO] [unknown:828] ["[region 1137] 1605 [logterm: 7, index: 10] sent MsgRequestVote request to 1139 at term 8"]
[2019/05/01 12:39:54.901 -07:00] [INFO] [unknown:828] ["[region 1137] 1605 [logterm: 7, index: 10] sent MsgRequestVote request to 1138 at term 8"]
[2019/05/01 12:39:54.960 -07:00] [INFO] [unknown:854] ["[region 413] 896 received MsgRequestVoteResponse from 415 at term 8"]
[2019/05/01 12:39:54.960 -07:00] [INFO] [unknown:1550] ["[region 413] 896 [quorum:2] has received 2 MsgRequestVoteResponse votes and 0 vote rejections"]
[2019/05/01 12:39:54.960 -07:00] [INFO] [unknown:789] ["[region 413] 896 became leader at term 8"]
[2019/05/01 12:39:54.972 -07:00] [INFO] [unknown:854] ["[region 1137] 1605 received MsgRequestVoteResponse from 1138 at term 8"]
[2019/05/01 12:39:54.976 -07:00] [INFO] [unknown:1550] ["[region 1137] 1605 [quorum:2] has received 2 MsgRequestVoteResponse votes and 0 vote rejections"]
[2019/05/01 12:39:54.976 -07:00] [INFO] [unknown:789] ["[region 1137] 1605 became leader at term 8"]
[2019/05/01 12:39:55.192 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 1858, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=8] [term=6] [peer_id=1858] [region_id=1687]
[2019/05/01 12:39:55.192 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 6, version: 247, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=1858] [region_id=1687]
[2019/05/01 12:39:55.192 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 1687, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 108, 111, 103, 95, 255, 101, 114, 114, 111, 255, 114, 0, 0, 255, 0, 0, 0, 0, 0, 248, 0, 0, 253], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 108, 111, 103, 95, 255, 101, 114, 114, 111, 255, 114, 95, 118, 255, 101, 114, 98, 111, 115, 255, 105, 116, 255, 121, 0, 0, 0, 0, 0, 250, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 247, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1688, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1689, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1690, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1858, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1858, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1858] [region_id=1687]
[2019/05/01 12:39:55.264 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 1855, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=11] [term=6] [peer_id=1652] [region_id=1578]
[2019/05/01 12:39:55.264 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 9, version: 227, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=1652] [region_id=1578]
[2019/05/01 12:39:55.264 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 1578, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 118, 255, 101, 114, 115, 255, 105, 111, 110, 0, 0, 253, 0, 0, 253], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 119, 255, 114, 105, 116, 255, 101, 95, 105, 111, 95, 255, 116, 104, 255, 114, 101, 97, 100, 115, 0, 254, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 227, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1580, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1581, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1652, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1855, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1855, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1652] [region_id=1578]
[2019/05/01 12:39:55.278 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 1690, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=9] [term=6] [peer_id=1858] [region_id=1687]
[2019/05/01 12:39:55.288 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 7, version: 247, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=1858] [region_id=1687]
[2019/05/01 12:39:55.288 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 1687, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 108, 111, 103, 95, 255, 101, 114, 114, 111, 255, 114, 0, 0, 255, 0, 0, 0, 0, 0, 248, 0, 0, 253], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 108, 111, 103, 95, 255, 101, 114, 114, 111, 255, 114, 95, 118, 255, 101, 114, 98, 111, 115, 255, 105, 116, 255, 121, 0, 0, 0, 0, 0, 250, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 7, version: 247, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1688, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1689, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1690, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1858, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1690, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1858] [region_id=1687]
[2019/05/01 12:39:55.317 -07:00] [INFO] [pd.rs:558] ["try to change peer"] [peer="Peer { id: 1899, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [change_type=AddLearnerNode] [region_id=1220]
[2019/05/01 12:39:55.318 -07:00] [INFO] [peer.rs:1953] ["propose conf change peer"] [change_peer=1899] [change_type=AddLearnerNode] [peer_id=1409] [region_id=1220]
[2019/05/01 12:39:55.388 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 1580, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=12] [term=6] [peer_id=1652] [region_id=1578]
[2019/05/01 12:39:55.401 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 10, version: 227, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=1652] [region_id=1578]
[2019/05/01 12:39:55.401 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 1578, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 118, 255, 101, 114, 115, 255, 105, 111, 110, 0, 0, 253, 0, 0, 253], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 119, 255, 114, 105, 116, 255, 101, 95, 105, 111, 95, 255, 116, 104, 255, 114, 101, 97, 100, 115, 0, 254, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 10, version: 227, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1580, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1581, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1652, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1855, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1580, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1652] [region_id=1578]
[2019/05/01 12:39:55.401 -07:00] [INFO] [pd.rs:558] ["try to change peer"] [peer="Peer { id: 1857, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [change_type=AddNode] [region_id=241]
[2019/05/01 12:39:55.401 -07:00] [INFO] [peer.rs:1953] ["propose conf change peer"] [change_peer=1857] [change_type=AddNode] [peer_id=894] [region_id=241]
[2019/05/01 12:39:55.427 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddLearnerNode, peer: Some(Peer { id: 1899, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=11] [term=7] [peer_id=1409] [region_id=1220]
[2019/05/01 12:39:55.427 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 8, version: 157, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddLearner] [peer_id=1409] [region_id=1220]
[2019/05/01 12:39:55.428 -07:00] [INFO] [apply.rs:1476] ["add learner successfully"] [region="Region { id: 1220, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 102, 255, 116, 95, 101, 255, 110, 97, 98, 108, 101, 255, 95, 115, 255, 116, 111, 112, 119, 111, 114, 255, 100, 255, 0, 0, 0, 0, 0, 0, 0, 248, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 102, 255, 116, 95, 109, 255, 97, 120, 95, 116, 111, 255, 107, 101, 255, 110, 95, 115, 105, 122, 101, 255, 0, 255, 0, 0, 0, 0, 0, 0, 0, 247, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 8, version: 157, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1221, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1223, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1409, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1899, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1409] [region_id=1220]
[2019/05/01 12:39:55.428 -07:00] [INFO] [pd.rs:558] ["try to change peer"] [peer="Peer { id: 1900, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [change_type=AddLearnerNode] [region_id=929]
[2019/05/01 12:39:55.445 -07:00] [INFO] [peer.rs:1953] ["propose conf change peer"] [change_peer=1900] [change_type=AddLearnerNode] [peer_id=1149] [region_id=929]
[2019/05/01 12:39:55.461 -07:00] [INFO] [peer.rs:1318] ["notify pd with change peer region"] [region="Region { id: 1220, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 102, 255, 116, 95, 101, 255, 110, 97, 98, 108, 101, 255, 95, 115, 255, 116, 111, 112, 119, 111, 114, 255, 100, 255, 0, 0, 0, 0, 0, 0, 0, 248, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 102, 255, 116, 95, 109, 255, 97, 120, 95, 116, 111, 255, 107, 101, 255, 110, 95, 115, 105, 122, 101, 255, 0, 255, 0, 0, 0, 0, 0, 0, 0, 247, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 157, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1221, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1223, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1409, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1899, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1409] [region_id=1220]
[2019/05/01 12:39:55.487 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 1857, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=12] [term=7] [peer_id=894] [region_id=241]
[2019/05/01 12:39:55.487 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 9, version: 27, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=894] [region_id=241]
[2019/05/01 12:39:55.487 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 241, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 95, 103, 255, 116, 105, 100, 255, 95, 115, 105, 109, 112, 255, 108, 101, 255, 95, 114, 101, 99, 111, 118, 255, 101, 255, 114, 121, 0, 0, 0, 0, 0, 250, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 95, 109, 255, 97, 120, 95, 255, 102, 108, 117, 115, 104, 255, 95, 113, 255, 117, 101, 117, 101, 95, 116, 255, 105, 255, 109, 101, 0, 0, 0, 0, 0, 250, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 27, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 242, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 244, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 894, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1857, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1857, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=894] [region_id=241]
[2019/05/01 12:39:55.528 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddLearnerNode, peer: Some(Peer { id: 1900, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=12] [term=8] [peer_id=1149] [region_id=929]
[2019/05/01 12:39:55.528 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 8, version: 107, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddLearner] [peer_id=1149] [region_id=929]
[2019/05/01 12:39:55.528 -07:00] [INFO] [apply.rs:1476] ["add learner successfully"] [region="Region { id: 929, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 97, 255, 112, 105, 95, 255, 100, 105, 115, 97, 98, 255, 108, 101, 255, 95, 114, 111, 119, 108, 111, 255, 99, 255, 107, 0, 0, 0, 0, 0, 0, 249, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 97, 255, 112, 105, 95, 255, 101, 110, 97, 98, 108, 255, 101, 95, 255, 98, 105, 110, 108, 111, 103, 255, 0, 255, 0, 0, 0, 0, 0, 0, 0, 247, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 8, version: 107, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 930, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 932, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1149, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1900, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1149] [region_id=929]
[2019/05/01 12:39:55.529 -07:00] [INFO] [peer.rs:1318] ["notify pd with change peer region"] [region="Region { id: 241, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 95, 103, 255, 116, 105, 100, 255, 95, 115, 105, 109, 112, 255, 108, 101, 255, 95, 114, 101, 99, 111, 118, 255, 101, 255, 114, 121, 0, 0, 0, 0, 0, 250, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 95, 109, 255, 97, 120, 95, 255, 102, 108, 117, 115, 104, 255, 95, 113, 255, 117, 101, 117, 101, 95, 116, 255, 105, 255, 109, 101, 0, 0, 0, 0, 0, 250, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 10, version: 27, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 242, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 244, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 894, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1857, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=894] [region_id=241]
[2019/05/01 12:39:55.548 -07:00] [INFO] [peer.rs:1318] ["notify pd with change peer region"] [region="Region { id: 929, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 97, 255, 112, 105, 95, 255, 100, 105, 115, 97, 98, 255, 108, 101, 255, 95, 114, 111, 119, 108, 111, 255, 99, 255, 107, 0, 0, 0, 0, 0, 0, 249, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 97, 255, 112, 105, 95, 255, 101, 110, 97, 98, 108, 255, 101, 95, 255, 98, 105, 110, 108, 111, 103, 255, 0, 255, 0, 0, 0, 0, 0, 0, 0, 247, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 107, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 930, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 932, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1149, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1900, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1149] [region_id=929]
[2019/05/01 12:39:55.549 -07:00] [INFO] [pd.rs:558] ["try to change peer"] [peer="Peer { id: 244, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [change_type=RemoveNode] [region_id=241]
[2019/05/01 12:39:55.549 -07:00] [INFO] [peer.rs:1953] ["propose conf change peer"] [change_peer=244] [change_type=RemoveNode] [peer_id=894] [region_id=241]
[2019/05/01 12:39:55.589 -07:00] [INFO] [pd.rs:558] ["try to change peer"] [peer="Peer { id: 244, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [change_type=RemoveNode] [region_id=241]
[2019/05/01 12:39:55.607 -07:00] [INFO] [peer.rs:1927] ["there is a pending conf change, try later"] [peer_id=894] [region_id=241]
[2019/05/01 12:39:55.607 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 244, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=13] [term=7] [peer_id=894] [region_id=241]
[2019/05/01 12:39:55.607 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 10, version: 27, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=894] [region_id=241]
[2019/05/01 12:39:55.607 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 241, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 95, 103, 255, 116, 105, 100, 255, 95, 115, 105, 109, 112, 255, 108, 101, 255, 95, 114, 101, 99, 111, 118, 255, 101, 255, 114, 121, 0, 0, 0, 0, 0, 250, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 95, 109, 255, 97, 120, 95, 255, 102, 108, 117, 115, 104, 255, 95, 113, 255, 117, 101, 117, 101, 95, 116, 255, 105, 255, 109, 101, 0, 0, 0, 0, 0, 250, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 10, version: 27, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 242, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 244, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 894, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1857, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 244, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=894] [region_id=241]
[2019/05/01 12:39:55.619 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 1856, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=8] [term=6] [peer_id=1856] [region_id=610]
[2019/05/01 12:39:55.619 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 6, version: 77, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=1856] [region_id=610]
[2019/05/01 12:39:55.619 -07:00] [INFO] [peer.rs:1318] ["notify pd with change peer region"] [region="Region { id: 241, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 95, 103, 255, 116, 105, 100, 255, 95, 115, 105, 109, 112, 255, 108, 101, 255, 95, 114, 101, 99, 111, 118, 255, 101, 255, 114, 121, 0, 0, 0, 0, 0, 250, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 95, 109, 255, 97, 120, 95, 255, 102, 108, 117, 115, 104, 255, 95, 113, 255, 117, 101, 117, 101, 95, 116, 255, 105, 255, 109, 101, 0, 0, 0, 0, 0, 250, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 11, version: 27, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 242, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 894, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1857, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=894] [region_id=241]
[2019/05/01 12:39:55.619 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 610, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 102, 116, 95, 109, 255, 105, 110, 95, 119, 255, 111, 114, 100, 255, 95, 108, 101, 110, 0, 254, 0, 0, 253], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 102, 116, 95, 113, 255, 117, 101, 114, 121, 255, 95, 101, 120, 255, 112, 97, 110, 115, 105, 255, 111, 110, 255, 95, 108, 105, 109, 105, 116, 255, 0, 255, 0, 0, 0, 0, 0, 0, 0, 247, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 77, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 611, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 612, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 613, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1856, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1856, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1856] [region_id=610]
[2019/05/01 12:39:55.776 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 613, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=9] [term=6] [peer_id=1856] [region_id=610]
[2019/05/01 12:39:55.776 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 7, version: 77, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=1856] [region_id=610]
[2019/05/01 12:39:55.776 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 610, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 102, 116, 95, 109, 255, 105, 110, 95, 119, 255, 111, 114, 100, 255, 95, 108, 101, 110, 0, 254, 0, 0, 253], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 102, 116, 95, 113, 255, 117, 101, 114, 121, 255, 95, 101, 120, 255, 112, 97, 110, 115, 105, 255, 111, 110, 255, 95, 108, 105, 109, 105, 116, 255, 0, 255, 0, 0, 0, 0, 0, 0, 0, 247, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 7, version: 77, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 611, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 612, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 613, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1856, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 613, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1856] [region_id=610]
[2019/05/01 12:39:55.946 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=1901] [region_id=1859]
[2019/05/01 12:39:55.947 -07:00] [INFO] [unknown:719] ["[region 1859] 1901 became follower at term 0"]
[2019/05/01 12:39:55.947 -07:00] [INFO] [unknown:295] ["[region 1859] 1901 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:39:55.947 -07:00] [INFO] [unknown:719] ["[region 1859] 1901 became follower at term 1"]
[2019/05/01 12:39:55.947 -07:00] [INFO] [unknown:920] ["[region 1859] 1901 [term: 1] received a MsgHeartbeat message with higher term from 1861 [term: 6]"]
[2019/05/01 12:39:55.947 -07:00] [INFO] [unknown:719] ["[region 1859] 1901 became follower at term 6"]
[2019/05/01 12:39:56.940 -07:00] [INFO] [peer_storage.rs:759] ["requesting snapshot"] [peer_id=1149] [region_id=929]
[2019/05/01 12:39:56.941 -07:00] [INFO] [snap.rs:757] ["scan snapshot of one cf"] [size=0] [key_count=0] [cf=default] [snapshot=/opt/tidb/data/kv/snap/gen_929_8_12_(default|lock|write).sst] [region_id=929]
[2019/05/01 12:39:56.941 -07:00] [INFO] [snap.rs:757] ["scan snapshot of one cf"] [size=0] [key_count=0] [cf=lock] [snapshot=/opt/tidb/data/kv/snap/gen_929_8_12_(default|lock|write).sst] [region_id=929]
[2019/05/01 12:39:56.941 -07:00] [INFO] [snap.rs:757] ["scan snapshot of one cf"] [size=192] [key_count=2] [cf=write] [snapshot=/opt/tidb/data/kv/snap/gen_929_8_12_(default|lock|write).sst] [region_id=929]
[2019/05/01 12:39:56.966 -07:00] [INFO] [snap.rs:875] ["scan snapshot"] [takes=25.084614ms] [size=1487] [key_count=2] [snapshot=/opt/tidb/data/kv/snap/gen_929_8_12_(default|lock|write).sst] [region_id=929]
[2019/05/01 12:39:57.255 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=1902] [region_id=1347]
[2019/05/01 12:39:57.256 -07:00] [INFO] [unknown:719] ["[region 1347] 1902 became follower at term 0"]
[2019/05/01 12:39:57.256 -07:00] [INFO] [unknown:295] ["[region 1347] 1902 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:39:57.256 -07:00] [INFO] [unknown:719] ["[region 1347] 1902 became follower at term 1"]
[2019/05/01 12:39:57.256 -07:00] [INFO] [unknown:920] ["[region 1347] 1902 [term: 1] received a MsgHeartbeat message with higher term from 1411 [term: 7]"]
[2019/05/01 12:39:57.256 -07:00] [INFO] [unknown:719] ["[region 1347] 1902 became follower at term 7"]
[2019/05/01 12:39:57.320 -07:00] [INFO] [peer_storage.rs:759] ["requesting snapshot"] [peer_id=1409] [region_id=1220]
[2019/05/01 12:39:57.321 -07:00] [INFO] [snap.rs:757] ["scan snapshot of one cf"] [size=0] [key_count=0] [cf=default] [snapshot=/opt/tidb/data/kv/snap/gen_1220_7_11_(default|lock|write).sst] [region_id=1220]
[2019/05/01 12:39:57.321 -07:00] [INFO] [snap.rs:757] ["scan snapshot of one cf"] [size=0] [key_count=0] [cf=lock] [snapshot=/opt/tidb/data/kv/snap/gen_1220_7_11_(default|lock|write).sst] [region_id=1220]
[2019/05/01 12:39:57.321 -07:00] [INFO] [snap.rs:757] ["scan snapshot of one cf"] [size=192] [key_count=2] [cf=write] [snapshot=/opt/tidb/data/kv/snap/gen_1220_7_11_(default|lock|write).sst] [region_id=1220]
[2019/05/01 12:39:57.334 -07:00] [INFO] [snap.rs:875] ["scan snapshot"] [takes=12.984752ms] [size=1467] [key_count=2] [snapshot=/opt/tidb/data/kv/snap/gen_1220_7_11_(default|lock|write).sst] [region_id=1220]
[2019/05/01 12:39:57.950 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_1859_6_7_(default|lock|write).sst] [snap_key=1859_6_7]
[2019/05/01 12:39:57.967 -07:00] [INFO] [unknown:1792] ["[region 1859] 1901 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 7, term: 6]"]
[2019/05/01 12:39:57.967 -07:00] [INFO] [unknown:1816] ["[region 1859] 1901 restored progress of 1860 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:39:57.967 -07:00] [INFO] [unknown:1816] ["[region 1859] 1901 restored progress of 1861 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:39:57.967 -07:00] [INFO] [unknown:1816] ["[region 1859] 1901 restored progress of 1862 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:39:57.967 -07:00] [INFO] [unknown:1816] ["[region 1859] 1901 restored progress of 1901 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:39:57.967 -07:00] [INFO] [unknown:474] ["[region 1859] 1901 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 7, term: 6]"]
[2019/05/01 12:39:57.967 -07:00] [INFO] [unknown:1736] ["[region 1859] 1901 [commit: 7] restored snapshot [index: 7, term: 6]"]
[2019/05/01 12:39:57.967 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=1901] [region_id=1859]
[2019/05/01 12:39:57.967 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 7, truncated_state: Some(RaftTruncatedState { index: 7, term: 6, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 1859, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 109, 97, 120, 95, 255, 108, 101, 110, 103, 255, 116, 104, 95, 255, 102, 111, 114, 95, 115, 255, 111, 114, 255, 116, 95, 100, 97, 116, 97, 255, 0, 255, 0, 0, 0, 0, 0, 0, 0, 247, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 109, 97, 120, 95, 255, 112, 111, 105, 110, 255, 116, 115, 95, 255, 105, 110, 95, 103, 101, 255, 111, 109, 255, 101, 116, 114, 121, 0, 0, 253, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 287, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1860, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1861, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1862, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1901, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1901] [region_id=1859]
[2019/05/01 12:39:57.988 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 1859] 1901"]
[2019/05/01 12:39:57.988 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 1859, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 109, 97, 120, 95, 255, 108, 101, 110, 103, 255, 116, 104, 95, 255, 102, 111, 114, 95, 115, 255, 111, 114, 255, 116, 95, 100, 97, 116, 97, 255, 0, 255, 0, 0, 0, 0, 0, 0, 0, 247, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 109, 97, 120, 95, 255, 112, 111, 105, 110, 255, 116, 115, 95, 255, 105, 110, 95, 103, 101, 255, 111, 109, 255, 101, 116, 114, 121, 0, 0, 253, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 287, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1860, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1861, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1862, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1901, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1901] [region_id=1859]
[2019/05/01 12:39:57.988 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=1859]
[2019/05/01 12:39:58.022 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=33.506043ms] [region_id=1859]
[2019/05/01 12:39:58.943 -07:00] [INFO] [unknown:841] ["New connected subchannel at 0x7f041bc74820 for subchannel 0x7f04cf8cc800"]
[2019/05/01 12:39:58.954 -07:00] [INFO] [snap.rs:389] ["sent snapshot"] [duration=11.94378ms] [size=1487] [snap_key=929_8_12] [region_id=929]
[2019/05/01 12:39:58.954 -07:00] [INFO] [peer.rs:538] ["report snapshot status"] [status=Finish] [to="Peer { id: 1900, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1149] [region_id=929]
[2019/05/01 12:39:58.970 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 1901, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=8] [term=6] [peer_id=1901] [region_id=1859]
[2019/05/01 12:39:58.970 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 6, version: 287, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=1901] [region_id=1859]
[2019/05/01 12:39:58.970 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 1859, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 109, 97, 120, 95, 255, 108, 101, 110, 103, 255, 116, 104, 95, 255, 102, 111, 114, 95, 115, 255, 111, 114, 255, 116, 95, 100, 97, 116, 97, 255, 0, 255, 0, 0, 0, 0, 0, 0, 0, 247, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 109, 97, 120, 95, 255, 112, 111, 105, 110, 255, 116, 115, 95, 255, 105, 110, 95, 103, 101, 255, 111, 109, 255, 101, 116, 114, 121, 0, 0, 253, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 287, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1860, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1861, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1862, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1901, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1901, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1901] [region_id=1859]
[2019/05/01 12:39:59.039 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 1860, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=9] [term=6] [peer_id=1901] [region_id=1859]
[2019/05/01 12:39:59.039 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 7, version: 287, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=1901] [region_id=1859]
[2019/05/01 12:39:59.039 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 1859, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 109, 97, 120, 95, 255, 108, 101, 110, 103, 255, 116, 104, 95, 255, 102, 111, 114, 95, 115, 255, 111, 114, 255, 116, 95, 100, 97, 116, 97, 255, 0, 255, 0, 0, 0, 0, 0, 0, 0, 247, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 109, 97, 120, 95, 255, 112, 111, 105, 110, 255, 116, 115, 95, 255, 105, 110, 95, 103, 101, 255, 111, 109, 255, 101, 116, 114, 121, 0, 0, 253, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 7, version: 287, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1860, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1861, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1862, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1901, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1860, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1901] [region_id=1859]
[2019/05/01 12:39:59.260 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_1347_7_11_(default|lock|write).sst] [snap_key=1347_7_11]
[2019/05/01 12:39:59.279 -07:00] [INFO] [unknown:1792] ["[region 1347] 1902 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 11, term: 7]"]
[2019/05/01 12:39:59.279 -07:00] [INFO] [unknown:1816] ["[region 1347] 1902 restored progress of 1348 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:39:59.279 -07:00] [INFO] [unknown:1816] ["[region 1347] 1902 restored progress of 1350 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:39:59.279 -07:00] [INFO] [unknown:1816] ["[region 1347] 1902 restored progress of 1411 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:39:59.279 -07:00] [INFO] [unknown:1816] ["[region 1347] 1902 restored progress of 1902 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:39:59.279 -07:00] [INFO] [unknown:474] ["[region 1347] 1902 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 11, term: 7]"]
[2019/05/01 12:39:59.279 -07:00] [INFO] [unknown:1736] ["[region 1347] 1902 [commit: 11] restored snapshot [index: 11, term: 7]"]
[2019/05/01 12:39:59.279 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=1902] [region_id=1347]
[2019/05/01 12:39:59.279 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 11, truncated_state: Some(RaftTruncatedState { index: 11, term: 7, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 1347, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 109, 255, 105, 114, 114, 255, 111, 114, 101, 100, 95, 255, 108, 111, 255, 103, 95, 103, 114, 111, 117, 255, 112, 255, 115, 0, 0, 0, 0, 0, 0, 249, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 109, 255, 111, 110, 105, 255, 116, 111, 114, 95, 100, 255, 105, 115, 255, 97, 98, 108, 101, 0, 0, 253, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 177, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1348, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1350, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1411, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1902, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1902] [region_id=1347]
[2019/05/01 12:39:59.302 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 1347] 1902"]
[2019/05/01 12:39:59.302 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 1347, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 109, 255, 105, 114, 114, 255, 111, 114, 101, 100, 95, 255, 108, 111, 255, 103, 95, 103, 114, 111, 117, 255, 112, 255, 115, 0, 0, 0, 0, 0, 0, 249, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 109, 255, 111, 110, 105, 255, 116, 111, 114, 95, 100, 255, 105, 115, 255, 97, 98, 108, 101, 0, 0, 253, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 177, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1348, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1350, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1411, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1902, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1902] [region_id=1347]
[2019/05/01 12:39:59.302 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=1347]
[2019/05/01 12:39:59.321 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=18.219408ms] [region_id=1347]
[2019/05/01 12:39:59.323 -07:00] [INFO] [unknown:841] ["New connected subchannel at 0x7f04cfc0f570 for subchannel 0x7f04cf8cca00"]
[2019/05/01 12:39:59.329 -07:00] [INFO] [snap.rs:389] ["sent snapshot"] [duration=7.646735ms] [size=1467] [snap_key=1220_7_11] [region_id=1220]
[2019/05/01 12:39:59.330 -07:00] [INFO] [peer.rs:538] ["report snapshot status"] [status=Finish] [to="Peer { id: 1899, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1409] [region_id=1220]
[2019/05/01 12:39:59.943 -07:00] [INFO] [pd.rs:558] ["try to change peer"] [peer="Peer { id: 1900, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [change_type=AddNode] [region_id=929]
[2019/05/01 12:39:59.943 -07:00] [INFO] [peer.rs:1953] ["propose conf change peer"] [change_peer=1900] [change_type=AddNode] [peer_id=1149] [region_id=929]
[2019/05/01 12:39:59.989 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 1900, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=13] [term=8] [peer_id=1149] [region_id=929]
[2019/05/01 12:39:59.989 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 9, version: 107, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=1149] [region_id=929]
[2019/05/01 12:39:59.989 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 929, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 97, 255, 112, 105, 95, 255, 100, 105, 115, 97, 98, 255, 108, 101, 255, 95, 114, 111, 119, 108, 111, 255, 99, 255, 107, 0, 0, 0, 0, 0, 0, 249, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 97, 255, 112, 105, 95, 255, 101, 110, 97, 98, 108, 255, 101, 95, 255, 98, 105, 110, 108, 111, 103, 255, 0, 255, 0, 0, 0, 0, 0, 0, 0, 247, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 107, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 930, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 932, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1149, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1900, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1900, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1149] [region_id=929]
[2019/05/01 12:40:00.006 -07:00] [INFO] [peer.rs:1318] ["notify pd with change peer region"] [region="Region { id: 929, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 97, 255, 112, 105, 95, 255, 100, 105, 115, 97, 98, 255, 108, 101, 255, 95, 114, 111, 119, 108, 111, 255, 99, 255, 107, 0, 0, 0, 0, 0, 0, 249, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 97, 255, 112, 105, 95, 255, 101, 110, 97, 98, 108, 255, 101, 95, 255, 98, 105, 110, 108, 111, 103, 255, 0, 255, 0, 0, 0, 0, 0, 0, 0, 247, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 10, version: 107, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 930, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 932, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1149, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1900, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1149] [region_id=929]
[2019/05/01 12:40:00.019 -07:00] [INFO] [pd.rs:558] ["try to change peer"] [peer="Peer { id: 930, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [change_type=RemoveNode] [region_id=929]
[2019/05/01 12:40:00.019 -07:00] [INFO] [pd.rs:558] ["try to change peer"] [peer="Peer { id: 930, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [change_type=RemoveNode] [region_id=929]
[2019/05/01 12:40:00.019 -07:00] [INFO] [peer.rs:1953] ["propose conf change peer"] [change_peer=930] [change_type=RemoveNode] [peer_id=1149] [region_id=929]
[2019/05/01 12:40:00.019 -07:00] [INFO] [peer.rs:1927] ["there is a pending conf change, try later"] [peer_id=1149] [region_id=929]
[2019/05/01 12:40:00.053 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 930, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=14] [term=8] [peer_id=1149] [region_id=929]
[2019/05/01 12:40:00.053 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 10, version: 107, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=1149] [region_id=929]
[2019/05/01 12:40:00.053 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 929, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 97, 255, 112, 105, 95, 255, 100, 105, 115, 97, 98, 255, 108, 101, 255, 95, 114, 111, 119, 108, 111, 255, 99, 255, 107, 0, 0, 0, 0, 0, 0, 249, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 97, 255, 112, 105, 95, 255, 101, 110, 97, 98, 108, 255, 101, 95, 255, 98, 105, 110, 108, 111, 103, 255, 0, 255, 0, 0, 0, 0, 0, 0, 0, 247, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 10, version: 107, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 930, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 932, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1149, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1900, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 930, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1149] [region_id=929]
[2019/05/01 12:40:00.077 -07:00] [INFO] [peer.rs:1318] ["notify pd with change peer region"] [region="Region { id: 929, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 97, 255, 112, 105, 95, 255, 100, 105, 115, 97, 98, 255, 108, 101, 255, 95, 114, 111, 119, 108, 111, 255, 99, 255, 107, 0, 0, 0, 0, 0, 0, 249, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 97, 255, 112, 105, 95, 255, 101, 110, 97, 98, 108, 255, 101, 95, 255, 98, 105, 110, 108, 111, 103, 255, 0, 255, 0, 0, 0, 0, 0, 0, 0, 247, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 11, version: 107, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 932, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1149, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1900, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1149] [region_id=929]
[2019/05/01 12:40:00.098 -07:00] [INFO] [pd.rs:558] ["try to change peer"] [peer="Peer { id: 1904, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [change_type=AddLearnerNode] [region_id=1162]
[2019/05/01 12:40:00.098 -07:00] [INFO] [peer.rs:1953] ["propose conf change peer"] [change_peer=1904] [change_type=AddLearnerNode] [peer_id=1214] [region_id=1162]
[2019/05/01 12:40:00.153 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddLearnerNode, peer: Some(Peer { id: 1904, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=11] [term=7] [peer_id=1214] [region_id=1162]
[2019/05/01 12:40:00.153 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 8, version: 147, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddLearner] [peer_id=1214] [region_id=1162]
[2019/05/01 12:40:00.153 -07:00] [INFO] [apply.rs:1476] ["add learner successfully"] [region="Region { id: 1162, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 102, 255, 108, 117, 115, 255, 104, 95, 108, 111, 103, 255, 95, 97, 255, 116, 95, 116, 114, 120, 95, 255, 99, 255, 111, 109, 109, 105, 116, 0, 0, 253, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 102, 255, 108, 117, 115, 255, 104, 95, 110, 101, 105, 255, 103, 104, 255, 98, 111, 114, 115, 0, 0, 253, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 8, version: 147, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1163, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1165, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1214, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1904, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1214] [region_id=1162]
[2019/05/01 12:40:00.163 -07:00] [INFO] [peer.rs:1318] ["notify pd with change peer region"] [region="Region { id: 1162, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 102, 255, 108, 117, 115, 255, 104, 95, 108, 111, 103, 255, 95, 97, 255, 116, 95, 116, 114, 120, 95, 255, 99, 255, 111, 109, 109, 105, 116, 0, 0, 253, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 102, 255, 108, 117, 115, 255, 104, 95, 110, 101, 105, 255, 103, 104, 255, 98, 111, 114, 115, 0, 0, 253, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 147, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1163, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1165, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1214, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1904, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1214] [region_id=1162]
[2019/05/01 12:40:00.246 -07:00] [INFO] [peer_storage.rs:759] ["requesting snapshot"] [peer_id=1214] [region_id=1162]
[2019/05/01 12:40:00.247 -07:00] [INFO] [snap.rs:757] ["scan snapshot of one cf"] [size=0] [key_count=0] [cf=default] [snapshot=/opt/tidb/data/kv/snap/gen_1162_7_11_(default|lock|write).sst] [region_id=1162]
[2019/05/01 12:40:00.247 -07:00] [INFO] [snap.rs:757] ["scan snapshot of one cf"] [size=0] [key_count=0] [cf=lock] [snapshot=/opt/tidb/data/kv/snap/gen_1162_7_11_(default|lock|write).sst] [region_id=1162]
[2019/05/01 12:40:00.247 -07:00] [INFO] [snap.rs:757] ["scan snapshot of one cf"] [size=192] [key_count=2] [cf=write] [snapshot=/opt/tidb/data/kv/snap/gen_1162_7_11_(default|lock|write).sst] [region_id=1162]
[2019/05/01 12:40:00.266 -07:00] [INFO] [snap.rs:875] ["scan snapshot"] [takes=19.292008ms] [size=1487] [key_count=2] [snapshot=/opt/tidb/data/kv/snap/gen_1162_7_11_(default|lock|write).sst] [region_id=1162]
[2019/05/01 12:40:00.299 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 1902, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=12] [term=7] [peer_id=1902] [region_id=1347]
[2019/05/01 12:40:00.299 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 9, version: 177, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=1902] [region_id=1347]
[2019/05/01 12:40:00.299 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 1347, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 109, 255, 105, 114, 114, 255, 111, 114, 101, 100, 95, 255, 108, 111, 255, 103, 95, 103, 114, 111, 117, 255, 112, 255, 115, 0, 0, 0, 0, 0, 0, 249, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 109, 255, 111, 110, 105, 255, 116, 111, 114, 95, 100, 255, 105, 115, 255, 97, 98, 108, 101, 0, 0, 253, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 177, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1348, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1350, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1411, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1902, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1902, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1902] [region_id=1347]
[2019/05/01 12:40:00.323 -07:00] [INFO] [pd.rs:558] ["try to change peer"] [peer="Peer { id: 1899, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [change_type=AddNode] [region_id=1220]
[2019/05/01 12:40:00.323 -07:00] [INFO] [peer.rs:1953] ["propose conf change peer"] [change_peer=1899] [change_type=AddNode] [peer_id=1409] [region_id=1220]
[2019/05/01 12:40:00.361 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 1899, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=12] [term=7] [peer_id=1409] [region_id=1220]
[2019/05/01 12:40:00.361 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 9, version: 157, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=1409] [region_id=1220]
[2019/05/01 12:40:00.361 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 1220, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 102, 255, 116, 95, 101, 255, 110, 97, 98, 108, 101, 255, 95, 115, 255, 116, 111, 112, 119, 111, 114, 255, 100, 255, 0, 0, 0, 0, 0, 0, 0, 248, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 102, 255, 116, 95, 109, 255, 97, 120, 95, 116, 111, 255, 107, 101, 255, 110, 95, 115, 105, 122, 101, 255, 0, 255, 0, 0, 0, 0, 0, 0, 0, 247, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 157, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1221, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1223, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1409, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1899, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1899, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1409] [region_id=1220]
[2019/05/01 12:40:00.387 -07:00] [INFO] [peer.rs:1318] ["notify pd with change peer region"] [region="Region { id: 1220, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 102, 255, 116, 95, 101, 255, 110, 97, 98, 108, 101, 255, 95, 115, 255, 116, 111, 112, 119, 111, 114, 255, 100, 255, 0, 0, 0, 0, 0, 0, 0, 248, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 102, 255, 116, 95, 109, 255, 97, 120, 95, 116, 111, 255, 107, 101, 255, 110, 95, 115, 105, 122, 101, 255, 0, 255, 0, 0, 0, 0, 0, 0, 0, 247, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 10, version: 157, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1221, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1223, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1409, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1899, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1409] [region_id=1220]
[2019/05/01 12:40:00.394 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=1903] [region_id=1105]
[2019/05/01 12:40:00.394 -07:00] [INFO] [unknown:719] ["[region 1105] 1903 became follower at term 0"]
[2019/05/01 12:40:00.394 -07:00] [INFO] [unknown:295] ["[region 1105] 1903 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:40:00.394 -07:00] [INFO] [unknown:719] ["[region 1105] 1903 became follower at term 1"]
[2019/05/01 12:40:00.394 -07:00] [INFO] [unknown:920] ["[region 1105] 1903 [term: 1] received a MsgHeartbeat message with higher term from 1108 [term: 6]"]
[2019/05/01 12:40:00.394 -07:00] [INFO] [unknown:719] ["[region 1105] 1903 became follower at term 6"]
[2019/05/01 12:40:00.395 -07:00] [INFO] [pd.rs:558] ["try to change peer"] [peer="Peer { id: 1223, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [change_type=RemoveNode] [region_id=1220]
[2019/05/01 12:40:00.395 -07:00] [INFO] [peer.rs:1953] ["propose conf change peer"] [change_peer=1223] [change_type=RemoveNode] [peer_id=1409] [region_id=1220]
[2019/05/01 12:40:00.396 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 1348, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=13] [term=7] [peer_id=1902] [region_id=1347]
[2019/05/01 12:40:00.396 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 10, version: 177, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=1902] [region_id=1347]
[2019/05/01 12:40:00.396 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 1347, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 109, 255, 105, 114, 114, 255, 111, 114, 101, 100, 95, 255, 108, 111, 255, 103, 95, 103, 114, 111, 117, 255, 112, 255, 115, 0, 0, 0, 0, 0, 0, 249, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 109, 255, 111, 110, 105, 255, 116, 111, 114, 95, 100, 255, 105, 115, 255, 97, 98, 108, 101, 0, 0, 253, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 10, version: 177, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1348, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1350, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1411, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1902, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1348, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1902] [region_id=1347]
[2019/05/01 12:40:00.449 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 1223, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=13] [term=7] [peer_id=1409] [region_id=1220]
[2019/05/01 12:40:00.449 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 10, version: 157, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=1409] [region_id=1220]
[2019/05/01 12:40:00.449 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 1220, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 102, 255, 116, 95, 101, 255, 110, 97, 98, 108, 101, 255, 95, 115, 255, 116, 111, 112, 119, 111, 114, 255, 100, 255, 0, 0, 0, 0, 0, 0, 0, 248, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 102, 255, 116, 95, 109, 255, 97, 120, 95, 116, 111, 255, 107, 101, 255, 110, 95, 115, 105, 122, 101, 255, 0, 255, 0, 0, 0, 0, 0, 0, 0, 247, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 10, version: 157, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1221, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1223, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1409, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1899, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1223, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1409] [region_id=1220]
[2019/05/01 12:40:00.449 -07:00] [INFO] [pd.rs:558] ["try to change peer"] [peer="Peer { id: 1223, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [change_type=RemoveNode] [region_id=1220]
[2019/05/01 12:40:00.450 -07:00] [INFO] [peer.rs:1927] ["there is a pending conf change, try later"] [peer_id=1409] [region_id=1220]
[2019/05/01 12:40:00.458 -07:00] [INFO] [peer.rs:1318] ["notify pd with change peer region"] [region="Region { id: 1220, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 102, 255, 116, 95, 101, 255, 110, 97, 98, 108, 101, 255, 95, 115, 255, 116, 111, 112, 119, 111, 114, 255, 100, 255, 0, 0, 0, 0, 0, 0, 0, 248, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 102, 255, 116, 95, 109, 255, 97, 120, 95, 116, 111, 255, 107, 101, 255, 110, 95, 115, 105, 122, 101, 255, 0, 255, 0, 0, 0, 0, 0, 0, 0, 247, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 11, version: 157, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1221, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1409, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1899, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1409] [region_id=1220]
[2019/05/01 12:40:02.049 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=1905] [region_id=1779]
[2019/05/01 12:40:02.049 -07:00] [INFO] [unknown:719] ["[region 1779] 1905 became follower at term 0"]
[2019/05/01 12:40:02.049 -07:00] [INFO] [unknown:295] ["[region 1779] 1905 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:40:02.049 -07:00] [INFO] [unknown:719] ["[region 1779] 1905 became follower at term 1"]
[2019/05/01 12:40:02.049 -07:00] [INFO] [unknown:920] ["[region 1779] 1905 [term: 1] received a MsgHeartbeat message with higher term from 1780 [term: 7]"]
[2019/05/01 12:40:02.049 -07:00] [INFO] [unknown:719] ["[region 1779] 1905 became follower at term 7"]
[2019/05/01 12:40:02.249 -07:00] [INFO] [unknown:841] ["New connected subchannel at 0x7f041c5d85d0 for subchannel 0x7f04cf8ccc00"]
[2019/05/01 12:40:02.274 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=1906] [region_id=1392]
[2019/05/01 12:40:02.274 -07:00] [INFO] [unknown:719] ["[region 1392] 1906 became follower at term 0"]
[2019/05/01 12:40:02.274 -07:00] [INFO] [unknown:295] ["[region 1392] 1906 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:40:02.274 -07:00] [INFO] [unknown:719] ["[region 1392] 1906 became follower at term 1"]
[2019/05/01 12:40:02.274 -07:00] [INFO] [unknown:920] ["[region 1392] 1906 [term: 1] received a MsgHeartbeat message with higher term from 1395 [term: 6]"]
[2019/05/01 12:40:02.274 -07:00] [INFO] [unknown:719] ["[region 1392] 1906 became follower at term 6"]
[2019/05/01 12:40:02.279 -07:00] [INFO] [snap.rs:389] ["sent snapshot"] [duration=31.208218ms] [size=1487] [snap_key=1162_7_11] [region_id=1162]
[2019/05/01 12:40:02.287 -07:00] [INFO] [peer.rs:538] ["report snapshot status"] [status=Finish] [to="Peer { id: 1904, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1214] [region_id=1162]
[2019/05/01 12:40:02.397 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_1105_6_7_(default|lock|write).sst] [snap_key=1105_6_7]
[2019/05/01 12:40:02.416 -07:00] [INFO] [unknown:1792] ["[region 1105] 1903 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 7, term: 6]"]
[2019/05/01 12:40:02.416 -07:00] [INFO] [unknown:1816] ["[region 1105] 1903 restored progress of 1106 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:40:02.416 -07:00] [INFO] [unknown:1816] ["[region 1105] 1903 restored progress of 1107 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:40:02.416 -07:00] [INFO] [unknown:1816] ["[region 1105] 1903 restored progress of 1108 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:40:02.416 -07:00] [INFO] [unknown:1816] ["[region 1105] 1903 restored progress of 1903 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:40:02.416 -07:00] [INFO] [unknown:474] ["[region 1105] 1903 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 7, term: 6]"]
[2019/05/01 12:40:02.416 -07:00] [INFO] [unknown:1736] ["[region 1105] 1903 [commit: 7] restored snapshot [index: 7, term: 6]"]
[2019/05/01 12:40:02.417 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=1903] [region_id=1105]
[2019/05/01 12:40:02.417 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 7, truncated_state: Some(RaftTruncatedState { index: 7, term: 6, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 1105, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 99, 255, 111, 109, 112, 255, 114, 101, 115, 115, 105, 255, 111, 110, 255, 95, 112, 97, 100, 95, 112, 255, 99, 255, 116, 95, 109, 97, 120, 0, 0, 253, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 99, 255, 111, 110, 99, 255, 117, 114, 114, 101, 110, 255, 99, 121, 255, 95, 116, 105, 99, 107, 101, 255, 116, 255, 115, 0, 0, 0, 0, 0, 0, 249, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 137, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1106, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1107, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1108, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1903, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1903] [region_id=1105]
[2019/05/01 12:40:02.470 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 1105] 1903"]
[2019/05/01 12:40:02.470 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 1105, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 99, 255, 111, 109, 112, 255, 114, 101, 115, 115, 105, 255, 111, 110, 255, 95, 112, 97, 100, 95, 112, 255, 99, 255, 116, 95, 109, 97, 120, 0, 0, 253, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 99, 255, 111, 110, 99, 255, 117, 114, 114, 101, 110, 255, 99, 121, 255, 95, 116, 105, 99, 107, 101, 255, 116, 255, 115, 0, 0, 0, 0, 0, 0, 249, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 137, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1106, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1107, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1108, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1903, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1903] [region_id=1105]
[2019/05/01 12:40:02.470 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=1105]
[2019/05/01 12:40:02.516 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=45.470759ms] [region_id=1105]
[2019/05/01 12:40:03.249 -07:00] [INFO] [pd.rs:558] ["try to change peer"] [peer="Peer { id: 1904, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [change_type=AddNode] [region_id=1162]
[2019/05/01 12:40:03.249 -07:00] [INFO] [peer.rs:1953] ["propose conf change peer"] [change_peer=1904] [change_type=AddNode] [peer_id=1214] [region_id=1162]
[2019/05/01 12:40:03.285 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 1904, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=12] [term=7] [peer_id=1214] [region_id=1162]
[2019/05/01 12:40:03.285 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 9, version: 147, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=1214] [region_id=1162]
[2019/05/01 12:40:03.286 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 1162, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 102, 255, 108, 117, 115, 255, 104, 95, 108, 111, 103, 255, 95, 97, 255, 116, 95, 116, 114, 120, 95, 255, 99, 255, 111, 109, 109, 105, 116, 0, 0, 253, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 102, 255, 108, 117, 115, 255, 104, 95, 110, 101, 105, 255, 103, 104, 255, 98, 111, 114, 115, 0, 0, 253, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 147, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1163, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1165, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1214, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1904, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1904, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1214] [region_id=1162]
[2019/05/01 12:40:03.307 -07:00] [INFO] [peer.rs:1318] ["notify pd with change peer region"] [region="Region { id: 1162, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 102, 255, 108, 117, 115, 255, 104, 95, 108, 111, 103, 255, 95, 97, 255, 116, 95, 116, 114, 120, 95, 255, 99, 255, 111, 109, 109, 105, 116, 0, 0, 253, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 102, 255, 108, 117, 115, 255, 104, 95, 110, 101, 105, 255, 103, 104, 255, 98, 111, 114, 115, 0, 0, 253, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 10, version: 147, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1163, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1165, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1214, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1904, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1214] [region_id=1162]
[2019/05/01 12:40:03.333 -07:00] [INFO] [pd.rs:558] ["try to change peer"] [peer="Peer { id: 1165, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [change_type=RemoveNode] [region_id=1162]
[2019/05/01 12:40:03.333 -07:00] [INFO] [pd.rs:558] ["try to change peer"] [peer="Peer { id: 1165, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [change_type=RemoveNode] [region_id=1162]
[2019/05/01 12:40:03.333 -07:00] [INFO] [peer.rs:1953] ["propose conf change peer"] [change_peer=1165] [change_type=RemoveNode] [peer_id=1214] [region_id=1162]
[2019/05/01 12:40:03.352 -07:00] [INFO] [peer.rs:1927] ["there is a pending conf change, try later"] [peer_id=1214] [region_id=1162]
[2019/05/01 12:40:03.396 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 1165, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=13] [term=7] [peer_id=1214] [region_id=1162]
[2019/05/01 12:40:03.401 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 10, version: 147, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=1214] [region_id=1162]
[2019/05/01 12:40:03.401 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 1162, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 102, 255, 108, 117, 115, 255, 104, 95, 108, 111, 103, 255, 95, 97, 255, 116, 95, 116, 114, 120, 95, 255, 99, 255, 111, 109, 109, 105, 116, 0, 0, 253, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 102, 255, 108, 117, 115, 255, 104, 95, 110, 101, 105, 255, 103, 104, 255, 98, 111, 114, 115, 0, 0, 253, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 10, version: 147, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1163, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1165, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1214, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1904, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1165, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1214] [region_id=1162]
[2019/05/01 12:40:03.425 -07:00] [INFO] [peer.rs:1318] ["notify pd with change peer region"] [region="Region { id: 1162, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 102, 255, 108, 117, 115, 255, 104, 95, 108, 111, 103, 255, 95, 97, 255, 116, 95, 116, 114, 120, 95, 255, 99, 255, 111, 109, 109, 105, 116, 0, 0, 253, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 102, 255, 108, 117, 115, 255, 104, 95, 110, 101, 105, 255, 103, 104, 255, 98, 111, 114, 115, 0, 0, 253, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 11, version: 147, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1163, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1214, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1904, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1214] [region_id=1162]
[2019/05/01 12:40:03.470 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 1903, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=8] [term=6] [peer_id=1903] [region_id=1105]
[2019/05/01 12:40:03.470 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 6, version: 137, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=1903] [region_id=1105]
[2019/05/01 12:40:03.470 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 1105, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 99, 255, 111, 109, 112, 255, 114, 101, 115, 115, 105, 255, 111, 110, 255, 95, 112, 97, 100, 95, 112, 255, 99, 255, 116, 95, 109, 97, 120, 0, 0, 253, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 99, 255, 111, 110, 99, 255, 117, 114, 114, 101, 110, 255, 99, 121, 255, 95, 116, 105, 99, 107, 101, 255, 116, 255, 115, 0, 0, 0, 0, 0, 0, 249, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 137, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1106, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1107, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1108, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1903, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1903, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1903] [region_id=1105]
[2019/05/01 12:40:03.587 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 1106, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=9] [term=6] [peer_id=1903] [region_id=1105]
[2019/05/01 12:40:03.592 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 7, version: 137, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=1903] [region_id=1105]
[2019/05/01 12:40:03.592 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 1105, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 99, 255, 111, 109, 112, 255, 114, 101, 115, 115, 105, 255, 111, 110, 255, 95, 112, 97, 100, 95, 112, 255, 99, 255, 116, 95, 109, 97, 120, 0, 0, 253, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 99, 255, 111, 110, 99, 255, 117, 114, 114, 101, 110, 255, 99, 121, 255, 95, 116, 105, 99, 107, 101, 255, 116, 255, 115, 0, 0, 0, 0, 0, 0, 249, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 7, version: 137, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1106, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1107, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1108, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1903, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1106, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1903] [region_id=1105]
[2019/05/01 12:40:04.052 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_1779_7_8_(default|lock|write).sst] [snap_key=1779_7_8]
[2019/05/01 12:40:04.063 -07:00] [INFO] [unknown:1792] ["[region 1779] 1905 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 8, term: 7]"]
[2019/05/01 12:40:04.063 -07:00] [INFO] [unknown:1816] ["[region 1779] 1905 restored progress of 1780 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:40:04.063 -07:00] [INFO] [unknown:1816] ["[region 1779] 1905 restored progress of 1781 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:40:04.063 -07:00] [INFO] [unknown:1816] ["[region 1779] 1905 restored progress of 1782 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:40:04.063 -07:00] [INFO] [unknown:1816] ["[region 1779] 1905 restored progress of 1905 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:40:04.063 -07:00] [INFO] [unknown:474] ["[region 1779] 1905 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 8, term: 7]"]
[2019/05/01 12:40:04.063 -07:00] [INFO] [unknown:1736] ["[region 1779] 1905 [commit: 8] restored snapshot [index: 8, term: 7]"]
[2019/05/01 12:40:04.063 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=1905] [region_id=1779]
[2019/05/01 12:40:04.063 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 8, truncated_state: Some(RaftTruncatedState { index: 8, term: 7, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 1779, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 108, 111, 119, 101, 255, 114, 95, 99, 97, 255, 115, 101, 95, 255, 116, 97, 98, 108, 101, 255, 95, 110, 255, 97, 109, 101, 115, 0, 0, 253, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 109, 97, 115, 116, 255, 101, 114, 95, 105, 255, 110, 102, 111, 255, 95, 114, 101, 112, 111, 255, 115, 105, 255, 116, 111, 114, 121, 0, 0, 253, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 267, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1780, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1781, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1782, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1905, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1905] [region_id=1779]
[2019/05/01 12:40:04.075 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 1779] 1905"]
[2019/05/01 12:40:04.075 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 1779, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 108, 111, 119, 101, 255, 114, 95, 99, 97, 255, 115, 101, 95, 255, 116, 97, 98, 108, 101, 255, 95, 110, 255, 97, 109, 101, 115, 0, 0, 253, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 109, 97, 115, 116, 255, 101, 114, 95, 105, 255, 110, 102, 111, 255, 95, 114, 101, 112, 111, 255, 115, 105, 255, 116, 111, 114, 121, 0, 0, 253, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 267, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1780, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1781, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1782, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1905, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1905] [region_id=1779]
[2019/05/01 12:40:04.075 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=1779]
[2019/05/01 12:40:04.092 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=16.18881ms] [region_id=1779]
[2019/05/01 12:40:04.160 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=1948] [region_id=405]
[2019/05/01 12:40:04.160 -07:00] [INFO] [unknown:719] ["[region 405] 1948 became follower at term 0"]
[2019/05/01 12:40:04.160 -07:00] [INFO] [unknown:295] ["[region 405] 1948 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:40:04.160 -07:00] [INFO] [unknown:719] ["[region 405] 1948 became follower at term 1"]
[2019/05/01 12:40:04.160 -07:00] [INFO] [unknown:920] ["[region 405] 1948 [term: 1] received a MsgHeartbeat message with higher term from 1263 [term: 8]"]
[2019/05/01 12:40:04.160 -07:00] [INFO] [unknown:719] ["[region 405] 1948 became follower at term 8"]
[2019/05/01 12:40:04.275 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=1947] [region_id=1265]
[2019/05/01 12:40:04.275 -07:00] [INFO] [unknown:719] ["[region 1265] 1947 became follower at term 0"]
[2019/05/01 12:40:04.275 -07:00] [INFO] [unknown:295] ["[region 1265] 1947 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:40:04.275 -07:00] [INFO] [unknown:719] ["[region 1265] 1947 became follower at term 1"]
[2019/05/01 12:40:04.275 -07:00] [INFO] [unknown:920] ["[region 1265] 1947 [term: 1] received a MsgHeartbeat message with higher term from 1405 [term: 7]"]
[2019/05/01 12:40:04.275 -07:00] [INFO] [unknown:719] ["[region 1265] 1947 became follower at term 7"]
[2019/05/01 12:40:04.277 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_1392_6_7_(default|lock|write).sst] [snap_key=1392_6_7]
[2019/05/01 12:40:04.286 -07:00] [INFO] [unknown:1792] ["[region 1392] 1906 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 7, term: 6]"]
[2019/05/01 12:40:04.286 -07:00] [INFO] [unknown:1816] ["[region 1392] 1906 restored progress of 1393 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:40:04.286 -07:00] [INFO] [unknown:1816] ["[region 1392] 1906 restored progress of 1394 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:40:04.286 -07:00] [INFO] [unknown:1816] ["[region 1392] 1906 restored progress of 1395 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:40:04.286 -07:00] [INFO] [unknown:1816] ["[region 1392] 1906 restored progress of 1906 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:40:04.286 -07:00] [INFO] [unknown:474] ["[region 1392] 1906 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 7, term: 6]"]
[2019/05/01 12:40:04.286 -07:00] [INFO] [unknown:1736] ["[region 1392] 1906 [commit: 7] restored snapshot [index: 7, term: 6]"]
[2019/05/01 12:40:04.286 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=1906] [region_id=1392]
[2019/05/01 12:40:04.286 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 7, truncated_state: Some(RaftTruncatedState { index: 7, term: 6, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 1392, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 111, 255, 112, 116, 105, 255, 109, 105, 122, 101, 95, 255, 102, 117, 255, 108, 108, 116, 101, 120, 116, 255, 95, 255, 111, 110, 108, 121, 0, 0, 0, 252, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 112, 255, 97, 103, 101, 255, 95, 115, 105, 122, 101, 255, 0, 0, 255, 0, 0, 0, 0, 0, 0, 247, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 187, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1393, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1394, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1395, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1906, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1906] [region_id=1392]
[2019/05/01 12:40:04.310 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 1392, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 111, 255, 112, 116, 105, 255, 109, 105, 122, 101, 95, 255, 102, 117, 255, 108, 108, 116, 101, 120, 116, 255, 95, 255, 111, 110, 108, 121, 0, 0, 0, 252, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 112, 255, 97, 103, 101, 255, 95, 115, 105, 122, 101, 255, 0, 0, 255, 0, 0, 0, 0, 0, 0, 247, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 187, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1393, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1394, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1395, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1906, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1906] [region_id=1392]
[2019/05/01 12:40:04.310 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 1392] 1906"]
[2019/05/01 12:40:04.310 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=1392]
[2019/05/01 12:40:04.338 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=27.793502ms] [region_id=1392]
[2019/05/01 12:40:05.088 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 1905, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=9] [term=7] [peer_id=1905] [region_id=1779]
[2019/05/01 12:40:05.088 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 6, version: 267, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=1905] [region_id=1779]
[2019/05/01 12:40:05.088 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 1779, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 108, 111, 119, 101, 255, 114, 95, 99, 97, 255, 115, 101, 95, 255, 116, 97, 98, 108, 101, 255, 95, 110, 255, 97, 109, 101, 115, 0, 0, 253, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 109, 97, 115, 116, 255, 101, 114, 95, 105, 255, 110, 102, 111, 255, 95, 114, 101, 112, 111, 255, 115, 105, 255, 116, 111, 114, 121, 0, 0, 253, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 267, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1780, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1781, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1782, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1905, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1905, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1905] [region_id=1779]
[2019/05/01 12:40:05.172 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 1781, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=10] [term=7] [peer_id=1905] [region_id=1779]
[2019/05/01 12:40:05.172 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 7, version: 267, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=1905] [region_id=1779]
[2019/05/01 12:40:05.172 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 1779, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 108, 111, 119, 101, 255, 114, 95, 99, 97, 255, 115, 101, 95, 255, 116, 97, 98, 108, 101, 255, 95, 110, 255, 97, 109, 101, 115, 0, 0, 253, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 109, 97, 115, 116, 255, 101, 114, 95, 105, 255, 110, 102, 111, 255, 95, 114, 101, 112, 111, 255, 115, 105, 255, 116, 111, 114, 121, 0, 0, 253, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 7, version: 267, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1780, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1781, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1782, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1905, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1781, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1905] [region_id=1779]
[2019/05/01 12:40:05.322 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 1906, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=8] [term=6] [peer_id=1906] [region_id=1392]
[2019/05/01 12:40:05.330 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 6, version: 187, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=1906] [region_id=1392]
[2019/05/01 12:40:05.330 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 1392, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 111, 255, 112, 116, 105, 255, 109, 105, 122, 101, 95, 255, 102, 117, 255, 108, 108, 116, 101, 120, 116, 255, 95, 255, 111, 110, 108, 121, 0, 0, 0, 252, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 112, 255, 97, 103, 101, 255, 95, 115, 105, 122, 101, 255, 0, 0, 255, 0, 0, 0, 0, 0, 0, 247, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 187, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1393, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1394, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1395, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1906, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1906, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1906] [region_id=1392]
[2019/05/01 12:40:05.380 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 1394, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=9] [term=6] [peer_id=1906] [region_id=1392]
[2019/05/01 12:40:05.380 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 7, version: 187, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=1906] [region_id=1392]
[2019/05/01 12:40:05.380 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 1392, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 111, 255, 112, 116, 105, 255, 109, 105, 122, 101, 95, 255, 102, 117, 255, 108, 108, 116, 101, 120, 116, 255, 95, 255, 111, 110, 108, 121, 0, 0, 0, 252, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 112, 255, 97, 103, 101, 255, 95, 115, 105, 122, 101, 255, 0, 0, 255, 0, 0, 0, 0, 0, 0, 247, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 7, version: 187, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1393, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1394, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1395, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1906, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1394, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1906] [region_id=1392]
[2019/05/01 12:40:05.640 -07:00] [INFO] [unknown:1625] ["[region 1269] 1510 [term 7] received MsgTimeoutNow from 1271 and starts an election to get leadership."]
[2019/05/01 12:40:05.642 -07:00] [INFO] [unknown:739] ["[region 1269] 1510 became candidate at term 8"]
[2019/05/01 12:40:05.642 -07:00] [INFO] [unknown:854] ["[region 1269] 1510 received MsgRequestVoteResponse from 1510 at term 8"]
[2019/05/01 12:40:05.642 -07:00] [INFO] [unknown:828] ["[region 1269] 1510 [logterm: 7, index: 10] sent MsgRequestVote request to 1271 at term 8"]
[2019/05/01 12:40:05.642 -07:00] [INFO] [unknown:828] ["[region 1269] 1510 [logterm: 7, index: 10] sent MsgRequestVote request to 1270 at term 8"]
[2019/05/01 12:40:05.662 -07:00] [INFO] [unknown:854] ["[region 1269] 1510 received MsgRequestVoteResponse from 1271 at term 8"]
[2019/05/01 12:40:05.662 -07:00] [INFO] [unknown:1550] ["[region 1269] 1510 [quorum:2] has received 2 MsgRequestVoteResponse votes and 0 vote rejections"]
[2019/05/01 12:40:05.662 -07:00] [INFO] [unknown:789] ["[region 1269] 1510 became leader at term 8"]
[2019/05/01 12:40:05.710 -07:00] [INFO] [unknown:920] ["[region 1691] 1849 [term: 6] received a MsgRequestVote message with higher term from 1694 [term: 7]"]
[2019/05/01 12:40:05.710 -07:00] [INFO] [unknown:719] ["[region 1691] 1849 became follower at term 7"]
[2019/05/01 12:40:05.710 -07:00] [INFO] [unknown:1083] ["[region 1691] 1849 [logterm: 6, index: 9, vote: 0] cast MsgRequestVote for 1694 [logterm: 6, index: 9] at term 7"]
[2019/05/01 12:40:05.983 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=1949] [region_id=1015]
[2019/05/01 12:40:05.983 -07:00] [INFO] [unknown:719] ["[region 1015] 1949 became follower at term 0"]
[2019/05/01 12:40:05.983 -07:00] [INFO] [unknown:295] ["[region 1015] 1949 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:40:05.983 -07:00] [INFO] [unknown:719] ["[region 1015] 1949 became follower at term 1"]
[2019/05/01 12:40:05.983 -07:00] [INFO] [unknown:920] ["[region 1015] 1949 [term: 1] received a MsgHeartbeat message with higher term from 1016 [term: 6]"]
[2019/05/01 12:40:05.983 -07:00] [INFO] [unknown:719] ["[region 1015] 1949 became follower at term 6"]
[2019/05/01 12:40:06.163 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_405_8_12_(default|lock|write).sst] [snap_key=405_8_12]
[2019/05/01 12:40:06.175 -07:00] [INFO] [unknown:1792] ["[region 405] 1948 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 12, term: 8]"]
[2019/05/01 12:40:06.175 -07:00] [INFO] [unknown:1816] ["[region 405] 1948 restored progress of 406 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:40:06.175 -07:00] [INFO] [unknown:1816] ["[region 405] 1948 restored progress of 407 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:40:06.175 -07:00] [INFO] [unknown:1816] ["[region 405] 1948 restored progress of 1263 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:40:06.175 -07:00] [INFO] [unknown:1816] ["[region 405] 1948 restored progress of 1948 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:40:06.175 -07:00] [INFO] [unknown:474] ["[region 405] 1948 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 12, term: 8]"]
[2019/05/01 12:40:06.175 -07:00] [INFO] [unknown:1736] ["[region 405] 1948 [commit: 12] restored snapshot [index: 12, term: 8]"]
[2019/05/01 12:40:06.175 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=1948] [region_id=405]
[2019/05/01 12:40:06.175 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 12, truncated_state: Some(RaftTruncatedState { index: 12, term: 8, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 405, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 99, 104, 97, 114, 255, 97, 99, 116, 101, 255, 114, 95, 115, 255, 101, 116, 115, 95, 100, 255, 105, 114, 255, 0, 0, 0, 0, 0, 0, 249, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 99, 104, 101, 99, 255, 107, 95, 112, 114, 255, 111, 120, 121, 255, 95, 117, 115, 101, 114, 255, 115, 0, 255, 0, 0, 0, 0, 0, 0, 248, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 47, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 406, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 407, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1263, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1948, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1948] [region_id=405]
[2019/05/01 12:40:06.192 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 405] 1948"]
[2019/05/01 12:40:06.192 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 405, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 99, 104, 97, 114, 255, 97, 99, 116, 101, 255, 114, 95, 115, 255, 101, 116, 115, 95, 100, 255, 105, 114, 255, 0, 0, 0, 0, 0, 0, 249, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 99, 104, 101, 99, 255, 107, 95, 112, 114, 255, 111, 120, 121, 255, 95, 117, 115, 101, 114, 255, 115, 0, 255, 0, 0, 0, 0, 0, 0, 248, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 47, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 406, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 407, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1263, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1948, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1948] [region_id=405]
[2019/05/01 12:40:06.192 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=405]
[2019/05/01 12:40:06.228 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=36.57776ms] [region_id=405]
[2019/05/01 12:40:06.278 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_1265_7_11_(default|lock|write).sst] [snap_key=1265_7_11]
[2019/05/01 12:40:06.286 -07:00] [INFO] [unknown:1792] ["[region 1265] 1947 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 11, term: 7]"]
[2019/05/01 12:40:06.286 -07:00] [INFO] [unknown:1816] ["[region 1265] 1947 restored progress of 1267 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:40:06.286 -07:00] [INFO] [unknown:1816] ["[region 1265] 1947 restored progress of 1268 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:40:06.286 -07:00] [INFO] [unknown:1816] ["[region 1265] 1947 restored progress of 1405 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:40:06.286 -07:00] [INFO] [unknown:1816] ["[region 1265] 1947 restored progress of 1947 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:40:06.286 -07:00] [INFO] [unknown:474] ["[region 1265] 1947 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 11, term: 7]"]
[2019/05/01 12:40:06.286 -07:00] [INFO] [unknown:1736] ["[region 1265] 1947 [commit: 11] restored snapshot [index: 11, term: 7]"]
[2019/05/01 12:40:06.286 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=1947] [region_id=1265]
[2019/05/01 12:40:06.286 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 11, truncated_state: Some(RaftTruncatedState { index: 11, term: 7, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 1265, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 105, 255, 111, 95, 99, 255, 97, 112, 97, 99, 105, 255, 116, 121, 255, 0, 0, 0, 0, 0, 0, 249, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 105, 255, 111, 95, 99, 255, 97, 112, 97, 99, 105, 255, 116, 121, 255, 95, 109, 97, 120, 0, 0, 253, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 167, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1267, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1268, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1405, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1947, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1947] [region_id=1265]
[2019/05/01 12:40:06.316 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 1265] 1947"]
[2019/05/01 12:40:06.316 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 1265, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 105, 255, 111, 95, 99, 255, 97, 112, 97, 99, 105, 255, 116, 121, 255, 0, 0, 0, 0, 0, 0, 249, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 105, 255, 111, 95, 99, 255, 97, 112, 97, 99, 105, 255, 116, 121, 255, 95, 109, 97, 120, 0, 0, 253, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 167, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1267, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1268, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1405, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1947, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1947] [region_id=1265]
[2019/05/01 12:40:06.316 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=1265]
[2019/05/01 12:40:06.332 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=16.246546ms] [region_id=1265]
[2019/05/01 12:40:07.187 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 1948, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=13] [term=8] [peer_id=1948] [region_id=405]
[2019/05/01 12:40:07.187 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 9, version: 47, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=1948] [region_id=405]
[2019/05/01 12:40:07.187 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 405, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 99, 104, 97, 114, 255, 97, 99, 116, 101, 255, 114, 95, 115, 255, 101, 116, 115, 95, 100, 255, 105, 114, 255, 0, 0, 0, 0, 0, 0, 249, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 99, 104, 101, 99, 255, 107, 95, 112, 114, 255, 111, 120, 121, 255, 95, 117, 115, 101, 114, 255, 115, 0, 255, 0, 0, 0, 0, 0, 0, 248, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 47, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 406, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 407, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1263, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1948, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1948, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1948] [region_id=405]
[2019/05/01 12:40:07.261 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 407, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=14] [term=8] [peer_id=1948] [region_id=405]
[2019/05/01 12:40:07.262 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 10, version: 47, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=1948] [region_id=405]
[2019/05/01 12:40:07.262 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 405, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 99, 104, 97, 114, 255, 97, 99, 116, 101, 255, 114, 95, 115, 255, 101, 116, 115, 95, 100, 255, 105, 114, 255, 0, 0, 0, 0, 0, 0, 249, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 99, 104, 101, 99, 255, 107, 95, 112, 114, 255, 111, 120, 121, 255, 95, 117, 115, 101, 114, 255, 115, 0, 255, 0, 0, 0, 0, 0, 0, 248, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 10, version: 47, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 406, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 407, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1263, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1948, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 407, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1948] [region_id=405]
[2019/05/01 12:40:07.317 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 1947, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=12] [term=7] [peer_id=1947] [region_id=1265]
[2019/05/01 12:40:07.317 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 9, version: 167, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=1947] [region_id=1265]
[2019/05/01 12:40:07.317 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 1265, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 105, 255, 111, 95, 99, 255, 97, 112, 97, 99, 105, 255, 116, 121, 255, 0, 0, 0, 0, 0, 0, 249, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 105, 255, 111, 95, 99, 255, 97, 112, 97, 99, 105, 255, 116, 121, 255, 95, 109, 97, 120, 0, 0, 253, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 167, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1267, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1268, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1405, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1947, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1947, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1947] [region_id=1265]
[2019/05/01 12:40:07.399 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 1267, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=13] [term=7] [peer_id=1947] [region_id=1265]
[2019/05/01 12:40:07.399 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 10, version: 167, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=1947] [region_id=1265]
[2019/05/01 12:40:07.399 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 1265, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 105, 255, 111, 95, 99, 255, 97, 112, 97, 99, 105, 255, 116, 121, 255, 0, 0, 0, 0, 0, 0, 249, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 105, 255, 111, 95, 99, 255, 97, 112, 97, 99, 105, 255, 116, 121, 255, 95, 109, 97, 120, 0, 0, 253, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 10, version: 167, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1267, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1268, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1405, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1947, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1267, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1947] [region_id=1265]
[2019/05/01 12:40:07.465 -07:00] [INFO] [pd.rs:558] ["try to change peer"] [peer="Peer { id: 1952, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [change_type=AddLearnerNode] [region_id=1396]
[2019/05/01 12:40:07.465 -07:00] [INFO] [peer.rs:1953] ["propose conf change peer"] [change_peer=1952] [change_type=AddLearnerNode] [peer_id=1602] [region_id=1396]
[2019/05/01 12:40:07.487 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddLearnerNode, peer: Some(Peer { id: 1952, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=11] [term=7] [peer_id=1602] [region_id=1396]
[2019/05/01 12:40:07.487 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 8, version: 187, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddLearner] [peer_id=1602] [region_id=1396]
[2019/05/01 12:40:07.487 -07:00] [INFO] [apply.rs:1476] ["add learner successfully"] [region="Region { id: 1396, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 112, 255, 97, 103, 101, 255, 95, 115, 105, 122, 101, 255, 0, 0, 255, 0, 0, 0, 0, 0, 0, 247, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 112, 255, 114, 105, 110, 255, 116, 95, 97, 108, 108, 255, 95, 100, 255, 101, 97, 100, 108, 111, 99, 255, 107, 255, 115, 0, 0, 0, 0, 0, 0, 249, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 8, version: 187, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1397, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1399, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1602, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1952, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1602] [region_id=1396]
[2019/05/01 12:40:07.498 -07:00] [INFO] [peer.rs:1318] ["notify pd with change peer region"] [region="Region { id: 1396, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 112, 255, 97, 103, 101, 255, 95, 115, 105, 122, 101, 255, 0, 0, 255, 0, 0, 0, 0, 0, 0, 247, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 112, 255, 114, 105, 110, 255, 116, 95, 97, 108, 108, 255, 95, 100, 255, 101, 97, 100, 108, 111, 99, 255, 107, 255, 115, 0, 0, 0, 0, 0, 0, 249, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 187, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1397, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1399, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1602, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1952, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1602] [region_id=1396]
[2019/05/01 12:40:07.986 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_1015_6_10_(default|lock|write).sst] [snap_key=1015_6_10]
[2019/05/01 12:40:07.998 -07:00] [INFO] [unknown:1792] ["[region 1015] 1949 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 10, term: 6]"]
[2019/05/01 12:40:07.998 -07:00] [INFO] [unknown:1816] ["[region 1015] 1949 restored progress of 1016 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:40:07.998 -07:00] [INFO] [unknown:1816] ["[region 1015] 1949 restored progress of 1017 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:40:07.998 -07:00] [INFO] [unknown:1816] ["[region 1015] 1949 restored progress of 1098 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:40:07.998 -07:00] [INFO] [unknown:1816] ["[region 1015] 1949 restored progress of 1949 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:40:07.998 -07:00] [INFO] [unknown:474] ["[region 1015] 1949 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 10, term: 6]"]
[2019/05/01 12:40:07.998 -07:00] [INFO] [unknown:1736] ["[region 1015] 1949 [commit: 10] restored snapshot [index: 10, term: 6]"]
[2019/05/01 12:40:07.998 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=1949] [region_id=1015]
[2019/05/01 12:40:07.998 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 10, truncated_state: Some(RaftTruncatedState { index: 10, term: 6, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 1015, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 97, 255, 117, 116, 111, 255, 101, 120, 116, 101, 110, 255, 100, 95, 255, 105, 110, 99, 114, 101, 109, 255, 101, 255, 110, 116, 0, 0, 0, 0, 0, 250, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 97, 255, 117, 116, 111, 255, 105, 110, 99, 95, 108, 255, 111, 99, 255, 107, 95, 109, 111, 100, 101, 255, 0, 255, 0, 0, 0, 0, 0, 0, 0, 247, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 117, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1016, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1017, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1098, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1949, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1949] [region_id=1015]
[2019/05/01 12:40:08.014 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 1015] 1949"]
[2019/05/01 12:40:08.014 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 1015, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 97, 255, 117, 116, 111, 255, 101, 120, 116, 101, 110, 255, 100, 95, 255, 105, 110, 99, 114, 101, 109, 255, 101, 255, 110, 116, 0, 0, 0, 0, 0, 250, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 97, 255, 117, 116, 111, 255, 105, 110, 99, 95, 108, 255, 111, 99, 255, 107, 95, 109, 111, 100, 101, 255, 0, 255, 0, 0, 0, 0, 0, 0, 0, 247, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 117, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1016, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1017, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1098, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1949, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1949] [region_id=1015]
[2019/05/01 12:40:08.014 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=1015]
[2019/05/01 12:40:08.038 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=24.306733ms] [region_id=1015]
[2019/05/01 12:40:08.254 -07:00] [INFO] [peer_storage.rs:759] ["requesting snapshot"] [peer_id=1602] [region_id=1396]
[2019/05/01 12:40:08.255 -07:00] [INFO] [snap.rs:757] ["scan snapshot of one cf"] [size=0] [key_count=0] [cf=default] [snapshot=/opt/tidb/data/kv/snap/gen_1396_7_11_(default|lock|write).sst] [region_id=1396]
[2019/05/01 12:40:08.255 -07:00] [INFO] [snap.rs:757] ["scan snapshot of one cf"] [size=0] [key_count=0] [cf=lock] [snapshot=/opt/tidb/data/kv/snap/gen_1396_7_11_(default|lock|write).sst] [region_id=1396]
[2019/05/01 12:40:08.255 -07:00] [INFO] [snap.rs:757] ["scan snapshot of one cf"] [size=156] [key_count=2] [cf=write] [snapshot=/opt/tidb/data/kv/snap/gen_1396_7_11_(default|lock|write).sst] [region_id=1396]
[2019/05/01 12:40:08.261 -07:00] [INFO] [snap.rs:875] ["scan snapshot"] [takes=5.97065ms] [size=1414] [key_count=2] [snapshot=/opt/tidb/data/kv/snap/gen_1396_7_11_(default|lock|write).sst] [region_id=1396]
[2019/05/01 12:40:09.029 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 1949, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=11] [term=6] [peer_id=1949] [region_id=1015]
[2019/05/01 12:40:09.029 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 9, version: 117, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=1949] [region_id=1015]
[2019/05/01 12:40:09.029 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 1015, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 97, 255, 117, 116, 111, 255, 101, 120, 116, 101, 110, 255, 100, 95, 255, 105, 110, 99, 114, 101, 109, 255, 101, 255, 110, 116, 0, 0, 0, 0, 0, 250, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 97, 255, 117, 116, 111, 255, 105, 110, 99, 95, 108, 255, 111, 99, 255, 107, 95, 109, 111, 100, 101, 255, 0, 255, 0, 0, 0, 0, 0, 0, 0, 247, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 117, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1016, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1017, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1098, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1949, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1949, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1949] [region_id=1015]
[2019/05/01 12:40:09.150 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 1017, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=12] [term=6] [peer_id=1949] [region_id=1015]
[2019/05/01 12:40:09.151 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 10, version: 117, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=1949] [region_id=1015]
[2019/05/01 12:40:09.151 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 1015, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 97, 255, 117, 116, 111, 255, 101, 120, 116, 101, 110, 255, 100, 95, 255, 105, 110, 99, 114, 101, 109, 255, 101, 255, 110, 116, 0, 0, 0, 0, 0, 250, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 97, 255, 117, 116, 111, 255, 105, 110, 99, 95, 108, 255, 111, 99, 255, 107, 95, 109, 111, 100, 101, 255, 0, 255, 0, 0, 0, 0, 0, 0, 0, 247, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 10, version: 117, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1016, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1017, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1098, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1949, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1017, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1949] [region_id=1015]
[2019/05/01 12:40:10.059 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=1954] [region_id=1655]
[2019/05/01 12:40:10.059 -07:00] [INFO] [unknown:719] ["[region 1655] 1954 became follower at term 0"]
[2019/05/01 12:40:10.059 -07:00] [INFO] [unknown:295] ["[region 1655] 1954 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:40:10.059 -07:00] [INFO] [unknown:719] ["[region 1655] 1954 became follower at term 1"]
[2019/05/01 12:40:10.059 -07:00] [INFO] [unknown:920] ["[region 1655] 1954 [term: 1] received a MsgHeartbeat message with higher term from 1657 [term: 6]"]
[2019/05/01 12:40:10.059 -07:00] [INFO] [unknown:719] ["[region 1655] 1954 became follower at term 6"]
[2019/05/01 12:40:10.257 -07:00] [INFO] [unknown:841] ["New connected subchannel at 0x7f0412601ab0 for subchannel 0x7f04cf8cce00"]
[2019/05/01 12:40:10.275 -07:00] [INFO] [snap.rs:389] ["sent snapshot"] [duration=18.645235ms] [size=1414] [snap_key=1396_7_11] [region_id=1396]
[2019/05/01 12:40:10.275 -07:00] [INFO] [peer.rs:538] ["report snapshot status"] [status=Finish] [to="Peer { id: 1952, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1602] [region_id=1396]
[2019/05/01 12:40:11.257 -07:00] [INFO] [pd.rs:558] ["try to change peer"] [peer="Peer { id: 1952, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [change_type=AddNode] [region_id=1396]
[2019/05/01 12:40:11.257 -07:00] [INFO] [peer.rs:1953] ["propose conf change peer"] [change_peer=1952] [change_type=AddNode] [peer_id=1602] [region_id=1396]
[2019/05/01 12:40:11.335 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 1952, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=12] [term=7] [peer_id=1602] [region_id=1396]
[2019/05/01 12:40:11.335 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 9, version: 187, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=1602] [region_id=1396]
[2019/05/01 12:40:11.335 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 1396, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 112, 255, 97, 103, 101, 255, 95, 115, 105, 122, 101, 255, 0, 0, 255, 0, 0, 0, 0, 0, 0, 247, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 112, 255, 114, 105, 110, 255, 116, 95, 97, 108, 108, 255, 95, 100, 255, 101, 97, 100, 108, 111, 99, 255, 107, 255, 115, 0, 0, 0, 0, 0, 0, 249, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 187, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1397, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1399, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1602, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1952, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1952, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1602] [region_id=1396]
[2019/05/01 12:40:11.358 -07:00] [INFO] [peer.rs:1318] ["notify pd with change peer region"] [region="Region { id: 1396, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 112, 255, 97, 103, 101, 255, 95, 115, 105, 122, 101, 255, 0, 0, 255, 0, 0, 0, 0, 0, 0, 247, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 112, 255, 114, 105, 110, 255, 116, 95, 97, 108, 108, 255, 95, 100, 255, 101, 97, 100, 108, 111, 99, 255, 107, 255, 115, 0, 0, 0, 0, 0, 0, 249, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 10, version: 187, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1397, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1399, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1602, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1952, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1602] [region_id=1396]
[2019/05/01 12:40:11.389 -07:00] [INFO] [pd.rs:558] ["try to change peer"] [peer="Peer { id: 1399, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [change_type=RemoveNode] [region_id=1396]
[2019/05/01 12:40:11.389 -07:00] [INFO] [peer.rs:1953] ["propose conf change peer"] [change_peer=1399] [change_type=RemoveNode] [peer_id=1602] [region_id=1396]
[2019/05/01 12:40:11.452 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 1399, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=13] [term=7] [peer_id=1602] [region_id=1396]
[2019/05/01 12:40:11.452 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 10, version: 187, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=1602] [region_id=1396]
[2019/05/01 12:40:11.452 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 1396, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 112, 255, 97, 103, 101, 255, 95, 115, 105, 122, 101, 255, 0, 0, 255, 0, 0, 0, 0, 0, 0, 247, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 112, 255, 114, 105, 110, 255, 116, 95, 97, 108, 108, 255, 95, 100, 255, 101, 97, 100, 108, 111, 99, 255, 107, 255, 115, 0, 0, 0, 0, 0, 0, 249, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 10, version: 187, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1397, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1399, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1602, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1952, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1399, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1602] [region_id=1396]
[2019/05/01 12:40:11.453 -07:00] [INFO] [pd.rs:558] ["try to change peer"] [peer="Peer { id: 1399, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [change_type=RemoveNode] [region_id=1396]
[2019/05/01 12:40:11.453 -07:00] [INFO] [peer.rs:1927] ["there is a pending conf change, try later"] [peer_id=1602] [region_id=1396]
[2019/05/01 12:40:11.477 -07:00] [INFO] [peer.rs:1318] ["notify pd with change peer region"] [region="Region { id: 1396, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 112, 255, 97, 103, 101, 255, 95, 115, 105, 122, 101, 255, 0, 0, 255, 0, 0, 0, 0, 0, 0, 247, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 112, 255, 114, 105, 110, 255, 116, 95, 97, 108, 108, 255, 95, 100, 255, 101, 97, 100, 108, 111, 99, 255, 107, 255, 115, 0, 0, 0, 0, 0, 0, 249, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 11, version: 187, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1397, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1602, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1952, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1602] [region_id=1396]
[2019/05/01 12:40:12.104 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_1655_6_7_(default|lock|write).sst] [snap_key=1655_6_7]
[2019/05/01 12:40:12.137 -07:00] [INFO] [unknown:1792] ["[region 1655] 1954 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 7, term: 6]"]
[2019/05/01 12:40:12.137 -07:00] [INFO] [unknown:1816] ["[region 1655] 1954 restored progress of 1656 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:40:12.137 -07:00] [INFO] [unknown:1816] ["[region 1655] 1954 restored progress of 1657 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:40:12.137 -07:00] [INFO] [unknown:1816] ["[region 1655] 1954 restored progress of 1658 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:40:12.137 -07:00] [INFO] [unknown:1816] ["[region 1655] 1954 restored progress of 1954 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:40:12.137 -07:00] [INFO] [unknown:474] ["[region 1655] 1954 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 7, term: 6]"]
[2019/05/01 12:40:12.137 -07:00] [INFO] [unknown:1736] ["[region 1655] 1954 [commit: 7] restored snapshot [index: 7, term: 6]"]
[2019/05/01 12:40:12.137 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=1954] [region_id=1655]
[2019/05/01 12:40:12.137 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 7, truncated_state: Some(RaftTruncatedState { index: 7, term: 6, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 1655, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 108, 105, 99, 101, 255, 110, 115, 101, 0, 254, 0, 0, 0, 252], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 108, 111, 99, 97, 255, 108, 95, 105, 110, 255, 102, 105, 108, 255, 101, 0, 0, 0, 0, 251, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 247, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1656, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1657, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1658, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1954, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1954] [region_id=1655]
[2019/05/01 12:40:12.180 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 1655] 1954"]
[2019/05/01 12:40:12.188 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 1655, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 108, 105, 99, 101, 255, 110, 115, 101, 0, 254, 0, 0, 0, 252], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 108, 111, 99, 97, 255, 108, 95, 105, 110, 255, 102, 105, 108, 255, 101, 0, 0, 0, 0, 251, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 247, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1656, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1657, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1658, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1954, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1954] [region_id=1655]
[2019/05/01 12:40:12.188 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=1655]
[2019/05/01 12:40:12.243 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=62.788909ms] [region_id=1655]
[2019/05/01 12:40:12.407 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=1956] [region_id=1335]
[2019/05/01 12:40:12.407 -07:00] [INFO] [unknown:719] ["[region 1335] 1956 became follower at term 0"]
[2019/05/01 12:40:12.407 -07:00] [INFO] [unknown:295] ["[region 1335] 1956 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:40:12.407 -07:00] [INFO] [unknown:719] ["[region 1335] 1956 became follower at term 1"]
[2019/05/01 12:40:12.407 -07:00] [INFO] [unknown:920] ["[region 1335] 1956 [term: 1] received a MsgHeartbeat message with higher term from 1338 [term: 6]"]
[2019/05/01 12:40:12.407 -07:00] [INFO] [unknown:719] ["[region 1335] 1956 became follower at term 6"]
[2019/05/01 12:40:13.096 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 1954, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=8] [term=6] [peer_id=1954] [region_id=1655]
[2019/05/01 12:40:13.096 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 6, version: 247, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=1954] [region_id=1655]
[2019/05/01 12:40:13.096 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 1655, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 108, 105, 99, 101, 255, 110, 115, 101, 0, 254, 0, 0, 0, 252], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 108, 111, 99, 97, 255, 108, 95, 105, 110, 255, 102, 105, 108, 255, 101, 0, 0, 0, 0, 251, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 247, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1656, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1657, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1658, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1954, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1954, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1954] [region_id=1655]
[2019/05/01 12:40:13.156 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 1656, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=9] [term=6] [peer_id=1954] [region_id=1655]
[2019/05/01 12:40:13.156 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 7, version: 247, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=1954] [region_id=1655]
[2019/05/01 12:40:13.156 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 1655, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 108, 105, 99, 101, 255, 110, 115, 101, 0, 254, 0, 0, 0, 252], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 108, 111, 99, 97, 255, 108, 95, 105, 110, 255, 102, 105, 108, 255, 101, 0, 0, 0, 0, 251, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 7, version: 247, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1656, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1657, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1658, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1954, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1656, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1954] [region_id=1655]
[2019/05/01 12:40:13.898 -07:00] [INFO] [unknown:1625] ["[region 1730] 1751 [term 6] received MsgTimeoutNow from 1732 and starts an election to get leadership."]
[2019/05/01 12:40:13.898 -07:00] [INFO] [unknown:739] ["[region 1730] 1751 became candidate at term 7"]
[2019/05/01 12:40:13.898 -07:00] [INFO] [unknown:854] ["[region 1730] 1751 received MsgRequestVoteResponse from 1751 at term 7"]
[2019/05/01 12:40:13.898 -07:00] [INFO] [unknown:828] ["[region 1730] 1751 [logterm: 6, index: 9] sent MsgRequestVote request to 1733 at term 7"]
[2019/05/01 12:40:13.898 -07:00] [INFO] [unknown:828] ["[region 1730] 1751 [logterm: 6, index: 9] sent MsgRequestVote request to 1732 at term 7"]
[2019/05/01 12:40:13.914 -07:00] [INFO] [unknown:854] ["[region 1730] 1751 received MsgRequestVoteResponse from 1732 at term 7"]
[2019/05/01 12:40:13.914 -07:00] [INFO] [unknown:1550] ["[region 1730] 1751 [quorum:2] has received 2 MsgRequestVoteResponse votes and 0 vote rejections"]
[2019/05/01 12:40:13.914 -07:00] [INFO] [unknown:789] ["[region 1730] 1751 became leader at term 7"]
[2019/05/01 12:40:14.076 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=1998] [region_id=1734]
[2019/05/01 12:40:14.076 -07:00] [INFO] [unknown:719] ["[region 1734] 1998 became follower at term 0"]
[2019/05/01 12:40:14.076 -07:00] [INFO] [unknown:295] ["[region 1734] 1998 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:40:14.076 -07:00] [INFO] [unknown:719] ["[region 1734] 1998 became follower at term 1"]
[2019/05/01 12:40:14.076 -07:00] [INFO] [unknown:920] ["[region 1734] 1998 [term: 1] received a MsgHeartbeat message with higher term from 1736 [term: 6]"]
[2019/05/01 12:40:14.076 -07:00] [INFO] [unknown:719] ["[region 1734] 1998 became follower at term 6"]
[2019/05/01 12:40:14.410 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_1335_6_7_(default|lock|write).sst] [snap_key=1335_6_7]
[2019/05/01 12:40:14.418 -07:00] [INFO] [unknown:1792] ["[region 1335] 1956 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 7, term: 6]"]
[2019/05/01 12:40:14.418 -07:00] [INFO] [unknown:1816] ["[region 1335] 1956 restored progress of 1336 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:40:14.418 -07:00] [INFO] [unknown:1816] ["[region 1335] 1956 restored progress of 1337 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:40:14.418 -07:00] [INFO] [unknown:1816] ["[region 1335] 1956 restored progress of 1338 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:40:14.418 -07:00] [INFO] [unknown:1816] ["[region 1335] 1956 restored progress of 1956 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:40:14.418 -07:00] [INFO] [unknown:474] ["[region 1335] 1956 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 7, term: 6]"]
[2019/05/01 12:40:14.418 -07:00] [INFO] [unknown:1736] ["[region 1335] 1956 [commit: 7] restored snapshot [index: 7, term: 6]"]
[2019/05/01 12:40:14.418 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=1956] [region_id=1335]
[2019/05/01 12:40:14.418 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 7, truncated_state: Some(RaftTruncatedState { index: 7, term: 6, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 1335, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 109, 255, 97, 120, 95, 255, 112, 117, 114, 103, 101, 255, 95, 108, 255, 97, 103, 0, 0, 0, 0, 251, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 109, 255, 97, 120, 95, 255, 112, 117, 114, 103, 101, 255, 95, 108, 255, 97, 103, 95, 100, 101, 108, 255, 97, 255, 121, 0, 0, 0, 0, 0, 0, 249, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 177, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1336, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1337, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1338, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1956, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1956] [region_id=1335]
[2019/05/01 12:40:14.433 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 1335, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 109, 255, 97, 120, 95, 255, 112, 117, 114, 103, 101, 255, 95, 108, 255, 97, 103, 0, 0, 0, 0, 251, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 109, 255, 97, 120, 95, 255, 112, 117, 114, 103, 101, 255, 95, 108, 255, 97, 103, 95, 100, 101, 108, 255, 97, 255, 121, 0, 0, 0, 0, 0, 0, 249, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 177, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1336, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1337, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1338, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1956, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1956] [region_id=1335]
[2019/05/01 12:40:14.433 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 1335] 1956"]
[2019/05/01 12:40:14.433 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=1335]
[2019/05/01 12:40:14.469 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=35.725855ms] [region_id=1335]
[2019/05/01 12:40:15.339 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddLearnerNode, peer: Some(Peer { id: 1999, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=10] [term=6] [peer_id=1903] [region_id=1105]
[2019/05/01 12:40:15.339 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 8, version: 137, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddLearner] [peer_id=1903] [region_id=1105]
[2019/05/01 12:40:15.339 -07:00] [INFO] [apply.rs:1476] ["add learner successfully"] [region="Region { id: 1105, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 99, 255, 111, 109, 112, 255, 114, 101, 115, 115, 105, 255, 111, 110, 255, 95, 112, 97, 100, 95, 112, 255, 99, 255, 116, 95, 109, 97, 120, 0, 0, 253, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 99, 255, 111, 110, 99, 255, 117, 114, 114, 101, 110, 255, 99, 121, 255, 95, 116, 105, 99, 107, 101, 255, 116, 255, 115, 0, 0, 0, 0, 0, 0, 249, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 8, version: 137, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1107, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1108, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1903, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1999, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1903] [region_id=1105]
[2019/05/01 12:40:15.462 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 1956, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=8] [term=6] [peer_id=1956] [region_id=1335]
[2019/05/01 12:40:15.462 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 6, version: 177, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=1956] [region_id=1335]
[2019/05/01 12:40:15.462 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 1335, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 109, 255, 97, 120, 95, 255, 112, 117, 114, 103, 101, 255, 95, 108, 255, 97, 103, 0, 0, 0, 0, 251, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 109, 255, 97, 120, 95, 255, 112, 117, 114, 103, 101, 255, 95, 108, 255, 97, 103, 95, 100, 101, 108, 255, 97, 255, 121, 0, 0, 0, 0, 0, 0, 249, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 177, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1336, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1337, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1338, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1956, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1956, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1956] [region_id=1335]
[2019/05/01 12:40:15.527 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 1336, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=9] [term=6] [peer_id=1956] [region_id=1335]
[2019/05/01 12:40:15.527 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 7, version: 177, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=1956] [region_id=1335]
[2019/05/01 12:40:15.527 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 1335, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 109, 255, 97, 120, 95, 255, 112, 117, 114, 103, 101, 255, 95, 108, 255, 97, 103, 0, 0, 0, 0, 251, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 109, 255, 97, 120, 95, 255, 112, 117, 114, 103, 101, 255, 95, 108, 255, 97, 103, 95, 100, 101, 108, 255, 97, 255, 121, 0, 0, 0, 0, 0, 0, 249, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 7, version: 177, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1336, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1337, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1338, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1956, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1336, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1956] [region_id=1335]
[2019/05/01 12:40:15.549 -07:00] [INFO] [pd.rs:558] ["try to change peer"] [peer="Peer { id: 2000, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [change_type=AddLearnerNode] [region_id=1121]
[2019/05/01 12:40:15.549 -07:00] [INFO] [peer.rs:1953] ["propose conf change peer"] [change_peer=2000] [change_type=AddLearnerNode] [peer_id=1150] [region_id=1121]
[2019/05/01 12:40:15.604 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddLearnerNode, peer: Some(Peer { id: 2000, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=11] [term=7] [peer_id=1150] [region_id=1121]
[2019/05/01 12:40:15.604 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 8, version: 137, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddLearner] [peer_id=1150] [region_id=1121]
[2019/05/01 12:40:15.604 -07:00] [INFO] [apply.rs:1476] ["add learner successfully"] [region="Region { id: 1121, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 100, 255, 111, 117, 98, 255, 108, 101, 119, 114, 105, 255, 116, 101, 255, 0, 0, 0, 0, 0, 0, 249, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 102, 255, 97, 115, 116, 255, 95, 115, 104, 117, 116, 255, 100, 111, 255, 119, 110, 0, 0, 0, 0, 251, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 8, version: 137, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1123, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1124, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1150, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 2000, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1150] [region_id=1121]
[2019/05/01 12:40:15.616 -07:00] [INFO] [peer.rs:1318] ["notify pd with change peer region"] [region="Region { id: 1121, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 100, 255, 111, 117, 98, 255, 108, 101, 119, 114, 105, 255, 116, 101, 255, 0, 0, 0, 0, 0, 0, 249, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 102, 255, 97, 115, 116, 255, 95, 115, 104, 117, 116, 255, 100, 111, 255, 119, 110, 0, 0, 0, 0, 251, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 137, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1123, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1124, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1150, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 2000, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1150] [region_id=1121]
[2019/05/01 12:40:16.079 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_1734_6_7_(default|lock|write).sst] [snap_key=1734_6_7]
[2019/05/01 12:40:16.089 -07:00] [INFO] [unknown:1792] ["[region 1734] 1998 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 7, term: 6]"]
[2019/05/01 12:40:16.089 -07:00] [INFO] [unknown:1816] ["[region 1734] 1998 restored progress of 1735 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:40:16.089 -07:00] [INFO] [unknown:1816] ["[region 1734] 1998 restored progress of 1736 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:40:16.089 -07:00] [INFO] [unknown:1816] ["[region 1734] 1998 restored progress of 1737 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:40:16.089 -07:00] [INFO] [unknown:1816] ["[region 1734] 1998 restored progress of 1998 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:40:16.089 -07:00] [INFO] [unknown:474] ["[region 1734] 1998 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 7, term: 6]"]
[2019/05/01 12:40:16.089 -07:00] [INFO] [unknown:1736] ["[region 1734] 1998 [commit: 7] restored snapshot [index: 7, term: 6]"]
[2019/05/01 12:40:16.089 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=1998] [region_id=1734]
[2019/05/01 12:40:16.089 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 7, truncated_state: Some(RaftTruncatedState { index: 7, term: 6, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 1734, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 108, 111, 103, 95, 255, 115, 121, 115, 108, 255, 111, 103, 95, 255, 102, 97, 99, 105, 108, 255, 105, 116, 255, 121, 0, 0, 0, 0, 0, 250, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 108, 111, 103, 95, 255, 115, 121, 115, 108, 255, 111, 103, 95, 255, 105, 110, 99, 108, 117, 255, 100, 101, 255, 95, 112, 105, 100, 0, 0, 253, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 257, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1735, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1736, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1737, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1998, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1998] [region_id=1734]
[2019/05/01 12:40:16.113 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 1734, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 108, 111, 103, 95, 255, 115, 121, 115, 108, 255, 111, 103, 95, 255, 102, 97, 99, 105, 108, 255, 105, 116, 255, 121, 0, 0, 0, 0, 0, 250, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 108, 111, 103, 95, 255, 115, 121, 115, 108, 255, 111, 103, 95, 255, 105, 110, 99, 108, 117, 255, 100, 101, 255, 95, 112, 105, 100, 0, 0, 253, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 257, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1735, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1736, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1737, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1998, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1998] [region_id=1734]
[2019/05/01 12:40:16.113 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 1734] 1998"]
[2019/05/01 12:40:16.113 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=1734]
[2019/05/01 12:40:16.130 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=15.902825ms] [region_id=1734]
[2019/05/01 12:40:16.341 -07:00] [INFO] [peer_storage.rs:759] ["requesting snapshot"] [peer_id=1150] [region_id=1121]
[2019/05/01 12:40:16.341 -07:00] [INFO] [snap.rs:757] ["scan snapshot of one cf"] [size=0] [key_count=0] [cf=default] [snapshot=/opt/tidb/data/kv/snap/gen_1121_7_11_(default|lock|write).sst] [region_id=1121]
[2019/05/01 12:40:16.341 -07:00] [INFO] [snap.rs:757] ["scan snapshot of one cf"] [size=0] [key_count=0] [cf=lock] [snapshot=/opt/tidb/data/kv/snap/gen_1121_7_11_(default|lock|write).sst] [region_id=1121]
[2019/05/01 12:40:16.341 -07:00] [INFO] [snap.rs:757] ["scan snapshot of one cf"] [size=156] [key_count=2] [cf=write] [snapshot=/opt/tidb/data/kv/snap/gen_1121_7_11_(default|lock|write).sst] [region_id=1121]
[2019/05/01 12:40:16.366 -07:00] [INFO] [snap.rs:875] ["scan snapshot"] [takes=24.939207ms] [size=1414] [key_count=2] [snapshot=/opt/tidb/data/kv/snap/gen_1121_7_11_(default|lock|write).sst] [region_id=1121]
[2019/05/01 12:40:16.434 -07:00] [INFO] [unknown:1625] ["[region 909] 1310 [term 7] received MsgTimeoutNow from 911 and starts an election to get leadership."]
[2019/05/01 12:40:16.434 -07:00] [INFO] [unknown:739] ["[region 909] 1310 became candidate at term 8"]
[2019/05/01 12:40:16.434 -07:00] [INFO] [unknown:854] ["[region 909] 1310 received MsgRequestVoteResponse from 1310 at term 8"]
[2019/05/01 12:40:16.434 -07:00] [INFO] [unknown:828] ["[region 909] 1310 [logterm: 7, index: 10] sent MsgRequestVote request to 912 at term 8"]
[2019/05/01 12:40:16.434 -07:00] [INFO] [unknown:828] ["[region 909] 1310 [logterm: 7, index: 10] sent MsgRequestVote request to 911 at term 8"]
[2019/05/01 12:40:16.503 -07:00] [INFO] [unknown:920] ["[region 341] 1008 [term: 7] received a MsgRequestVote message with higher term from 1454 [term: 8]"]
[2019/05/01 12:40:16.503 -07:00] [INFO] [unknown:719] ["[region 341] 1008 became follower at term 8"]
[2019/05/01 12:40:16.503 -07:00] [INFO] [unknown:1083] ["[region 341] 1008 [logterm: 7, index: 13, vote: 0] cast MsgRequestVote for 1454 [logterm: 7, index: 13] at term 8"]
[2019/05/01 12:40:16.525 -07:00] [INFO] [unknown:854] ["[region 909] 1310 received MsgRequestVoteResponse from 912 at term 8"]
[2019/05/01 12:40:16.525 -07:00] [INFO] [unknown:1550] ["[region 909] 1310 [quorum:2] has received 2 MsgRequestVoteResponse votes and 0 vote rejections"]
[2019/05/01 12:40:16.525 -07:00] [INFO] [unknown:789] ["[region 909] 1310 became leader at term 8"]
[2019/05/01 12:40:16.592 -07:00] [INFO] [unknown:920] ["[region 117] 1005 [term: 7] received a MsgRequestVote message with higher term from 258 [term: 8]"]
[2019/05/01 12:40:16.592 -07:00] [INFO] [unknown:719] ["[region 117] 1005 became follower at term 8"]
[2019/05/01 12:40:16.592 -07:00] [INFO] [unknown:1083] ["[region 117] 1005 [logterm: 7, index: 13, vote: 0] cast MsgRequestVote for 258 [logterm: 7, index: 13] at term 8"]
[2019/05/01 12:40:17.154 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 1998, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=8] [term=6] [peer_id=1998] [region_id=1734]
[2019/05/01 12:40:17.163 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 6, version: 257, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=1998] [region_id=1734]
[2019/05/01 12:40:17.163 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 1734, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 108, 111, 103, 95, 255, 115, 121, 115, 108, 255, 111, 103, 95, 255, 102, 97, 99, 105, 108, 255, 105, 116, 255, 121, 0, 0, 0, 0, 0, 250, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 108, 111, 103, 95, 255, 115, 121, 115, 108, 255, 111, 103, 95, 255, 105, 110, 99, 108, 117, 255, 100, 101, 255, 95, 112, 105, 100, 0, 0, 253, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 257, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1735, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1736, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1737, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1998, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1998, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1998] [region_id=1734]
[2019/05/01 12:40:17.261 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 1735, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=9] [term=6] [peer_id=1998] [region_id=1734]
[2019/05/01 12:40:17.274 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 7, version: 257, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=1998] [region_id=1734]
[2019/05/01 12:40:17.274 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 1734, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 108, 111, 103, 95, 255, 115, 121, 115, 108, 255, 111, 103, 95, 255, 102, 97, 99, 105, 108, 255, 105, 116, 255, 121, 0, 0, 0, 0, 0, 250, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 108, 111, 103, 95, 255, 115, 121, 115, 108, 255, 111, 103, 95, 255, 105, 110, 99, 108, 117, 255, 100, 101, 255, 95, 112, 105, 100, 0, 0, 253, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 7, version: 257, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1735, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1736, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1737, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1998, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1735, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1998] [region_id=1734]
[2019/05/01 12:40:17.548 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=2002] [region_id=1083]
[2019/05/01 12:40:17.548 -07:00] [INFO] [unknown:719] ["[region 1083] 2002 became follower at term 0"]
[2019/05/01 12:40:17.548 -07:00] [INFO] [unknown:295] ["[region 1083] 2002 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:40:17.548 -07:00] [INFO] [unknown:719] ["[region 1083] 2002 became follower at term 1"]
[2019/05/01 12:40:17.548 -07:00] [INFO] [unknown:920] ["[region 1083] 2002 [term: 1] received a MsgHeartbeat message with higher term from 1406 [term: 8]"]
[2019/05/01 12:40:17.548 -07:00] [INFO] [unknown:719] ["[region 1083] 2002 became follower at term 8"]
[2019/05/01 12:40:18.178 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=2001] [region_id=1521]
[2019/05/01 12:40:18.178 -07:00] [INFO] [unknown:719] ["[region 1521] 2001 became follower at term 0"]
[2019/05/01 12:40:18.178 -07:00] [INFO] [unknown:295] ["[region 1521] 2001 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:40:18.178 -07:00] [INFO] [unknown:719] ["[region 1521] 2001 became follower at term 1"]
[2019/05/01 12:40:18.178 -07:00] [INFO] [unknown:920] ["[region 1521] 2001 [term: 1] received a MsgHeartbeat message with higher term from 1524 [term: 6]"]
[2019/05/01 12:40:18.178 -07:00] [INFO] [unknown:719] ["[region 1521] 2001 became follower at term 6"]
[2019/05/01 12:40:18.343 -07:00] [INFO] [unknown:841] ["New connected subchannel at 0x7f0412601bd0 for subchannel 0x7f04cf841a00"]
[2019/05/01 12:40:18.358 -07:00] [INFO] [snap.rs:389] ["sent snapshot"] [duration=15.587069ms] [size=1414] [snap_key=1121_7_11] [region_id=1121]
[2019/05/01 12:40:18.358 -07:00] [INFO] [peer.rs:538] ["report snapshot status"] [status=Finish] [to="Peer { id: 2000, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1150] [region_id=1121]
[2019/05/01 12:40:19.346 -07:00] [INFO] [pd.rs:558] ["try to change peer"] [peer="Peer { id: 2000, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [change_type=AddNode] [region_id=1121]
[2019/05/01 12:40:19.347 -07:00] [INFO] [peer.rs:1953] ["propose conf change peer"] [change_peer=2000] [change_type=AddNode] [peer_id=1150] [region_id=1121]
[2019/05/01 12:40:19.407 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 2000, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=12] [term=7] [peer_id=1150] [region_id=1121]
[2019/05/01 12:40:19.407 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 9, version: 137, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=1150] [region_id=1121]
[2019/05/01 12:40:19.407 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 1121, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 100, 255, 111, 117, 98, 255, 108, 101, 119, 114, 105, 255, 116, 101, 255, 0, 0, 0, 0, 0, 0, 249, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 102, 255, 97, 115, 116, 255, 95, 115, 104, 117, 116, 255, 100, 111, 255, 119, 110, 0, 0, 0, 0, 251, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 137, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1123, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1124, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1150, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 2000, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 2000, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1150] [region_id=1121]
[2019/05/01 12:40:19.428 -07:00] [INFO] [peer.rs:1318] ["notify pd with change peer region"] [region="Region { id: 1121, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 100, 255, 111, 117, 98, 255, 108, 101, 119, 114, 105, 255, 116, 101, 255, 0, 0, 0, 0, 0, 0, 249, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 102, 255, 97, 115, 116, 255, 95, 115, 104, 117, 116, 255, 100, 111, 255, 119, 110, 0, 0, 0, 0, 251, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 10, version: 137, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1123, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1124, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1150, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 2000, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1150] [region_id=1121]
[2019/05/01 12:40:19.452 -07:00] [INFO] [pd.rs:558] ["try to change peer"] [peer="Peer { id: 1123, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [change_type=RemoveNode] [region_id=1121]
[2019/05/01 12:40:19.452 -07:00] [INFO] [peer.rs:1953] ["propose conf change peer"] [change_peer=1123] [change_type=RemoveNode] [peer_id=1150] [region_id=1121]
[2019/05/01 12:40:19.524 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 1999, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=11] [term=6] [peer_id=1903] [region_id=1105]
[2019/05/01 12:40:19.537 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 9, version: 137, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=1903] [region_id=1105]
[2019/05/01 12:40:19.537 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 1105, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 99, 255, 111, 109, 112, 255, 114, 101, 115, 115, 105, 255, 111, 110, 255, 95, 112, 97, 100, 95, 112, 255, 99, 255, 116, 95, 109, 97, 120, 0, 0, 253, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 99, 255, 111, 110, 99, 255, 117, 114, 114, 101, 110, 255, 99, 121, 255, 95, 116, 105, 99, 107, 101, 255, 116, 255, 115, 0, 0, 0, 0, 0, 0, 249, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 137, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1107, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1108, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1903, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1999, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1999, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1903] [region_id=1105]
[2019/05/01 12:40:19.585 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 1123, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=13] [term=7] [peer_id=1150] [region_id=1121]
[2019/05/01 12:40:19.585 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 10, version: 137, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=1150] [region_id=1121]
[2019/05/01 12:40:19.585 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 1121, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 100, 255, 111, 117, 98, 255, 108, 101, 119, 114, 105, 255, 116, 101, 255, 0, 0, 0, 0, 0, 0, 249, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 102, 255, 97, 115, 116, 255, 95, 115, 104, 117, 116, 255, 100, 111, 255, 119, 110, 0, 0, 0, 0, 251, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 10, version: 137, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1123, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1124, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1150, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 2000, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1123, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1150] [region_id=1121]
[2019/05/01 12:40:19.585 -07:00] [INFO] [pd.rs:558] ["try to change peer"] [peer="Peer { id: 1123, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [change_type=RemoveNode] [region_id=1121]
[2019/05/01 12:40:19.585 -07:00] [INFO] [peer.rs:1927] ["there is a pending conf change, try later"] [peer_id=1150] [region_id=1121]
[2019/05/01 12:40:19.607 -07:00] [INFO] [peer.rs:1318] ["notify pd with change peer region"] [region="Region { id: 1121, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 100, 255, 111, 117, 98, 255, 108, 101, 119, 114, 105, 255, 116, 101, 255, 0, 0, 0, 0, 0, 0, 249, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 102, 255, 97, 115, 116, 255, 95, 115, 104, 117, 116, 255, 100, 111, 255, 119, 110, 0, 0, 0, 0, 251, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 11, version: 137, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1124, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1150, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 2000, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1150] [region_id=1121]
[2019/05/01 12:40:19.621 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_1083_8_12_(default|lock|write).sst] [snap_key=1083_8_12]
[2019/05/01 12:40:19.631 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 1107, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=12] [term=6] [peer_id=1903] [region_id=1105]
[2019/05/01 12:40:19.632 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 10, version: 137, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=1903] [region_id=1105]
[2019/05/01 12:40:19.632 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 1105, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 99, 255, 111, 109, 112, 255, 114, 101, 115, 115, 105, 255, 111, 110, 255, 95, 112, 97, 100, 95, 112, 255, 99, 255, 116, 95, 109, 97, 120, 0, 0, 253, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 99, 255, 111, 110, 99, 255, 117, 114, 114, 101, 110, 255, 99, 121, 255, 95, 116, 105, 99, 107, 101, 255, 116, 255, 115, 0, 0, 0, 0, 0, 0, 249, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 10, version: 137, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1107, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1108, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1903, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1999, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1107, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1903] [region_id=1105]
[2019/05/01 12:40:19.645 -07:00] [INFO] [unknown:1792] ["[region 1083] 2002 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 12, term: 8]"]
[2019/05/01 12:40:19.650 -07:00] [INFO] [unknown:1816] ["[region 1083] 2002 restored progress of 1085 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:40:19.650 -07:00] [INFO] [unknown:1816] ["[region 1083] 2002 restored progress of 1086 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:40:19.650 -07:00] [INFO] [unknown:1816] ["[region 1083] 2002 restored progress of 1406 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:40:19.650 -07:00] [INFO] [unknown:1816] ["[region 1083] 2002 restored progress of 2002 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:40:19.650 -07:00] [INFO] [unknown:474] ["[region 1083] 2002 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 12, term: 8]"]
[2019/05/01 12:40:19.650 -07:00] [INFO] [unknown:1736] ["[region 1083] 2002 [commit: 12] restored snapshot [index: 12, term: 8]"]
[2019/05/01 12:40:19.650 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=2002] [region_id=1083]
[2019/05/01 12:40:19.650 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 12, truncated_state: Some(RaftTruncatedState { index: 12, term: 8, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 1083, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 99, 255, 111, 109, 109, 255, 105, 116, 95, 99, 111, 255, 110, 99, 255, 117, 114, 114, 101, 110, 99, 255, 121, 255, 0, 0, 0, 0, 0, 0, 0, 248, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 99, 255, 111, 109, 112, 255, 114, 101, 115, 115, 105, 255, 111, 110, 255, 95, 102, 97, 105, 108, 117, 255, 114, 255, 101, 95, 116, 104, 114, 101, 115, 255, 255, 104, 111, 108, 100, 95, 112, 99, 116, 255, 255, 0, 0, 0, 0, 0, 0, 0, 255, 0, 247, 0, 0, 0, 0, 0, 0, 249], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 127, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1085, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1086, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1406, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 2002, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=2002] [region_id=1083]
[2019/05/01 12:40:19.693 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 1083, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 99, 255, 111, 109, 109, 255, 105, 116, 95, 99, 111, 255, 110, 99, 255, 117, 114, 114, 101, 110, 99, 255, 121, 255, 0, 0, 0, 0, 0, 0, 0, 248, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 99, 255, 111, 109, 112, 255, 114, 101, 115, 115, 105, 255, 111, 110, 255, 95, 102, 97, 105, 108, 117, 255, 114, 255, 101, 95, 116, 104, 114, 101, 115, 255, 255, 104, 111, 108, 100, 95, 112, 99, 116, 255, 255, 0, 0, 0, 0, 0, 0, 0, 255, 0, 247, 0, 0, 0, 0, 0, 0, 249], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 127, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1085, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1086, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1406, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 2002, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=2002] [region_id=1083]
[2019/05/01 12:40:19.693 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 1083] 2002"]
[2019/05/01 12:40:19.693 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=1083]
[2019/05/01 12:40:19.741 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=46.924862ms] [region_id=1083]
[2019/05/01 12:40:20.104 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=135_8_12] [peer_id=1848] [region_id=135]
[2019/05/01 12:40:20.104 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=317_7_19] [peer_id=1802] [region_id=317]
[2019/05/01 12:40:20.104 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=405_8_12] [peer_id=1948] [region_id=405]
[2019/05/01 12:40:20.104 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=460_8_12] [peer_id=1755] [region_id=460]
[2019/05/01 12:40:20.104 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=521_8_12] [peer_id=1756] [region_id=521]
[2019/05/01 12:40:20.104 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=610_6_7] [peer_id=1856] [region_id=610]
[2019/05/01 12:40:20.105 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=614_6_10] [peer_id=1754] [region_id=614]
[2019/05/01 12:40:20.105 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=696_8_12] [peer_id=1851] [region_id=696]
[2019/05/01 12:40:20.105 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=1015_6_10] [peer_id=1949] [region_id=1015]
[2019/05/01 12:40:20.105 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=1105_6_7] [peer_id=1903] [region_id=1105]
[2019/05/01 12:40:20.105 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=1170_7_11] [peer_id=1753] [region_id=1170]
[2019/05/01 12:40:20.105 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=1182_7_11] [peer_id=1700] [region_id=1182]
[2019/05/01 12:40:20.106 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=1265_7_11] [peer_id=1947] [region_id=1265]
[2019/05/01 12:40:20.106 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=1289_6_7] [peer_id=1806] [region_id=1289]
[2019/05/01 12:40:20.106 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=1335_6_7] [peer_id=1956] [region_id=1335]
[2019/05/01 12:40:20.106 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=1347_7_11] [peer_id=1902] [region_id=1347]
[2019/05/01 12:40:20.106 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=1368_6_7] [peer_id=1706] [region_id=1368]
[2019/05/01 12:40:20.106 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=1392_6_7] [peer_id=1906] [region_id=1392]
[2019/05/01 12:40:20.106 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=1433_7_8] [peer_id=1803] [region_id=1433]
[2019/05/01 12:40:20.107 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=1574_6_7] [peer_id=1750] [region_id=1574]
[2019/05/01 12:40:20.107 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=1655_6_7] [peer_id=1954] [region_id=1655]
[2019/05/01 12:40:20.107 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=1687_6_7] [peer_id=1858] [region_id=1687]
[2019/05/01 12:40:20.107 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=1691_6_7] [peer_id=1849] [region_id=1691]
[2019/05/01 12:40:20.107 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=1730_6_7] [peer_id=1751] [region_id=1730]
[2019/05/01 12:40:20.107 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=1734_6_7] [peer_id=1998] [region_id=1734]
[2019/05/01 12:40:20.107 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=1746_6_7] [peer_id=1804] [region_id=1746]
[2019/05/01 12:40:20.107 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=1779_7_8] [peer_id=1905] [region_id=1779]
[2019/05/01 12:40:20.107 -07:00] [INFO] [peer.rs:480] ["deleting applied snap file"] [snap_file=1859_6_7] [peer_id=1901] [region_id=1859]
[2019/05/01 12:40:20.182 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_1521_6_7_(default|lock|write).sst] [snap_key=1521_6_7]
[2019/05/01 12:40:20.199 -07:00] [INFO] [unknown:1792] ["[region 1521] 2001 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 7, term: 6]"]
[2019/05/01 12:40:20.199 -07:00] [INFO] [unknown:1816] ["[region 1521] 2001 restored progress of 1522 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:40:20.199 -07:00] [INFO] [unknown:1816] ["[region 1521] 2001 restored progress of 1523 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:40:20.199 -07:00] [INFO] [unknown:1816] ["[region 1521] 2001 restored progress of 1524 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:40:20.199 -07:00] [INFO] [unknown:1816] ["[region 1521] 2001 restored progress of 2001 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:40:20.199 -07:00] [INFO] [unknown:474] ["[region 1521] 2001 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 7, term: 6]"]
[2019/05/01 12:40:20.199 -07:00] [INFO] [unknown:1736] ["[region 1521] 2001 [commit: 7] restored snapshot [index: 7, term: 6]"]
[2019/05/01 12:40:20.199 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=2001] [region_id=1521]
[2019/05/01 12:40:20.199 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 7, truncated_state: Some(RaftTruncatedState { index: 7, term: 6, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 1521, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 115, 255, 117, 112, 112, 255, 111, 114, 116, 95, 120, 255, 97, 0, 255, 0, 0, 0, 0, 0, 0, 248, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 115, 255, 121, 110, 99, 255, 95, 97, 114, 114, 97, 255, 121, 95, 255, 115, 105, 122, 101, 0, 0, 253, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 217, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1522, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1523, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1524, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 2001, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=2001] [region_id=1521]
[2019/05/01 12:40:20.226 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=1521]
[2019/05/01 12:40:20.227 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 1521, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 115, 255, 117, 112, 112, 255, 111, 114, 116, 95, 120, 255, 97, 0, 255, 0, 0, 0, 0, 0, 0, 248, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 115, 255, 121, 110, 99, 255, 95, 97, 114, 114, 97, 255, 121, 95, 255, 115, 105, 122, 101, 0, 0, 253, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 217, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1522, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1523, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1524, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 2001, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=2001] [region_id=1521]
[2019/05/01 12:40:20.227 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 1521] 2001"]
[2019/05/01 12:40:20.256 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=29.064436ms] [region_id=1521]
[2019/05/01 12:40:20.578 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 2002, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=13] [term=8] [peer_id=2002] [region_id=1083]
[2019/05/01 12:40:20.578 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 9, version: 127, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=2002] [region_id=1083]
[2019/05/01 12:40:20.578 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 1083, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 99, 255, 111, 109, 109, 255, 105, 116, 95, 99, 111, 255, 110, 99, 255, 117, 114, 114, 101, 110, 99, 255, 121, 255, 0, 0, 0, 0, 0, 0, 0, 248, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 99, 255, 111, 109, 112, 255, 114, 101, 115, 115, 105, 255, 111, 110, 255, 95, 102, 97, 105, 108, 117, 255, 114, 255, 101, 95, 116, 104, 114, 101, 115, 255, 255, 104, 111, 108, 100, 95, 112, 99, 116, 255, 255, 0, 0, 0, 0, 0, 0, 0, 255, 0, 247, 0, 0, 0, 0, 0, 0, 249], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 127, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1085, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1086, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1406, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 2002, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 2002, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=2002] [region_id=1083]
[2019/05/01 12:40:20.659 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 1085, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=14] [term=8] [peer_id=2002] [region_id=1083]
[2019/05/01 12:40:20.659 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 10, version: 127, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=2002] [region_id=1083]
[2019/05/01 12:40:20.659 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 1083, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 99, 255, 111, 109, 109, 255, 105, 116, 95, 99, 111, 255, 110, 99, 255, 117, 114, 114, 101, 110, 99, 255, 121, 255, 0, 0, 0, 0, 0, 0, 0, 248, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 99, 255, 111, 109, 112, 255, 114, 101, 115, 115, 105, 255, 111, 110, 255, 95, 102, 97, 105, 108, 117, 255, 114, 255, 101, 95, 116, 104, 114, 101, 115, 255, 255, 104, 111, 108, 100, 95, 112, 99, 116, 255, 255, 0, 0, 0, 0, 0, 0, 0, 255, 0, 247, 0, 0, 0, 0, 0, 0, 249], region_epoch: Some(RegionEpoch { conf_ver: 10, version: 127, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1085, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1086, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1406, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 2002, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1085, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=2002] [region_id=1083]
[2019/05/01 12:40:21.244 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 2001, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=8] [term=6] [peer_id=2001] [region_id=1521]
[2019/05/01 12:40:21.244 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 6, version: 217, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=2001] [region_id=1521]
[2019/05/01 12:40:21.244 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 1521, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 115, 255, 117, 112, 112, 255, 111, 114, 116, 95, 120, 255, 97, 0, 255, 0, 0, 0, 0, 0, 0, 248, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 115, 255, 121, 110, 99, 255, 95, 97, 114, 114, 97, 255, 121, 95, 255, 115, 105, 122, 101, 0, 0, 253, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 217, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1522, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1523, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1524, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 2001, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 2001, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=2001] [region_id=1521]
[2019/05/01 12:40:21.345 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 1523, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=9] [term=6] [peer_id=2001] [region_id=1521]
[2019/05/01 12:40:21.345 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 7, version: 217, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=2001] [region_id=1521]
[2019/05/01 12:40:21.345 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 1521, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 115, 255, 117, 112, 112, 255, 111, 114, 116, 95, 120, 255, 97, 0, 255, 0, 0, 0, 0, 0, 0, 248, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 115, 255, 121, 110, 99, 255, 95, 97, 114, 114, 97, 255, 121, 95, 255, 115, 105, 122, 101, 0, 0, 253, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 7, version: 217, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1522, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1523, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1524, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 2001, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1523, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=2001] [region_id=1521]
[2019/05/01 12:40:21.419 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=2005] [region_id=1091]
[2019/05/01 12:40:21.419 -07:00] [INFO] [unknown:719] ["[region 1091] 2005 became follower at term 0"]
[2019/05/01 12:40:21.419 -07:00] [INFO] [unknown:295] ["[region 1091] 2005 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:40:21.419 -07:00] [INFO] [unknown:719] ["[region 1091] 2005 became follower at term 1"]
[2019/05/01 12:40:21.419 -07:00] [INFO] [unknown:920] ["[region 1091] 2005 [term: 1] received a MsgHeartbeat message with higher term from 1093 [term: 7]"]
[2019/05/01 12:40:21.419 -07:00] [INFO] [unknown:719] ["[region 1091] 2005 became follower at term 7"]
[2019/05/01 12:40:22.162 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=2006] [region_id=1671]
[2019/05/01 12:40:22.162 -07:00] [INFO] [unknown:719] ["[region 1671] 2006 became follower at term 0"]
[2019/05/01 12:40:22.162 -07:00] [INFO] [unknown:295] ["[region 1671] 2006 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:40:22.162 -07:00] [INFO] [unknown:719] ["[region 1671] 2006 became follower at term 1"]
[2019/05/01 12:40:22.162 -07:00] [INFO] [unknown:920] ["[region 1671] 2006 [term: 1] received a MsgHeartbeat message with higher term from 1673 [term: 6]"]
[2019/05/01 12:40:22.162 -07:00] [INFO] [unknown:719] ["[region 1671] 2006 became follower at term 6"]
[2019/05/01 12:40:23.422 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_1091_7_8_(default|lock|write).sst] [snap_key=1091_7_8]
[2019/05/01 12:40:23.437 -07:00] [INFO] [unknown:1792] ["[region 1091] 2005 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 8, term: 7]"]
[2019/05/01 12:40:23.437 -07:00] [INFO] [unknown:1816] ["[region 1091] 2005 restored progress of 1092 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:40:23.437 -07:00] [INFO] [unknown:1816] ["[region 1091] 2005 restored progress of 1093 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:40:23.437 -07:00] [INFO] [unknown:1816] ["[region 1091] 2005 restored progress of 1094 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:40:23.437 -07:00] [INFO] [unknown:1816] ["[region 1091] 2005 restored progress of 2005 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:40:23.437 -07:00] [INFO] [unknown:474] ["[region 1091] 2005 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 8, term: 7]"]
[2019/05/01 12:40:23.437 -07:00] [INFO] [unknown:1736] ["[region 1091] 2005 [commit: 8] restored snapshot [index: 8, term: 7]"]
[2019/05/01 12:40:23.437 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=2005] [region_id=1091]
[2019/05/01 12:40:23.437 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 8, truncated_state: Some(RaftTruncatedState { index: 8, term: 7, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 1091, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 99, 255, 111, 109, 112, 255, 114, 101, 115, 115, 105, 255, 111, 110, 255, 95, 108, 101, 118, 101, 108, 255, 0, 255, 0, 0, 0, 0, 0, 0, 0, 247, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 99, 255, 111, 109, 112, 255, 114, 101, 115, 115, 105, 255, 111, 110, 255, 95, 112, 97, 100, 95, 112, 255, 99, 255, 116, 95, 109, 97, 120, 0, 0, 253, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 127, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1092, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1093, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1094, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 2005, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=2005] [region_id=1091]
[2019/05/01 12:40:23.518 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 1091, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 99, 255, 111, 109, 112, 255, 114, 101, 115, 115, 105, 255, 111, 110, 255, 95, 108, 101, 118, 101, 108, 255, 0, 255, 0, 0, 0, 0, 0, 0, 0, 247, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 99, 255, 111, 109, 112, 255, 114, 101, 115, 115, 105, 255, 111, 110, 255, 95, 112, 97, 100, 95, 112, 255, 99, 255, 116, 95, 109, 97, 120, 0, 0, 253, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 127, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1092, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1093, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1094, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 2005, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=2005] [region_id=1091]
[2019/05/01 12:40:23.518 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 1091] 2005"]
[2019/05/01 12:40:23.518 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=1091]
[2019/05/01 12:40:23.537 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=18.115162ms] [region_id=1091]
[2019/05/01 12:40:24.165 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_1671_6_7_(default|lock|write).sst] [snap_key=1671_6_7]
[2019/05/01 12:40:24.176 -07:00] [INFO] [unknown:1792] ["[region 1671] 2006 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 7, term: 6]"]
[2019/05/01 12:40:24.176 -07:00] [INFO] [unknown:1816] ["[region 1671] 2006 restored progress of 1672 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:40:24.176 -07:00] [INFO] [unknown:1816] ["[region 1671] 2006 restored progress of 1673 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:40:24.176 -07:00] [INFO] [unknown:1816] ["[region 1671] 2006 restored progress of 1674 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:40:24.176 -07:00] [INFO] [unknown:1816] ["[region 1671] 2006 restored progress of 2006 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:40:24.176 -07:00] [INFO] [unknown:474] ["[region 1671] 2006 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 7, term: 6]"]
[2019/05/01 12:40:24.176 -07:00] [INFO] [unknown:1736] ["[region 1671] 2006 [commit: 7] restored snapshot [index: 7, term: 6]"]
[2019/05/01 12:40:24.176 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=2006] [region_id=1671]
[2019/05/01 12:40:24.176 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 7, truncated_state: Some(RaftTruncatedState { index: 7, term: 6, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 1671, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 108, 111, 103, 95, 255, 98, 97, 99, 107, 255, 119, 97, 114, 255, 100, 95, 99, 111, 109, 255, 112, 97, 255, 116, 105, 98, 108, 101, 95, 255, 117, 255, 115, 101, 114, 95, 100, 101, 102, 255, 255, 105, 110, 105, 116, 105, 111, 110, 115, 255, 255, 0, 0, 0, 0, 0, 0, 0, 255, 0, 247, 0, 0, 0, 0, 0, 0, 249], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 108, 111, 103, 95, 255, 98, 105, 110, 0, 254, 0, 0, 0, 252], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 247, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1672, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1673, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1674, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 2006, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=2006] [region_id=1671]
[2019/05/01 12:40:24.209 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 1671] 2006"]
[2019/05/01 12:40:24.209 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 1671, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 108, 111, 103, 95, 255, 98, 97, 99, 107, 255, 119, 97, 114, 255, 100, 95, 99, 111, 109, 255, 112, 97, 255, 116, 105, 98, 108, 101, 95, 255, 117, 255, 115, 101, 114, 95, 100, 101, 102, 255, 255, 105, 110, 105, 116, 105, 111, 110, 115, 255, 255, 0, 0, 0, 0, 0, 0, 0, 255, 0, 247, 0, 0, 0, 0, 0, 0, 249], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 108, 111, 103, 95, 255, 98, 105, 110, 0, 254, 0, 0, 0, 252], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 247, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1672, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1673, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1674, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 2006, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=2006] [region_id=1671]
[2019/05/01 12:40:24.209 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=1671]
[2019/05/01 12:40:24.231 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=22.23433ms] [region_id=1671]
[2019/05/01 12:40:24.436 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 2005, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=9] [term=7] [peer_id=2005] [region_id=1091]
[2019/05/01 12:40:24.436 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 6, version: 127, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=2005] [region_id=1091]
[2019/05/01 12:40:24.436 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 1091, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 99, 255, 111, 109, 112, 255, 114, 101, 115, 115, 105, 255, 111, 110, 255, 95, 108, 101, 118, 101, 108, 255, 0, 255, 0, 0, 0, 0, 0, 0, 0, 247, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 99, 255, 111, 109, 112, 255, 114, 101, 115, 115, 105, 255, 111, 110, 255, 95, 112, 97, 100, 95, 112, 255, 99, 255, 116, 95, 109, 97, 120, 0, 0, 253, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 127, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1092, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1093, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1094, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 2005, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 2005, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=2005] [region_id=1091]
[2019/05/01 12:40:24.496 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 1094, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=10] [term=7] [peer_id=2005] [region_id=1091]
[2019/05/01 12:40:24.496 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 7, version: 127, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=2005] [region_id=1091]
[2019/05/01 12:40:24.496 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 1091, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 99, 255, 111, 109, 112, 255, 114, 101, 115, 115, 105, 255, 111, 110, 255, 95, 108, 101, 118, 101, 108, 255, 0, 255, 0, 0, 0, 0, 0, 0, 0, 247, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 99, 255, 111, 109, 112, 255, 114, 101, 115, 115, 105, 255, 111, 110, 255, 95, 112, 97, 100, 95, 112, 255, 99, 255, 116, 95, 109, 97, 120, 0, 0, 253, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 7, version: 127, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1092, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1093, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1094, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 2005, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1094, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=2005] [region_id=1091]
[2019/05/01 12:40:24.787 -07:00] [INFO] [unknown:1625] ["[region 1859] 1901 [term 6] received MsgTimeoutNow from 1861 and starts an election to get leadership."]
[2019/05/01 12:40:24.787 -07:00] [INFO] [unknown:739] ["[region 1859] 1901 became candidate at term 7"]
[2019/05/01 12:40:24.787 -07:00] [INFO] [unknown:854] ["[region 1859] 1901 received MsgRequestVoteResponse from 1901 at term 7"]
[2019/05/01 12:40:24.787 -07:00] [INFO] [unknown:828] ["[region 1859] 1901 [logterm: 6, index: 9] sent MsgRequestVote request to 1861 at term 7"]
[2019/05/01 12:40:24.787 -07:00] [INFO] [unknown:828] ["[region 1859] 1901 [logterm: 6, index: 9] sent MsgRequestVote request to 1862 at term 7"]
[2019/05/01 12:40:24.787 -07:00] [INFO] [unknown:1625] ["[region 1154] 1196 [term 7] received MsgTimeoutNow from 1156 and starts an election to get leadership."]
[2019/05/01 12:40:24.787 -07:00] [INFO] [unknown:739] ["[region 1154] 1196 became candidate at term 8"]
[2019/05/01 12:40:24.787 -07:00] [INFO] [unknown:854] ["[region 1154] 1196 received MsgRequestVoteResponse from 1196 at term 8"]
[2019/05/01 12:40:24.787 -07:00] [INFO] [unknown:828] ["[region 1154] 1196 [logterm: 7, index: 10] sent MsgRequestVote request to 1157 at term 8"]
[2019/05/01 12:40:24.787 -07:00] [INFO] [unknown:828] ["[region 1154] 1196 [logterm: 7, index: 10] sent MsgRequestVote request to 1156 at term 8"]
[2019/05/01 12:40:24.811 -07:00] [INFO] [unknown:1625] ["[region 1642] 1648 [term 6] received MsgTimeoutNow from 1644 and starts an election to get leadership."]
[2019/05/01 12:40:24.811 -07:00] [INFO] [unknown:739] ["[region 1642] 1648 became candidate at term 7"]
[2019/05/01 12:40:24.811 -07:00] [INFO] [unknown:854] ["[region 1642] 1648 received MsgRequestVoteResponse from 1648 at term 7"]
[2019/05/01 12:40:24.811 -07:00] [INFO] [unknown:828] ["[region 1642] 1648 [logterm: 6, index: 9] sent MsgRequestVote request to 1645 at term 7"]
[2019/05/01 12:40:24.811 -07:00] [INFO] [unknown:828] ["[region 1642] 1648 [logterm: 6, index: 9] sent MsgRequestVote request to 1644 at term 7"]
[2019/05/01 12:40:24.836 -07:00] [INFO] [unknown:854] ["[region 1859] 1901 received MsgRequestVoteResponse from 1861 at term 7"]
[2019/05/01 12:40:24.836 -07:00] [INFO] [unknown:1550] ["[region 1859] 1901 [quorum:2] has received 2 MsgRequestVoteResponse votes and 0 vote rejections"]
[2019/05/01 12:40:24.836 -07:00] [INFO] [unknown:854] ["[region 1154] 1196 received MsgRequestVoteResponse from 1156 at term 8"]
[2019/05/01 12:40:24.836 -07:00] [INFO] [unknown:789] ["[region 1859] 1901 became leader at term 7"]
[2019/05/01 12:40:24.836 -07:00] [INFO] [unknown:1550] ["[region 1154] 1196 [quorum:2] has received 2 MsgRequestVoteResponse votes and 0 vote rejections"]
[2019/05/01 12:40:24.836 -07:00] [INFO] [unknown:789] ["[region 1154] 1196 became leader at term 8"]
[2019/05/01 12:40:24.870 -07:00] [INFO] [unknown:854] ["[region 1642] 1648 received MsgRequestVoteResponse from 1645 at term 7"]
[2019/05/01 12:40:24.871 -07:00] [INFO] [unknown:1550] ["[region 1642] 1648 [quorum:2] has received 2 MsgRequestVoteResponse votes and 0 vote rejections"]
[2019/05/01 12:40:24.871 -07:00] [INFO] [unknown:789] ["[region 1642] 1648 became leader at term 7"]
[2019/05/01 12:40:24.879 -07:00] [INFO] [unknown:920] ["[region 129] 273 [term: 7] received a MsgRequestVote message with higher term from 667 [term: 8]"]
[2019/05/01 12:40:24.879 -07:00] [INFO] [unknown:719] ["[region 129] 273 became follower at term 8"]
[2019/05/01 12:40:24.879 -07:00] [INFO] [unknown:1083] ["[region 129] 273 [logterm: 7, index: 13, vote: 0] cast MsgRequestVote for 667 [logterm: 7, index: 13] at term 8"]
[2019/05/01 12:40:25.188 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 2006, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=8] [term=6] [peer_id=2006] [region_id=1671]
[2019/05/01 12:40:25.189 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 6, version: 247, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=2006] [region_id=1671]
[2019/05/01 12:40:25.189 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 1671, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 108, 111, 103, 95, 255, 98, 97, 99, 107, 255, 119, 97, 114, 255, 100, 95, 99, 111, 109, 255, 112, 97, 255, 116, 105, 98, 108, 101, 95, 255, 117, 255, 115, 101, 114, 95, 100, 101, 102, 255, 255, 105, 110, 105, 116, 105, 111, 110, 115, 255, 255, 0, 0, 0, 0, 0, 0, 0, 255, 0, 247, 0, 0, 0, 0, 0, 0, 249], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 108, 111, 103, 95, 255, 98, 105, 110, 0, 254, 0, 0, 0, 252], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 247, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1672, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1673, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1674, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 2006, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 2006, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=2006] [region_id=1671]
[2019/05/01 12:40:25.271 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 1674, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=9] [term=6] [peer_id=2006] [region_id=1671]
[2019/05/01 12:40:25.271 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 7, version: 247, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=2006] [region_id=1671]
[2019/05/01 12:40:25.271 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 1671, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 108, 111, 103, 95, 255, 98, 97, 99, 107, 255, 119, 97, 114, 255, 100, 95, 99, 111, 109, 255, 112, 97, 255, 116, 105, 98, 108, 101, 95, 255, 117, 255, 115, 101, 114, 95, 100, 101, 102, 255, 255, 105, 110, 105, 116, 105, 111, 110, 115, 255, 255, 0, 0, 0, 0, 0, 0, 0, 255, 0, 247, 0, 0, 0, 0, 0, 0, 249], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 108, 111, 103, 95, 255, 98, 105, 110, 0, 254, 0, 0, 0, 252], region_epoch: Some(RegionEpoch { conf_ver: 7, version: 247, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1672, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1673, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1674, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 2006, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1674, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=2006] [region_id=1671]
[2019/05/01 12:40:26.186 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=2049] [region_id=1471]
[2019/05/01 12:40:26.186 -07:00] [INFO] [unknown:719] ["[region 1471] 2049 became follower at term 0"]
[2019/05/01 12:40:26.186 -07:00] [INFO] [unknown:295] ["[region 1471] 2049 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:40:26.186 -07:00] [INFO] [unknown:719] ["[region 1471] 2049 became follower at term 1"]
[2019/05/01 12:40:26.186 -07:00] [INFO] [unknown:920] ["[region 1471] 2049 [term: 1] received a MsgHeartbeat message with higher term from 1474 [term: 6]"]
[2019/05/01 12:40:26.186 -07:00] [INFO] [unknown:719] ["[region 1471] 2049 became follower at term 6"]
[2019/05/01 12:40:26.630 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=2050] [region_id=102]
[2019/05/01 12:40:26.630 -07:00] [INFO] [unknown:719] ["[region 102] 2050 became follower at term 0"]
[2019/05/01 12:40:26.630 -07:00] [INFO] [unknown:295] ["[region 102] 2050 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:40:26.630 -07:00] [INFO] [unknown:719] ["[region 102] 2050 became follower at term 1"]
[2019/05/01 12:40:26.630 -07:00] [INFO] [unknown:920] ["[region 102] 2050 [term: 1] received a MsgHeartbeat message with higher term from 171 [term: 8]"]
[2019/05/01 12:40:26.630 -07:00] [INFO] [unknown:719] ["[region 102] 2050 became follower at term 8"]
[2019/05/01 12:40:27.290 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddLearnerNode, peer: Some(Peer { id: 2051, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=10] [term=6] [peer_id=1696] [region_id=1244]
[2019/05/01 12:40:27.290 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 8, version: 157, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddLearner] [peer_id=1696] [region_id=1244]
[2019/05/01 12:40:27.290 -07:00] [INFO] [apply.rs:1476] ["add learner successfully"] [region="Region { id: 1244, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 102, 255, 116, 95, 115, 255, 111, 114, 116, 95, 112, 255, 108, 108, 255, 95, 100, 101, 103, 114, 101, 255, 101, 255, 0, 0, 0, 0, 0, 0, 0, 248, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 102, 255, 116, 95, 116, 255, 111, 116, 97, 108, 95, 255, 99, 97, 255, 99, 104, 101, 95, 115, 105, 255, 122, 255, 101, 0, 0, 0, 0, 0, 0, 249, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 8, version: 157, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1245, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1247, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1696, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 2051, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1696] [region_id=1244]
[2019/05/01 12:40:28.190 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_1471_6_7_(default|lock|write).sst] [snap_key=1471_6_7]
[2019/05/01 12:40:28.201 -07:00] [INFO] [unknown:1792] ["[region 1471] 2049 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 7, term: 6]"]
[2019/05/01 12:40:28.201 -07:00] [INFO] [unknown:1816] ["[region 1471] 2049 restored progress of 1472 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:40:28.201 -07:00] [INFO] [unknown:1816] ["[region 1471] 2049 restored progress of 1473 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:40:28.201 -07:00] [INFO] [unknown:1816] ["[region 1471] 2049 restored progress of 1474 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:40:28.201 -07:00] [INFO] [unknown:1816] ["[region 1471] 2049 restored progress of 2049 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:40:28.201 -07:00] [INFO] [unknown:474] ["[region 1471] 2049 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 7, term: 6]"]
[2019/05/01 12:40:28.201 -07:00] [INFO] [unknown:1736] ["[region 1471] 2049 [commit: 7] restored snapshot [index: 7, term: 6]"]
[2019/05/01 12:40:28.201 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=2049] [region_id=1471]
[2019/05/01 12:40:28.201 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 7, truncated_state: Some(RaftTruncatedState { index: 7, term: 6, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 1471, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 115, 255, 116, 97, 116, 255, 115, 95, 97, 117, 116, 255, 111, 95, 255, 114, 101, 99, 97, 108, 99, 255, 0, 255, 0, 0, 0, 0, 0, 0, 0, 247, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 115, 255, 116, 97, 116, 255, 115, 95, 109, 101, 116, 255, 104, 111, 255, 100, 0, 0, 0, 0, 0, 250, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 207, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1472, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1473, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1474, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 2049, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=2049] [region_id=1471]
[2019/05/01 12:40:28.222 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 1471] 2049"]
[2019/05/01 12:40:28.222 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 1471, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 115, 255, 116, 97, 116, 255, 115, 95, 97, 117, 116, 255, 111, 95, 255, 114, 101, 99, 97, 108, 99, 255, 0, 255, 0, 0, 0, 0, 0, 0, 0, 247, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 115, 255, 116, 97, 116, 255, 115, 95, 109, 101, 116, 255, 104, 111, 255, 100, 0, 0, 0, 0, 0, 250, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 207, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1472, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1473, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1474, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 2049, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=2049] [region_id=1471]
[2019/05/01 12:40:28.222 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=1471]
[2019/05/01 12:40:28.246 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=24.501405ms] [region_id=1471]
[2019/05/01 12:40:28.649 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_102_8_12_(default|lock|write).sst] [snap_key=102_8_12]
[2019/05/01 12:40:28.656 -07:00] [INFO] [unknown:1792] ["[region 102] 2050 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 12, term: 8]"]
[2019/05/01 12:40:28.656 -07:00] [INFO] [unknown:1816] ["[region 102] 2050 restored progress of 103 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:40:28.656 -07:00] [INFO] [unknown:1816] ["[region 102] 2050 restored progress of 104 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:40:28.656 -07:00] [INFO] [unknown:1816] ["[region 102] 2050 restored progress of 171 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:40:28.656 -07:00] [INFO] [unknown:1816] ["[region 102] 2050 restored progress of 2050 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:40:28.656 -07:00] [INFO] [unknown:474] ["[region 102] 2050 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 12, term: 8]"]
[2019/05/01 12:40:28.656 -07:00] [INFO] [unknown:1736] ["[region 102] 2050 [commit: 12] restored snapshot [index: 12, term: 8]"]
[2019/05/01 12:40:28.656 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=2050] [region_id=102]
[2019/05/01 12:40:28.656 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 12, truncated_state: Some(RaftTruncatedState { index: 12, term: 8, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 102, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 97, 117, 116, 111, 255, 99, 111, 109, 109, 255, 105, 116, 0, 255, 0, 0, 0, 0, 0, 249, 0, 0, 253], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 97, 117, 116, 111, 255, 109, 97, 116, 105, 255, 99, 95, 115, 255, 112, 95, 112, 114, 105, 255, 118, 105, 255, 108, 101, 103, 101, 115, 0, 254, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 17, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 103, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 104, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 171, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 2050, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=2050] [region_id=102]
[2019/05/01 12:40:28.677 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 102, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 97, 117, 116, 111, 255, 99, 111, 109, 109, 255, 105, 116, 0, 255, 0, 0, 0, 0, 0, 249, 0, 0, 253], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 97, 117, 116, 111, 255, 109, 97, 116, 105, 255, 99, 95, 115, 255, 112, 95, 112, 114, 105, 255, 118, 105, 255, 108, 101, 103, 101, 115, 0, 254, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 17, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 103, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 104, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 171, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 2050, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=2050] [region_id=102]
[2019/05/01 12:40:28.677 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 102] 2050"]
[2019/05/01 12:40:28.677 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=102]
[2019/05/01 12:40:28.694 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=16.851648ms] [region_id=102]
[2019/05/01 12:40:29.228 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 2049, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=8] [term=6] [peer_id=2049] [region_id=1471]
[2019/05/01 12:40:29.228 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 6, version: 207, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=2049] [region_id=1471]
[2019/05/01 12:40:29.228 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 1471, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 115, 255, 116, 97, 116, 255, 115, 95, 97, 117, 116, 255, 111, 95, 255, 114, 101, 99, 97, 108, 99, 255, 0, 255, 0, 0, 0, 0, 0, 0, 0, 247, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 115, 255, 116, 97, 116, 255, 115, 95, 109, 101, 116, 255, 104, 111, 255, 100, 0, 0, 0, 0, 0, 250, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 207, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1472, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1473, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1474, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 2049, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 2049, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=2049] [region_id=1471]
[2019/05/01 12:40:29.269 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 1472, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=9] [term=6] [peer_id=2049] [region_id=1471]
[2019/05/01 12:40:29.269 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 7, version: 207, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=2049] [region_id=1471]
[2019/05/01 12:40:29.269 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 1471, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 115, 255, 116, 97, 116, 255, 115, 95, 97, 117, 116, 255, 111, 95, 255, 114, 101, 99, 97, 108, 99, 255, 0, 255, 0, 0, 0, 0, 0, 0, 0, 247, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 115, 255, 116, 97, 116, 255, 115, 95, 109, 101, 116, 255, 104, 111, 255, 100, 0, 0, 0, 0, 0, 250, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 7, version: 207, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1472, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1473, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1474, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 2049, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1472, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=2049] [region_id=1471]
[2019/05/01 12:40:29.675 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 2050, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=13] [term=8] [peer_id=2050] [region_id=102]
[2019/05/01 12:40:29.675 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 6, version: 17, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=2050] [region_id=102]
[2019/05/01 12:40:29.675 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 102, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 97, 117, 116, 111, 255, 99, 111, 109, 109, 255, 105, 116, 0, 255, 0, 0, 0, 0, 0, 249, 0, 0, 253], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 97, 117, 116, 111, 255, 109, 97, 116, 105, 255, 99, 95, 115, 255, 112, 95, 112, 114, 105, 255, 118, 105, 255, 108, 101, 103, 101, 115, 0, 254, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 17, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 103, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 104, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 171, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 2050, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 2050, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=2050] [region_id=102]
[2019/05/01 12:40:29.748 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 103, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=14] [term=8] [peer_id=2050] [region_id=102]
[2019/05/01 12:40:29.748 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 7, version: 17, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=2050] [region_id=102]
[2019/05/01 12:40:29.748 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 102, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 97, 117, 116, 111, 255, 99, 111, 109, 109, 255, 105, 116, 0, 255, 0, 0, 0, 0, 0, 249, 0, 0, 253], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 97, 117, 116, 111, 255, 109, 97, 116, 105, 255, 99, 95, 115, 255, 112, 95, 112, 114, 105, 255, 118, 105, 255, 108, 101, 103, 101, 115, 0, 254, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 7, version: 17, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 103, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 104, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 171, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 2050, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 103, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=2050] [region_id=102]
[2019/05/01 12:40:30.113 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=2054] [region_id=1767]
[2019/05/01 12:40:30.113 -07:00] [INFO] [unknown:719] ["[region 1767] 2054 became follower at term 0"]
[2019/05/01 12:40:30.113 -07:00] [INFO] [unknown:295] ["[region 1767] 2054 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:40:30.113 -07:00] [INFO] [unknown:719] ["[region 1767] 2054 became follower at term 1"]
[2019/05/01 12:40:30.113 -07:00] [INFO] [unknown:920] ["[region 1767] 2054 [term: 1] received a MsgHeartbeat message with higher term from 1769 [term: 6]"]
[2019/05/01 12:40:30.113 -07:00] [INFO] [unknown:719] ["[region 1767] 2054 became follower at term 6"]
[2019/05/01 12:40:30.303 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=2055] [region_id=1384]
[2019/05/01 12:40:30.303 -07:00] [INFO] [unknown:719] ["[region 1384] 2055 became follower at term 0"]
[2019/05/01 12:40:30.303 -07:00] [INFO] [unknown:295] ["[region 1384] 2055 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:40:30.303 -07:00] [INFO] [unknown:719] ["[region 1384] 2055 became follower at term 1"]
[2019/05/01 12:40:30.303 -07:00] [INFO] [unknown:920] ["[region 1384] 2055 [term: 1] received a MsgHeartbeat message with higher term from 1387 [term: 6]"]
[2019/05/01 12:40:30.303 -07:00] [INFO] [unknown:719] ["[region 1384] 2055 became follower at term 6"]
[2019/05/01 12:40:31.474 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 2051, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=11] [term=6] [peer_id=1696] [region_id=1244]
[2019/05/01 12:40:31.474 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 9, version: 157, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=1696] [region_id=1244]
[2019/05/01 12:40:31.474 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 1244, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 102, 255, 116, 95, 115, 255, 111, 114, 116, 95, 112, 255, 108, 108, 255, 95, 100, 101, 103, 114, 101, 255, 101, 255, 0, 0, 0, 0, 0, 0, 0, 248, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 102, 255, 116, 95, 116, 255, 111, 116, 97, 108, 95, 255, 99, 97, 255, 99, 104, 101, 95, 115, 105, 255, 122, 255, 101, 0, 0, 0, 0, 0, 0, 249, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 157, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1245, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1247, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1696, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 2051, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 2051, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1696] [region_id=1244]
[2019/05/01 12:40:31.544 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 1245, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=12] [term=6] [peer_id=1696] [region_id=1244]
[2019/05/01 12:40:31.544 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 10, version: 157, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=1696] [region_id=1244]
[2019/05/01 12:40:31.544 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 1244, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 102, 255, 116, 95, 115, 255, 111, 114, 116, 95, 112, 255, 108, 108, 255, 95, 100, 101, 103, 114, 101, 255, 101, 255, 0, 0, 0, 0, 0, 0, 0, 248, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 102, 255, 116, 95, 116, 255, 111, 116, 97, 108, 95, 255, 99, 97, 255, 99, 104, 101, 95, 115, 105, 255, 122, 255, 101, 0, 0, 0, 0, 0, 0, 249, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 10, version: 157, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1245, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1247, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1696, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 2051, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1245, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1696] [region_id=1244]
[2019/05/01 12:40:32.188 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=2057] [region_id=1638]
[2019/05/01 12:40:32.188 -07:00] [INFO] [unknown:719] ["[region 1638] 2057 became follower at term 0"]
[2019/05/01 12:40:32.188 -07:00] [INFO] [unknown:295] ["[region 1638] 2057 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:40:32.188 -07:00] [INFO] [unknown:719] ["[region 1638] 2057 became follower at term 1"]
[2019/05/01 12:40:32.188 -07:00] [INFO] [unknown:920] ["[region 1638] 2057 [term: 1] received a MsgHeartbeat message with higher term from 1641 [term: 7]"]
[2019/05/01 12:40:32.188 -07:00] [INFO] [unknown:719] ["[region 1638] 2057 became follower at term 7"]
[2019/05/01 12:40:32.252 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_1767_6_7_(default|lock|write).sst] [snap_key=1767_6_7]
[2019/05/01 12:40:32.273 -07:00] [INFO] [unknown:1792] ["[region 1767] 2054 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 7, term: 6]"]
[2019/05/01 12:40:32.274 -07:00] [INFO] [unknown:1816] ["[region 1767] 2054 restored progress of 1768 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:40:32.274 -07:00] [INFO] [unknown:1816] ["[region 1767] 2054 restored progress of 1769 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:40:32.274 -07:00] [INFO] [unknown:1816] ["[region 1767] 2054 restored progress of 1770 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:40:32.274 -07:00] [INFO] [unknown:1816] ["[region 1767] 2054 restored progress of 2054 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:40:32.274 -07:00] [INFO] [unknown:474] ["[region 1767] 2054 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 7, term: 6]"]
[2019/05/01 12:40:32.274 -07:00] [INFO] [unknown:1736] ["[region 1767] 2054 [commit: 7] restored snapshot [index: 7, term: 6]"]
[2019/05/01 12:40:32.274 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=2054] [region_id=1767]
[2019/05/01 12:40:32.274 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 7, truncated_state: Some(RaftTruncatedState { index: 7, term: 6, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 1767, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 108, 111, 110, 103, 255, 95, 113, 117, 101, 255, 114, 121, 95, 255, 116, 105, 109, 101, 0, 254, 0, 0, 253], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 108, 111, 119, 95, 255, 112, 114, 105, 111, 255, 114, 105, 116, 255, 121, 95, 117, 112, 100, 255, 97, 116, 255, 101, 115, 0, 0, 0, 0, 251, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 267, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1768, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1769, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1770, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 2054, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=2054] [region_id=1767]
[2019/05/01 12:40:32.321 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_1384_6_7_(default|lock|write).sst] [snap_key=1384_6_7]
[2019/05/01 12:40:32.348 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 1767] 2054"]
[2019/05/01 12:40:32.348 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=1767]
[2019/05/01 12:40:32.348 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 1767, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 108, 111, 110, 103, 255, 95, 113, 117, 101, 255, 114, 121, 95, 255, 116, 105, 109, 101, 0, 254, 0, 0, 253], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 108, 111, 119, 95, 255, 112, 114, 105, 111, 255, 114, 105, 116, 255, 121, 95, 117, 112, 100, 255, 97, 116, 255, 101, 115, 0, 0, 0, 0, 251, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 267, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1768, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1769, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1770, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 2054, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=2054] [region_id=1767]
[2019/05/01 12:40:32.348 -07:00] [INFO] [unknown:1792] ["[region 1384] 2055 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 7, term: 6]"]
[2019/05/01 12:40:32.348 -07:00] [INFO] [unknown:1816] ["[region 1384] 2055 restored progress of 1385 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:40:32.348 -07:00] [INFO] [unknown:1816] ["[region 1384] 2055 restored progress of 1386 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:40:32.348 -07:00] [INFO] [unknown:1816] ["[region 1384] 2055 restored progress of 1387 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:40:32.348 -07:00] [INFO] [unknown:1816] ["[region 1384] 2055 restored progress of 2055 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:40:32.348 -07:00] [INFO] [unknown:474] ["[region 1384] 2055 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 7, term: 6]"]
[2019/05/01 12:40:32.348 -07:00] [INFO] [unknown:1736] ["[region 1384] 2055 [commit: 7] restored snapshot [index: 7, term: 6]"]
[2019/05/01 12:40:32.348 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=2055] [region_id=1384]
[2019/05/01 12:40:32.348 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 7, truncated_state: Some(RaftTruncatedState { index: 7, term: 6, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 1384, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 111, 255, 110, 108, 105, 255, 110, 101, 95, 97, 108, 255, 116, 101, 255, 114, 95, 108, 111, 103, 95, 255, 109, 255, 97, 120, 95, 115, 105, 122, 101, 255, 255, 0, 0, 0, 0, 0, 0, 0, 0, 255, 247, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 111, 255, 112, 101, 110, 255, 95, 102, 105, 108, 101, 255, 115, 0, 255, 0, 0, 0, 0, 0, 0, 248, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 187, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1385, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1386, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1387, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 2055, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=2055] [region_id=1384]
[2019/05/01 12:40:32.388 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 1384] 2055"]
[2019/05/01 12:40:32.388 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 1384, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 111, 255, 110, 108, 105, 255, 110, 101, 95, 97, 108, 255, 116, 101, 255, 114, 95, 108, 111, 103, 95, 255, 109, 255, 97, 120, 95, 115, 105, 122, 101, 255, 255, 0, 0, 0, 0, 0, 0, 0, 0, 255, 247, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 111, 255, 112, 101, 110, 255, 95, 102, 105, 108, 101, 255, 115, 0, 255, 0, 0, 0, 0, 0, 0, 248, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 187, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1385, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1386, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1387, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 2055, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=2055] [region_id=1384]
[2019/05/01 12:40:32.405 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=56.850412ms] [region_id=1767]
[2019/05/01 12:40:32.405 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=1384]
[2019/05/01 12:40:32.449 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=43.542049ms] [region_id=1384]
[2019/05/01 12:40:33.163 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 2054, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=8] [term=6] [peer_id=2054] [region_id=1767]
[2019/05/01 12:40:33.163 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 6, version: 267, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=2054] [region_id=1767]
[2019/05/01 12:40:33.163 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 1767, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 108, 111, 110, 103, 255, 95, 113, 117, 101, 255, 114, 121, 95, 255, 116, 105, 109, 101, 0, 254, 0, 0, 253], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 108, 111, 119, 95, 255, 112, 114, 105, 111, 255, 114, 105, 116, 255, 121, 95, 117, 112, 100, 255, 97, 116, 255, 101, 115, 0, 0, 0, 0, 251, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 267, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1768, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1769, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1770, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 2054, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 2054, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=2054] [region_id=1767]
[2019/05/01 12:40:33.261 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 1768, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=9] [term=6] [peer_id=2054] [region_id=1767]
[2019/05/01 12:40:33.266 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 7, version: 267, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=2054] [region_id=1767]
[2019/05/01 12:40:33.266 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 1767, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 108, 111, 110, 103, 255, 95, 113, 117, 101, 255, 114, 121, 95, 255, 116, 105, 109, 101, 0, 254, 0, 0, 253], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 108, 111, 119, 95, 255, 112, 114, 105, 111, 255, 114, 105, 116, 255, 121, 95, 117, 112, 100, 255, 97, 116, 255, 101, 115, 0, 0, 0, 0, 251, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 7, version: 267, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1768, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1769, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1770, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 2054, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1768, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=2054] [region_id=1767]
[2019/05/01 12:40:33.388 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 2055, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=8] [term=6] [peer_id=2055] [region_id=1384]
[2019/05/01 12:40:33.388 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 6, version: 187, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=2055] [region_id=1384]
[2019/05/01 12:40:33.388 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 1384, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 111, 255, 110, 108, 105, 255, 110, 101, 95, 97, 108, 255, 116, 101, 255, 114, 95, 108, 111, 103, 95, 255, 109, 255, 97, 120, 95, 115, 105, 122, 101, 255, 255, 0, 0, 0, 0, 0, 0, 0, 0, 255, 247, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 111, 255, 112, 101, 110, 255, 95, 102, 105, 108, 101, 255, 115, 0, 255, 0, 0, 0, 0, 0, 0, 248, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 187, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1385, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1386, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1387, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 2055, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 2055, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=2055] [region_id=1384]
[2019/05/01 12:40:33.497 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 1386, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=9] [term=6] [peer_id=2055] [region_id=1384]
[2019/05/01 12:40:33.497 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 7, version: 187, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=2055] [region_id=1384]
[2019/05/01 12:40:33.497 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 1384, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 111, 255, 110, 108, 105, 255, 110, 101, 95, 97, 108, 255, 116, 101, 255, 114, 95, 108, 111, 103, 95, 255, 109, 255, 97, 120, 95, 115, 105, 122, 101, 255, 255, 0, 0, 0, 0, 0, 0, 0, 0, 255, 247, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 111, 255, 112, 101, 110, 255, 95, 102, 105, 108, 101, 255, 115, 0, 255, 0, 0, 0, 0, 0, 0, 248, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 7, version: 187, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1385, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1386, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1387, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 2055, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1386, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=2055] [region_id=1384]
[2019/05/01 12:40:33.529 -07:00] [INFO] [pd.rs:558] ["try to change peer"] [peer="Peer { id: 2099, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [change_type=AddLearnerNode] [region_id=221]
[2019/05/01 12:40:33.529 -07:00] [INFO] [peer.rs:1953] ["propose conf change peer"] [change_peer=2099] [change_type=AddLearnerNode] [peer_id=1198] [region_id=221]
[2019/05/01 12:40:33.583 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddLearnerNode, peer: Some(Peer { id: 2099, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=12] [term=8] [peer_id=1198] [region_id=221]
[2019/05/01 12:40:33.583 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 8, version: 27, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddLearner] [peer_id=1198] [region_id=221]
[2019/05/01 12:40:33.583 -07:00] [INFO] [apply.rs:1476] ["add learner successfully"] [region="Region { id: 221, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 95, 100, 255, 105, 114, 101, 255, 99, 116, 95, 110, 111, 255, 110, 95, 255, 116, 114, 97, 110, 115, 97, 255, 99, 255, 116, 105, 111, 110, 97, 108, 95, 255, 255, 117, 112, 100, 97, 116, 101, 115, 0, 255, 254, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 95, 101, 255, 114, 114, 111, 255, 114, 95, 97, 99, 116, 255, 105, 111, 255, 110, 0, 0, 0, 0, 0, 250, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 8, version: 27, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 223, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 224, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1198, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 2099, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1198] [region_id=221]
[2019/05/01 12:40:33.600 -07:00] [INFO] [peer.rs:1318] ["notify pd with change peer region"] [region="Region { id: 221, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 95, 100, 255, 105, 114, 101, 255, 99, 116, 95, 110, 111, 255, 110, 95, 255, 116, 114, 97, 110, 115, 97, 255, 99, 255, 116, 105, 111, 110, 97, 108, 95, 255, 255, 117, 112, 100, 97, 116, 101, 115, 0, 255, 254, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 95, 101, 255, 114, 114, 111, 255, 114, 95, 97, 99, 116, 255, 105, 111, 255, 110, 0, 0, 0, 0, 0, 250, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 27, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 223, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 224, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1198, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 2099, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1198] [region_id=221]
[2019/05/01 12:40:34.191 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_1638_7_8_(default|lock|write).sst] [snap_key=1638_7_8]
[2019/05/01 12:40:34.203 -07:00] [INFO] [unknown:1792] ["[region 1638] 2057 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 8, term: 7]"]
[2019/05/01 12:40:34.203 -07:00] [INFO] [unknown:1816] ["[region 1638] 2057 restored progress of 1639 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:40:34.203 -07:00] [INFO] [unknown:1816] ["[region 1638] 2057 restored progress of 1640 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:40:34.203 -07:00] [INFO] [unknown:1816] ["[region 1638] 2057 restored progress of 1641 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:40:34.203 -07:00] [INFO] [unknown:1816] ["[region 1638] 2057 restored progress of 2057 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:40:34.203 -07:00] [INFO] [unknown:474] ["[region 1638] 2057 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 8, term: 7]"]
[2019/05/01 12:40:34.203 -07:00] [INFO] [unknown:1736] ["[region 1638] 2057 [commit: 8] restored snapshot [index: 8, term: 7]"]
[2019/05/01 12:40:34.203 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=2057] [region_id=1638]
[2019/05/01 12:40:34.203 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 8, truncated_state: Some(RaftTruncatedState { index: 8, term: 7, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 1638, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 108, 99, 95, 109, 255, 101, 115, 115, 97, 255, 103, 101, 115, 255, 95, 100, 105, 114, 0, 254, 0, 0, 253], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 108, 99, 95, 116, 255, 105, 109, 101, 95, 255, 110, 97, 109, 255, 101, 115, 0, 0, 0, 252, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 237, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1639, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1640, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1641, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 2057, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=2057] [region_id=1638]
[2019/05/01 12:40:34.236 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 1638, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 108, 99, 95, 109, 255, 101, 115, 115, 97, 255, 103, 101, 115, 255, 95, 100, 105, 114, 0, 254, 0, 0, 253], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 108, 99, 95, 116, 255, 105, 109, 101, 95, 255, 110, 97, 109, 255, 101, 115, 0, 0, 0, 252, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 237, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1639, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1640, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1641, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 2057, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=2057] [region_id=1638]
[2019/05/01 12:40:34.236 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 1638] 2057"]
[2019/05/01 12:40:34.236 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=1638]
[2019/05/01 12:40:34.282 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=45.087472ms] [region_id=1638]
[2019/05/01 12:40:35.293 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 2057, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=9] [term=7] [peer_id=2057] [region_id=1638]
[2019/05/01 12:40:35.294 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 6, version: 237, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=2057] [region_id=1638]
[2019/05/01 12:40:35.294 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 1638, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 108, 99, 95, 109, 255, 101, 115, 115, 97, 255, 103, 101, 115, 255, 95, 100, 105, 114, 0, 254, 0, 0, 253], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 108, 99, 95, 116, 255, 105, 109, 101, 95, 255, 110, 97, 109, 255, 101, 115, 0, 0, 0, 252, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 237, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1639, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1640, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1641, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 2057, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 2057, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=2057] [region_id=1638]
[2019/05/01 12:40:35.294 -07:00] [INFO] [peer_storage.rs:759] ["requesting snapshot"] [peer_id=1198] [region_id=221]
[2019/05/01 12:40:35.295 -07:00] [INFO] [snap.rs:757] ["scan snapshot of one cf"] [size=0] [key_count=0] [cf=default] [snapshot=/opt/tidb/data/kv/snap/gen_221_8_12_(default|lock|write).sst] [region_id=221]
[2019/05/01 12:40:35.295 -07:00] [INFO] [snap.rs:757] ["scan snapshot of one cf"] [size=0] [key_count=0] [cf=lock] [snapshot=/opt/tidb/data/kv/snap/gen_221_8_12_(default|lock|write).sst] [region_id=221]
[2019/05/01 12:40:35.295 -07:00] [INFO] [snap.rs:757] ["scan snapshot of one cf"] [size=210] [key_count=2] [cf=write] [snapshot=/opt/tidb/data/kv/snap/gen_221_8_12_(default|lock|write).sst] [region_id=221]
[2019/05/01 12:40:35.334 -07:00] [INFO] [snap.rs:875] ["scan snapshot"] [takes=39.002318ms] [size=1523] [key_count=2] [snapshot=/opt/tidb/data/kv/snap/gen_221_8_12_(default|lock|write).sst] [region_id=221]
[2019/05/01 12:40:35.427 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 1640, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=10] [term=7] [peer_id=2057] [region_id=1638]
[2019/05/01 12:40:35.427 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 7, version: 237, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=2057] [region_id=1638]
[2019/05/01 12:40:35.427 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 1638, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 108, 99, 95, 109, 255, 101, 115, 115, 97, 255, 103, 101, 115, 255, 95, 100, 105, 114, 0, 254, 0, 0, 253], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 108, 99, 95, 116, 255, 105, 109, 101, 95, 255, 110, 97, 109, 255, 101, 115, 0, 0, 0, 252, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 7, version: 237, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1639, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1640, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1641, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 2057, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1640, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=2057] [region_id=1638]
[2019/05/01 12:40:35.611 -07:00] [INFO] [unknown:1625] ["[region 1671] 2006 [term 6] received MsgTimeoutNow from 1673 and starts an election to get leadership."]
[2019/05/01 12:40:35.611 -07:00] [INFO] [unknown:739] ["[region 1671] 2006 became candidate at term 7"]
[2019/05/01 12:40:35.611 -07:00] [INFO] [unknown:854] ["[region 1671] 2006 received MsgRequestVoteResponse from 2006 at term 7"]
[2019/05/01 12:40:35.611 -07:00] [INFO] [unknown:828] ["[region 1671] 2006 [logterm: 6, index: 9] sent MsgRequestVote request to 1672 at term 7"]
[2019/05/01 12:40:35.611 -07:00] [INFO] [unknown:828] ["[region 1671] 2006 [logterm: 6, index: 9] sent MsgRequestVote request to 1673 at term 7"]
[2019/05/01 12:40:35.660 -07:00] [INFO] [unknown:854] ["[region 1671] 2006 received MsgRequestVoteResponse from 1673 at term 7"]
[2019/05/01 12:40:35.660 -07:00] [INFO] [unknown:1550] ["[region 1671] 2006 [quorum:2] has received 2 MsgRequestVoteResponse votes and 0 vote rejections"]
[2019/05/01 12:40:35.660 -07:00] [INFO] [unknown:789] ["[region 1671] 2006 became leader at term 7"]
[2019/05/01 12:40:36.434 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=2100] [region_id=1463]
[2019/05/01 12:40:36.438 -07:00] [INFO] [unknown:719] ["[region 1463] 2100 became follower at term 0"]
[2019/05/01 12:40:36.438 -07:00] [INFO] [unknown:295] ["[region 1463] 2100 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:40:36.438 -07:00] [INFO] [unknown:719] ["[region 1463] 2100 became follower at term 1"]
[2019/05/01 12:40:36.438 -07:00] [INFO] [unknown:920] ["[region 1463] 2100 [term: 1] received a MsgHeartbeat message with higher term from 1464 [term: 7]"]
[2019/05/01 12:40:36.438 -07:00] [INFO] [unknown:719] ["[region 1463] 2100 became follower at term 7"]
[2019/05/01 12:40:37.301 -07:00] [INFO] [unknown:841] ["New connected subchannel at 0x7f041120c800 for subchannel 0x7f04cf841c00"]
[2019/05/01 12:40:37.309 -07:00] [INFO] [snap.rs:389] ["sent snapshot"] [duration=8.556183ms] [size=1523] [snap_key=221_8_12] [region_id=221]
[2019/05/01 12:40:37.309 -07:00] [INFO] [peer.rs:538] ["report snapshot status"] [status=Finish] [to="Peer { id: 2099, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1198] [region_id=221]
[2019/05/01 12:40:37.407 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddLearnerNode, peer: Some(Peer { id: 2102, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=10] [term=6] [peer_id=1410] [region_id=796]
[2019/05/01 12:40:37.407 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 8, version: 97, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddLearner] [peer_id=1410] [region_id=796]
[2019/05/01 12:40:37.407 -07:00] [INFO] [apply.rs:1476] ["add learner successfully"] [region="Region { id: 796, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 104, 97, 118, 101, 255, 95, 114, 116, 114, 255, 101, 101, 95, 255, 107, 101, 121, 115, 0, 254, 0, 0, 253], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 104, 97, 118, 101, 255, 95, 115, 115, 108, 255, 0, 0, 0, 255, 0, 0, 0, 0, 0, 247, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 8, version: 97, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 797, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 799, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1410, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 2102, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1410] [region_id=796]
[2019/05/01 12:40:37.654 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=2101] [region_id=509]
[2019/05/01 12:40:37.654 -07:00] [INFO] [unknown:719] ["[region 509] 2101 became follower at term 0"]
[2019/05/01 12:40:37.654 -07:00] [INFO] [unknown:295] ["[region 509] 2101 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:40:37.654 -07:00] [INFO] [unknown:719] ["[region 509] 2101 became follower at term 1"]
[2019/05/01 12:40:37.654 -07:00] [INFO] [unknown:920] ["[region 509] 2101 [term: 1] received a MsgHeartbeat message with higher term from 510 [term: 8]"]
[2019/05/01 12:40:37.654 -07:00] [INFO] [unknown:719] ["[region 509] 2101 became follower at term 8"]
[2019/05/01 12:40:38.301 -07:00] [INFO] [pd.rs:558] ["try to change peer"] [peer="Peer { id: 2099, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [change_type=AddNode] [region_id=221]
[2019/05/01 12:40:38.301 -07:00] [INFO] [peer.rs:1953] ["propose conf change peer"] [change_peer=2099] [change_type=AddNode] [peer_id=1198] [region_id=221]
[2019/05/01 12:40:38.360 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 2099, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=13] [term=8] [peer_id=1198] [region_id=221]
[2019/05/01 12:40:38.360 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 9, version: 27, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=1198] [region_id=221]
[2019/05/01 12:40:38.360 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 221, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 95, 100, 255, 105, 114, 101, 255, 99, 116, 95, 110, 111, 255, 110, 95, 255, 116, 114, 97, 110, 115, 97, 255, 99, 255, 116, 105, 111, 110, 97, 108, 95, 255, 255, 117, 112, 100, 97, 116, 101, 115, 0, 255, 254, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 95, 101, 255, 114, 114, 111, 255, 114, 95, 97, 99, 116, 255, 105, 111, 255, 110, 0, 0, 0, 0, 0, 250, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 27, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 223, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 224, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1198, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 2099, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 2099, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1198] [region_id=221]
[2019/05/01 12:40:38.382 -07:00] [INFO] [peer.rs:1318] ["notify pd with change peer region"] [region="Region { id: 221, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 95, 100, 255, 105, 114, 101, 255, 99, 116, 95, 110, 111, 255, 110, 95, 255, 116, 114, 97, 110, 115, 97, 255, 99, 255, 116, 105, 111, 110, 97, 108, 95, 255, 255, 117, 112, 100, 97, 116, 101, 115, 0, 255, 254, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 95, 101, 255, 114, 114, 111, 255, 114, 95, 97, 99, 116, 255, 105, 111, 255, 110, 0, 0, 0, 0, 0, 250, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 10, version: 27, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 223, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 224, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1198, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 2099, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1198] [region_id=221]
[2019/05/01 12:40:38.403 -07:00] [INFO] [pd.rs:558] ["try to change peer"] [peer="Peer { id: 223, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [change_type=RemoveNode] [region_id=221]
[2019/05/01 12:40:38.403 -07:00] [INFO] [peer.rs:1953] ["propose conf change peer"] [change_peer=223] [change_type=RemoveNode] [peer_id=1198] [region_id=221]
[2019/05/01 12:40:38.421 -07:00] [INFO] [pd.rs:558] ["try to change peer"] [peer="Peer { id: 223, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [change_type=RemoveNode] [region_id=221]
[2019/05/01 12:40:38.445 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_1463_7_8_(default|lock|write).sst] [snap_key=1463_7_8]
[2019/05/01 12:40:38.466 -07:00] [INFO] [peer.rs:1927] ["there is a pending conf change, try later"] [peer_id=1198] [region_id=221]
[2019/05/01 12:40:38.466 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 223, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=14] [term=8] [peer_id=1198] [region_id=221]
[2019/05/01 12:40:38.466 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 10, version: 27, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=1198] [region_id=221]
[2019/05/01 12:40:38.466 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 221, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 95, 100, 255, 105, 114, 101, 255, 99, 116, 95, 110, 111, 255, 110, 95, 255, 116, 114, 97, 110, 115, 97, 255, 99, 255, 116, 105, 111, 110, 97, 108, 95, 255, 255, 117, 112, 100, 97, 116, 101, 115, 0, 255, 254, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 95, 101, 255, 114, 114, 111, 255, 114, 95, 97, 99, 116, 255, 105, 111, 255, 110, 0, 0, 0, 0, 0, 250, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 10, version: 27, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 223, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 224, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1198, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 2099, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 223, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1198] [region_id=221]
[2019/05/01 12:40:38.466 -07:00] [INFO] [unknown:1792] ["[region 1463] 2100 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 8, term: 7]"]
[2019/05/01 12:40:38.466 -07:00] [INFO] [unknown:1816] ["[region 1463] 2100 restored progress of 1464 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:40:38.466 -07:00] [INFO] [unknown:1816] ["[region 1463] 2100 restored progress of 1465 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:40:38.466 -07:00] [INFO] [unknown:1816] ["[region 1463] 2100 restored progress of 1466 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:40:38.466 -07:00] [INFO] [unknown:1816] ["[region 1463] 2100 restored progress of 2100 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:40:38.466 -07:00] [INFO] [unknown:474] ["[region 1463] 2100 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 8, term: 7]"]
[2019/05/01 12:40:38.466 -07:00] [INFO] [unknown:1736] ["[region 1463] 2100 [commit: 8] restored snapshot [index: 8, term: 7]"]
[2019/05/01 12:40:38.466 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=2100] [region_id=1463]
[2019/05/01 12:40:38.466 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 8, truncated_state: Some(RaftTruncatedState { index: 8, term: 7, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 1463, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 115, 255, 111, 114, 116, 255, 95, 98, 117, 102, 102, 255, 101, 114, 255, 95, 115, 105, 122, 101, 0, 254, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 115, 255, 112, 105, 110, 255, 95, 119, 97, 105, 116, 255, 95, 100, 255, 101, 108, 97, 121, 0, 0, 253, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 207, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1464, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1465, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1466, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 2100, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=2100] [region_id=1463]
[2019/05/01 12:40:38.490 -07:00] [INFO] [peer.rs:1318] ["notify pd with change peer region"] [region="Region { id: 221, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 95, 100, 255, 105, 114, 101, 255, 99, 116, 95, 110, 111, 255, 110, 95, 255, 116, 114, 97, 110, 115, 97, 255, 99, 255, 116, 105, 111, 110, 97, 108, 95, 255, 255, 117, 112, 100, 97, 116, 101, 115, 0, 255, 254, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 98, 105, 110, 108, 255, 111, 103, 95, 101, 255, 114, 114, 111, 255, 114, 95, 97, 99, 116, 255, 105, 111, 255, 110, 0, 0, 0, 0, 0, 250, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 11, version: 27, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 224, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1198, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 2099, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1198] [region_id=221]
[2019/05/01 12:40:38.528 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 1463] 2100"]
[2019/05/01 12:40:38.528 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 1463, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 115, 255, 111, 114, 116, 255, 95, 98, 117, 102, 102, 255, 101, 114, 255, 95, 115, 105, 122, 101, 0, 254, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 115, 255, 112, 105, 110, 255, 95, 119, 97, 105, 116, 255, 95, 100, 255, 101, 108, 97, 121, 0, 0, 253, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 207, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1464, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1465, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1466, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 2100, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=2100] [region_id=1463]
[2019/05/01 12:40:38.528 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=1463]
[2019/05/01 12:40:38.574 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=45.438081ms] [region_id=1463]
[2019/05/01 12:40:39.470 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 2100, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=9] [term=7] [peer_id=2100] [region_id=1463]
[2019/05/01 12:40:39.470 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 6, version: 207, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=2100] [region_id=1463]
[2019/05/01 12:40:39.470 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 1463, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 115, 255, 111, 114, 116, 255, 95, 98, 117, 102, 102, 255, 101, 114, 255, 95, 115, 105, 122, 101, 0, 254, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 115, 255, 112, 105, 110, 255, 95, 119, 97, 105, 116, 255, 95, 100, 255, 101, 108, 97, 121, 0, 0, 253, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 207, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1464, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1465, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1466, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 2100, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 2100, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=2100] [region_id=1463]
[2019/05/01 12:40:39.538 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 1465, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=10] [term=7] [peer_id=2100] [region_id=1463]
[2019/05/01 12:40:39.538 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 7, version: 207, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=2100] [region_id=1463]
[2019/05/01 12:40:39.538 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 1463, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 115, 255, 111, 114, 116, 255, 95, 98, 117, 102, 102, 255, 101, 114, 255, 95, 115, 105, 122, 101, 0, 254, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 115, 255, 112, 105, 110, 255, 95, 119, 97, 105, 116, 255, 95, 100, 255, 101, 108, 97, 121, 0, 0, 253, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 7, version: 207, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1464, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1465, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1466, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 2100, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1465, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=2100] [region_id=1463]
[2019/05/01 12:40:39.658 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_509_8_9_(default|lock|write).sst] [snap_key=509_8_9]
[2019/05/01 12:40:39.664 -07:00] [INFO] [unknown:1792] ["[region 509] 2101 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 9, term: 8]"]
[2019/05/01 12:40:39.664 -07:00] [INFO] [unknown:1816] ["[region 509] 2101 restored progress of 510 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:40:39.664 -07:00] [INFO] [unknown:1816] ["[region 509] 2101 restored progress of 511 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:40:39.664 -07:00] [INFO] [unknown:1816] ["[region 509] 2101 restored progress of 512 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:40:39.664 -07:00] [INFO] [unknown:1816] ["[region 509] 2101 restored progress of 2101 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:40:39.664 -07:00] [INFO] [unknown:474] ["[region 509] 2101 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 9, term: 8]"]
[2019/05/01 12:40:39.664 -07:00] [INFO] [unknown:1736] ["[region 509] 2101 [commit: 9] restored snapshot [index: 9, term: 8]"]
[2019/05/01 12:40:39.664 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=2101] [region_id=509]
[2019/05/01 12:40:39.664 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 9, truncated_state: Some(RaftTruncatedState { index: 9, term: 8, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 509, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 100, 105, 118, 95, 255, 112, 114, 101, 99, 255, 105, 115, 105, 255, 111, 110, 95, 105, 110, 255, 99, 114, 255, 101, 109, 101, 110, 116, 0, 254, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 101, 110, 100, 95, 255, 109, 97, 114, 107, 255, 101, 114, 115, 255, 95, 105, 110, 95, 106, 255, 115, 111, 255, 110, 0, 0, 0, 0, 0, 250, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 67, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 510, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 511, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 512, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 2101, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=2101] [region_id=509]
[2019/05/01 12:40:39.680 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 509] 2101"]
[2019/05/01 12:40:39.680 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 509, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 100, 105, 118, 95, 255, 112, 114, 101, 99, 255, 105, 115, 105, 255, 111, 110, 95, 105, 110, 255, 99, 114, 255, 101, 109, 101, 110, 116, 0, 254, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 101, 110, 100, 95, 255, 109, 97, 114, 107, 255, 101, 114, 115, 255, 95, 105, 110, 95, 106, 255, 115, 111, 255, 110, 0, 0, 0, 0, 0, 250, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 67, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 510, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 511, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 512, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 2101, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=2101] [region_id=509]
[2019/05/01 12:40:39.680 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=509]
[2019/05/01 12:40:39.711 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=30.776323ms] [region_id=509]
[2019/05/01 12:40:40.205 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=2103] [region_id=456]
[2019/05/01 12:40:40.205 -07:00] [INFO] [unknown:719] ["[region 456] 2103 became follower at term 0"]
[2019/05/01 12:40:40.205 -07:00] [INFO] [unknown:295] ["[region 456] 2103 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:40:40.205 -07:00] [INFO] [unknown:719] ["[region 456] 2103 became follower at term 1"]
[2019/05/01 12:40:40.205 -07:00] [INFO] [unknown:920] ["[region 456] 2103 [term: 1] received a MsgHeartbeat message with higher term from 1313 [term: 8]"]
[2019/05/01 12:40:40.205 -07:00] [INFO] [unknown:719] ["[region 456] 2103 became follower at term 8"]
[2019/05/01 12:40:40.707 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 2101, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=10] [term=8] [peer_id=2101] [region_id=509]
[2019/05/01 12:40:40.707 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 6, version: 67, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=2101] [region_id=509]
[2019/05/01 12:40:40.707 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 509, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 100, 105, 118, 95, 255, 112, 114, 101, 99, 255, 105, 115, 105, 255, 111, 110, 95, 105, 110, 255, 99, 114, 255, 101, 109, 101, 110, 116, 0, 254, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 101, 110, 100, 95, 255, 109, 97, 114, 107, 255, 101, 114, 115, 255, 95, 105, 110, 95, 106, 255, 115, 111, 255, 110, 0, 0, 0, 0, 0, 250, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 67, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 510, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 511, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 512, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 2101, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 2101, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=2101] [region_id=509]
[2019/05/01 12:40:40.793 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 512, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=11] [term=8] [peer_id=2101] [region_id=509]
[2019/05/01 12:40:40.793 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 7, version: 67, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=2101] [region_id=509]
[2019/05/01 12:40:40.793 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 509, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 100, 105, 118, 95, 255, 112, 114, 101, 99, 255, 105, 115, 105, 255, 111, 110, 95, 105, 110, 255, 99, 114, 255, 101, 109, 101, 110, 116, 0, 254, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 101, 110, 100, 95, 255, 109, 97, 114, 107, 255, 101, 114, 115, 255, 95, 105, 110, 95, 106, 255, 115, 111, 255, 110, 0, 0, 0, 0, 0, 250, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 7, version: 67, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 510, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 511, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 512, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 2101, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 512, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=2101] [region_id=509]
[2019/05/01 12:40:41.464 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 2102, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=11] [term=6] [peer_id=1410] [region_id=796]
[2019/05/01 12:40:41.464 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 9, version: 97, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=1410] [region_id=796]
[2019/05/01 12:40:41.464 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 796, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 104, 97, 118, 101, 255, 95, 114, 116, 114, 255, 101, 101, 95, 255, 107, 101, 121, 115, 0, 254, 0, 0, 253], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 104, 97, 118, 101, 255, 95, 115, 115, 108, 255, 0, 0, 0, 255, 0, 0, 0, 0, 0, 247, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 97, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 797, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 799, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1410, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 2102, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 2102, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1410] [region_id=796]
[2019/05/01 12:40:41.532 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 799, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=12] [term=6] [peer_id=1410] [region_id=796]
[2019/05/01 12:40:41.532 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 10, version: 97, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=1410] [region_id=796]
[2019/05/01 12:40:41.532 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 796, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 104, 97, 118, 101, 255, 95, 114, 116, 114, 255, 101, 101, 95, 255, 107, 101, 121, 115, 0, 254, 0, 0, 253], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 104, 97, 118, 101, 255, 95, 115, 115, 108, 255, 0, 0, 0, 255, 0, 0, 0, 0, 0, 247, 0, 0, 253], region_epoch: Some(RegionEpoch { conf_ver: 10, version: 97, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 797, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 799, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1410, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 2102, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 799, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1410] [region_id=796]
[2019/05/01 12:40:42.211 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=2105] [region_id=1614]
[2019/05/01 12:40:42.211 -07:00] [INFO] [unknown:719] ["[region 1614] 2105 became follower at term 0"]
[2019/05/01 12:40:42.211 -07:00] [INFO] [unknown:295] ["[region 1614] 2105 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:40:42.211 -07:00] [INFO] [unknown:719] ["[region 1614] 2105 became follower at term 1"]
[2019/05/01 12:40:42.211 -07:00] [INFO] [unknown:920] ["[region 1614] 2105 [term: 1] received a MsgHeartbeat message with higher term from 1616 [term: 6]"]
[2019/05/01 12:40:42.211 -07:00] [INFO] [unknown:719] ["[region 1614] 2105 became follower at term 6"]
[2019/05/01 12:40:42.237 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_456_8_12_(default|lock|write).sst] [snap_key=456_8_12]
[2019/05/01 12:40:42.244 -07:00] [INFO] [unknown:1792] ["[region 456] 2103 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 12, term: 8]"]
[2019/05/01 12:40:42.244 -07:00] [INFO] [unknown:1816] ["[region 456] 2103 restored progress of 457 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:40:42.244 -07:00] [INFO] [unknown:1816] ["[region 456] 2103 restored progress of 459 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:40:42.244 -07:00] [INFO] [unknown:1816] ["[region 456] 2103 restored progress of 1313 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:40:42.244 -07:00] [INFO] [unknown:1816] ["[region 456] 2103 restored progress of 2103 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:40:42.244 -07:00] [INFO] [unknown:474] ["[region 456] 2103 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 12, term: 8]"]
[2019/05/01 12:40:42.244 -07:00] [INFO] [unknown:1736] ["[region 456] 2103 [commit: 12] restored snapshot [index: 12, term: 8]"]
[2019/05/01 12:40:42.244 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=2103] [region_id=456]
[2019/05/01 12:40:42.244 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 12, truncated_state: Some(RaftTruncatedState { index: 12, term: 8, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 456, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 100, 97, 116, 101, 255, 116, 105, 109, 101, 255, 95, 102, 111, 255, 114, 109, 97, 116, 0, 254, 0, 0, 253], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 100, 101, 98, 117, 255, 103, 0, 0, 0, 252, 0, 0, 0, 252], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 57, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 457, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 459, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1313, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 2103, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=2103] [region_id=456]
[2019/05/01 12:40:42.269 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 456, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 100, 97, 116, 101, 255, 116, 105, 109, 101, 255, 95, 102, 111, 255, 114, 109, 97, 116, 0, 254, 0, 0, 253], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 100, 101, 98, 117, 255, 103, 0, 0, 0, 252, 0, 0, 0, 252], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 57, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 457, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 459, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1313, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 2103, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=2103] [region_id=456]
[2019/05/01 12:40:42.269 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 456] 2103"]
[2019/05/01 12:40:42.269 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=456]
[2019/05/01 12:40:42.307 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=37.447566ms] [region_id=456]
[2019/05/01 12:40:43.289 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 2103, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=13] [term=8] [peer_id=2103] [region_id=456]
[2019/05/01 12:40:43.289 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 9, version: 57, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=2103] [region_id=456]
[2019/05/01 12:40:43.290 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 456, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 100, 97, 116, 101, 255, 116, 105, 109, 101, 255, 95, 102, 111, 255, 114, 109, 97, 116, 0, 254, 0, 0, 253], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 100, 101, 98, 117, 255, 103, 0, 0, 0, 252, 0, 0, 0, 252], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 57, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 457, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 459, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1313, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 2103, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 2103, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=2103] [region_id=456]
[2019/05/01 12:40:43.342 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 459, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=14] [term=8] [peer_id=2103] [region_id=456]
[2019/05/01 12:40:43.342 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 10, version: 57, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=2103] [region_id=456]
[2019/05/01 12:40:43.342 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 456, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 100, 97, 116, 101, 255, 116, 105, 109, 101, 255, 95, 102, 111, 255, 114, 109, 97, 116, 0, 254, 0, 0, 253], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 100, 101, 98, 117, 255, 103, 0, 0, 0, 252, 0, 0, 0, 252], region_epoch: Some(RegionEpoch { conf_ver: 10, version: 57, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 457, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 459, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1313, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 2103, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 459, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=2103] [region_id=456]
[2019/05/01 12:40:44.097 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=2147] [region_id=1811]
[2019/05/01 12:40:44.097 -07:00] [INFO] [unknown:719] ["[region 1811] 2147 became follower at term 0"]
[2019/05/01 12:40:44.097 -07:00] [INFO] [unknown:295] ["[region 1811] 2147 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:40:44.097 -07:00] [INFO] [unknown:719] ["[region 1811] 2147 became follower at term 1"]
[2019/05/01 12:40:44.097 -07:00] [INFO] [unknown:920] ["[region 1811] 2147 [term: 1] received a MsgHeartbeat message with higher term from 1813 [term: 6]"]
[2019/05/01 12:40:44.097 -07:00] [INFO] [unknown:719] ["[region 1811] 2147 became follower at term 6"]
[2019/05/01 12:40:44.214 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_1614_6_7_(default|lock|write).sst] [snap_key=1614_6_7]
[2019/05/01 12:40:44.222 -07:00] [INFO] [unknown:1792] ["[region 1614] 2105 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 7, term: 6]"]
[2019/05/01 12:40:44.222 -07:00] [INFO] [unknown:1816] ["[region 1614] 2105 restored progress of 1615 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:40:44.222 -07:00] [INFO] [unknown:1816] ["[region 1614] 2105 restored progress of 1616 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:40:44.222 -07:00] [INFO] [unknown:1816] ["[region 1614] 2105 restored progress of 1617 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:40:44.222 -07:00] [INFO] [unknown:1816] ["[region 1614] 2105 restored progress of 2105 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:40:44.222 -07:00] [INFO] [unknown:474] ["[region 1614] 2105 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 7, term: 6]"]
[2019/05/01 12:40:44.222 -07:00] [INFO] [unknown:1736] ["[region 1614] 2105 [commit: 7] restored snapshot [index: 7, term: 6]"]
[2019/05/01 12:40:44.222 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=2105] [region_id=1614]
[2019/05/01 12:40:44.222 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 7, truncated_state: Some(RaftTruncatedState { index: 7, term: 6, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 1614, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 107, 101, 121, 95, 255, 99, 97, 99, 104, 255, 101, 95, 98, 255, 108, 111, 99, 107, 95, 255, 115, 105, 255, 122, 101, 0, 0, 0, 0, 251, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 107, 101, 121, 95, 255, 99, 97, 99, 104, 255, 101, 95, 100, 255, 105, 118, 105, 115, 105, 255, 111, 110, 255, 95, 108, 105, 109, 105, 116, 255, 0, 255, 0, 0, 0, 0, 0, 0, 0, 247, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 237, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1615, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1616, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1617, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 2105, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=2105] [region_id=1614]
[2019/05/01 12:40:44.240 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=1614]
[2019/05/01 12:40:44.240 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 1614, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 107, 101, 121, 95, 255, 99, 97, 99, 104, 255, 101, 95, 98, 255, 108, 111, 99, 107, 95, 255, 115, 105, 255, 122, 101, 0, 0, 0, 0, 251, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 107, 101, 121, 95, 255, 99, 97, 99, 104, 255, 101, 95, 100, 255, 105, 118, 105, 115, 105, 255, 111, 110, 255, 95, 108, 105, 109, 105, 116, 255, 0, 255, 0, 0, 0, 0, 0, 0, 0, 247, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 237, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1615, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1616, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1617, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 2105, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=2105] [region_id=1614]
[2019/05/01 12:40:44.240 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 1614] 2105"]
[2019/05/01 12:40:44.256 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=16.111291ms] [region_id=1614]
[2019/05/01 12:40:44.268 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=2148] [region_id=1517]
[2019/05/01 12:40:44.268 -07:00] [INFO] [unknown:719] ["[region 1517] 2148 became follower at term 0"]
[2019/05/01 12:40:44.268 -07:00] [INFO] [unknown:295] ["[region 1517] 2148 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:40:44.268 -07:00] [INFO] [unknown:719] ["[region 1517] 2148 became follower at term 1"]
[2019/05/01 12:40:44.268 -07:00] [INFO] [unknown:920] ["[region 1517] 2148 [term: 1] received a MsgHeartbeat message with higher term from 1520 [term: 6]"]
[2019/05/01 12:40:44.268 -07:00] [INFO] [unknown:719] ["[region 1517] 2148 became follower at term 6"]
[2019/05/01 12:40:45.242 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 2105, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=8] [term=6] [peer_id=2105] [region_id=1614]
[2019/05/01 12:40:45.242 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 6, version: 237, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=2105] [region_id=1614]
[2019/05/01 12:40:45.242 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 1614, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 107, 101, 121, 95, 255, 99, 97, 99, 104, 255, 101, 95, 98, 255, 108, 111, 99, 107, 95, 255, 115, 105, 255, 122, 101, 0, 0, 0, 0, 251, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 107, 101, 121, 95, 255, 99, 97, 99, 104, 255, 101, 95, 100, 255, 105, 118, 105, 115, 105, 255, 111, 110, 255, 95, 108, 105, 109, 105, 116, 255, 0, 255, 0, 0, 0, 0, 0, 0, 0, 247, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 237, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1615, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1616, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1617, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 2105, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 2105, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=2105] [region_id=1614]
[2019/05/01 12:40:45.311 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 1617, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=9] [term=6] [peer_id=2105] [region_id=1614]
[2019/05/01 12:40:45.311 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 7, version: 237, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=2105] [region_id=1614]
[2019/05/01 12:40:45.311 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 1614, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 107, 101, 121, 95, 255, 99, 97, 99, 104, 255, 101, 95, 98, 255, 108, 111, 99, 107, 95, 255, 115, 105, 255, 122, 101, 0, 0, 0, 0, 251, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 107, 101, 121, 95, 255, 99, 97, 99, 104, 255, 101, 95, 100, 255, 105, 118, 105, 115, 105, 255, 111, 110, 255, 95, 108, 105, 109, 105, 116, 255, 0, 255, 0, 0, 0, 0, 0, 0, 0, 247, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 7, version: 237, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1615, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1616, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1617, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 2105, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1617, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=2105] [region_id=1614]
[2019/05/01 12:40:46.101 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_1811_6_7_(default|lock|write).sst] [snap_key=1811_6_7]
[2019/05/01 12:40:46.110 -07:00] [INFO] [unknown:1792] ["[region 1811] 2147 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 7, term: 6]"]
[2019/05/01 12:40:46.110 -07:00] [INFO] [unknown:1816] ["[region 1811] 2147 restored progress of 1812 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:40:46.110 -07:00] [INFO] [unknown:1816] ["[region 1811] 2147 restored progress of 1813 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:40:46.110 -07:00] [INFO] [unknown:1816] ["[region 1811] 2147 restored progress of 1814 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:40:46.110 -07:00] [INFO] [unknown:1816] ["[region 1811] 2147 restored progress of 2147 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:40:46.110 -07:00] [INFO] [unknown:474] ["[region 1811] 2147 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 7, term: 6]"]
[2019/05/01 12:40:46.110 -07:00] [INFO] [unknown:1736] ["[region 1811] 2147 [commit: 7] restored snapshot [index: 7, term: 6]"]
[2019/05/01 12:40:46.110 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=2147] [region_id=1811]
[2019/05/01 12:40:46.110 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 7, truncated_state: Some(RaftTruncatedState { index: 7, term: 6, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 1811, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 109, 97, 120, 95, 255, 98, 105, 110, 108, 255, 111, 103, 95, 255, 115, 116, 109, 116, 95, 255, 99, 97, 255, 99, 104, 101, 95, 115, 105, 255, 122, 255, 101, 0, 0, 0, 0, 0, 0, 249, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 109, 97, 120, 95, 255, 99, 111, 110, 110, 255, 101, 99, 116, 255, 95, 101, 114, 114, 111, 255, 114, 115, 255, 0, 0, 0, 0, 0, 0, 249, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 277, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1812, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1813, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1814, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 2147, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=2147] [region_id=1811]
[2019/05/01 12:40:46.123 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 1811, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 109, 97, 120, 95, 255, 98, 105, 110, 108, 255, 111, 103, 95, 255, 115, 116, 109, 116, 95, 255, 99, 97, 255, 99, 104, 101, 95, 115, 105, 255, 122, 255, 101, 0, 0, 0, 0, 0, 0, 249, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 109, 97, 120, 95, 255, 99, 111, 110, 110, 255, 101, 99, 116, 255, 95, 101, 114, 114, 111, 255, 114, 115, 255, 0, 0, 0, 0, 0, 0, 249, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 277, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1812, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1813, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1814, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 2147, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=2147] [region_id=1811]
[2019/05/01 12:40:46.123 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 1811] 2147"]
[2019/05/01 12:40:46.123 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=1811]
[2019/05/01 12:40:46.140 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=16.166714ms] [region_id=1811]
[2019/05/01 12:40:46.271 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_1517_6_10_(default|lock|write).sst] [snap_key=1517_6_10]
[2019/05/01 12:40:46.284 -07:00] [INFO] [unknown:1792] ["[region 1517] 2148 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 10, term: 6]"]
[2019/05/01 12:40:46.284 -07:00] [INFO] [unknown:1816] ["[region 1517] 2148 restored progress of 1518 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:40:46.284 -07:00] [INFO] [unknown:1816] ["[region 1517] 2148 restored progress of 1520 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:40:46.284 -07:00] [INFO] [unknown:1816] ["[region 1517] 2148 restored progress of 1654 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:40:46.284 -07:00] [INFO] [unknown:1816] ["[region 1517] 2148 restored progress of 2148 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:40:46.284 -07:00] [INFO] [unknown:474] ["[region 1517] 2148 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 10, term: 6]"]
[2019/05/01 12:40:46.284 -07:00] [INFO] [unknown:1736] ["[region 1517] 2148 [commit: 10] restored snapshot [index: 10, term: 6]"]
[2019/05/01 12:40:46.284 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=2148] [region_id=1517]
[2019/05/01 12:40:46.284 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 10, truncated_state: Some(RaftTruncatedState { index: 10, term: 6, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 1517, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 115, 255, 116, 114, 105, 255, 99, 116, 95, 109, 111, 255, 100, 101, 255, 0, 0, 0, 0, 0, 0, 249, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 115, 255, 117, 112, 112, 255, 111, 114, 116, 95, 120, 255, 97, 0, 255, 0, 0, 0, 0, 0, 0, 248, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 217, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1518, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1520, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1654, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 2148, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=2148] [region_id=1517]
[2019/05/01 12:40:46.299 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 1517] 2148"]
[2019/05/01 12:40:46.299 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 1517, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 115, 255, 116, 114, 105, 255, 99, 116, 95, 109, 111, 255, 100, 101, 255, 0, 0, 0, 0, 0, 0, 249, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 115, 255, 117, 112, 112, 255, 111, 114, 116, 95, 120, 255, 97, 0, 255, 0, 0, 0, 0, 0, 0, 248, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 217, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1518, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1520, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1654, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 2148, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=2148] [region_id=1517]
[2019/05/01 12:40:46.299 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=1517]
[2019/05/01 12:40:46.315 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=16.335848ms] [region_id=1517]
[2019/05/01 12:40:46.332 -07:00] [INFO] [unknown:1625] ["[region 1687] 1858 [term 6] received MsgTimeoutNow from 1689 and starts an election to get leadership."]
[2019/05/01 12:40:46.332 -07:00] [INFO] [unknown:739] ["[region 1687] 1858 became candidate at term 7"]
[2019/05/01 12:40:46.332 -07:00] [INFO] [unknown:854] ["[region 1687] 1858 received MsgRequestVoteResponse from 1858 at term 7"]
[2019/05/01 12:40:46.332 -07:00] [INFO] [unknown:828] ["[region 1687] 1858 [logterm: 6, index: 9] sent MsgRequestVote request to 1689 at term 7"]
[2019/05/01 12:40:46.332 -07:00] [INFO] [unknown:828] ["[region 1687] 1858 [logterm: 6, index: 9] sent MsgRequestVote request to 1688 at term 7"]
[2019/05/01 12:40:46.348 -07:00] [INFO] [unknown:1625] ["[region 1655] 1954 [term 6] received MsgTimeoutNow from 1657 and starts an election to get leadership."]
[2019/05/01 12:40:46.348 -07:00] [INFO] [unknown:739] ["[region 1655] 1954 became candidate at term 7"]
[2019/05/01 12:40:46.348 -07:00] [INFO] [unknown:854] ["[region 1655] 1954 received MsgRequestVoteResponse from 1954 at term 7"]
[2019/05/01 12:40:46.348 -07:00] [INFO] [unknown:828] ["[region 1655] 1954 [logterm: 6, index: 9] sent MsgRequestVote request to 1658 at term 7"]
[2019/05/01 12:40:46.348 -07:00] [INFO] [unknown:828] ["[region 1655] 1954 [logterm: 6, index: 9] sent MsgRequestVote request to 1657 at term 7"]
[2019/05/01 12:40:46.383 -07:00] [INFO] [unknown:854] ["[region 1687] 1858 received MsgRequestVoteResponse from 1689 at term 7"]
[2019/05/01 12:40:46.383 -07:00] [INFO] [unknown:1550] ["[region 1687] 1858 [quorum:2] has received 2 MsgRequestVoteResponse votes and 0 vote rejections"]
[2019/05/01 12:40:46.383 -07:00] [INFO] [unknown:789] ["[region 1687] 1858 became leader at term 7"]
[2019/05/01 12:40:46.391 -07:00] [INFO] [unknown:854] ["[region 1655] 1954 received MsgRequestVoteResponse from 1658 at term 7"]
[2019/05/01 12:40:46.391 -07:00] [INFO] [unknown:1550] ["[region 1655] 1954 [quorum:2] has received 2 MsgRequestVoteResponse votes and 0 vote rejections"]
[2019/05/01 12:40:46.391 -07:00] [INFO] [unknown:789] ["[region 1655] 1954 became leader at term 7"]
[2019/05/01 12:40:49.259 -07:00] [WARN] [store.rs:533] ["[store 6] handle 1 pending peers include 1 ready, 0 entries, 1 messages and 0 snapshots"] [takes=2.516s]
[2019/05/01 12:40:49.272 -07:00] [WARN] [store.rs:533] ["[store 6] handle 1 pending peers include 1 ready, 1 entries, 1 messages and 0 snapshots"] [takes=2.168s]
[2019/05/01 12:40:49.293 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 2147, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=8] [term=6] [peer_id=2147] [region_id=1811]
[2019/05/01 12:40:49.294 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 6, version: 277, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=2147] [region_id=1811]
[2019/05/01 12:40:49.294 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 1811, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 109, 97, 120, 95, 255, 98, 105, 110, 108, 255, 111, 103, 95, 255, 115, 116, 109, 116, 95, 255, 99, 97, 255, 99, 104, 101, 95, 115, 105, 255, 122, 255, 101, 0, 0, 0, 0, 0, 0, 249, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 109, 97, 120, 95, 255, 99, 111, 110, 110, 255, 101, 99, 116, 255, 95, 101, 114, 114, 111, 255, 114, 115, 255, 0, 0, 0, 0, 0, 0, 249, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 277, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1812, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1813, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1814, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 2147, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 2147, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=2147] [region_id=1811]
[2019/05/01 12:40:49.307 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 2148, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=11] [term=6] [peer_id=2148] [region_id=1517]
[2019/05/01 12:40:49.307 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 9, version: 217, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=2148] [region_id=1517]
[2019/05/01 12:40:49.307 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 1517, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 115, 255, 116, 114, 105, 255, 99, 116, 95, 109, 111, 255, 100, 101, 255, 0, 0, 0, 0, 0, 0, 249, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 115, 255, 117, 112, 112, 255, 111, 114, 116, 95, 120, 255, 97, 0, 255, 0, 0, 0, 0, 0, 0, 248, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 217, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1518, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1520, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1654, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 2148, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 2148, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=2148] [region_id=1517]
[2019/05/01 12:40:49.367 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 1812, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=9] [term=6] [peer_id=2147] [region_id=1811]
[2019/05/01 12:40:49.367 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 7, version: 277, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=2147] [region_id=1811]
[2019/05/01 12:40:49.367 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 1811, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 109, 97, 120, 95, 255, 98, 105, 110, 108, 255, 111, 103, 95, 255, 115, 116, 109, 116, 95, 255, 99, 97, 255, 99, 104, 101, 95, 115, 105, 255, 122, 255, 101, 0, 0, 0, 0, 0, 0, 249, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 109, 97, 120, 95, 255, 99, 111, 110, 110, 255, 101, 99, 116, 255, 95, 101, 114, 114, 111, 255, 114, 115, 255, 0, 0, 0, 0, 0, 0, 249, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 7, version: 277, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1812, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1813, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1814, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 2147, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1812, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=2147] [region_id=1811]
[2019/05/01 12:40:49.400 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 1518, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=12] [term=6] [peer_id=2148] [region_id=1517]
[2019/05/01 12:40:49.400 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 10, version: 217, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=2148] [region_id=1517]
[2019/05/01 12:40:49.400 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 1517, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 115, 255, 116, 114, 105, 255, 99, 116, 95, 109, 111, 255, 100, 101, 255, 0, 0, 0, 0, 0, 0, 249, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 115, 255, 117, 112, 112, 255, 111, 114, 116, 95, 120, 255, 97, 0, 255, 0, 0, 0, 0, 0, 0, 248, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 10, version: 217, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1518, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1520, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1654, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 2148, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1518, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=2148] [region_id=1517]
[2019/05/01 12:40:49.472 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddLearnerNode, peer: Some(Peer { id: 2152, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=10] [term=6] [peer_id=1099] [region_id=505]
[2019/05/01 12:40:49.472 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 8, version: 67, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddLearner] [peer_id=1099] [region_id=505]
[2019/05/01 12:40:49.472 -07:00] [INFO] [apply.rs:1476] ["add learner successfully"] [region="Region { id: 505, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 100, 105, 115, 99, 255, 111, 110, 110, 101, 255, 99, 116, 95, 255, 111, 110, 95, 101, 120, 255, 112, 105, 255, 114, 101, 100, 95, 112, 97, 255, 115, 255, 115, 119, 111, 114, 100, 0, 0, 253, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 100, 105, 118, 95, 255, 112, 114, 101, 99, 255, 105, 115, 105, 255, 111, 110, 95, 105, 110, 255, 99, 114, 255, 101, 109, 101, 110, 116, 0, 254, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 8, version: 67, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 506, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 507, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1099, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 2152, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1099] [region_id=505]
[2019/05/01 12:40:50.278 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=2153] [region_id=1364]
[2019/05/01 12:40:50.278 -07:00] [INFO] [unknown:719] ["[region 1364] 2153 became follower at term 0"]
[2019/05/01 12:40:50.278 -07:00] [INFO] [unknown:295] ["[region 1364] 2153 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:40:50.278 -07:00] [INFO] [unknown:719] ["[region 1364] 2153 became follower at term 1"]
[2019/05/01 12:40:50.278 -07:00] [INFO] [unknown:920] ["[region 1364] 2153 [term: 1] received a MsgHeartbeat message with higher term from 1367 [term: 6]"]
[2019/05/01 12:40:50.278 -07:00] [INFO] [unknown:719] ["[region 1364] 2153 became follower at term 6"]
[2019/05/01 12:40:50.336 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=2151] [region_id=1495]
[2019/05/01 12:40:50.336 -07:00] [INFO] [unknown:719] ["[region 1495] 2151 became follower at term 0"]
[2019/05/01 12:40:50.336 -07:00] [INFO] [unknown:295] ["[region 1495] 2151 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:40:50.336 -07:00] [INFO] [unknown:719] ["[region 1495] 2151 became follower at term 1"]
[2019/05/01 12:40:50.336 -07:00] [INFO] [unknown:920] ["[region 1495] 2151 [term: 1] received a MsgHeartbeat message with higher term from 1498 [term: 6]"]
[2019/05/01 12:40:50.336 -07:00] [INFO] [unknown:719] ["[region 1495] 2151 became follower at term 6"]
[2019/05/01 12:40:52.112 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=2154] [region_id=1771]
[2019/05/01 12:40:52.112 -07:00] [INFO] [unknown:719] ["[region 1771] 2154 became follower at term 0"]
[2019/05/01 12:40:52.112 -07:00] [INFO] [unknown:295] ["[region 1771] 2154 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:40:52.112 -07:00] [INFO] [unknown:719] ["[region 1771] 2154 became follower at term 1"]
[2019/05/01 12:40:52.112 -07:00] [INFO] [unknown:920] ["[region 1771] 2154 [term: 1] received a MsgHeartbeat message with higher term from 1774 [term: 7]"]
[2019/05/01 12:40:52.112 -07:00] [INFO] [unknown:719] ["[region 1771] 2154 became follower at term 7"]
[2019/05/01 12:40:52.282 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_1364_6_7_(default|lock|write).sst] [snap_key=1364_6_7]
[2019/05/01 12:40:52.286 -07:00] [INFO] [unknown:1792] ["[region 1364] 2153 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 7, term: 6]"]
[2019/05/01 12:40:52.286 -07:00] [INFO] [unknown:1816] ["[region 1364] 2153 restored progress of 1365 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:40:52.286 -07:00] [INFO] [unknown:1816] ["[region 1364] 2153 restored progress of 1366 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:40:52.286 -07:00] [INFO] [unknown:1816] ["[region 1364] 2153 restored progress of 1367 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:40:52.286 -07:00] [INFO] [unknown:1816] ["[region 1364] 2153 restored progress of 2153 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:40:52.286 -07:00] [INFO] [unknown:474] ["[region 1364] 2153 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 7, term: 6]"]
[2019/05/01 12:40:52.286 -07:00] [INFO] [unknown:1736] ["[region 1364] 2153 [commit: 7] restored snapshot [index: 7, term: 6]"]
[2019/05/01 12:40:52.286 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=2153] [region_id=1364]
[2019/05/01 12:40:52.286 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 7, truncated_state: Some(RaftTruncatedState { index: 7, term: 6, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 1364, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 109, 255, 111, 110, 105, 255, 116, 111, 114, 95, 101, 255, 110, 97, 255, 98, 108, 101, 0, 0, 0, 252, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 109, 255, 111, 110, 105, 255, 116, 111, 114, 95, 114, 255, 101, 115, 255, 101, 116, 0, 0, 0, 0, 251, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 187, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1365, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1366, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1367, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 2153, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=2153] [region_id=1364]
[2019/05/01 12:40:52.314 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 1364] 2153"]
[2019/05/01 12:40:52.314 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 1364, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 109, 255, 111, 110, 105, 255, 116, 111, 114, 95, 101, 255, 110, 97, 255, 98, 108, 101, 0, 0, 0, 252, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 109, 255, 111, 110, 105, 255, 116, 111, 114, 95, 114, 255, 101, 115, 255, 101, 116, 0, 0, 0, 0, 251, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 187, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1365, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1366, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1367, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 2153, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=2153] [region_id=1364]
[2019/05/01 12:40:52.314 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=1364]
[2019/05/01 12:40:52.331 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=16.309306ms] [region_id=1364]
[2019/05/01 12:40:52.340 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_1495_6_7_(default|lock|write).sst] [snap_key=1495_6_7]
[2019/05/01 12:40:52.356 -07:00] [INFO] [unknown:1792] ["[region 1495] 2151 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 7, term: 6]"]
[2019/05/01 12:40:52.356 -07:00] [INFO] [unknown:1816] ["[region 1495] 2151 restored progress of 1496 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:40:52.356 -07:00] [INFO] [unknown:1816] ["[region 1495] 2151 restored progress of 1497 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:40:52.356 -07:00] [INFO] [unknown:1816] ["[region 1495] 2151 restored progress of 1498 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:40:52.356 -07:00] [INFO] [unknown:1816] ["[region 1495] 2151 restored progress of 2151 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:40:52.356 -07:00] [INFO] [unknown:474] ["[region 1495] 2151 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 7, term: 6]"]
[2019/05/01 12:40:52.356 -07:00] [INFO] [unknown:1736] ["[region 1495] 2151 [commit: 7] restored snapshot [index: 7, term: 6]"]
[2019/05/01 12:40:52.356 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=2151] [region_id=1495]
[2019/05/01 12:40:52.356 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 7, truncated_state: Some(RaftTruncatedState { index: 7, term: 6, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 1495, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 115, 255, 116, 97, 116, 255, 115, 95, 116, 114, 97, 255, 110, 115, 255, 105, 101, 110, 116, 95, 115, 255, 97, 255, 109, 112, 108, 101, 95, 112, 97, 255, 255, 103, 101, 115, 0, 0, 0, 0, 0, 255, 250, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 115, 255, 116, 97, 116, 255, 117, 115, 95, 111, 117, 255, 116, 112, 255, 117, 116, 0, 0, 0, 0, 251, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 207, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1496, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1497, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1498, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 2151, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=2151] [region_id=1495]
[2019/05/01 12:40:52.383 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 1495] 2151"]
[2019/05/01 12:40:52.383 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 1495, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 115, 255, 116, 97, 116, 255, 115, 95, 116, 114, 97, 255, 110, 115, 255, 105, 101, 110, 116, 95, 115, 255, 97, 255, 109, 112, 108, 101, 95, 112, 97, 255, 255, 103, 101, 115, 0, 0, 0, 0, 0, 255, 250, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 115, 255, 116, 97, 116, 255, 117, 115, 95, 111, 117, 255, 116, 112, 255, 117, 116, 0, 0, 0, 0, 251, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 207, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1496, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1497, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1498, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 2151, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=2151] [region_id=1495]
[2019/05/01 12:40:52.383 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=1495]
[2019/05/01 12:40:52.400 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=16.220177ms] [region_id=1495]
[2019/05/01 12:40:53.319 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 2153, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=8] [term=6] [peer_id=2153] [region_id=1364]
[2019/05/01 12:40:53.319 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 6, version: 187, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=2153] [region_id=1364]
[2019/05/01 12:40:53.319 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 1364, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 109, 255, 111, 110, 105, 255, 116, 111, 114, 95, 101, 255, 110, 97, 255, 98, 108, 101, 0, 0, 0, 252, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 109, 255, 111, 110, 105, 255, 116, 111, 114, 95, 114, 255, 101, 115, 255, 101, 116, 0, 0, 0, 0, 251, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 187, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1365, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1366, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1367, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 2153, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 2153, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=2153] [region_id=1364]
[2019/05/01 12:40:53.334 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 2152, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=11] [term=6] [peer_id=1099] [region_id=505]
[2019/05/01 12:40:53.335 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 9, version: 67, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=1099] [region_id=505]
[2019/05/01 12:40:53.335 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 505, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 100, 105, 115, 99, 255, 111, 110, 110, 101, 255, 99, 116, 95, 255, 111, 110, 95, 101, 120, 255, 112, 105, 255, 114, 101, 100, 95, 112, 97, 255, 115, 255, 115, 119, 111, 114, 100, 0, 0, 253, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 100, 105, 118, 95, 255, 112, 114, 101, 99, 255, 105, 115, 105, 255, 111, 110, 95, 105, 110, 255, 99, 114, 255, 101, 109, 101, 110, 116, 0, 254, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 67, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 506, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 507, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1099, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 2152, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 2152, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1099] [region_id=505]
[2019/05/01 12:40:53.377 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 1366, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=9] [term=6] [peer_id=2153] [region_id=1364]
[2019/05/01 12:40:53.377 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 7, version: 187, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=2153] [region_id=1364]
[2019/05/01 12:40:53.377 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 1364, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 109, 255, 111, 110, 105, 255, 116, 111, 114, 95, 101, 255, 110, 97, 255, 98, 108, 101, 0, 0, 0, 252, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 109, 255, 111, 110, 105, 255, 116, 111, 114, 95, 114, 255, 101, 115, 255, 101, 116, 0, 0, 0, 0, 251, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 7, version: 187, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1365, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1366, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1367, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 2153, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1366, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=2153] [region_id=1364]
[2019/05/01 12:40:53.403 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 2151, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=8] [term=6] [peer_id=2151] [region_id=1495]
[2019/05/01 12:40:53.403 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 6, version: 207, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=2151] [region_id=1495]
[2019/05/01 12:40:53.403 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 1495, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 115, 255, 116, 97, 116, 255, 115, 95, 116, 114, 97, 255, 110, 115, 255, 105, 101, 110, 116, 95, 115, 255, 97, 255, 109, 112, 108, 101, 95, 112, 97, 255, 255, 103, 101, 115, 0, 0, 0, 0, 0, 255, 250, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 115, 255, 116, 97, 116, 255, 117, 115, 95, 111, 117, 255, 116, 112, 255, 117, 116, 0, 0, 0, 0, 251, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 207, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1496, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1497, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1498, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 2151, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 2151, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=2151] [region_id=1495]
[2019/05/01 12:40:53.441 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 507, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=12] [term=6] [peer_id=1099] [region_id=505]
[2019/05/01 12:40:53.442 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 10, version: 67, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=1099] [region_id=505]
[2019/05/01 12:40:53.442 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 505, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 100, 105, 115, 99, 255, 111, 110, 110, 101, 255, 99, 116, 95, 255, 111, 110, 95, 101, 120, 255, 112, 105, 255, 114, 101, 100, 95, 112, 97, 255, 115, 255, 115, 119, 111, 114, 100, 0, 0, 253, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 100, 105, 118, 95, 255, 112, 114, 101, 99, 255, 105, 115, 105, 255, 111, 110, 95, 105, 110, 255, 99, 114, 255, 101, 109, 101, 110, 116, 0, 254, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 10, version: 67, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 506, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 507, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1099, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 2152, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 507, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1099] [region_id=505]
[2019/05/01 12:40:53.458 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 1496, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=9] [term=6] [peer_id=2151] [region_id=1495]
[2019/05/01 12:40:53.458 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 7, version: 207, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=2151] [region_id=1495]
[2019/05/01 12:40:53.458 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 1495, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 115, 255, 116, 97, 116, 255, 115, 95, 116, 114, 97, 255, 110, 115, 255, 105, 101, 110, 116, 95, 115, 255, 97, 255, 109, 112, 108, 101, 95, 112, 97, 255, 255, 103, 101, 115, 0, 0, 0, 0, 0, 255, 250, 0, 0, 0, 0, 0, 0, 0, 248], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 115, 255, 116, 97, 116, 255, 117, 115, 95, 111, 117, 255, 116, 112, 255, 117, 116, 0, 0, 0, 0, 251, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 7, version: 207, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1496, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1497, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1498, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 2151, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1496, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=2151] [region_id=1495]
[2019/05/01 12:40:53.541 -07:00] [INFO] [pd.rs:558] ["try to change peer"] [peer="Peer { id: 2197, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [change_type=AddLearnerNode] [region_id=1154]
[2019/05/01 12:40:53.541 -07:00] [INFO] [peer.rs:1953] ["propose conf change peer"] [change_peer=2197] [change_type=AddLearnerNode] [peer_id=1196] [region_id=1154]
[2019/05/01 12:40:53.566 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddLearnerNode, peer: Some(Peer { id: 2197, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=12] [term=8] [peer_id=1196] [region_id=1154]
[2019/05/01 12:40:53.566 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 8, version: 147, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddLearner] [peer_id=1196] [region_id=1154]
[2019/05/01 12:40:53.566 -07:00] [INFO] [apply.rs:1476] ["add learner successfully"] [region="Region { id: 1154, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 102, 255, 105, 108, 108, 255, 95, 102, 97, 99, 116, 255, 111, 114, 255, 0, 0, 0, 0, 0, 0, 249, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 102, 255, 108, 117, 115, 255, 104, 95, 108, 111, 103, 255, 95, 97, 255, 116, 95, 116, 105, 109, 101, 255, 111, 255, 117, 116, 0, 0, 0, 0, 0, 250, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 8, version: 147, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1156, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1157, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1196, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 2197, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1196] [region_id=1154]
[2019/05/01 12:40:53.574 -07:00] [INFO] [peer.rs:1318] ["notify pd with change peer region"] [region="Region { id: 1154, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 102, 255, 105, 108, 108, 255, 95, 102, 97, 99, 116, 255, 111, 114, 255, 0, 0, 0, 0, 0, 0, 249, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 102, 255, 108, 117, 115, 255, 104, 95, 108, 111, 103, 255, 95, 97, 255, 116, 95, 116, 105, 109, 101, 255, 111, 255, 117, 116, 0, 0, 0, 0, 0, 250, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 147, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1156, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1157, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1196, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 2197, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1196] [region_id=1154]
[2019/05/01 12:40:54.116 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_1771_7_11_(default|lock|write).sst] [snap_key=1771_7_11]
[2019/05/01 12:40:54.121 -07:00] [INFO] [unknown:1792] ["[region 1771] 2154 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 11, term: 7]"]
[2019/05/01 12:40:54.121 -07:00] [INFO] [unknown:1816] ["[region 1771] 2154 restored progress of 1773 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:40:54.121 -07:00] [INFO] [unknown:1816] ["[region 1771] 2154 restored progress of 1774 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:40:54.121 -07:00] [INFO] [unknown:1816] ["[region 1771] 2154 restored progress of 2150 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:40:54.121 -07:00] [INFO] [unknown:1816] ["[region 1771] 2154 restored progress of 2154 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:40:54.121 -07:00] [INFO] [unknown:474] ["[region 1771] 2154 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 11, term: 7]"]
[2019/05/01 12:40:54.121 -07:00] [INFO] [unknown:1736] ["[region 1771] 2154 [commit: 11] restored snapshot [index: 11, term: 7]"]
[2019/05/01 12:40:54.121 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=2154] [region_id=1771]
[2019/05/01 12:40:54.121 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 11, truncated_state: Some(RaftTruncatedState { index: 11, term: 7, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 1771, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 108, 111, 119, 95, 255, 112, 114, 105, 111, 255, 114, 105, 116, 255, 121, 95, 117, 112, 100, 255, 97, 116, 255, 101, 115, 0, 0, 0, 0, 251, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 108, 111, 119, 101, 255, 114, 95, 99, 97, 255, 115, 101, 95, 255, 102, 105, 108, 101, 95, 255, 115, 121, 255, 115, 116, 101, 109, 0, 0, 253, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 267, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1773, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1774, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 2150, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 2154, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=2154] [region_id=1771]
[2019/05/01 12:40:54.138 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 1771, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 108, 111, 119, 95, 255, 112, 114, 105, 111, 255, 114, 105, 116, 255, 121, 95, 117, 112, 100, 255, 97, 116, 255, 101, 115, 0, 0, 0, 0, 251, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 108, 111, 119, 101, 255, 114, 95, 99, 97, 255, 115, 101, 95, 255, 102, 105, 108, 101, 95, 255, 115, 121, 255, 115, 116, 101, 109, 0, 0, 253, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 267, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1773, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1774, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 2150, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 2154, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=2154] [region_id=1771]
[2019/05/01 12:40:54.138 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 1771] 2154"]
[2019/05/01 12:40:54.138 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=1771]
[2019/05/01 12:40:54.154 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=15.977732ms] [region_id=1771]
[2019/05/01 12:40:54.267 -07:00] [INFO] [peer_storage.rs:759] ["requesting snapshot"] [peer_id=1196] [region_id=1154]
[2019/05/01 12:40:54.267 -07:00] [INFO] [snap.rs:757] ["scan snapshot of one cf"] [size=0] [key_count=0] [cf=default] [snapshot=/opt/tidb/data/kv/snap/gen_1154_8_12_(default|lock|write).sst] [region_id=1154]
[2019/05/01 12:40:54.267 -07:00] [INFO] [snap.rs:757] ["scan snapshot of one cf"] [size=0] [key_count=0] [cf=lock] [snapshot=/opt/tidb/data/kv/snap/gen_1154_8_12_(default|lock|write).sst] [region_id=1154]
[2019/05/01 12:40:54.267 -07:00] [INFO] [snap.rs:757] ["scan snapshot of one cf"] [size=156] [key_count=2] [cf=write] [snapshot=/opt/tidb/data/kv/snap/gen_1154_8_12_(default|lock|write).sst] [region_id=1154]
[2019/05/01 12:40:54.276 -07:00] [INFO] [snap.rs:875] ["scan snapshot"] [takes=8.755713ms] [size=1414] [key_count=2] [snapshot=/opt/tidb/data/kv/snap/gen_1154_8_12_(default|lock|write).sst] [region_id=1154]
[2019/05/01 12:40:54.640 -07:00] [INFO] [unknown:1625] ["[region 1811] 2147 [term 6] received MsgTimeoutNow from 1813 and starts an election to get leadership."]
[2019/05/01 12:40:54.640 -07:00] [INFO] [unknown:739] ["[region 1811] 2147 became candidate at term 7"]
[2019/05/01 12:40:54.640 -07:00] [INFO] [unknown:854] ["[region 1811] 2147 received MsgRequestVoteResponse from 2147 at term 7"]
[2019/05/01 12:40:54.640 -07:00] [INFO] [unknown:828] ["[region 1811] 2147 [logterm: 6, index: 9] sent MsgRequestVote request to 1814 at term 7"]
[2019/05/01 12:40:54.640 -07:00] [INFO] [unknown:828] ["[region 1811] 2147 [logterm: 6, index: 9] sent MsgRequestVote request to 1813 at term 7"]
[2019/05/01 12:40:54.681 -07:00] [INFO] [unknown:854] ["[region 1811] 2147 received MsgRequestVoteResponse from 1813 at term 7"]
[2019/05/01 12:40:54.681 -07:00] [INFO] [unknown:1550] ["[region 1811] 2147 [quorum:2] has received 2 MsgRequestVoteResponse votes and 0 vote rejections"]
[2019/05/01 12:40:54.681 -07:00] [INFO] [unknown:789] ["[region 1811] 2147 became leader at term 7"]
[2019/05/01 12:40:55.132 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 2154, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=12] [term=7] [peer_id=2154] [region_id=1771]
[2019/05/01 12:40:55.132 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 9, version: 267, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=2154] [region_id=1771]
[2019/05/01 12:40:55.132 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 1771, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 108, 111, 119, 95, 255, 112, 114, 105, 111, 255, 114, 105, 116, 255, 121, 95, 117, 112, 100, 255, 97, 116, 255, 101, 115, 0, 0, 0, 0, 251, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 108, 111, 119, 101, 255, 114, 95, 99, 97, 255, 115, 101, 95, 255, 102, 105, 108, 101, 95, 255, 115, 121, 255, 115, 116, 101, 109, 0, 0, 253, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 267, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1773, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1774, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 2150, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 2154, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 2154, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=2154] [region_id=1771]
[2019/05/01 12:40:55.176 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 1773, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=13] [term=7] [peer_id=2154] [region_id=1771]
[2019/05/01 12:40:55.176 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 10, version: 267, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=2154] [region_id=1771]
[2019/05/01 12:40:55.176 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 1771, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 108, 111, 119, 95, 255, 112, 114, 105, 111, 255, 114, 105, 116, 255, 121, 95, 117, 112, 100, 255, 97, 116, 255, 101, 115, 0, 0, 0, 0, 251, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 108, 111, 119, 101, 255, 114, 95, 99, 97, 255, 115, 101, 95, 255, 102, 105, 108, 101, 95, 255, 115, 121, 255, 115, 116, 101, 109, 0, 0, 253, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 10, version: 267, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1773, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1774, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 2150, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 2154, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1773, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=2154] [region_id=1771]
[2019/05/01 12:40:56.269 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=2198] [region_id=925]
[2019/05/01 12:40:56.269 -07:00] [INFO] [unknown:719] ["[region 925] 2198 became follower at term 0"]
[2019/05/01 12:40:56.269 -07:00] [INFO] [unknown:295] ["[region 925] 2198 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:40:56.269 -07:00] [INFO] [unknown:719] ["[region 925] 2198 became follower at term 1"]
[2019/05/01 12:40:56.269 -07:00] [INFO] [unknown:920] ["[region 925] 2198 [term: 1] received a MsgHeartbeat message with higher term from 926 [term: 6]"]
[2019/05/01 12:40:56.269 -07:00] [INFO] [unknown:719] ["[region 925] 2198 became follower at term 6"]
[2019/05/01 12:40:56.269 -07:00] [INFO] [unknown:841] ["New connected subchannel at 0x7f041bdf7b70 for subchannel 0x7f04cf841e00"]
[2019/05/01 12:40:56.282 -07:00] [INFO] [snap.rs:389] ["sent snapshot"] [duration=13.570755ms] [size=1414] [snap_key=1154_8_12] [region_id=1154]
[2019/05/01 12:40:56.282 -07:00] [INFO] [peer.rs:538] ["report snapshot status"] [status=Finish] [to="Peer { id: 2197, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1196] [region_id=1154]
[2019/05/01 12:40:57.270 -07:00] [INFO] [pd.rs:558] ["try to change peer"] [peer="Peer { id: 2197, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [change_type=AddNode] [region_id=1154]
[2019/05/01 12:40:57.270 -07:00] [INFO] [peer.rs:1953] ["propose conf change peer"] [change_peer=2197] [change_type=AddNode] [peer_id=1196] [region_id=1154]
[2019/05/01 12:40:57.309 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 2197, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=13] [term=8] [peer_id=1196] [region_id=1154]
[2019/05/01 12:40:57.309 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 9, version: 147, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=1196] [region_id=1154]
[2019/05/01 12:40:57.309 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 1154, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 102, 255, 105, 108, 108, 255, 95, 102, 97, 99, 116, 255, 111, 114, 255, 0, 0, 0, 0, 0, 0, 249, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 102, 255, 108, 117, 115, 255, 104, 95, 108, 111, 103, 255, 95, 97, 255, 116, 95, 116, 105, 109, 101, 255, 111, 255, 117, 116, 0, 0, 0, 0, 0, 250, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 147, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1156, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1157, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1196, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 2197, store_id: 7, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 2197, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1196] [region_id=1154]
[2019/05/01 12:40:57.326 -07:00] [INFO] [peer.rs:1318] ["notify pd with change peer region"] [region="Region { id: 1154, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 102, 255, 105, 108, 108, 255, 95, 102, 97, 99, 116, 255, 111, 114, 255, 0, 0, 0, 0, 0, 0, 249, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 102, 255, 108, 117, 115, 255, 104, 95, 108, 111, 103, 255, 95, 97, 255, 116, 95, 116, 105, 109, 101, 255, 111, 255, 117, 116, 0, 0, 0, 0, 0, 250, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 10, version: 147, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1156, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1157, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1196, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 2197, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1196] [region_id=1154]
[2019/05/01 12:40:57.333 -07:00] [INFO] [pd.rs:558] ["try to change peer"] [peer="Peer { id: 1156, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [change_type=RemoveNode] [region_id=1154]
[2019/05/01 12:40:57.333 -07:00] [INFO] [pd.rs:558] ["try to change peer"] [peer="Peer { id: 1156, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [change_type=RemoveNode] [region_id=1154]
[2019/05/01 12:40:57.333 -07:00] [INFO] [peer.rs:1953] ["propose conf change peer"] [change_peer=1156] [change_type=RemoveNode] [peer_id=1196] [region_id=1154]
[2019/05/01 12:40:57.357 -07:00] [INFO] [peer.rs:1927] ["there is a pending conf change, try later"] [peer_id=1196] [region_id=1154]
[2019/05/01 12:40:57.376 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 1156, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=14] [term=8] [peer_id=1196] [region_id=1154]
[2019/05/01 12:40:57.376 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 10, version: 147, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=1196] [region_id=1154]
[2019/05/01 12:40:57.376 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 1154, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 102, 255, 105, 108, 108, 255, 95, 102, 97, 99, 116, 255, 111, 114, 255, 0, 0, 0, 0, 0, 0, 249, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 102, 255, 108, 117, 115, 255, 104, 95, 108, 111, 103, 255, 95, 97, 255, 116, 95, 116, 105, 109, 101, 255, 111, 255, 117, 116, 0, 0, 0, 0, 0, 250, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 10, version: 147, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1156, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1157, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1196, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 2197, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1156, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1196] [region_id=1154]
[2019/05/01 12:40:57.390 -07:00] [INFO] [peer.rs:1318] ["notify pd with change peer region"] [region="Region { id: 1154, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 102, 255, 105, 108, 108, 255, 95, 102, 97, 99, 116, 255, 111, 114, 255, 0, 0, 0, 0, 0, 0, 249, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 102, 255, 108, 117, 115, 255, 104, 95, 108, 111, 103, 255, 95, 97, 255, 116, 95, 116, 105, 109, 101, 255, 111, 255, 117, 116, 0, 0, 0, 0, 0, 250, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 11, version: 147, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1157, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1196, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 2197, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=1196] [region_id=1154]
[2019/05/01 12:40:57.445 -07:00] [INFO] [store.rs:294] ["raft message is stale, ignore it"] [msg_type=MsgAppendResponse] [current_region_epoch="RegionEpoch { conf_ver: 11, version: 147, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region_id=1154]
[2019/05/01 12:40:58.273 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_925_6_7_(default|lock|write).sst] [snap_key=925_6_7]
[2019/05/01 12:40:58.280 -07:00] [INFO] [unknown:1792] ["[region 925] 2198 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 7, term: 6]"]
[2019/05/01 12:40:58.280 -07:00] [INFO] [unknown:1816] ["[region 925] 2198 restored progress of 926 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:40:58.280 -07:00] [INFO] [unknown:1816] ["[region 925] 2198 restored progress of 927 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:40:58.280 -07:00] [INFO] [unknown:1816] ["[region 925] 2198 restored progress of 928 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:40:58.280 -07:00] [INFO] [unknown:1816] ["[region 925] 2198 restored progress of 2198 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:40:58.280 -07:00] [INFO] [unknown:474] ["[region 925] 2198 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 7, term: 6]"]
[2019/05/01 12:40:58.280 -07:00] [INFO] [unknown:1736] ["[region 925] 2198 [commit: 7] restored snapshot [index: 7, term: 6]"]
[2019/05/01 12:40:58.280 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=2198] [region_id=925]
[2019/05/01 12:40:58.280 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 7, truncated_state: Some(RaftTruncatedState { index: 7, term: 6, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 925, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 97, 255, 112, 105, 95, 255, 98, 107, 95, 99, 111, 255, 109, 109, 255, 105, 116, 95, 105, 110, 116, 255, 101, 255, 114, 118, 97, 108, 0, 0, 0, 252, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 97, 255, 112, 105, 95, 255, 100, 105, 115, 97, 98, 255, 108, 101, 255, 95, 114, 111, 119, 108, 111, 255, 99, 255, 107, 0, 0, 0, 0, 0, 0, 249, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 107, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 926, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 927, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 928, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 2198, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=2198] [region_id=925]
[2019/05/01 12:40:58.299 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 925] 2198"]
[2019/05/01 12:40:58.299 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 925, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 97, 255, 112, 105, 95, 255, 98, 107, 95, 99, 111, 255, 109, 109, 255, 105, 116, 95, 105, 110, 116, 255, 101, 255, 114, 118, 97, 108, 0, 0, 0, 252, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 97, 255, 112, 105, 95, 255, 100, 105, 115, 97, 98, 255, 108, 101, 255, 95, 114, 111, 119, 108, 111, 255, 99, 255, 107, 0, 0, 0, 0, 0, 0, 249, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 107, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 926, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 927, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 928, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 2198, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=2198] [region_id=925]
[2019/05/01 12:40:58.299 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=925]
[2019/05/01 12:40:58.315 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=16.248705ms] [region_id=925]
[2019/05/01 12:40:59.272 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=2199] [region_id=1663]
[2019/05/01 12:40:59.272 -07:00] [INFO] [unknown:719] ["[region 1663] 2199 became follower at term 0"]
[2019/05/01 12:40:59.272 -07:00] [INFO] [unknown:295] ["[region 1663] 2199 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:40:59.272 -07:00] [INFO] [unknown:719] ["[region 1663] 2199 became follower at term 1"]
[2019/05/01 12:40:59.273 -07:00] [INFO] [unknown:920] ["[region 1663] 2199 [term: 1] received a MsgHeartbeat message with higher term from 1665 [term: 6]"]
[2019/05/01 12:40:59.273 -07:00] [INFO] [unknown:719] ["[region 1663] 2199 became follower at term 6"]
[2019/05/01 12:40:59.288 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 2198, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=8] [term=6] [peer_id=2198] [region_id=925]
[2019/05/01 12:40:59.288 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 6, version: 107, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=2198] [region_id=925]
[2019/05/01 12:40:59.288 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 925, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 97, 255, 112, 105, 95, 255, 98, 107, 95, 99, 111, 255, 109, 109, 255, 105, 116, 95, 105, 110, 116, 255, 101, 255, 114, 118, 97, 108, 0, 0, 0, 252, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 97, 255, 112, 105, 95, 255, 100, 105, 115, 97, 98, 255, 108, 101, 255, 95, 114, 111, 119, 108, 111, 255, 99, 255, 107, 0, 0, 0, 0, 0, 0, 249, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 107, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 926, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 927, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 928, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 2198, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 2198, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=2198] [region_id=925]
[2019/05/01 12:40:59.340 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 928, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=9] [term=6] [peer_id=2198] [region_id=925]
[2019/05/01 12:40:59.340 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 7, version: 107, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=2198] [region_id=925]
[2019/05/01 12:40:59.340 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 925, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 97, 255, 112, 105, 95, 255, 98, 107, 95, 99, 111, 255, 109, 109, 255, 105, 116, 95, 105, 110, 116, 255, 101, 255, 114, 118, 97, 108, 0, 0, 0, 252, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 105, 110, 110, 111, 255, 100, 98, 95, 97, 255, 112, 105, 95, 255, 100, 105, 115, 97, 98, 255, 108, 101, 255, 95, 114, 111, 119, 108, 111, 255, 99, 255, 107, 0, 0, 0, 0, 0, 0, 249, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 7, version: 107, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 926, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 927, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 928, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 2198, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 928, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=2198] [region_id=925]
[2019/05/01 12:41:00.301 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=2202] [region_id=517]
[2019/05/01 12:41:00.301 -07:00] [INFO] [unknown:719] ["[region 517] 2202 became follower at term 0"]
[2019/05/01 12:41:00.301 -07:00] [INFO] [unknown:295] ["[region 517] 2202 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:41:00.301 -07:00] [INFO] [unknown:719] ["[region 517] 2202 became follower at term 1"]
[2019/05/01 12:41:00.301 -07:00] [INFO] [unknown:920] ["[region 517] 2202 [term: 1] received a MsgHeartbeat message with higher term from 518 [term: 6]"]
[2019/05/01 12:41:00.301 -07:00] [INFO] [unknown:719] ["[region 517] 2202 became follower at term 6"]
[2019/05/01 12:41:01.276 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_1663_6_7_(default|lock|write).sst] [snap_key=1663_6_7]
[2019/05/01 12:41:01.283 -07:00] [INFO] [unknown:1792] ["[region 1663] 2199 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 7, term: 6]"]
[2019/05/01 12:41:01.283 -07:00] [INFO] [unknown:1816] ["[region 1663] 2199 restored progress of 1664 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:41:01.283 -07:00] [INFO] [unknown:1816] ["[region 1663] 2199 restored progress of 1665 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:41:01.283 -07:00] [INFO] [unknown:1816] ["[region 1663] 2199 restored progress of 1666 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:41:01.283 -07:00] [INFO] [unknown:1816] ["[region 1663] 2199 restored progress of 2199 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:41:01.283 -07:00] [INFO] [unknown:474] ["[region 1663] 2199 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 7, term: 6]"]
[2019/05/01 12:41:01.283 -07:00] [INFO] [unknown:1736] ["[region 1663] 2199 [commit: 7] restored snapshot [index: 7, term: 6]"]
[2019/05/01 12:41:01.283 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=2199] [region_id=1663]
[2019/05/01 12:41:01.283 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 7, truncated_state: Some(RaftTruncatedState { index: 7, term: 6, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 1663, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 108, 111, 99, 107, 255, 95, 119, 97, 105, 255, 116, 95, 116, 255, 105, 109, 101, 111, 117, 255, 116, 0, 255, 0, 0, 0, 0, 0, 0, 248, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 108, 111, 99, 107, 255, 101, 100, 95, 105, 255, 110, 95, 109, 255, 101, 109, 111, 114, 121, 255, 0, 0, 255, 0, 0, 0, 0, 0, 0, 247, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 247, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1664, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1665, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1666, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 2199, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=2199] [region_id=1663]
[2019/05/01 12:41:01.303 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 1663] 2199"]
[2019/05/01 12:41:01.303 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 1663, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 108, 111, 99, 107, 255, 95, 119, 97, 105, 255, 116, 95, 116, 255, 105, 109, 101, 111, 117, 255, 116, 0, 255, 0, 0, 0, 0, 0, 0, 248, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 108, 111, 99, 107, 255, 101, 100, 95, 105, 255, 110, 95, 109, 255, 101, 109, 111, 114, 121, 255, 0, 0, 255, 0, 0, 0, 0, 0, 0, 247, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 247, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1664, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1665, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1666, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 2199, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=2199] [region_id=1663]
[2019/05/01 12:41:01.303 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=1663]
[2019/05/01 12:41:01.327 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=22.895153ms] [region_id=1663]
[2019/05/01 12:41:02.180 -07:00] [INFO] [peer.rs:157] ["replicate peer"] [peer_id=2203] [region_id=1831]
[2019/05/01 12:41:02.180 -07:00] [INFO] [unknown:719] ["[region 1831] 2203 became follower at term 0"]
[2019/05/01 12:41:02.180 -07:00] [INFO] [unknown:295] ["[region 1831] 2203 newRaft [peers: [], term: 0, commit: 0, applied: 0, last_index: 0, last_term: 0]"]
[2019/05/01 12:41:02.180 -07:00] [INFO] [unknown:719] ["[region 1831] 2203 became follower at term 1"]
[2019/05/01 12:41:02.180 -07:00] [INFO] [unknown:920] ["[region 1831] 2203 [term: 1] received a MsgHeartbeat message with higher term from 2104 [term: 7]"]
[2019/05/01 12:41:02.180 -07:00] [INFO] [unknown:719] ["[region 1831] 2203 became follower at term 7"]
[2019/05/01 12:41:02.385 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 2199, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=8] [term=6] [peer_id=2199] [region_id=1663]
[2019/05/01 12:41:02.385 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 6, version: 247, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=2199] [region_id=1663]
[2019/05/01 12:41:02.385 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 1663, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 108, 111, 99, 107, 255, 95, 119, 97, 105, 255, 116, 95, 116, 255, 105, 109, 101, 111, 117, 255, 116, 0, 255, 0, 0, 0, 0, 0, 0, 248, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 108, 111, 99, 107, 255, 101, 100, 95, 105, 255, 110, 95, 109, 255, 101, 109, 111, 114, 121, 255, 0, 0, 255, 0, 0, 0, 0, 0, 0, 247, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 6, version: 247, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1664, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1665, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1666, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 2199, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 2199, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=2199] [region_id=1663]
[2019/05/01 12:41:02.462 -07:00] [INFO] [snap.rs:235] ["saving snapshot file"] [file=/opt/tidb/data/kv/snap/rev_517_6_10_(default|lock|write).sst] [snap_key=517_6_10]
[2019/05/01 12:41:02.493 -07:00] [INFO] [unknown:1792] ["[region 517] 2202 [commit: 0, lastindex: 0, lastterm: 0] starts to restore snapshot [index: 10, term: 6]"]
[2019/05/01 12:41:02.493 -07:00] [INFO] [unknown:1816] ["[region 517] 2202 restored progress of 518 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:41:02.493 -07:00] [INFO] [unknown:1816] ["[region 517] 2202 restored progress of 520 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:41:02.493 -07:00] [INFO] [unknown:1816] ["[region 517] 2202 restored progress of 1355 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: false })]"]
[2019/05/01 12:41:02.493 -07:00] [INFO] [unknown:1816] ["[region 517] 2202 restored progress of 2202 [Some(Progress { matched: 0, next_idx: 1, state: Probe, paused: false, pending_snapshot: 0, recent_active: false, ins: Inflights { start: 0, count: 0, buffer: [] }, is_learner: true })]"]
[2019/05/01 12:41:02.493 -07:00] [INFO] [unknown:474] ["[region 517] 2202 log [committed=0, applied=0, unstable.offset=1, unstable.entries.len()=0] starts to restore snapshot [index: 10, term: 6]"]
[2019/05/01 12:41:02.493 -07:00] [INFO] [unknown:1736] ["[region 517] 2202 [commit: 10] restored snapshot [index: 10, term: 6]"]
[2019/05/01 12:41:02.493 -07:00] [INFO] [peer_storage.rs:866] ["begin to apply snapshot"] [peer_id=2202] [region_id=517]
[2019/05/01 12:41:02.493 -07:00] [INFO] [peer_storage.rs:906] ["apply snapshot with state ok"] [state="RaftApplyState { applied_index: 10, truncated_state: Some(RaftTruncatedState { index: 10, term: 6, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [region="Region { id: 517, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 101, 110, 102, 111, 255, 114, 99, 101, 95, 255, 103, 116, 105, 255, 100, 95, 99, 111, 110, 255, 115, 105, 255, 115, 116, 101, 110, 99, 121, 255, 0, 255, 0, 0, 0, 0, 0, 0, 0, 247, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 101, 113, 95, 114, 255, 97, 110, 103, 101, 255, 95, 105, 110, 255, 100, 101, 120, 95, 100, 255, 105, 118, 255, 101, 95, 108, 105, 109, 105, 255, 116, 255, 0, 0, 0, 0, 0, 0, 0, 248, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 67, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 518, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 520, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1355, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 2202, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=2202] [region_id=517]
[2019/05/01 12:41:02.521 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: RemoveNode, peer: Some(Peer { id: 1666, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=9] [term=6] [peer_id=2199] [region_id=1663]
[2019/05/01 12:41:02.521 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 7, version: 247, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=RemoveNode] [peer_id=2199] [region_id=1663]
[2019/05/01 12:41:02.521 -07:00] [INFO] [apply.rs:1444] ["remove peer successfully"] [region="Region { id: 1663, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 108, 111, 99, 107, 255, 95, 119, 97, 105, 255, 116, 95, 116, 255, 105, 109, 101, 111, 117, 255, 116, 0, 255, 0, 0, 0, 0, 0, 0, 248, 0, 254], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 108, 111, 99, 107, 255, 101, 100, 95, 105, 255, 110, 95, 109, 255, 101, 109, 111, 114, 121, 255, 0, 0, 255, 0, 0, 0, 0, 0, 0, 247, 0, 254], region_epoch: Some(RegionEpoch { conf_ver: 7, version: 247, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 1664, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1665, store_id: 2, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1666, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 2199, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 1666, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=2199] [region_id=1663]
[2019/05/01 12:41:02.553 -07:00] [INFO] [peer.rs:1914] ["snapshot is applied"] [region="Region { id: 517, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 101, 110, 102, 111, 255, 114, 99, 101, 95, 255, 103, 116, 105, 255, 100, 95, 99, 111, 110, 255, 115, 105, 255, 115, 116, 101, 110, 99, 121, 255, 0, 255, 0, 0, 0, 0, 0, 0, 0, 247, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 101, 113, 95, 114, 255, 97, 110, 103, 101, 255, 95, 105, 110, 255, 100, 101, 120, 95, 100, 255, 105, 118, 255, 101, 95, 108, 105, 109, 105, 255, 116, 255, 0, 0, 0, 0, 0, 0, 0, 248, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 67, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 518, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 520, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1355, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 2202, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=2202] [region_id=517]
[2019/05/01 12:41:02.554 -07:00] [INFO] [read.rs:444] ["register ReadDelegate"] [tag="[region 517] 2202"]
[2019/05/01 12:41:02.554 -07:00] [INFO] [region.rs:283] ["begin apply snap data"] [region_id=517]
[2019/05/01 12:41:02.594 -07:00] [INFO] [region.rs:352] ["apply new data"] [time_takes=40.294004ms] [region_id=517]
[2019/05/01 12:41:03.337 -07:00] [INFO] [apply.rs:1034] ["execute admin command"] [command="AdminRequest { cmd_type: ChangePeer, change_peer: Some(ChangePeerRequest { change_type: AddNode, peer: Some(Peer { id: 2202, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), split: None, compact_log: None, transfer_leader: None, verify_hash: None, prepare_merge: None, commit_merge: None, rollback_merge: None, splits: None, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [index=11] [term=6] [peer_id=2202] [region_id=517]
[2019/05/01 12:41:03.337 -07:00] [INFO] [apply.rs:1336] ["exec ConfChange"] [epoch="RegionEpoch { conf_ver: 9, version: 67, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [type=AddNode] [peer_id=2202] [region_id=517]
[2019/05/01 12:41:03.337 -07:00] [INFO] [apply.rs:1391] ["add peer successfully"] [region="Region { id: 517, start_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 101, 110, 102, 111, 255, 114, 99, 101, 95, 255, 103, 116, 105, 255, 100, 95, 99, 111, 110, 255, 115, 105, 255, 115, 116, 101, 110, 99, 121, 255, 0, 255, 0, 0, 0, 0, 0, 0, 0, 247, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], end_key: [116, 128, 0, 0, 0, 0, 0, 0, 255, 33, 95, 105, 128, 0, 0, 0, 0, 255, 0, 0, 1, 1, 101, 113, 95, 114, 255, 97, 110, 103, 101, 255, 95, 105, 110, 255, 100, 101, 120, 95, 100, 255, 105, 118, 255, 101, 95, 108, 105, 109, 105, 255, 116, 255, 0, 0, 0, 0, 0, 0, 0, 248, 255, 0, 0, 0, 0, 0, 0, 0, 0, 247], region_epoch: Some(RegionEpoch { conf_ver: 9, version: 67, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }), peers: [Peer { id: 518, store_id: 1, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 520, store_id: 3, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 1355, store_id: 7, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }, Peer { id: 2202, store_id: 6, is_learner: true, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }], unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer="Peer { id: 2202, store_id: 6, is_learner: false, unknown_fields: UnknownFields { fields: None }, cached_size: CachedSize { size: 0 } }"] [peer_id=2202] [region_id=517]
